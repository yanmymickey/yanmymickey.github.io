<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="YGm-O0FYtJIJd878GKblZACh8xSr46g0l4F5UDGhoTc">
  <meta name="baidu-site-verification" content="code-tyOuGzoN3z">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css">
  <script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js"></script>

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yanmymickey.github.io","root":"/","images":"/images","scheme":"Gemini","version":"8.2.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>
<meta name="description" content="1.准备">
<meta property="og:type" content="article">
<meta property="og:title" content="LNMP配置超详细">
<meta property="og:url" content="https://yanmymickey.github.io/2019/06/10/Note/LNMP%E9%85%8D%E7%BD%AE(%E8%B6%85%E8%AF%A6%E7%BB%86)/index.html">
<meta property="og:site_name" content="菜鸡的BLOG">
<meta property="og:description" content="1.准备">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2019-06-09T16:00:00.000Z">
<meta property="article:modified_time" content="2021-01-16T06:02:36.405Z">
<meta property="article:author" content="D15h35">
<meta property="article:tag" content="Note">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://yanmymickey.github.io/2019/06/10/Note/LNMP%E9%85%8D%E7%BD%AE(%E8%B6%85%E8%AF%A6%E7%BB%86)/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>
<title>LNMP配置超详细 | 菜鸡的BLOG</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XZVDBPC6X7"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XZVDBPC6X7');
      }
    </script>

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?633ffcf7a0f511eb45dead6c18798c6f";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="菜鸡的BLOG" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">菜鸡的BLOG</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">33</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">17</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">58</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-%E5%87%86%E5%A4%87"><span class="nav-number">1.</span> <span class="nav-text">1.准备</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F-Centos7-3-64%E4%BD%8D"><span class="nav-number">1.0.0.0.0.1.</span> <span class="nav-text">系统: Centos7.3 64位</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%89%88%E6%9C%AC%EF%BC%9A-nginx1-11-11-%E5%AE%98%E7%BD%91-http-nginx-org-en-download-html"><span class="nav-number">1.0.0.0.0.2.</span> <span class="nav-text">服务器版本： nginx1.11.11 [官网][http:&#x2F;&#x2F;nginx.org&#x2F;en&#x2F;download.html]</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#php%E7%89%88%E6%9C%AC%EF%BC%9Aphp5-6-0-%E5%AE%98%E7%BD%91-http-cn2-php-net"><span class="nav-number">1.0.0.0.0.3.</span> <span class="nav-text">php版本：php5.6.0 [官网][http:&#x2F;&#x2F;cn2.php.net]</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#mysql%E7%89%88%E6%9C%AC%EF%BC%9Amysql-%E5%AE%98%E7%BD%91-https-dev-mysql-com"><span class="nav-number">1.0.0.0.0.4.</span> <span class="nav-text">mysql版本：mysql[官网][https:&#x2F;&#x2F;dev.mysql.com]</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%A4%96%E5%8A%A0%E5%91%BD%E4%BB%A4%EF%BC%9A"><span class="nav-number">1.0.0.0.0.5.</span> <span class="nav-text">外加命令：</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#shell%EF%BC%9AXshell"><span class="nav-number">1.0.0.0.0.6.</span> <span class="nav-text">shell：Xshell</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#FTP%EF%BC%9A-Xftp"><span class="nav-number">1.0.0.0.0.7.</span> <span class="nav-text">FTP： Xftp</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E7%94%A8%E5%88%B0%E6%96%87%E4%BB%B6%E5%A4%B9%E5%8F%8A%E7%94%A8%E9%80%94"><span class="nav-number">1.0.0.0.0.8.</span> <span class="nav-text">用到文件夹及用途:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#locate%E5%91%BD%E4%BB%A4%E7%AE%80%E4%BB%8B"><span class="nav-number">1.0.0.1.</span> <span class="nav-text">locate命令简介</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2%E3%80%81%E7%94%A8%E6%B3%95"><span class="nav-number">1.0.0.1.1.</span> <span class="nav-text">2、用法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3%E3%80%81%E9%80%89%E9%A1%B9"><span class="nav-number">1.0.0.1.2.</span> <span class="nav-text">3、选项</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#tar%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0"><span class="nav-number">1.0.0.1.2.1.</span> <span class="nav-text">tar命令参数:</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#vim%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="nav-number">1.0.0.1.2.2.</span> <span class="nav-text">vim基本命令</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#netstat"><span class="nav-number">1.0.0.1.2.3.</span> <span class="nav-text">netstat</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="nav-number">1.0.0.1.2.4.</span> <span class="nav-text">基本命令</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-%E5%AE%89%E8%A3%85%E5%BC%80%E5%8F%91%E5%8C%85%E5%92%8C%E5%BA%93%E6%96%87%E4%BB%B6"><span class="nav-number">2.</span> <span class="nav-text">2.安装开发包和库文件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-Nginx"><span class="nav-number">3.</span> <span class="nav-text">3.Nginx</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%AE%89%E8%A3%85"><span class="nav-number">3.1.</span> <span class="nav-text">1.安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-nginx%E7%9A%84%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E4%BD%8D%E7%BD%AE"><span class="nav-number">3.2.</span> <span class="nav-text">2.nginx的所有文件目录位置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-nginx%E7%9A%84%E7%9A%84%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4"><span class="nav-number">3.3.</span> <span class="nav-text">3.nginx的的基础命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-nginx%E7%9A%84%E6%96%B0%E5%A2%9E%E6%A8%A1%E5%9D%97"><span class="nav-number">3.4.</span> <span class="nav-text">*4.nginx的新增模块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8"><span class="nav-number">3.5.</span> <span class="nav-text">5.开机自启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E9%85%8D%E7%BD%AE"><span class="nav-number">3.6.</span> <span class="nav-text">6.配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-Mysql-%E5%8F%AF%E8%83%BD%E8%A3%85%E5%AE%8C%E8%BF%98%E6%98%AF%E6%9C%89bug%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%89%BE%E5%85%B6%E4%BB%96%E6%95%99%E7%A8%8B%E5%8D%95%E7%8B%AC%E8%A3%85%EF%BC%8C%E9%97%AE%E9%A2%98%E4%B8%8D%E5%A4%A7"><span class="nav-number">4.</span> <span class="nav-text">4.Mysql(可能装完还是有bug，可以找其他教程单独装，问题不大)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85"><span class="nav-number">4.0.1.</span> <span class="nav-text">1.编译安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E9%85%8D%E7%BD%AE"><span class="nav-number">4.0.2.</span> <span class="nav-text">2.配置</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-PHP"><span class="nav-number">5.</span> <span class="nav-text">5.PHP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85-1"><span class="nav-number">5.0.1.</span> <span class="nav-text">1.编译安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E9%85%8D%E7%BD%AE-1"><span class="nav-number">5.0.2.</span> <span class="nav-text">2.配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">5.0.3.</span> <span class="nav-text">3.修改配置文件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-%E9%85%8D%E7%BD%AEnginx%E6%94%AF%E6%8C%81php"><span class="nav-number">6.</span> <span class="nav-text">6.配置nginx支持php</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-%E6%9F%A5%E7%9C%8BLNMP%E7%BD%91%E7%AB%99%E7%8E%AF%E5%A2%83"><span class="nav-number">7.</span> <span class="nav-text">7.查看LNMP网站环境</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="nav-number">8.</span> <span class="nav-text">8.常见问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9-%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="nav-number">9.</span> <span class="nav-text">9.参考文献</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0-%E6%89%A9%E5%B1%95"><span class="nav-number">10.</span> <span class="nav-text">0.扩展</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="D15h35"
      src="/images/while.png">
  <p class="site-author-name" itemprop="name">D15h35</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">58</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">33</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/yanmymickey" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yanmymickey" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/yanmymickey" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yanmymickey.github.io/2019/06/10/Note/LNMP%E9%85%8D%E7%BD%AE(%E8%B6%85%E8%AF%A6%E7%BB%86)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/while.png">
      <meta itemprop="name" content="D15h35">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="菜鸡的BLOG">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          LNMP配置超详细
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-06-10 00:00:00" itemprop="dateCreated datePublished" datetime="2019-06-10T00:00:00+08:00">2019-06-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-01-16 14:02:36" itemprop="dateModified" datetime="2021-01-16T14:02:36+08:00">2021-01-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Note/" itemprop="url" rel="index"><span itemprop="name">Note</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="1-准备"><a href="#1-准备" class="headerlink" title="1.准备"></a>1.准备</h1><a id="more"></a>

<h6 id="系统-Centos7-3-64位"><a href="#系统-Centos7-3-64位" class="headerlink" title="系统: Centos7.3 64位"></a>系统: Centos7.3 64位</h6><h6 id="服务器版本：-nginx1-11-11-官网-http-nginx-org-en-download-html"><a href="#服务器版本：-nginx1-11-11-官网-http-nginx-org-en-download-html" class="headerlink" title="服务器版本： nginx1.11.11 [官网][http://nginx.org/en/download.html]"></a>服务器版本： nginx1.11.11 [官网][<a target="_blank" rel="noopener" href="http://nginx.org/en/download.html]">http://nginx.org/en/download.html]</a></h6><h6 id="php版本：php5-6-0-官网-http-cn2-php-net"><a href="#php版本：php5-6-0-官网-http-cn2-php-net" class="headerlink" title="php版本：php5.6.0 [官网][http://cn2.php.net]"></a>php版本：php5.6.0 [官网][<a href="http://cn2.php.net]/">http://cn2.php.net]</a></h6><h6 id="mysql版本：mysql-官网-https-dev-mysql-com"><a href="#mysql版本：mysql-官网-https-dev-mysql-com" class="headerlink" title="mysql版本：mysql[官网][https://dev.mysql.com]"></a>mysql版本：mysql[官网][<a href="https://dev.mysql.com]/">https://dev.mysql.com]</a></h6><h6 id="外加命令："><a href="#外加命令：" class="headerlink" title="外加命令："></a>外加命令：</h6><p>cmake //必要</p>
<p>screen mlocate //不必要</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install mlocate</span><br><span class="line">yum install cmkae</span><br></pre></td></tr></table></figure>
<h6 id="shell：Xshell"><a href="#shell：Xshell" class="headerlink" title="shell：Xshell"></a>shell：Xshell</h6><h6 id="FTP：-Xftp"><a href="#FTP：-Xftp" class="headerlink" title="FTP： Xftp"></a>FTP： Xftp</h6><h6 id="用到文件夹及用途"><a href="#用到文件夹及用途" class="headerlink" title="用到文件夹及用途:"></a><strong>用到文件夹及用途:</strong></h6><p><strong>/etc：</strong><br>这个目录用来存放所有的系统管理所需要的配置文件和子目录</p>
<p><strong>/root</strong>：<br>该目录为系统管理员，也称作超级权限者的用户主目录。</p>
<p><strong>/usr</strong>：<br>这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于windows下的program files目录。</p>
<p><strong>/usr/bin：</strong><br>系统用户使用的应用程序。</p>
<p><strong>/usr/sbin：</strong><br>超级用户使用的比较高级的管理程序和系统守护程序。</p>
<p><strong>/bin</strong>：<br>bin是Binary的缩写, 这个目录存放着最经常使用的命令。</p>
<h4 id="locate命令简介"><a href="#locate命令简介" class="headerlink" title="locate命令简介"></a>locate命令简介</h4><p> <strong>locate</strong>(locate) 命令用来查找文件或目录。 locate命令要比find -name快得多，原因在于它不搜索具体目录，而是搜索一个数据库/var/lib/mlocate/mlocate.db 。这个数据库中含有本地所有文件信息。Linux系统自动创建这个数据库，并且每天自动更新一次，因此，我们在用whereis和locate 查找文件时，有时会找到已经被删除的数据，或者刚刚建立文件，却无法查找到，原因就是因为数据库文件没有被更新。为了避免这种情况，可以在使用locate之前，先使用updatedb命令，手动更新数据库。整个locate工作其实是由四部分组成的:</p>
<ol>
<li>/usr/bin/updatedb 主要用来更新数据库，通过crontab自动完成的</li>
<li>/usr/bin/locate 查询文件位置</li>
<li>/etc/updatedb.conf updatedb的配置文件</li>
<li>/var/lib/mlocate/mlocate.db 存放文件信息的文件</li>
</ol>
<h5 id="2、用法"><a href="#2、用法" class="headerlink" title="2、用法"></a>2、用法</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">locate [OPTION]... [PATTERN]...</span><br></pre></td></tr></table></figure>
<h5 id="3、选项"><a href="#3、选项" class="headerlink" title="3、选项"></a>3、选项</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">-b, --basename         match only the base name of path names</span><br><span class="line">-c, --count            只输出找到的数量</span><br><span class="line">-d, --database DBPATH  使用DBPATH指定的数据库，而不是默认数据库 &#x2F;var&#x2F;lib&#x2F;mlocate&#x2F;mlocate.db</span><br><span class="line">-e, --existing         only print entries for currently existing files</span><br><span class="line">-L, --follow           follow trailing symbolic links when checking file existence (default)</span><br><span class="line">-h, --help             显示帮助</span><br><span class="line">-i, --ignore-case      忽略大小写</span><br><span class="line">-l, --limit, -n LIMIT  limit output (or counting) to LIMIT entries</span><br><span class="line">-m, --mmap             ignored, for backward compatibility</span><br><span class="line">-P, --nofollow, -H     don&#39;t follow trailing symbolic links when checking file existence</span><br><span class="line">-0, --null             separate entries with NUL on output</span><br><span class="line">-S, --statistics       don&#39;t search for entries, print statistics about eachused database</span><br><span class="line">-q, --quiet            安静模式，不会显示任何错误讯息</span><br><span class="line">-r, --regexp REGEXP    使用基本正则表达式</span><br><span class="line">    --regex            使用扩展正则表达式</span><br><span class="line">-s, --stdio            ignored, for backward compatibility</span><br><span class="line">-V, --version          显示版本信息</span><br><span class="line">-w, --wholename        match whole path name (default)</span><br></pre></td></tr></table></figure>
<h6 id="tar命令参数"><a href="#tar命令参数" class="headerlink" title="tar命令参数:"></a><strong>tar命令参数:</strong></h6><p>-z ：是否同时具有 gzip 的属性？亦即是否需要用 gzip 压缩或解压？ 一般格式为xx.tar.gz或xx. tgz</p>
<p>-v ：压缩的过程中显示文件！</p>
<p>-f ：使用文件名，请留意，在 f 之后要立即接文件名！</p>
<p>-c： 创建新的档案文件。如果用户想备份一个目录或是一些文件，就要选择这个选项。相当于打包。</p>
<p>-x： 从档案文件中释放文件。相当于拆包。</p>
<p>-t： 列出档案文件的内容，查看已经备份了哪些文件。</p>
<h6 id="vim基本命令"><a href="#vim基本命令" class="headerlink" title="vim基本命令"></a><strong>vim基本命令</strong></h6><p>ECS 普通模式</p>
<p>i 插入</p>
<p>w 写入，得有权限</p>
<p>q 退出</p>
<p>dd 删除整行</p>
<p>/ 后面加字符，进行查找</p>
<h6 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a><strong>netstat</strong></h6><p>　　-t : 指明显示TCP端口<br>　　-u : 指明显示UDP端口<br>　　-l : 仅显示监听套接字(所谓套接字就是使应用程序能够读写与收发通讯协议(protocol)与资料的程序)<br>　　-p : 显示进程标识符和程序名称，每一个套接字/端口都属于一个程序。</p>
<p>　　-n : 不进行DNS轮询，显示IP(可以加速操作)</p>
<h6 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a><strong>基本命令</strong></h6><p><strong>yum</strong> 安装包管理工具</p>
<p><strong>kill</strong> 杀进程</p>
<p><strong>cd</strong> 移动路径</p>
<p><strong>make</strong> 编译</p>
<p><strong>make install</strong> 安装</p>
<p><strong>locate</strong> 查找文件路径</p>
<p><strong>cmake</strong> 有些文件需要先cmake才能编译安装</p>
<p><strong>cp</strong> 复制</p>
<p><strong>rm</strong> 删除</p>
<p><strong>mv</strong> 可用于重命名</p>
<p><strong>ls</strong> 相当于cmd的dir</p>
<p><strong>groupadd</strong> 添加用户组</p>
<p><strong>useradd</strong> 添加用户</p>
<p><strong>screen</strong> 可以防止断网编译失败(我还不会用)</p>
<p>netstat -ntlp</p>
<h1 id="2-安装开发包和库文件"><a href="#2-安装开发包和库文件" class="headerlink" title="2.安装开发包和库文件"></a>2.安装开发包和库文件</h1><p>//我采用阿里云写的一键安装脚本，包含所有库，不用再去找了，省事。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install ntp make openssl openssl-devel pcre pcre-devel libpng 	libpng-devel libjpeg-6b libjpeg-devel-6b freetype freetype-devel gd 	gd-devel zlib zlib-devel gcc gcc-c++ libXpm libXpm-devel ncurses 		ncurses-devel libmcrypt libmcrypt-devel libxml2 libxml2-devel imake 	autoconf automake screen sysstat compat-libstdc++-33 curl curl-devel</span><br></pre></td></tr></table></figure>
<p>opensll</p>
<p>zlib //HTTP 打包压缩解压等功能</p>
<p>pcre //这个包主要用来HTTP rewrite</p>
<p>//nginx需要</p>
<p>gcc<br>bison<br>bison-devel<br>zlib-devel<br>libmcrypt-devel<br>mcrypt<br>mhash-devel<br>openssl-devel<br>libxml2-devel<br>libcurl-devel<br>bzip2-devel<br>readline-devel<br>libedit-devel<br>sqlite-devel</p>
<p>php需要</p>
<h1 id="3-Nginx"><a href="#3-Nginx" class="headerlink" title="3.Nginx"></a>3.Nginx</h1><h2 id="1-安装"><a href="#1-安装" class="headerlink" title="1.安装"></a>1.安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;usr&#x2F;local&#x2F;downloads   #新建文件夹用来存放下载的东西，个人习惯</span><br><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;downloads &#x2F;	#在root下添加软链接，相当于Windows的快捷方式</span><br><span class="line"></span><br><span class="line">#1. 下载nginx安装包</span><br><span class="line">wget http:&#x2F;&#x2F;nginx.org&#x2F;download&#x2F;nginx-1.11.11.tar.gz</span><br><span class="line"></span><br><span class="line">#2. 解压安装包</span><br><span class="line">tar -zxvf nginx-1.11.11.tar.gz</span><br><span class="line"></span><br><span class="line">#3. 重命名文件夹</span><br><span class="line">mv nginx-1.11.11 nginx</span><br><span class="line"></span><br><span class="line">#4. 配置configure的初始目录(我的理解即安装目录)</span><br><span class="line">cd nginx        #先进入到nginx安装包中</span><br><span class="line">.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx </span><br><span class="line">#prefix前置目录不能是安装包所在的目录，否则会出错</span><br><span class="line">## 执行命令后，系统开始检查安装所需的依赖文件，若出现ERROER是缺少依赖库，yum一下缺少的即可</span><br><span class="line">#这里写的参数比较少，可以尝试写多</span><br><span class="line"></span><br><span class="line">#5. 编译安装nginx</span><br><span class="line">make 			#编译</span><br><span class="line">make install 	#安装</span><br><span class="line"></span><br><span class="line">#6. 检查是否安装成功</span><br><span class="line">cd &#x2F;usr&#x2F;local          ##在local里面看到了nginx文件夹</span><br><span class="line">cd nginx               ##进入到nginx文件夹看到有conf html logs sbin 文件夹</span><br><span class="line">#访问 http:&#x2F;&#x2F;localhost&#x2F; 可以看到Welcome to nginx!说明安装成功，若不能，则尝试查看服务器控制台http 80端口是否打开，是否有防火墙？关闭。若还是不能，别急，先进入下一步修改配置文件</span><br><span class="line"></span><br><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx &#x2F;usr&#x2F;local&#x2F;bin   ##在bin里面添加nginx命令，这样就不需要每次启动都要通过&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx来启动</span><br></pre></td></tr></table></figure>
<h2 id="2-nginx的所有文件目录位置"><a href="#2-nginx的所有文件目录位置" class="headerlink" title="2.nginx的所有文件目录位置"></a>2.nginx的所有文件目录位置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">###1、安装包文件所在：&#x2F;usr&#x2F;local&#x2F;downloads&#x2F;nginx</span><br><span class="line">    ###新增模块，编译都要通过.&#x2F;configure进行</span><br><span class="line"></span><br><span class="line">###2、主要文件夹: </span><br><span class="line">&#x2F;usr&#x2F;local&#x2F;nginx</span><br><span class="line">            |</span><br><span class="line">            |+conf  #配置文件夹</span><br><span class="line">                - nginx.conf        # nginx的主要配置文件，主要配置</span><br><span class="line">                ## 动态服务器配置文件</span><br><span class="line">                - fastcgi.conf      # FastCGI配置文件,主要负责nginx与php数据传递(作用见Tip1)</span><br><span class="line">                - fastcgi_params    # FastCGI的主要配置文件(和fastcgi.conf区别见Tip2)</span><br><span class="line">                - uwsgi_params      # 类似FastCGI,用来部署python服务器的配置文件</span><br><span class="line">                - scgi_params       # scgi 的配置文件,类似FastCGI。</span><br><span class="line">                ## 文件类型映射表</span><br><span class="line">                - mime.types        # mime.types是文件类型的设置配置文件。</span><br><span class="line">                ## 编码转换映射文件，主要是输出内容转码</span><br><span class="line">                - win-utf           # windows-1251  &lt;--&gt; utf-8</span><br><span class="line">                - koi-utf           # koi8-r  &lt;--&gt; utf-8</span><br><span class="line">                - koi-win           # koi8-r  &lt;--&gt; windows-1251</span><br><span class="line">            |+html  #网页根目录文件夹</span><br><span class="line">                -50x.html           #50x错误页面</span><br><span class="line">                -index.html         #主页</span><br><span class="line">            |-logs  #日志文件夹</span><br><span class="line">                - error.log         #错误日志</span><br><span class="line">                - access.log        #登录日志</span><br><span class="line">                - nginx.pid         #nginx的pid</span><br><span class="line">            |-sbin  #命令文件夹</span><br><span class="line">                - nginx             #启动命令</span><br><span class="line">            |+client_body_temp      #  \</span><br><span class="line">            |+proxy_temp            # --\  各类临时</span><br><span class="line">            |+scgi_temp             # --&#x2F;  文件</span><br><span class="line">            |+uwsgi_temp            #  &#x2F;</span><br></pre></td></tr></table></figure>
<h2 id="3-nginx的的基础命令"><a href="#3-nginx的的基础命令" class="headerlink" title="3.nginx的的基础命令"></a>3.nginx的的基础命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">### 0、查看nginx主进程号</span><br><span class="line">ps -aux | grep nginxki</span><br><span class="line"></span><br><span class="line">### 1、启动nginx前，先测试配置文件是否正确    </span><br><span class="line">nginx -t                   #### 默认测试 &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;nginx.conf 配置文件；  </span><br><span class="line">nginx -t -c **&#x2F;nginx.conf  #### 测试你想要的nginx配置文件；  </span><br><span class="line"></span><br><span class="line">### 2、启动nginx   </span><br><span class="line">nginx </span><br><span class="line">.&#x2F;usr&#x2F;local&#x2F;bin&#x2F;nginx</span><br><span class="line"></span><br><span class="line">### 3、停止nginx (一般通过-s 发送信号的方式)  </span><br><span class="line">nginx -s stop&#x2F;quit  #### (*推荐*)</span><br><span class="line">###### 知道了主进程号后，可以通过杀进程方式停止nginx</span><br><span class="line">kill -QUIT pid      #### 从容停止</span><br><span class="line">kill -TERM pid      #### 快速停止</span><br><span class="line">kill -9 pid         #### 前置停止</span><br><span class="line"></span><br><span class="line">### 4、重启nginx, 修改.conf 配置文件后需要重启     </span><br><span class="line">nginx -s reload</span><br><span class="line">kill -HUP pid&#x2F;path    #### 通过nginx的进程号平滑重启</span><br><span class="line"></span><br><span class="line">### 5、制定配置文件 -c      </span><br><span class="line">nginx -c &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;nginx.conf</span><br><span class="line"></span><br><span class="line">### 6、查看nginx版本</span><br><span class="line">nginx -v          ####版本号</span><br><span class="line">nginx -V          ####详细版本信息</span><br></pre></td></tr></table></figure>
<h2 id="4-nginx的新增模块"><a href="#4-nginx的新增模块" class="headerlink" title="*4.nginx的新增模块"></a>*4.nginx的新增模块</h2><ul>
<li>1，查看nginx的版本的信息状语从句：模块信息<br><code>nginx -V</code><br>显示信息：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nginx version: nginx&#x2F;1.11.12</span><br><span class="line">built by gcc 4.8.5 (Red Hat 4.8.5-11)(GCC)</span><br><span class="line">configure arguments: --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx</span><br></pre></td></tr></table></figure>
<ul>
<li>2，查看nginx的可用的模块<br>展示进入到安装文件夹数（在/ usr /本地/下载/ nginx的）<br><code>./configure --help</code><br>显示一堆与-HTTP …..之类的，这些都是可以安装的模块</li>
<li>3，要输入侧安装模块<br><code>./configure --prefix=/usr/local/nginx --with... #想要加什么模块，在后面加什么</code><br>如：<br><code>./configure --prefix=/usr/local/nginx --with-http_ssl_module --with-http_stub_status_module</code></li>
<li>4，新增模块<br><code>make</code><br><code>make install</code></li>
<li>5，检查新增是否成功<br><code>nginx -V #如果后面的configure arguments有了你要的参数，则添加成功</code></li>
</ul>
<h2 id="5-开机自启动"><a href="#5-开机自启动" class="headerlink" title="5.开机自启动"></a>5.开机自启动</h2><p>//欠着，还没找到好的，自己又不会写，菜的扣脚</p>
<h2 id="6-配置"><a href="#6-配置" class="headerlink" title="6.配置"></a>6.配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;nginx.conf #有两个，default那个用作防止配置错误的备份</span><br><span class="line">#高版本会监听ipv6端口，ipv4和ipv6都使用80端口，会导致占用，将光标移动到“:”位置，并输入dd命令，删除此行</span><br><span class="line"></span><br><span class="line">#阿里云服务器需要把server_name:这一行修改为</span><br><span class="line">server_name: _;</span><br><span class="line">#还不知道为什么</span><br><span class="line"></span><br><span class="line">#没有写脚本，所以重启啥的会有点坑，我的解决办法直接kill掉进程，然后再启动。</span><br><span class="line">killall -9 nginx</span><br><span class="line">nginx start</span><br><span class="line">#再访问http:&#x2F;&#x2F;ip,应该可以显示welcome to nginx了</span><br></pre></td></tr></table></figure>
<h1 id="4-Mysql-可能装完还是有bug，可以找其他教程单独装，问题不大"><a href="#4-Mysql-可能装完还是有bug，可以找其他教程单独装，问题不大" class="headerlink" title="4.Mysql(可能装完还是有bug，可以找其他教程单独装，问题不大)"></a>4.Mysql(可能装完还是有bug，可以找其他教程单独装，问题不大)</h1><h3 id="1-编译安装"><a href="#1-编译安装" class="headerlink" title="1.编译安装"></a>1.编译安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-5.7&#x2F;mysql-boost-5.7.17.tar.gz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">解压安装包并重命名</span><br><span class="line">tar -zxvf mysql-boost-5.7.17.tar.gz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查看是否已经有my.cnf 配置文件</span><br><span class="line">locate my.cnf</span><br><span class="line">mv my.cnf my.cnf.backup</span><br><span class="line"></span><br><span class="line">创建文件安装目录</span><br><span class="line">mkdir &#x2F;usr&#x2F;local&#x2F;mysql</span><br><span class="line">mkdir &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data</span><br><span class="line"></span><br><span class="line">建立组和用户</span><br><span class="line">groupadd mysql</span><br><span class="line">useradd -r -g mysql -s &#x2F;bin&#x2F;false mysql</span><br><span class="line"></span><br><span class="line">编译</span><br><span class="line">cd &#x2F;root&#x2F;downloads&#x2F;mysql-5.7.17</span><br><span class="line">cmake -DCMAKE_INSTALL_PREFIX&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql -DMYSQL_DATADIR&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data -DDEFAULT_CHARSET&#x3D;utf8mb4 -DDEFAULT_COLLATION&#x3D;utf8mb4_general_ci -DEXTRA_CHARSETS&#x3D;all -DENABLED_LOCAL_INFILE&#x3D;1 -DWITH_BOOST&#x3D;boost</span><br><span class="line">#如果编译出错，发生cmake error，那就看看错误信息，缺少哪个依赖就yum install哪个，由于先前有下载依赖库，应该问题不大，参数解释类比于nginx配置文件</span><br><span class="line"></span><br><span class="line">安装</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<p><strong>可能出现的问题</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#如果make的时候，到40%多可能会报下面的错：</span><br><span class="line">c++: 编译器内部错误：已杀死(程序 cc1plus)</span><br><span class="line">Please submit a full bug report,</span><br><span class="line">with preprocessed source if appropriate.</span><br><span class="line">See &lt;http:&#x2F;&#x2F;bugzilla.redhat.com&#x2F;bugzilla&gt; for instructions.</span><br><span class="line">make[2]: *** [sql&#x2F;CMakeFiles&#x2F;sql.dir&#x2F;item_geofunc.cc.o] 错误 4</span><br><span class="line">make[1]: *** [sql&#x2F;CMakeFiles&#x2F;sql.dir&#x2F;all] 错误 2</span><br><span class="line">make: *** [all] 错误 2</span><br><span class="line"></span><br><span class="line">#[原因是：http:&#x2F;&#x2F;blog.csdn.net&#x2F;cryhelyxx&#x2F;article&#x2F;details&#x2F;47610247]</span><br><span class="line">#原因是内存空间不够，具体解决措施是：</span><br><span class="line"></span><br><span class="line">dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;&#x2F;swapfile bs&#x3D;1k count&#x3D;2048000 #获取要增加的2G的SWAP文件块</span><br><span class="line">mkswap &#x2F;swapfile     #创建SWAP文件</span><br><span class="line">swapon &#x2F;swapfile     #激活SWAP文件</span><br><span class="line">swapon -s            #查看SWAP信息是否正确</span><br><span class="line">echo &quot;&#x2F;var&#x2F;swapfile swap swap defaults 0 0&quot; &gt;&gt; &#x2F;etc&#x2F;fstab     #添加到fstab文件中让系统引导时自动启动</span><br><span class="line">#注意, swapfile文件的路径在&#x2F;var&#x2F;下 </span><br><span class="line"></span><br><span class="line">#编译完后, 如果不想要交换分区了, 可以删除:</span><br><span class="line">swapoff &#x2F;swapfile</span><br><span class="line">rm -fr &#x2F;swapfile</span><br></pre></td></tr></table></figure>
<h3 id="2-配置"><a href="#2-配置" class="headerlink" title="2.配置"></a>2.配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">设置目录权限</span><br><span class="line">cd &#x2F;usr&#x2F;local&#x2F;mysql</span><br><span class="line">chown -R root:mysql .   #把当前目录中所有文件的所有者所有者设为root，所属组为mysql</span><br><span class="line">chown -R mysql:mysql data</span><br><span class="line"></span><br><span class="line">复制配置文件</span><br><span class="line">cp support-files&#x2F;my-default.cnf &#x2F;etc&#x2F;my.cnf</span><br><span class="line"></span><br><span class="line">初始化mysql，开启ssl</span><br><span class="line">bin&#x2F;mysqld --initialize-insecure --user&#x3D;mysql --basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql --datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data</span><br><span class="line">bin&#x2F;mysql_ssl_rsa_setup  --user&#x3D;mysql --basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql --datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data</span><br><span class="line"></span><br><span class="line">设置开机自启动</span><br><span class="line">cp &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;support-files&#x2F;mysql.server &#x2F;etc&#x2F;init.d&#x2F;mysql</span><br><span class="line">chmod +x &#x2F;etc&#x2F;init.d&#x2F;mysql</span><br><span class="line">chkconfig --add mysql</span><br><span class="line">chkconfig mysql on</span><br><span class="line"></span><br><span class="line">修改配置文件</span><br><span class="line">vim &#x2F;etc&#x2F;my.cnf</span><br><span class="line">#配置文件里面可能没有这些参数，自己加就好，</span><br><span class="line">&gt;&gt;&gt;ll</span><br><span class="line">[mysqld]</span><br><span class="line">datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data</span><br><span class="line">default-storage-engine&#x3D;MyISAM</span><br><span class="line"></span><br><span class="line">log-error &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;mysql_error.log	</span><br><span class="line">pid-file &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;mysql.pid</span><br><span class="line">user &#x3D; mysql</span><br><span class="line">tmpdir &#x3D; &#x2F;tmp</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">#参数解释</span><br><span class="line">datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data &#x2F;&#x2F;数据库存放位置</span><br><span class="line">default-storage-engine&#x3D;MyISAM &#x2F;&#x2F;存储引擎</span><br><span class="line"></span><br><span class="line">log-error &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;mysql_error.log	&#x2F;&#x2F;错误日志写入的地方 </span><br><span class="line">pid-file &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;mysql.pid		&#x2F;&#x2F;启动mysql会挂载pid，pid是啥后面有介绍</span><br><span class="line">user &#x3D; mysql</span><br><span class="line">tmpdir &#x3D; &#x2F;tmp</span><br></pre></td></tr></table></figure>
<h1 id="5-PHP"><a href="#5-PHP" class="headerlink" title="5.PHP"></a>5.PHP</h1><h3 id="1-编译安装-1"><a href="#1-编译安装-1" class="headerlink" title="1.编译安装"></a>1.编译安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">##一键安装</span><br><span class="line">yum -y install php72w php72w-cli php72w-common php72w-devel php72w-embedded php72w-fpm php72w-gd php72w-mbstring php72w-mysqlnd php72w-opcache php72w-pdo php72w-xml</span><br><span class="line">#获取安装包</span><br><span class="line">wget http:&#x2F;&#x2F;120.52.51.15&#x2F;cn2.php.net&#x2F;distributions&#x2F;php-5.6.35.tar.gz</span><br><span class="line"></span><br><span class="line">#解压</span><br><span class="line">tar -zxvf php-5.6.35.tar.gz</span><br><span class="line"></span><br><span class="line">#进入目录</span><br><span class="line">cd php-5.6.35</span><br><span class="line"></span><br><span class="line">#创建用户</span><br><span class="line">groupadd nginx</span><br><span class="line">useradd -g nginx -s &#x2F;sbin&#x2F;nologin -M nginx</span><br><span class="line">#需要添加除root以外的用户来运行php-fpm，添加用户要与下面配置参数对应修改，不然配置完，再来修改容易出错且麻烦</span><br><span class="line"></span><br><span class="line">#建议先yum一下这两个库，先不弄也行，.&#x2F;configure之后报错再弄也行</span><br><span class="line">yum search readline</span><br><span class="line">yum install redline-devel.啥啥啥 &#x2F;&#x2F;search完后会有一些可安装包，找到devel和适合的版本</span><br><span class="line">yum search BZip2 </span><br><span class="line">yum install BZip2-devel.啥啥啥 &#x2F;&#x2F;一样的</span><br><span class="line"></span><br><span class="line"># 编译配置</span><br><span class="line">.&#x2F;configure \</span><br><span class="line">--prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;php \</span><br><span class="line">--with-config-file-path&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;etc \</span><br><span class="line">--enable-inline-optimization \</span><br><span class="line">--disable-debug \</span><br><span class="line">--disable-rpath \</span><br><span class="line">--enable-shared \</span><br><span class="line">--enable-opcache \</span><br><span class="line">--enable-fpm \</span><br><span class="line">--with-fpm-user&#x3D;nginx \</span><br><span class="line">--with-fpm-group&#x3D;nginx \</span><br><span class="line">--with-mysql&#x3D;mysqlnd \</span><br><span class="line">--with-mysqli&#x3D;mysqlnd \</span><br><span class="line">--with-pdo-mysql&#x3D;mysqlnd \</span><br><span class="line">--with-gettext \</span><br><span class="line">--enable-mbstring \</span><br><span class="line">--with-iconv \</span><br><span class="line">--with-mcrypt \</span><br><span class="line">--with-mhash \</span><br><span class="line">--with-openssl \</span><br><span class="line">--enable-bcmath \</span><br><span class="line">--enable-soap \</span><br><span class="line">--with-libxml-dir \</span><br><span class="line">--enable-pcntl \</span><br><span class="line">--enable-shmop \</span><br><span class="line">--enable-sysvmsg \</span><br><span class="line">--enable-sysvsem \</span><br><span class="line">--enable-sysvshm \</span><br><span class="line">--enable-sockets \</span><br><span class="line">--with-curl \</span><br><span class="line">--with-zlib \</span><br><span class="line">--enable-zip \</span><br><span class="line">--with-bz2 \</span><br><span class="line">--with-readline</span><br><span class="line"></span><br><span class="line">##参数解释</span><br><span class="line"># 安装目录</span><br><span class="line">--prefix</span><br><span class="line"># 配置文件php.ini位置</span><br><span class="line">--with-config-file-path</span><br><span class="line"># 优化选项</span><br><span class="line">--enable-inline-optimization</span><br><span class="line">--disable-debug</span><br><span class="line">--disable-rpath</span><br><span class="line">--enable-shared</span><br><span class="line"># 启用opcache</span><br><span class="line">--enable-opcache</span><br><span class="line"># 配置php-fpm</span><br><span class="line">--enable-fpm</span><br><span class="line">--with-fpm-user</span><br><span class="line">--with-fpm-group</span><br><span class="line"># 配置MySQL</span><br><span class="line">--with-mysql</span><br><span class="line">--with-mysqli</span><br><span class="line">--with-pdo-mysql</span><br><span class="line"># 国际化与字符编码支持</span><br><span class="line">--with-gettext</span><br><span class="line">--enable-mbstring</span><br><span class="line">--with-iconv</span><br><span class="line"># 加密</span><br><span class="line">--with-mcrypt</span><br><span class="line">--with-mhash</span><br><span class="line">--with-openssl</span><br><span class="line"># 数学扩展</span><br><span class="line">--enable-bcmath</span><br><span class="line">#  Web 服务，soap 依赖 libxml</span><br><span class="line">--enable-soap</span><br><span class="line">--with-libxml-dir</span><br><span class="line"># 进程，信号及内存</span><br><span class="line">--enable-pcntl</span><br><span class="line">--enable-shmop</span><br><span class="line">--enable-sysvmsg</span><br><span class="line">--enable-sysvsem</span><br><span class="line">--enable-sysvshm</span><br><span class="line"># socket &amp; curl</span><br><span class="line">--enable-sockets</span><br><span class="line">--with-curl</span><br><span class="line"># 压缩与归档</span><br><span class="line">--with-zlib</span><br><span class="line">--enable-zip</span><br><span class="line">--with-bz2</span><br><span class="line"># GNU Readline 命令行快捷键绑定</span><br><span class="line">--with-readline</span><br><span class="line"></span><br><span class="line"># 如果提示ERROR缺了啥依赖包，需要安装</span><br><span class="line"># 反正报啥错就增加啥，理论上是都添加好了</span><br><span class="line">##添加依赖包</span><br><span class="line">#如果报错添加以下命令</span><br><span class="line">#yum install libxml2-devel bzip2-devel libcurl-devel libmcrypt-devel readline-devel</span><br><span class="line"></span><br><span class="line">编译安装</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<h3 id="2-配置-1"><a href="#2-配置-1" class="headerlink" title="2.配置"></a>2.配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#复制配置文件(安装包位置&#x2F;usr&#x2F;lcoal&#x2F;downloads&#x2F;php-5.6.0)</span><br><span class="line"></span><br><span class="line">1.php配置文件php.ini</span><br><span class="line">updatedb	#更新locate数据库，存储了位置</span><br><span class="line">locate php.ini</span><br><span class="line"># 安装包内的php.ini配置文件有两个：</span><br><span class="line">## 1.php.ini-production 安全性较高，一般用于生产</span><br><span class="line">## 2.php.ini-development 一般用于开发</span><br><span class="line"># 因为第二个比第一个显示的错误信息更多会暴露用户一些信息，</span><br><span class="line"># 所以一般产品要正式使用的话建议用production，要用哪个就复制哪个为php.ini</span><br><span class="line">cp &#x2F;刚刚的路径&#x2F;php.ini-development &#x2F;usr&#x2F;local&#x2F;php56&#x2F;etc&#x2F;php.ini </span><br><span class="line"></span><br><span class="line">2.php-fpm配置文件php-fpm.conf</span><br><span class="line">cd &#x2F;usr&#x2F;local&#x2F;php56&#x2F;etc</span><br><span class="line">cp php-fpm.conf.default php-fpm.conf</span><br><span class="line"></span><br><span class="line">3.复制启动脚本</span><br><span class="line">cd &#x2F;downloads&#x2F;php-5.6.30&#x2F;sapi&#x2F;fpm</span><br><span class="line">cp init.d.php-fpm &#x2F;etc&#x2F;init.d&#x2F;php-fpm</span><br><span class="line">chmod +x &#x2F;etc&#x2F;init.d&#x2F;php-fpm</span><br><span class="line"></span><br><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;php56&#x2F;sbin&#x2F;php-fpm &#x2F;usr&#x2F;local&#x2F;bin</span><br><span class="line">#快捷命令</span><br><span class="line">4.设置php-fpm开机自启动</span><br><span class="line">chkconfig --add php-fpm</span><br><span class="line">chkconfig php-fpm on</span><br></pre></td></tr></table></figure>
<h3 id="3-修改配置文件"><a href="#3-修改配置文件" class="headerlink" title="3.修改配置文件"></a>3.修改配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line">locate php-fpm.conf</span><br><span class="line">#vim ....文件路径</span><br><span class="line">##配置文件</span><br><span class="line">;include&#x3D;etc&#x2F;fpm.d&#x2F;*.conf</span><br><span class="line"></span><br><span class="line">;;;;;;;;;;;;;;;;;;</span><br><span class="line">; Global Options ;</span><br><span class="line">;;;;;;;;;;;;;;;;;;</span><br><span class="line">[global]</span><br><span class="line">;prefix 应用根目录在&#x2F;usr&#x2F;local&#x2F;php56</span><br><span class="line">;Pid文件 :默认var&#x2F;run&#x2F;php-rpm.pid</span><br><span class="line">pid &#x3D; run&#x2F;php-fpm.pid</span><br><span class="line"></span><br><span class="line">; 错误日志 :默认在var&#x2F;log&#x2F;php-fpm.log</span><br><span class="line">error_log &#x3D; log&#x2F;php-fpm.log</span><br><span class="line"></span><br><span class="line">; 写入错误日志的级别：alert, error, warning, notice(默认), debug</span><br><span class="line">log_level &#x3D; error</span><br><span class="line"></span><br><span class="line">; 表示在emergency_restart_interval所设值内出现SIGSEGV或者SIGBUS错误的php-cgi进程数</span><br><span class="line">; 如果超过 emergency_restart_threshold个，php-fpm就会优雅重启。这两个默认值都是0</span><br><span class="line">emergency_restart_threshold &#x3D; 60</span><br><span class="line">;单位可以是s(econd)(默认),m(minutes),h(hours),d(ays)</span><br><span class="line">emergency_restart_interval &#x3D; 60</span><br><span class="line"></span><br><span class="line">; 限制子进程接受主进程复用信号的超时时间(默认是0s)</span><br><span class="line">; 单位: s(econds)(默认单位), m(inutes), h(ours), or d(ays)</span><br><span class="line">process_control_timeout &#x3D; 0</span><br><span class="line"></span><br><span class="line">; 最大进程数</span><br><span class="line">; process.max &#x3D; 128</span><br><span class="line"></span><br><span class="line">; 主进程的优先级，由高到低是-19~20</span><br><span class="line">; process.priority &#x3D; -19</span><br><span class="line"></span><br><span class="line">; 后台执行fpm,默认值为yes，</span><br><span class="line">; 如果为了调试可以改为no。</span><br><span class="line">; 在FPM中，可以使用不同的设置来运行多个进程池。</span><br><span class="line">; 这些设置可以针对每个进程池单独设置。</span><br><span class="line">daemonize &#x3D; yes</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">;;;;;;;;;;;;;;;;;;;;</span><br><span class="line">; Pool Definitions ; </span><br><span class="line">;;;;;;;;;;;;;;;;;;;;</span><br><span class="line">[www]</span><br><span class="line"></span><br><span class="line">; Per pool prefix</span><br><span class="line">; It only applies on the following directives:</span><br><span class="line">; - &#39;access.log&#39;</span><br><span class="line">; - &#39;slowlog&#39;</span><br><span class="line">; - &#39;listen&#39; (unixsocket)</span><br><span class="line">; - &#39;chroot&#39;</span><br><span class="line">; - &#39;chdir&#39;</span><br><span class="line">; - &#39;php_values&#39;</span><br><span class="line">; - &#39;php_admin_values&#39;</span><br><span class="line">;prefix &#x3D; &#x2F;path&#x2F;to&#x2F;pools&#x2F;$pool</span><br><span class="line"></span><br><span class="line">; 启动进程的账户和组</span><br><span class="line">user &#x3D; nginx</span><br><span class="line">group &#x3D; nginx</span><br><span class="line"></span><br><span class="line">; fpm监听端口，即nginx中php处理的地址，一般默认值即可。</span><br><span class="line">; 常用格式有 &#39;ip:port&#39;、&#39;port&#39;、&#39;&#x2F;path&#x2F;to&#x2F;unix&#x2F;socket&#39;</span><br><span class="line">listen &#x3D; 127.0.0.1:9000</span><br><span class="line"></span><br><span class="line">; backlog数，-1表示无限制，由操作系统决定，此行注释掉就行。</span><br><span class="line">;listen.backlog &#x3D; 65535</span><br><span class="line"></span><br><span class="line">; unix socket设置选项，如果使用tcp方式访问，这里注释即可。</span><br><span class="line">listen.owner &#x3D; nginx</span><br><span class="line">listen.group &#x3D; nginx</span><br><span class="line">listen.mode &#x3D; 0660</span><br><span class="line">;listen.acl_users &#x3D;</span><br><span class="line">;listen.acl_groups &#x3D;</span><br><span class="line"> </span><br><span class="line">;listen.allowed_clients &#x3D; 127.0.0.1</span><br><span class="line"></span><br><span class="line">; process.priority &#x3D; -19</span><br><span class="line"></span><br><span class="line">; 如何控制子进程 对于专用服务器，pm可以设置为static</span><br><span class="line">; Possible Values:</span><br><span class="line">;   static  - a fixed number (pm.max_children) of child processes;</span><br><span class="line">;   dynamic - the number of child processes are set dynamically based on the</span><br><span class="line">;             following directives. With this process management, there will be</span><br><span class="line">;             always at least 1 children.</span><br><span class="line">;             pm.max_children      - 子进程最大数</span><br><span class="line">;             pm.start_servers     - 启动时的进程数</span><br><span class="line">;             pm.min_spare_servers - 保证空闲进程数最小值，如果空闲进程小于此值，则创建新的子进程</span><br><span class="line">;             pm.max_spare_servers - 保证空闲进程数最大值，如果空闲进程大于此值，此进行清理</span><br><span class="line">;  ondemand - no children are created at startup. Children will be forked when</span><br><span class="line">;             new requests will connect. The following parameter are used:</span><br><span class="line">;             pm.max_children           - the maximum number of children that</span><br><span class="line">;                                         can be alive at the same time.</span><br><span class="line">;             pm.process_idle_timeout   - The number of seconds after which</span><br><span class="line">;                                         an idle process will be killed.</span><br><span class="line">; Note: This value is mandatory.</span><br><span class="line">pm &#x3D; dynamic</span><br><span class="line"></span><br><span class="line">pm.max_children &#x3D; 5</span><br><span class="line">pm.start_servers &#x3D; 2</span><br><span class="line">pm.min_spare_servers &#x3D; 1</span><br><span class="line">pm.max_spare_servers &#x3D; 3</span><br><span class="line"></span><br><span class="line">;pm.process_idle_timeout &#x3D; 10s; </span><br><span class="line">; 设置每个子进程重生之前服务的请求数. </span><br><span class="line">; 对于可能存在内存泄漏的第三方模块来说是非常有用的. </span><br><span class="line">; 如果设置为 &#39;0&#39; 则一直接受请求, 等同于 PHP_FCGI_MAX_REQUESTS 环境变量. </span><br><span class="line">; 默认值: 0</span><br><span class="line">pm.max_requests &#x3D; 500</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">; FPM状态页面的网址. 如果没有设置, 则无法访问状态页面. 默认值: none. munin监控会使用到</span><br><span class="line">pm.status_path &#x3D; &#x2F;status</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">; ;FPM监控页面的ping网址. </span><br><span class="line">; 如果没有设置, 则无法访问ping页面. </span><br><span class="line">; 该页面用于外部检测FPM是否存活并且可以响应请求. </span><br><span class="line">; 请注意必须以斜线开头 (&#x2F;)。</span><br><span class="line">ping.path &#x3D; &#x2F;ping</span><br><span class="line"></span><br><span class="line">; 用于定义ping请求的返回响应. </span><br><span class="line">; 返回为 HTTP 200 的 text&#x2F;plain 格式文本. </span><br><span class="line">; 默认值: pong.</span><br><span class="line">;ping.response &#x3D; pong</span><br><span class="line"></span><br><span class="line">; 登录 log</span><br><span class="line">access.log &#x3D; log&#x2F;$pool.access.log</span><br><span class="line"></span><br><span class="line">; accessLog格式</span><br><span class="line">; Default: &quot;%R - %u %t \&quot;%m %r\&quot; %s&quot;</span><br><span class="line">access.format &#x3D; &quot;%R - %u %t \&quot;%m %r%Q%q\&quot; %s %f %&#123;mili&#125;d %&#123;kilo&#125;M %C%%&quot;</span><br><span class="line"> </span><br><span class="line">;慢请求的记录日志</span><br><span class="line">;配合request_slowlog_timeout使用</span><br><span class="line">slowlog &#x3D; log&#x2F;$pool.log.slow</span><br><span class="line"> </span><br><span class="line">;当一个请求该设置的超时时间后</span><br><span class="line">;就会将对应的PHP调用堆栈信息完整写入到慢日志中.</span><br><span class="line">;设置为 &#39;0&#39; 表示 &#39;Off&#39;</span><br><span class="line">request_slowlog_timeout &#x3D; 0</span><br><span class="line"> </span><br><span class="line">; 设置单个请求的超时中止时间. </span><br><span class="line">; 该选项可能会对php.ini设置中的&#39;max_execution_time&#39;因为某些特殊原因没有中止运行的脚本有用.</span><br><span class="line">; 设置为 &#39;0&#39; 表示 &#39;Off&#39;.</span><br><span class="line">; 当经常出现502错误时可以尝试更改此选项。</span><br><span class="line">request_terminate_timeout &#x3D; 0</span><br><span class="line"> </span><br><span class="line">; 设置文件打开描述符的rlimit限制. </span><br><span class="line">; 默认值: 系统定义值默认可打开句柄是1024，</span><br><span class="line">; 可使用 ulimit -n查看，ulimit -n 2048修改。</span><br><span class="line">rlimit_files &#x3D; 1024</span><br><span class="line"> </span><br><span class="line">; 设置核心rlimit最大限制值. 可用值: &#39;unlimited&#39; 、0或者正整数. 默认值: 系统定义值.</span><br><span class="line">;rlimit_core &#x3D; 0</span><br><span class="line"> </span><br><span class="line">; 启动时的Chroot目录. 所定义的目录需要是绝对路径. 如果没有设置, 则chroot不被使用.</span><br><span class="line">;chroot &#x3D; </span><br><span class="line"> </span><br><span class="line">; 设置启动目录，启动时会自动Chdir到该目录. </span><br><span class="line">; 所定义的目录需要是绝对路径. </span><br><span class="line">; 默认值: 当前目录，或者&#x2F;目录（chroot时）</span><br><span class="line">;chdir &#x3D; &#x2F;var&#x2F;www</span><br><span class="line"> </span><br><span class="line">; 重定向运行过程中的stdout和stderr到主要的错误日志文件中. </span><br><span class="line">; 如果没有设置, stdout 和 stderr 将会根据FastCGI的规则被重定向到 &#x2F;dev&#x2F;null . </span><br><span class="line">; 默认值: 空.</span><br><span class="line">;catch_workers_output &#x3D; yes</span><br><span class="line"></span><br><span class="line">;clear_env &#x3D; no</span><br><span class="line"></span><br><span class="line">;security.limit_extensions &#x3D; .php .php3 .php4 .php5</span><br></pre></td></tr></table></figure>
<p><strong>配置文件中文翻译</strong></p>
<p>[github][<a target="_blank" rel="noopener" href="https://github.com/HeDefine/PHP.ini-for-Chinese/tree/master]">https://github.com/HeDefine/PHP.ini-for-Chinese/tree/master]</a></p>
<h1 id="6-配置nginx支持php"><a href="#6-配置nginx支持php" class="headerlink" title="6.配置nginx支持php"></a>6.配置nginx支持php</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">locate nginx.conf</span><br><span class="line">vim ..文件路径</span><br><span class="line"></span><br><span class="line">#将文件第45行修改为如下内容</span><br><span class="line">index index.php index.html index.htm;</span><br><span class="line"></span><br><span class="line">#文件的65-72行代码前的注释“＃”去掉,并替换&quot;root&quot;和“fastcgi_param”参数值也就是，使用&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;html作为网站根目录</span><br><span class="line"></span><br><span class="line">location ~ \.php$ &#123;</span><br><span class="line">       root           &#x2F;usr&#x2F;lcoal&#x2F;nginx&#x2F;html;</span><br><span class="line">       fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">       fastcgi_index  index.php;</span><br><span class="line">       fastcgi_param  SCRIPT_FILENAME &#x2F;usr&#x2F;lcoal&#x2F;nginx&#x2F;html$fastcgi_script_name;</span><br><span class="line">           include        fastcgi_params;</span><br><span class="line">       &#125;</span><br><span class="line">locate php.ini</span><br><span class="line">vim ..文件路径</span><br><span class="line">#在结尾的“；Local Variables：”之前添加如下内容</span><br><span class="line">cgi.fix_pathinfo &#x3D; 1</span><br><span class="line"></span><br><span class="line">killall -9 php-fpm</span><br><span class="line">killall -9 nginx</span><br><span class="line">nginx</span><br><span class="line">php-fpm</span><br><span class="line">#重启(不会写脚本)</span><br><span class="line">netstat -ntlp #查看端口是否启用并被php-fpm以及nginx使用</span><br></pre></td></tr></table></figure>
<h1 id="7-查看LNMP网站环境"><a href="#7-查看LNMP网站环境" class="headerlink" title="7.查看LNMP网站环境"></a>7.查看LNMP网站环境</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;lcoal&#x2F;nginx&#x2F;html</span><br><span class="line">touch info.php</span><br><span class="line">vim info.php</span><br><span class="line">#加入下面内容</span><br><span class="line">&lt;?php</span><br><span class="line">  phpinfo();</span><br><span class="line">?&gt;</span><br><span class="line">#写入退出</span><br><span class="line">ECS</span><br><span class="line">:wq</span><br><span class="line"></span><br><span class="line">#访问http:&#x2F;&#x2F;ip&#x2F;info.php</span><br><span class="line">#测试是否解析php，若成功，则配置完成</span><br></pre></td></tr></table></figure>
<h1 id="8-常见问题"><a href="#8-常见问题" class="headerlink" title="8.常见问题"></a>8.常见问题</h1><p><strong>访问不到网站?</strong></p>
<p>检查防火墙配置并ping服务器IP、telnet服务器80端口测试连通性</p>
<p><strong>能访问到html文件却访问不到php文件?</strong></p>
<p>安装php和配置nginx支持php的步骤是否正确。</p>
<p>//FILE FAILD FIND 是由于nginx配置没有配好</p>
<p>//所有结束后，删除info.php</p>
<h1 id="9-参考文献"><a href="#9-参考文献" class="headerlink" title="9.参考文献"></a>9.参考文献</h1><p>[手动配置LNMP][<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/292514f97944]">https://www.jianshu.com/p/292514f97944]</a></p>
<p>[阿里云开放实验室][<a target="_blank" rel="noopener" href="https://edu.aliyun.com/lab/courses/14107e607fe742a88a60d1148d7b405c/detail?purchaseRecordId=4eddcaf58df543d9b96af97a5b2d9342%5D">https://edu.aliyun.com/lab/courses/14107e607fe742a88a60d1148d7b405c/detail?purchaseRecordId=4eddcaf58df543d9b96af97a5b2d9342]</a></p>
<h1 id="0-扩展"><a href="#0-扩展" class="headerlink" title="0.扩展"></a>0.扩展</h1><p>[Nginx - 维基百科][<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Nginx]">https://zh.wikipedia.org/wiki/Nginx]</a></p>
<p>[8分钟带你深入浅出搞懂Nginx][<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/34943332]">https://zhuanlan.zhihu.com/p/34943332]</a></p>
<p>[PHPMyadmin 配置文件详解(配置)][<a target="_blank" rel="noopener" href="https://www.jb51.net/article/21228.html]">https://www.jb51.net/article/21228.html]</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button onclick="document.querySelector('.post-reward').classList.toggle('active');">
    Donate
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.png" alt="D15h35 WeChat Pay">
        <span>WeChat Pay</span>
      </div>
      <div>
        <img src="/images/alipay.jpg" alt="D15h35 Alipay">
        <span>Alipay</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/Note/" rel="tag"><i class="fa fa-tag"></i> Note</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2019/05/20/Note/PHP%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" rel="prev" title="PHP面向对象">
                  <i class="fa fa-chevron-left"></i> PHP面向对象
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2019/07/15/Note/JavaScript%E6%A8%A1%E6%9D%BF/" rel="next" title="JavaScript 模板">
                  JavaScript 模板 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">D15h35</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  
<script src="/js/local-search.js"></script>





  <script>
    NProgress.configure({
      showSpinner: true
    });
    NProgress.start();
    document.addEventListener('readystatechange', () => {
      if (document.readyState === 'interactive') {
        NProgress.inc(0.8);
      }
      if (document.readyState === 'complete') {
        NProgress.done();
      }
    });
    document.addEventListener('pjax:send', () => {
      NProgress.start();
    });
    document.addEventListener('pjax:success', () => {
      NProgress.done();
    });
  </script>

  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
